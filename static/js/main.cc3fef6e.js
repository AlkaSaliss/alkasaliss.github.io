/*! For license information please see main.cc3fef6e.js.LICENSE.txt */
(()=>{var __webpack_modules__={2388:t=>{var e,n=n||{REVISION:"ALPHA"};!function(t){var e=function(t,e){if(!t)throw e||"Assertion failed"},n=function(t,e,n){return t.hasOwnProperty(e)?t[e]:n},r=!1,i=0,o=function(){if(r)return r=!1,i;var t=2*Math.random()-1,e=2*Math.random()-1,n=t*t+e*e;if(0===n||n>1)return o();var a=Math.sqrt(-2*Math.log(n)/n);return i=e*a,r=!0,t*a},a=function(t){if("undefined"===typeof t||isNaN(t))return[];if("undefined"===typeof ArrayBuffer){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e}return new Float64Array(t)},s=function(t,e,n){for(var r,i="undefined"!==typeof n,a=[],s=0;s<t;s++){for(var c=[],l=0;l<e;l++)i?c.push(n):c.push((r=1e-4,0+o()*r));a.push(c)}return a},c=function(t,e){for(var n=t.length,r=0,i=0;i<n;i++){var o=t[i],a=e[i];r+=(o-a)*(o-a)}return r},l=function(t,n,r){var i=Math.sqrt(t.length),o=Math.floor(i);e(o===i,"D should have square number of elements.");for(var s=Math.log(n),c=a(o*o),l=a(o),u=0;u<o;u++){for(var h=-1/0,d=1/0,p=1,f=!1,m=0;!f;){for(var g=0,y=0;y<o;y++){var v=Math.exp(-t[u*o+y]*p);u===y&&(v=0),l[y]=v,g+=v}var b=0;for(y=0;y<o;y++){if(0===g)v=0;else v=l[y]/g;l[y]=v,v>1e-7&&(b-=v*Math.log(v))}b>s?(h=p,d===1/0?p*=2:p=(p+d)/2):(d=p,h===-1/0?p/=2:p=(p+h)/2),m++,Math.abs(b-s)<r&&(f=!0),m>=50&&(f=!0)}for(y=0;y<o;y++)c[u*o+y]=l[y]}var x=a(o*o),_=2*o;for(u=0;u<o;u++)for(y=0;y<o;y++)x[u*o+y]=Math.max((c[u*o+y]+c[y*o+u])/_,1e-100);return x};function u(t){return t>0?1:t<0?-1:0}var h=function(t){t=t||{};this.perplexity=n(t,"perplexity",30),this.dim=n(t,"dim",2),this.epsilon=n(t,"epsilon",10),this.iter=0};h.prototype={initDataRaw:function(t){var n=t.length,r=t[0].length;e(n>0," X is empty? You must have some data!"),e(r>0," X[0] is empty? Where is the data?");var i=function(t){for(var e=t.length,n=a(e*e),r=0;r<e;r++)for(var i=r+1;i<e;i++){var o=c(t[r],t[i]);n[r*e+i]=o,n[i*e+r]=o}return n}(t);this.P=l(i,this.perplexity,1e-4),this.N=n,this.initSolution()},initDataDist:function(t){var n=t.length;e(n>0," X is empty? You must have some data!");for(var r=a(n*n),i=0;i<n;i++)for(var o=i+1;o<n;o++){var s=t[i][o];r[i*n+o]=s,r[o*n+i]=s}this.P=l(r,this.perplexity,1e-4),this.N=n,this.initSolution()},initSolution:function(){this.Y=s(this.N,this.dim),this.gains=s(this.N,this.dim,1),this.ystep=s(this.N,this.dim,0),this.iter=0},getSolution:function(){return this.Y},step:function(){this.iter+=1;for(var t=this.N,e=this.costGrad(this.Y),n=e.cost,r=e.grad,i=a(this.dim),o=0;o<t;o++)for(var s=0;s<this.dim;s++){var c=r[o][s],l=this.ystep[o][s],h=this.gains[o][s],d=u(c)===u(l)?.8*h:h+.2;d<.01&&(d=.01),this.gains[o][s]=d;var p=(this.iter<250?.5:.8)*l-this.epsilon*d*r[o][s];this.ystep[o][s]=p,this.Y[o][s]+=p,i[s]+=this.Y[o][s]}for(o=0;o<t;o++)for(s=0;s<this.dim;s++)this.Y[o][s]-=i[s]/t;return n},debugGrad:function(){for(var t=this.N,e=this.costGrad(this.Y),n=(e.cost,e.grad),r=1e-5,i=0;i<t;i++)for(var o=0;o<this.dim;o++){var a=this.Y[i][o];this.Y[i][o]=a+r;var s=this.costGrad(this.Y);this.Y[i][o]=a-r;var c=this.costGrad(this.Y),l=n[i][o],u=(s.cost-c.cost)/(2*r);console.log(i+","+o+": gradcheck analytic: "+l+" vs. numerical: "+u),this.Y[i][o]=a}},costGrad:function(t){for(var e=this.N,n=this.dim,r=this.P,i=this.iter<100?4:1,o=a(e*e),s=0,c=0;c<e;c++)for(var l=c+1;l<e;l++){for(var u=0,h=0;h<n;h++){var d=t[c][h]-t[l][h];u+=d*d}var p=1/(1+u);o[c*e+l]=p,o[l*e+c]=p,s+=2*p}for(var f=e*e,m=a(f),g=0;g<f;g++)m[g]=Math.max(o[g]/s,1e-100);var y=0,v=[];for(c=0;c<e;c++){var b=new Array(n);for(h=0;h<n;h++)b[h]=0;for(l=0;l<e;l++){y+=-r[c*e+l]*Math.log(m[c*e+l]);var x=4*(i*r[c*e+l]-m[c*e+l])*o[c*e+l];for(h=0;h<n;h++)b[h]+=x*(t[c][h]-t[l][h])}v.push(b)}return{cost:y,grad:v}}},t.tSNE=h}(n),e=n,"undefined"===typeof t.exports?window.tsnejs=e:t.exports=e},7087:function(t,e,n){(function(){"use strict";var t;function e(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};var i=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function o(t,e){if(e)t:{var n=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];if(!(a in n))break t;n=n[a]}(e=e(o=n[t=t[t.length-1]]))!=o&&null!=e&&r(n,t,{configurable:!0,writable:!0,value:e})}}function a(t){return(t={next:t})[Symbol.iterator]=function(){return this},t}function s(t){var n="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return n?n.call(t):{next:e(t)}}function c(t){if(!(t instanceof Array)){t=s(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}o("Symbol",(function(t){function e(t,e){this.g=t,r(this,"description",{configurable:!0,writable:!0,value:e})}if(t)return t;e.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function t(r){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new e(n+(r||"")+"_"+i++,r)}})),o("Symbol.iterator",(function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<n.length;o++){var s=i[n[o]];"function"===typeof s&&"function"!=typeof s.prototype[t]&&r(s.prototype,t,{configurable:!0,writable:!0,value:function(){return a(e(this))}})}return t}));var l,u="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)l=Object.setPrototypeOf;else{var h;t:{var d={};try{d.__proto__={a:!0},h=d.a;break t}catch(ye){}h=!1}l=h?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var p=l;function f(t,e){if(t.prototype=u(e.prototype),t.prototype.constructor=t,p)p(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(e,n);r&&Object.defineProperty(t,n,r)}else t[n]=e[n];t.ea=e.prototype}function m(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function g(t){if(t.l)throw new TypeError("Generator is already running");t.l=!0}function y(t,e){t.j={U:e,V:!0},t.g=t.m||t.s}function v(t,e,n){return t.g=n,{value:e}}function b(t){this.g=new m,this.h=t}function x(t,e,n,r){try{var i=e.call(t.g.i,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return t.g.l=!1,i;var o=i.value}catch(a){return t.g.i=null,y(t.g,a),_(t)}return t.g.i=null,r.call(t.g,o),_(t)}function _(t){for(;t.g.g;)try{var e=t.h(t.g);if(e)return t.g.l=!1,{value:e.value,done:!1}}catch(n){t.g.h=void 0,y(t.g,n)}if(t.g.l=!1,t.g.j){if(e=t.g.j,t.g.j=null,e.V)throw e.U;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function w(t){this.next=function(e){return g(t.g),t.g.i?e=x(t,t.g.i.next,e,t.g.o):(t.g.o(e),e=_(t)),e},this.throw=function(e){return g(t.g),t.g.i?e=x(t,t.g.i.throw,e,t.g.o):(y(t.g,e),e=_(t)),e},this.return=function(e){return function(t,e){g(t.g);var n=t.g.i;return n?x(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.g.return):(t.g.return(e),_(t))}(t,e)},this[Symbol.iterator]=function(){return this}}function S(t,e){return e=new w(new b(e)),p&&t.prototype&&p(e,t.prototype),e}m.prototype.o=function(t){this.h=t},m.prototype.return=function(t){this.j={return:t},this.g=this.s};var T="function"==typeof Object.assign?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};o("Object.assign",(function(t){return t||T})),o("Promise",(function(t){function e(t){this.h=0,this.i=void 0,this.g=[],this.o=!1;var e=this.j();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.g=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.h=function(t){if(null==this.g){this.g=[];var e=this;this.i((function(){e.l()}))}this.g.push(t)};var o=i.setTimeout;n.prototype.i=function(t){o(t,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var t=this.g;this.g=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(t){this.i((function(){throw t}))},e.prototype.j=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.C),reject:t(this.l)}},e.prototype.C=function(t){if(t===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.F(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.u(t):this.m(t)}},e.prototype.u=function(t){var e=void 0;try{e=t.then}catch(n){return void this.l(n)}"function"==typeof e?this.G(e,t):this.m(t)},e.prototype.l=function(t){this.s(2,t)},e.prototype.m=function(t){this.s(1,t)},e.prototype.s=function(t,e){if(0!=this.h)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.h);this.h=t,this.i=e,2===this.h&&this.D(),this.A()},e.prototype.D=function(){var t=this;o((function(){if(t.B()){var e=i.console;"undefined"!==typeof e&&e.error(t.i)}}),1)},e.prototype.B=function(){if(this.o)return!1;var t=i.CustomEvent,e=i.Event,n=i.dispatchEvent;return"undefined"===typeof n||("function"===typeof t?t=new t("unhandledrejection",{cancelable:!0}):"function"===typeof e?t=new e("unhandledrejection",{cancelable:!0}):(t=i.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,t),t.promise=this,t.reason=this.i,n(t))},e.prototype.A=function(){if(null!=this.g){for(var t=0;t<this.g.length;++t)a.h(this.g[t]);this.g=null}};var a=new n;return e.prototype.F=function(t){var e=this.j();t.J(e.resolve,e.reject)},e.prototype.G=function(t,e){var n=this.j();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.J(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.J=function(t,e){function n(){switch(r.h){case 1:t(r.i);break;case 2:e(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?a.h(n):this.g.push(n),this.o=!0},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=s(t),o=i.next();!o.done;o=i.next())r(o.value).J(e,n)}))},e.all=function(t){var n=s(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).J(o(a.length-1),e),i=n.next()}while(!i.done)}))},e})),o("Object.is",(function(t){return t||function(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}})),o("Array.prototype.includes",(function(t){return t||function(t,e){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(e=e||0)&&(e=Math.max(e+r,0));e<r;e++){var i=n[e];if(i===t||Object.is(i,t))return!0}return!1}})),o("String.prototype.includes",(function(t){return t||function(t,e){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(t,e||0)}})),o("Array.prototype.keys",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,r=!1,i={next:function(){if(!r&&n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(t){return t}))}}));var E=this||self;function A(t,e){t=t.split(".");var n,r=E;t[0]in r||"undefined"==typeof r.execScript||r.execScript("var "+t[0]);for(;t.length&&(n=t.shift());)t.length||void 0===e?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=e}function M(t,e){return e=String.fromCharCode.apply(null,e),null==t?e:t+e}var O,C,k="undefined"!==typeof TextDecoder,P="undefined"!==typeof TextEncoder;function I(t){if(P)t=(C||(C=new TextEncoder)).encode(t);else{var e=void 0;e=void 0!==e&&e;for(var n=0,r=new Uint8Array(3*t.length),i=0;i<t.length;i++){var o=t.charCodeAt(i);if(128>o)r[n++]=o;else{if(2048>o)r[n++]=o>>6|192;else{if(55296<=o&&57343>=o){if(56319>=o&&i<t.length){var a=t.charCodeAt(++i);if(56320<=a&&57343>=a){o=1024*(o-55296)+a-56320+65536,r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128;continue}i--}if(e)throw Error("Found an unpaired surrogate");o=65533}r[n++]=o>>12|224,r[n++]=o>>6&63|128}r[n++]=63&o|128}}t=r.subarray(0,n)}return t}var N={},R=null;function D(t,e){void 0===e&&(e=0),F(),e=N[e];for(var n=Array(Math.floor(t.length/3)),r=e[64]||"",i=0,o=0;i<t.length-2;i+=3){var a=t[i],s=t[i+1],c=t[i+2],l=e[a>>2];a=e[(3&a)<<4|s>>4],s=e[(15&s)<<2|c>>6],c=e[63&c],n[o++]=l+a+s+c}switch(l=0,c=r,t.length-i){case 2:c=e[(15&(l=t[i+1]))<<2]||r;case 1:t=t[i],n[o]=e[t>>2]+e[(3&t)<<4|l>>4]+c+r}return n.join("")}function L(t){var e=t.length,n=3*e/4;n%3?n=Math.floor(n):-1!="=.".indexOf(t[e-1])&&(n=-1!="=.".indexOf(t[e-2])?n-2:n-1);var r=new Uint8Array(n),i=0;return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=R[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}F();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){r[i++]=t})),r.subarray(0,i)}function F(){if(!R){R={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=t.concat(e[n].split(""));N[n]=r;for(var i=0;i<r.length;i++){var o=r[i];void 0===R[o]&&(R[o]=i)}}}}var j,U="function"===typeof Uint8Array.prototype.slice;function B(t,e,n){return e===n?j||(j=new Uint8Array(0)):U?t.slice(e,n):new Uint8Array(t.subarray(e,n))}var z=0;function V(t,e){e=void 0!==(e=void 0===e?{}:e).v&&e.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=e,t&&G(this,t)}function G(t,e){e=e.constructor===Uint8Array?e:e.constructor===ArrayBuffer||e.constructor===Array?new Uint8Array(e):e.constructor===String?L(e):e instanceof Uint8Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t.h=e,t.l=0,t.j=t.h.length,t.g=t.l}function W(t){for(var e=128,n=0,r=0,i=0;4>i&&128<=e;i++)n|=(127&(e=t.h[t.g++]))<<7*i;if(128<=e&&(n|=(127&(e=t.h[t.g++]))<<28,r|=(127&e)>>4),128<=e)for(i=0;5>i&&128<=e;i++)r|=(127&(e=t.h[t.g++]))<<7*i+3;if(128>e)return t=n>>>0,(r=2147483648&(e=r>>>0))&&(e=~e>>>0,0==(t=1+~t>>>0)&&(e=e+1>>>0)),t=4294967296*e+(t>>>0),r?-t:t;t.m=!0}V.prototype.reset=function(){this.g=this.l},V.prototype.i=function(){var t=this.h,e=t[this.g],n=127&e;return 128>e?(this.g+=1,n):(n|=(127&(e=t[this.g+1]))<<7,128>e?(this.g+=2,n):(n|=(127&(e=t[this.g+2]))<<14,128>e?(this.g+=3,n):(n|=(127&(e=t[this.g+3]))<<21,128>e?(this.g+=4,n):(n|=(15&(e=t[this.g+4]))<<28,128>e?(this.g+=5,n>>>0):(this.g+=5,128<=t[this.g++]&&128<=t[this.g++]&&128<=t[this.g++]&&128<=t[this.g++]&&this.g++,n)))))},V.prototype.o=function(){var t=this.h[this.g],e=this.h[this.g+1],n=this.h[this.g+2],r=this.h[this.g+3];return this.g+=4,t=2*((n=(t|e<<8|n<<16|r<<24)>>>0)>>31)+1,e=n>>>23&255,n&=8388607,255==e?n?NaN:1/0*t:0==e?t*Math.pow(2,-149)*n:t*Math.pow(2,e-150)*(n+Math.pow(2,23))};var H=[];function q(){this.g=new Uint8Array(64),this.h=0}function X(t,e){for(;127<e;)t.push(127&e|128),e>>>=7;t.push(e)}function Y(t){var e={},n=void 0!==e.N&&e.N;this.o={v:void 0!==e.v&&e.v},this.N=n,e=this.o,H.length?(n=H.pop(),e&&(n.v=e.v),t&&G(n,t),t=n):t=new V(t,e),this.g=t,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}function K(t){var e=t.g;if((e=e.g==e.j)||(e=t.j)||(e=(e=t.g).m||0>e.g||e.g>e.j),e)return!1;t.m=t.g.g;var n=7&(e=t.g.i());return 0!=n&&5!=n&&1!=n&&2!=n&&3!=n&&4!=n?(t.j=!0,!1):(t.i=e,t.l=e>>>3,t.h=n,!0)}function Z(t){switch(t.h){case 0:if(0!=t.h)Z(t);else{for(t=t.g;128&t.h[t.g];)t.g++;t.g++}break;case 1:1!=t.h?Z(t):(t=t.g).g+=8;break;case 2:if(2!=t.h)Z(t);else{var e=t.g.i();(t=t.g).g+=e}break;case 5:5!=t.h?Z(t):(t=t.g).g+=4;break;case 3:for(e=t.l;;){if(!K(t)){t.j=!0;break}if(4==t.h){t.l!=e&&(t.j=!0);break}Z(t)}break;default:t.j=!0}}function J(t,e,n){var r=t.g.j,i=t.g.i(),o=t.g.g+i;if(t.g.j=o,n(e,t),0!==(n=o-t.g.g))throw Error("Message parsing ended unexpectedly. Expected to read "+i+" bytes, instead read "+(i-n)+" bytes, either the data ended unexpectedly or the message misreported its own length");return t.g.g=o,t.g.j=r,e}function $(t){return t.g.o()}function Q(t){var e,n=t.g.i(),r=(t=t.g).g;if(t.g+=n,t=t.h,k)(e=O)||(e=O=new TextDecoder("utf-8",{fatal:!1})),e=e.decode(t.subarray(r,r+n));else{n=r+n;for(var i,o,a,s=[],c=null;r<n;)128>(i=t[r++])?s.push(i):224>i?r>=n?s.push(65533):(o=t[r++],194>i||128!==(192&o)?(r--,s.push(65533)):s.push((31&i)<<6|63&o)):240>i?r>=n-1?s.push(65533):128!==(192&(o=t[r++]))||224===i&&160>o||237===i&&160<=o||128!==(192&(e=t[r++]))?(r--,s.push(65533)):s.push((15&i)<<12|(63&o)<<6|63&e):244>=i?r>=n-2?s.push(65533):128!==(192&(o=t[r++]))||0!==o-144+(i<<28)>>30||128!==(192&(e=t[r++]))||128!==(192&(a=t[r++]))?(r--,s.push(65533)):(i=(7&i)<<18|(63&o)<<12|(63&e)<<6|63&a,i-=65536,s.push(55296+(i>>10&1023),56320+(1023&i))):s.push(65533),8192<=s.length&&(c=M(c,s),s.length=0);e=M(c,s)}return e}function tt(t,e,n){var r=t.g.i();for(r=t.g.g+r;t.g.g<r;)n.push(e.call(t.g))}function et(t,e){2==t.h?tt(t,V.prototype.o,e):e.push($(t))}function nt(){this.h=[],this.i=0,this.g=new q}function rt(t,e){0!==e.length&&(t.h.push(e),t.i+=e.length)}function it(t){var e=t.i+t.g.length();if(0===e)return new Uint8Array(0);e=new Uint8Array(e);for(var n=t.h,r=n.length,i=0,o=0;o<r;o++){var a=n[o];0!==a.length&&(e.set(a,i),i+=a.length)}return 0!==(r=(n=t.g).h)&&(e.set(n.g.subarray(0,r),i),n.h=0),t.h=[e],e}function ot(t,e,n){if(null!=n){X(t.g,8*e+5),t=t.g;var r=n;0===(r=(n=0>r?1:0)?-r:r)?0<1/r?z=0:z=2147483648:isNaN(r)?z=2147483647:34028234663852886e22<r?z=(n<<31|2139095040)>>>0:11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),z=(n<<31|r)>>>0):(e=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-e),16777216<=(r=Math.round(8388608*r))&&++e,z=(n<<31|e+127<<23|8388607&r)>>>0),n=z,t.push(n>>>0&255),t.push(n>>>8&255),t.push(n>>>16&255),t.push(n>>>24&255)}}q.prototype.push=function(t){if(!(this.h+1<this.g.length)){var e=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(e)}this.g[this.h++]=t},q.prototype.length=function(){return this.h},q.prototype.end=function(){var t=this.g,e=this.h;return this.h=0,B(t,0,e)},Y.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};var at="function"===typeof Uint8Array;function st(t,e,n){if(null!=t)return"object"===typeof t?at&&t instanceof Uint8Array?n(t):ct(t,e,n):e(t)}function ct(t,e,n){if(Array.isArray(t)){for(var r=Array(t.length),i=0;i<t.length;i++)r[i]=st(t[i],e,n);return Array.isArray(t)&&t.W&&dt(r),r}for(i in r={},t)r[i]=st(t[i],e,n);return r}function lt(t){return"number"===typeof t?isFinite(t)?t:String(t):t}var ut,ht={W:{value:!0,configurable:!0}};function dt(t){return Array.isArray(t)&&!Object.isFrozen(t)&&Object.defineProperties(t,ht),t}function pt(t,e,n){var r=ut;if(ut=null,t||(t=r),r=this.constructor.ca,t||(t=r?[r]:[]),this.j=r?0:-1,this.m=this.g=null,this.h=t,t=(r=this.h.length)-1,!r||(null===(r=this.h[t])||"object"!=typeof r||Array.isArray(r)||at&&r instanceof Uint8Array)?void 0!==e&&-1<e?(this.l=Math.max(e,t+1-this.j),this.i=null):this.l=Number.MAX_VALUE:(this.l=t-this.j,this.i=r),n)for(e=0;e<n.length;e++)(t=n[e])<this.l?(t+=this.j,(r=this.h[t])?dt(r):this.h[t]=ft):(mt(this),(r=this.i[t])?dt(r):this.i[t]=ft)}var ft=Object.freeze(dt([]));function mt(t){var e=t.l+t.j;t.h[e]||(t.i=t.h[e]={})}function gt(t,e,n){return-1===e?null:void 0!==n&&n||e>=t.l?t.i?t.i[e]:void 0:t.h[e+t.j]}function yt(t,e){var n=void 0!==n&&n,r=gt(t,e,n);return null==r&&(r=ft),r===ft&&_t(t,e,r=dt([]),n),r}function vt(t){var e=yt(t,3);if(t.m||(t.m={}),!t.m[3]){for(var n=0;n<e.length;n++)e[n]=+e[n];t.m[3]=!0}return e}function bt(t,e,n){return null==(t=gt(t,e))?n:t}function xt(t,e,n){return null==(t=null==(t=gt(t,e))?t:+t)?void 0===n?0:n:t}function _t(t,e,n,r){void 0!==r&&r||e>=t.l?(mt(t),t.i[e]=n):t.h[e+t.j]=n}function wt(t,e,n){if(-1===n)return null;if(t.g||(t.g={}),!t.g[n]){var r=gt(t,n,!1);r&&(t.g[n]=new e(r))}return t.g[n]}function St(t,e){t.g||(t.g={});var n=t.g[1];if(!n){var r=yt(t,1);n=[];for(var i=0;i<r.length;i++)n[i]=new e(r[i]);t.g[1]=n}return n}function Tt(t,e,n){var r=void 0!==r&&r;t.g||(t.g={});var i=n?At(n,!1):n;t.g[e]=n,_t(t,e,i,r)}function Et(t,e,n,r){var i=St(t,n);e=e||new n,t=yt(t,1),void 0!=r?(i.splice(r,0,e),t.splice(r,0,At(e,!1))):(i.push(e),t.push(At(e,!1)))}function At(t,e){if(t.g)for(var n in t.g){var r=t.g[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)r[i]&&At(r[i],e);else r&&At(r,e)}return t.h}function Mt(t,e){if(t=t.o){rt(e,e.g.end());for(var n=0;n<t.length;n++)rt(e,t[n])}}function Ot(t,e){if(4==e.h)return!1;var n=e.m;return Z(e),e.N||(e=B(e.g.h,n,e.g.g),(n=t.o)?n.push(e):t.o=[e]),!0}function Ct(t){pt.call(this,t,-1,Pt)}function kt(t,e){for(;K(e);)switch(e.i){case 8:var n=e.g.i();_t(t,1,n);break;case 16:_t(t,2,n=e.g.i());break;case 29:case 26:et(e,t.getPackedDataList());break;case 32:_t(t,4,n=W(e.g));break;default:if(!Ot(t,e))return t}return t}pt.prototype.toJSON=function(){return ct(At(this,!1),lt,D)},pt.prototype.toString=function(){return At(this,!1).toString()},f(Ct,pt),Ct.prototype.getRows=function(){return gt(this,1)},Ct.prototype.getCols=function(){return gt(this,2)},Ct.prototype.getPackedDataList=function(){return vt(this)},Ct.prototype.getLayout=function(){return bt(this,4,0)};var Pt=[3];function It(t,e){var n=void 0;return new(n||(n=Promise))((function(r,i){function o(t){try{s(e.next(t))}catch(n){i(n)}}function a(t){try{s(e.throw(t))}catch(n){i(n)}}function s(t){t.done?r(t.value):new n((function(e){e(t.value)})).then(o,a)}s((e=e.apply(t,void 0)).next())}))}function Nt(t){pt.call(this,t)}function Rt(t,e){for(;K(e);)switch(e.i){case 8:var n=e.g.i();_t(t,1,n);break;case 21:_t(t,2,n=$(e));break;case 26:_t(t,3,n=Q(e));break;case 34:_t(t,4,n=Q(e));break;default:if(!Ot(t,e))return t}return t}function Dt(t){pt.call(this,t,-1,Lt)}f(Nt,pt),f(Dt,pt),Dt.prototype.addClassification=function(t,e){return Et(this,t,Nt,e),this};var Lt=[1];function Ft(t){pt.call(this,t)}function jt(t,e){for(;K(e);)switch(e.i){case 13:var n=$(e);_t(t,1,n);break;case 21:_t(t,2,n=$(e));break;case 29:_t(t,3,n=$(e));break;case 37:_t(t,4,n=$(e));break;case 45:_t(t,5,n=$(e));break;default:if(!Ot(t,e))return t}return t}function Ut(t){pt.call(this,t,-1,zt)}function Bt(t){t:{var e=new Ut;for(t=new Y(t);K(t);)if(10===t.i){Et(e,J(t,new Ft,jt),Ft,void 0)}else if(!Ot(e,t))break t}return e}f(Ft,pt),f(Ut,pt);var zt=[1];function Vt(t){pt.call(this,t)}function Gt(t){pt.call(this,t,-1,Ht)}function Wt(t,e){for(;K(e);)switch(e.i){case 8:var n=W(e.g);_t(t,1,n);break;case 16:_t(t,2,n=W(e.g));break;case 29:case 26:et(e,t.getVertexBufferList());break;case 32:case 34:n=e;var r=t.getIndexBufferList();2==n.h?tt(n,V.prototype.i,r):r.push(n.g.i());break;default:if(!Ot(t,e))return t}return t}f(Vt,pt),f(Gt,pt),Gt.prototype.getVertexType=function(){return bt(this,1,0)},Gt.prototype.getPrimitiveType=function(){return bt(this,2,0)},Gt.prototype.getVertexBufferList=function(){return vt(this)},Gt.prototype.getIndexBufferList=function(){return yt(this,4)};var Ht=[3,4];function qt(t){pt.call(this,t)}function Xt(t,e,n){if(n=t.createShader(0===n?t.VERTEX_SHADER:t.FRAGMENT_SHADER),t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+t.getShaderInfoLog(n));return n}function Yt(t){return St(t,Nt).map((function(t){return{index:bt(t,1,0),Y:xt(t,2),label:null!=gt(t,3)?bt(t,3,""):void 0,displayName:null!=gt(t,4)?bt(t,4,""):void 0}}))}function Kt(t){return{x:xt(t,1),y:xt(t,2),z:xt(t,3),visibility:null!=gt(t,4)?xt(t,4):void 0}}function Zt(t,e){this.h=t,this.g=e,this.l=0}function Jt(t,e,n){return function(t,e){var n=t.g;if(void 0===t.m){var r=Xt(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),i=Xt(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=n.createProgram();if(n.attachShader(o,r),n.attachShader(o,i),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(o));r=t.m=o,n.useProgram(r),i=n.getUniformLocation(r,"sampler0"),t.j={I:n.getAttribLocation(r,"aVertex"),H:n.getAttribLocation(r,"aTex"),da:i},t.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.s),n.enableVertexAttribArray(t.j.I),n.vertexAttribPointer(t.j.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),t.o=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.o),n.enableVertexAttribArray(t.j.H),n.vertexAttribPointer(t.j.H,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(i,0)}r=t.j,n.useProgram(t.m),n.canvas.width=e.width,n.canvas.height=e.height,n.viewport(0,0,e.width,e.height),n.activeTexture(n.TEXTURE0),t.h.bindTexture2d(e.glName),n.enableVertexAttribArray(r.I),n.bindBuffer(n.ARRAY_BUFFER,t.s),n.vertexAttribPointer(r.I,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,t.o),n.vertexAttribPointer(r.H,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.I),n.disableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,null),t.h.bindTexture2d(0)}(t,e),"function"===typeof t.g.canvas.transferToImageBitmap?Promise.resolve(t.g.canvas.transferToImageBitmap()):n?Promise.resolve(t.g.canvas):"function"===typeof createImageBitmap?createImageBitmap(t.g.canvas):(void 0===t.i&&(t.i=document.createElement("canvas")),new Promise((function(e){t.i.height=t.g.canvas.height,t.i.width=t.g.canvas.width,t.i.getContext("2d",{}).drawImage(t.g.canvas,0,0,t.g.canvas.width,t.g.canvas.height),e(t.i)})))}function $t(t){this.g=t}f(qt,pt),qt.prototype.getMesh=function(){return wt(this,Gt,1)},qt.prototype.getPoseTransformMatrix=function(){return wt(this,Ct,2)};var Qt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function te(t,e){return e+t}function ee(t,e){window[t]=e}function ne(t){if(this.g=t,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=t&&t.locateFile||te,"object"===typeof window)var e=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"===typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");e=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=e,t.options)for(var n=(e=s(Object.keys(t.options))).next();!n.done;n=e.next()){n=n.value;var r=t.options[n].default;void 0!==r&&(this.j[n]="function"===typeof r?r():r)}}function re(t){return It(t,(function t(){var e,n,r,i,o,a,s,l,u,h,d,p=this;return S(t,(function(t){switch(t.g){case 1:return e=p,p.R?(n=function(t,e){return void 0===t.g.files?[]:"function"===typeof t.g.files?t.g.files(e):t.g.files}(p,p.j),v(t,function(){return It(this,(function t(){return S(t,(function(t){switch(t.g){case 1:return t.m=2,v(t,WebAssembly.instantiate(Qt),4);case 4:t.g=3,t.m=0;break;case 2:return t.m=0,t.j=null,t.return(!1);case 3:return t.return(!0)}}))}))}(),2)):t.return();case 2:if(r=t.h,"object"===typeof window)return ee("createMediapipeSolutionsWasm",{locateFile:p.locateFile}),ee("createMediapipeSolutionsPackedAssets",{locateFile:p.locateFile}),a=n.filter((function(t){return void 0!==t.data})),s=n.filter((function(t){return void 0===t.data})),l=Promise.all(a.map((function(t){var n=ie(e,t.url);if(void 0!==t.path){var r=t.path;n=n.then((function(t){return e.overrideFile(r,t),Promise.resolve(t)}))}return n}))),u=Promise.all(s.map((function(t){return void 0===t.simd||t.simd&&r||!t.simd&&!r?function(t){var e=document.createElement("script");return e.setAttribute("src",t),e.setAttribute("crossorigin","anonymous"),new Promise((function(t){e.addEventListener("load",(function(){t()}),!1),e.addEventListener("error",(function(){t()}),!1),document.body.appendChild(e)}))}(e.locateFile(t.url,e.S)):Promise.resolve()}))).then((function(){return It(e,(function t(){var e,n,r=this;return S(t,(function(t){if(1==t.g)return e=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,v(t,e(n),2);r.h=t.h,t.g=0}))}))})),h=It(e,(function t(){var e=this;return S(t,(function(t){return e.g.graph&&e.g.graph.url?t=v(t,ie(e,e.g.graph.url),0):(t.g=0,t=void 0),t}))})),v(t,Promise.all([u,l,h]),7);if("function"!==typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return i=n.filter((function(t){return void 0===t.simd||t.simd&&r||!t.simd&&!r})).map((function(t){return e.locateFile(t.url,e.S)})),importScripts.apply(null,c(i)),v(t,createMediapipeSolutionsWasm(Module),6);case 6:p.h=t.h,p.l=new OffscreenCanvas(1,1),p.h.canvas=p.l,o=p.h.GL.createContext(p.l,{antialias:!1,alpha:!1,ba:"undefined"!==typeof WebGL2RenderingContext?2:1}),p.h.GL.makeContextCurrent(o),t.g=4;break;case 7:if(p.l=document.createElement("canvas"),!(d=p.l.getContext("webgl2",{}))&&!(d=p.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),t.return();p.D=d,p.h.canvas=p.l,p.h.createContext(p.l,!0,!0,{});case 4:p.i=new p.h.SolutionWasm,p.R=!1,t.g=0}}))}))}function ie(t,e){return It(t,(function t(){var n,r,i=this;return S(t,(function(t){return e in i.F?t.return(i.F[e]):(n=i.locateFile(e,""),r=fetch(n).then((function(t){return t.arrayBuffer()})),i.F[e]=r,t.return(r))}))}))}function oe(t,e,n){return It(t,(function t(){var r,i,o,a,c,l,u,h,d,p,f,m,g,y,b=this;return S(t,(function(t){switch(t.g){case 1:if(!n)return t.return(e);for(r={},i=0,o=s(Object.keys(n)),a=o.next();!a.done;a=o.next())c=a.value,"string"!==typeof(l=n[c])&&"texture"===l.type&&void 0!==e[l.stream]&&++i;1<i&&(b.G=!1),u=s(Object.keys(n)),a=u.next();case 2:if(a.done){t.g=4;break}if(h=a.value,"string"===typeof(d=n[h]))return g=r,y=h,v(t,function(t,e,n){return It(t,(function t(){var r,i=this;return S(t,(function(t){return"number"===typeof n||n instanceof Uint8Array||n instanceof i.h.Uint8BlobList?t.return(n):n instanceof i.h.Texture2dDataOut?((r=i.s[e])||(r=new Zt(i.h,i.D),i.s[e]=r),t.return(Jt(r,n,i.G))):t.return(void 0)}))}))}(b,h,e[d]),14);if(p=e[d.stream],"detection_list"===d.type){if(p){for(var x=p.getRectList(),_=p.getLandmarksList(),w=p.getClassificationsList(),T=[],E=0;E<x.size();++E){var A=x.get(E);t:{var M=new Vt;for(A=new Y(A);K(A);)switch(A.i){case 13:var O=$(A);_t(M,1,O);break;case 21:_t(M,2,O=$(A));break;case 29:_t(M,3,O=$(A));break;case 37:_t(M,4,O=$(A));break;case 45:_t(M,5,O=$(A));break;case 48:_t(M,6,O=W(A.g));break;default:if(!Ot(M,A))break t}}M={Z:xt(M,1),$:xt(M,2),height:xt(M,3),width:xt(M,4),rotation:xt(M,5,0),X:bt(M,6,0)},A=St(Bt(_.get(E)),Ft).map(Kt);var C=w.get(E);t:for(O=new Dt,C=new Y(C);K(C);)if(10===C.i)O.addClassification(J(C,new Nt,Rt));else if(!Ot(O,C))break t;M={T:M,O:A,M:Yt(O)},T.push(M)}x=T}else x=[];r[h]=x,t.g=7;break}if("proto_list"===d.type){if(p){for(x=Array(p.size()),_=0;_<p.size();_++)x[_]=p.get(_);p.delete()}else x=[];r[h]=x,t.g=7;break}if(void 0===p){t.g=3;break}if("float_list"===d.type){r[h]=p,t.g=7;break}if("proto"===d.type){r[h]=p,t.g=7;break}if("texture"!==d.type)throw Error("Unknown output config type: '"+d.type+"'");return(f=b.s[h])||(f=new Zt(b.h,b.D),b.s[h]=f),v(t,Jt(f,p,b.G),13);case 13:m=t.h,r[h]=m;case 7:d.transform&&r[h]&&(r[h]=d.transform(r[h])),t.g=3;break;case 14:g[y]=t.h;case 3:a=u.next(),t.g=2;break;case 4:return t.return(r)}}))}))}function ae(t,e){for(var n=e.name||"$",r=[].concat(c(e.wants)),i=new t.h.StringList,o=s(e.wants),a=o.next();!a.done;a=o.next())i.push_back(a.value);o=t.h.PacketListener.implement({onResults:function(i){for(var o={},a=0;a<e.wants.length;++a)o[r[a]]=i.get(a);var s=t.listeners[n];s&&(t.C=oe(t,o,e.outs).then((function(n){n=s(n);for(var i=0;i<e.wants.length;++i){var a=o[r[i]];"object"===typeof a&&a.hasOwnProperty&&a.hasOwnProperty("delete")&&a.delete()}n&&(t.C=n)})))}}),t.i.attachMultiListener(i,o),i.delete()}function se(t){t=function(t){t:{var e=new qt;for(t=new Y(t);K(t);)switch(t.i){case 10:var n=J(t,new Gt,Wt);Tt(e,1,n);break;case 18:Tt(e,2,n=J(t,new Ct,kt));break;default:if(!Ot(e,t))break t}}return e}(t);var e=t.getMesh();if(!e)return t;var n=new Float32Array(e.getVertexBufferList());e.getVertexBufferList=function(){return n};var r=new Uint32Array(e.getIndexBufferList());return e.getIndexBufferList=function(){return r},t}(t=ne.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},t.reset=function(){return It(this,(function t(){var e=this;return S(t,(function(t){e.i&&(e.i.reset(),e.m={},e.s={}),t.g=0}))}))},t.setOptions=function(t,e){var n=this;if(e=e||this.g.options){for(var r=[],i=[],o={},a=s(Object.keys(t)),c=a.next();!c.done;o={K:o.K,L:o.L},c=a.next()){var l=c.value;l in this.j&&this.j[l]===t[l]||(this.j[l]=t[l],void 0!==(c=e[l])&&(c.onChange&&(o.K=c.onChange,o.L=t[l],r.push(function(t){return function(){return It(n,(function e(){var n=this;return S(e,(function(e){if(1==e.g)return v(e,t.K(t.L),2);!0===e.h&&(n.o=!0),e.g=0}))}))}}(o))),c.graphOptionXref&&(l={valueNumber:1===c.type?t[l]:0,valueBoolean:0===c.type&&t[l],valueString:2===c.type?t[l]:""},c=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),c.graphOptionXref),l),i.push(c))))}0===r.length&&0===i.length||(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(i),this.u=(void 0===this.u?[]:this.u).concat(r))}},t.initialize=function(){return It(this,(function t(){var e=this;return S(t,(function(t){return 1==t.g?v(t,re(e),2):3!=t.g?v(t,It(e,(function t(){var e,n,r,i,o,a,c,l,u=this;return S(t,(function(t){if(1==t.g)return u.g.graph&&u.g.graph.url&&u.P===u.g.graph.url?t.return():(u.o=!0,u.g.graph&&u.g.graph.url?(u.P=u.g.graph.url,v(t,ie(u,u.g.graph.url),3)):void(t.g=2));for(2!=t.g&&(e=t.h,u.i.loadGraph(e)),n=s(Object.keys(u.B)),r=n.next();!r.done;r=n.next())i=r.value,u.i.overrideFile(i,u.B[i]);if(u.B={},u.g.listeners)for(o=s(u.g.listeners),a=o.next();!a.done;a=o.next())c=a.value,ae(u,c);l=u.j,u.j={},u.setOptions(l),t.g=0}))})),3):v(t,function(t){return It(t,(function t(){var e,n,r,i,o,a,c=this;return S(t,(function(t){switch(t.g){case 1:if(!c.o)return t.return();if(!c.u){t.g=2;break}e=s(c.u),n=e.next();case 3:if(n.done){t.g=5;break}return v(t,(0,n.value)(),4);case 4:n=e.next(),t.g=3;break;case 5:c.u=void 0;case 2:if(c.A){for(r=new c.h.GraphOptionChangeRequestList,i=s(c.A),o=i.next();!o.done;o=i.next())a=o.value,r.push_back(a);c.i.changeOptions(r),r.delete(),c.A=void 0}c.o=!1,t.g=0}}))}))}(e),0)}))}))},t.overrideFile=function(t,e){this.i?this.i.overrideFile(t,e):this.B[t]=e},t.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},t.send=function(t,e){return It(this,(function n(){var r,i,o,a,c,l,u,h,d,p=this;return S(n,(function(n){switch(n.g){case 1:return p.g.inputs?(r=1e3*(void 0===e||null===e?performance.now():e),v(n,p.C,2)):n.return();case 2:return v(n,p.initialize(),3);case 3:for(i=new p.h.PacketDataList,o=s(Object.keys(t)),a=o.next();!a.done;a=o.next())if(c=a.value,l=p.g.inputs[c]){t:{var f=p,m=t[c];switch(l.type){case"video":var g=f.m[l.stream];if(g||(g=new Zt(f.h,f.D),f.m[l.stream]=g),0===(f=g).l&&(f.l=f.h.createTexture()),"undefined"!==typeof HTMLVideoElement&&m instanceof HTMLVideoElement){var y=m.videoWidth;g=m.videoHeight}else"undefined"!==typeof HTMLImageElement&&m instanceof HTMLImageElement?(y=m.naturalWidth,g=m.naturalHeight):(y=m.width,g=m.height);g={glName:f.l,width:y,height:g},(y=f.g).canvas.width=g.width,y.canvas.height=g.height,y.activeTexture(y.TEXTURE0),f.h.bindTexture2d(f.l),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,m),f.h.bindTexture2d(0),f=g;break t;case"detections":for((g=f.m[l.stream])||(g=new $t(f.h),f.m[l.stream]=g),(f=g).data||(f.data=new f.g.DetectionListData),f.data.reset(m.length),g=0;g<m.length;++g){y=m[g];var b=f.data,x=b.setBoundingBox,_=g,w=y.T,S=new Vt;_t(S,1,w.Z),_t(S,2,w.$),_t(S,3,w.height),_t(S,4,w.width),_t(S,5,w.rotation),_t(S,6,w.X);var T=w=new nt;ot(T,1,gt(S,1)),ot(T,2,gt(S,2)),ot(T,3,gt(S,3)),ot(T,4,gt(S,4)),ot(T,5,gt(S,5));var E=gt(S,6);if(null!=E&&null!=E){X(T.g,48);var A=T.g,M=E;E=0>M;var O=(M=Math.abs(M))>>>0;for(M=Math.floor((M-O)/4294967296),M>>>=0,E&&(M=~M>>>0,4294967295<(O=1+(~O>>>0))&&(O=0,4294967295<++M&&(M=0))),E=z=O,O=M;0<O||127<E;)A.push(127&E|128),E=(E>>>7|O<<25)>>>0,O>>>=7;A.push(E)}if(Mt(S,T),w=it(w),x.call(b,_,w),y.O)for(b=0;b<y.O.length;++b)T=!!(S=y.O[b]).visibility,_=(x=f.data).addNormalizedLandmark,w=g,S=Object.assign(Object.assign({},S),{visibility:T?S.visibility:0}),_t(T=new Ft,1,S.x),_t(T,2,S.y),_t(T,3,S.z),S.visibility&&_t(T,4,S.visibility),ot(A=S=new nt,1,gt(T,1)),ot(A,2,gt(T,2)),ot(A,3,gt(T,3)),ot(A,4,gt(T,4)),ot(A,5,gt(T,5)),Mt(T,A),S=it(S),_.call(x,w,S);if(y.M)for(b=0;b<y.M.length;++b){if(_=(x=f.data).addClassification,w=g,S=y.M[b],_t(T=new Nt,2,S.Y),S.index&&_t(T,1,S.index),S.label&&_t(T,3,S.label),S.displayName&&_t(T,4,S.displayName),A=S=new nt,null!=(O=gt(T,1))&&null!=O)if(X(A.g,8),E=A.g,0<=O)X(E,O);else{for(M=0;9>M;M++)E.push(127&O|128),O>>=7;E.push(1)}ot(A,2,gt(T,2)),null!=(E=gt(T,3))&&(E=I(E),X(A.g,26),X(A.g,E.length),rt(A,A.g.end()),rt(A,E)),null!=(E=gt(T,4))&&(E=I(E),X(A.g,34),X(A.g,E.length),rt(A,A.g.end()),rt(A,E)),Mt(T,A),S=it(S),_.call(x,w,S)}}f=f.data;break t;default:f={}}}switch(u=f,h=l.stream,l.type){case"video":i.pushTexture2d(Object.assign(Object.assign({},u),{stream:h,timestamp:r}));break;case"detections":(d=u).stream=h,d.timestamp=r,i.pushDetectionList(d);break;default:throw Error("Unknown input config type: '"+l.type+"'")}}return p.i.send(i),v(n,p.C,4);case 4:i.delete(),n.g=0}}))}))},t.onResults=function(t,e){this.listeners[e||"$"]=t},A("Solution",ne),A("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});var ce={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(t){return t.map(se)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(t){return t.map((function(t){return St(Bt(t),Ft).map(Kt)}))}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},le=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],ue=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],he=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],de=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],pe=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],fe=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],me=[].concat(c(le),c(ue),c(he),c(de),c(pe),c(fe));function ge(t){t=t||{},t=Object.assign(Object.assign({},ce),t),this.g=new ne(t)}(t=ge.prototype).close=function(){return this.g.close(),Promise.resolve()},t.onResults=function(t){this.g.onResults(t)},t.initialize=function(){return It(this,(function t(){var e=this;return S(t,(function(t){return v(t,e.g.initialize(),0)}))}))},t.reset=function(){this.g.reset()},t.send=function(t){return It(this,(function e(){var n=this;return S(e,(function(e){return v(e,n.g.send(t),0)}))}))},t.setOptions=function(t){this.g.setOptions(t)},A("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),A("FaceMesh",ge),A("FACEMESH_LIPS",le),A("FACEMESH_LEFT_EYE",ue),A("FACEMESH_LEFT_EYEBROW",he),A("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),A("FACEMESH_RIGHT_EYE",de),A("FACEMESH_RIGHT_EYEBROW",pe),A("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),A("FACEMESH_FACE_OVAL",fe),A("FACEMESH_CONTOURS",me),A("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),A("matrixDataToMatrix",(function(t){for(var e=t.getCols(),n=t.getRows(),r=t.getPackedDataList(),i=[],o=0;o<n;o++)i.push(Array(e));for(o=0;o<n;o++)for(var a=0;a<e;a++){var s=1===t.getLayout()?o*e+a:a*n+o;i[o][a]=r[s]}return i})),A("VERSION","0.4.1633559619")}).call(this)},2768:(t,e,n)=>{"use strict";var r=n(989);function i(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}t.exports=function(t){var e=new i;e.pre=t.pre,e.body=t.body,e.post=t.post;var n=t.args.slice(0);e.argTypes=n;for(var o=0;o<n.length;++o){var a=n[o];if("array"===a||"object"===typeof a&&a.blockIndices){if(e.argTypes[o]="array",e.arrayArgs.push(o),e.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),e.shimArgs.push("array"+o),o<e.pre.args.length&&e.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array args");if(o<e.post.args.length&&e.post.args[o].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)e.scalarArgs.push(o),e.shimArgs.push("scalar"+o);else if("index"===a){if(e.indexArgs.push(o),o<e.pre.args.length&&e.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array index");if(o<e.body.args.length&&e.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array index");if(o<e.post.args.length&&e.post.args[o].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(e.shapeArgs.push(o),o<e.pre.args.length&&e.pre.args[o].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(o<e.body.args.length&&e.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array shape");if(o<e.post.args.length&&e.post.args[o].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!==typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+n[o]);e.argTypes[o]="offset",e.offsetArgs.push({array:a.array,offset:a.offset}),e.offsetArgIndex.push(o)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,r(e)}},8800:(t,e,n)=>{"use strict";var r=n(4068);function i(t,e,n){var r,i,o=t.length,a=e.arrayArgs.length,s=e.indexArgs.length>0,c=[],l=[],u=0,h=0;for(r=0;r<o;++r)l.push(["i",r,"=0"].join(""));for(i=0;i<a;++i)for(r=0;r<o;++r)h=u,u=t[r],0===r?l.push(["d",i,"s",r,"=t",i,"p",u].join("")):l.push(["d",i,"s",r,"=(t",i,"p",u,"-s",h,"*t",i,"p",h,")"].join(""));for(l.length>0&&c.push("var "+l.join(",")),r=o-1;r>=0;--r)u=t[r],c.push(["for(i",r,"=0;i",r,"<s",u,";++i",r,"){"].join(""));for(c.push(n),r=0;r<o;++r){for(h=u,u=t[r],i=0;i<a;++i)c.push(["p",i,"+=d",i,"s",r].join(""));s&&(r>0&&c.push(["index[",h,"]-=s",h].join("")),c.push(["++index[",u,"]"].join(""))),c.push("}")}return c.join("\n")}function o(t,e,n){for(var r=t.body,i=[],o=[],a=0;a<t.args.length;++a){var s=t.args[a];if(!(s.count<=0)){var c=new RegExp(s.name,"g"),l="",u=e.arrayArgs.indexOf(a);switch(e.argTypes[a]){case"offset":var h=e.offsetArgIndex.indexOf(a);u=e.offsetArgs[h].array,l="+q"+h;case"array":l="p"+u+l;var d="l"+a,p="a"+u;if(0===e.arrayBlockIndices[u])1===s.count?"generic"===n[u]?s.lvalue?(i.push(["var ",d,"=",p,".get(",l,")"].join("")),r=r.replace(c,d),o.push([p,".set(",l,",",d,")"].join(""))):r=r.replace(c,[p,".get(",l,")"].join("")):r=r.replace(c,[p,"[",l,"]"].join("")):"generic"===n[u]?(i.push(["var ",d,"=",p,".get(",l,")"].join("")),r=r.replace(c,d),s.lvalue&&o.push([p,".set(",l,",",d,")"].join(""))):(i.push(["var ",d,"=",p,"[",l,"]"].join("")),r=r.replace(c,d),s.lvalue&&o.push([p,"[",l,"]=",d].join("")));else{for(var f=[s.name],m=[l],g=0;g<Math.abs(e.arrayBlockIndices[u]);g++)f.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(g+1)+"*t"+u+"b"+g);if(c=new RegExp(f.join(""),"g"),l=m.join("+"),"generic"===n[u])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(c,[p,"[",l,"]"].join(""))}break;case"scalar":r=r.replace(c,"Y"+e.scalarArgs.indexOf(a));break;case"index":r=r.replace(c,"index");break;case"shape":r=r.replace(c,"shape")}}}return[i.join("\n"),r,o.join("\n")].join("\n").trim()}function a(t){for(var e=new Array(t.length),n=!0,r=0;r<t.length;++r){var i=t[r],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?e[r]="u"+i.charAt(1)+o:e[r]=i.charAt(0)+o,r>0&&(n=n&&e[r]===e[r-1])}return n?e[0]:e.join("")}t.exports=function(t,e){for(var n=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,s=new Array(t.arrayArgs.length),c=new Array(t.arrayArgs.length),l=0;l<t.arrayArgs.length;++l)c[l]=e[2*l],s[l]=e[2*l+1];var u=[],h=[],d=[],p=[],f=[];for(l=0;l<t.arrayArgs.length;++l){t.arrayBlockIndices[l]<0?(d.push(0),p.push(n),u.push(n),h.push(n+t.arrayBlockIndices[l])):(d.push(t.arrayBlockIndices[l]),p.push(t.arrayBlockIndices[l]+n),u.push(0),h.push(t.arrayBlockIndices[l]));for(var m=[],g=0;g<s[l].length;g++)d[l]<=s[l][g]&&s[l][g]<p[l]&&m.push(s[l][g]-d[l]);f.push(m)}var y=["SS"],v=["'use strict'"],b=[];for(g=0;g<n;++g)b.push(["s",g,"=SS[",g,"]"].join(""));for(l=0;l<t.arrayArgs.length;++l){y.push("a"+l),y.push("t"+l),y.push("p"+l);for(g=0;g<n;++g)b.push(["t",l,"p",g,"=t",l,"[",d[l]+g,"]"].join(""));for(g=0;g<Math.abs(t.arrayBlockIndices[l]);++g)b.push(["t",l,"b",g,"=t",l,"[",u[l]+g,"]"].join(""))}for(l=0;l<t.scalarArgs.length;++l)y.push("Y"+l);if(t.shapeArgs.length>0&&b.push("shape=SS.slice(0)"),t.indexArgs.length>0){var x=new Array(n);for(l=0;l<n;++l)x[l]="0";b.push(["index=[",x.join(","),"]"].join(""))}for(l=0;l<t.offsetArgs.length;++l){var _=t.offsetArgs[l],w=[];for(g=0;g<_.offset.length;++g)0!==_.offset[g]&&(1===_.offset[g]?w.push(["t",_.array,"p",g].join("")):w.push([_.offset[g],"*t",_.array,"p",g].join("")));0===w.length?b.push("q"+l+"=0"):b.push(["q",l,"=",w.join("+")].join(""))}var S=r([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));for((b=b.concat(S)).length>0&&v.push("var "+b.join(",")),l=0;l<t.arrayArgs.length;++l)v.push("p"+l+"|=0");t.pre.body.length>3&&v.push(o(t.pre,t,c));var T=o(t.body,t,c),E=function(t){for(var e=0,n=t[0].length;e<n;){for(var r=1;r<t.length;++r)if(t[r][e]!==t[0][e])return e;++e}return e}(f);E<n?v.push(function(t,e,n,r){for(var o=e.length,a=n.arrayArgs.length,s=n.blockSize,c=n.indexArgs.length>0,l=[],u=0;u<a;++u)l.push(["var offset",u,"=p",u].join(""));for(u=t;u<o;++u)l.push(["for(var j"+u+"=SS[",e[u],"]|0;j",u,">0;){"].join("")),l.push(["if(j",u,"<",s,"){"].join("")),l.push(["s",e[u],"=j",u].join("")),l.push(["j",u,"=0"].join("")),l.push(["}else{s",e[u],"=",s].join("")),l.push(["j",u,"-=",s,"}"].join("")),c&&l.push(["index[",e[u],"]=j",u].join(""));for(u=0;u<a;++u){for(var h=["offset"+u],d=t;d<o;++d)h.push(["j",d,"*t",u,"p",e[d]].join(""));l.push(["p",u,"=(",h.join("+"),")"].join(""))}for(l.push(i(e,n,r)),u=t;u<o;++u)l.push("}");return l.join("\n")}(E,f[0],t,T)):v.push(i(f[0],t,T)),t.post.body.length>3&&v.push(o(t.post,t,c)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+v.join("\n")+"\n----------");var A=[t.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",E,a(c)].join("");return new Function(["function ",A,"(",y.join(","),"){",v.join("\n"),"} return ",A].join(""))()}},989:(t,e,n)=>{"use strict";var r=n(8800);t.exports=function(t){var e=["'use strict'","var CACHED={}"],n=[],i=t.funcName+"_cwise_thunk";e.push(["return function ",i,"(",t.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],s=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],c=[],l=[],u=0;u<t.arrayArgs.length;++u){var h=t.arrayArgs[u];n.push(["t",h,"=array",h,".dtype,","r",h,"=array",h,".order"].join("")),o.push("t"+h),o.push("r"+h),a.push("t"+h),a.push("r"+h+".join()"),s.push("array"+h+".data"),s.push("array"+h+".stride"),s.push("array"+h+".offset|0"),u>0&&(c.push("array"+t.arrayArgs[0]+".shape.length===array"+h+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[u]))),l.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+h+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[u])+"]"))}for(t.arrayArgs.length>1&&(e.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}")),u=0;u<t.scalarArgs.length;++u)s.push("scalar"+t.scalarArgs[u]);return n.push(["type=[",a.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),e.push("var "+n.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",s.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------"),new Function("compile",e.join("\n"))(r.bind(void 0,t))}},4695:t=>{function e(t,e,n){var r,i,o,a,s;function c(){var l=Date.now()-a;l<e&&l>=0?r=setTimeout(c,e-l):(r=null,n||(s=t.apply(o,i),o=i=null))}null==e&&(e=100);var l=function(){o=this,i=arguments,a=Date.now();var l=n&&!r;return r||(r=setTimeout(c,e)),l&&(s=t.apply(o,i),o=i=null),s};return l.clear=function(){r&&(clearTimeout(r),r=null)},l.flush=function(){r&&(s=t.apply(o,i),o=i=null,clearTimeout(r),r=null)},l}e.debounce=e,t.exports=e},8210:function(t,e,n){var r;!function(i){"use strict";var o,a=1e9,s={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},c=!0,l="[DecimalError] ",u=l+"Invalid argument: ",h=l+"Exponent out of range: ",d=Math.floor,p=Math.pow,f=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,m=1e7,g=7,y=9007199254740991,v=d(y/g),b={};function x(t,e){var n,r,i,o,a,s,l,u,h=t.constructor,d=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),c?k(e,d):e;if(l=t.d,u=e.d,a=t.e,i=e.e,l=l.slice(),o=a-i){for(o<0?(r=l,o=-o,s=u.length):(r=u,i=a,s=l.length),o>(s=(a=Math.ceil(d/g))>s?a+1:s+1)&&(o=s,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for((s=l.length)-(o=u.length)<0&&(o=s,r=u,u=l,l=r),n=0;o;)n=(l[--o]=l[o]+u[o]+n)/m|0,l[o]%=m;for(n&&(l.unshift(n),++i),s=l.length;0==l[--s];)l.pop();return e.d=l,e.e=i,c?k(e,d):e}function _(t,e,n){if(t!==~~t||t<e||t>n)throw Error(u+t)}function w(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",(n=g-r.length)&&(o+=M(n)),o+=r;a=t[e],(n=g-(r=a+"").length)&&(o+=M(n))}else if(0===a)return"0";for(;a%10===0;)a/=10;return o+a}b.absoluteValue=b.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t},b.comparedTo=b.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(e=0,n=(r=o.d.length)<(i=t.d.length)?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1},b.decimalPlaces=b.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*g;if(e=t.d[e])for(;e%10==0;e/=10)n--;return n<0?0:n},b.dividedBy=b.div=function(t){return S(this,new this.constructor(t))},b.dividedToIntegerBy=b.idiv=function(t){var e=this.constructor;return k(S(this,new e(t),0,1),e.precision)},b.equals=b.eq=function(t){return!this.cmp(t)},b.exponent=function(){return E(this)},b.greaterThan=b.gt=function(t){return this.cmp(t)>0},b.greaterThanOrEqualTo=b.gte=function(t){return this.cmp(t)>=0},b.isInteger=b.isint=function(){return this.e>this.d.length-2},b.isNegative=b.isneg=function(){return this.s<0},b.isPositive=b.ispos=function(){return this.s>0},b.isZero=function(){return 0===this.s},b.lessThan=b.lt=function(t){return this.cmp(t)<0},b.lessThanOrEqualTo=b.lte=function(t){return this.cmp(t)<1},b.logarithm=b.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(void 0===t)t=new r(10);else if((t=new r(t)).s<1||t.eq(o))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(o)?new r(0):(c=!1,e=S(O(n,a),O(t,a),a),c=!0,k(e,i))},b.minus=b.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?P(e,t):x(e,(t.s=-t.s,t))},b.modulo=b.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(!(t=new r(t)).s)throw Error(l+"NaN");return n.s?(c=!1,e=S(n,t,0,1).times(t),c=!0,n.minus(e)):k(new r(n),i)},b.naturalExponential=b.exp=function(){return T(this)},b.naturalLogarithm=b.ln=function(){return O(this)},b.negated=b.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t},b.plus=b.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?x(e,t):P(e,(t.s=-t.s,t))},b.precision=b.sd=function(t){var e,n,r,i=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(u+t);if(e=E(i)+1,n=(r=i.d.length-1)*g+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n},b.squareRoot=b.sqrt=function(){var t,e,n,r,i,o,a,s=this,u=s.constructor;if(s.s<1){if(!s.s)return new u(0);throw Error(l+"NaN")}for(t=E(s),c=!1,0==(i=Math.sqrt(+s))||i==1/0?(((e=w(s.d)).length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=d((t+1)/2)-(t<0||t%2),r=new u(e=i==1/0?"5e"+t:(e=i.toExponential()).slice(0,e.indexOf("e")+1)+t)):r=new u(i.toString()),i=a=(n=u.precision)+3;;)if(r=(o=r).plus(S(s,o,a+2)).times(.5),w(o.d).slice(0,a)===(e=w(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&"4999"==e){if(k(o,n+1,0),o.times(o).eq(s)){r=o;break}}else if("9999"!=e)break;a+=4}return c=!0,k(r,n)},b.times=b.mul=function(t){var e,n,r,i,o,a,s,l,u,h=this,d=h.constructor,p=h.d,f=(t=new d(t)).d;if(!h.s||!t.s)return new d(0);for(t.s*=h.s,n=h.e+t.e,(l=p.length)<(u=f.length)&&(o=p,p=f,f=o,a=l,l=u,u=a),o=[],r=a=l+u;r--;)o.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)s=o[i]+f[r]*p[i-r-1]+e,o[i--]=s%m|0,e=s/m|0;o[i]=(o[i]+e)%m|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,c?k(t,d.precision):t},b.toDecimalPlaces=b.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),void 0===t?n:(_(t,0,a),void 0===e?e=r.rounding:_(e,0,8),k(n,t+E(n)+1,e))},b.toExponential=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=I(r,!0):(_(t,0,a),void 0===e?e=i.rounding:_(e,0,8),n=I(r=k(new i(r),t+1,e),!0,t+1)),n},b.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return void 0===t?I(i):(_(t,0,a),void 0===e?e=o.rounding:_(e,0,8),n=I((r=k(new o(i),t+E(i)+1,e)).abs(),!1,t+E(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},b.toInteger=b.toint=function(){var t=this,e=t.constructor;return k(new e(t),E(t)+1,e.rounding)},b.toNumber=function(){return+this},b.toPower=b.pow=function(t){var e,n,r,i,a,s,u=this,h=u.constructor,p=+(t=new h(t));if(!t.s)return new h(o);if(!(u=new h(u)).s){if(t.s<1)throw Error(l+"Infinity");return u}if(u.eq(o))return u;if(r=h.precision,t.eq(o))return k(u,r);if(s=(e=t.e)>=(n=t.d.length-1),a=u.s,s){if((n=p<0?-p:p)<=y){for(i=new h(o),e=Math.ceil(r/g+4),c=!1;n%2&&N((i=i.times(u)).d,e),0!==(n=d(n/2));)N((u=u.times(u)).d,e);return c=!0,t.s<0?new h(o).div(i):k(i,r)}}else if(a<0)throw Error(l+"NaN");return a=a<0&&1&t.d[Math.max(e,n)]?-1:1,u.s=1,c=!1,i=t.times(O(u,r+12)),c=!0,(i=T(i)).s=a,i},b.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return void 0===t?r=I(i,(n=E(i))<=o.toExpNeg||n>=o.toExpPos):(_(t,1,a),void 0===e?e=o.rounding:_(e,0,8),r=I(i=k(new o(i),t,e),t<=(n=E(i))||n<=o.toExpNeg,t)),r},b.toSignificantDigits=b.tosd=function(t,e){var n=this.constructor;return void 0===t?(t=n.precision,e=n.rounding):(_(t,1,a),void 0===e?e=n.rounding:_(e,0,8)),k(new n(this),t,e)},b.toString=b.valueOf=b.val=b.toJSON=function(){var t=this,e=E(t),n=t.constructor;return I(t,e<=n.toExpNeg||e>=n.toExpPos)};var S=function(){function t(t,e){var n,r=0,i=t.length;for(t=t.slice();i--;)n=t[i]*e+r,t[i]=n%m|0,r=n/m|0;return r&&t.unshift(r),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n){for(var r=0;n--;)t[n]-=r,r=t[n]<e[n]?1:0,t[n]=r*m+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(r,i,o,a){var s,c,u,h,d,p,f,y,v,b,x,_,w,S,T,A,M,O,C=r.constructor,P=r.s==i.s?1:-1,I=r.d,N=i.d;if(!r.s)return new C(r);if(!i.s)throw Error(l+"Division by zero");for(c=r.e-i.e,M=N.length,T=I.length,y=(f=new C(P)).d=[],u=0;N[u]==(I[u]||0);)++u;if(N[u]>(I[u]||0)&&--c,(_=null==o?o=C.precision:a?o+(E(r)-E(i))+1:o)<0)return new C(0);if(_=_/g+2|0,u=0,1==M)for(h=0,N=N[0],_++;(u<T||h)&&_--;u++)w=h*m+(I[u]||0),y[u]=w/N|0,h=w%N|0;else{for((h=m/(N[0]+1)|0)>1&&(N=t(N,h),I=t(I,h),M=N.length,T=I.length),S=M,b=(v=I.slice(0,M)).length;b<M;)v[b++]=0;(O=N.slice()).unshift(0),A=N[0],N[1]>=m/2&&++A;do{h=0,(s=e(N,v,M,b))<0?(x=v[0],M!=b&&(x=x*m+(v[1]||0)),(h=x/A|0)>1?(h>=m&&(h=m-1),1==(s=e(d=t(N,h),v,p=d.length,b=v.length))&&(h--,n(d,M<p?O:N,p))):(0==h&&(s=h=1),d=N.slice()),(p=d.length)<b&&d.unshift(0),n(v,d,b),-1==s&&(s=e(N,v,M,b=v.length))<1&&(h++,n(v,M<b?O:N,b)),b=v.length):0===s&&(h++,v=[0]),y[u++]=h,s&&v[0]?v[b++]=I[S]||0:(v=[I[S]],b=1)}while((S++<T||void 0!==v[0])&&_--)}return y[0]||y.shift(),f.e=c,k(f,a?o+E(f)+1:o)}}();function T(t,e){var n,r,i,a,s,l=0,u=0,d=t.constructor,f=d.precision;if(E(t)>16)throw Error(h+E(t));if(!t.s)return new d(o);for(null==e?(c=!1,s=f):s=e,a=new d(.03125);t.abs().gte(.1);)t=t.times(a),u+=5;for(s+=Math.log(p(2,u))/Math.LN10*2+5|0,n=r=i=new d(o),d.precision=s;;){if(r=k(r.times(t),s),n=n.times(++l),w((a=i.plus(S(r,n,s))).d).slice(0,s)===w(i.d).slice(0,s)){for(;u--;)i=k(i.times(i),s);return d.precision=f,null==e?(c=!0,k(i,f)):i}i=a}}function E(t){for(var e=t.e*g,n=t.d[0];n>=10;n/=10)e++;return e}function A(t,e,n){if(e>t.LN10.sd())throw c=!0,n&&(t.precision=n),Error(l+"LN10 precision limit exceeded");return k(new t(t.LN10),e)}function M(t){for(var e="";t--;)e+="0";return e}function O(t,e){var n,r,i,a,s,u,h,d,p,f=1,m=t,g=m.d,y=m.constructor,v=y.precision;if(m.s<1)throw Error(l+(m.s?"NaN":"-Infinity"));if(m.eq(o))return new y(0);if(null==e?(c=!1,d=v):d=e,m.eq(10))return null==e&&(c=!0),A(y,d);if(d+=10,y.precision=d,r=(n=w(g)).charAt(0),a=E(m),!(Math.abs(a)<15e14))return h=A(y,d+2,v).times(a+""),m=O(new y(r+"."+n.slice(1)),d-10).plus(h),y.precision=v,null==e?(c=!0,k(m,v)):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=w((m=m.times(t)).d)).charAt(0),f++;for(a=E(m),r>1?(m=new y("0."+n),a++):m=new y(r+"."+n.slice(1)),u=s=m=S(m.minus(o),m.plus(o),d),p=k(m.times(m),d),i=3;;){if(s=k(s.times(p),d),w((h=u.plus(S(s,new y(i),d))).d).slice(0,d)===w(u.d).slice(0,d))return u=u.times(2),0!==a&&(u=u.plus(A(y,d+2,v).times(a+""))),u=S(u,new y(f),d),y.precision=v,null==e?(c=!0,k(u,v)):u;u=h,i+=2}}function C(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;48===e.charCodeAt(r);)++r;for(i=e.length;48===e.charCodeAt(i-1);)--i;if(e=e.slice(r,i)){if(i-=r,n=n-r-1,t.e=d(n/g),t.d=[],r=(n+1)%g,n<0&&(r+=g),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=g;r<i;)t.d.push(+e.slice(r,r+=g));e=e.slice(r),r=g-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),c&&(t.e>v||t.e<-v))throw Error(h+n)}else t.s=0,t.e=0,t.d=[0];return t}function k(t,e,n){var r,i,o,a,s,l,u,f,y=t.d;for(a=1,o=y[0];o>=10;o/=10)a++;if((r=e-a)<0)r+=g,i=e,u=y[f=0];else{if((f=Math.ceil((r+1)/g))>=(o=y.length))return t;for(u=o=y[f],a=1;o>=10;o/=10)a++;i=(r%=g)-g+a}if(void 0!==n&&(s=u/(o=p(10,a-i-1))%10|0,l=e<0||void 0!==y[f+1]||u%o,l=n<4?(s||l)&&(0==n||n==(t.s<0?3:2)):s>5||5==s&&(4==n||l||6==n&&(r>0?i>0?u/p(10,a-i):0:y[f-1])%10&1||n==(t.s<0?8:7))),e<1||!y[0])return l?(o=E(t),y.length=1,e=e-o-1,y[0]=p(10,(g-e%g)%g),t.e=d(-e/g)||0):(y.length=1,y[0]=t.e=t.s=0),t;if(0==r?(y.length=f,o=1,f--):(y.length=f+1,o=p(10,g-r),y[f]=i>0?(u/p(10,a-i)%p(10,i)|0)*o:0),l)for(;;){if(0==f){(y[0]+=o)==m&&(y[0]=1,++t.e);break}if(y[f]+=o,y[f]!=m)break;y[f--]=0,o=1}for(r=y.length;0===y[--r];)y.pop();if(c&&(t.e>v||t.e<-v))throw Error(h+E(t));return t}function P(t,e){var n,r,i,o,a,s,l,u,h,d,p=t.constructor,f=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),c?k(e,f):e;if(l=t.d,d=e.d,r=e.e,u=t.e,l=l.slice(),a=u-r){for((h=a<0)?(n=l,a=-a,s=d.length):(n=d,r=u,s=l.length),a>(i=Math.max(Math.ceil(f/g),s)+2)&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for((h=(i=l.length)<(s=d.length))&&(s=i),i=0;i<s;i++)if(l[i]!=d[i]){h=l[i]<d[i];break}a=0}for(h&&(n=l,l=d,d=n,e.s=-e.s),s=l.length,i=d.length-s;i>0;--i)l[s++]=0;for(i=d.length;i>a;){if(l[--i]<d[i]){for(o=i;o&&0===l[--o];)l[o]=m-1;--l[o],l[i]+=m}l[i]-=d[i]}for(;0===l[--s];)l.pop();for(;0===l[0];l.shift())--r;return l[0]?(e.d=l,e.e=r,c?k(e,f):e):new p(0)}function I(t,e,n){var r,i=E(t),o=w(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+M(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+M(-i-1)+o,n&&(r=n-a)>0&&(o+=M(r))):i>=a?(o+=M(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+M(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=M(r))),t.s<0?"-"+o:o}function N(t,e){if(t.length>e)return t.length=e,!0}function R(t){if(!t||"object"!==typeof t)throw Error(l+"Object expected");var e,n,r,i=["precision",1,a,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if(void 0!==(r=t[n=i[e]])){if(!(d(r)===r&&r>=i[e+1]&&r<=i[e+2]))throw Error(u+n+": "+r);this[n]=r}if(void 0!==(r=t[n="LN10"])){if(r!=Math.LN10)throw Error(u+n+": "+r);this[n]=new this(r)}return this}s=function t(e){var n,r,i;function o(t){var e=this;if(!(e instanceof o))return new o(t);if(e.constructor=o,t instanceof o)return e.s=t.s,e.e=t.e,void(e.d=(t=t.d)?t.slice():t);if("number"===typeof t){if(0*t!==0)throw Error(u+t);if(t>0)e.s=1;else{if(!(t<0))return e.s=0,e.e=0,void(e.d=[0]);t=-t,e.s=-1}return t===~~t&&t<1e7?(e.e=0,void(e.d=[t])):C(e,t.toString())}if("string"!==typeof t)throw Error(u+t);if(45===t.charCodeAt(0)?(t=t.slice(1),e.s=-1):e.s=1,!f.test(t))throw Error(u+t);C(e,t)}if(o.prototype=b,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=t,o.config=o.set=R,void 0===e&&(e={}),e)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)e.hasOwnProperty(r=i[n++])||(e[r]=this[r]);return o.config(e),o}(s),s.default=s.Decimal=s,o=new s(1),void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},7283:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||t,a),c=n?n+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],s]:t._events[c].push(s):(t._events[c]=s,t._eventsCount++),t}function a(t,e){0===--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,i,o,a){var s=n?n+t:t;if(!this._events[s])return!1;var c,l,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,i),!0;case 5:return u.fn.call(u.context,e,r,i,o),!0;case 6:return u.fn.call(u.context,e,r,i,o,a),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,r);break;case 4:u[l].fn.call(u[l].context,e,r,i);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var c=0,l=[],u=s.length;c<u;c++)(s[c].fn!==e||i&&!s[c].once||r&&s[c].context!==r)&&l.push(s[c]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s},219:(t,e,n)=>{"use strict";var r=n(2086),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function c(t){return r.isMemo(t)?a:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var l=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(f){var i=p(n);i&&i!==f&&t(e,i,r)}var a=u(n);h&&(a=a.concat(h(n)));for(var s=c(e),m=c(n),g=0;g<a.length;++g){var y=a[g];if(!o[y]&&(!r||!r[y])&&(!m||!m[y])&&(!s||!s[y])){var v=d(n,y);try{l(e,y,v)}catch(b){}}}}return e}},6540:t=>{"use strict";t.exports=function(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return e}},5837:t=>{function e(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},7685:(t,e,n)=>{var r=n(7937)(n(6552),"DataView");t.exports=r},8724:(t,e,n)=>{var r=n(7615),i=n(5051),o=n(2154),a=n(8734),s=n(2662);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,t.exports=c},7160:(t,e,n)=>{var r=n(7563),i=n(9935),o=n(4190),a=n(1946),s=n(1714);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,t.exports=c},5204:(t,e,n)=>{var r=n(7937)(n(6552),"Map");t.exports=r},4816:(t,e,n)=>{var r=n(7251),i=n(7159),o=n(438),a=n(9394),s=n(6874);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,t.exports=c},5387:(t,e,n)=>{var r=n(7937)(n(6552),"Promise");t.exports=r},2070:(t,e,n)=>{var r=n(7937)(n(6552),"Set");t.exports=r},8902:(t,e,n)=>{var r=n(4816),i=n(6179),o=n(6704);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},5538:(t,e,n)=>{var r=n(7160),i=n(4545),o=n(793),a=n(7760),s=n(3892),c=n(6788);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=c,t.exports=l},9812:(t,e,n)=>{var r=n(6552).Symbol;t.exports=r},2929:(t,e,n)=>{var r=n(6552).Uint8Array;t.exports=r},6600:(t,e,n)=>{var r=n(7937)(n(6552),"WeakMap");t.exports=r},1170:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},5295:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}},7529:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},5866:(t,e,n)=>{var r=n(8468);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},1558:t=>{t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},3204:(t,e,n)=>{var r=n(3343),i=n(2777),o=n(4052),a=n(4543),s=n(9194),c=n(1268),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),u=!n&&i(t),h=!n&&!u&&a(t),d=!n&&!u&&!h&&c(t),p=n||u||h||d,f=p?r(t.length,String):[],m=f.length;for(var g in t)!e&&!l.call(t,g)||p&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||f.push(g);return f}},149:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},8895:t=>{t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},2587:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},5967:t=>{t.exports=function(t){return t.split("")}},1340:(t,e,n)=>{var r=n(3211);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},1775:(t,e,n)=>{var r=n(5654);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},5652:(t,e,n)=>{var r=n(4664),i=n(6516)(r);t.exports=i},4746:(t,e,n)=>{var r=n(5652);t.exports=function(t,e){var n=!0;return r(t,(function(t,r,i){return n=!!e(t,r,i)})),n}},9742:(t,e,n)=>{var r=n(9841);t.exports=function(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(void 0===c?s===s&&!r(s):n(s,c)))var c=s,l=a}return l}},5816:t=>{t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},755:(t,e,n)=>{var r=n(8895),i=n(7116);t.exports=function t(e,n,o,a,s){var c=-1,l=e.length;for(o||(o=i),s||(s=[]);++c<l;){var u=e[c];n>0&&o(u)?n>1?t(u,n-1,o,a,s):r(s,u):a||(s[s.length]=u)}return s}},4258:(t,e,n)=>{var r=n(5906)();t.exports=r},4664:(t,e,n)=>{var r=n(4258),i=n(8673);t.exports=function(t,e){return t&&r(t,e,i)}},2969:(t,e,n)=>{var r=n(5324),i=n(914);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},4262:(t,e,n)=>{var r=n(8895),i=n(4052);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},6913:(t,e,n)=>{var r=n(9812),i=n(4552),o=n(6095),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},7498:t=>{t.exports=function(t,e){return t>e}},7894:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},8468:(t,e,n)=>{var r=n(5816),i=n(644),o=n(4020);t.exports=function(t,e,n){return e===e?o(t,e,n):r(t,i,n)}},5193:(t,e,n)=>{var r=n(6913),i=n(2761);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},6989:(t,e,n)=>{var r=n(6399),i=n(2761);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!==e&&n!==n:r(e,n,o,a,t,s))}},6399:(t,e,n)=>{var r=n(5538),i=n(3668),o=n(9987),a=n(5752),s=n(6924),c=n(4052),l=n(4543),u=n(1268),h="[object Arguments]",d="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,m,g,y){var v=c(t),b=c(e),x=v?d:s(t),_=b?d:s(e),w=(x=x==h?p:x)==p,S=(_=_==h?p:_)==p,T=x==_;if(T&&l(t)){if(!l(e))return!1;v=!0,w=!1}if(T&&!w)return y||(y=new r),v||u(t)?i(t,e,n,m,g,y):o(t,e,x,n,m,g,y);if(!(1&n)){var E=w&&f.call(t,"__wrapped__"),A=S&&f.call(e,"__wrapped__");if(E||A){var M=E?t.value():t,O=A?e.value():e;return y||(y=new r),g(M,O,n,m,y)}}return!!T&&(y||(y=new r),a(t,e,n,m,g,y))}},6532:(t,e,n)=>{var r=n(5538),i=n(6989);t.exports=function(t,e,n,o){var a=n.length,s=a,c=!o;if(null==t)return!s;for(t=Object(t);a--;){var l=n[a];if(c&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<s;){var u=(l=n[a])[0],h=t[u],d=l[1];if(c&&l[2]){if(void 0===h&&!(u in t))return!1}else{var p=new r;if(o)var f=o(h,d,u,t,e,p);if(!(void 0===f?i(d,h,3,o,p):f))return!1}}return!0}},644:t=>{t.exports=function(t){return t!==t}},6954:(t,e,n)=>{var r=n(1629),i=n(7857),o=n(6686),a=n(6996),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,h=l.hasOwnProperty,d=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?d:s).test(a(t))}},5428:(t,e,n)=>{var r=n(6913),i=n(6173),o=n(2761),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},9096:(t,e,n)=>{var r=n(9256),i=n(5029),o=n(3279),a=n(4052),s=n(3932);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?i(t[0],t[1]):r(t):s(t)}},3713:(t,e,n)=>{var r=n(6140),i=n(1143),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},61:t=>{t.exports=function(t,e){return t<e}},8883:(t,e,n)=>{var r=n(5652),i=n(6571);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}},9256:(t,e,n)=>{var r=n(6532),i=n(3781),o=n(1310);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},5029:(t,e,n)=>{var r=n(6989),i=n(3097),o=n(3366),a=n(2597),s=n(9417),c=n(1310),l=n(914);t.exports=function(t,e){return a(t)&&s(e)?c(l(t),e):function(n){var a=i(n,t);return void 0===a&&a===e?o(n,t):r(e,a,3)}}},2536:(t,e,n)=>{var r=n(149),i=n(2969),o=n(9096),a=n(8883),s=n(320),c=n(7574),l=n(5893),u=n(3279),h=n(4052);t.exports=function(t,e,n){e=e.length?r(e,(function(t){return h(t)?function(e){return i(e,1===t.length?t[0]:t)}:t})):[u];var d=-1;e=r(e,c(o));var p=a(t,(function(t,n,i){return{criteria:r(e,(function(e){return e(t)})),index:++d,value:t}}));return s(p,(function(t,e){return l(t,e,n)}))}},396:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},2866:(t,e,n)=>{var r=n(2969);t.exports=function(t){return function(e){return r(e,t)}}},9676:t=>{var e=Math.ceil,n=Math.max;t.exports=function(t,r,i,o){for(var a=-1,s=n(e((r-t)/(i||1)),0),c=Array(s);s--;)c[o?s:++a]=t,t+=i;return c}},5647:(t,e,n)=>{var r=n(3279),i=n(5636),o=n(6350);t.exports=function(t,e){return o(i(t,e,r),t+"")}},8325:(t,e,n)=>{var r=n(2541),i=n(5654),o=n(3279),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},3871:t=>{t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}},2165:(t,e,n)=>{var r=n(5652);t.exports=function(t,e){var n;return r(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}},320:t=>{t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},3343:t=>{t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},8541:(t,e,n)=>{var r=n(9812),i=n(149),o=n(4052),a=n(9841),s=r?r.prototype:void 0,c=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return c?c.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},1141:(t,e,n)=>{var r=n(2524),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},7574:t=>{t.exports=function(t){return function(e){return t(e)}}},4416:(t,e,n)=>{var r=n(8902),i=n(5866),o=n(1558),a=n(8114),s=n(8182),c=n(2074);t.exports=function(t,e,n){var l=-1,u=i,h=t.length,d=!0,p=[],f=p;if(n)d=!1,u=o;else if(h>=200){var m=e?null:s(t);if(m)return c(m);d=!1,u=a,f=new r}else f=e?[]:p;t:for(;++l<h;){var g=t[l],y=e?e(g):g;if(g=n||0!==g?g:0,d&&y===y){for(var v=f.length;v--;)if(f[v]===y)continue t;e&&f.push(y),p.push(g)}else u(f,y,n)||(f!==p&&f.push(y),p.push(g))}return p}},8114:t=>{t.exports=function(t,e){return t.has(e)}},5324:(t,e,n)=>{var r=n(4052),i=n(2597),o=n(4079),a=n(1069);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},8189:(t,e,n)=>{var r=n(3871);t.exports=function(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:r(t,e,n)}},6599:(t,e,n)=>{var r=n(9841);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t===t,a=r(t),s=void 0!==e,c=null===e,l=e===e,u=r(e);if(!c&&!u&&!a&&t>e||a&&s&&l&&!c&&!u||i&&s&&l||!n&&l||!o)return 1;if(!i&&!a&&!u&&t<e||u&&n&&o&&!i&&!a||c&&n&&o||!s&&o||!l)return-1}return 0}},5893:(t,e,n)=>{var r=n(6599);t.exports=function(t,e,n){for(var i=-1,o=t.criteria,a=e.criteria,s=o.length,c=n.length;++i<s;){var l=r(o[i],a[i]);if(l)return i>=c?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}},3440:(t,e,n)=>{var r=n(6552)["__core-js_shared__"];t.exports=r},6516:(t,e,n)=>{var r=n(6571);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},5906:t=>{t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var c=a[t?s:++i];if(!1===n(o[c],c,o))break}return e}}},7676:(t,e,n)=>{var r=n(8189),i=n(6311),o=n(9115),a=n(1069);t.exports=function(t){return function(e){e=a(e);var n=i(e)?o(e):void 0,s=n?n[0]:e.charAt(0),c=n?r(n,1).join(""):e.slice(1);return s[t]()+c}}},9995:(t,e,n)=>{var r=n(9096),i=n(6571),o=n(8673);t.exports=function(t){return function(e,n,a){var s=Object(e);if(!i(e)){var c=r(n,3);e=o(e),n=function(t){return c(s[t],t,s)}}var l=t(e,n,a);return l>-1?s[c?e[l]:l]:void 0}}},3331:(t,e,n)=>{var r=n(9676),i=n(929),o=n(7303);t.exports=function(t){return function(e,n,a){return a&&"number"!=typeof a&&i(e,n,a)&&(n=a=void 0),e=o(e),void 0===n?(n=e,e=0):n=o(n),a=void 0===a?e<n?1:-1:o(a),r(e,n,a,t)}}},8182:(t,e,n)=>{var r=n(2070),i=n(5713),o=n(2074),a=r&&1/o(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=a},5654:(t,e,n)=>{var r=n(7937),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},3668:(t,e,n)=>{var r=n(8902),i=n(2587),o=n(8114);t.exports=function(t,e,n,a,s,c){var l=1&n,u=t.length,h=e.length;if(u!=h&&!(l&&h>u))return!1;var d=c.get(t),p=c.get(e);if(d&&p)return d==e&&p==t;var f=-1,m=!0,g=2&n?new r:void 0;for(c.set(t,e),c.set(e,t);++f<u;){var y=t[f],v=e[f];if(a)var b=l?a(v,y,f,e,t,c):a(y,v,f,t,e,c);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!i(e,(function(t,e){if(!o(g,e)&&(y===t||s(y,t,n,a,c)))return g.push(e)}))){m=!1;break}}else if(y!==v&&!s(y,v,n,a,c)){m=!1;break}}return c.delete(t),c.delete(e),m}},9987:(t,e,n)=>{var r=n(9812),i=n(2929),o=n(3211),a=n(3668),s=n(4160),c=n(2074),l=r?r.prototype:void 0,u=l?l.valueOf:void 0;t.exports=function(t,e,n,r,l,h,d){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=s;case"[object Set]":var f=1&r;if(p||(p=c),t.size!=e.size&&!f)return!1;var m=d.get(t);if(m)return m==e;r|=2,d.set(t,e);var g=a(p(t),p(e),r,l,h,d);return d.delete(t),g;case"[object Symbol]":if(u)return u.call(t)==u.call(e)}return!1}},5752:(t,e,n)=>{var r=n(9395),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,a,s){var c=1&n,l=r(t),u=l.length;if(u!=r(e).length&&!c)return!1;for(var h=u;h--;){var d=l[h];if(!(c?d in e:i.call(e,d)))return!1}var p=s.get(t),f=s.get(e);if(p&&f)return p==e&&f==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=c;++h<u;){var y=t[d=l[h]],v=e[d];if(o)var b=c?o(v,y,d,e,t,s):o(y,v,d,t,e,s);if(!(void 0===b?y===v||a(y,v,n,o,s):b)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var x=t.constructor,_=e.constructor;x==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _||(m=!1)}return s.delete(t),s.delete(e),m}},7105:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},9395:(t,e,n)=>{var r=n(4262),i=n(9621),o=n(8673);t.exports=function(t){return r(t,o,i)}},2622:(t,e,n)=>{var r=n(705);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},3781:(t,e,n)=>{var r=n(9417),i=n(8673);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,r(a)]}return e}},7937:(t,e,n)=>{var r=n(6954),i=n(4657);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},5990:(t,e,n)=>{var r=n(3028)(Object.getPrototypeOf,Object);t.exports=r},4552:(t,e,n)=>{var r=n(9812),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(c){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},9621:(t,e,n)=>{var r=n(7529),i=n(7828),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return o.call(t,e)})))}:i;t.exports=s},6924:(t,e,n)=>{var r=n(7685),i=n(5204),o=n(5387),a=n(2070),s=n(6600),c=n(6913),l=n(6996),u="[object Map]",h="[object Promise]",d="[object Set]",p="[object WeakMap]",f="[object DataView]",m=l(r),g=l(i),y=l(o),v=l(a),b=l(s),x=c;(r&&x(new r(new ArrayBuffer(1)))!=f||i&&x(new i)!=u||o&&x(o.resolve())!=h||a&&x(new a)!=d||s&&x(new s)!=p)&&(x=function(t){var e=c(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case m:return f;case g:return u;case y:return h;case v:return d;case b:return p}return e}),t.exports=x},4657:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},9057:(t,e,n)=>{var r=n(5324),i=n(2777),o=n(4052),a=n(9194),s=n(6173),c=n(914);t.exports=function(t,e,n){for(var l=-1,u=(e=r(e,t)).length,h=!1;++l<u;){var d=c(e[l]);if(!(h=null!=t&&n(t,d)))break;t=t[d]}return h||++l!=u?h:!!(u=null==t?0:t.length)&&s(u)&&a(d,u)&&(o(t)||i(t))}},6311:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},7615:(t,e,n)=>{var r=n(5575);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},5051:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},2154:(t,e,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},8734:(t,e,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},2662:(t,e,n)=>{var r=n(5575);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},7116:(t,e,n)=>{var r=n(9812),i=n(2777),o=n(4052),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},9194:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},929:(t,e,n)=>{var r=n(3211),i=n(6571),o=n(9194),a=n(6686);t.exports=function(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&o(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},2597:(t,e,n)=>{var r=n(4052),i=n(9841),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(a.test(t)||!o.test(t)||null!=e&&t in Object(e))}},705:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},7857:(t,e,n)=>{var r=n(3440),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},6140:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},9417:(t,e,n)=>{var r=n(6686);t.exports=function(t){return t===t&&!r(t)}},7563:t=>{t.exports=function(){this.__data__=[],this.size=0}},9935:(t,e,n)=>{var r=n(1340),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},4190:(t,e,n)=>{var r=n(1340);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},1946:(t,e,n)=>{var r=n(1340);t.exports=function(t){return r(this.__data__,t)>-1}},1714:(t,e,n)=>{var r=n(1340);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},7251:(t,e,n)=>{var r=n(8724),i=n(7160),o=n(5204);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},7159:(t,e,n)=>{var r=n(2622);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},438:(t,e,n)=>{var r=n(2622);t.exports=function(t){return r(this,t).get(t)}},9394:(t,e,n)=>{var r=n(2622);t.exports=function(t){return r(this,t).has(t)}},6874:(t,e,n)=>{var r=n(2622);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},4160:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},1310:t=>{t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},8259:(t,e,n)=>{var r=n(5797);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},5575:(t,e,n)=>{var r=n(7937)(Object,"create");t.exports=r},1143:(t,e,n)=>{var r=n(3028)(Object.keys,Object);t.exports=r},6832:(t,e,n)=>{t=n.nmd(t);var r=n(7105),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(e){}}();t.exports=s},6095:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},3028:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},5636:(t,e,n)=>{var r=n(1170),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=i(o.length-e,0),c=Array(s);++a<s;)c[a]=o[e+a];a=-1;for(var l=Array(e+1);++a<e;)l[a]=o[a];return l[e]=n(c),r(t,this,l)}}},6552:(t,e,n)=>{var r=n(7105),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},6179:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},6704:t=>{t.exports=function(t){return this.__data__.has(t)}},2074:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},6350:(t,e,n)=>{var r=n(8325),i=n(6578)(r);t.exports=i},6578:t=>{var e=Date.now;t.exports=function(t){var n=0,r=0;return function(){var i=e(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},4545:(t,e,n)=>{var r=n(7160);t.exports=function(){this.__data__=new r,this.size=0}},793:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},7760:t=>{t.exports=function(t){return this.__data__.get(t)}},3892:t=>{t.exports=function(t){return this.__data__.has(t)}},6788:(t,e,n)=>{var r=n(7160),i=n(5204),o=n(4816);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},4020:t=>{t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},9115:(t,e,n)=>{var r=n(5967),i=n(6311),o=n(715);t.exports=function(t){return i(t)?o(t):r(t)}},4079:(t,e,n)=>{var r=n(8259),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=a},914:(t,e,n)=>{var r=n(9841);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},6996:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(n){}try{return t+""}catch(n){}}return""}},2524:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},715:t=>{var e="\\ud800-\\udfff",n="["+e+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^"+e+"]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+r+"|"+i+")"+"?",l="[\\ufe0e\\ufe0f]?",u=l+c+("(?:\\u200d(?:"+[o,a,s].join("|")+")"+l+c+")*"),h="(?:"+[o+r+"?",r,a,s,n].join("|")+")",d=RegExp(i+"(?="+i+")|"+h+u,"g");t.exports=function(t){return t.match(d)||[]}},2541:t=>{t.exports=function(t){return function(){return t}}},3950:(t,e,n)=>{var r=n(6686),i=n(4757),o=n(801),a=Math.max,s=Math.min;t.exports=function(t,e,n){var c,l,u,h,d,p,f=0,m=!1,g=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var n=c,r=l;return c=l=void 0,f=e,h=t.apply(r,n)}function b(t){var n=t-p;return void 0===p||n>=e||n<0||g&&t-f>=u}function x(){var t=i();if(b(t))return _(t);d=setTimeout(x,function(t){var n=e-(t-p);return g?s(n,u-(t-f)):n}(t))}function _(t){return d=void 0,y&&c?v(t):(c=l=void 0,h)}function w(){var t=i(),n=b(t);if(c=arguments,l=this,p=t,n){if(void 0===d)return function(t){return f=t,d=setTimeout(x,e),m?v(t):h}(p);if(g)return clearTimeout(d),d=setTimeout(x,e),v(p)}return void 0===d&&(d=setTimeout(x,e)),h}return e=o(e)||0,r(n)&&(m=!!n.leading,u=(g="maxWait"in n)?a(o(n.maxWait)||0,e):u,y="trailing"in n?!!n.trailing:y),w.cancel=function(){void 0!==d&&clearTimeout(d),f=0,c=p=l=d=void 0},w.flush=function(){return void 0===d?h:_(i())},w}},3211:t=>{t.exports=function(t,e){return t===e||t!==t&&e!==e}},7002:(t,e,n)=>{var r=n(5295),i=n(4746),o=n(9096),a=n(4052),s=n(929);t.exports=function(t,e,n){var c=a(t)?r:i;return n&&s(t,e,n)&&(e=void 0),c(t,o(e,3))}},8990:(t,e,n)=>{var r=n(9995)(n(2520));t.exports=r},2520:(t,e,n)=>{var r=n(5816),i=n(9096),o=n(9140),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var c=null==n?0:o(n);return c<0&&(c=a(s+c,0)),r(t,i(e,3),c)}},3538:(t,e,n)=>{var r=n(755),i=n(3411);t.exports=function(t,e){return r(i(t,e),1)}},3097:(t,e,n)=>{var r=n(2969);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},3366:(t,e,n)=>{var r=n(7894),i=n(9057);t.exports=function(t,e){return null!=t&&i(t,e,r)}},3279:t=>{t.exports=function(t){return t}},2777:(t,e,n)=>{var r=n(5193),i=n(2761),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=c},4052:t=>{var e=Array.isArray;t.exports=e},6571:(t,e,n)=>{var r=n(1629),i=n(6173);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},6361:(t,e,n)=>{var r=n(6913),i=n(2761);t.exports=function(t){return!0===t||!1===t||i(t)&&"[object Boolean]"==r(t)}},4543:(t,e,n)=>{t=n.nmd(t);var r=n(6552),i=n(14),o=e&&!e.nodeType&&e,a=o&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;t.exports=c},9853:(t,e,n)=>{var r=n(6989);t.exports=function(t,e){return r(t,e)}},1629:(t,e,n)=>{var r=n(6913),i=n(6686);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},6173:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},5268:(t,e,n)=>{var r=n(9160);t.exports=function(t){return r(t)&&t!=+t}},9686:t=>{t.exports=function(t){return null==t}},9160:(t,e,n)=>{var r=n(6913),i=n(2761);t.exports=function(t){return"number"==typeof t||i(t)&&"[object Number]"==r(t)}},6686:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},2761:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},2322:(t,e,n)=>{var r=n(6913),i=n(5990),o=n(2761),a=Function.prototype,s=Object.prototype,c=a.toString,l=s.hasOwnProperty,u=c.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==u}},620:(t,e,n)=>{var r=n(6913),i=n(4052),o=n(2761);t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&"[object String]"==r(t)}},9841:(t,e,n)=>{var r=n(6913),i=n(2761);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},1268:(t,e,n)=>{var r=n(5428),i=n(7574),o=n(6832),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},8673:(t,e,n)=>{var r=n(3204),i=n(3713),o=n(6571);t.exports=function(t){return o(t)?r(t):i(t)}},4065:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},3411:(t,e,n)=>{var r=n(149),i=n(9096),o=n(8883),a=n(4052);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},1733:(t,e,n)=>{var r=n(1775),i=n(4664),o=n(9096);t.exports=function(t,e){var n={};return e=o(e,3),i(t,(function(t,i,o){r(n,i,e(t,i,o))})),n}},539:(t,e,n)=>{var r=n(9742),i=n(7498),o=n(3279);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},5797:(t,e,n)=>{var r=n(4816);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},6745:(t,e,n)=>{var r=n(9742),i=n(61),o=n(3279);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},5713:t=>{t.exports=function(){}},4757:(t,e,n)=>{var r=n(6552);t.exports=function(){return r.Date.now()}},3932:(t,e,n)=>{var r=n(396),i=n(2866),o=n(2597),a=n(914);t.exports=function(t){return o(t)?r(a(t)):i(t)}},6604:(t,e,n)=>{var r=n(3331)();t.exports=r},4597:(t,e,n)=>{var r=n(2587),i=n(9096),o=n(2165),a=n(4052),s=n(929);t.exports=function(t,e,n){var c=a(t)?r:o;return n&&s(t,e,n)&&(e=void 0),c(t,i(e,3))}},7424:(t,e,n)=>{var r=n(755),i=n(2536),o=n(5647),a=n(929),s=o((function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])}));t.exports=s},7828:t=>{t.exports=function(){return[]}},14:t=>{t.exports=function(){return!1}},9889:(t,e,n)=>{var r=n(3950),i=n(6686);t.exports=function(t,e,n){var o=!0,a=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),r(t,e,{leading:o,maxWait:e,trailing:a})}},7303:(t,e,n)=>{var r=n(801),i=1/0;t.exports=function(t){return t?(t=r(t))===i||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}},9140:(t,e,n)=>{var r=n(7303);t.exports=function(t){var e=r(t),n=e%1;return e===e?n?e-n:e:0}},801:(t,e,n)=>{var r=n(1141),i=n(6686),o=n(9841),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=s.test(t);return n||c.test(t)?l(t.slice(2),n?2:8):a.test(t)?NaN:+t}},1069:(t,e,n)=>{var r=n(8541);t.exports=function(t){return null==t?"":r(t)}},977:(t,e,n)=>{var r=n(9096),i=n(4416);t.exports=function(t,e){return t&&t.length?i(t,r(e,2)):[]}},643:(t,e,n)=>{var r=n(7676)("toUpperCase");t.exports=r},7353:t=>{t.exports=n;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(E){}function n(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function r(t){return!0===(t&&t.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},o={};function a(t,e){var n,r,a;return e?(a=0<=(t>>>=0)&&t<256)&&(r=o[t])?r:(n=c(t,(0|t)<0?-1:0,!0),a&&(o[t]=n),n):(a=-128<=(t|=0)&&t<128)&&(r=i[t])?r:(n=c(t,t<0?-1:0,!1),a&&(i[t]=n),n)}function s(t,e){if(isNaN(t))return e?y:g;if(e){if(t<0)return y;if(t>=p)return w}else{if(t<=-f)return S;if(t+1>=f)return _}return t<0?s(-t,e).neg():c(t%d|0,t/d|0,e)}function c(t,e,r){return new n(t,e,r)}n.fromInt=a,n.fromNumber=s,n.fromBits=c;var l=Math.pow;function u(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return g;if("number"===typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(t.substring(1),e,n).neg();for(var i=s(l(n,8)),o=g,a=0;a<t.length;a+=8){var c=Math.min(8,t.length-a),h=parseInt(t.substring(a,a+c),n);if(c<8){var d=s(l(n,c));o=o.mul(d).add(s(h))}else o=(o=o.mul(i)).add(s(h))}return o.unsigned=e,o}function h(t,e){return"number"===typeof t?s(t,e):"string"===typeof t?u(t,e):c(t.low,t.high,"boolean"===typeof e?e:t.unsigned)}n.fromString=u,n.fromValue=h;var d=4294967296,p=d*d,f=p/2,m=a(1<<24),g=a(0);n.ZERO=g;var y=a(0,!0);n.UZERO=y;var v=a(1);n.ONE=v;var b=a(1,!0);n.UONE=b;var x=a(-1);n.NEG_ONE=x;var _=c(-1,2147483647,!1);n.MAX_VALUE=_;var w=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=w;var S=c(0,-2147483648,!1);n.MIN_VALUE=S;var T=n.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},T.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var e=s(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=s(l(t,6),this.unsigned),o=this,a="";;){var c=o.div(i),u=(o.sub(c.mul(i)).toInt()>>>0).toString(t);if((o=c).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1===(1&this.low)},T.isEven=function(){return 0===(1&this.low)},T.equals=function(t){return r(t)||(t=h(t)),(this.unsigned===t.unsigned||this.high>>>31!==1||t.high>>>31!==1)&&(this.high===t.high&&this.low===t.low)},T.eq=T.equals,T.notEquals=function(t){return!this.eq(t)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(t){return this.comp(t)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(t){return this.comp(t)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(t){return this.comp(t)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(t){return this.comp(t)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(t){if(r(t)||(t=h(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(v)},T.neg=T.negate,T.add=function(t){r(t)||(t=h(t));var e=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,a=t.high>>>16,s=65535&t.high,l=t.low>>>16,u=0,d=0,p=0,f=0;return p+=(f+=o+(65535&t.low))>>>16,d+=(p+=i+l)>>>16,u+=(d+=n+s)>>>16,u+=e+a,c((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},T.subtract=function(t){return r(t)||(t=h(t)),this.add(t.neg())},T.sub=T.subtract,T.multiply=function(t){if(this.isZero())return g;if(r(t)||(t=h(t)),e)return c(e.mul(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned);if(t.isZero())return g;if(this.eq(S))return t.isOdd()?S:g;if(t.eq(S))return this.isOdd()?S:g;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(m)&&t.lt(m))return s(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,a=65535&this.low,l=t.high>>>16,u=65535&t.high,d=t.low>>>16,p=65535&t.low,f=0,y=0,v=0,b=0;return v+=(b+=a*p)>>>16,y+=(v+=o*p)>>>16,v&=65535,y+=(v+=a*d)>>>16,f+=(y+=i*p)>>>16,y&=65535,f+=(y+=o*d)>>>16,y&=65535,f+=(y+=a*u)>>>16,f+=n*p+i*d+o*u+a*l,c((v&=65535)<<16|(b&=65535),(f&=65535)<<16|(y&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(t){if(r(t)||(t=h(t)),t.isZero())throw Error("division by zero");var n,i,o;if(e)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?c((this.unsigned?e.div_u:e.div_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return y;if(t.gt(this.shru(1)))return b;o=y}else{if(this.eq(S))return t.eq(v)||t.eq(x)?S:t.eq(S)?v:(n=this.shr(1).div(t).shl(1)).eq(g)?t.isNegative()?v:x:(i=this.sub(t.mul(n)),o=n.add(i.div(t)));if(t.eq(S))return this.unsigned?y:g;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=g}for(i=this;i.gte(t);){n=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),u=a<=48?1:l(2,a-48),d=s(n),p=d.mul(t);p.isNegative()||p.gt(i);)p=(d=s(n-=u,this.unsigned)).mul(t);d.isZero()&&(d=v),o=o.add(d),i=i.sub(p)}return o},T.div=T.divide,T.modulo=function(t){return r(t)||(t=h(t)),e?c((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return c(~this.low,~this.high,this.unsigned)},T.and=function(t){return r(t)||(t=h(t)),c(this.low&t.low,this.high&t.high,this.unsigned)},T.or=function(t){return r(t)||(t=h(t)),c(this.low|t.low,this.high|t.high,this.unsigned)},T.xor=function(t){return r(t)||(t=h(t)),c(this.low^t.low,this.high^t.high,this.unsigned)},T.shiftLeft=function(t){return r(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?c(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):c(0,this.low<<t-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(t){return r(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?c(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):c(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(t){if(r(t)&&(t=t.toInt()),0===(t&=63))return this;var e=this.high;return t<32?c(this.low>>>t|e<<32-t,e>>>t,this.unsigned):c(32===t?e:e>>>t-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},T.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},T.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},n.fromBytes=function(t,e,r){return r?n.fromBytesLE(t,e):n.fromBytesBE(t,e)},n.fromBytesLE=function(t,e){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},n.fromBytesBE=function(t,e){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},6676:(t,e,n)=>{"use strict";var r=n(2768),i={body:"",args:[],thisVars:[],localVars:[]};function o(t){if(!t)return i;for(var e=0;e<t.args.length;++e){var n=t.args[e];t.args[e]=0===e?{name:n,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:{name:n,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function a(t){for(var e=[],n=0;n<t.args.length;++n)e.push("a"+n);return new Function("P",["return function ",t.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""))(function(t){return r({args:t.args,pre:o(t.pre),body:o(t.body),post:o(t.proc),funcName:t.funcName})}(t))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var t in s){var n=s[t];e[t]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:t}),e[t+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+n+"=b"},rvalue:!0,funcName:t+"eq"}),e[t+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:t+"s"}),e[t+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+n+"=s"},rvalue:!0,funcName:t+"seq"})}}();var c={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var t in c){var n=c[t];e[t]=a({args:["array","array"],body:{args:["a","b"],body:"a="+n+"b"},funcName:t}),e[t+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+n+"a"},rvalue:!0,count:2,funcName:t+"eq"})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var t in l){var n=l[t];e[t]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:t}),e[t+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:t+"s"}),e[t+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+n+"b"},rvalue:!0,count:2,funcName:t+"eq"}),e[t+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+n+"s"},rvalue:!0,count:2,funcName:t+"seq"})}}();var u=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var t=0;t<u.length;++t){var n=u[t];e[n]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:n}),e[n+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"})}}();var h=["max","min","atan2","pow"];!function(){for(var t=0;t<h.length;++t){var n=h[t];e[n]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n}),e[n+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n+"s"}),e[n+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"}),e[n+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"seq"})}}();var d=["atan2","pow"];!function(){for(var t=0;t<d.length;++t){var n=d[t];e[n+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"op"}),e[n+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"ops"}),e[n+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opeq"}),e[n+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opseq"})}}(),e.any=r({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=r({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=r({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=r({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=r({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=r({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=r({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},516:(t,e,n)=>{var r=n(6540),i=n(5837),o="undefined"!==typeof Float64Array;function a(t,e){return t[0]-e[0]}function s(){var t,e=this.stride,n=new Array(e.length);for(t=0;t<n.length;++t)n[t]=[Math.abs(e[t]),t];n.sort(a);var r=new Array(n.length);for(t=0;t<r.length;++t)r[t]=n[t][1];return r}function c(t,e){var n=["View",e,"d",t].join("");e<0&&(n="View_Nil"+t);var i="generic"===t;if(-1===e){var o="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(o)()}if(0===e){o="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}";return new Function("TrivialArray",o)(l[t][0])}o=["'use strict'"];var a=r(e),c=a.map((function(t){return"i"+t})),u="this.offset+"+a.map((function(t){return"this.stride["+t+"]*i"+t})).join("+"),h=a.map((function(t){return"b"+t})).join(","),d=a.map((function(t){return"c"+t})).join(",");o.push("function "+n+"(a,"+h+","+d+",d){this.data=a","this.shape=["+h+"]","this.stride=["+d+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),o.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+a.map((function(t){return"this.shape["+t+"]"})).join("*"),"}})"),1===e?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),e<4?(o.push("function "+n+"_order(){"),2===e?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+n+"_set("+c.join(",")+",v){"),i?o.push("return this.data.set("+u+",v)}"):o.push("return this.data["+u+"]=v}"),o.push("proto.get=function "+n+"_get("+c.join(",")+"){"),i?o.push("return this.data.get("+u+")}"):o.push("return this.data["+u+"]}"),o.push("proto.index=function "+n+"_index(",c.join(),"){return "+u+"}"),o.push("proto.hi=function "+n+"_hi("+c.join(",")+"){return new "+n+"(this.data,"+a.map((function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")})).join(",")+","+a.map((function(t){return"this.stride["+t+"]"})).join(",")+",this.offset)}");var p=a.map((function(t){return"a"+t+"=this.shape["+t+"]"})),f=a.map((function(t){return"c"+t+"=this.stride["+t+"]"}));o.push("proto.lo=function "+n+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+f.join(","));for(var m=0;m<e;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");o.push("return new "+n+"(this.data,"+a.map((function(t){return"a"+t})).join(",")+","+a.map((function(t){return"c"+t})).join(",")+",b)}"),o.push("proto.step=function "+n+"_step("+c.join(",")+"){var "+a.map((function(t){return"a"+t+"=this.shape["+t+"]"})).join(",")+","+a.map((function(t){return"b"+t+"=this.stride["+t+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(m=0;m<e;++m)o.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");o.push("return new "+n+"(this.data,"+a.map((function(t){return"a"+t})).join(",")+","+a.map((function(t){return"b"+t})).join(",")+",c)}");var g=new Array(e),y=new Array(e);for(m=0;m<e;++m)g[m]="a[i"+m+"]",y[m]="b[i"+m+"]";o.push("proto.transpose=function "+n+"_transpose("+c+"){"+c.map((function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+g.join(",")+","+y.join(",")+",this.offset)}"),o.push("proto.pick=function "+n+"_pick("+c+"){var a=[],b=[],c=this.offset");for(m=0;m<e;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");return o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+a.map((function(t){return"shape["+t+"]"})).join(",")+","+a.map((function(t){return"stride["+t+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",o.join("\n"))(l[t],s)}var l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};t.exports=function(t,e,n,r){if(void 0===t)return(0,l.array[0])([]);"number"===typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var a=e.length;if(void 0===n){n=new Array(a);for(var s=a-1,u=1;s>=0;--s)n[s]=u,u*=e[s]}if(void 0===r){r=0;for(s=0;s<a;++s)n[s]<0&&(r-=(e[s]-1)*n[s])}for(var h=function(t){if(i(t))return"buffer";if(o)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}(t),d=l[h];d.length<=a+1;)d.push(c(h,d.length-1));return(0,d[a+1])(t,e,n,r)}},1020:module=>{var e;window,e=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=26)}([function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.checkInputsShape=void 0;var a=o(n(13)),s=n(9),c=n(1);e.checkInputsShape=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!t||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].dims||t[r].dims.length!==e[r])return!1;return!0};var l=function(){function t(){}return t.preprocessInputShapes=function(t,e){return[1===t.length?[1,t[0]]:t,1===e.length?[e[0],1]:e]},t.postprocessOutputShape=function(t,e,n){1===e&&t.splice(t.length-2,1),1===n&&t.pop()},t.calcMatMulShape=function(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]},t}();e.MatMulUtil=l;var u=function(){function t(){}return t.calcShape=function(t,e,n){var i;void 0===n&&(n=!1);var o=t.length,a=e.length;if(0===o)return e;if(0===a)return t;var s=Math.max(t.length,e.length),c=new Array(s);if(n){if(o<2||a<2)return;var u=l.calcMatMulShape([t[o-2],t[o-1]],[e[a-2],e[a-1]]);if(void 0===u)return;i=r(u,2),c[s-2]=i[0],c[s-1]=i[1]}for(var h=n?3:1;h<=s;h++){var d=o-h<0?1:t[o-h],p=a-h<0?1:e[a-h];if(d!==p&&d>1&&p>1)return;c[s-h]=Math.max(d,p)}return c},t.index=function(e,n){var r=new Array(n.length);return t.fillIndex(e,n,r),r},t.fillIndex=function(t,e,n){for(var r=t.length-e.length,i=0;i<e.length;i++)n[i]=t[r+i]%e[i]},t.calc=function(e,n,r,i,o){var a=t.calcShape(e.dims,n.dims);if(a){if(i&&!f.areEqual(a,e.dims))return;var s=f.size(a),l=i?e:new c.Tensor(a,o||e.type);if(0===a.length)l.set([],r(e.get([]),n.get([])));else{var u=new Array(a.length),h=new Array(e.dims.length),d=new Array(n.dims.length),p=0,m=0,g=!1,y=!1;0===e.dims.length&&(p=e.get([]),g=!0),0===n.dims.length&&(m=n.get([]),y=!0);for(var v=void 0,b=0;b<s;b++){v=b;for(var x=a.length-1;x>=0;x--)u[x]=v%a[x],v=Math.floor(v/a[x]);g||(t.fillIndex(u,e.dims,h),p=e.get(h)),y||(t.fillIndex(u,n.dims,d),m=n.get(d)),l.set(u,r(p,m))}}return l}},t.isValidBroadcast=function(t,e){var n=t.length,r=e.length;if(n>r)return!1;for(var i=1;i<=n;i++)if(1!==t[n-i]&&t[n-i]!==e[r-i])return!1;return!0},t}();e.BroadcastUtil=u,e.arrayCopyHelper=function(t,e,n,r,i){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+i>e.length)throw new Error("source indices to be copied are outside bounds");if(n+i>t.length)throw new Error("target array is too small to hold result");for(var o=0;o<i;o++)t[n+o]=e[r+o]};var h=function(){function t(){}return t.getShapeOfGemmResult=function(t,e,n,r,i){if(2!==t.length||2!==n.length)throw new Error("shape need to be of size 2");var o,a,s;e?(o=t[1],a=t[0]):(o=t[0],a=t[1]);var c=-1;if(r?(s=n[0],c=1):(s=n[1],c=0),n[c]!==a)throw new Error("dimension mismatch");if(o<=0||s<=0||a<=0)throw new Error("invalid shape specified");if(i&&!u.isValidBroadcast(i,[o,s]))throw new Error("gemm: invalid bias shape for broadcast");return[o,s,a]},t}();e.GemmUtil=h;var d=function(){function t(){}return t.tensorDataTypeFromProto=function(t){switch(t){case s.onnx.TensorProto.DataType.INT8:return"int8";case s.onnx.TensorProto.DataType.UINT8:return"uint8";case s.onnx.TensorProto.DataType.BOOL:return"bool";case s.onnx.TensorProto.DataType.INT16:return"int16";case s.onnx.TensorProto.DataType.UINT16:return"uint16";case s.onnx.TensorProto.DataType.INT32:return"int32";case s.onnx.TensorProto.DataType.UINT32:return"uint32";case s.onnx.TensorProto.DataType.FLOAT:return"float32";case s.onnx.TensorProto.DataType.DOUBLE:return"float64";case s.onnx.TensorProto.DataType.STRING:return"string";case s.onnx.TensorProto.DataType.INT64:return"int32";case s.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error("unsupported data type: "+s.onnx.TensorProto.DataType[t])}},t.tensorDimsFromProto=function(t){return t.map((function(t){return a.default.isLong(t)?t.toNumber():t}))},t.tensorValueTypeFromProto=function(e){return{tensorType:t.tensorDataTypeFromProto(e.elemType),shape:{dims:t.tensorDimsFromProto(e.shape.dim.map((function(t){return t.dimValue})))}}},t}();e.ProtoUtil=d;var p=function(){function t(){}return t.longToNumber=function(t){return a.default.isLong(t)?t.toNumber():t},t}();e.LongUtil=p;var f=function(){function t(){}return t.size=function(e){return t.getSizeFromDimensionRange(e,0,e.length)},t.sizeFromDimension=function(e,n){if(n<0||n>e.length)throw new Error("invalid dimension of "+n+" for sizeFromDimension as Tensor has "+e.length+" dimensions.");return t.getSizeFromDimensionRange(e,n,e.length)},t.sizeToDimension=function(e,n){if(n<0||n>e.length)throw new Error("invalid dimension of "+n+" for sizeToDimension as Tensor has "+e.length+" dimensions.");return t.getSizeFromDimensionRange(e,0,n)},t.getSizeFromDimensionRange=function(t,e,n){for(var r=1,i=e;i<n;i++){if(t[i]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");r*=t[i]}return r},t.computeStrides=function(t){var e=t.length;if(0===e)return[];if(1===e)return[1];var n=new Array(e);n[e-1]=1,n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n},t.transpose=function(t){return t.slice().reverse()},t.indicesToOffset=function(t,e,n){void 0===n&&(n=t.length);for(var r=0,i=0;i<n;++i)r+=e[i]*t[i];return r},t.offsetToIndices=function(t,e){var n=e.length;if(0===n)return[];if(1===n)return[t*e[0]];for(var r=new Array(e.length),i=0;i<r.length-1;++i)r[i]=Math.floor(t/e[i]),t-=r[i]*e[i];return r[r.length-1]=t,r},t.normalizeAxis=function(t,e){if(t<-e&&t>=e)throw new Error("unsupported axis for this operation.");return t<0?t+e:t},t.normalizeAxes=function(t,e){var n=this;return t.map((function(t){return n.normalizeAxis(t,e)}))},t.incrementIndex=function(t,e,n){if(0===e.length||0===t.length)throw new Error("Index incrementing unsupported for scalar Tensor");if(void 0===n)n=e.length;else if(n<=0||n>e.length)throw new Error("Incorrect axis to increment on");for(var r=n-1;r>=0&&(t[r]++,!(t[r]<e[r]));--r)t[r]=0},t.calculateReshapedDims=function(e,n){if(0===n.length){if(0===e.length||1===t.size(e))return[];throw new Error("cannot reshape to a scalar Tensor")}for(var r=n.length,i=new Array(r),o=-1,a=1,s=0;s<r;s++){if(n[s]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(-1===n[s]){if(-1!==o)throw new Error("at most one dimension in shape hints can be -1");o=s}else{if(0===n[s]){if(s>=e.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");i[s]=e[s]}else i[s]=n[s];a*=i[s]}}var c=t.size(e);if(-1!==o){if(c%a!=0)throw new Error("the input tensor cannot be reshaped to the requested shape. Input shape: ["+e+"] Output shape: ["+n+"]");i[o]=c/a}else if(a!==c)throw new Error("reshapedDims and originalDims don't have matching sizes");return i},t.sortBasedOnPerm=function(t,e){return e?e.map((function(e){return t[e]})):t.slice().reverse()},t.padShape=function(t,e){var n=t.length;return t.map((function(t,r){return t+e[r]+e[r+n]}))},t.areEqual=function(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))},t.validateDimsAndCalcSize=function(t){var e,n;if(t.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");var r=1;try{for(var o=i(t),a=o.next();!a.done;a=o.next()){var s=a.value;if(!Number.isInteger(s))throw new TypeError("Invalid shape: "+s+" is not an integer");if(s<0||s>2147483647)throw new TypeError("Invalid shape: length "+s+" is not allowed");r*=s}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.flattenShape=function(t,e){e<0&&(e+=t.length);var n=t.reduce((function(t,e){return t*e}),1),r=t.slice(e).reduce((function(t,e){return t*e}),1);return[n/r,r]},t.squeezeShape=function(e,n){var r=new Array;n=t.normalizeAxes(n,e.length);for(var i=0;i<e.length;i++){var o=n.indexOf(i)>=0;if(o&&1!==e[i])throw new Error("squeeze an axis of size different than 1");(0===n.length&&e[i]>1||n.length>0&&!o)&&r.push(e[i])}return r},t.unsqueezeShape=function(e,n){var r=new Array(e.length+n.length);r.fill(0);for(var i=0;i<n.length;i++){var o=t.normalizeAxis(n[i],e.length);if(o>=r.length)throw new Error("'axes' has an out of range axis");if(0!==r[o])throw new Error("'axes' has a duplicate axis");r[o]=1}var a=0;for(i=0;i<r.length;i++)0===r[i]&&(r[i]=e[a++]);if(a!==e.length)throw new Error("the unsqueezed dimension could not be established");return r},t}();e.ShapeUtil=f;var m=function(){function t(){}return t.sqr=function(t,e,n,r,i){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+i>e.length)throw new Error("source indices to be copied are outside bounds");if(n+i>t.length)throw new Error("target array is too small to hold result");for(var o=0;o<i;o++)t[n+o]+=Math.pow(e[r+o],2)},t.axpy=function(t,e,n,r,i,o){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+i>e.length)throw new Error("source indices to be copied are outside bounds");if(n+i>t.length)throw new Error("target array is too small to hold result");for(var a=0;a<i;a++)t[n+a]+=o*e[r+a]},t.powx=function(t,e,n,r,i,o){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+i>e.length)throw new Error("source indices to be copied are outside bounds");if(n+i>t.length)throw new Error("target array is too small to hold result");for(var a=0;a<i;a++)t[n+a]=Math.pow(e[r+a],o)},t.mul=function(t,e,n,r,i){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+i>e.length)throw new Error("source indices to be copied are outside bounds");if(n+i>t.length)throw new Error("target array is too small to hold result");for(var o=0;o<i;o++)t[n+o]=e[r+o]*t[n+o]},t}();e.MathUtil=m;var g=function(){function t(){}return t.splitShape=function(e,n,r,i){if(0===r.length){if(!i)throw new Error("need to know number of outputs when the 'split' attribute is not specified");t.determineSplit(e[n],i,r)}for(var o=[],a=[0],s=0;s<r.length;++s){0!==s&&a.push(a[s-1]+r[s-1]);var c=e.slice();c[n]=r[s],o.push(c)}return[o,a]},t.determineSplit=function(t,e,n){if(t%e!=0)throw new Error("cannot split tensor to equal sized parts");for(var r=0;r<e;++r)n.push(t/e)},t}();e.SplitUtil=g;var y=function(){function t(){}return t.calcReduce=function(e,n,r,i,o){var a=e.dims.slice(0);0===n.length&&a.forEach((function(t,e){return n.push(e)}));for(var s=t.calcReduceShape(a,n,!0),l=f.size(s),h=new c.Tensor(s,e.type),d=f.computeStrides(s),p=f.computeStrides(a),m=new Array(a.length),g=0;g<l;g++){var y=f.offsetToIndices(g,d);u.fillIndex(y,a,m),h.set(y,t.calcReduceByAxis(e.numberData,n,a,0,f.indicesToOffset(m,p),i,o))}return r?h:new c.Tensor(t.calcReduceShape(a,n,r),h.type,void 0,void 0,h.data,h.dataId)},t.calcReduceByAxis=function(e,n,r,i,o,a,s){var c=0;if(i>=n.length)return a(e[o]);for(var l=n[i],u=l>=r.length?1:f.size(r.slice(l+1)),h=0;h<r[l];h++)c=0===h?t.calcReduceByAxis(e,n,r,i+1,o,a,s):s(c,t.calcReduceByAxis(e,n,r,i+1,o,a,s)),o+=u;return c},t.calcReduceShape=function(t,e,n){for(var r=t.slice(),i=0;i<e.length;i++)r[e[i]]=n?1:0;return r.filter((function(t){return 0!==t}))},t}();e.ReduceUtil=y;var v=function(){function t(){}return t.adjustPoolAttributes=function(t,e,n,r,i){if(!t&&n.length!==e.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(var o=0;o<e.length-2;o++)o>=n.length?n.push(e[o+2]):n[o]=e[o+2];for(o=0;o<n.length;o++)if(o<r.length){if(r[o]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(o=0;o<2*n.length;o++)if(o<i.length){if(i[o]<0)throw new Error("pad should be greater than or equal to 1")}else i.push(0);for(o=0;o<n.length;o++){if(n[o]<=0)throw new Error("kernel shapes need to be greater than 0");if(i[o]>=n[o]||i[o+n.length]>=n[o])throw new Error("pads should be smaller than kernel")}},t.adjustPadsBasedOnAutoPad=function(e,n,r,i,o,a){if(a){if(o.length!==2*(e.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==e.length-2)throw new Error("length of strides should be the length of data dimensions");if(i.length!==e.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(var s=0;s<e.length-2;s++)t.adjustPadAndReturnShape(e[s+2],n[s],r[s],i[s],o,s,s+e.length-2,a)}},t.computePoolOutputShape=function(e,n,r,i,o,a){if(n.length<=0)throw new Error("input shape must be of size greater than 0");var s=[n[0],n[1]],c=new Array(i.length).fill(1);return t.computeShapeHelper(e,n,s,r,c,i,o,a),s},t.computeConvOutputShape=function(e,n,r,i,o,a,s){if(e.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");var c=[e[0],n[0]];return t.computeShapeHelper(!1,e,c,r,i,o,a,s),c},t.computeShapeHelper=function(e,n,r,i,o,a,s,c){if(e)for(var l=0;l<n.length-2;l++)r.push(1);else for(l=0;l<n.length-2;l++)r.push(t.adjustPadAndReturnShape(n[l+2],i[l],o[l],a[l],s,l,l+n.length-2,c))},t.adjustPadAndReturnShape=function(t,e,n,r,i,o,a,s){var c=n*(r-1)+1;if(!s||"NOTSET"===s)return Math.floor((t+i[o]+i[a]-c)/e+1);switch(s){case"VALID":return i[o]=0,i[a]=0,Math.floor((t-c)/e+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==n)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");var l=((t+e-1)/e-1)*e+r-t;return i[o]="SAME_LOWER"===s?Math.floor((l+1)/2):Math.floor(l/2),i[a]=l-i[o],Math.floor((t+l-r)/e+1);default:throw new Error("Unsupported AutoPad type")}},t}();e.PoolConvUtil=v},function(t,e,n){"use strict";(function(t){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;var a=o(n(13)),s=n(9),c=n(0),l=function(){function e(t,e,n,r,i,o){void 0===o&&(o={}),this.dims=t,this.type=e,this.dataProvider=n,this.asyncDataProvider=r,this.cache=i,this.dataId=o,this.size=c.ShapeUtil.validateDimsAndCalcSize(t);var a=this.size,s=void 0===n&&void 0===r&&void 0===i;if(void 0!==i&&i.length!==a)throw new RangeError("Input dims doesn't match data length.");if("string"===e){if(!(void 0===i||Array.isArray(i)&&i.every((function(t){return"string"==typeof t}))))throw new TypeError("cache should be a string array");s&&(i=new Array(a))}else{if(void 0!==i){var l=u(e);if(!(i instanceof l))throw new TypeError("cache should be type "+l.name)}if(s){var h=new ArrayBuffer(a*function(t){switch(t){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error("cannot calculate sizeof() on type "+t)}}(e));this.cache=function(t,e){return new(u(e))(t)}(h,e)}}}return Object.defineProperty(e.prototype,"data",{get:function(){if(void 0===this.cache){var t=this.dataProvider(this.dataId);if(t.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=t}return this.cache},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stringData",{get:function(){if("string"!==this.type)throw new TypeError("data type is not string");return this.data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"integerData",{get:function(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"floatData",{get:function(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberData",{get:function(){if("string"!==this.type)return this.data;throw new TypeError("type cannot be non-number (string)")},enumerable:!1,configurable:!0}),e.prototype.get=function(t){return this.data[c.ShapeUtil.indicesToOffset(t,this.strides)]},e.prototype.set=function(t,e){this.data[c.ShapeUtil.indicesToOffset(t,this.strides)]=e},e.prototype.getData=function(){return r(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return void 0!==this.cache?[3,2]:(t=this,[4,this.asyncDataProvider(this.dataId)]);case 1:t.cache=e.sent(),e.label=2;case 2:return[2,this.cache]}}))}))},Object.defineProperty(e.prototype,"strides",{get:function(){return this._strides||(this._strides=c.ShapeUtil.computeStrides(this.dims)),this._strides},enumerable:!1,configurable:!0}),e.fromProto=function(n){if(!n)throw new Error("cannot construct Value from an empty tensor");var r=c.ProtoUtil.tensorDataTypeFromProto(n.dataType),i=new e(c.ProtoUtil.tensorDimsFromProto(n.dims),r);if("string"===r)n.stringData.forEach((function(e,n){var r=t.from(e.buffer,e.byteOffset,e.byteLength);i.data[n]=r.toString()}));else if(n.rawData&&"number"==typeof n.rawData.byteLength&&n.rawData.byteLength>0){var o=i.data,l=new DataView(n.rawData.buffer,n.rawData.byteOffset,n.rawData.byteLength),u=function(t){switch(t){case s.onnx.TensorProto.DataType.UINT8:case s.onnx.TensorProto.DataType.INT8:case s.onnx.TensorProto.DataType.BOOL:return 1;case s.onnx.TensorProto.DataType.UINT16:case s.onnx.TensorProto.DataType.INT16:return 2;case s.onnx.TensorProto.DataType.FLOAT:case s.onnx.TensorProto.DataType.INT32:case s.onnx.TensorProto.DataType.UINT32:return 4;case s.onnx.TensorProto.DataType.INT64:case s.onnx.TensorProto.DataType.DOUBLE:case s.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error("cannot calculate sizeof() on type "+s.onnx.TensorProto.DataType[t])}}(n.dataType),p=n.rawData.byteLength/u;if(n.rawData.byteLength%u!=0)throw new Error("invalid buffer length");if(o.length!==p)throw new Error("buffer length mismatch");for(var f=0;f<p;f++){var m=d(l,n.dataType,f*u);o[f]=m}}else{var g=void 0;switch(n.dataType){case s.onnx.TensorProto.DataType.FLOAT:g=n.floatData;break;case s.onnx.TensorProto.DataType.INT32:case s.onnx.TensorProto.DataType.INT16:case s.onnx.TensorProto.DataType.UINT16:case s.onnx.TensorProto.DataType.INT8:case s.onnx.TensorProto.DataType.UINT8:case s.onnx.TensorProto.DataType.BOOL:g=n.int32Data;break;case s.onnx.TensorProto.DataType.INT64:g=n.int64Data;break;case s.onnx.TensorProto.DataType.DOUBLE:g=n.doubleData;break;case s.onnx.TensorProto.DataType.UINT32:case s.onnx.TensorProto.DataType.UINT64:g=n.uint64Data;break;default:throw new Error("unspecific error")}if(null==g)throw new Error("failed to populate data from a tensorproto value");var y=i.data;if(y.length!==g.length)throw new Error("array length mismatch");for(f=0;f<g.length;f++){var v=g[f];a.default.isLong(v)?y[f]=h(v,n.dataType):y[f]=v}}return i},e.fromData=function(t,n,r){return new e(n,r,void 0,void 0,t)},e}();function u(t){switch(t){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function h(t,e){if(e===s.onnx.TensorProto.DataType.INT64){if(t.greaterThanOrEqual(2147483648)||t.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(e!==s.onnx.TensorProto.DataType.UINT32&&e!==s.onnx.TensorProto.DataType.UINT64)throw new TypeError("not a LONG type: "+s.onnx.TensorProto.DataType[e]);if(t.greaterThanOrEqual(4294967296)||t.lessThan(0))throw new TypeError("uint64 is not supported")}return t.toNumber()}function d(t,e,n){switch(e){case s.onnx.TensorProto.DataType.BOOL:case s.onnx.TensorProto.DataType.UINT8:return t.getUint8(n);case s.onnx.TensorProto.DataType.INT8:return t.getInt8(n);case s.onnx.TensorProto.DataType.UINT16:return t.getUint16(n,!0);case s.onnx.TensorProto.DataType.INT16:return t.getInt16(n,!0);case s.onnx.TensorProto.DataType.FLOAT:return t.getFloat32(n,!0);case s.onnx.TensorProto.DataType.INT32:return t.getInt32(n,!0);case s.onnx.TensorProto.DataType.UINT32:return t.getUint32(n,!0);case s.onnx.TensorProto.DataType.INT64:return h(a.default.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!1),e);case s.onnx.TensorProto.DataType.DOUBLE:return t.getFloat64(n,!0);case s.onnx.TensorProto.DataType.UINT64:return h(a.default.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!0),e);default:throw new Error("cannot read from DataView for type "+s.onnx.TensorProto.DataType[e])}}e.Tensor=l}).call(this,n(12).Buffer)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;var r={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},i={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function o(t){return 1===t?r:i}e.getGlsl=o,e.getVertexShaderSource=function(t){var e=o(t);return e.version+"\n      precision highp float;\n      "+e.attribute+" vec3 position;\n      "+e.attribute+" vec2 textureCoord;\n\n      "+e.varyingVertex+" vec2 TexCoords;\n\n      void main()\n      {\n          gl_Position = vec4(position, 1.0);\n          TexCoords = textureCoord;\n      }"},e.getFragShaderPreamble=function(t){var e=o(t);return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFrag+" vec2 TexCoords;\n    "+e.outputDeclaration+"\n\n    "},e.getDefaultFragShaderMain=function(t,e){return"\n  void main() {\n    int indices["+e+"];\n    toVec(TexCoords, indices);\n    vec4 result = vec4(process(indices));\n    "+o(t).output+" = result;\n  }\n  "}},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;var o=function(){function t(){}return t.prototype.log=function(t,e,n){},t}(),a=function(){function t(){}return t.prototype.log=function(t,e,n){console.log(this.color(t)+" "+(n?"\x1b[35m"+n+"\x1b[0m ":"")+e)},t.prototype.color=function(t){switch(t){case"verbose":return"\x1b[34;40mv\x1b[0m";case"info":return"\x1b[32mi\x1b[0m";case"warning":return"\x1b[30;43mw\x1b[0m";case"error":return"\x1b[31;40me\x1b[0m";default:throw new Error("unsupported severity: "+t)}},t}(),s={verbose:1e3,info:2e3,warning:4e3,error:5e3},c=((r={}).none=new o,r.console=new a,r),l={provider:"console",minimalSeverity:"info",logDateTime:!0,logSourceLocation:!1},u=((i={})[""]=l,i);function h(t,e,n,r){if(void 0===e)return i=t,{verbose:h.verbose.bind(null,i),info:h.info.bind(null,i),warning:h.warning.bind(null,i),error:h.error.bind(null,i)};if(void 0===n)d(t,e);else if("number"==typeof n&&void 0===r)d(t,e);else if("string"==typeof n&&void 0===r)d(t,n,0,e);else{if("string"!=typeof n||"number"!=typeof r)throw new TypeError("input is valid");d(t,n,0,e)}var i}function d(t,e,n,r){var i=u[r||""]||u[""];s[t]<s[i.minimalSeverity]||(i.logDateTime&&(e=(new Date).toISOString()+"|"+e),i.logSourceLocation,c[i.provider].log(t,e,r))}!function(t){function e(t){u={},n("",t||{})}function n(t,n){if("*"===t)e(n);else{var r=u[t]||l;u[t]={provider:n.provider||r.provider,minimalSeverity:n.minimalSeverity||r.minimalSeverity,logDateTime:void 0===n.logDateTime?r.logDateTime:n.logDateTime,logSourceLocation:void 0===n.logSourceLocation?r.logSourceLocation:n.logSourceLocation}}}t.verbose=function(e,n){t("verbose",e,n)},t.info=function(e,n){t("info",e,n)},t.warning=function(e,n){t("warning",e,n)},t.error=function(e,n){t("error",e,n)},t.reset=e,t.set=n}(h||(h={})),e.Logger=h;var p=function(){function t(t,e,n,r){this.category=t,this.name=e,this.startTime=n,this.endCallback=r}return t.prototype.end=function(){this.endCallback(this)},t}(),f=function(t,e,n,r){this.category=t,this.name=e,this.startTime=n,this.endTime=r},m=function(){function t(t,e,n){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=void 0===t?1e4:t,this._flushBatchSize=void 0===e?10:e,this._flushIntervalInMilliseconds=void 0===n?5e3:n}return t.create=function(t){return void 0===t?new this:new this(t.maxNumberEvents,t.flushBatchSize,t.flushIntervalInMilliseconds)},t.prototype.start=function(){this._started=!0,this._timingEvents=[],this._flushTime=e.now(),this._flushPointer=0},t.prototype.stop=function(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])},t.prototype.event=function(t,e,n){var r=this._started?this.begin(t,e):void 0,i=!1;try{var o=n();return o&&"function"==typeof o.then?(i=!0,new Promise((function(t,e){o.then((function(e){t(e),r&&r.end()}),(function(t){e(t),r&&r.end()}))}))):o}finally{!i&&r&&r.end()}},t.prototype.begin=function(t,n){var r=this;if(!this._started)throw new Error("profiler is not started yet");var i=e.now();return this.flush(i),new p(t,n,i,(function(t){return r.end(t)}))},t.prototype.end=function(t){if(this._timingEvents.length<this._maxNumberEvents){var n=e.now();this._timingEvents.push(new f(t.category,t.name,t.startTime,n)),this.flush(n)}},t.prototype.logOneEvent=function(t){e.Logger.verbose("Profiler."+t.category,(t.endTime-t.startTime).toFixed(2)+"ms on event '"+t.name+"' at "+t.endTime.toFixed(2))},t.prototype.flush=function(t){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||t-this._flushTime>=this._flushIntervalInMilliseconds){for(var n=this._flushPointer;this._flushPointer<n+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=e.now()}},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!1,configurable:!0}),t}();e.Profiler=m,e.now="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&o(e,t,n);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WasmBinding=e.init=void 0;var c,l,u,h=n(3),d=s(n(103)),p=!1,f=!1;e.init=function(t,e){if(p)return Promise.resolve();if(f)throw new Error("multiple calls to 'init()' detected.");return f=!0,new Promise((function(r,i){var o,a=function(){void 0!==o&&(clearTimeout(o),o=void 0)},s=function(){a(),r(),f=!1,p=!0},m=d.init(),g=new Promise((function(t,n){o=setTimeout((function(){n("Wasm init promise failed to be resolved within set timeout")}),e)}));t>0?(h.Logger.verbose("WebAssembly-Workers","User has requested "+t+" Workers."),"undefined"==typeof window||void 0===window.Worker?(h.Logger.error("WebAssembly-Workers","Environment does not support usage of Workers. Will not spawn workers."),l=0):(h.Logger.verbose("WebAssembly-Workers","Environment supports usage of Workers. Will spawn "+t+" Workers"),l=t)):(h.Logger.verbose("WebAssembly-Workers","User has disabled usage of Workers. Will not spawn workers."),l=0);var y=new Array(l);c=new Array(l),u=new Array(l);for(var v=function(t){var e=new Promise((function(e,r){var i=n(105).default();c[t]=i,u[t]=[],i.onerror=function(e){h.Logger.error("WebAssembly-Workers","worker-"+t+" ERR: "+e),p||r()},i.onmessage=function(n){if(!(n&&n.data&&n.data.type))throw new Error("missing message type from worker");if("init-success"===n.data.type)e();else{if("ccall"!==n.data.type)throw new Error("unknown message type from worker: "+n.data.type);var r=n.data.perfData;u[t].shift()(n.data.buffer,r)}}}));y[t]=e},b=0;b<l;b++)v(b);Promise.race([m,g]).then((function(){Promise.all(y).then(s,(function(t){h.Logger.warning("WebAssembly-Workers","Unable to get all requested workers initialized. Will use Wasm backend with 0 workers. ERR: "+t),l=0,s()}))}),(function(t){a(),i(t),f=!1}))}))};var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},Object.defineProperty(e,"workerNumber",{get:function(){return l},enumerable:!1,configurable:!0}),e.prototype.ccallRemote=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(!p)throw new Error("wasm not initialized. please ensure 'init()' is called.");if(t<0||t>=l)throw new Error("invalid worker ID "+t+". should be in range [0, "+l+")");var o=[],a=e.calculateOffsets(o,r),s=new ArrayBuffer(a);e.ccallSerialize(new Uint8Array(s),o,r);var h=d.now();return c[t].postMessage({type:"ccall",func:n,buffer:s},[s]),new Promise((function(n,i){u[t].push((function(t,i){i.startTimeWorker=i.startTime,i.endTimeWorker=i.endTime,i.startTime=h,i.endTime=d.now(),e.ccallDeserialize(new Uint8Array(t),o,r),n(i)}))}))},e}(d.WasmBinding);e.WasmBinding=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,function(t){t[t.ValueBased=0]="ValueBased",t[t.Positional=1]="Positional"}(e.FunctionType||(e.FunctionType={})),e.GlslContext=function(t,e){this.glContext=t,this.programInfo=e},e.GlslLib=function(t){this.context=t},e.GlslLibRoutine=function(t,e){this.routineBody=t,this.dependencies=e};var r=function(){function t(t,e,n){this.name=t,this.dependencies=n||[],e&&(this.routineBody=e)}return t.prototype.addDependency=function(t){t&&this.dependencies.push(t)},t}();e.GlslLibRoutineNode=r;var i=function(){function t(){}return t.returnOrderedNodes=function(t){if(!t||0===t.length)return[];if(1===t.length)return t;var e=new Set,n=new Set,r=new Array;return this.createOrderedNodes(t,e,n,r),r},t.createOrderedNodes=function(t,e,n,r){for(var i=0;i<t.length;++i)this.dfsTraverse(t[i],e,n,r)},t.dfsTraverse=function(t,e,n,r){if(t&&!n.has(t.name)){if(e.has(t.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");e.add(t.name);var i=t.dependencies;if(i&&i.length>0)for(var o=0;o<i.length;++o)this.dfsTraverse(i[o],e,n,r);r.push(t),n.add(t.name),e.delete(t.name)}},t}();e.TopologicalSortGlslRoutines=i},function(t,e,n){"use strict";(function(t){var r=e;function i(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;++i)void 0!==t[r[i]]&&n||(t[r[i]]=e[r[i]]);return t}function o(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}r.asPromise=n(64),r.base64=n(65),r.EventEmitter=n(66),r.float=n(67),r.inquire=n(68),r.utf8=n(69),r.pool=n(70),r.LongBits=n(71),r.global="undefined"!=typeof window&&window||void 0!==t&&t||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isNode=Boolean(r.global.process&&r.global.process.versions&&r.global.process.versions.node),r.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"==typeof t||t instanceof String},r.isObject=function(t){return t&&"object"==typeof t},r.isset=r.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(t){return"number"==typeof t?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){var n=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(n.lo,n.hi,e):n.toNumber(Boolean(e))},r.merge=i,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(1===e[t[n]]&&void 0!==this[t[n]]&&null!==this[t[n]])return t[n]}},r.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var t=r.Buffer;t?(r._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,n){return new t(e,n)},r._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}).call(this,n(8))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(62),i=r.Reader,o=r.Writer,a=r.util,s=r.roots.default||(r.roots.default={});s.onnx=function(){var t,e,n={};return n.Version=(t={},(e=Object.create(t))[t[0]="_START_VERSION"]=0,e[t[1]="IR_VERSION_2017_10_10"]=1,e[t[2]="IR_VERSION_2017_10_30"]=2,e[t[3]="IR_VERSION_2017_11_3"]=3,e[t[4]="IR_VERSION_2019_1_22"]=4,e[t[5]="IR_VERSION"]=5,e),n.AttributeProto=function(){function t(t){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.refAttrName="",t.prototype.docString="",t.prototype.type=0,t.prototype.f=0,t.prototype.i=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.s=a.newBuffer([]),t.prototype.t=null,t.prototype.g=null,t.prototype.floats=a.emptyArray,t.prototype.ints=a.emptyArray,t.prototype.strings=a.emptyArray,t.prototype.tensors=a.emptyArray,t.prototype.graphs=a.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=o.create()),null!=t.name&&t.hasOwnProperty("name")&&e.uint32(10).string(t.name),null!=t.f&&t.hasOwnProperty("f")&&e.uint32(21).float(t.f),null!=t.i&&t.hasOwnProperty("i")&&e.uint32(24).int64(t.i),null!=t.s&&t.hasOwnProperty("s")&&e.uint32(34).bytes(t.s),null!=t.t&&t.hasOwnProperty("t")&&s.onnx.TensorProto.encode(t.t,e.uint32(42).fork()).ldelim(),null!=t.g&&t.hasOwnProperty("g")&&s.onnx.GraphProto.encode(t.g,e.uint32(50).fork()).ldelim(),null!=t.floats&&t.floats.length){e.uint32(58).fork();for(var n=0;n<t.floats.length;++n)e.float(t.floats[n]);e.ldelim()}if(null!=t.ints&&t.ints.length){for(e.uint32(66).fork(),n=0;n<t.ints.length;++n)e.int64(t.ints[n]);e.ldelim()}if(null!=t.strings&&t.strings.length)for(n=0;n<t.strings.length;++n)e.uint32(74).bytes(t.strings[n]);if(null!=t.tensors&&t.tensors.length)for(n=0;n<t.tensors.length;++n)s.onnx.TensorProto.encode(t.tensors[n],e.uint32(82).fork()).ldelim();if(null!=t.graphs&&t.graphs.length)for(n=0;n<t.graphs.length;++n)s.onnx.GraphProto.encode(t.graphs[n],e.uint32(90).fork()).ldelim();return null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(106).string(t.docString),null!=t.type&&t.hasOwnProperty("type")&&e.uint32(160).int32(t.type),null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&e.uint32(170).string(t.refAttrName),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new s.onnx.AttributeProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.name=t.string();break;case 21:r.refAttrName=t.string();break;case 13:r.docString=t.string();break;case 20:r.type=t.int32();break;case 2:r.f=t.float();break;case 3:r.i=t.int64();break;case 4:r.s=t.bytes();break;case 5:r.t=s.onnx.TensorProto.decode(t,t.uint32());break;case 6:r.g=s.onnx.GraphProto.decode(t,t.uint32());break;case 7:if(r.floats&&r.floats.length||(r.floats=[]),2==(7&o))for(var a=t.uint32()+t.pos;t.pos<a;)r.floats.push(t.float());else r.floats.push(t.float());break;case 8:if(r.ints&&r.ints.length||(r.ints=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.ints.push(t.int64());else r.ints.push(t.int64());break;case 9:r.strings&&r.strings.length||(r.strings=[]),r.strings.push(t.bytes());break;case 10:r.tensors&&r.tensors.length||(r.tensors=[]),r.tensors.push(s.onnx.TensorProto.decode(t,t.uint32()));break;case 11:r.graphs&&r.graphs.length||(r.graphs=[]),r.graphs.push(s.onnx.GraphProto.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!a.isString(t.name))return"name: string expected";if(null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&!a.isString(t.refAttrName))return"refAttrName: string expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!a.isString(t.docString))return"docString: string expected";if(null!=t.type&&t.hasOwnProperty("type"))switch(t.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(null!=t.f&&t.hasOwnProperty("f")&&"number"!=typeof t.f)return"f: number expected";if(null!=t.i&&t.hasOwnProperty("i")&&!(a.isInteger(t.i)||t.i&&a.isInteger(t.i.low)&&a.isInteger(t.i.high)))return"i: integer|Long expected";if(null!=t.s&&t.hasOwnProperty("s")&&!(t.s&&"number"==typeof t.s.length||a.isString(t.s)))return"s: buffer expected";if(null!=t.t&&t.hasOwnProperty("t")&&(n=s.onnx.TensorProto.verify(t.t)))return"t."+n;if(null!=t.g&&t.hasOwnProperty("g")&&(n=s.onnx.GraphProto.verify(t.g)))return"g."+n;if(null!=t.floats&&t.hasOwnProperty("floats")){if(!Array.isArray(t.floats))return"floats: array expected";for(var e=0;e<t.floats.length;++e)if("number"!=typeof t.floats[e])return"floats: number[] expected"}if(null!=t.ints&&t.hasOwnProperty("ints")){if(!Array.isArray(t.ints))return"ints: array expected";for(e=0;e<t.ints.length;++e)if(!(a.isInteger(t.ints[e])||t.ints[e]&&a.isInteger(t.ints[e].low)&&a.isInteger(t.ints[e].high)))return"ints: integer|Long[] expected"}if(null!=t.strings&&t.hasOwnProperty("strings")){if(!Array.isArray(t.strings))return"strings: array expected";for(e=0;e<t.strings.length;++e)if(!(t.strings[e]&&"number"==typeof t.strings[e].length||a.isString(t.strings[e])))return"strings: buffer[] expected"}if(null!=t.tensors&&t.hasOwnProperty("tensors")){if(!Array.isArray(t.tensors))return"tensors: array expected";for(e=0;e<t.tensors.length;++e)if(n=s.onnx.TensorProto.verify(t.tensors[e]))return"tensors."+n}if(null!=t.graphs&&t.hasOwnProperty("graphs")){if(!Array.isArray(t.graphs))return"graphs: array expected";for(e=0;e<t.graphs.length;++e){var n;if(n=s.onnx.GraphProto.verify(t.graphs[e]))return"graphs."+n}}return null},t.fromObject=function(t){if(t instanceof s.onnx.AttributeProto)return t;var e=new s.onnx.AttributeProto;switch(null!=t.name&&(e.name=String(t.name)),null!=t.refAttrName&&(e.refAttrName=String(t.refAttrName)),null!=t.docString&&(e.docString=String(t.docString)),t.type){case"UNDEFINED":case 0:e.type=0;break;case"FLOAT":case 1:e.type=1;break;case"INT":case 2:e.type=2;break;case"STRING":case 3:e.type=3;break;case"TENSOR":case 4:e.type=4;break;case"GRAPH":case 5:e.type=5;break;case"FLOATS":case 6:e.type=6;break;case"INTS":case 7:e.type=7;break;case"STRINGS":case 8:e.type=8;break;case"TENSORS":case 9:e.type=9;break;case"GRAPHS":case 10:e.type=10}if(null!=t.f&&(e.f=Number(t.f)),null!=t.i&&(a.Long?(e.i=a.Long.fromValue(t.i)).unsigned=!1:"string"==typeof t.i?e.i=parseInt(t.i,10):"number"==typeof t.i?e.i=t.i:"object"==typeof t.i&&(e.i=new a.LongBits(t.i.low>>>0,t.i.high>>>0).toNumber())),null!=t.s&&("string"==typeof t.s?a.base64.decode(t.s,e.s=a.newBuffer(a.base64.length(t.s)),0):t.s.length&&(e.s=t.s)),null!=t.t){if("object"!=typeof t.t)throw TypeError(".onnx.AttributeProto.t: object expected");e.t=s.onnx.TensorProto.fromObject(t.t)}if(null!=t.g){if("object"!=typeof t.g)throw TypeError(".onnx.AttributeProto.g: object expected");e.g=s.onnx.GraphProto.fromObject(t.g)}if(t.floats){if(!Array.isArray(t.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");e.floats=[];for(var n=0;n<t.floats.length;++n)e.floats[n]=Number(t.floats[n])}if(t.ints){if(!Array.isArray(t.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(e.ints=[],n=0;n<t.ints.length;++n)a.Long?(e.ints[n]=a.Long.fromValue(t.ints[n])).unsigned=!1:"string"==typeof t.ints[n]?e.ints[n]=parseInt(t.ints[n],10):"number"==typeof t.ints[n]?e.ints[n]=t.ints[n]:"object"==typeof t.ints[n]&&(e.ints[n]=new a.LongBits(t.ints[n].low>>>0,t.ints[n].high>>>0).toNumber())}if(t.strings){if(!Array.isArray(t.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(e.strings=[],n=0;n<t.strings.length;++n)"string"==typeof t.strings[n]?a.base64.decode(t.strings[n],e.strings[n]=a.newBuffer(a.base64.length(t.strings[n])),0):t.strings[n].length&&(e.strings[n]=t.strings[n])}if(t.tensors){if(!Array.isArray(t.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(e.tensors=[],n=0;n<t.tensors.length;++n){if("object"!=typeof t.tensors[n])throw TypeError(".onnx.AttributeProto.tensors: object expected");e.tensors[n]=s.onnx.TensorProto.fromObject(t.tensors[n])}}if(t.graphs){if(!Array.isArray(t.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(e.graphs=[],n=0;n<t.graphs.length;++n){if("object"!=typeof t.graphs[n])throw TypeError(".onnx.AttributeProto.graphs: object expected");e.graphs[n]=s.onnx.GraphProto.fromObject(t.graphs[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.floats=[],n.ints=[],n.strings=[],n.tensors=[],n.graphs=[]),e.defaults){if(n.name="",n.f=0,a.Long){var r=new a.Long(0,0,!1);n.i=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.i=e.longs===String?"0":0;e.bytes===String?n.s="":(n.s=[],e.bytes!==Array&&(n.s=a.newBuffer(n.s))),n.t=null,n.g=null,n.docString="",n.type=e.enums===String?"UNDEFINED":0,n.refAttrName=""}if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.f&&t.hasOwnProperty("f")&&(n.f=e.json&&!isFinite(t.f)?String(t.f):t.f),null!=t.i&&t.hasOwnProperty("i")&&("number"==typeof t.i?n.i=e.longs===String?String(t.i):t.i:n.i=e.longs===String?a.Long.prototype.toString.call(t.i):e.longs===Number?new a.LongBits(t.i.low>>>0,t.i.high>>>0).toNumber():t.i),null!=t.s&&t.hasOwnProperty("s")&&(n.s=e.bytes===String?a.base64.encode(t.s,0,t.s.length):e.bytes===Array?Array.prototype.slice.call(t.s):t.s),null!=t.t&&t.hasOwnProperty("t")&&(n.t=s.onnx.TensorProto.toObject(t.t,e)),null!=t.g&&t.hasOwnProperty("g")&&(n.g=s.onnx.GraphProto.toObject(t.g,e)),t.floats&&t.floats.length){n.floats=[];for(var i=0;i<t.floats.length;++i)n.floats[i]=e.json&&!isFinite(t.floats[i])?String(t.floats[i]):t.floats[i]}if(t.ints&&t.ints.length)for(n.ints=[],i=0;i<t.ints.length;++i)"number"==typeof t.ints[i]?n.ints[i]=e.longs===String?String(t.ints[i]):t.ints[i]:n.ints[i]=e.longs===String?a.Long.prototype.toString.call(t.ints[i]):e.longs===Number?new a.LongBits(t.ints[i].low>>>0,t.ints[i].high>>>0).toNumber():t.ints[i];if(t.strings&&t.strings.length)for(n.strings=[],i=0;i<t.strings.length;++i)n.strings[i]=e.bytes===String?a.base64.encode(t.strings[i],0,t.strings[i].length):e.bytes===Array?Array.prototype.slice.call(t.strings[i]):t.strings[i];if(t.tensors&&t.tensors.length)for(n.tensors=[],i=0;i<t.tensors.length;++i)n.tensors[i]=s.onnx.TensorProto.toObject(t.tensors[i],e);if(t.graphs&&t.graphs.length)for(n.graphs=[],i=0;i<t.graphs.length;++i)n.graphs[i]=s.onnx.GraphProto.toObject(t.graphs[i],e);return null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.type&&t.hasOwnProperty("type")&&(n.type=e.enums===String?s.onnx.AttributeProto.AttributeType[t.type]:t.type),null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&(n.refAttrName=t.refAttrName),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.AttributeType=function(){var t={},e=Object.create(t);return e[t[0]="UNDEFINED"]=0,e[t[1]="FLOAT"]=1,e[t[2]="INT"]=2,e[t[3]="STRING"]=3,e[t[4]="TENSOR"]=4,e[t[5]="GRAPH"]=5,e[t[6]="FLOATS"]=6,e[t[7]="INTS"]=7,e[t[8]="STRINGS"]=8,e[t[9]="TENSORS"]=9,e[t[10]="GRAPHS"]=10,e}(),t}(),n.ValueInfoProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.type=null,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=o.create()),null!=t.name&&t.hasOwnProperty("name")&&e.uint32(10).string(t.name),null!=t.type&&t.hasOwnProperty("type")&&s.onnx.TypeProto.encode(t.type,e.uint32(18).fork()).ldelim(),null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(26).string(t.docString),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new s.onnx.ValueInfoProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.name=t.string();break;case 2:r.type=s.onnx.TypeProto.decode(t,t.uint32());break;case 3:r.docString=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!a.isString(t.name))return"name: string expected";if(null!=t.type&&t.hasOwnProperty("type")){var e=s.onnx.TypeProto.verify(t.type);if(e)return"type."+e}return null!=t.docString&&t.hasOwnProperty("docString")&&!a.isString(t.docString)?"docString: string expected":null},t.fromObject=function(t){if(t instanceof s.onnx.ValueInfoProto)return t;var e=new s.onnx.ValueInfoProto;if(null!=t.name&&(e.name=String(t.name)),null!=t.type){if("object"!=typeof t.type)throw TypeError(".onnx.ValueInfoProto.type: object expected");e.type=s.onnx.TypeProto.fromObject(t.type)}return null!=t.docString&&(e.docString=String(t.docString)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.name="",n.type=null,n.docString=""),null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.type&&t.hasOwnProperty("type")&&(n.type=s.onnx.TypeProto.toObject(t.type,e)),null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),n.NodeProto=function(){function t(t){if(this.input=[],this.output=[],this.attribute=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.input=a.emptyArray,t.prototype.output=a.emptyArray,t.prototype.name="",t.prototype.opType="",t.prototype.domain="",t.prototype.attribute=a.emptyArray,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=o.create()),null!=t.input&&t.input.length)for(var n=0;n<t.input.length;++n)e.uint32(10).string(t.input[n]);if(null!=t.output&&t.output.length)for(n=0;n<t.output.length;++n)e.uint32(18).string(t.output[n]);if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(26).string(t.name),null!=t.opType&&t.hasOwnProperty("opType")&&e.uint32(34).string(t.opType),null!=t.attribute&&t.attribute.length)for(n=0;n<t.attribute.length;++n)s.onnx.AttributeProto.encode(t.attribute[n],e.uint32(42).fork()).ldelim();return null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(50).string(t.docString),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(58).string(t.domain),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new s.onnx.NodeProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.input&&r.input.length||(r.input=[]),r.input.push(t.string());break;case 2:r.output&&r.output.length||(r.output=[]),r.output.push(t.string());break;case 3:r.name=t.string();break;case 4:r.opType=t.string();break;case 7:r.domain=t.string();break;case 5:r.attribute&&r.attribute.length||(r.attribute=[]),r.attribute.push(s.onnx.AttributeProto.decode(t,t.uint32()));break;case 6:r.docString=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(var e=0;e<t.input.length;++e)if(!a.isString(t.input[e]))return"input: string[] expected"}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(e=0;e<t.output.length;++e)if(!a.isString(t.output[e]))return"output: string[] expected"}if(null!=t.name&&t.hasOwnProperty("name")&&!a.isString(t.name))return"name: string expected";if(null!=t.opType&&t.hasOwnProperty("opType")&&!a.isString(t.opType))return"opType: string expected";if(null!=t.domain&&t.hasOwnProperty("domain")&&!a.isString(t.domain))return"domain: string expected";if(null!=t.attribute&&t.hasOwnProperty("attribute")){if(!Array.isArray(t.attribute))return"attribute: array expected";for(e=0;e<t.attribute.length;++e){var n=s.onnx.AttributeProto.verify(t.attribute[e]);if(n)return"attribute."+n}}return null!=t.docString&&t.hasOwnProperty("docString")&&!a.isString(t.docString)?"docString: string expected":null},t.fromObject=function(t){if(t instanceof s.onnx.NodeProto)return t;var e=new s.onnx.NodeProto;if(t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.NodeProto.input: array expected");e.input=[];for(var n=0;n<t.input.length;++n)e.input[n]=String(t.input[n])}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.NodeProto.output: array expected");for(e.output=[],n=0;n<t.output.length;++n)e.output[n]=String(t.output[n])}if(null!=t.name&&(e.name=String(t.name)),null!=t.opType&&(e.opType=String(t.opType)),null!=t.domain&&(e.domain=String(t.domain)),t.attribute){if(!Array.isArray(t.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(e.attribute=[],n=0;n<t.attribute.length;++n){if("object"!=typeof t.attribute[n])throw TypeError(".onnx.NodeProto.attribute: object expected");e.attribute[n]=s.onnx.AttributeProto.fromObject(t.attribute[n])}}return null!=t.docString&&(e.docString=String(t.docString)),e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.input=[],n.output=[],n.attribute=[]),e.defaults&&(n.name="",n.opType="",n.docString="",n.domain=""),t.input&&t.input.length){n.input=[];for(var r=0;r<t.input.length;++r)n.input[r]=t.input[r]}if(t.output&&t.output.length)for(n.output=[],r=0;r<t.output.length;++r)n.output[r]=t.output[r];if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.opType&&t.hasOwnProperty("opType")&&(n.opType=t.opType),t.attribute&&t.attribute.length)for(n.attribute=[],r=0;r<t.attribute.length;++r)n.attribute[r]=s.onnx.AttributeProto.toObject(t.attribute[r],e);return null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),n.ModelProto=function(){function t(t){if(this.opsetImport=[],this.metadataProps=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.irVersion=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.opsetImport=a.emptyArray,t.prototype.producerName="",t.prototype.producerVersion="",t.prototype.domain="",t.prototype.modelVersion=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.docString="",t.prototype.graph=null,t.prototype.metadataProps=a.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=o.create()),null!=t.irVersion&&t.hasOwnProperty("irVersion")&&e.uint32(8).int64(t.irVersion),null!=t.producerName&&t.hasOwnProperty("producerName")&&e.uint32(18).string(t.producerName),null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&e.uint32(26).string(t.producerVersion),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(34).string(t.domain),null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&e.uint32(40).int64(t.modelVersion),null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(50).string(t.docString),null!=t.graph&&t.hasOwnProperty("graph")&&s.onnx.GraphProto.encode(t.graph,e.uint32(58).fork()).ldelim(),null!=t.opsetImport&&t.opsetImport.length)for(var n=0;n<t.opsetImport.length;++n)s.onnx.OperatorSetIdProto.encode(t.opsetImport[n],e.uint32(66).fork()).ldelim();if(null!=t.metadataProps&&t.metadataProps.length)for(n=0;n<t.metadataProps.length;++n)s.onnx.StringStringEntryProto.encode(t.metadataProps[n],e.uint32(114).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new s.onnx.ModelProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.irVersion=t.int64();break;case 8:r.opsetImport&&r.opsetImport.length||(r.opsetImport=[]),r.opsetImport.push(s.onnx.OperatorSetIdProto.decode(t,t.uint32()));break;case 2:r.producerName=t.string();break;case 3:r.producerVersion=t.string();break;case 4:r.domain=t.string();break;case 5:r.modelVersion=t.int64();break;case 6:r.docString=t.string();break;case 7:r.graph=s.onnx.GraphProto.decode(t,t.uint32());break;case 14:r.metadataProps&&r.metadataProps.length||(r.metadataProps=[]),r.metadataProps.push(s.onnx.StringStringEntryProto.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.irVersion&&t.hasOwnProperty("irVersion")&&!(a.isInteger(t.irVersion)||t.irVersion&&a.isInteger(t.irVersion.low)&&a.isInteger(t.irVersion.high)))return"irVersion: integer|Long expected";if(null!=t.opsetImport&&t.hasOwnProperty("opsetImport")){if(!Array.isArray(t.opsetImport))return"opsetImport: array expected";for(var e=0;e<t.opsetImport.length;++e)if(n=s.onnx.OperatorSetIdProto.verify(t.opsetImport[e]))return"opsetImport."+n}if(null!=t.producerName&&t.hasOwnProperty("producerName")&&!a.isString(t.producerName))return"producerName: string expected";if(null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&!a.isString(t.producerVersion))return"producerVersion: string expected";if(null!=t.domain&&t.hasOwnProperty("domain")&&!a.isString(t.domain))return"domain: string expected";if(null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&!(a.isInteger(t.modelVersion)||t.modelVersion&&a.isInteger(t.modelVersion.low)&&a.isInteger(t.modelVersion.high)))return"modelVersion: integer|Long expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!a.isString(t.docString))return"docString: string expected";if(null!=t.graph&&t.hasOwnProperty("graph")&&(n=s.onnx.GraphProto.verify(t.graph)))return"graph."+n;if(null!=t.metadataProps&&t.hasOwnProperty("metadataProps")){if(!Array.isArray(t.metadataProps))return"metadataProps: array expected";for(e=0;e<t.metadataProps.length;++e){var n;if(n=s.onnx.StringStringEntryProto.verify(t.metadataProps[e]))return"metadataProps."+n}}return null},t.fromObject=function(t){if(t instanceof s.onnx.ModelProto)return t;var e=new s.onnx.ModelProto;if(null!=t.irVersion&&(a.Long?(e.irVersion=a.Long.fromValue(t.irVersion)).unsigned=!1:"string"==typeof t.irVersion?e.irVersion=parseInt(t.irVersion,10):"number"==typeof t.irVersion?e.irVersion=t.irVersion:"object"==typeof t.irVersion&&(e.irVersion=new a.LongBits(t.irVersion.low>>>0,t.irVersion.high>>>0).toNumber())),t.opsetImport){if(!Array.isArray(t.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");e.opsetImport=[];for(var n=0;n<t.opsetImport.length;++n){if("object"!=typeof t.opsetImport[n])throw TypeError(".onnx.ModelProto.opsetImport: object expected");e.opsetImport[n]=s.onnx.OperatorSetIdProto.fromObject(t.opsetImport[n])}}if(null!=t.producerName&&(e.producerName=String(t.producerName)),null!=t.producerVersion&&(e.producerVersion=String(t.producerVersion)),null!=t.domain&&(e.domain=String(t.domain)),null!=t.modelVersion&&(a.Long?(e.modelVersion=a.Long.fromValue(t.modelVersion)).unsigned=!1:"string"==typeof t.modelVersion?e.modelVersion=parseInt(t.modelVersion,10):"number"==typeof t.modelVersion?e.modelVersion=t.modelVersion:"object"==typeof t.modelVersion&&(e.modelVersion=new a.LongBits(t.modelVersion.low>>>0,t.modelVersion.high>>>0).toNumber())),null!=t.docString&&(e.docString=String(t.docString)),null!=t.graph){if("object"!=typeof t.graph)throw TypeError(".onnx.ModelProto.graph: object expected");e.graph=s.onnx.GraphProto.fromObject(t.graph)}if(t.metadataProps){if(!Array.isArray(t.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(e.metadataProps=[],n=0;n<t.metadataProps.length;++n){if("object"!=typeof t.metadataProps[n])throw TypeError(".onnx.ModelProto.metadataProps: object expected");e.metadataProps[n]=s.onnx.StringStringEntryProto.fromObject(t.metadataProps[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.opsetImport=[],n.metadataProps=[]),e.defaults){if(a.Long){var r=new a.Long(0,0,!1);n.irVersion=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.irVersion=e.longs===String?"0":0;n.producerName="",n.producerVersion="",n.domain="",a.Long?(r=new a.Long(0,0,!1),n.modelVersion=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):n.modelVersion=e.longs===String?"0":0,n.docString="",n.graph=null}if(null!=t.irVersion&&t.hasOwnProperty("irVersion")&&("number"==typeof t.irVersion?n.irVersion=e.longs===String?String(t.irVersion):t.irVersion:n.irVersion=e.longs===String?a.Long.prototype.toString.call(t.irVersion):e.longs===Number?new a.LongBits(t.irVersion.low>>>0,t.irVersion.high>>>0).toNumber():t.irVersion),null!=t.producerName&&t.hasOwnProperty("producerName")&&(n.producerName=t.producerName),null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&(n.producerVersion=t.producerVersion),null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&("number"==typeof t.modelVersion?n.modelVersion=e.longs===String?String(t.modelVersion):t.modelVersion:n.modelVersion=e.longs===String?a.Long.prototype.toString.call(t.modelVersion):e.longs===Number?new a.LongBits(t.modelVersion.low>>>0,t.modelVersion.high>>>0).toNumber():t.modelVersion),null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.graph&&t.hasOwnProperty("graph")&&(n.graph=s.onnx.GraphProto.toObject(t.graph,e)),t.opsetImport&&t.opsetImport.length){n.opsetImport=[];for(var i=0;i<t.opsetImport.length;++i)n.opsetImport[i]=s.onnx.OperatorSetIdProto.toObject(t.opsetImport[i],e)}if(t.metadataProps&&t.metadataProps.length)for(n.metadataProps=[],i=0;i<t.metadataProps.length;++i)n.metadataProps[i]=s.onnx.StringStringEntryProto.toObject(t.metadataProps[i],e);return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),n.StringStringEntryProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.key="",t.prototype.value="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=o.create()),null!=t.key&&t.hasOwnProperty("key")&&e.uint32(10).string(t.key),null!=t.value&&t.hasOwnProperty("value")&&e.uint32(18).string(t.value),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new s.onnx.StringStringEntryProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.key=t.string();break;case 2:r.value=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.key&&t.hasOwnProperty("key")&&!a.isString(t.key)?"key: string expected":null!=t.value&&t.hasOwnProperty("value")&&!a.isString(t.value)?"value: string expected":null},t.fromObject=function(t){if(t instanceof s.onnx.StringStringEntryProto)return t;var e=new s.onnx.StringStringEntryProto;return null!=t.key&&(e.key=String(t.key)),null!=t.value&&(e.value=String(t.value)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.key="",n.value=""),null!=t.key&&t.hasOwnProperty("key")&&(n.key=t.key),null!=t.value&&t.hasOwnProperty("value")&&(n.value=t.value),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),n.TensorAnnotation=function(){function t(t){if(this.quantParameterTensorNames=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.tensorName="",t.prototype.quantParameterTensorNames=a.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=o.create()),null!=t.tensorName&&t.hasOwnProperty("tensorName")&&e.uint32(10).string(t.tensorName),null!=t.quantParameterTensorNames&&t.quantParameterTensorNames.length)for(var n=0;n<t.quantParameterTensorNames.length;++n)s.onnx.StringStringEntryProto.encode(t.quantParameterTensorNames[n],e.uint32(18).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new s.onnx.TensorAnnotation;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.tensorName=t.string();break;case 2:r.quantParameterTensorNames&&r.quantParameterTensorNames.length||(r.quantParameterTensorNames=[]),r.quantParameterTensorNames.push(s.onnx.StringStringEntryProto.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.tensorName&&t.hasOwnProperty("tensorName")&&!a.isString(t.tensorName))return"tensorName: string expected";if(null!=t.quantParameterTensorNames&&t.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(t.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var e=0;e<t.quantParameterTensorNames.length;++e){var n=s.onnx.StringStringEntryProto.verify(t.quantParameterTensorNames[e]);if(n)return"quantParameterTensorNames."+n}}return null},t.fromObject=function(t){if(t instanceof s.onnx.TensorAnnotation)return t;var e=new s.onnx.TensorAnnotation;if(null!=t.tensorName&&(e.tensorName=String(t.tensorName)),t.quantParameterTensorNames){if(!Array.isArray(t.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");e.quantParameterTensorNames=[];for(var n=0;n<t.quantParameterTensorNames.length;++n){if("object"!=typeof t.quantParameterTensorNames[n])throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");e.quantParameterTensorNames[n]=s.onnx.StringStringEntryProto.fromObject(t.quantParameterTensorNames[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.quantParameterTensorNames=[]),e.defaults&&(n.tensorName=""),null!=t.tensorName&&t.hasOwnProperty("tensorName")&&(n.tensorName=t.tensorName),t.quantParameterTensorNames&&t.quantParameterTensorNames.length){n.quantParameterTensorNames=[];for(var r=0;r<t.quantParameterTensorNames.length;++r)n.quantParameterTensorNames[r]=s.onnx.StringStringEntryProto.toObject(t.quantParameterTensorNames[r],e)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),n.GraphProto=function(){function t(t){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.node=a.emptyArray,t.prototype.name="",t.prototype.initializer=a.emptyArray,t.prototype.docString="",t.prototype.input=a.emptyArray,t.prototype.output=a.emptyArray,t.prototype.valueInfo=a.emptyArray,t.prototype.quantizationAnnotation=a.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=o.create()),null!=t.node&&t.node.length)for(var n=0;n<t.node.length;++n)s.onnx.NodeProto.encode(t.node[n],e.uint32(10).fork()).ldelim();if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(18).string(t.name),null!=t.initializer&&t.initializer.length)for(n=0;n<t.initializer.length;++n)s.onnx.TensorProto.encode(t.initializer[n],e.uint32(42).fork()).ldelim();if(null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(82).string(t.docString),null!=t.input&&t.input.length)for(n=0;n<t.input.length;++n)s.onnx.ValueInfoProto.encode(t.input[n],e.uint32(90).fork()).ldelim();if(null!=t.output&&t.output.length)for(n=0;n<t.output.length;++n)s.onnx.ValueInfoProto.encode(t.output[n],e.uint32(98).fork()).ldelim();if(null!=t.valueInfo&&t.valueInfo.length)for(n=0;n<t.valueInfo.length;++n)s.onnx.ValueInfoProto.encode(t.valueInfo[n],e.uint32(106).fork()).ldelim();if(null!=t.quantizationAnnotation&&t.quantizationAnnotation.length)for(n=0;n<t.quantizationAnnotation.length;++n)s.onnx.TensorAnnotation.encode(t.quantizationAnnotation[n],e.uint32(114).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new s.onnx.GraphProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.node&&r.node.length||(r.node=[]),r.node.push(s.onnx.NodeProto.decode(t,t.uint32()));break;case 2:r.name=t.string();break;case 5:r.initializer&&r.initializer.length||(r.initializer=[]),r.initializer.push(s.onnx.TensorProto.decode(t,t.uint32()));break;case 10:r.docString=t.string();break;case 11:r.input&&r.input.length||(r.input=[]),r.input.push(s.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 12:r.output&&r.output.length||(r.output=[]),r.output.push(s.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 13:r.valueInfo&&r.valueInfo.length||(r.valueInfo=[]),r.valueInfo.push(s.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 14:r.quantizationAnnotation&&r.quantizationAnnotation.length||(r.quantizationAnnotation=[]),r.quantizationAnnotation.push(s.onnx.TensorAnnotation.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.node&&t.hasOwnProperty("node")){if(!Array.isArray(t.node))return"node: array expected";for(var e=0;e<t.node.length;++e)if(n=s.onnx.NodeProto.verify(t.node[e]))return"node."+n}if(null!=t.name&&t.hasOwnProperty("name")&&!a.isString(t.name))return"name: string expected";if(null!=t.initializer&&t.hasOwnProperty("initializer")){if(!Array.isArray(t.initializer))return"initializer: array expected";for(e=0;e<t.initializer.length;++e)if(n=s.onnx.TensorProto.verify(t.initializer[e]))return"initializer."+n}if(null!=t.docString&&t.hasOwnProperty("docString")&&!a.isString(t.docString))return"docString: string expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(e=0;e<t.input.length;++e)if(n=s.onnx.ValueInfoProto.verify(t.input[e]))return"input."+n}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(e=0;e<t.output.length;++e)if(n=s.onnx.ValueInfoProto.verify(t.output[e]))return"output."+n}if(null!=t.valueInfo&&t.hasOwnProperty("valueInfo")){if(!Array.isArray(t.valueInfo))return"valueInfo: array expected";for(e=0;e<t.valueInfo.length;++e)if(n=s.onnx.ValueInfoProto.verify(t.valueInfo[e]))return"valueInfo."+n}if(null!=t.quantizationAnnotation&&t.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(t.quantizationAnnotation))return"quantizationAnnotation: array expected";for(e=0;e<t.quantizationAnnotation.length;++e){var n;if(n=s.onnx.TensorAnnotation.verify(t.quantizationAnnotation[e]))return"quantizationAnnotation."+n}}return null},t.fromObject=function(t){if(t instanceof s.onnx.GraphProto)return t;var e=new s.onnx.GraphProto;if(t.node){if(!Array.isArray(t.node))throw TypeError(".onnx.GraphProto.node: array expected");e.node=[];for(var n=0;n<t.node.length;++n){if("object"!=typeof t.node[n])throw TypeError(".onnx.GraphProto.node: object expected");e.node[n]=s.onnx.NodeProto.fromObject(t.node[n])}}if(null!=t.name&&(e.name=String(t.name)),t.initializer){if(!Array.isArray(t.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(e.initializer=[],n=0;n<t.initializer.length;++n){if("object"!=typeof t.initializer[n])throw TypeError(".onnx.GraphProto.initializer: object expected");e.initializer[n]=s.onnx.TensorProto.fromObject(t.initializer[n])}}if(null!=t.docString&&(e.docString=String(t.docString)),t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.GraphProto.input: array expected");for(e.input=[],n=0;n<t.input.length;++n){if("object"!=typeof t.input[n])throw TypeError(".onnx.GraphProto.input: object expected");e.input[n]=s.onnx.ValueInfoProto.fromObject(t.input[n])}}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.GraphProto.output: array expected");for(e.output=[],n=0;n<t.output.length;++n){if("object"!=typeof t.output[n])throw TypeError(".onnx.GraphProto.output: object expected");e.output[n]=s.onnx.ValueInfoProto.fromObject(t.output[n])}}if(t.valueInfo){if(!Array.isArray(t.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(e.valueInfo=[],n=0;n<t.valueInfo.length;++n){if("object"!=typeof t.valueInfo[n])throw TypeError(".onnx.GraphProto.valueInfo: object expected");e.valueInfo[n]=s.onnx.ValueInfoProto.fromObject(t.valueInfo[n])}}if(t.quantizationAnnotation){if(!Array.isArray(t.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(e.quantizationAnnotation=[],n=0;n<t.quantizationAnnotation.length;++n){if("object"!=typeof t.quantizationAnnotation[n])throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");e.quantizationAnnotation[n]=s.onnx.TensorAnnotation.fromObject(t.quantizationAnnotation[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.node=[],n.initializer=[],n.input=[],n.output=[],n.valueInfo=[],n.quantizationAnnotation=[]),e.defaults&&(n.name="",n.docString=""),t.node&&t.node.length){n.node=[];for(var r=0;r<t.node.length;++r)n.node[r]=s.onnx.NodeProto.toObject(t.node[r],e)}if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),t.initializer&&t.initializer.length)for(n.initializer=[],r=0;r<t.initializer.length;++r)n.initializer[r]=s.onnx.TensorProto.toObject(t.initializer[r],e);if(null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),t.input&&t.input.length)for(n.input=[],r=0;r<t.input.length;++r)n.input[r]=s.onnx.ValueInfoProto.toObject(t.input[r],e);if(t.output&&t.output.length)for(n.output=[],r=0;r<t.output.length;++r)n.output[r]=s.onnx.ValueInfoProto.toObject(t.output[r],e);if(t.valueInfo&&t.valueInfo.length)for(n.valueInfo=[],r=0;r<t.valueInfo.length;++r)n.valueInfo[r]=s.onnx.ValueInfoProto.toObject(t.valueInfo[r],e);if(t.quantizationAnnotation&&t.quantizationAnnotation.length)for(n.quantizationAnnotation=[],r=0;r<t.quantizationAnnotation.length;++r)n.quantizationAnnotation[r]=s.onnx.TensorAnnotation.toObject(t.quantizationAnnotation[r],e);return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),n.TensorProto=function(){function t(t){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dims=a.emptyArray,t.prototype.dataType=0,t.prototype.segment=null,t.prototype.floatData=a.emptyArray,t.prototype.int32Data=a.emptyArray,t.prototype.stringData=a.emptyArray,t.prototype.int64Data=a.emptyArray,t.prototype.name="",t.prototype.docString="",t.prototype.rawData=a.newBuffer([]),t.prototype.externalData=a.emptyArray,t.prototype.dataLocation=0,t.prototype.doubleData=a.emptyArray,t.prototype.uint64Data=a.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=o.create()),null!=t.dims&&t.dims.length){e.uint32(10).fork();for(var n=0;n<t.dims.length;++n)e.int64(t.dims[n]);e.ldelim()}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&e.uint32(16).int32(t.dataType),null!=t.segment&&t.hasOwnProperty("segment")&&s.onnx.TensorProto.Segment.encode(t.segment,e.uint32(26).fork()).ldelim(),null!=t.floatData&&t.floatData.length){for(e.uint32(34).fork(),n=0;n<t.floatData.length;++n)e.float(t.floatData[n]);e.ldelim()}if(null!=t.int32Data&&t.int32Data.length){for(e.uint32(42).fork(),n=0;n<t.int32Data.length;++n)e.int32(t.int32Data[n]);e.ldelim()}if(null!=t.stringData&&t.stringData.length)for(n=0;n<t.stringData.length;++n)e.uint32(50).bytes(t.stringData[n]);if(null!=t.int64Data&&t.int64Data.length){for(e.uint32(58).fork(),n=0;n<t.int64Data.length;++n)e.int64(t.int64Data[n]);e.ldelim()}if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(66).string(t.name),null!=t.rawData&&t.hasOwnProperty("rawData")&&e.uint32(74).bytes(t.rawData),null!=t.doubleData&&t.doubleData.length){for(e.uint32(82).fork(),n=0;n<t.doubleData.length;++n)e.double(t.doubleData[n]);e.ldelim()}if(null!=t.uint64Data&&t.uint64Data.length){for(e.uint32(90).fork(),n=0;n<t.uint64Data.length;++n)e.uint64(t.uint64Data[n]);e.ldelim()}if(null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(98).string(t.docString),null!=t.externalData&&t.externalData.length)for(n=0;n<t.externalData.length;++n)s.onnx.StringStringEntryProto.encode(t.externalData[n],e.uint32(106).fork()).ldelim();return null!=t.dataLocation&&t.hasOwnProperty("dataLocation")&&e.uint32(112).int32(t.dataLocation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new s.onnx.TensorProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:if(r.dims&&r.dims.length||(r.dims=[]),2==(7&o))for(var a=t.uint32()+t.pos;t.pos<a;)r.dims.push(t.int64());else r.dims.push(t.int64());break;case 2:r.dataType=t.int32();break;case 3:r.segment=s.onnx.TensorProto.Segment.decode(t,t.uint32());break;case 4:if(r.floatData&&r.floatData.length||(r.floatData=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.floatData.push(t.float());else r.floatData.push(t.float());break;case 5:if(r.int32Data&&r.int32Data.length||(r.int32Data=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.int32Data.push(t.int32());else r.int32Data.push(t.int32());break;case 6:r.stringData&&r.stringData.length||(r.stringData=[]),r.stringData.push(t.bytes());break;case 7:if(r.int64Data&&r.int64Data.length||(r.int64Data=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.int64Data.push(t.int64());else r.int64Data.push(t.int64());break;case 8:r.name=t.string();break;case 12:r.docString=t.string();break;case 9:r.rawData=t.bytes();break;case 13:r.externalData&&r.externalData.length||(r.externalData=[]),r.externalData.push(s.onnx.StringStringEntryProto.decode(t,t.uint32()));break;case 14:r.dataLocation=t.int32();break;case 10:if(r.doubleData&&r.doubleData.length||(r.doubleData=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.doubleData.push(t.double());else r.doubleData.push(t.double());break;case 11:if(r.uint64Data&&r.uint64Data.length||(r.uint64Data=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.uint64Data.push(t.uint64());else r.uint64Data.push(t.uint64());break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.dims&&t.hasOwnProperty("dims")){if(!Array.isArray(t.dims))return"dims: array expected";for(var e=0;e<t.dims.length;++e)if(!(a.isInteger(t.dims[e])||t.dims[e]&&a.isInteger(t.dims[e].low)&&a.isInteger(t.dims[e].high)))return"dims: integer|Long[] expected"}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&!a.isInteger(t.dataType))return"dataType: integer expected";if(null!=t.segment&&t.hasOwnProperty("segment")&&(n=s.onnx.TensorProto.Segment.verify(t.segment)))return"segment."+n;if(null!=t.floatData&&t.hasOwnProperty("floatData")){if(!Array.isArray(t.floatData))return"floatData: array expected";for(e=0;e<t.floatData.length;++e)if("number"!=typeof t.floatData[e])return"floatData: number[] expected"}if(null!=t.int32Data&&t.hasOwnProperty("int32Data")){if(!Array.isArray(t.int32Data))return"int32Data: array expected";for(e=0;e<t.int32Data.length;++e)if(!a.isInteger(t.int32Data[e]))return"int32Data: integer[] expected"}if(null!=t.stringData&&t.hasOwnProperty("stringData")){if(!Array.isArray(t.stringData))return"stringData: array expected";for(e=0;e<t.stringData.length;++e)if(!(t.stringData[e]&&"number"==typeof t.stringData[e].length||a.isString(t.stringData[e])))return"stringData: buffer[] expected"}if(null!=t.int64Data&&t.hasOwnProperty("int64Data")){if(!Array.isArray(t.int64Data))return"int64Data: array expected";for(e=0;e<t.int64Data.length;++e)if(!(a.isInteger(t.int64Data[e])||t.int64Data[e]&&a.isInteger(t.int64Data[e].low)&&a.isInteger(t.int64Data[e].high)))return"int64Data: integer|Long[] expected"}if(null!=t.name&&t.hasOwnProperty("name")&&!a.isString(t.name))return"name: string expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!a.isString(t.docString))return"docString: string expected";if(null!=t.rawData&&t.hasOwnProperty("rawData")&&!(t.rawData&&"number"==typeof t.rawData.length||a.isString(t.rawData)))return"rawData: buffer expected";if(null!=t.externalData&&t.hasOwnProperty("externalData")){if(!Array.isArray(t.externalData))return"externalData: array expected";for(e=0;e<t.externalData.length;++e){var n;if(n=s.onnx.StringStringEntryProto.verify(t.externalData[e]))return"externalData."+n}}if(null!=t.dataLocation&&t.hasOwnProperty("dataLocation"))switch(t.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(null!=t.doubleData&&t.hasOwnProperty("doubleData")){if(!Array.isArray(t.doubleData))return"doubleData: array expected";for(e=0;e<t.doubleData.length;++e)if("number"!=typeof t.doubleData[e])return"doubleData: number[] expected"}if(null!=t.uint64Data&&t.hasOwnProperty("uint64Data")){if(!Array.isArray(t.uint64Data))return"uint64Data: array expected";for(e=0;e<t.uint64Data.length;++e)if(!(a.isInteger(t.uint64Data[e])||t.uint64Data[e]&&a.isInteger(t.uint64Data[e].low)&&a.isInteger(t.uint64Data[e].high)))return"uint64Data: integer|Long[] expected"}return null},t.fromObject=function(t){if(t instanceof s.onnx.TensorProto)return t;var e=new s.onnx.TensorProto;if(t.dims){if(!Array.isArray(t.dims))throw TypeError(".onnx.TensorProto.dims: array expected");e.dims=[];for(var n=0;n<t.dims.length;++n)a.Long?(e.dims[n]=a.Long.fromValue(t.dims[n])).unsigned=!1:"string"==typeof t.dims[n]?e.dims[n]=parseInt(t.dims[n],10):"number"==typeof t.dims[n]?e.dims[n]=t.dims[n]:"object"==typeof t.dims[n]&&(e.dims[n]=new a.LongBits(t.dims[n].low>>>0,t.dims[n].high>>>0).toNumber())}if(null!=t.dataType&&(e.dataType=0|t.dataType),null!=t.segment){if("object"!=typeof t.segment)throw TypeError(".onnx.TensorProto.segment: object expected");e.segment=s.onnx.TensorProto.Segment.fromObject(t.segment)}if(t.floatData){if(!Array.isArray(t.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(e.floatData=[],n=0;n<t.floatData.length;++n)e.floatData[n]=Number(t.floatData[n])}if(t.int32Data){if(!Array.isArray(t.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(e.int32Data=[],n=0;n<t.int32Data.length;++n)e.int32Data[n]=0|t.int32Data[n]}if(t.stringData){if(!Array.isArray(t.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(e.stringData=[],n=0;n<t.stringData.length;++n)"string"==typeof t.stringData[n]?a.base64.decode(t.stringData[n],e.stringData[n]=a.newBuffer(a.base64.length(t.stringData[n])),0):t.stringData[n].length&&(e.stringData[n]=t.stringData[n])}if(t.int64Data){if(!Array.isArray(t.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(e.int64Data=[],n=0;n<t.int64Data.length;++n)a.Long?(e.int64Data[n]=a.Long.fromValue(t.int64Data[n])).unsigned=!1:"string"==typeof t.int64Data[n]?e.int64Data[n]=parseInt(t.int64Data[n],10):"number"==typeof t.int64Data[n]?e.int64Data[n]=t.int64Data[n]:"object"==typeof t.int64Data[n]&&(e.int64Data[n]=new a.LongBits(t.int64Data[n].low>>>0,t.int64Data[n].high>>>0).toNumber())}if(null!=t.name&&(e.name=String(t.name)),null!=t.docString&&(e.docString=String(t.docString)),null!=t.rawData&&("string"==typeof t.rawData?a.base64.decode(t.rawData,e.rawData=a.newBuffer(a.base64.length(t.rawData)),0):t.rawData.length&&(e.rawData=t.rawData)),t.externalData){if(!Array.isArray(t.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(e.externalData=[],n=0;n<t.externalData.length;++n){if("object"!=typeof t.externalData[n])throw TypeError(".onnx.TensorProto.externalData: object expected");e.externalData[n]=s.onnx.StringStringEntryProto.fromObject(t.externalData[n])}}switch(t.dataLocation){case"DEFAULT":case 0:e.dataLocation=0;break;case"EXTERNAL":case 1:e.dataLocation=1}if(t.doubleData){if(!Array.isArray(t.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(e.doubleData=[],n=0;n<t.doubleData.length;++n)e.doubleData[n]=Number(t.doubleData[n])}if(t.uint64Data){if(!Array.isArray(t.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(e.uint64Data=[],n=0;n<t.uint64Data.length;++n)a.Long?(e.uint64Data[n]=a.Long.fromValue(t.uint64Data[n])).unsigned=!0:"string"==typeof t.uint64Data[n]?e.uint64Data[n]=parseInt(t.uint64Data[n],10):"number"==typeof t.uint64Data[n]?e.uint64Data[n]=t.uint64Data[n]:"object"==typeof t.uint64Data[n]&&(e.uint64Data[n]=new a.LongBits(t.uint64Data[n].low>>>0,t.uint64Data[n].high>>>0).toNumber(!0))}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.dims=[],n.floatData=[],n.int32Data=[],n.stringData=[],n.int64Data=[],n.doubleData=[],n.uint64Data=[],n.externalData=[]),e.defaults&&(n.dataType=0,n.segment=null,n.name="",e.bytes===String?n.rawData="":(n.rawData=[],e.bytes!==Array&&(n.rawData=a.newBuffer(n.rawData))),n.docString="",n.dataLocation=e.enums===String?"DEFAULT":0),t.dims&&t.dims.length){n.dims=[];for(var r=0;r<t.dims.length;++r)"number"==typeof t.dims[r]?n.dims[r]=e.longs===String?String(t.dims[r]):t.dims[r]:n.dims[r]=e.longs===String?a.Long.prototype.toString.call(t.dims[r]):e.longs===Number?new a.LongBits(t.dims[r].low>>>0,t.dims[r].high>>>0).toNumber():t.dims[r]}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&(n.dataType=t.dataType),null!=t.segment&&t.hasOwnProperty("segment")&&(n.segment=s.onnx.TensorProto.Segment.toObject(t.segment,e)),t.floatData&&t.floatData.length)for(n.floatData=[],r=0;r<t.floatData.length;++r)n.floatData[r]=e.json&&!isFinite(t.floatData[r])?String(t.floatData[r]):t.floatData[r];if(t.int32Data&&t.int32Data.length)for(n.int32Data=[],r=0;r<t.int32Data.length;++r)n.int32Data[r]=t.int32Data[r];if(t.stringData&&t.stringData.length)for(n.stringData=[],r=0;r<t.stringData.length;++r)n.stringData[r]=e.bytes===String?a.base64.encode(t.stringData[r],0,t.stringData[r].length):e.bytes===Array?Array.prototype.slice.call(t.stringData[r]):t.stringData[r];if(t.int64Data&&t.int64Data.length)for(n.int64Data=[],r=0;r<t.int64Data.length;++r)"number"==typeof t.int64Data[r]?n.int64Data[r]=e.longs===String?String(t.int64Data[r]):t.int64Data[r]:n.int64Data[r]=e.longs===String?a.Long.prototype.toString.call(t.int64Data[r]):e.longs===Number?new a.LongBits(t.int64Data[r].low>>>0,t.int64Data[r].high>>>0).toNumber():t.int64Data[r];if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.rawData&&t.hasOwnProperty("rawData")&&(n.rawData=e.bytes===String?a.base64.encode(t.rawData,0,t.rawData.length):e.bytes===Array?Array.prototype.slice.call(t.rawData):t.rawData),t.doubleData&&t.doubleData.length)for(n.doubleData=[],r=0;r<t.doubleData.length;++r)n.doubleData[r]=e.json&&!isFinite(t.doubleData[r])?String(t.doubleData[r]):t.doubleData[r];if(t.uint64Data&&t.uint64Data.length)for(n.uint64Data=[],r=0;r<t.uint64Data.length;++r)"number"==typeof t.uint64Data[r]?n.uint64Data[r]=e.longs===String?String(t.uint64Data[r]):t.uint64Data[r]:n.uint64Data[r]=e.longs===String?a.Long.prototype.toString.call(t.uint64Data[r]):e.longs===Number?new a.LongBits(t.uint64Data[r].low>>>0,t.uint64Data[r].high>>>0).toNumber(!0):t.uint64Data[r];if(null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),t.externalData&&t.externalData.length)for(n.externalData=[],r=0;r<t.externalData.length;++r)n.externalData[r]=s.onnx.StringStringEntryProto.toObject(t.externalData[r],e);return null!=t.dataLocation&&t.hasOwnProperty("dataLocation")&&(n.dataLocation=e.enums===String?s.onnx.TensorProto.DataLocation[t.dataLocation]:t.dataLocation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.DataType=function(){var t={},e=Object.create(t);return e[t[0]="UNDEFINED"]=0,e[t[1]="FLOAT"]=1,e[t[2]="UINT8"]=2,e[t[3]="INT8"]=3,e[t[4]="UINT16"]=4,e[t[5]="INT16"]=5,e[t[6]="INT32"]=6,e[t[7]="INT64"]=7,e[t[8]="STRING"]=8,e[t[9]="BOOL"]=9,e[t[10]="FLOAT16"]=10,e[t[11]="DOUBLE"]=11,e[t[12]="UINT32"]=12,e[t[13]="UINT64"]=13,e[t[14]="COMPLEX64"]=14,e[t[15]="COMPLEX128"]=15,e[t[16]="BFLOAT16"]=16,e}(),t.Segment=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.begin=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.end=a.Long?a.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=o.create()),null!=t.begin&&t.hasOwnProperty("begin")&&e.uint32(8).int64(t.begin),null!=t.end&&t.hasOwnProperty("end")&&e.uint32(16).int64(t.end),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new s.onnx.TensorProto.Segment;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.begin=t.int64();break;case 2:r.end=t.int64();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.begin&&t.hasOwnProperty("begin")&&!(a.isInteger(t.begin)||t.begin&&a.isInteger(t.begin.low)&&a.isInteger(t.begin.high))?"begin: integer|Long expected":null!=t.end&&t.hasOwnProperty("end")&&!(a.isInteger(t.end)||t.end&&a.isInteger(t.end.low)&&a.isInteger(t.end.high))?"end: integer|Long expected":null},t.fromObject=function(t){if(t instanceof s.onnx.TensorProto.Segment)return t;var e=new s.onnx.TensorProto.Segment;return null!=t.begin&&(a.Long?(e.begin=a.Long.fromValue(t.begin)).unsigned=!1:"string"==typeof t.begin?e.begin=parseInt(t.begin,10):"number"==typeof t.begin?e.begin=t.begin:"object"==typeof t.begin&&(e.begin=new a.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber())),null!=t.end&&(a.Long?(e.end=a.Long.fromValue(t.end)).unsigned=!1:"string"==typeof t.end?e.end=parseInt(t.end,10):"number"==typeof t.end?e.end=t.end:"object"==typeof t.end&&(e.end=new a.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(a.Long){var r=new a.Long(0,0,!1);n.begin=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.begin=e.longs===String?"0":0;a.Long?(r=new a.Long(0,0,!1),n.end=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):n.end=e.longs===String?"0":0}return null!=t.begin&&t.hasOwnProperty("begin")&&("number"==typeof t.begin?n.begin=e.longs===String?String(t.begin):t.begin:n.begin=e.longs===String?a.Long.prototype.toString.call(t.begin):e.longs===Number?new a.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber():t.begin),null!=t.end&&t.hasOwnProperty("end")&&("number"==typeof t.end?n.end=e.longs===String?String(t.end):t.end:n.end=e.longs===String?a.Long.prototype.toString.call(t.end):e.longs===Number?new a.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber():t.end),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t.DataLocation=function(){var t={},e=Object.create(t);return e[t[0]="DEFAULT"]=0,e[t[1]="EXTERNAL"]=1,e}(),t}(),n.TensorShapeProto=function(){function t(t){if(this.dim=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dim=a.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=o.create()),null!=t.dim&&t.dim.length)for(var n=0;n<t.dim.length;++n)s.onnx.TensorShapeProto.Dimension.encode(t.dim[n],e.uint32(10).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new s.onnx.TensorShapeProto;t.pos<n;){var o=t.uint32();o>>>3===1?(r.dim&&r.dim.length||(r.dim=[]),r.dim.push(s.onnx.TensorShapeProto.Dimension.decode(t,t.uint32()))):t.skipType(7&o)}return r},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.dim&&t.hasOwnProperty("dim")){if(!Array.isArray(t.dim))return"dim: array expected";for(var e=0;e<t.dim.length;++e){var n=s.onnx.TensorShapeProto.Dimension.verify(t.dim[e]);if(n)return"dim."+n}}return null},t.fromObject=function(t){if(t instanceof s.onnx.TensorShapeProto)return t;var e=new s.onnx.TensorShapeProto;if(t.dim){if(!Array.isArray(t.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");e.dim=[];for(var n=0;n<t.dim.length;++n){if("object"!=typeof t.dim[n])throw TypeError(".onnx.TensorShapeProto.dim: object expected");e.dim[n]=s.onnx.TensorShapeProto.Dimension.fromObject(t.dim[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.dim=[]),t.dim&&t.dim.length){n.dim=[];for(var r=0;r<t.dim.length;++r)n.dim[r]=s.onnx.TensorShapeProto.Dimension.toObject(t.dim[r],e)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.Dimension=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.dimValue=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.dimParam="",t.prototype.denotation="",Object.defineProperty(t.prototype,"value",{get:a.oneOfGetter(e=["dimValue","dimParam"]),set:a.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=o.create()),null!=t.dimValue&&t.hasOwnProperty("dimValue")&&e.uint32(8).int64(t.dimValue),null!=t.dimParam&&t.hasOwnProperty("dimParam")&&e.uint32(18).string(t.dimParam),null!=t.denotation&&t.hasOwnProperty("denotation")&&e.uint32(26).string(t.denotation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new s.onnx.TensorShapeProto.Dimension;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.dimValue=t.int64();break;case 2:r.dimParam=t.string();break;case 3:r.denotation=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";var e={};if(null!=t.dimValue&&t.hasOwnProperty("dimValue")&&(e.value=1,!(a.isInteger(t.dimValue)||t.dimValue&&a.isInteger(t.dimValue.low)&&a.isInteger(t.dimValue.high))))return"dimValue: integer|Long expected";if(null!=t.dimParam&&t.hasOwnProperty("dimParam")){if(1===e.value)return"value: multiple values";if(e.value=1,!a.isString(t.dimParam))return"dimParam: string expected"}return null!=t.denotation&&t.hasOwnProperty("denotation")&&!a.isString(t.denotation)?"denotation: string expected":null},t.fromObject=function(t){if(t instanceof s.onnx.TensorShapeProto.Dimension)return t;var e=new s.onnx.TensorShapeProto.Dimension;return null!=t.dimValue&&(a.Long?(e.dimValue=a.Long.fromValue(t.dimValue)).unsigned=!1:"string"==typeof t.dimValue?e.dimValue=parseInt(t.dimValue,10):"number"==typeof t.dimValue?e.dimValue=t.dimValue:"object"==typeof t.dimValue&&(e.dimValue=new a.LongBits(t.dimValue.low>>>0,t.dimValue.high>>>0).toNumber())),null!=t.dimParam&&(e.dimParam=String(t.dimParam)),null!=t.denotation&&(e.denotation=String(t.denotation)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.denotation=""),null!=t.dimValue&&t.hasOwnProperty("dimValue")&&("number"==typeof t.dimValue?n.dimValue=e.longs===String?String(t.dimValue):t.dimValue:n.dimValue=e.longs===String?a.Long.prototype.toString.call(t.dimValue):e.longs===Number?new a.LongBits(t.dimValue.low>>>0,t.dimValue.high>>>0).toNumber():t.dimValue,e.oneofs&&(n.value="dimValue")),null!=t.dimParam&&t.hasOwnProperty("dimParam")&&(n.dimParam=t.dimParam,e.oneofs&&(n.value="dimParam")),null!=t.denotation&&t.hasOwnProperty("denotation")&&(n.denotation=t.denotation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t}(),n.TypeProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.tensorType=null,t.prototype.denotation="",Object.defineProperty(t.prototype,"value",{get:a.oneOfGetter(e=["tensorType"]),set:a.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=o.create()),null!=t.tensorType&&t.hasOwnProperty("tensorType")&&s.onnx.TypeProto.Tensor.encode(t.tensorType,e.uint32(10).fork()).ldelim(),null!=t.denotation&&t.hasOwnProperty("denotation")&&e.uint32(50).string(t.denotation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new s.onnx.TypeProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.tensorType=s.onnx.TypeProto.Tensor.decode(t,t.uint32());break;case 6:r.denotation=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.tensorType&&t.hasOwnProperty("tensorType")){var e=s.onnx.TypeProto.Tensor.verify(t.tensorType);if(e)return"tensorType."+e}return null!=t.denotation&&t.hasOwnProperty("denotation")&&!a.isString(t.denotation)?"denotation: string expected":null},t.fromObject=function(t){if(t instanceof s.onnx.TypeProto)return t;var e=new s.onnx.TypeProto;if(null!=t.tensorType){if("object"!=typeof t.tensorType)throw TypeError(".onnx.TypeProto.tensorType: object expected");e.tensorType=s.onnx.TypeProto.Tensor.fromObject(t.tensorType)}return null!=t.denotation&&(e.denotation=String(t.denotation)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.denotation=""),null!=t.tensorType&&t.hasOwnProperty("tensorType")&&(n.tensorType=s.onnx.TypeProto.Tensor.toObject(t.tensorType,e),e.oneofs&&(n.value="tensorType")),null!=t.denotation&&t.hasOwnProperty("denotation")&&(n.denotation=t.denotation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.Tensor=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.elemType=0,t.prototype.shape=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=o.create()),null!=t.elemType&&t.hasOwnProperty("elemType")&&e.uint32(8).int32(t.elemType),null!=t.shape&&t.hasOwnProperty("shape")&&s.onnx.TensorShapeProto.encode(t.shape,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new s.onnx.TypeProto.Tensor;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.elemType=t.int32();break;case 2:r.shape=s.onnx.TensorShapeProto.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.elemType&&t.hasOwnProperty("elemType")&&!a.isInteger(t.elemType))return"elemType: integer expected";if(null!=t.shape&&t.hasOwnProperty("shape")){var e=s.onnx.TensorShapeProto.verify(t.shape);if(e)return"shape."+e}return null},t.fromObject=function(t){if(t instanceof s.onnx.TypeProto.Tensor)return t;var e=new s.onnx.TypeProto.Tensor;if(null!=t.elemType&&(e.elemType=0|t.elemType),null!=t.shape){if("object"!=typeof t.shape)throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");e.shape=s.onnx.TensorShapeProto.fromObject(t.shape)}return e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.elemType=0,n.shape=null),null!=t.elemType&&t.hasOwnProperty("elemType")&&(n.elemType=t.elemType),null!=t.shape&&t.hasOwnProperty("shape")&&(n.shape=s.onnx.TensorShapeProto.toObject(t.shape,e)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t}(),n.OperatorSetIdProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.domain="",t.prototype.version=a.Long?a.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=o.create()),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(10).string(t.domain),null!=t.version&&t.hasOwnProperty("version")&&e.uint32(16).int64(t.version),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new s.onnx.OperatorSetIdProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.domain=t.string();break;case 2:r.version=t.int64();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.domain&&t.hasOwnProperty("domain")&&!a.isString(t.domain)?"domain: string expected":null!=t.version&&t.hasOwnProperty("version")&&!(a.isInteger(t.version)||t.version&&a.isInteger(t.version.low)&&a.isInteger(t.version.high))?"version: integer|Long expected":null},t.fromObject=function(t){if(t instanceof s.onnx.OperatorSetIdProto)return t;var e=new s.onnx.OperatorSetIdProto;return null!=t.domain&&(e.domain=String(t.domain)),null!=t.version&&(a.Long?(e.version=a.Long.fromValue(t.version)).unsigned=!1:"string"==typeof t.version?e.version=parseInt(t.version,10):"number"==typeof t.version?e.version=t.version:"object"==typeof t.version&&(e.version=new a.LongBits(t.version.low>>>0,t.version.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults)if(n.domain="",a.Long){var r=new a.Long(0,0,!1);n.version=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.version=e.longs===String?"0":0;return null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),null!=t.version&&t.hasOwnProperty("version")&&("number"==typeof t.version?n.version=e.longs===String?String(t.version):t.version:n.version=e.longs===String?a.Long.prototype.toString.call(t.version):e.longs===Number?new a.LongBits(t.version.low>>>0,t.version.high>>>0).toNumber():t.version),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),n}(),t.exports=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=e.WebGLReshape=void 0;var o=n(37),a=n(0),s=n(50),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){var n=a.ShapeUtil.calculateReshapedDims(e[0].dims,e[1].integerData);return[l(t,e[0],n)]},e}(o.Reshape);function l(t,e,n){var r=t.getOrCreateTextureData(e),i=n;4===r.channels&&(i=s.getPackedShape(n));var o={channels:r.channels,height:r.height,width:r.width,shape:0!==i.length?i:[1],strides:a.ShapeUtil.computeStrides(i),unpackedShape:n};return t.createSharedTextureData(o,e.type,r.texture,e.dataId).tensor}e.WebGLReshape=c,e.reshape=l},function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function i(t,e){if(e.endsWith("+")){var n=Number.parseInt(e.substring(0,e.length-1),10);return!isNaN(n)&&n<=t}if(2===e.split("-").length){var r=e.split("-"),i=(n=Number.parseInt(r[0],10),Number.parseInt(r[1],10));return!isNaN(n)&&!isNaN(i)&&n<=t&&t<=i}return Number.parseInt(e,10)===t}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(t,e,n){var o,a,s,c;try{for(var l=r(n),u=l.next();!u.done;u=l.next()){var h=u.value,d=h[0],p=h[1],f=h[2],m=h[3];if(t.opType===d)try{for(var g=(s=void 0,r(e)),y=g.next();!y.done;y=g.next()){var v=y.value;if((v.domain===p||"ai.onnx"===v.domain&&""===p)&&i(v.version,f))return m(t)}}catch(t){s={error:t}}finally{try{y&&!y.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}}}catch(t){o={error:t}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}throw new TypeError("cannot resolve operator '"+t.opType+"' with opsets: "+e.map((function(t){return(t.domain||"ai.onnx")+" v"+t.version})).join(", "))}},function(t,e,n){"use strict";(function(t){var r=n(59),i=n(60),o=n(61);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=d(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(e,n),i=(t=s(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|p(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):d(t,e);if("Buffer"===e.type&&o(e.data))return d(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(u(e),t=s(t,e<0?0:0|p(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|p(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function f(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return B(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return M(this,e,n);case"latin1":case"binary":return O(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var o,a=1,s=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var u=-1;for(o=n;o<s;o++)if(l(t,o)===l(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var h=!0,d=0;d<c;d++)if(l(t,o+d)!==l(e,d)){h=!1;break}if(h)return o}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function x(t,e,n,r){return V(B(e,t.length-n),t,n,r)}function _(t,e,n,r){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return _(t,e,n,r)}function S(t,e,n,r){return V(z(e),t,n,r)}function T(t,e,n,r){return V(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function E(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,c,l=t[i],u=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=n)switch(h){case 1:l<128&&(u=l);break;case 2:128==(192&(o=t[i+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(c=(15&l)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,h=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}function M(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function C(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=U(t[o]);return i}function k(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,n,r,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function N(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,o){return o||D(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,o){return o||D(t,0,n,8),i.write(t,e,n,r,52,8),n+8}e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return l(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,r){return u(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},c.allocUnsafe=function(t){return h(null,t)},c.allocUnsafeSlow=function(t){return h(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):m.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(r,i),u=t.slice(e,n),h=0;h<s;++h)if(l[h]!==u[h]){o=l[h],a=u[h];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},c.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var i=e-t;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},c.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||I(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||I(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);I(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a|0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);I(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a|0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=c.isBuffer(t)?t:B(new c(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(8))},function(t,e){t.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function r(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function i(t){return!0===(t&&t.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=i;var o={},a={};function s(t,e){var n,r,i;return e?(i=0<=(t>>>=0)&&t<256)&&(r=a[t])?r:(n=l(t,(0|t)<0?-1:0,!0),i&&(a[t]=n),n):(i=-128<=(t|=0)&&t<128)&&(r=o[t])?r:(n=l(t,t<0?-1:0,!1),i&&(o[t]=n),n)}function c(t,e){if(isNaN(t))return e?v:y;if(e){if(t<0)return v;if(t>=f)return S}else{if(t<=-m)return T;if(t+1>=m)return w}return t<0?c(-t,e).neg():l(t%p|0,t/p|0,e)}function l(t,e,n){return new r(t,e,n)}r.fromInt=s,r.fromNumber=c,r.fromBits=l;var u=Math.pow;function h(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return y;if("number"==typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return h(t.substring(1),e,n).neg();for(var i=c(u(n,8)),o=y,a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a),l=parseInt(t.substring(a,a+s),n);if(s<8){var d=c(u(n,s));o=o.mul(d).add(c(l))}else o=(o=o.mul(i)).add(c(l))}return o.unsigned=e,o}function d(t,e){return"number"==typeof t?c(t,e):"string"==typeof t?h(t,e):l(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}r.fromString=h,r.fromValue=d;var p=4294967296,f=p*p,m=f/2,g=s(1<<24),y=s(0);r.ZERO=y;var v=s(0,!0);r.UZERO=v;var b=s(1);r.ONE=b;var x=s(1,!0);r.UONE=x;var _=s(-1);r.NEG_ONE=_;var w=l(-1,2147483647,!1);r.MAX_VALUE=w;var S=l(-1,-1,!0);r.MAX_UNSIGNED_VALUE=S;var T=l(0,-2147483648,!1);r.MIN_VALUE=T;var E=r.prototype;E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},E.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(T)){var e=c(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=c(u(t,6),this.unsigned),o=this,a="";;){var s=o.div(i),l=(o.sub(s.mul(i)).toInt()>>>0).toString(t);if((o=s).isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},E.isZero=function(){return 0===this.high&&0===this.low},E.eqz=E.isZero,E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return 1==(1&this.low)},E.isEven=function(){return 0==(1&this.low)},E.equals=function(t){return i(t)||(t=d(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},E.eq=E.equals,E.notEquals=function(t){return!this.eq(t)},E.neq=E.notEquals,E.ne=E.notEquals,E.lessThan=function(t){return this.comp(t)<0},E.lt=E.lessThan,E.lessThanOrEqual=function(t){return this.comp(t)<=0},E.lte=E.lessThanOrEqual,E.le=E.lessThanOrEqual,E.greaterThan=function(t){return this.comp(t)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(t){return this.comp(t)>=0},E.gte=E.greaterThanOrEqual,E.ge=E.greaterThanOrEqual,E.compare=function(t){if(i(t)||(t=d(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(b)},E.neg=E.negate,E.add=function(t){i(t)||(t=d(t));var e=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,a=t.high>>>16,s=65535&t.high,c=t.low>>>16,u=0,h=0,p=0,f=0;return p+=(f+=o+(65535&t.low))>>>16,h+=(p+=r+c)>>>16,u+=(h+=n+s)>>>16,u+=e+a,l((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},E.subtract=function(t){return i(t)||(t=d(t)),this.add(t.neg())},E.sub=E.subtract,E.multiply=function(t){if(this.isZero())return y;if(i(t)||(t=d(t)),n)return l(n.mul(this.low,this.high,t.low,t.high),n.get_high(),this.unsigned);if(t.isZero())return y;if(this.eq(T))return t.isOdd()?T:y;if(t.eq(T))return this.isOdd()?T:y;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(g)&&t.lt(g))return c(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,r=65535&this.high,o=this.low>>>16,a=65535&this.low,s=t.high>>>16,u=65535&t.high,h=t.low>>>16,p=65535&t.low,f=0,m=0,v=0,b=0;return v+=(b+=a*p)>>>16,m+=(v+=o*p)>>>16,v&=65535,m+=(v+=a*h)>>>16,f+=(m+=r*p)>>>16,m&=65535,f+=(m+=o*h)>>>16,m&=65535,f+=(m+=a*u)>>>16,f+=e*p+r*h+o*u+a*s,l((v&=65535)<<16|(b&=65535),(f&=65535)<<16|(m&=65535),this.unsigned)},E.mul=E.multiply,E.divide=function(t){if(i(t)||(t=d(t)),t.isZero())throw Error("division by zero");var e,r,o;if(n)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?l((this.unsigned?n.div_u:n.div_s)(this.low,this.high,t.low,t.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:y;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return v;if(t.gt(this.shru(1)))return x;o=v}else{if(this.eq(T))return t.eq(b)||t.eq(_)?T:t.eq(T)?b:(e=this.shr(1).div(t).shl(1)).eq(y)?t.isNegative()?b:_:(r=this.sub(t.mul(e)),o=e.add(r.div(t)));if(t.eq(T))return this.unsigned?v:y;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=y}for(r=this;r.gte(t);){e=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(e)/Math.LN2),s=a<=48?1:u(2,a-48),h=c(e),p=h.mul(t);p.isNegative()||p.gt(r);)p=(h=c(e-=s,this.unsigned)).mul(t);h.isZero()&&(h=b),o=o.add(h),r=r.sub(p)}return o},E.div=E.divide,E.modulo=function(t){return i(t)||(t=d(t)),n?l((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,t.low,t.high),n.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},E.mod=E.modulo,E.rem=E.modulo,E.not=function(){return l(~this.low,~this.high,this.unsigned)},E.and=function(t){return i(t)||(t=d(t)),l(this.low&t.low,this.high&t.high,this.unsigned)},E.or=function(t){return i(t)||(t=d(t)),l(this.low|t.low,this.high|t.high,this.unsigned)},E.xor=function(t){return i(t)||(t=d(t)),l(this.low^t.low,this.high^t.high,this.unsigned)},E.shiftLeft=function(t){return i(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?l(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):l(0,this.low<<t-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(t){return i(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?l(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):l(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(t){if(i(t)&&(t=t.toInt()),0===(t&=63))return this;var e=this.high;return t<32?l(this.low>>>t|e<<32-t,e>>>t,this.unsigned):l(32===t?e:e>>>t-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.shr_u=E.shiftRightUnsigned,E.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},E.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},E.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},r.fromBytes=function(t,e,n){return n?r.fromBytesLE(t,e):r.fromBytesBE(t,e)},r.fromBytesLE=function(t,e){return new r(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},r.fromBytesBE=function(t,e){return new r(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchNormalization=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){this.epsilon=t.getFloat("epsilon",1e-5),this.momentum=t.getFloat("momentum",.9),this.spatial=t.getInt("spatial",1)},t.prototype.checkInputs=function(t){return!(!t||5!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4];return!(e.dims.length<3||1!==n.dims.length||1!==r.dims.length||1!==i.dims.length||1!==o.dims.length)&&n.dims[0]===e.dims[1]&&r.dims[0]===e.dims[1]&&i.dims[0]===e.dims[1]&&o.dims[0]===e.dims[1]&&!("float32"!==e.type&&"float64"!==e.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==r.type&&"float64"!==r.type||"float32"!==i.type&&"float64"!==i.type||"float32"!==o.type&&"float64"!==o.type)},t}();e.BatchNormalization=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BinaryOp=void 0;var r=function(){function t(t,e,n){this.typeConstraint=t,this.opType=e,this.resultType=n}return t.prototype.initialize=function(t){},t.prototype.checkInputs=function(t){return!(!t||2!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return-1!==this.typeConstraint.indexOf(t[0].type)&&t[0].type===t[1].type},t}();e.BinaryOp=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Conv=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){this.autoPad=t.getString("auto_pad","NOTSET"),this.dilations=t.getInts("dilations",[1,1]),this.group=t.getInt("group",1),this.kernelShape=t.getInts("kernel_shape",[]),this.pads=t.getInts("pads",[0,0,0,0]),this.strides=t.getInts("strides",[1,1])},t.prototype.checkInputs=function(t){if(!t||2!==t.length&&3!==t.length)return!1;if(4!==t[0].dims.length||4!==t[1].dims.length)return!1;if(t[0].dims[1]!==t[1].dims[1]*this.group)return!1;if(3===t.length&&(1!==t[2].dims.length||t[1].dims[0]!==t[2].dims[0]))return!1;var e=t[0].dims.length-2;return this.dilations.length===e&&this.strides.length===e&&this.pads.length===2*e&&(0===this.kernelShape.length||this.kernelShape.length===t[1].dims.length-2)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"float32"===t[0].type&&"float32"===t[1].type&&(3!==t.length||"float32"===t[2].type)},t}();e.Conv=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.matMul2d=e.matMul=e.CpuMatMul=void 0;var a=n(18),s=n(1),c=n(0),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[u(e[0],e[1])]},e}(a.MatMul);function u(t,e){var n=o(c.MatMulUtil.preprocessInputShapes(t.dims,e.dims),2),r=n[0],i=n[1],a=[r[r.length-2],i[i.length-1]],l=c.BroadcastUtil.calcShape(r,i,!0);if(!l)throw new Error("input dimensions do not match the requirement");for(var u=c.ShapeUtil.size(l)/(a[0]*a[1]),d=new s.Tensor(l,"float64"===t.type||"float64"===e.type?"float64":"float32"),p=0,f=new Array(l.length),m=new Array(t.dims.length),g=new Array(e.dims.length),y=0;y<u;y++){f[l.length-2]=0,f[l.length-1]=0;for(var v=y,b=l.length-3;b>=0;b--)f[b]=v%l[b],v=Math.floor(v/l[b]);c.BroadcastUtil.fillIndex(f,t.dims,m),c.BroadcastUtil.fillIndex(f,e.dims,g);var x=m.length<=2?0:c.ShapeUtil.indicesToOffset(m,t.strides,l.length-2),_=g.length<=2?0:c.ShapeUtil.indicesToOffset(g,e.strides,l.length-2);h(t.floatData.subarray(x),e.floatData.subarray(_),d.floatData.subarray(p),!1,!1,1,0,a[0],a[1],r[r.length-1]),p+=a[0]*a[1]}return d}function h(t,e,n,r,i,o,a,s,c,l){return r&&i?function(t,e,n,r,i,o,a,s){for(var c=0,l=0,u=0,h=0;h<o;h++){for(var d=0;d<a;d++){for(var p=0,f=0;f<s;f++)p+=t[c]*e[l],c+=o,l+=1;c-=o*s,l-=s,n[u]=r*p+i*n[u],u++,l+=s}l-=a*s,c++}}(t,e,n,o,a,s,c,l):r?function(t,e,n,r,i,o,a,s){for(var c=0,l=0,u=0,h=0;h<o;h++){for(var d=0;d<a;d++){for(var p=0,f=0;f<s;f++)p+=t[c]*e[l],c+=o,l+=a;c-=o*s,l-=a*s,n[u]=r*p+i*n[u],u++,l++}l-=a,c++}}(t,e,n,o,a,s,c,l):i?function(t,e,n,r,i,o,a,s){for(var c=0,l=0,u=0,h=0;h<o;h++){for(var d=0;d<a;d++){for(var p=0,f=0;f<s;f++)p+=t[c]*e[l],c+=1,l+=1;c-=s,l-=s,n[u]=r*p+i*n[u],u++,l+=s}l-=a*s,c+=s}}(t,e,n,o,a,s,c,l):function(t,e,n,r,i,o,a,s){for(var c=0,l=0,u=0,h=0;h<o;h++){for(var d=0;d<a;d++){for(var p=0,f=0;f<s;f++)p+=t[c]*e[l],c+=1,l+=a;c-=s,l-=a*s,n[u]=r*p+i*n[u],u++,l++}l-=a,c+=s}}(t,e,n,o,a,s,c,l)}e.CpuMatMul=l,e.matMul=u,e.matMul2d=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MatMul=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){},t.prototype.checkInputs=function(t){return!(!t||2!==t.length)&&t[0].dims[t[0].dims.length-1]===t[1].dims[t[1].dims.length-2]&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return("float32"===t[0].type||"float64"===t[0].type)&&("float32"===t[1].type||"float64"===t[1].type)&&t[0].type===t[1].type},t}();e.MatMul=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Gemm=void 0;var r=function(){function t(t){this.isOptionalC=t}return t.prototype.initialize=function(t){this.transA=0!==t.getInt("transA",0),this.transB=0!==t.getInt("transB",0),this.alpha=t.getFloat("alpha",1),this.beta=t.getFloat("beta",1)},t.prototype.checkInputs=function(t){return!!t&&(!this.isOptionalC||!(t.length<2||t.length>3))&&!(!this.isOptionalC&&3!==t.length)&&(3!==t.length||1===t[2].dims.length||2===t[2].dims.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return!("float32"!==t[0].type&&"float64"!==t[0].type||"float32"!==t[1].type&&"float64"!==t[1].type||3===t.length&&"float32"!==t[2].type&&"float64"!==t[2].type)&&t[0].type===t[1].type&&(3!==t.length||t[0].type===t[2].type)},t}();e.Gemm=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InstanceNormalization=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){this.epsilon=t.getFloat("epsilon",1e-5)},t.prototype.checkInputs=function(t){return!(!t||3!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){var e=t[0],n=t[1],r=t[2];return!(e.dims.length<3||1!==n.dims.length||1!==r.dims.length)&&n.dims[0]===e.dims[1]&&r.dims[0]===e.dims[1]&&!("float32"!==e.type&&"float64"!==e.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==r.type&&"float64"!==r.type)},t}();e.InstanceNormalization=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalMaxPool=e.MaxPool=e.GlobalAveragePool=e.AveragePool=void 0;var o=function(){function t(){}return t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"float32"===t[0].type||"float64"===t[0].type},t}(),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initialize=function(t){if(this.autoPad=t.getString("auto_pad","NOTSET"),this.kernelShape=t.getInts("kernel_shape"),this.strides=t.getInts("strides",[]),this.pads=t.getInts("pads",[]),this.countIncludePad=0!==t.getInt("count_include_pad",0),this.ceilMode=t.getInt("ceil_mode",0),0!==this.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for AveragePool")},e}(o);e.AveragePool=a;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initialize=function(t){this.countIncludePad=0!==t.getInt("count_include_pad",0)},e}(o);e.GlobalAveragePool=s;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initialize=function(t){if(this.autoPad=t.getString("auto_pad","NOTSET"),this.kernelShape=t.getInts("kernel_shape"),this.strides=t.getInts("strides",[]),this.pads=t.getInts("pads",[]),this.ceilMode=t.getInt("ceil_mode",0),this.storageOrder=t.getInt("storage_order",0),0!==this.storageOrder)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==this.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for MaxPool")},e}(o);e.MaxPool=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initialize=function(t){},e}(o);e.GlobalMaxPool=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Softmax=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){this.axis=t.getInt("axis",1)},t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"float32"===t[0].type||"float64"===t[0].type},t}();e.Softmax=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sum=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){},t.prototype.checkInputs=function(t){if(!t||0===t.length)return!1;for(var e=t[0].dims.length,n=1;n<t.length;n++){if(e!==t[n].dims.length)return!1;for(var r=0;r<e;r++)if(t[0].dims[r]!==t[n].dims[r])return!1}return this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){if("float32"!==t[0].type&&"float64"!==t[0].type)return!1;for(var e=1;e<t.length;e++)if(t[0].type!==t[e].type)return!1;return!0},t}();e.Sum=r},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,l=[],u=!1,h=-1;function d(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&p())}function p(){if(!u){var t=s(d);u=!0;for(var e=l.length;e;){for(c=l,l=[];++h<e;)c&&c[h].run();h=-1,e=l.length}c=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new f(t,e)),1!==l.length||u||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.env=void 0;var a=o(n(46)),s=o(n(26));e.env=new function(){this.onnx=s,this.backend=s.backend,this.platform=a,this.debug=!1}},function(t,e,n){"use strict";(function(e){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=(this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e})(n(53)),a=o;("undefined"!=typeof window?window:e).onnx=a,t.exports=o}).call(this,n(8))},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.CPU_OP_RESOLVE_RULES=void 0;var a=n(7),s=n(57),c=n(77),l=n(78),u=n(79),h=n(80),d=n(81),p=n(82),f=n(83),m=n(84),g=n(85),y=n(86),v=n(87),b=n(17),x=n(89),_=n(90),w=o(n(91)),S=n(92),T=n(93),E=n(94),A=n(95),M=n(96),O=n(97),C=n(98),k=o(n(42)),P=n(42),I=n(99),N=n(100);e.CPU_OP_RESOLVE_RULES=[["Abs","","6+",function(){return new P.CpuUnaryOp(a.NUMBER_TYPES,k.abs)}],["Acos","","7+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.acos)}],["Acosh","","9+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.acosh)}],["Add","","7+",function(){return new l.CpuBinaryOp(a.NUMBER_TYPES,(function(t,e){return t+e}))}],["And","","7+",function(){return new l.CpuBinaryOp(["bool"],(function(t,e){return t&&e}))}],["ArgMax","","1-11",function(){return new s.CpuArgMax}],["Asin","","7+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.asin)}],["Asinh","","9+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.asinh)}],["Atan","","7+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.atan)}],["Atanh","","9+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.atanh)}],["AveragePool","","7-10",function(){return new _.CpuAveragePool}],["BatchNormalization","","7+",function(){return new c.CpuBatchNormalization}],["Ceil","","6+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.ceil)}],["Clip","","6-10",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.clip,k.clipInitializer)}],["Concat","","4+",function(){return new u.CpuConcat}],["Conv","","1+",function(){return new h.CpuConv}],["Cos","","7+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.cos)}],["Cosh","","9+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.cosh)}],["Div","","7+",function(){return new l.CpuBinaryOp(a.NUMBER_TYPES,(function(t,e){return t/e}))}],["Dropout","","7+",function(){return new d.CpuDropout}],["Elu","","6+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.elu,k.eluInitializer)}],["Exp","","6+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.exp)}],["Flatten","","1+",function(){return new p.CpuFlatten}],["Floor","","6+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.floor)}],["Gather","","1+",function(){return new f.CpuGather}],["Gemm","","7-10",function(){return new m.CpuGemm(!1)}],["Gemm","","11+",function(){return new m.CpuGemm(!0)}],["GlobalAveragePool","","1+",function(){return new _.CpuGlobalAveragePool}],["GlobalMaxPool","","1+",function(){return new _.CpuGlobalMaxPool}],["ImageScaler","","1+",function(){return new g.CpuImageScaler}],["InstanceNormalization","","6+",function(){return new y.CpuInstanceNormalization}],["IsNaN","","9+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.isNan,void 0,"bool")}],["LeakyRelu","","6+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.leakyRelu,k.leakyReluInitializer)}],["Log","","6+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.log)}],["LRN","","1+",function(){return new v.CpuLrn}],["MatMul","","1+",function(){return new b.CpuMatMul}],["MaxPool","","1-9",function(){return new _.CpuMaxPool}],["Mul","","7+",function(){return new l.CpuBinaryOp(a.NUMBER_TYPES,(function(t,e){return t*e}))}],["Neg","","6+",function(){return new P.CpuUnaryOp(a.NUMBER_TYPES,k.neg)}],["Not","","1+",function(){return new P.CpuUnaryOp(["bool"],k.not,void 0,"bool")}],["Or","","7+",function(){return new l.CpuBinaryOp(["bool"],(function(t,e){return t||e}))}],["PRelu","","7+",function(){return new l.CpuBinaryOp(a.NUMBER_TYPES,(function(t,e){return t>=0?t:t*e}))}],["Pad","","2-10",function(){return new x.CpuPad}],["Reciprocal","","6+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.reciprocal)}],["ReduceLogSum","","1+",function(){return new w.CpuReduceLogSum}],["ReduceMax","","1+",function(){return new w.CpuReduceMax}],["ReduceMean","","1+",function(){return new w.CpuReduceMean}],["ReduceMin","","1+",function(){return new w.CpuReduceMin}],["ReduceProd","","1+",function(){return new w.CpuReduceProd}],["ReduceSum","","1+",function(){return new w.CpuReduceSum}],["ReduceSumSquare","","1+",function(){return new w.CpuReduceSumSquare}],["Relu","","6+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.relu)}],["Reshape","","5+",function(){return new S.CpuReshape}],["Sigmoid","","6+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.sigmoid)}],["Sign","","9+",function(){return new P.CpuUnaryOp(a.NUMBER_TYPES,k.sign)}],["Sin","","7+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.sin)}],["Sinh","","9+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.sinh)}],["Slice","","10+",function(){return new T.CpuSliceV10}],["Slice","","1-9",function(){return new T.CpuSlice}],["Softmax","","1+",function(){return new E.CpuSoftmax}],["Sqrt","","6+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.sqrt)}],["Squeeze","","1+",function(){return new A.CpuSqueeze}],["Sub","","7+",function(){return new l.CpuBinaryOp(a.NUMBER_TYPES,(function(t,e){return t-e}))}],["Sum","","6+",function(){return new M.CpuSum}],["Tan","","7+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.tan)}],["Tanh","","6+",function(){return new P.CpuUnaryOp(a.FLOAT_TYPES,k.tanh)}],["Tile","","6+",function(){return new O.CpuTile}],["Transpose","","1+",function(){return new C.CpuTranspose}],["Unsqueeze","","1+",function(){return new I.CpuUnsqueeze}],["Upsample","","7-8",function(){return new N.CpuUpsample}],["Xor","","7+",function(){return new l.CpuBinaryOp(["bool"],(function(t,e){return t^e}))}]]},function(t,e,n){"use strict";t.exports=h;var r,i=n(6),o=i.LongBits,a=i.base64,s=i.utf8;function c(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function l(){}function u(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function h(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(h.create=function(){return new r})()}:function(){return new h}};function p(t,e,n){e[n]=255&t}function f(t,e){this.len=t,this.next=void 0,this.val=e}function m(t,e,n){for(;t.hi;)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function g(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}h.create=d(),h.alloc=function(t){return new i.Array(t)},i.Array!==Array&&(h.alloc=i.pool(h.alloc,i.Array.prototype.subarray)),h.prototype._push=function(t,e,n){return this.tail=this.tail.next=new c(t,e,n),this.len+=e,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(t,e,n){for(;t>127;)e[n++]=127&t|128,t>>>=7;e[n]=t},h.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},h.prototype.int32=function(t){return t<0?this._push(m,10,o.fromNumber(t)):this.uint32(t)},h.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},h.prototype.uint64=function(t){var e=o.from(t);return this._push(m,e.length(),e)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(t){var e=o.from(t).zzEncode();return this._push(m,e.length(),e)},h.prototype.bool=function(t){return this._push(p,1,t?1:0)},h.prototype.fixed32=function(t){return this._push(g,4,t>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(t){var e=o.from(t);return this._push(g,4,e.lo)._push(g,4,e.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(t){return this._push(i.float.writeFloatLE,4,t)},h.prototype.double=function(t){return this._push(i.float.writeDoubleLE,8,t)};var y=i.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var r=0;r<t.length;++r)e[n+r]=t[r]};h.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(p,1,0);if(i.isString(t)){var n=h.alloc(e=a.length(t));a.decode(t,n,0),t=n}return this.uint32(e)._push(y,e,t)},h.prototype.string=function(t){var e=s.length(t);return e?this.uint32(e)._push(s.write,e,t):this._push(p,1,0)},h.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},h.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this},h.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e},h._configure=function(t){r=t,h.create=d(),r._configure()}},function(t,e,n){"use strict";t.exports=c;var r,i=n(6),o=i.LongBits,a=i.utf8;function s(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function c(t){this.buf=t,this.pos=0,this.len=t.length}var l,u="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new c(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new c(t);throw Error("illegal buffer")},h=function(){return i.Buffer?function(t){return(c.create=function(t){return i.Buffer.isBuffer(t)?new r(t):u(t)})(t)}:u};function d(){var t=new o(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw s(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw s(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function p(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw s(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=h(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var t=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},c.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var t=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},c.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw s(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n)},c.prototype.string=function(){var t=this.bytes();return a.read(t,0,t.length)},c.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw s(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},c._configure=function(t){r=t,c.create=h(),r._configure();var e=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return d.call(this)[e](!1)},uint64:function(){return d.call(this)[e](!0)},sint64:function(){return d.call(this).zzDecode()[e](!1)},fixed64:function(){return f.call(this)[e](!0)},sfixed64:function(){return f.call(this)[e](!1)}})}},function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Concat=void 0;var i=function(){function t(){}return t.prototype.initialize=function(t){this.axis=t.getInt("axis")},t.prototype.checkInputs=function(t){return!(!t||t.length<1)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){var e,n,i=t[0].type,o=t[0].dims.length;if("string"===i)return!1;try{for(var a=r(t),s=a.next();!s.done;s=a.next()){var c=s.value;if(c.type!==i)return!1;if(c.dims.length!==o)return!1}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return!0},t}();e.Concat=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Dropout=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){this.ratio=t.getFloat("ratio",.5),this.testMode=!0},t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"float32"===t[0].type||"float64"===t[0].type},t}();e.Dropout=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Flatten=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){this.axis=t.getInt("axis",1)},t.prototype.checkInputs=function(t){if(!t||1!==t.length)return!1;var e=t[0].dims.length;return 0!==e&&!(this.axis<-e||this.axis>e)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"string"!==t[0].type},t}();e.Flatten=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Gather=void 0;var r=n(7),i=function(){function t(){}return t.prototype.initialize=function(t){this.axis=t.getInt("axis",0)},t.prototype.checkInputs=function(t){if(!t||2!==t.length)return!1;var e=t[0].dims.length;return!(e<1)&&!(this.axis<-e||this.axis>e-1)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return-1!==r.NUMBER_TYPES.indexOf(t[0].type)&&("int32"===t[1].type||"int16"===t[1].type)},t}();e.Gather=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ImageScaler=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){this.scale=t.getFloat("scale"),this.bias=t.getFloats("bias")},t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&4===t[0].dims.length&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"float32"===t[0].type||"float64"===t[0].type},t}();e.ImageScaler=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Pad=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){this.mode=t.getString("mode","constant"),this.value=t.getFloat("value",0),this.pads=t.getInts("pads")},t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"float32"===t[0].type||"float64"===t[0].type},t}();e.Pad=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReduceBase=void 0;var r=n(7),i=function(){function t(){}return t.prototype.initialize=function(t){this.axes=t.getInts("axes",[]),this.keepDims=1===t.getInt("keepdims",1)},t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return-1!==r.NUMBER_TYPES.indexOf(t[0].type)},t}();e.ReduceBase=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Reshape=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){},t.prototype.checkInputs=function(t){return!(!t||2!==t.length||1!==t[1].dims.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return("float32"===t[0].type||"float64"===t[0].type)&&"int32"===t[1].type},t}();e.Reshape=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SliceV10=e.Slice=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){this.starts=t.getInts("starts"),this.ends=t.getInts("ends"),this.axes=t.getInts("axes",[])},t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"float32"===t[0].type||"float64"===t[0].type},t}();e.Slice=r;var i=function(){function t(){}return t.prototype.initialize=function(t){},t.prototype.checkInputs=function(t){return!(!t||t.length<3||t.length>5)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"int32"===t[1].type&&1===t[1].dims.length&&"int32"===t[2].type&&1===t[2].dims.length&&(!(t.length>=4)||"int32"===t[3].type&&1===t[3].dims.length)&&(!(t.length>=5)||"int32"===t[4].type&&1===t[4].dims.length)},t}();e.SliceV10=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Squeeze=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){this.axes=t.getInts("axes")},t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"string"!==t[0].type},t}();e.Squeeze=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tile=void 0;var r=n(7),i=function(){function t(){}return t.prototype.initialize=function(t){},t.prototype.checkInputs=function(t){return!(!t||2!==t.length)&&1===t[1].dims.length&&t[1].dims[0]===t[0].dims.length&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return-1!==r.NUMBER_TYPES.indexOf(t[0].type)&&("int32"===t[1].type||"int16"===t[1].type)},t}();e.Tile=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Transpose=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){this.perm=t.getInts("perm",[])},t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"float32"===t[0].type||"float64"===t[0].type},t}();e.Transpose=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sinh=e.sin=e.sign=e.sigmoid=e.relu=e.reciprocal=e.not=e.neg=e.log=e.leakyRelu=e.leakyReluInitializer=e.isNan=e.floor=e.exp=e.elu=e.eluInitializer=e.cosh=e.cos=e.clip=e.clipInitializer=e.ceil=e.atanh=e.atan=e.asinh=e.asin=e.acosh=e.acos=e.abs=e.unaryOp=e.CpuUnaryOp=void 0;var o=n(43),a=n(1),s=function(t){function e(e,n,r,i){var o=t.call(this,e,i)||this;return o.func=n,o.attributesInitializer=r,o}return i(e,t),e.prototype.initialize=function(t){this.attributesInitializer&&(this.attributes=this.attributesInitializer(t))},e.prototype.run=function(t,e){return[c(e[0],this.func,this.attributes,this.resultType)]},e}(o.UnaryOp);function c(t,e,n,r){var i=new a.Tensor(t.dims,r||t.type);return e(t.data,i.data,n),i}e.CpuUnaryOp=s,e.unaryOp=c,e.abs=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.abs(t[n])},e.acos=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.acos(t[n])},e.acosh=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.acosh(t[n])},e.asin=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.asin(t[n])},e.asinh=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.asinh(t[n])},e.atan=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.atan(t[n])},e.atanh=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.atanh(t[n])},e.ceil=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.ceil(t[n])},e.clipInitializer=function(t){return{min:t.getFloat("min",-34028234663852886e22),max:t.getFloat("max",34028234663852886e22)}},e.clip=function(t,e,n){for(var r=n.min,i=n.max,o=0;o<t.length;o++){var a=t[o];e[o]=a<r?r:a>i?i:a}},e.cos=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.cos(t[n])},e.cosh=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.cosh(t[n])},e.eluInitializer=function(t){return t.getFloat("alpha",1)},e.elu=function(t,e,n){for(var r=n,i=0;i<t.length;i++){var o=t[i];e[i]=o>=0?o:r*(Math.exp(o)-1)}},e.exp=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.exp(t[n])},e.floor=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.floor(t[n])},e.isNan=function(t,e){for(var n=0;n<t.length;n++)e[n]=Number.isNaN(t[n])?1:0},e.leakyReluInitializer=function(t){return t.getFloat("alpha",.01)},e.leakyRelu=function(t,e,n){for(var r=n,i=0;i<t.length;i++){var o=t[i];e[i]=o>=0?o:r*o}},e.log=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.log(t[n])},e.neg=function(t,e){for(var n=0;n<t.length;n++)e[n]=-t[n]},e.not=function(t,e){for(var n=0;n<t.length;n++)e[n]=t[n]?0:1},e.reciprocal=function(t,e){for(var n=0;n<t.length;n++)e[n]=1/t[n]},e.relu=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.max(0,t[n])},e.sigmoid=function(t,e){for(var n=0;n<t.length;n++)e[n]=1/(1+Math.exp(-t[n]))},e.sign=function(t,e){for(var n=0;n<t.length;n++)e[n]=t[n]>0?1:t[n]<0?-1:0},e.sin=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.sin(t[n])},e.sinh=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.sinh(t[n])},e.sqrt=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.sqrt(t[n])},e.tan=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.tan(t[n])},e.tanh=function(t,e){for(var n=0;n<t.length;n++)e[n]=Math.tanh(t[n])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UnaryOp=void 0;var r=function(){function t(t,e){this.typeConstraint=t,this.resultType=e}return t.prototype.initialize=function(t){},t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return-1!==this.typeConstraint.indexOf(t[0].type)},t}();e.UnaryOp=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Unsqueeze=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){this.axes=t.getInts("axes")},t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"string"!==t[0].type},t}();e.Unsqueeze=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Upsample=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){if(this.mode=t.getString("mode","nearest"),this.scales=t.getFloats("scales"),"nearest"!==this.mode&&"linear"!==this.mode)throw new Error("unrecognized mode: "+this.mode);if("linear"===this.mode&&2!==this.scales.length&&4!==this.scales.length)throw new Error("only support 2-D or 4-D upsampling for linear mode");this.roi=new Array(2*this.scales.length).fill(0)},t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&t[0].dims.length===this.scales.length&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"string"!==t[0].type},t}();e.Upsample=r},function(t,e,n){(function(t,r){var i;(function(){"use strict";var o={function:!0,object:!0},a=o[typeof window]&&window||this,s=o[typeof e]&&e,c=o[typeof t]&&t&&!t.nodeType&&t,l=s&&c&&"object"==typeof r&&r;!l||l.global!==l&&l.window!==l&&l.self!==l||(a=l);var u=Math.pow(2,53)-1,h=/\bOpera/,d=Object.prototype,p=d.hasOwnProperty,f=d.toString;function m(t){return(t=String(t)).charAt(0).toUpperCase()+t.slice(1)}function g(t){return t=_(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:m(t)}function y(t,e){for(var n in t)p.call(t,n)&&e(t[n],n,t)}function v(t){return null==t?m(t):f.call(t).slice(8,-1)}function b(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function x(t,e){var n=null;return function(t,e){var n=-1,r=t?t.length:0;if("number"==typeof r&&r>-1&&r<=u)for(;++n<r;)e(t[n],n);else y(t,e)}(t,(function(r,i){n=e(n,r,i,t)})),n}function _(t){return String(t).replace(/^ +| +$/g,"")}var w=function t(e){var n=a,r=e&&"object"==typeof e&&"String"!=v(e);r&&(n=e,e=null);var i=n.navigator||{},o=i.userAgent||"";e||(e=o);var s,c,l,u,d,p=r?!!i.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(f.toString()),m=r?"Object":"ScriptBridgingProxyObject",w=r?"Object":"Environment",S=r&&n.java?"JavaPackage":v(n.java),T=r?"Object":"RuntimeObject",E=/\bJava/.test(S)&&n.java,A=E&&v(n.environment)==w,M=E?"a":"\u03b1",O=E?"b":"\u03b2",C=n.document||{},k=n.operamini||n.opera,P=h.test(P=r&&k?k["[[Class]]"]:v(k))?P:k=null,I=e,N=[],R=null,D=e==o,L=D&&k&&"function"==typeof k.version&&k.version(),F=x([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(t,n){return t||RegExp("\\b"+(n.pattern||b(n))+"\\b","i").exec(e)&&(n.label||n)})),j=x(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(t,n){return t||RegExp("\\b"+(n.pattern||b(n))+"\\b","i").exec(e)&&(n.label||n)})),U=V([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),B=x({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}},(function(t,n,r){return t||(n[U]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(U)]||RegExp("\\b"+b(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r})),z=x(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(t,n){var r=n.pattern||b(n);return!t&&(t=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=function(t,e,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&n&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(r=r[/[\d.]+$/.exec(t)])&&(t="Windows "+r),t=String(t),e&&n&&(t=t.replace(RegExp(e,"i"),n)),g(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(t,r,n.label||n)),t}));function V(t){return x(t,(function(t,n){var r=n.pattern||b(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=g(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t}))}function G(t){return x(t,(function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null}))}if(F&&(F=[F]),/\bAndroid\b/.test(z)&&!U&&(s=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(e))&&(U=_(s[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),B&&!U?U=V([B]):B&&U&&(U=U.replace(RegExp("^("+b(B)+")[-_.\\s]","i"),B+" ").replace(RegExp("^("+b(B)+")[-_.]?(\\w)","i"),B+" $2")),(s=/\bGoogle TV\b/.exec(U))&&(U=s[0]),/\bSimulator\b/i.test(e)&&(U=(U?U+" ":"")+"Simulator"),"Opera Mini"==j&&/\bOPiOS\b/.test(e)&&N.push("running in Turbo/Uncompressed mode"),"IE"==j&&/\blike iPhone OS\b/.test(e)?(B=(s=t(e.replace(/like iPhone OS/,""))).manufacturer,U=s.product):/^iP/.test(U)?(j||(j="Safari"),z="iOS"+((s=/ OS ([\d_]+)/i.exec(e))?" "+s[1].replace(/_/g,"."):"")):"Konqueror"==j&&/^Linux\b/i.test(z)?z="Kubuntu":B&&"Google"!=B&&(/Chrome/.test(j)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(U))||/\bAndroid\b/.test(z)&&/^Chrome/.test(j)&&/\bVersion\//i.test(e)?(j="Android Browser",z=/\bAndroid\b/.test(z)?z:"Android"):"Silk"==j?(/\bMobi/i.test(e)||(z="Android",N.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&N.unshift("accelerated")):"UC Browser"==j&&/\bUCWEB\b/.test(e)?N.push("speed mode"):"PaleMoon"==j&&(s=/\bFirefox\/([\d.]+)\b/.exec(e))?N.push("identifying as Firefox "+s[1]):"Firefox"==j&&(s=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(z||(z="Firefox OS"),U||(U=s[1])):!j||(s=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(j))?(j&&!U&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(s+"/")+8))&&(j=null),(s=U||B||z)&&(U||B||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(z))&&(j=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(z)?z:s)+" Browser")):"Electron"==j&&(s=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&N.push("Chromium "+s),L||(L=G(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",b(j),"(?:Firefox|Minefield|NetFront)"])),(s=("iCab"==F&&parseFloat(L)>3?"WebKit":/\bOpera\b/.test(j)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(F)&&"WebKit"||!F&&/\bMSIE\b/i.test(e)&&("Mac OS"==z?"Tasman":"Trident")||"WebKit"==F&&/\bPlayStation\b(?! Vita\b)/i.test(j)&&"NetFront")&&(F=[s]),"IE"==j&&(s=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(j+=" Mobile",z="Windows Phone "+(/\+$/.test(s)?s:s+".x"),N.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(j="IE Mobile",z="Windows Phone 8.x",N.unshift("desktop mode"),L||(L=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=j&&"Trident"==F&&(s=/\brv:([\d.]+)/.exec(e))&&(j&&N.push("identifying as "+j+(L?" "+L:"")),j="IE",L=s[1]),D){if(u="global",d=null!=(l=n)?typeof l[u]:"number",/^(?:boolean|number|string|undefined)$/.test(d)||"object"==d&&!l[u])v(s=n.runtime)==m?(j="Adobe AIR",z=s.flash.system.Capabilities.os):v(s=n.phantom)==T?(j="PhantomJS",L=(s=s.version||null)&&s.major+"."+s.minor+"."+s.patch):"number"==typeof C.documentMode&&(s=/\bTrident\/(\d+)/i.exec(e))?(L=[L,C.documentMode],(s=+s[1]+4)!=L[1]&&(N.push("IE "+L[1]+" mode"),F&&(F[1]=""),L[1]=s),L="IE"==j?String(L[1].toFixed(1)):L[0]):"number"==typeof C.documentMode&&/^(?:Chrome|Firefox)\b/.test(j)&&(N.push("masking as "+j+" "+L),j="IE",L="11.0",F=["Trident"],z="Windows");else if(E&&(I=(s=E.lang.System).getProperty("os.arch"),z=z||s.getProperty("os.name")+" "+s.getProperty("os.version")),A){try{L=n.require("ringo/engine").version.join("."),j="RingoJS"}catch(t){(s=n.system)&&s.global.system==n.system&&(j="Narwhal",z||(z=s[0].os||null))}j||(j="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(s=n.process)&&("object"==typeof s.versions&&("string"==typeof s.versions.electron?(N.push("Node "+s.versions.node),j="Electron",L=s.versions.electron):"string"==typeof s.versions.nw&&(N.push("Chromium "+L,"Node "+s.versions.node),j="NW.js",L=s.versions.nw)),j||(j="Node.js",I=s.arch,z=s.platform,L=(L=/[\d.]+/.exec(s.version))?L[0]:null));z=z&&g(z)}if(L&&(s=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(L)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(D&&i.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(R=/b/i.test(s)?"beta":"alpha",L=L.replace(RegExp(s+"\\+?$"),"")+("beta"==R?O:M)+(/\d+\+?/.exec(s)||"")),"Fennec"==j||"Firefox"==j&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(z))j="Firefox Mobile";else if("Maxthon"==j&&L)L=L.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(U))"Xbox 360"==U&&(z=null),"Xbox 360"==U&&/\bIEMobile\b/.test(e)&&N.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(j)&&(!j||U||/Browser|Mobi/.test(j))||"Windows CE"!=z&&!/Mobi/i.test(e))if("IE"==j&&D)try{null===n.external&&N.unshift("platform preview")}catch(t){N.unshift("embedded")}else(/\bBlackBerry\b/.test(U)||/\bBB10\b/.test(e))&&(s=(RegExp(U.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||L)?(z=((s=[s,/BB10/.test(e)])[1]?(U=null,B="BlackBerry"):"Device Software")+" "+s[0],L=null):this!=y&&"Wii"!=U&&(D&&k||/Opera/.test(j)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==j&&/\bOS X (?:\d+\.){2,}/.test(z)||"IE"==j&&(z&&!/^Win/.test(z)&&L>5.5||/\bWindows XP\b/.test(z)&&L>8||8==L&&!/\bTrident\b/.test(e)))&&!h.test(s=t.call(y,e.replace(h,"")+";"))&&s.name&&(s="ing as "+s.name+((s=s.version)?" "+s:""),h.test(j)?(/\bIE\b/.test(s)&&"Mac OS"==z&&(z=null),s="identify"+s):(s="mask"+s,j=P?g(P.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(s)&&(z=null),D||(L=null)),F=["Presto"],N.push(s));else j+=" Mobile";(s=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(s=[parseFloat(s.replace(/\.(\d)$/,".0$1")),s],"Safari"==j&&"+"==s[1].slice(-1)?(j="WebKit Nightly",R="alpha",L=s[1].slice(0,-1)):L!=s[1]&&L!=(s[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(L=null),s[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(e)||0)[1],537.36==s[0]&&537.36==s[2]&&parseFloat(s[1])>=28&&"WebKit"==F&&(F=["Blink"]),D&&(p||s[1])?(F&&(F[1]="like Chrome"),s=s[1]||((s=s[0])<530?1:s<532?2:s<532.05?3:s<533?4:s<534.03?5:s<534.07?6:s<534.1?7:s<534.13?8:s<534.16?9:s<534.24?10:s<534.3?11:s<535.01?12:s<535.02?"13+":s<535.07?15:s<535.11?16:s<535.19?17:s<536.05?18:s<536.1?19:s<537.01?20:s<537.11?"21+":s<537.13?23:s<537.18?24:s<537.24?25:s<537.36?26:"Blink"!=F?"27":"28")):(F&&(F[1]="like Safari"),s=(s=s[0])<400?1:s<500?2:s<526?3:s<533?4:s<534?"4+":s<535?5:s<537?6:s<538?7:s<601?8:s<602?9:s<604?10:s<606?11:s<608?12:"12"),F&&(F[1]+=" "+(s+="number"==typeof s?".x":/[.+]/.test(s)?"":"+")),"Safari"==j&&(!L||parseInt(L)>45)?L=s:"Chrome"==j&&/\bHeadlessChrome/i.test(e)&&N.unshift("headless")),"Opera"==j&&(s=/\bzbov|zvav$/.exec(z))?(j+=" ",N.unshift("desktop mode"),"zvav"==s?(j+="Mini",L=null):j+="Mobile",z=z.replace(RegExp(" *"+s+"$"),"")):"Safari"==j&&/\bChrome\b/.exec(F&&F[1])?(N.unshift("desktop mode"),j="Chrome Mobile",L=null,/\bOS X\b/.test(z)?(B="Apple",z="iOS 4.3+"):z=null):/\bSRWare Iron\b/.test(j)&&!L&&(L=G("Chrome")),L&&0==L.indexOf(s=/[\d.]+$/.exec(z))&&e.indexOf("/"+s+"-")>-1&&(z=_(z.replace(s,""))),z&&-1!=z.indexOf(j)&&!RegExp(j+" OS").test(z)&&(z=z.replace(RegExp(" *"+b(j)+" *"),"")),F&&!/\b(?:Avant|Nook)\b/.test(j)&&(/Browser|Lunascape|Maxthon/.test(j)||"Safari"!=j&&/^iOS/.test(z)&&/\bSafari\b/.test(F[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(j)&&F[1])&&(s=F[F.length-1])&&N.push(s),N.length&&(N=["("+N.join("; ")+")"]),B&&U&&U.indexOf(B)<0&&N.push("on "+B),U&&N.push((/^on /.test(N[N.length-1])?"":"on ")+U),z&&(s=/ ([\d.+]+)$/.exec(z),c=s&&"/"==z.charAt(z.length-s[0].length-1),z={architecture:32,family:s&&!c?z.replace(s[0],""):z,version:s?s[1]:null,toString:function(){var t=this.version;return this.family+(t&&!c?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(s=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(I))&&!/\bi686\b/i.test(I)?(z&&(z.architecture=64,z.family=z.family.replace(RegExp(" *"+s),"")),j&&(/\bWOW64\b/i.test(e)||D&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(e))&&N.unshift("32-bit")):z&&/^OS X/.test(z.family)&&"Chrome"==j&&parseFloat(L)>=39&&(z.architecture=64),e||(e=null);var W={};return W.description=e,W.layout=F&&F[0],W.manufacturer=B,W.name=j,W.prerelease=R,W.product=U,W.ua=e,W.version=j&&L,W.os=z||{architecture:null,family:null,version:null,toString:function(){return"null"}},W.parse=t,W.toString=function(){return this.description||""},W.version&&N.unshift(L),W.name&&N.unshift(j),z&&j&&(z!=String(z).split(" ")[0]||z!=j.split(" ")[0]&&!U)&&N.push(U?"("+z+")":"on "+z),N.length&&(W.description=N.join(" ")),W}();a.platform=w,void 0===(i=function(){return w}.call(e,n,e,t))||(t.exports=i)}).call(this)}).call(this,n(102)(t),n(8))},function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,i="/"===a.charAt(0))}return(i?"/":"")+(e=n(r(e.split("/"),(function(t){return!!t})),!i).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),a="/"===i(t,-1);return(t=n(r(t.split("/"),(function(t){return!!t})),!o).join("/"))||o||(t="."),t&&a&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,c=0;c<a;c++)if(i[c]!==o[c]){s=c;break}var l=[];for(c=s;c<i.length;c++)l.push("..");return(l=l.concat(o.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){n=a+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var i=function(t,e,n){return t.substr(e,n)}}).call(this,n(24))},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Clip=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){this.min=t.getFloat("min",-34028234663852886e22),this.max=t.getFloat("max",34028234663852886e22)},t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"float32"===t[0].type||"float64"===t[0].type},t}();e.Clip=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPackedShape=void 0,e.getPackedShape=function(t){var e=t.length;return t.slice(0,e-1).concat(t[e-1]/4)}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;var c=n(1),l=o(n(52)),u=function(){function t(t,e,n){var r=n||[t.length];if(0===t.length)throw new RangeError("Tensor data should contain at least one element.");Array.isArray(t)&&"string"!==e?"float32"===e?this.data=Float32Array.from(t):"bool"===e?this.data=new Uint8Array(t):"int32"===e&&(this.data=Int32Array.from(t)):this.data=t,this.dims=r,this.type=e,this.internalTensor=new c.Tensor(this.dims,this.type,void 0,void 0,this.data),this.size=this.internalTensor.size}return t.prototype.get=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=[];if("number"==typeof t)i=s([t],n);else{if(!t)throw new Error("Input index array is undefined. ");i=t}if(l.validateIndices(i),i.length!==this.dims.length)throw new RangeError("Input index array dims don't match the tensor dims.");i.forEach((function(t,n){if(t>=e.dims[n])throw new RangeError("Input index array dims don't match the tensor dims.")}));var o=this.internalTensor.get(i);return"bool"===this.type?1===o:o},t.prototype.set=function(t,e){for(var n=this,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];l.matchElementType(this.type,t);var o=[];if("number"==typeof e)o=s([e],r);else{if(!e)throw new Error("Input index array is undefined.");o=e}if(l.validateIndices(o),o.length!==this.dims.length)throw new RangeError("Input index array dims don't match the tensor dims.");o.forEach((function(t,e){if(t>=n.dims[e])throw new RangeError("Input index array dims don't match the tensor dims.")})),"boolean"==typeof t?this.internalTensor.set(o,t?1:0):this.internalTensor.set(o,t)},t}();e.Tensor=u},function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.validateIndices=e.matchElementType=e.toInternalTensor=e.fromInternalTensor=void 0;var i=n(1),o=n(51);e.fromInternalTensor=function(t){switch(t.type){case"bool":return new o.Tensor(new Uint8Array(t.integerData),"bool",t.dims);case"float32":return new o.Tensor(t.floatData,"float32",t.dims);case"float64":return new o.Tensor(new Float32Array(t.floatData),"float32",t.dims);case"string":return new o.Tensor(t.stringData,"string",t.dims);case"int8":return new o.Tensor(new Int32Array(t.integerData),"int32",t.dims);case"int32":return new o.Tensor(t.integerData,"int32",t.dims);default:throw new TypeError("Tensor type is not supported. ")}},e.toInternalTensor=function(t){return new i.Tensor(t.dims,t.type,void 0,void 0,t.data)},e.matchElementType=function(t,e){switch(typeof e){case"string":if("string"!==t)throw new TypeError("The new element type doesn't match the tensor data type.");break;case"number":if("float32"!==t&&"int32"!==t)throw new TypeError("The new element type doesn't match the tensor data type.");if("float32"===t&&Number.isInteger(e))throw new TypeError("The new element type doesn't match the tensor data type.");if("int32"===t&&!Number.isInteger(e))throw new TypeError("The new element type doesn't match the tensor data type.");break;case"boolean":if("bool"!==t)throw new TypeError("The new element type doesn't match the tensor data type.");break;default:throw new TypeError("The new element type is not supported.")}},e.validateIndices=function(t){var e,n;if(t.length<0||t.length>6)throw new RangeError("Only rank 0 to 6 is supported for tensor shape.");try{for(var i=r(t),o=i.next();!o.done;o=i.next()){var a=o.value;if(!Number.isInteger(a))throw new TypeError("Invalid index: "+a+" is not an integer");if(a<0||a>2147483647)throw new TypeError("Invalid index: length "+a+" is not allowed")}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.ENV=e.backend=void 0;var o=n(54),a=n(101),s=n(119),c=n(168);i(n(169),e),i(n(170),e),i(n(171),e),i(n(172),e),e.backend={cpu:new o.CpuBackend,wasm:new a.WasmBackend,webgl:new s.WebGLBackend},e.ENV=c.envImpl},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CpuBackend=void 0;var r=n(55),i=function(){function t(){}return t.prototype.initialize=function(){return!0},t.prototype.createSessionHandler=function(t){return new r.CpuSessionHandler(this,t)},t.prototype.dispose=function(){},t}();e.CpuBackend=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CpuSessionHandler=void 0;var r=n(11),i=n(56),o=n(27),a=function(){function t(t,e){this.backend=t,this.context=e}return t.prototype.createInferenceHandler=function(){return new i.CpuInferenceHandler(this,this.context.profiler)},t.prototype.dispose=function(){},t.prototype.resolve=function(t,e){var n=r.resolveOperator(t,e,o.CPU_OP_RESOLVE_RULES);return n.initialize(t.attributes),n},t}();e.CpuSessionHandler=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CpuInferenceHandler=void 0;var r=function(){function t(t,e){this.session=t,this.profiler=e}return t.prototype.dispose=function(){},t}();e.CpuInferenceHandler=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.argMax=e.CpuArgMax=void 0;var o=n(58),a=n(1),s=n(0),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[l(e[0],this.axis,this.keepDims)]},e}(o.ArgMax);function l(t,e,n){var r=t.dims?t.dims.length:1;e=s.ShapeUtil.normalizeAxis(e,r);for(var i=s.ReduceUtil.calcReduceShape(t.dims,[e],!0),o=t.data,c=new Int32Array(s.ShapeUtil.size(i)),l=s.ShapeUtil.sizeFromDimension(t.dims,e+1),u=s.ShapeUtil.computeStrides(i),h=s.ShapeUtil.computeStrides(t.dims),d=new Array(t.dims.length),p=0;p<c.length;p++){var f=s.ShapeUtil.offsetToIndices(p,u);s.BroadcastUtil.fillIndex(f,t.dims,d);for(var m=s.ShapeUtil.indicesToOffset(d,h),g=t.data[m],y=0,v=0;v<t.dims[e];++v){var b=o[m+v*l];b>g&&(g=b,y=v)}c[p]=y}return new a.Tensor(n?i:s.ReduceUtil.calcReduceShape(t.dims,[e],n),"int32",void 0,void 0,c)}e.CpuArgMax=c,e.argMax=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArgMax=void 0;var r=n(7),i=function(){function t(){}return t.prototype.initialize=function(t){this.axis=t.getInt("axis",0),this.keepDims=1===t.getInt("keepdims",1)},t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return-1!==r.NUMBER_TYPES.indexOf(t[0].type)},t}();e.ArgMax=i},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),a=r[0],s=r[1],l=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),u=0,h=s>0?a-4:a;for(n=0;n<h;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;return 2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,l[u++]=255&e),1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e),l},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(l(t,a,a+16383>s?s:a+16383));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,l=c>>1,u=-7,h=n?i-1:0,d=n?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+t[e+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+t[e+h],h+=d,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=l}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,c,l=8*o-i-1,u=(1<<l)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(a++,c/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*c-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=f,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+p]=255&a,p+=f,a/=256,l-=8);t[n+p-f]|=128*m}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";t.exports=n(63)},function(t,e,n){"use strict";var r=e;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(28),r.BufferWriter=n(72),r.Reader=n(29),r.BufferReader=n(73),r.util=n(6),r.rpc=n(74),r.roots=n(76),r.configure=i,i()},function(t,e,n){"use strict";t.exports=function(t,e){for(var n=new Array(arguments.length-1),r=0,i=2,o=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,a){n[r]=function(t){if(o)if(o=!1,t)a(t);else{for(var e=new Array(arguments.length-1),n=0;n<e.length;)e[n++]=arguments[n];i.apply(null,e)}};try{t.apply(e||null,n)}catch(t){o&&(o=!1,a(t))}}))}},function(t,e,n){"use strict";var r=e;r.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&"="===t.charAt(e);)++n;return Math.ceil(3*t.length)/4-n};for(var i=new Array(64),o=new Array(123),a=0;a<64;)o[i[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;r.encode=function(t,e,n){for(var r,o=null,a=[],s=0,c=0;e<n;){var l=t[e++];switch(c){case 0:a[s++]=i[l>>2],r=(3&l)<<4,c=1;break;case 1:a[s++]=i[r|l>>4],r=(15&l)<<2,c=2;break;case 2:a[s++]=i[r|l>>6],a[s++]=i[63&l],c=0}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=i[r],a[s++]=61,1===c&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))},r.decode=function(t,e,n){for(var r,i=n,a=0,s=0;s<t.length;){var c=t.charCodeAt(s++);if(61===c&&a>1)break;if(void 0===(c=o[c]))throw Error("invalid encoding");switch(a){case 0:r=c,a=1;break;case 1:e[n++]=r<<2|(48&c)>>4,r=c,a=2;break;case 2:e[n++]=(15&r)<<4|(60&c)>>2,r=c,a=3;break;case 3:e[n++]=(3&r)<<6|c,a=0}}if(1===a)throw Error("invalid encoding");return n-i},r.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},function(t,e,n){"use strict";function r(){this._listeners={}}t.exports=r,r.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this},r.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var n=this._listeners[t],r=0;r<n.length;)n[r].fn===e?n.splice(r,1):++r;return this},r.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,n)}return this}},function(t,e,n){"use strict";function r(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),r=128===n[3];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(t,r,i){e[0]=t,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function a(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],e[0]}function s(t,r){return n[3]=t[r],n[2]=t[r+1],n[1]=t[r+2],n[0]=t[r+3],e[0]}t.writeFloatLE=r?i:o,t.writeFloatBE=r?o:i,t.readFloatLE=r?a:s,t.readFloatBE=r?s:a}():function(){function e(t,e,n,r){var i=e<0?1:0;if(i&&(e=-e),0===e)t(1/e>0?0:2147483648,n,r);else if(isNaN(e))t(2143289344,n,r);else if(e>34028234663852886e22)t((i<<31|2139095040)>>>0,n,r);else if(e<11754943508222875e-54)t((i<<31|Math.round(e/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(e)/Math.LN2);t((i<<31|o+127<<23|8388607&Math.round(e*Math.pow(2,-o)*8388608))>>>0,n,r)}}function n(t,e,n){var r=t(e,n),i=2*(r>>31)+1,o=r>>>23&255,a=8388607&r;return 255===o?a?NaN:i*(1/0):0===o?1401298464324817e-60*i*a:i*Math.pow(2,o-150)*(a+8388608)}t.writeFloatLE=e.bind(null,i),t.writeFloatBE=e.bind(null,o),t.readFloatLE=n.bind(null,a),t.readFloatBE=n.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),r=128===n[7];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(t,r,i){e[0]=t,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function a(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],n[4]=t[r+4],n[5]=t[r+5],n[6]=t[r+6],n[7]=t[r+7],e[0]}function s(t,r){return n[7]=t[r],n[6]=t[r+1],n[5]=t[r+2],n[4]=t[r+3],n[3]=t[r+4],n[2]=t[r+5],n[1]=t[r+6],n[0]=t[r+7],e[0]}t.writeDoubleLE=r?i:o,t.writeDoubleBE=r?o:i,t.readDoubleLE=r?a:s,t.readDoubleBE=r?s:a}():function(){function e(t,e,n,r,i,o){var a=r<0?1:0;if(a&&(r=-r),0===r)t(0,i,o+e),t(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))t(0,i,o+e),t(2146959360,i,o+n);else if(r>17976931348623157e292)t(0,i,o+e),t((a<<31|2146435072)>>>0,i,o+n);else{var s;if(r<22250738585072014e-324)t((s=r/5e-324)>>>0,i,o+e),t((a<<31|s/4294967296)>>>0,i,o+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),t(4503599627370496*(s=r*Math.pow(2,-c))>>>0,i,o+e),t((a<<31|c+1023<<20|1048576*s&1048575)>>>0,i,o+n)}}}function n(t,e,n,r,i){var o=t(r,i+e),a=t(r,i+n),s=2*(a>>31)+1,c=a>>>20&2047,l=4294967296*(1048575&a)+o;return 2047===c?l?NaN:s*(1/0):0===c?5e-324*s*l:s*Math.pow(2,c-1075)*(l+4503599627370496)}t.writeDoubleLE=e.bind(null,i,0,4),t.writeDoubleBE=e.bind(null,o,4,0),t.readDoubleLE=n.bind(null,a,0,4),t.readDoubleBE=n.bind(null,s,4,0)}(),t}function i(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function o(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t}function a(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function s(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=r(r)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},function(t,e,n){"use strict";var r=e;r.length=function(t){for(var e=0,n=0,r=0;r<t.length;++r)(n=t.charCodeAt(r))<128?e+=1:n<2048?e+=2:55296==(64512&n)&&56320==(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e},r.read=function(t,e,n){if(n-e<1)return"";for(var r,i=null,o=[],a=0;e<n;)(r=t[e++])<128?o[a++]=r:r>191&&r<224?o[a++]=(31&r)<<6|63&t[e++]:r>239&&r<365?(r=((7&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,o[a++]=55296+(r>>10),o[a++]=56320+(1023&r)):o[a++]=(15&r)<<12|(63&t[e++])<<6|63&t[e++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))},r.write=function(t,e,n){for(var r,i,o=n,a=0;a<t.length;++a)(r=t.charCodeAt(a))<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=t.charCodeAt(a+1)))?(r=65536+((1023&r)<<10)+(1023&i),++a,e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128);return n-o}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r=n||8192,i=r>>>1,o=null,a=r;return function(n){if(n<1||n>i)return t(n);a+n>r&&(o=t(r),a=0);var s=e.call(o,a,a+=n);return 7&a&&(a=1+(7|a)),s}}},function(t,e,n){"use strict";t.exports=i;var r=n(6);function i(t,e){this.lo=t>>>0,this.hi=e>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var a=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return o;var e=t<0;e&&(t=-t);var n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(t){if("number"==typeof t)return i.fromNumber(t);if(r.isString(t)){if(!r.Long)return i.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new i(t.low>>>0,t.high>>>0):o},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var s=String.prototype.charCodeAt;i.fromHash=function(t){return t===a?o:new i((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},i.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}},function(t,e,n){"use strict";t.exports=o;var r=n(28);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(6);function o(){r.call(this)}function a(t,e,n){t.length<40?i.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var r=0;r<t.length;)e[n++]=t[r++]}},o.prototype.bytes=function(t){i.isString(t)&&(t=i._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(o.writeBytesBuffer,e,t),this},o.prototype.string=function(t){var e=i.Buffer.byteLength(t);return this.uint32(e),e&&this._push(a,e,t),this},o._configure()},function(t,e,n){"use strict";t.exports=o;var r=n(29);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(6);function o(t){r.call(this,t)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},o._configure()},function(t,e,n){"use strict";e.Service=n(75)},function(t,e,n){"use strict";t.exports=i;var r=n(6);function i(t,e,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function t(e,n,i,o,a){if(!o)throw TypeError("request must be specified");var s=this;if(!a)return r.asPromise(t,s,e,n,i,o);if(s.rpcImpl)try{return s.rpcImpl(e,n[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(t,n){if(t)return s.emit("error",t,e),a(t);if(null!==n){if(!(n instanceof i))try{n=i[s.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){return s.emit("error",t,e),a(t)}return s.emit("data",n,e),a(null,n)}s.end(!0)}))}catch(t){return s.emit("error",t,e),void setTimeout((function(){a(t)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},i.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(t,e,n){"use strict";t.exports={}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.batchNormalization=e.CpuBatchNormalization=void 0;var o=n(14),a=n(1),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[c(e[0],e[1],e[2],e[3],e[4],this.epsilon,this.momentum,this.spatial)]},e}(o.BatchNormalization);function c(t,e,n,r,i,o,s,c){for(var l=t.dims,u=l[0],h=l[1],d=1,p=2;p<l.length;p++)d*=l[p];for(var f=new a.Tensor(t.dims,t.type),m=t.floatData,g=f.floatData,y=e.numberData,v=n.numberData,b=r.numberData,x=i.numberData,_=0;_<u*h;_++){var w=_*d;for(p=0;p<d;p++)g[w+p]=y[_%h]*((m[w+p]-b[_%h])/Math.sqrt(x[_%h]+o))+v[_%h]}return f}e.CpuBatchNormalization=s,e.batchNormalization=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CpuBinaryOp=void 0;var o=n(15),a=n(0),s=function(t){function e(e,n,r,i){var o=t.call(this,e,r,i)||this;return o.opLambda=n,o}return i(e,t),e.prototype.initialize=function(t){if(!this.opType&&!this.opLambda)throw new Error("Both opType and opLambda cannot be missing for a binary op");if(!this.opLambda)throw this.opType,new Error("Binary op could not be initialized. Missing op lambda.")},e.prototype.run=function(t,e){return[function(t,e,n,r,i){var o=a.BroadcastUtil.calc(t,e,n,!1,i);if(!o)throw new Error("not broadcastable");return o}(e[0],e[1],this.opLambda,0,this.resultType)]},e}(o.BinaryOp);e.CpuBinaryOp=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&o(e,t,n);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.concat=e.CpuConcat=void 0;var c=n(30),l=n(1),u=s(n(0)),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[d(e,this.axis)]},e}(c.Concat);function d(t,e){var n=t[0],r=n.dims;if(e>=r.length||e<-1*r.length)throw new Error("axis specified for concat doesn't match input dimensionality");e<0&&(e=r.length+e);for(var i=r[e],o=new Array(r.length),a=1;a<t.length;a++)for(var s=(g=t[a]).dims,c=0;c<r.length;c++){if(c===e)i+=s[c];else if(r[c]!==s[c])throw new Error("non concat dimensions must match");o[c]=s[c]}o[e]=i;var h=new l.Tensor(o,n.type),d=h.numberData,p=1;for(a=o.length-1;a>=e;a--)p*=o[a];for(var f=0,m=0;m<t.length;m++){var g,y=1;for(a=(g=t[m]).dims.length-1;a>=e;a--)y*=g.dims[a];for(var v=g.numberData,b=u.ShapeUtil.size(g.dims),x=f,_=(a=0,0);a<b;a++)d[x+a]=v[a],++_===y&&(x+=p-y,_=0);f+=y}return h}e.CpuConcat=h,e.concat=d},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.conv2d=e.CpuConv=void 0;var o=n(16),a=n(1),s=n(0),c=n(17),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){var n=e[0],r=e[1],i=3===e.length?e[2]:void 0;if(0===this.kernelShape.length)for(var o=e[1].dims,c=2;c<o.length;++c)this.kernelShape.push(o[c]);var l=s.PoolConvUtil.computeConvOutputShape(n.dims,r.dims,this.strides,this.dilations,this.kernelShape,this.pads,this.autoPad),h=new a.Tensor(l,n.type);return u(h,n,r,i,this.dilations,this.group,this.pads,this.strides),[h]},e}(o.Conv);function u(t,e,n,r,i,o,a,s){for(var l=e.dims[0],u=e.dims[1],d=e.dims[2],p=e.dims[3],f=n.dims[0],m=n.dims[1],g=n.dims[2],y=n.dims[3],v=f*m*g*y,b=[g,y],x=t.dims[0],_=t.dims[1],w=t.dims[2],S=t.dims[3],T=w*S,E=u/o*(d*p),A=x*_*w*S/x/o,M=v/o,O=u/o*(b[0]*b[1]),C=new Float32Array(O*T),k=0;k<l;++k){for(var P=0,I=0,N=0;N<o;++N)h(e.floatData.subarray(P+N*E),C,u/o,d,p,b[0],b[1],i[0],i[1],a[0],a[1],a[2],a[3],s[0],s[1]),c.matMul2d(n.floatData.subarray(N*M),C,t.floatData.subarray(I+N*A),!1,!1,1,0,f/o,T,O);P+=E*o,I+=A*o}if(r)for(var R=r.floatData,D=t.floatData,L=t.dims[0],F=t.dims[1],j=t.dims[2]*t.dims[3],U=F*j,B=0;B<L;++B)for(var z=0;z<F;++z)for(var V=B*U+z*j,G=0;G<j;++G)D[V+G]+=R[z]}function h(t,e,n,r,i,o,a,s,c,l,u,h,d,p,f){var m=1+~~((r+h+l-(s*(o-1)+1))/p),g=1+~~((i+u+d-(c*(a-1)+1))/f);if(1!==s||1!==c||0!==u||0!==d||0!==l||0!==h)for(var y=1+~~((r+l+h-(s*(o-1)+1))/p),v=1+~~((i+u+d-(c*(a-1)+1))/f),b=n*o*a,x=0;x<b;++x)for(var _=x%a,w=~~(x/a)%o,S=~~(x/(o*a)),T=0;T<y;++T)for(var E=0;E<v;++E){var A=T*p-l+w*s,M=E*f-u+_*c;e[(x*y+T)*v+E]=A>=0&&A<r&&M>=0&&M<i?t[(S*r+A)*i+M]:0}else for(var O=0;O<n*o*a;O++)for(var C=~~(O/(o*a)),k=O%(o*a),P=~~(k/a),I=k%a,N=C*(o*a*m*g)+P*(a*m*g)+I*(m*g),R=C*(r*i),D=0;D<m;D++){var L=D*p+P,F=I;if(1===f)e.set(t.subarray(R+L*i+F,R+L*i+F+g),N+D*g);else for(var j=0;j<g;j++)e[N+(D*g+j)]=t[R+(L*i+F+j*f)]}}e.CpuConv=l,e.conv2d=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.dropout=e.CpuDropout=void 0;var o=n(31),a=n(1),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[c(e[0],this.ratio,this.testMode)]},e}(o.Dropout);function c(t,e,n){if(!n)throw new Error("only test mode is supported");var r=new a.Tensor(t.dims,t.type),i=t.floatData;return r.numberData.set(i),r}e.CpuDropout=s,e.dropout=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.flatten=e.CpuFlatten=void 0;var o=n(32),a=n(1),s=n(0),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[l(e[0],this.axis)]},e}(o.Flatten);function l(t,e){var n=s.ShapeUtil.flattenShape(t.dims,e),r=new a.Tensor(n,t.type),i=t.numberData;return r.numberData.set(i),r}e.CpuFlatten=c,e.flatten=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.gather=e.CpuGather=void 0;var o=n(33),a=n(1),s=n(0),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[l(e[0],e[1],this.axis)]},e}(o.Gather);function l(t,e,n){n=s.ShapeUtil.normalizeAxis(n,t.dims.length);var r=t.dims.slice(),i=r.slice(),o=e.data;i[n]=o.length;for(var c=s.ShapeUtil.computeStrides(r),l=s.ShapeUtil.computeStrides(i),u=new a.Tensor(i,t.type).numberData,h=t.data,d=0;d<u.length;++d){var p=s.ShapeUtil.offsetToIndices(d,l),f=p.slice(),m=o[p[n]];f[n]=m<0?m+r[n]:m;var g=s.ShapeUtil.indicesToOffset(f,c);u[d]=h[g]}var y=r.slice(0,n).concat(e.dims).concat(r.slice(n+1));return new a.Tensor(y,t.type,void 0,void 0,u)}e.CpuGather=c,e.gather=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&o(e,t,n);return a(e,t),e},c=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.gemm=e.CpuGemm=void 0;var l=n(19),u=n(1),h=s(n(0)),d=n(17),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[f(e[0],e[1],this.alpha,this.beta,this.transA,this.transB,3===e.length?e[2]:void 0)]},e}(l.Gemm);function f(t,e,n,r,i,o,a){var s=c(h.GemmUtil.getShapeOfGemmResult(t.dims,i,e.dims,o,null==a?void 0:a.dims),3),l=s[0],p=s[1],f=s[2],m=new u.Tensor([l,p],t.type);if(a&&h.BroadcastUtil.calc(m,a,(function(t,e){return e}),!0)!==m)throw new Error("tensor C is not broadcastable to [M,N]");return d.matMul2d(t.floatData,e.floatData,m.floatData,i,o,n,r,l,p,f),m}e.CpuGemm=p,e.gemm=f},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.imageScaler=e.CpuImageScaler=void 0;var a=n(34),s=n(1),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[l(e[0],this.bias,this.scale)]},e}(a.ImageScaler);function l(t,e,n){for(var r=o(t.dims,4),i=r[0],a=r[1],c=r[2],l=r[3],u=new s.Tensor([i,a,c,l],t.type),h=t.floatData,d=u.floatData,p=0;p<i*a;p++)for(var f=0;f<c*l;f++){var m=p*c*l+f;d[m]=h[m]*n+e[p%a]}return u}e.CpuImageScaler=c,e.imageScaler=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.instanceNormalization=e.CpuInstanceNormalization=void 0;var o=n(20),a=n(1),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[c(e[0],e[1],e[2],this.epsilon)]},e}(o.InstanceNormalization);function c(t,e,n,r){for(var i=t.dims,o=i[0],s=i[1],c=1,l=2;l<i.length;l++)c*=i[l];for(var u,h,d,p,f,m,g=new a.Tensor(t.dims,t.type),y=t.floatData,v=g.floatData,b=e.numberData,x=n.numberData,_=0;_<o*s;_++){for(f=(p=_*c)+c,m=_%s,u=0,l=p;l<f;++l)u+=y[l];for(h=u/c,u=0,l=p;l<f;++l)u+=Math.pow(y[l]-h,2);for(d=u/c,l=p;l<f;++l)v[l]=b[m]*((y[l]-h)/Math.sqrt(d+r))+x[m]}return g}e.CpuInstanceNormalization=s,e.instanceNormalization=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&o(e,t,n);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.lrn=e.CpuLrn=void 0;var c=n(88),l=n(1),u=s(n(0)),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[d(e[0],this.alpha,this.beta,this.bias,this.size)]},e}(c.Lrn);function d(t,e,n,r,i){for(var o=t.dims[0],a=t.dims[1],s=t.floatData,c=1,h=2;h<t.dims.length;++h)c*=t.dims[h];var d=c*a,p=new l.Tensor(t.dims,t.type),f=new Array(u.ShapeUtil.size(t.dims));for(h=0;h<f.length;++h)f[h]=r;for(var m=new Float64Array((a+i-1)*c),g=e/i,y=(i-1)/2,v=0;v<o;++v){u.MathUtil.sqr(m,s,y*c,d*v,d);for(var b=0;b<i;++b)u.MathUtil.axpy(f,m,d*v,b*c,c,g);for(b=1;b<a;++b){var x=v*d+b*c;u.arrayCopyHelper(f,f,x,x-c,c),u.MathUtil.axpy(f,m,x,(b+i-1)*c,c,g),u.MathUtil.axpy(f,m,x,(b-1)*c,c,-g)}}return u.MathUtil.powx(f,f,0,0,u.ShapeUtil.size(t.dims),-n),u.MathUtil.mul(f,s,0,0,u.ShapeUtil.size(t.dims)),p.floatData.set(f),p}e.CpuLrn=h,e.lrn=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lrn=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){this.alpha=t.getFloat("alpha",1e-4),this.beta=t.getFloat("beta",.75),this.bias=t.getFloat("bias",1),this.size=t.getInt("size")},t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&!(t[0].dims.length<3)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"float32"===t[0].type||"float64"===t[0].type},t}();e.Lrn=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.pad=e.CpuPad=void 0;var s=n(35),c=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[u(e[0],this.mode,this.value,this.pads)]},e}(s.Pad);function u(t,e,n,r){var i=t.dims,o=function(t,e){var n=Array(t.length);Object.assign(n,t);for(var r=0;r<t.length;r++)n[r]+=e[r]+e[r+n.length];return n}(i,r),a=new c.Tensor(o,t.type);switch(e){case"constant":for(var s=0;s<o.reduce((function(t,e){return t*e}),1);s++){var l=p(s,o);a.set(l,n)}for(s=0;s<i.reduce((function(t,e){return t*e}),1);s++)l=p(s,i),a.set(l.map((function(t,e){return t+r[e]})),t.get(l));break;case"reflect":for(s=0;s<o.reduce((function(t,e){return t*e}),1);s++)l=p(s,o),a.set(l,t.get(l.map((function(t,e){return h(t,r[e],i[e])}))));break;case"edge":for(s=0;s<o.reduce((function(t,e){return t*e}),1);s++)l=p(s,o),a.set(l,t.get(l.map((function(t,e){return d(t,r[e],i[e])}))));break;default:throw Error("Illegal pad mode.")}return a}function h(t,e,n){if(t<e){var r=(e-t-1)%(n-1);return 1===Math.floor((e-t-1)/(n-1))%2?n-r-2:r+1}return t<e+n?t-e:(r=(t-(e+n))%(n-1),0===Math.floor((t-(e+n))/(n-1))%2?n-r-2:r+1)}function d(t,e,n){return t<e?0:t<e+n?t-e:n-1}function p(t,e){if(t<0||e.some((function(t){return t<0})))throw Error("Array index out of range");var n=a(e);return n.reverse(),n.map((function(e,n,r){return Math.floor(t/function(t){return t.reduce((function(t,e){return t*e}),1)}(r.slice(0,n)))%e})).reverse()}e.CpuPad=l,e.pad=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.pool=e.globalMaxPool=e.maxPool=e.globalAveragePool=e.averagePool=e.CpuGlobalMaxPool=e.CpuMaxPool=e.CpuGlobalAveragePool=e.CpuAveragePool=void 0;var o=n(21),a=n(1),s=n(0),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[d(e[0],this.autoPad,this.countIncludePad,this.kernelShape,this.pads,this.strides)]},e}(o.AveragePool);e.CpuAveragePool=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[p(e[0])]},e}(o.GlobalAveragePool);e.CpuGlobalAveragePool=l;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[f(e[0],this.autoPad,this.kernelShape,this.pads,this.strides)]},e}(o.MaxPool);e.CpuMaxPool=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[m(e[0])]},e}(o.GlobalMaxPool);function d(t,e,n,r,i,o){return g(!1,t,e,n,r,i,o,0,(function(t,e){return t+e}),(function(t,e){return t/e}))}function p(t){return g(!0,t,"NOTSET",!1,[],[],[],0,(function(t,e){return t+e}),(function(t,e){return t/e}))}function f(t,e,n,r,i){return g(!1,t,e,!1,n,r,i,Number.MIN_SAFE_INTEGER,(function(t,e){return Math.max(t,e)}),(function(t,e){return t}))}function m(t){return g(!0,t,"NOTSET",!1,[],[],[],Number.MIN_SAFE_INTEGER,(function(t,e){return Math.max(t,e)}),(function(t,e){return t}))}function g(t,e,n,r,i,o,c,l,u,h){s.PoolConvUtil.adjustPoolAttributes(t,e.dims,i,c,o);for(var d=s.PoolConvUtil.computePoolOutputShape(t,e.dims,c,i,o,n),p=s.ShapeUtil.size(i),f=s.ShapeUtil.computeStrides(i),m=f.length,g=d.length,y=s.ShapeUtil.size(d),v=new a.Tensor(d,e.type),b=s.ShapeUtil.computeStrides(d),x=0;x<y;x++){for(var _=s.ShapeUtil.offsetToIndices(x,b),w=_.slice(0),S=_.slice(0),T=0;T<m;T++)w[g-m+T]=_[g-m+T]*c[T];var E=l,A=0,M=!1;for(T=0;T<p;T++){var O=s.ShapeUtil.offsetToIndices(T,f);M=!1;for(var C=g-m;C<g;C++)if(S[C]=w[C]+O[C-g+m]-o[C-2],S[C]>=e.dims[C]||S[C]<0){A++,M=!0;break}E=M?E:u(E,e.get(S))}E=h(E,r?p:p-A),v.set(_,E)}return v}e.CpuGlobalMaxPool=h,e.averagePool=d,e.globalAveragePool=p,e.maxPool=f,e.globalMaxPool=m,e.pool=g},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.reduceProd=e.reduceMean=e.reduceMin=e.reduceMax=e.reduceLogSum=e.reduceSumSquare=e.reduceSum=e.CpuReduceProd=e.CpuReduceMean=e.CpuReduceMin=e.CpuReduceMax=e.CpuReduceLogSum=e.CpuReduceSumSquare=e.CpuReduceSum=void 0;var o=n(36),a=n(0),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[f(e[0],a.ShapeUtil.normalizeAxes(this.axes,e[0].dims.length),this.keepDims)]},e}(o.ReduceBase);e.CpuReduceSum=s;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[m(e[0],a.ShapeUtil.normalizeAxes(this.axes,e[0].dims.length),this.keepDims)]},e}(o.ReduceBase);e.CpuReduceSumSquare=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[g(e[0],a.ShapeUtil.normalizeAxes(this.axes,e[0].dims.length),this.keepDims)]},e}(o.ReduceBase);e.CpuReduceLogSum=l;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[y(e[0],a.ShapeUtil.normalizeAxes(this.axes,e[0].dims.length),this.keepDims)]},e}(o.ReduceBase);e.CpuReduceMax=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[v(e[0],a.ShapeUtil.normalizeAxes(this.axes,e[0].dims.length),this.keepDims)]},e}(o.ReduceBase);e.CpuReduceMin=h;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[b(e[0],a.ShapeUtil.normalizeAxes(this.axes,e[0].dims.length),this.keepDims)]},e}(o.ReduceBase);e.CpuReduceMean=d;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[x(e[0],a.ShapeUtil.normalizeAxes(this.axes,e[0].dims.length),this.keepDims)]},e}(o.ReduceBase);function f(t,e,n){return a.ReduceUtil.calcReduce(t,e,n,(function(t){return t}),(function(t,e){return t+e}))}function m(t,e,n){return a.ReduceUtil.calcReduce(t,e,n,(function(t){return t*t}),(function(t,e){return t+e}))}function g(t,e,n){for(var r=a.ReduceUtil.calcReduce(t,e,n,(function(t){return t}),(function(t,e){return t+e})),i=r.floatData.length,o=0;o<i;o++)r.floatData[o]=Math.log(r.floatData[o]);return r}function y(t,e,n){return a.ReduceUtil.calcReduce(t,e,n,(function(t){return t}),(function(t,e){return Math.max(t,e)}))}function v(t,e,n){return a.ReduceUtil.calcReduce(t,e,n,(function(t){return t}),(function(t,e){return Math.min(t,e)}))}function b(t,e,n){for(var r=a.ReduceUtil.calcReduce(t,e,n,(function(t){return t}),(function(t,e){return t+e})),i=a.ReduceUtil.calcReduceShape(t.dims,e,n),o=a.ShapeUtil.size(t.dims)/a.ShapeUtil.size(i),s=r.floatData.length,c=0;c<s;c++)r.floatData[c]=r.floatData[c]/o;return r}function x(t,e,n){return a.ReduceUtil.calcReduce(t,e,n,(function(t){return t}),(function(t,e){return t*e}))}e.CpuReduceProd=p,e.reduceSum=f,e.reduceSumSquare=m,e.reduceLogSum=g,e.reduceMax=y,e.reduceMin=v,e.reduceMean=b,e.reduceProd=x},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=e.CpuReshape=void 0;var o=n(37),a=n(1),s=n(0),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[l(e[0],e[1])]},e}(o.Reshape);function l(t,e){var n=s.ShapeUtil.calculateReshapedDims(t.dims,e.integerData),r=new a.Tensor(n,t.type);return r.floatData.set(t.floatData),r}e.CpuReshape=c,e.reshape=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.slice=e.CpuSliceV10=e.CpuSlice=void 0;var o=n(38),a=n(1),s=n(0),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[u(e[0],this.starts,this.ends,this.axes)]},e}(o.Slice);e.CpuSlice=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){if(e.length>=5&&e[4].integerData.some((function(t){return 1!==t})))throw new Error("currently non-1 steps is not supported for Slice");var n=Array.from(e[1].integerData),r=Array.from(e[2].integerData),i=e.length>=4?Array.from(e[3].integerData):[];return[u(e[0],n,r,i)]},e}(o.SliceV10);function u(t,e,n,r){0===r.length&&(r=t.dims.map((function(t,e){return e}))),r=s.ShapeUtil.normalizeAxes(r,t.dims.length),e=e.map((function(e,n){return e>t.dims[r[n]]-1?t.dims[r[n]]:s.ShapeUtil.normalizeAxis(e,t.dims[r[n]])})),n=n.map((function(e,n){return e>t.dims[r[n]]-1?t.dims[r[n]]:s.ShapeUtil.normalizeAxis(e,t.dims[r[n]])}));var i=[],o=[];r.forEach((function(t,r){i[t]=n[r]-e[r],o[t]=e[r]}));for(var c=0;c<t.dims.length;c++)i[c]=i[c]||t.dims[c],o[c]=o[c]||0;var l=s.ShapeUtil.computeStrides(i),u=s.ShapeUtil.computeStrides(t.dims?t.dims:[t.data.length]),h=t.data,d=new a.Tensor(i,t.type),p=d.data;for(c=0;c<p.length;++c){var f=s.ShapeUtil.offsetToIndices(c,l).map((function(t,e){return t+o[e]})),m=s.ShapeUtil.indicesToOffset(f,u);p[c]=h[m]}return d}e.CpuSliceV10=l,e.slice=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&o(e,t,n);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.softmax=e.CpuSoftmax=void 0;var c=n(22),l=n(1),u=s(n(0)),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[d(e[0],this.axis)]},e}(c.Softmax);function d(t,e){var n=t.dims,r=n.length;e=u.ShapeUtil.normalizeAxis(e,r);for(var i=u.ShapeUtil.sizeToDimension(n,e),o=u.ShapeUtil.sizeFromDimension(n,e),a=t.numberData,s=new l.Tensor(t.dims,t.type),c=s.numberData,h=0;h<i;h++){for(var d=h*o,p=Number.MIN_VALUE,f=0;f<o;f++)a[d+f]>p&&(p=a[d+f]);var m=0;for(f=0;f<o;f++){var g=a[d+f]-p;c[d+f]=Math.exp(g),m+=Math.exp(g)}for(f=0;f<o;f++)0===m?c[d+f]=0:c[d+f]/=m}return s}e.CpuSoftmax=h,e.softmax=d},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.squeeze=e.CpuSqueeze=void 0;var o=n(39),a=n(1),s=n(0),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[l(e[0],this.axes)]},e}(o.Squeeze);function l(t,e){var n=s.ShapeUtil.squeezeShape(t.dims,e),r=new a.Tensor(n,t.type),i=t.numberData;return r.numberData.set(i),r}e.CpuSqueeze=c,e.squeeze=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.sum=e.CpuSum=void 0;var o=n(23),a=n(1),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[c(e)]},e}(o.Sum);function c(t){for(var e=new a.Tensor(t[0].dims,t[0].type),n=t[0].floatData.length,r=e.floatData,i=0;i<t.length;i++)for(var o=t[i].floatData,s=0;s<n;++s)r[s]+=o[s];return e}e.CpuSum=s,e.sum=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.tile=e.CpuTile=void 0;var o=n(40),a=n(1),s=n(0),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[l(e[0],e[1])]},e}(o.Tile);function l(t,e){for(var n=t.dims?t.dims:[t.data.length],r=n.length,i=new Array(r),o=0;o<r;o++)i[o]=n[o]*e.numberData[o];var c=s.ShapeUtil.computeStrides(n),l=s.ShapeUtil.computeStrides(i),u=new a.Tensor(i,t.type),h=u.numberData,d=t.data;for(o=0;o<h.length;++o){for(var p=s.ShapeUtil.offsetToIndices(o,l),f=new Array(r),m=0;m<r;++m)f[m]=p[m]%t.dims[m];var g=s.ShapeUtil.indicesToOffset(f,c);h[o]=d[g]}return u}e.CpuTile=c,e.tile=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.transpose=e.CpuTranspose=void 0;var o=n(41),a=n(1),s=n(0),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[l(e[0],this.perm)]},e}(o.Transpose);function l(t,e){var n=t.dims,r=n.length,i=new Array(r);if(e.length===r)i=e;else for(var o=0;o<r;o++)i[o]=r-o-1;var c=new Array(r),l=new Array(r);for(o=0;o<r;o++){var u=i[o];c[o]=n[u],l[o]=u+1<r?s.ShapeUtil.sizeFromDimension(n,u+1):1}var h,d,p,f=new a.Tensor(c,t.type),m=t.floatData,g=f.floatData,y=0,v=1,b=1,x=!0;for(o=r-1;o>=0;--o){var _=i[o];x&&_===o?v*=n[_]:(x=!1,b*=n[_],++y)}return 1===b?(h=v,d=g,p=m,s.arrayCopyHelper(d,p,0,0,h)):1===v?function(t,e,n,r,i,o){for(var a=new Array(t).fill(0),c=0,l=0;l<n;++l){var u=s.ShapeUtil.indicesToOffset(a,r,t);i[c++]=o[u],s.ShapeUtil.incrementIndex(a,e,t)}}(y,c,b,l,g,m):function(t,e,n,r,i,o,a){for(var c=new Array(t).fill(0),l=0,u=0;u<n;++u){var h=s.ShapeUtil.indicesToOffset(c,i,t);s.arrayCopyHelper(o,a,l,0+h,r),s.ShapeUtil.incrementIndex(c,e,t),l+=r}}(y,c,b,v,l,g,m),f}e.CpuTranspose=c,e.transpose=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.unsqueeze=e.CpuUnsqueeze=void 0;var o=n(44),a=n(1),s=n(0),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return[l(e[0],this.axes)]},e}(o.Unsqueeze);function l(t,e){var n=s.ShapeUtil.unsqueezeShape(t.dims,e),r=new a.Tensor(n,t.type),i=t.numberData;return r.numberData.set(i),r}e.CpuUnsqueeze=c,e.unsqueeze=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CpuUpsample=void 0;var o=n(45),a=n(1),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){var n=this,r=e[0].dims,i=r.map((function(t,e){return Math.floor(t*n.scales[e])})),o=new a.Tensor(i,e[0].type);return"nearest"===this.mode?function(t,e,n,r,i){var o=n.length,a=new Array(o);a.fill(0);var s=new Array(o);s[o-1]=1;for(var l=o-2;l>=0;l--)s[l]=s[l+1]*n[l+1];var u=new Array(o);u.fill(0),u[o-1]=-1;for(var h=0,d=0;h<e.length;h++){for(var p=o-1;p>=0;p--){if(++u[p]<r[p]){var f=0,m=c(u[p],i[p]);f=Math.floor(m),(f=Math.max(0,Math.min(f,n[p]-1)))!==a[p]&&(d+=(f-a[p])*s[p],a[p]=f);break}u[p]=0,d+=(0-a[p])*s[p],a[p]=0}e[h]=t[d]}}(e[0].data,o.data,r,i,this.scales):function(t,e,n,r,i){var o=2===n.length;!function(t,e,n,r,i,o,a,s,l,u){for(var h=[],d=[],p=new Array(a),f=new Array(a),m=new Array(s),g=new Array(s),y=new Array(a),v=new Array(a),b=new Array(s),x=new Array(s),_=0;_<a;++_){var w=c(_,l);h.push(w),w=Math.max(0,Math.min(w,i-1));var S=Math.min(Math.floor(w),i-1),T=Math.min(S+1,i-1);S===T?(y[_]=.5,v[_]=.5):(y[_]=Math.abs(w-S),v[_]=Math.abs(w-T)),p[_]=o*S,f[_]=o*T}for(var E=0;E<s;++E){var A=c(E,u);d.push(A),A=Math.max(0,Math.min(A,o-1)),m[E]=Math.min(Math.floor(A),o-1),g[E]=Math.min(m[E]+1,o-1),m[E]===g[E]?(b[E]=.5,x[E]=.5):(b[E]=Math.abs(A-m[E]),x[E]=Math.abs(A-g[E]))}for(var M=0,O=0,C=0;C<n;++C)for(var k=0;k<r;++k){for(_=0;_<a;++_)for(E=0;E<s;++E){var P=t[M+p[_]+m[E]],I=t[M+p[_]+g[E]],N=t[M+f[_]+m[E]],R=t[M+f[_]+g[E]];e[O+s*_+E]=x[E]*v[_]*P+b[E]*v[_]*I+x[E]*y[_]*N+b[E]*y[_]*R}M+=i*o,O+=s*a}}(t,e,o?1:n[0],o?1:n[1],o?n[0]:n[2],o?n[1]:n[3],o?r[0]:r[2],o?r[1]:r[3],o?i[0]:i[2],o?i[1]:i[3])}(e[0].data,o.data,r,i,this.scales),[o]},e}(o.Upsample);function c(t,e){return t/e}e.CpuUpsample=s},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.WasmBackend=e.bindingInitPromise=void 0;var c=o(n(46)),l=n(3),u=o(n(4)),h=n(106),d=function(){function t(){this.cpuFallback=!0,this.worker=function(){if("undefined"!=typeof navigator&&navigator){if("number"==typeof navigator.hardwareConcurrency)return Math.max(Math.ceil(navigator.hardwareConcurrency/2)-1,0);if("Safari"===c.name&&c.os&&("iOS"===c.os.family||"OS X"===c.os.family))return 1}return 0}(),this.initTimeout=5e3}return t.prototype.initialize=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return function(t){if(!Number.isFinite(t)||Number.isNaN(t))throw new Error(t+" is not valid number of workers");if(!Number.isInteger(t))throw new Error(t+" is not an integer and hence not valid number of workers")}(this.worker),[4,this.isWasmSupported()];case 1:return t.sent()?[2,!0]:[2,!1]}}))}))},t.prototype.createSessionHandler=function(t){return new h.WasmSessionHandler(this,t,this.cpuFallback)},t.prototype.dispose=function(){},t.prototype.isWasmSupported=function(){return a(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,u.init(this.worker,this.initTimeout)];case 1:return e.sent(),[2,!0];case 2:return t=e.sent(),l.Logger.warning("WebAssembly","Unable to initialize WebAssembly backend. "+t),[2,!1];case 3:return[2]}}))}))},t}();e.WasmBackend=d},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.WasmBinding=e.init=void 0;var i=!1,o=!1;e.init=function(){if(i)return Promise.resolve();if(o)throw new Error("multiple calls to 'init()' detected.");return o=!0,new Promise((function(t,e){(r=n(104))(r).then((function(){t(),o=!1,i=!0}),(function(t){o=!1,e(t)}))}))};var a=function(){function t(){this.ptr8=0,this.numBytesAllocated=0}return t.prototype.ccall=function(n){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];if(!i)throw new Error("wasm not initialized. please ensure 'init()' is called.");var s=e.now(),c=[],l=t.calculateOffsets(c,o);l>this.numBytesAllocated&&this.expandMemory(l),t.ccallSerialize(r.HEAPU8.subarray(this.ptr8,this.ptr8+l),c,o);var u=e.now();this.func(n,this.ptr8);var h=e.now();return t.ccallDeserialize(r.HEAPU8.subarray(this.ptr8,this.ptr8+l),c,o),{startTime:s,endTime:e.now(),startTimeFunc:u,endTimeFunc:h}},t.prototype.ccallRaw=function(t,n){if(!i)throw new Error("wasm not initialized. please ensure 'init()' is called.");var o=e.now(),a=n.byteLength;a>this.numBytesAllocated&&this.expandMemory(a),r.HEAPU8.subarray(this.ptr8,this.ptr8+a).set(n);var s=e.now();this.func(t,this.ptr8);var c=e.now();return n.set(r.HEAPU8.subarray(this.ptr8,this.ptr8+a)),{startTime:o,endTime:e.now(),startTimeFunc:s,endTimeFunc:c}},t.prototype.func=function(t,e){(0,r[t])(e)},t.calculateOffsets=function(t,e){for(var n=4+4*e.length,r=0;r<e.length;r++){var i=e[r],o=i[0],a=i[1],s=i[2],c=0;switch(a){case"bool":case"int32":case"float32":c=4;break;case"float64":c=8;break;case"boolptr":if(!o){t.push(0);continue}if(!Array.isArray(o)&&!ArrayBuffer.isView(o))throw new Error("boolptr requires boolean array or Uint8Array");c=4*Math.ceil(o.length/4);break;case"int32ptr":case"float32ptr":if(!o){t.push(0);continue}if(Array.isArray(o)){if("inout"===s||"out"===s)throw new TypeError("inout/out parameters must be ArrayBufferView for ptr types.");c=4*o.length}else{if(!ArrayBuffer.isView(o))throw new TypeError("unsupported data type in 'ccall()'");c=o.byteLength}break;default:throw new Error("not supported parameter type: "+a)}t.push(n),n+=c}return n},t.ccallSerialize=function(t,e,n){var r=new Int32Array(t.buffer,t.byteOffset),i=new Uint32Array(t.buffer,t.byteOffset),o=new Float32Array(t.buffer,t.byteOffset);i[0]=n.length;for(var a=0;a<n.length;a++){var s=n[a],c=s[0],l=s[1],u=s[2],h=e[a],d=h>>2;if(i[a+1]=h,"out"!==u&&0!==h)switch(l){case"bool":t[h]=!0===c?1:0;break;case"int32":r[d]=c;break;case"float32":o[d]=c;break;case"boolptr":var p=c;t.subarray(h,h+p.length).set(c);break;case"int32ptr":var f=c;r.subarray(d,d+f.length).set(f);break;case"float32ptr":var m=c;o.subarray(d,d+m.length).set(m);break;default:throw new Error("not supported parameter type: "+l)}}},t.ccallDeserialize=function(t,e,n){for(var r=new Float32Array(t.buffer,t.byteOffset),i=new Uint8Array(t.buffer,t.byteOffset),o=0;o<n.length;o++){var a=n[o],s=a[0],c=a[1],l=a[2],u=e[o],h=u>>2;if("out"===l||"inout"===l)switch(c){case"float32ptr":var d=s;d.set(r.subarray(h,h+d.length));break;case"boolptr":var p=s;p.set(i.subarray(u,u+p.length));break;default:throw new Error("not supported parameter type: "+c)}}},t.prototype.expandMemory=function(t){if(0!==this.ptr8&&r._free(this.ptr8),this.numBytesAllocated=2*t,this.ptr8=r._malloc(this.numBytesAllocated),0===this.ptr8)throw new Error("Unable to allocate requested amount of memory. Failing.")},t.prototype.dispose=function(){if(!i)throw new Error("wasm not initialized. please ensure 'init()' is called.");0!==this.ptr8&&r._free(this.ptr8)},t}();e.WasmBinding=a,e.now="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now},function(t,e,n){(function(e,r,i){var o,a=(o=(o="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||e,function(t){t=void 0!==(t=t||{})?t:{};var e,a={};for(e in t)t.hasOwnProperty(e)&&(a[e]=t[e]);var s,c,l=[],u=!1,h=!1;u="object"==typeof window,h="function"==typeof importScripts,s="object"==typeof r&&"object"==typeof r.versions&&"string"==typeof r.versions.node,c=!u&&!s&&!h;var d,p,f,m,g="";s?(g=h?n(47).dirname(g)+"/":i+"/",d=function(t,e){return f||(f=n(48)),m||(m=n(47)),t=m.normalize(t),f.readFileSync(t,e?null:"utf8")},p=function(t){var e=d(t,!0);return e.buffer||(e=new Uint8Array(e)),S(e.buffer),e},r.argv.length>1&&r.argv[1].replace(/\\/g,"/"),l=r.argv.slice(2),r.on("uncaughtException",(function(t){if(!(t instanceof it))throw t})),r.on("unhandledRejection",G),t.inspect=function(){return"[Emscripten Module object]"}):c?("undefined"!=typeof read&&(d=function(t){return read(t)}),p=function(t){var e;return"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(S("object"==typeof(e=read(t,"binary"))),e)},"undefined"!=typeof scriptArgs?l=scriptArgs:void 0!==arguments&&(l=arguments),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(u||h)&&(h?g=self.location.href:document.currentScript&&(g=document.currentScript.src),o&&(g=o),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):"",d=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},h&&(p=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}));var y,v,b=t.print||console.log.bind(console),x=t.printErr||console.warn.bind(console);for(e in a)a.hasOwnProperty(e)&&(t[e]=a[e]);a=null,t.arguments&&(l=t.arguments),t.thisProgram&&t.thisProgram,t.quit&&t.quit,t.wasmBinary&&(y=t.wasmBinary),t.noExitRuntime&&t.noExitRuntime,"object"!=typeof WebAssembly&&x("no native wasm support detected");var _=new WebAssembly.Table({initial:31,maximum:31,element:"anyfunc"}),w=!1;function S(t,e){t||G("Assertion failed: "+e)}var T,E,A,M="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function O(t,e,n){for(var r=e+n,i=e;t[i]&&!(i>=r);)++i;if(i-e>16&&t.subarray&&M)return M.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var s=63&t[e++];if(192!=(224&a)){var c=63&t[e++];if((a=224==(240&a)?(15&a)<<12|s<<6|c:(7&a)<<18|s<<12|c<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var l=a-65536;o+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}function C(t,e){return t?O(E,t,e):""}function k(t,e){return t%e>0&&(t+=e-t%e),t}function P(e){T=e,t.HEAP8=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=A=new Int32Array(e),t.HEAPU8=E=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var I=t.INITIAL_MEMORY||16777216;function N(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?t.dynCall_v(r):t.dynCall_vi(r,n.arg):r(void 0===n.arg?null:n.arg)}else n()}}(v=t.wasmMemory?t.wasmMemory:new WebAssembly.Memory({initial:I/65536}))&&(T=v.buffer),I=T.byteLength,P(T),A[1440]=5248800;var R=[],D=[],L=[],F=[];function j(t){R.unshift(t)}function U(t){F.unshift(t)}Math.abs,Math.ceil,Math.floor,Math.min;var B=0,z=null,V=null;function G(e){throw t.onAbort&&t.onAbort(e),b(e+=""),x(e),w=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}t.preloadedImages={},t.preloadedAudios={};var W="data:application/octet-stream;base64,";function H(t){return String.prototype.startsWith?t.startsWith(W):0===t.indexOf(W)}var q="onnx-wasm.wasm";function X(){try{if(y)return new Uint8Array(y);if(p)return p(q);throw"both async and sync fetching of the wasm failed"}catch(t){G(t)}}H(q)||(q=function(e){return t.locateFile?t.locateFile(e,g):g+e}(q)),D.push({func:function(){et()}});var Y={};function K(){return K.uncaught_exceptions>0}function Z(t){try{return v.grow(t-T.byteLength+65535>>16),P(v.buffer),1}catch(t){}}var J={mappings:{},buffers:[null,[],[]],printChar:function(t,e){var n=J.buffers[t];0===e||10===e?((1===t?b:x)(O(n,0)),n.length=0):n.push(e)},varargs:void 0,get:function(){return J.varargs+=4,A[J.varargs-4>>2]},getStr:function(t){return C(t)},get64:function(t,e){return t}};[].push((function(){void 0!==rt&&rt(0);var t=J.buffers;t[1].length&&J.printChar(1,10),t[2].length&&J.printChar(2,10)}));var $={__assert_fail:function(t,e,n,r){G("Assertion failed: "+C(t)+", at: "+[e?C(e):"unknown filename",n,r?C(r):"unknown function"])},__cxa_allocate_exception:function(t){return nt(t)},__cxa_throw:function(t,e,n){throw Y[t]={ptr:t,adjusted:[t],type:e,destructor:n,refcount:0,caught:!1,rethrown:!1},"uncaught_exception"in K?K.uncaught_exceptions++:K.uncaught_exceptions=1,t},abort:function(){G()},emscripten_get_sbrk_ptr:function(){return 5760},emscripten_memcpy_big:function(t,e,n){E.copyWithin(t,e,e+n)},emscripten_resize_heap:function(t){var e=E.length;if(t>2147418112)return!1;for(var n=1;n<=4;n*=2){var r=e*(1+.2/n);if(r=Math.min(r,t+100663296),Z(Math.min(2147418112,k(Math.max(16777216,t,r),65536))))return!0}return!1},fd_close:function(t){return 0},fd_seek:function(t,e,n,r,i){},fd_write:function(t,e,n,r){for(var i=0,o=0;o<n;o++){for(var a=A[e+8*o>>2],s=A[e+(8*o+4)>>2],c=0;c<s;c++)J.printChar(t,E[a+c]);i+=s}return A[r>>2]=i,0},memory:v,setTempRet0:function(t){},table:_},Q=function(){var e={env:$,wasi_snapshot_preview1:$};function n(e,n){var r=e.exports;t.asm=r,function(e){if(B--,t.monitorRunDependencies&&t.monitorRunDependencies(B),0==B&&(null!==z&&(clearInterval(z),z=null),V)){var n=V;V=null,n()}}()}function r(t){n(t.instance)}function i(t){return(y||!u&&!h||"function"!=typeof fetch?new Promise((function(t,e){t(X())})):fetch(q,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+q+"'";return t.arrayBuffer()})).catch((function(){return X()}))).then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),G(t)}))}if(B++,t.monitorRunDependencies&&t.monitorRunDependencies(B),t.instantiateWasm)try{return t.instantiateWasm(e,n)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}return function(){if(y||"function"!=typeof WebAssembly.instantiateStreaming||H(q)||"function"!=typeof fetch)return i(r);fetch(q,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(t){x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),i(r)}))}))}(),{}}();t.asm=Q;var tt,et=t.___wasm_call_ctors=function(){return(et=t.___wasm_call_ctors=t.asm.__wasm_call_ctors).apply(null,arguments)},nt=(t._batch_normalization_f32=function(){return(t._batch_normalization_f32=t.asm.batch_normalization_f32).apply(null,arguments)},t._add_f32=function(){return(t._add_f32=t.asm.add_f32).apply(null,arguments)},t._sub_f32=function(){return(t._sub_f32=t.asm.sub_f32).apply(null,arguments)},t._mul_f32=function(){return(t._mul_f32=t.asm.mul_f32).apply(null,arguments)},t._div_f32=function(){return(t._div_f32=t.asm.div_f32).apply(null,arguments)},t._prelu_f32=function(){return(t._prelu_f32=t.asm.prelu_f32).apply(null,arguments)},t._xor_u8=function(){return(t._xor_u8=t.asm.xor_u8).apply(null,arguments)},t._or_u8=function(){return(t._or_u8=t.asm.or_u8).apply(null,arguments)},t._and_u8=function(){return(t._and_u8=t.asm.and_u8).apply(null,arguments)},t._clip_f32=function(){return(t._clip_f32=t.asm.clip_f32).apply(null,arguments)},t._conv_f32=function(){return(t._conv_f32=t.asm.conv_f32).apply(null,arguments)},t._gemm_f32=function(){return(t._gemm_f32=t.asm.gemm_f32).apply(null,arguments)},t._free=function(){return(t._free=t.asm.free).apply(null,arguments)},t._malloc=function(){return(nt=t._malloc=t.asm.malloc).apply(null,arguments)}),rt=(t._instance_normalization_f32=function(){return(t._instance_normalization_f32=t.asm.instance_normalization_f32).apply(null,arguments)},t._matmul_f32=function(){return(t._matmul_f32=t.asm.matmul_f32).apply(null,arguments)},t._average_pool_f32=function(){return(t._average_pool_f32=t.asm.average_pool_f32).apply(null,arguments)},t._max_pool_f32=function(){return(t._max_pool_f32=t.asm.max_pool_f32).apply(null,arguments)},t._softmax_f32=function(){return(t._softmax_f32=t.asm.softmax_f32).apply(null,arguments)},t._sum_f32=function(){return(t._sum_f32=t.asm.sum_f32).apply(null,arguments)},t.___errno_location=function(){return(t.___errno_location=t.asm.__errno_location).apply(null,arguments)},t._fflush=function(){return(rt=t._fflush=t.asm.fflush).apply(null,arguments)});function it(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function ot(e){function n(){tt||(tt=!0,t.calledRun=!0,w||(N(D),N(L),t.onRuntimeInitialized&&t.onRuntimeInitialized(),function(){if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)U(t.postRun.shift());N(F)}()))}e=e||l,B>0||(function(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)j(t.preRun.shift());N(R)}(),B>0||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),n()}),1)):n()))}if(t._setThrew=function(){return(t._setThrew=t.asm.setThrew).apply(null,arguments)},t.stackSave=function(){return(t.stackSave=t.asm.stackSave).apply(null,arguments)},t.stackAlloc=function(){return(t.stackAlloc=t.asm.stackAlloc).apply(null,arguments)},t.stackRestore=function(){return(t.stackRestore=t.asm.stackRestore).apply(null,arguments)},t.__growWasmMemory=function(){return(t.__growWasmMemory=t.asm.__growWasmMemory).apply(null,arguments)},t.dynCall_ii=function(){return(t.dynCall_ii=t.asm.dynCall_ii).apply(null,arguments)},t.dynCall_iiii=function(){return(t.dynCall_iiii=t.asm.dynCall_iiii).apply(null,arguments)},t.dynCall_jiji=function(){return(t.dynCall_jiji=t.asm.dynCall_jiji).apply(null,arguments)},t.dynCall_iidiiii=function(){return(t.dynCall_iidiiii=t.asm.dynCall_iidiiii).apply(null,arguments)},t.dynCall_vii=function(){return(t.dynCall_vii=t.asm.dynCall_vii).apply(null,arguments)},t.dynCall_vi=function(){return(t.dynCall_vi=t.asm.dynCall_vi).apply(null,arguments)},t.dynCall_viiiiii=function(){return(t.dynCall_viiiiii=t.asm.dynCall_viiiiii).apply(null,arguments)},t.dynCall_viiiii=function(){return(t.dynCall_viiiii=t.asm.dynCall_viiiii).apply(null,arguments)},t.dynCall_viiii=function(){return(t.dynCall_viiii=t.asm.dynCall_viiii).apply(null,arguments)},t.asm=Q,t.then=function(e){if(tt)e(t);else{var n=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){n&&n(),e(t)}}return t},V=function t(){tt||ot(),tt||(V=t)},t.run=ot,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return ot(),t});t.exports=a}).call(this,"/index.js",n(24),"/")},function(t,e,n){"use strict";n.r(e),e.default=function(){return new Worker(n.p+"onnx-worker.js")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WasmSessionHandler=void 0;var r=n(11),i=n(27),o=n(107),a=n(108),s=function(){function t(t,e,n){this.backend=t,this.context=e,this.opResolveRules=n?a.WASM_OP_RESOLVE_RULES.concat(i.CPU_OP_RESOLVE_RULES):a.WASM_OP_RESOLVE_RULES}return t.prototype.createInferenceHandler=function(){return new o.WasmInferenceHandler(this,this.context.profiler)},t.prototype.dispose=function(){},t.prototype.resolve=function(t,e){var n=r.resolveOperator(t,e,this.opResolveRules);return n.initialize(t.attributes),n},t}();e.WasmSessionHandler=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WasmInferenceHandler=void 0;var r=function(){function t(t,e){this.session=t,this.profiler=e}return t.prototype.dispose=function(){},t}();e.WasmInferenceHandler=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WASM_OP_RESOLVE_RULES=void 0;var r=n(109),i=n(110),o=n(111),a=n(112),s=n(113),c=n(114),l=n(115),u=n(116),h=n(117),d=n(118);e.WASM_OP_RESOLVE_RULES=[["Add","","7+",function(){return new i.WasmBinaryOp(["float32"],"Add")}],["And","","7+",function(){return new i.WasmBinaryOp(["bool"],"And")}],["AveragePool","","7-10",function(){return new u.WasmAveragePool}],["BatchNormalization","","7+",function(){return new r.WasmBatchNormalization}],["Clip","","6-10",function(){return new o.WasmClip}],["Conv","","1+",function(){return new a.WasmConv}],["Div","","7+",function(){return new i.WasmBinaryOp(["float32"],"Div")}],["Gemm","","7-10",function(){return new s.WasmGemm(!1)}],["Gemm","","11+",function(){return new s.WasmGemm(!0)}],["GlobalAveragePool","","1+",function(){return new u.WasmGlobalAveragePool}],["GlobalMaxPool","","1+",function(){return new u.WasmGlobalMaxPool}],["InstanceNormalization","","6+",function(){return new c.WasmInstanceNormalization}],["MatMul","","1+",function(){return new l.WasmMatMul}],["MaxPool","","1-9",function(){return new u.WasmMaxPool}],["Mul","","7+",function(){return new i.WasmBinaryOp(["float32"],"Mul")}],["Or","","7+",function(){return new i.WasmBinaryOp(["bool"],"Or")}],["PRelu","","7+",function(){return new i.WasmBinaryOp(["float32"],"PRelu")}],["Softmax","","1+",function(){return new h.WasmSoftmax}],["Sub","","7+",function(){return new i.WasmBinaryOp(["float32"],"Sub")}],["Sum","","6+",function(){return new d.WasmSum}],["Xor","","7+",function(){return new i.WasmBinaryOp(["bool"],"Xor")}]]},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WasmBatchNormalization=void 0;var o=n(14),a=n(1),s=n(4),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){for(var n=e[0],r=e[1],i=e[2],o=e[3],c=e[4],l=1,u=2;u<n.dims.length;u++)l*=n.dims[u];var h=new a.Tensor(n.dims,n.type);return s.WasmBinding.getInstance().ccall("_batch_normalization_f32",[n.floatData,"float32ptr"],[h.floatData,"float32ptr","out"],[n.dims[0],"int32"],[n.dims[1],"int32"],[l,"int32"],[r.floatData,"float32ptr"],[i.floatData,"float32ptr"],[o.floatData,"float32ptr"],[c.floatData,"float32ptr"],[this.epsilon,"float32"]),[h]},e.prototype.checkInputTypes=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4];return!(e.dims.length<3||1!==n.dims.length||1!==r.dims.length||1!==i.dims.length||1!==o.dims.length)&&n.dims[0]===e.dims[1]&&r.dims[0]===e.dims[1]&&i.dims[0]===e.dims[1]&&o.dims[0]===e.dims[1]&&"float32"===e.type&&"float32"===n.type&&"float32"===r.type&&"float32"===i.type&&"float32"===o.type},e}(o.BatchNormalization);e.WasmBatchNormalization=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WasmBinaryOp=void 0;var o=n(15),a=n(1),s=n(0),c=n(4),l=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return i(e,t),e.prototype.run=function(t,e){var n=s.BroadcastUtil.calcShape(e[0].dims,e[1].dims,!1);if(!n)throw new Error("not broadcastable");var r,i="",o="";switch(this.opType){case"Add":"float32"===e[0].type&&(i="_add_f32",o="float32InFloat32Out");break;case"Sub":"float32"===e[0].type&&(i="_sub_f32",o="float32InFloat32Out");break;case"Mul":"float32"===e[0].type&&(i="_mul_f32",o="float32InFloat32Out");break;case"Div":"float32"===e[0].type&&(i="_div_f32",o="float32InFloat32Out");break;case"PRelu":"float32"===e[0].type&&(i="_prelu_f32",o="float32InFloat32Out");break;case"Xor":i="_xor_u8",o="boolInBoolOut";break;case"Or":i="_or_u8",o="boolInBoolOut";break;case"And":i="_and_u8",o="boolInBoolOut";break;default:throw Error("unsupported binary op by the Wasm backend")}if("float32InFloat32Out"===o)r=new a.Tensor(n,"float32"),c.WasmBinding.getInstance().ccall(i,[e[0].floatData,"float32ptr"],[e[0].dims.length,"int32"],[e[0].dims,"int32ptr"],[e[1].floatData,"float32ptr"],[e[1].dims.length,"int32"],[e[1].dims,"int32ptr"],[r.floatData,"float32ptr","out"],[r.floatData.length,"int32"],[n.length,"int32"],[n,"int32ptr"]);else{if("boolInBoolOut"!==o)throw new Error("Unsupported binary op format. Probably unsupported data types.");r=new a.Tensor(n,"bool"),c.WasmBinding.getInstance().ccall(i,[e[0].integerData,"boolptr"],[e[0].dims.length,"int32"],[e[0].dims,"int32ptr"],[e[1].integerData,"boolptr"],[e[1].dims.length,"int32"],[e[1].dims,"int32ptr"],[r.integerData,"boolptr","out"],[r.integerData.length,"int32"],[n.length,"int32"],[n,"int32ptr"])}return[r]},e}(o.BinaryOp);e.WasmBinaryOp=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WasmClip=void 0;var o=n(49),a=n(1),s=n(4),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){var n=new a.Tensor(e[0].dims,e[0].type),r=n.floatData.length;if("float32"!==e[0].type)throw new Error("Unsupported input type for Clip operator.");return s.WasmBinding.getInstance().ccall("_clip_f32",[e[0].floatData,"float32ptr"],[n.floatData,"float32ptr","out"],[r,"int32"],[this.min,"float32"],[this.max,"float32"]),[n]},e.prototype.checkInputTypes=function(t){return"float32"===t[0].type},e}(o.Clip);e.WasmClip=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.WasmConv=void 0;var s=n(16),c=n(1),l=n(0),u=n(4),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return o(this,void 0,void 0,(function(){var t,n,r,i,o,s,h,d,p,f,m,g,y,v,b,x,_,w;return a(this,(function(a){switch(a.label){case 0:if(t=e[0],n=e[1],r=3===e.length?e[2]:void 0,0===this.kernelShape.length)for(i=e[1].dims,w=2;w<i.length;++w)this.kernelShape.push(i[w]);return o=l.PoolConvUtil.computeConvOutputShape(t.dims,n.dims,this.strides,this.dilations,this.kernelShape,this.pads,this.autoPad),s=new c.Tensor(o,t.type),1!==(h=function(t,e,n,r){return 1!==t||1!==e||1===n||r<=0?1:Math.min(n,r+1)}(t.dims[0],this.group,n.dims[0],u.WasmBinding.workerNumber))?[3,1]:(u.WasmBinding.getInstance().ccall("_conv_f32",[t.floatData,"float32ptr"],[t.dims,"int32ptr"],[n.floatData,"float32ptr"],[n.dims,"int32ptr"],[s.floatData,"float32ptr","out"],[s.dims,"int32ptr"],[r?r.floatData:null,"float32ptr"],[this.dilations,"int32ptr"],[this.group,"int32"],[this.pads,"int32ptr"],[this.strides,"int32ptr"]),[2,[s]]);case 1:for((d=n.dims.slice(0))[0]=Math.floor(n.dims[0]/h),p=d[0]*d[1]*d[2]*d[3],(f=n.dims.slice(0))[0]=n.dims[0]-(h-1)*d[0],m=[1,d[0],o[2],o[3]],g=d[0]*o[2]*o[3],y=[1,f[0],o[2],o[3]],v=new Array(h),b=new Array(h),x=new Array(h),_=new Array(h-1),w=0;w<h;++w)w!==h-1?(v[w]=n.floatData.subarray(w*p,(w+1)*p),b[w]=s.floatData.subarray(w*g,(w+1)*g),r&&(x[w]=r.floatData.subarray(w*d[0],(w+1)*d[0])),_[w]=u.WasmBinding.getInstance().ccallRemote(w,"_conv_f32",[t.floatData,"float32ptr"],[t.dims,"int32ptr"],[v[w],"float32ptr"],[d,"int32ptr"],[b[w],"float32ptr","out"],[m,"int32ptr"],[x.length>0?x[w]:null,"float32ptr"],[this.dilations,"int32ptr"],[this.group,"int32"],[this.pads,"int32ptr"],[this.strides,"int32ptr"])):(v[w]=n.floatData.subarray(w*p),b[w]=s.floatData.subarray(w*g),r&&(x[w]=r.floatData.subarray(w*d[0])),u.WasmBinding.getInstance().ccall("_conv_f32",[t.floatData,"float32ptr"],[t.dims,"int32ptr"],[v[w],"float32ptr"],[f,"int32ptr"],[b[w],"float32ptr","out"],[y,"int32ptr"],[x.length>0?x[w]:null,"float32ptr"],[this.dilations,"int32ptr"],[this.group,"int32"],[this.pads,"int32ptr"],[this.strides,"int32ptr"]));return[4,Promise.all(_)];case 2:return a.sent(),[2,[s]]}}))}))},e.prototype.checkInputTypes=function(t){return"float32"===t[0].type&&"float32"===t[1].type&&(3!==t.length||"float32"===t[2].type)},e}(s.Conv);e.WasmConv=h},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.WasmGemm=void 0;var a=n(19),s=n(1),c=n(0),l=n(4),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){var n=e[0],r=e[1],i=e[2],a=o(c.GemmUtil.getShapeOfGemmResult(n.dims,this.transA,r.dims,this.transB,null==i?void 0:i.dims),2),u=a[0],h=a[1],d=new s.Tensor([u,h],n.type);if(i&&!c.BroadcastUtil.calc(d,i,(function(t,e){return e}),!0))throw new Error("c is not broadcastable to the shape of the result of the Gemm operator");return l.WasmBinding.getInstance().ccall("_gemm_f32",[this.transA,"bool"],[this.transB,"bool"],[this.transA?n.dims[1]:n.dims[0],"int32"],[this.transB?r.dims[0]:r.dims[1],"int32"],[this.transA?n.dims[0]:n.dims[1],"int32"],[this.alpha,"float32"],[n.floatData,"float32ptr"],[r.floatData,"float32ptr"],[this.beta,"float32"],[d.floatData,"float32ptr","inout"]),[d]},e.prototype.checkInputTypes=function(t){return"float32"===t[0].type&&"float32"===t[1].type&&"float32"===t[2].type&&t[0].type===t[1].type&&t[0].type===t[2].type},e}(a.Gemm);e.WasmGemm=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WasmInstanceNormalization=void 0;var o=n(20),a=n(1),s=n(4),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){for(var n=e[0],r=e[1],i=e[2],o=1,c=2;c<n.dims.length;c++)o*=n.dims[c];var l=new a.Tensor(n.dims,n.type);return s.WasmBinding.getInstance().ccall("_instance_normalization_f32",[n.floatData,"float32ptr"],[l.floatData,"float32ptr","out"],[n.dims[0],"int32"],[n.dims[1],"int32"],[o,"int32"],[r.floatData,"float32ptr"],[i.floatData,"float32ptr"],[this.epsilon,"float32"]),[l]},e.prototype.checkInputTypes=function(t){var e=t[0],n=t[1],r=t[2];return!(e.dims.length<3||1!==n.dims.length||1!==r.dims.length)&&n.dims[0]===e.dims[1]&&r.dims[0]===e.dims[1]&&"float32"===e.type&&"float32"===n.type&&"float32"===r.type},e}(o.InstanceNormalization);e.WasmInstanceNormalization=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.WasmMatMul=void 0;var a=n(18),s=n(1),c=n(0),l=n(4),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){var n=o(c.MatMulUtil.preprocessInputShapes(e[0].dims,e[1].dims),2),r=n[0],i=n[1],a=c.BroadcastUtil.calcShape(r,i,!0);if(!a)throw new Error("input dimensions do not match the requirement");var u=c.ShapeUtil.size(a),h=new Float32Array(u);l.WasmBinding.getInstance().ccall("_matmul_f32",[e[0].floatData,"float32ptr"],[e[0].dims,"int32ptr"],[e[0].dims.length,"int32"],[e[1].floatData,"float32ptr"],[e[1].dims,"int32ptr"],[e[1].dims.length,"int32"],[h,"float32ptr","out"],[h.length,"int32"],[a,"int32ptr"],[a.length,"int32"]),c.MatMulUtil.postprocessOutputShape(a,e[0].dims.length,e[1].dims.length);var d=new s.Tensor(a,e[0].type);return d.floatData.set(h),[d]},e.prototype.checkInputTypes=function(t){return"float32"===t[0].type&&"float32"===t[1].type&&t[0].type===t[1].type},e}(a.MatMul);e.WasmMatMul=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.WasmGlobalMaxPool=e.WasmMaxPool=e.WasmGlobalAveragePool=e.WasmAveragePool=void 0;var s=n(21),c=n(1),l=n(0),u=n(4),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.checkInputTypes=function(t){return m(t)},e.prototype.run=function(t,e){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,g(e[0],this.autoPad,this.countIncludePad,this.kernelShape,this.pads,this.strides)]}))}))},e}(s.AveragePool);e.WasmAveragePool=h;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.checkInputTypes=function(t){return m(t)},e.prototype.run=function(t,e){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,y(e[0])]}))}))},e}(s.GlobalAveragePool);e.WasmGlobalAveragePool=d;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.checkInputTypes=function(t){return m(t)},e.prototype.run=function(t,e){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,v(e[0],this.autoPad,this.kernelShape,this.pads,this.strides)]}))}))},e}(s.MaxPool);e.WasmMaxPool=p;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.checkInputTypes=function(t){return m(t)},e.prototype.run=function(t,e){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,b(e[0])]}))}))},e}(s.GlobalMaxPool);function m(t){return"float32"===t[0].type}function g(t,e,n,r,i,s){return o(this,void 0,void 0,(function(){return a(this,(function(o){return[2,x(!1,1,t,e,n,r,i,s)]}))}))}function y(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){return[2,x(!0,1,t,"NOTSET",!1,[],[],[])]}))}))}function v(t,e,n,r,i){return o(this,void 0,void 0,(function(){return a(this,(function(o){return[2,x(!1,2,t,e,!1,n,r,i)]}))}))}function b(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){return[2,x(!0,2,t,"NOTSET",!1,[],[],[])]}))}))}function x(t,e,n,r,i,s,h,d){return o(this,void 0,void 0,(function(){var o,p,f,m,g,y,v,b,x,_,w,S,T,E;return a(this,(function(a){switch(a.label){case 0:switch(o="",e){case 1:o="_average_pool_f32";break;case 2:o="_max_pool_f32";break;default:throw new Error("unknown pool type")}return l.PoolConvUtil.adjustPoolAttributes(t,n.dims,s,d,h),p=l.PoolConvUtil.computePoolOutputShape(t,n.dims,d,s,h,r),f=new c.Tensor(p,n.type),1!==(m=function(t,e,n){return 1!==t||1===e||n<=0?1:Math.min(e,n+1)}(n.dims[0],n.dims[1],u.WasmBinding.workerNumber))?[3,1]:(u.WasmBinding.getInstance().ccall(o,[s.length,"int32"],[t,"bool"],[n.floatData,"float32ptr"],[n.dims,"int32ptr"],[f.floatData,"float32ptr","out"],[f.dims,"int32ptr"],[s,"int32ptr"],[h,"int32ptr"],[d,"int32ptr"],[i,"bool"]),[3,3]);case 1:for((g=n.dims.slice(0))[1]=Math.floor(n.dims[1]/m),y=l.ShapeUtil.size(g),(v=n.dims.slice(0))[1]=n.dims[1]-(m-1)*g[1],(b=p.slice(0))[1]=g[1],x=l.ShapeUtil.size(b),(_=p.slice(0))[1]=v[1],w=new Array(m-1),S=n.floatData,T=f.floatData,E=0;E<m;++E)E!==m-1?w[E]=u.WasmBinding.getInstance().ccallRemote(E,o,[s.length,"int32"],[t,"bool"],[S.subarray(E*y,(E+1)*y),"float32ptr"],[g,"int32ptr"],[T.subarray(E*x,(E+1)*x),"float32ptr","out"],[b,"int32ptr"],[s,"int32ptr"],[h,"int32ptr"],[d,"int32ptr"],[i,"bool"]):u.WasmBinding.getInstance().ccall(o,[s.length,"int32"],[t,"bool"],[S.subarray((m-1)*y),"float32ptr"],[v,"int32ptr"],[T.subarray((m-1)*x),"float32ptr","out"],[_,"int32ptr"],[s,"int32ptr"],[h,"int32ptr"],[d,"int32ptr"],[i,"bool"]);return[4,Promise.all(w)];case 2:a.sent(),a.label=3;case 3:return[2,[f]]}}))}))}e.WasmGlobalMaxPool=f},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WasmSoftmax=void 0;var o=n(22),a=n(1),s=n(0),c=n(4),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){var n=e[0],r=s.ShapeUtil.normalizeAxis(this.axis,n.dims.length),i=s.ShapeUtil.sizeToDimension(n.dims,r),o=s.ShapeUtil.sizeFromDimension(n.dims,r),l=new a.Tensor(n.dims,n.type);return c.WasmBinding.getInstance().ccall("_softmax_f32",[n.floatData,"float32ptr"],[l.floatData,"float32ptr","out"],[i,"int32"],[o,"int32"]),[l]},e.prototype.checkInputTypes=function(t){return"float32"===t[0].type},e}(o.Softmax);e.WasmSoftmax=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.WasmSum=void 0;var s=n(23),c=n(1),l=n(4),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){for(var n,r=new c.Tensor(e[0].dims,e[0].type),i=e[0].floatData.length,o=new Array(e.length),s=0;s<e.length;s++)o[s]=[e[s].floatData,"float32ptr"];return(n=l.WasmBinding.getInstance()).ccall.apply(n,a(["_sum_f32",[e.length,"int32"],[i,"int32"],[r.floatData,"float32ptr","inout"]],o)),[r]},e.prototype.checkInputTypes=function(t){if("float32"!==t[0].type)return!1;for(var e=1;e<t.length;e++)if(t[0].type!==t[e].type)return!1;return!0},e}(s.Sum);e.WasmSum=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;var r=n(3),i=n(120),o=n(165),a=function(){function t(){}return t.prototype.initialize=function(){try{return this.glContext=o.createWebGLContext(this.contextId),"number"!=typeof this.matmulMaxBatchSize&&(this.matmulMaxBatchSize=16),"string"!=typeof this.textureCacheMode&&(this.textureCacheMode="full"),r.Logger.verbose("WebGLBackend","Created WebGLContext: "+typeof this.glContext),!0}catch(t){return r.Logger.warning("WebGLBackend","Unable to initialize WebGLBackend. "+t),!1}},t.prototype.createSessionHandler=function(t){return new i.WebGLSessionHandler(this,t)},t.prototype.dispose=function(){this.glContext.dispose()},t}();e.WebGLBackend=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;var r=n(3),i=n(11),o=n(121),a=n(123),s=n(154),c=n(163),l=n(164),u=function(){function t(t,e){this.backend=t,this.context=e,this.programManager=new s.ProgramManager(this.context.profiler,t.glContext),this.layoutStrategy=new c.AlwaysKeepOriginalSizeStrategy(t.glContext.maxTextureSize),this.textureManager=new l.TextureManager(t.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:"full"===t.textureCacheMode}),this.textureDataCache=new Map}return t.prototype.createInferenceHandler=function(){return new o.WebGLInferenceHandler(this)},t.prototype.onGraphInitialized=function(t){var e=t.getValues().filter((function(t){return-1===t.from&&t.tensor})).map((function(t){return t.tensor.dataId}));this.initializers=new Set(e)},t.prototype.isInitializer=function(t){return!!this.initializers&&this.initializers.has(t)},t.prototype.getTextureData=function(t){return this.textureDataCache.get(t)},t.prototype.setTextureData=function(t,e){r.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),this.textureDataCache.set(t,e)},t.prototype.dispose=function(){var t=this;this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.textureDataCache.forEach((function(e){return t.textureManager.releaseTexture(e,!0)})),this.textureDataCache=new Map},t.prototype.resolve=function(t,e){var n=i.resolveOperator(t,e,a.WEBGL_OP_RESOLVE_RULES);return n.initialize(t.attributes),n},t}();e.WebGLSessionHandler=u},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;var o=n(3),a=n(1),s=n(0),c=n(122),l=n(50),u=function(){function t(t){this.session=t,this.textureDataCache=new Map}return t.prototype.run=function(t,e){var n=this.session.programManager.getArtifact(t);if(!n){var r=t.createProgramInfo(this,e);n=this.session.programManager.build(r),this.session.programManager.setArtifact(t,n)}var i=t.createRunData(this,n.programInfo,e);return this.session.programManager.run(n,i),[i.outputTextureData.tensor]},t.prototype.getOrCreateTextureData=function(t,e){var n=this.getTextureData(t.dataId);return n?o.Logger.verbose("InferenceHandler","Retrieving TextureData from cache: ["+t.dims+"]"):(o.Logger.verbose("InferenceHandler","Creating new TextureData for dims: ["+t.dims+"]"),e||(e=this.createTextureLayoutFromShape(t.dims.slice())),n=this.createTextureData(e,t.type,t.numberData,t,1)),n},t.prototype.createTextureDataFromLayout=function(t,e){return this.createTextureData(t,e)},t.prototype.createTextureDataFromLayoutBindTensor=function(t,e,n,r){return this.createTextureData(t,e,n,r,1)},t.prototype.createTextureData=function(t,e,n,r,i){o.Logger.verbose("InferenceHandler","Creating TextureData: layout:["+JSON.stringify(t)+"]");var a=this.session.textureManager.createTextureFromLayout(e,t,n,i);return this.createTextureDataFromTexture(t,e,a,r)},t.prototype.createSharedTextureData=function(t,e,n,r){return this.createTextureDataFromTexture(t,e,n,void 0,r)},t.prototype.createTextureDataFromTexture=function(t,e,n,i,o){var s=this,c=r(r({},t),{tensor:i||new a.Tensor(t.unpackedShape,e,(function(t){return s.readTexture(c)}),void 0,void 0,o),texture:n});return this.setTextureData(c.tensor.dataId,c),c},t.prototype.getTextureData=function(t){return this.session.isInitializer(t)?this.session.getTextureData(t):this.textureDataCache.get(t)},t.prototype.setTextureData=function(t,e){this.session.isInitializer(t)?this.session.setTextureData(t,e):this.textureDataCache.set(t,e)},t.prototype.getOrCreateTextureLayout=function(t,e,n){return void 0===e&&(e=1),this.getTextureData(t.dataId)||this.createTextureLayoutFromShape(1===e?t.dims.slice():l.getPackedShape(t.dims.slice()),e,n)},t.prototype.createTextureLayoutFromShape=function(t,e,n,r){void 0===e&&(e=1);var o=i(this.session.layoutStrategy.computeTextureWH(t,r),2),a=o[0],c=o[1],l=t;if(0===t.length&&(l=[1]),1===e)n=t;else if(!n)throw new Error("Unpacked shape is needed when using channels > 1");return{width:a,height:c,channels:e||1,shape:l,strides:s.ShapeUtil.computeStrides(l),unpackedShape:n}},t.prototype.dispose=function(){var t=this;this.session.textureManager.clearActiveTextures(),this.textureDataCache.forEach((function(e){return t.session.textureManager.releaseTexture(e)})),this.textureDataCache=new Map},t.prototype.readTexture=function(t){if(!this.session.backend.glContext.isFloat32DownloadSupported){var e=(new c.WebGLUint8Encode).runInternal(this,t);return this.session.textureManager.readUint8TextureAsFloat(e)}return this.session.textureManager.readTexture(t,t.tensor.type,t.channels)},t}();e.WebGLInferenceHandler=u},function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLUint8Encode=void 0;var i=n(0),o=n(2),a=function(){function t(){}return t.prototype.runInternal=function(t,e){var n=e.shape,a=r(t.session.layoutStrategy.computeTextureWH(e.shape),2),s={width:a[0],height:a[1],channels:4,shape:n,strides:i.ShapeUtil.computeStrides(n),unpackedShape:n},c=o.getGlsl(t.session.backend.glContext.version),l={inputLayouts:[e],outputLayout:s,samplers:["X"],shaderSource:"\n      const float FLOAT_MAX = 1.70141184e38;\n      const float FLOAT_MIN = 1.17549435e-38;\n\n      bool isNaN(float val) {\n        return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;\n      }\n\n      highp vec4 encodeAsUint8(highp float v) {\n        if (isNaN(v)) {\n          return vec4(255, 255, 255, 255);\n        }\n\n        highp float av = abs(v);\n\n        if(av < FLOAT_MIN) {\n          return vec4(0.0, 0.0, 0.0, 0.0);\n        } else if(v > FLOAT_MAX) {\n          return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n        } else if(v < -FLOAT_MAX) {\n          return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n        }\n\n        highp vec4 c = vec4(0,0,0,0);\n\n        highp float e = floor(log2(av));\n        highp float m = exp2(fract(log2(av))) - 1.0;\n\n        c[2] = floor(128.0 * m);\n        m -= c[2] / 128.0;\n        c[1] = floor(32768.0 * m);\n        m -= c[1] / 32768.0;\n        c[0] = floor(8388608.0 * m);\n\n        highp float ebias = e + 127.0;\n        c[3] = floor(ebias / 2.0);\n        ebias -= c[3] * 2.0;\n        c[2] += floor(ebias) * 128.0;\n\n        c[3] += 128.0 * step(0.0, -v);\n\n        return c / 255.0;\n      }\n\n      void main() {\n        float value = "+c.texture2D+"(X,TexCoords).r;\n        "+c.output+" = encodeAsUint8(value);\n      }",hasMain:!0},u=t.session.programManager.build(l),h=t.session.backend.glContext.getEncoder("byte",4),d=t.session.backend.glContext.allocateTexture(s.width,s.height,h),p={inputTextureDatas:[e],outputTextureData:t.createSharedTextureData(s,"uint8",d,{}),uniformData:{}};return t.session.programManager.run(u,p),p.outputTextureData},t}();e.WebGLUint8Encode=a},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;var a=n(7),s=n(124),c=o(n(125)),l=n(126),u=n(127),h=n(128),d=n(129),p=n(130),f=n(132),m=n(133),g=n(134),y=n(135),v=n(136),b=n(137),x=n(139),_=n(140),w=n(141),S=o(n(142)),T=n(10),E=n(143),A=n(144),M=n(145),O=n(147),C=n(148),k=n(149),P=n(150),I=o(n(151)),N=n(152),R=n(153);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",function(){return new I.WebGLUnaryOp(a.NUMBER_TYPES,I.glslAbs())}],["Acos","","7+",function(){return new I.WebGLUnaryOp(a.FLOAT_TYPES,I.glslAcos())}],["Add","","7+",function(){return new c.WebGLBinaryOp(a.NUMBER_TYPES,c.glslAdd())}],["And","","7+",function(){return new c.WebGLBinaryOp(["bool"],c.glslAnd())}],["Asin","","7+",function(){return new I.WebGLUnaryOp(a.FLOAT_TYPES,I.glslAsin())}],["Atan","","7+",function(){return new I.WebGLUnaryOp(a.FLOAT_TYPES,I.glslAtan())}],["AveragePool","","7-10",function(){return new w.WebGLAveragePool}],["BatchNormalization","","7+",function(){return new s.WebGLBatchNormalization}],["Ceil","","6+",function(){return new I.WebGLUnaryOp(a.FLOAT_TYPES,I.glslCeil())}],["Clip","","6-10",function(){return new l.WebGLClip}],["Concat","","4+",function(){return new u.WebGLConcat}],["Conv","","1+",function(){return new h.WebGLConv}],["Cos","","7+",function(){return new I.WebGLUnaryOp(a.FLOAT_TYPES,I.glslCos())}],["Div","","7+",function(){return new c.WebGLBinaryOp(a.NUMBER_TYPES,c.glslDiv())}],["Dropout","","7+",function(){return new d.WebGLDropout}],["Equal","","7+",function(){return new c.WebGLBinaryOp(a.NUMBER_TYPES,c.glslEqual(),void 0,"bool")}],["Elu","","6+",function(){return new p.WebGLElu}],["Exp","","6+",function(){return new I.WebGLUnaryOp(a.FLOAT_TYPES,I.glslExp())}],["Flatten","","1+",function(){return new f.WebGLFlatten}],["Floor","","6+",function(){return new I.WebGLUnaryOp(a.FLOAT_TYPES,I.glslFloor())}],["Gather","","1+",function(){return new m.WebGLGather}],["Gemm","","7-10",function(){return new g.WebGLGemm(!1)}],["Gemm","","11+",function(){return new g.WebGLGemm(!0)}],["GlobalAveragePool","","1+",function(){return new w.WebGLGlobalAveragePool}],["GlobalMaxPool","","1+",function(){return new w.WebGLGlobalMaxPool}],["Greater","","7+",function(){return new c.WebGLBinaryOp(a.NUMBER_TYPES,c.glslGreater(),void 0,"bool")}],["Identity","","1+",function(){return new I.WebGLUnaryOp(a.NUMBER_TYPES,I.glslIdentity())}],["ImageScaler","","1+",function(){return new y.WebGLImageScaler}],["InstanceNormalization","","6+",function(){return new v.WebGLInstanceNormalization}],["LeakyRelu","","6+",function(){return new b.WebGLLeakyRelu}],["Less","","7+",function(){return new c.WebGLBinaryOp(a.NUMBER_TYPES,c.glslLess(),void 0,"bool")}],["Log","","6+",function(){return new I.WebGLUnaryOp(a.FLOAT_TYPES,I.glslLog())}],["MatMul","","1+",function(){return new x.WebGLMatMul}],["MaxPool","","1-9",function(){return new w.WebGLMaxPool}],["Mul","","7+",function(){return new c.WebGLBinaryOp(a.NUMBER_TYPES,c.glslMul())}],["Neg","","6+",function(){return new I.WebGLUnaryOp(a.NUMBER_TYPES,I.glslNeg())}],["Not","","1+",function(){return new I.WebGLUnaryOp(["bool"],I.glslNot())}],["Or","","7+",function(){return new c.WebGLBinaryOp(["bool"],c.glslOr())}],["Pad","","2-10",function(){return new _.WebGLPad}],["Pow","","7+",function(){return new c.WebGLBinaryOp(a.FLOAT_TYPES,c.glslPow())}],["PRelu","","7+",function(){return new c.WebGLBinaryOp(a.FLOAT_TYPES,c.glslPRelu())}],["ReduceLogSum","","1+",function(){return new S.WebGLReduceLogSum}],["ReduceMax","","1+",function(){return new S.WebGLReduceMax}],["ReduceMean","","1+",function(){return new S.WebGLReduceMean}],["ReduceMin","","1+",function(){return new S.WebGLReduceMin}],["ReduceProd","","1+",function(){return new S.WebGLReduceProd}],["ReduceSum","","1+",function(){return new S.WebGLReduceSum}],["ReduceSumSquare","","1+",function(){return new S.WebGLReduceSumSquare}],["Relu","","6+",function(){return new I.WebGLUnaryOp(a.FLOAT_TYPES,I.glslRelu())}],["Reshape","","5+",function(){return new T.WebGLReshape}],["Sigmoid","","6+",function(){return new I.WebGLUnaryOp(a.FLOAT_TYPES,I.glslSigmoid())}],["Sin","","7+",function(){return new I.WebGLUnaryOp(a.FLOAT_TYPES,I.glslSin())}],["Slice","","10+",function(){return new E.WebGLSliceV10}],["Slice","","1-9",function(){return new E.WebGLSlice}],["Softmax","","1+",function(){return new A.WebGLSoftmax}],["Split","","2+",function(t){return new M.WebGLSplit(t.outputs.length)}],["Sqrt","","6+",function(){return new I.WebGLUnaryOp(a.FLOAT_TYPES,I.glslSqrt())}],["Squeeze","","1+",function(){return new O.WebGLSqueeze}],["Sub","","7+",function(){return new c.WebGLBinaryOp(a.NUMBER_TYPES,c.glslSub())}],["Sum","","6+",function(){return new C.WebGLSum}],["Tan","","7+",function(){return new I.WebGLUnaryOp(a.FLOAT_TYPES,I.glslTan())}],["Tanh","","6+",function(){return new I.WebGLUnaryOp(a.FLOAT_TYPES,I.glslTanh())}],["Tile","","6+",function(){return new k.WebGLTile}],["Transpose","","1+",function(){return new P.WebGLTranspose}],["Upsample","","7-8",function(){return new R.WebGLUpsample}],["Unsqueeze","","1+",function(){return new N.WebGLUnsqueeze}],["Xor","","7+",function(){return new c.WebGLBinaryOp(["bool"],c.glslXor())}]]},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBatchNormalization=void 0;var o=n(14),a=n(2),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){var n=e.map((function(e){return t.getOrCreateTextureLayout(e)})),r=e[0].dims.slice(),i=r.length,o=n[1],s=a.getGlsl(t.session.backend.glContext.version),c="\n      float process(int["+i+"] indices) {\n        vec2 position = offsetToCoords(indices[1], "+o.width+", "+o.height+");\n        float scale = getColorAsFloat("+s.texture2D+"(Scale, position));\n        float mean = getColorAsFloat("+s.texture2D+"(Mean, position));\n        float variance = getColorAsFloat("+s.texture2D+"(Variance, position));\n        float b = getColorAsFloat("+s.texture2D+"(B, position));\n\n        return scale * ( (_A(indices) - mean) / sqrt(variance + float("+this.epsilon+")) ) + b;\n      }";return{inputLayouts:n,outputLayout:t.createTextureLayoutFromShape(r),samplers:["A","Scale","B","Mean","Variance"],shaderSource:c}},e.prototype.createRunData=function(t,e,n){var r=[t.getOrCreateTextureData(n[0],e.inputLayouts[0])];n.slice(1).forEach((function(e){return r.push(t.getOrCreateTextureData(e))}));var i=t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type);return{inputTextureDatas:r,outputTextureData:i,uniformData:{}}},e}(o.BatchNormalization);e.WebGLBatchNormalization=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=e.WebGLBinaryOp=void 0;var o=n(15),a=n(0),s=n(5),c=n(2),l=function(t){function e(e,n,r,i){var o=t.call(this,e,r,i)||this;return o.glslFunc=n,o}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){var n=e.map((function(e){return t.getOrCreateTextureLayout(e)}));if(!a.ShapeUtil.areEqual(e[0].dims,e[1].dims)){var r=a.BroadcastUtil.calcShape(e[0].dims,e[1].dims,!1);if(!r)throw new Error("Can't perform binary op on the given tensors");var i=r.length,o=0!==e[0].dims.length?e[0].dims.length:1,s=0!==e[1].dims.length?e[1].dims.length:1,l=0!==e[0].dims.length?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",u=0!==e[1].dims.length?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",h="\n      "+this.glslFunc.body+"\n      float process(int indices["+i+"]) {\n        int aindices["+o+"];\n        int bindices["+s+"];\n        "+l+"\n        "+u+"\n        return "+this.glslFunc.name+"(_A(aindices), _B(bindices));\n    }";return{inputLayouts:n,outputLayout:t.createTextureLayoutFromShape(r),samplers:["A","B"],shaderSource:h}}var d=c.getGlsl(t.session.backend.glContext.version),p="\n    "+this.glslFunc.body+"\n    void main() {\n      vec4 v1 = "+d.texture2D+"(A, TexCoords);\n      vec4 v2 = "+d.texture2D+"(B, TexCoords);\n      vec4 result = "+this.glslFunc.name+"(v1, v2);\n      "+d.output+" = result;\n    }\n    ";return{hasMain:!0,inputLayouts:n,outputLayout:t.createTextureLayoutFromShape(e[0].dims),samplers:["A","B"],shaderSource:p}},e.prototype.createRunData=function(t,e,n){return{inputTextureDatas:n.map((function(n,r){return t.getOrCreateTextureData(n,e.inputLayouts[r])})),outputTextureData:t.createTextureDataFromLayout(e.outputLayout,this.resultType?this.resultType:n[0].type),uniformData:{}}},e}(o.BinaryOp);e.WebGLBinaryOp=l,e.glslAdd=function(){return{body:"\n  float add_(float a, float b) {\n    return a + b;\n  }\n  vec4 add_(vec4 v1, vec4 v2) {\n    return v1 + v2;\n  }\n  ",name:"add_",type:s.FunctionType.ValueBased}},e.glslDiv=function(){return{body:"\n  float div_(float a, float b) {\n    return a / b;\n  }\n  vec4 div_(vec4 v1, vec4 v2) {\n    return v1 / v2;\n  }\n  ",name:"div_",type:s.FunctionType.ValueBased}},e.glslMul=function(){return{body:"\n  float mul_(float a, float b) {\n    return a * b;\n  }\n  vec4 mul_(vec4 v1, vec4 v2) {\n    return v1 * v2;\n  }\n  ",name:"mul_",type:s.FunctionType.ValueBased}},e.glslSub=function(){return{body:"\n  float sub_(float a, float b) {\n    return a - b;\n  }\n  vec4 sub_(vec4 v1, vec4 v2) {\n    return v1 - v2;\n  }\n  ",name:"sub_",type:s.FunctionType.ValueBased}},e.glslEqual=function(){return{body:"\n  float equal_(float a, float b) {\n    return float(a == b);\n  }\n  vec4 equal_(vec4 v1, vec4 v2) {\n    return vec4( v1 == v2 );\n  }\n  ",name:"equal_",type:s.FunctionType.ValueBased}},e.glslGreater=function(){return{body:"\n  float greater_(float a, float b) {\n    return float(a > b);\n  }\n  vec4 greater_(vec4 v1, vec4 v2) {\n    return vec4( v1.r > v2.r ,\n      v1.g > v2.g,\n      v1.b > v2.b,\n      v1.a > v2.a );\n  }\n  ",name:"greater_",type:s.FunctionType.ValueBased}},e.glslLess=function(){return{body:"\n  float less_(float a, float b) {\n    return float(a < b);\n  }\n  vec4 less_(vec4 v1, vec4 v2) {\n    return vec4( v1.r < v2.r ,\n                v1.g < v2.g,\n                v1.b < v2.b,\n                v1.a < v2.a );\n  }\n  ",name:"less_",type:s.FunctionType.ValueBased}},e.glslAnd=function(){return{body:"\n  float and_(float a, float b) {\n    return float( bool(a) && bool(b) );\n  }\n  vec4 and_(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r && b2.r ,\n                b1.g && b2.g,\n                b1.b && b2.b,\n                b1.a && b2.a );\n  }\n  ",name:"and_",type:s.FunctionType.ValueBased}},e.glslOr=function(){return{body:"\n  float or_(float a, float b) {\n    return float( bool(a) || bool(b) );\n  }\n  vec4 or_(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r || b2.r ,\n                b1.g || b2.g,\n                b1.b || b2.b,\n                b1.a || b2.a );\n  }\n  ",name:"or_",type:s.FunctionType.ValueBased}},e.glslXor=function(){return{body:"\n  float xor_(float a, float b) {\n    return float( bool(a) ^^ bool(b) );\n  }\n  vec4 xor_(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r ^^ b2.r ,\n                b1.g ^^ b2.g,\n                b1.b ^^ b2.b,\n                b1.a ^^ b2.a );\n  }\n  ",name:"xor_",type:s.FunctionType.ValueBased}},e.glslPow=function(){return function(t){var e=t+"_";return{body:"\n  float pow_(float a, float b) {\n    return pow(a, b);\n  }\n  vec4 pow_(vec4 v1, vec4 v2) {\n    return pow(v1, v2);\n  }\n  ",name:e,type:s.FunctionType.ValueBased}}("pow")},e.glslPRelu=function(){return{body:"\n  float prelu_(float a, float b) {\n    return a < 0.0 ? a * b: a;\n  }\n  vec4 prelu_(vec4 v1, vec4 v2) {\n    return vec4(\n      v1.r < 0.0 ? v1.r * v2.r: v1.r,\n      v1.g < 0.0 ? v1.g * v2.g: v1.g,\n      v1.b < 0.0 ? v1.b * v2.b: v1.b,\n      v1.a < 0.0 ? v1.a * v2.a: v1.a\n      );\n  }\n  ",name:"prelu_",type:s.FunctionType.ValueBased}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLClip=void 0;var o=n(49),a=n(2),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){var n=e[0].dims.slice(),r=a.getGlsl(t.session.backend.glContext.version),i="\n      const float min = float("+this.min+");\n      const float max = float("+this.max+");\n      void main() {\n        float v = "+r.texture2D+"(A, TexCoords).r;\n        "+r.output+" = vec4(clamp(v, min, max));\n      }\n      ";return{inputLayouts:[t.getOrCreateTextureLayout(e[0])],outputLayout:t.createTextureLayoutFromShape(n),samplers:["A"],shaderSource:i,hasMain:!0}},e.prototype.createRunData=function(t,e,n){var r=[t.getOrCreateTextureData(n[0],e.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{}}},e}(o.Clip);e.WebGLClip=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLConcat=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){var n=e[0].dims.slice();if(this.axis>=n.length||this.axis<-1*n.length)throw new Error("axis specified for concat doesn't match input dimensionality");this.axis<0&&(this.axis=n.length+this.axis);for(var r=n.slice(0),i=1;i<e.length;i++)for(var o=e[i].dims.slice(),a=0;a<n.length;a++)if(a===this.axis)r[this.axis]+=o[a];else if(n[a]!==o[a])throw new Error("non concat dimensions must match");var s,c=r.length;s=e.length<5?this.getTextureIndexWhereDataResidesLinearSearch(e.length):this.getTextureIndexWhereDataResidesBinarySearch(e.length);var l=this.fetchDataFromCorrectTextureMethod(e.length,c),u=this.getValueFromArrayIndexMethod(e.length),h=e.map((function(t,e){return"X"+e})),d="\n      "+l+"\n      "+u+"\n      "+s+"\n      float process(int indices["+c+"]) {\n        int textureIndex = getTextureWhereDataResides (indices["+this.axis+"]);\n\n        if(textureIndex != 0) {\n          indices["+this.axis+"] = indices["+this.axis+"] - int(getValueFromArrayIndex(sizeInConcatAxis, textureIndex-int(1)));\n        }\n\n        return fetchDataFromCorrectTexture(textureIndex, indices);\n      }";return{inputLayouts:e.map((function(e){return t.getOrCreateTextureLayout(e)})),outputLayout:t.createTextureLayoutFromShape(r),samplers:h,variables:[{name:"sizeInConcatAxis",type:"int",arrayLength:e.length}],shaderSource:d}},e.prototype.createRunData=function(t,e,n){for(var r=n.map((function(n,r){return t.getOrCreateTextureData(n,e.inputLayouts[r])})),i=new Array(e.inputLayouts.length),o=0,a=0;a<e.inputLayouts.length;++a)o+=e.inputLayouts[a].shape[this.axis],i[a]=o;var s={sizeInConcatAxis:i};return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:s}},e.prototype.getTextureIndexWhereDataResidesLinearSearch=function(t){return"int getTextureWhereDataResides(int index) {\n      for(int i=0; i<"+t+"; i++) {\n          if(index < int(sizeInConcatAxis[i])){\n              return i;\n          }\n        }\n      }"},e.prototype.getTextureIndexWhereDataResidesBinarySearch=function(t){return this.getTextureIndexWhereDataResidesLinearSearch(t)},e.prototype.fetchDataFromCorrectTextureMethod=function(t,e){for(var n=["float fetchDataFromCorrectTexture(int textureIndex, int indices["+e+"]) {"],r=0;r<t;++r)0===r?n.push("\tif (textureIndex == "+r+") { return _X"+r+"(indices); }"):r===t-1?n.push("\telse { return _X"+r+"(indices); }"):n.push("\telse if (textureIndex == "+r+") { return _X"+r+"(indices); }");return n.push("\t}"),n.join("\n")},e.prototype.getValueFromArrayIndexMethod=function(t){for(var e=["int getValueFromArrayIndex(int arr["+t+"], int index) {"],n=0;n<t;++n)0===n?e.push("\tif (index == "+n+") { return arr["+n+"]; }"):n===t-1?e.push("\telse { return arr["+n+"]; }"):e.push("\telse if (index == "+n+") { return arr["+n+"]; }");return e.push("\t}"),e.join("\n")},e}(n(30).Concat);e.WebGLConcat=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLConv=void 0;var s=n(3),c=n(16),l=n(0),u=n(2),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.readSize=8,e.blockSize=64,e}return i(e,t),e.prototype.run=function(t,e){var n=t.session.programManager;if(!this.artifacts){this.artifacts=[];for(var r=this.createProgramInfos(t,e),i=0;i<r.length;++i){var o=t.session.programManager.build(r[i]);this.artifacts.push(o)}}var a=this.createRunDatas(t,this.artifacts.map((function(t){return t.programInfo})),e);return n.run(this.artifacts[0],a[0]),n.run(this.artifacts[1],a[1]),[a[1].outputTextureData.tensor]},e.prototype.createProgramInfos=function(t,n){var r=n[0].dims.slice(),i=n[1].dims.slice();if(0===this.kernelShape.length)for(var o=n[1].dims,a=2;a<o.length;++a)this.kernelShape.push(o[a]);l.PoolConvUtil.adjustPadsBasedOnAutoPad(n[0].dims,this.strides,this.dilations,this.kernelShape,this.pads,this.autoPad),s.Logger.verbose("Conv","autpPad:"+this.autoPad+", dilations:"+this.dilations+", group:"+this.group+", kernelShape:"+this.kernelShape+", pads:"+this.pads+", strides:"+this.strides);var c=e.calcOutputShape(r,i,this.dilations,this.pads,this.strides),u=this.createIm2ColProgramInfo(t,n,c);return[u,this.createDotProductProgramInfo(t,u.outputLayout,n,c)]},e.prototype.createRunDatas=function(t,n,r){var i=r[1],o=r.length>=3?r[2]:void 0,a=t.getTextureData(i.dataId);if(!a){s.Logger.verbose("Conv","Did not find the adjustedKernel texture in the cache. Creating rew.");var c=e.prepKernelForDotProduct(i.dims.slice(),this.group,4,i.floatData);a=t.createTextureDataFromLayoutBindTensor(n[1].inputLayouts[1],i.type,c,i)}var l={inputTextureDatas:[t.getOrCreateTextureData(r[0])],outputTextureData:t.createTextureDataFromLayout(n[0].outputLayout,r[0].type),uniformData:{}},u=[l.outputTextureData,a];return o&&u.push(t.getOrCreateTextureData(o)),[l,{inputTextureDatas:u,outputTextureData:t.createTextureDataFromLayout(n[1].outputLayout,r[0].type),uniformData:{},draw:function(t,e){for(var n=t.gl,r=e.programInfo.params.sharedDim,i=e.programInfo.params.sharedDimReadSize,o=e.uniformLocations.find((function(t){return"sharedDimOffset"===t.name})).location,a=!1,c=0;c<r;c+=i)s.Logger.verbose("MatMul2D","k = "+c+", sharedDim: "+r+", readSize = "+i),c===i&&(a=!0,n.enable(n.BLEND),t.checkError(),n.blendEquation(n.FUNC_ADD),t.checkError(),n.blendFunc(n.ONE,n.ONE),t.checkError()),n.uniform1i(o,c),t.checkError(),t.draw();a&&(n.disable(n.BLEND),t.checkError())}}]},e.prototype.createIm2ColProgramInfo=function(t,n,r){var i=n[0].dims.slice(),o=n[1].dims.slice(),a=r.length,s=e.calcIm2ColDims(i,o,r,4),c=t.createTextureLayoutFromShape(s,4,[s[0],s[1],s[2],4*s[3]],{breakAxis:3}),l="\n      const int XC = "+i[1]+";\n      const int XH = "+i[2]+";\n      const int XW = "+i[3]+";\n      const int KH = "+this.kernelShape[0]+";\n      const int KW = "+this.kernelShape[1]+";\n      const int dilationH = "+this.dilations[0]+";\n      const int dilationW = "+this.dilations[1]+";\n      const int strideH = "+this.strides[0]+";\n      const int strideW = "+this.strides[1]+";\n      const int padH = "+this.pads[0]+";\n      const int padW = "+this.pads[1]+";\n      const int KHKW = KH*KW;\n      const int XCKHKW = XC * KHKW;\n      const int outputChannels = 4;\n\n      vec4 process(int indices["+a+"]) {\n        int b  = indices[0]; // batch size\n        int oh = indices[1] * strideH - padH; //output height\n        int ow = indices[2] * strideW - padW; //output width\n        int p = indices[3] * outputChannels; //patch\n        vec4 v = vec4(0.0);\n        for(int i=0; i < outputChannels; ++i) {\n          if(p < XCKHKW) {\n            int patchC = p / KHKW;\n            int patchH = (p - patchC*KHKW) / KW;\n            int patchW = (p - patchC*KHKW) - patchH * KW;\n            int xh2 = oh + patchH * dilationH;\n            int xw2 = ow + patchW * dilationW;\n            int x["+i.length+"];\n            x[0] = b;\n            x[1] = patchC;\n            x[2] = xh2;\n            x[3] = xw2;\n            if(xh2 >= 0 &&\n                xh2 < XH &&\n                xw2 >= 0 &&\n                xw2 < XW) {\n              v[i] = _X(x);\n            }\n          }\n          ++p;\n        }\n        return v;\n      }\n      ";return{inputLayouts:[t.createTextureLayoutFromShape(i)],outputLayout:c,samplers:["X"],shaderSource:l}},e.prototype.createDotProductProgramInfo=function(t,e,n,r){var i,o=n[0].dims.slice(),a=n[1].dims.slice(),s=[a[0],Math.ceil(o[1]*a[2]*a[3]/4)],c=t.createTextureLayoutFromShape(s,4,[s[0],4*s[1]],{breakAxis:1}),l=r.length,h=[e,c];3===n.length&&(i=t.createTextureLayoutFromShape(n[2].dims.slice()),h.push(i));var d=t.createTextureLayoutFromShape(r),p=n.length<3?"0.0":"_B(b)",f=e.shape[3],m=t.session.backend.glContext.isBlendSupported&&t.session.backend.matmulMaxBatchSize?this.calcSharedDimReadSize(t.session.backend.matmulMaxBatchSize,f):f,g=["Im2Col","K"];3===n.length&&g.push("B");var y=u.getGlsl(t.session.backend.glContext.version),v="\n    float process(int indices["+l+"]) {\n      int b[1];\n      b[0] = indices[1];\n      int im2col["+e.shape.length+"];\n      im2col[0] = indices[0];\n      im2col[1] = indices[2];\n      im2col[2] = indices[3];\n      int im2colOffset = im2col[0] * "+e.strides[0]+" + im2col[1] * "+e.strides[1]+" + im2col[2] * "+e.strides[2]+" + sharedDimOffset;\n      int kernelOffset = indices[1] * "+c.strides[0]+" + sharedDimOffset;\n      float sum = sharedDimOffset == 0 ? "+p+" : 0.0;\n      for (int i = 0; i < "+m+"; ++i) {\n        vec2 im2colCoords = offsetToCoords(im2colOffset, "+e.width+", "+e.height+");\n        vec2 kernelCoords = offsetToCoords(kernelOffset, "+c.width+", "+c.height+");\n        sum += dot("+y.texture2D+"(Im2Col, im2colCoords), "+y.texture2D+"(K, kernelCoords));\n        ++im2colOffset;\n        ++kernelOffset;\n      }\n      return sum;\n    }";return{inputLayouts:3===n.length?[e,c,i]:[e,c],outputLayout:d,shaderSource:v,samplers:g,variables:[{name:"sharedDimOffset",type:"int"}],params:{sharedDim:f,sharedDimReadSize:m}}},e.prepKernelForDotProduct=function(t,e,n,r){if(1===e&&(1===n||t[2]*t[3]%n==0))return r;for(var i=t[0],o=t[1]*t[2]*t[3],a=Math.ceil(o*e/n)*n,s=new Float32Array(i*a),c=0;c<i;++c){var l=c*o,u=c*a+c%e*o;s.set(r.subarray(l,l+o),u)}return s},e.calcIm2ColDims=function(t,e,n,r){return void 0===r&&(r=1),[n[0],n[2],n[3],Math.ceil(t[1]*e[2]*e[3]/r)]},e.calcOutputShape=function(t,e,n,r,i){var o,s=t[0],c=t.slice(2),l=c.length,u=e[0],h=e.slice(2).map((function(t,e){return t+(t-1)*(n[e]-1)})),d=c.map((function(t,e){return t+r[e]+r[e+l]})).map((function(t,e){return Math.floor((t-h[e]+i[e])/i[e])}));return(o=[s,u]).concat.apply(o,a(d))},e.prototype.calcSharedDimReadSize=function(t,e){return t<=0||e<t||e%t!=0?e:t},e.prototype.calcBlockSize=function(t){if(!(t.height<64))return[64,64]},e}(c.Conv);e.WebGLConv=h},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLDropout=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){if(this.testMode)return[e[0]];throw new Error("Non test mode Dropout is not implemented yet")},e.prototype.createProgramInfo=function(t,e){throw new Error("Non test mode Dropout is not implemented yet")},e.prototype.createRunData=function(t,e,n){throw new Error("Non test mode Dropout is not implemented yet")},e}(n(31).Dropout);e.WebGLDropout=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLElu=void 0;var o=n(131),a=n(2),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){var n=e[0].dims.slice(),r=a.getGlsl(t.session.backend.glContext.version),i="\n      void main() {\n        float v = "+r.texture2D+"(A, TexCoords).r;\n        "+r.output+" = vec4(v >= 0.0 ? v: (exp(v) - 1.0) * "+this.alpha.toExponential()+"); /* float number format */\n      }\n      ";return{inputLayouts:[t.getOrCreateTextureLayout(e[0])],outputLayout:t.createTextureLayoutFromShape(n),samplers:["A"],shaderSource:i,hasMain:!0}},e.prototype.createRunData=function(t,e,n){var r=[t.getOrCreateTextureData(n[0],e.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{}}},e}(o.Elu);e.WebGLElu=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Elu=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){this.alpha=t.getFloat("alpha",1)},t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"float32"===t[0].type||"float64"===t[0].type},t}();e.Elu=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLFlatten=void 0;var o=n(32),a=n(0),s=n(10),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){var n=a.ShapeUtil.flattenShape(e[0].dims,this.axis);return[s.reshape(t,e[0],n)]},e}(o.Flatten);e.WebGLFlatten=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLGather=void 0;var o=n(33),a=n(0),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){var n=e[0].dims.slice(),r=e[1].dims.slice(),i=new Array(n.length+r.length-1);if(0===i.length)throw Error("A scalar tensor output has not been supported");for(var o=a.ShapeUtil.normalizeAxis(this.axis,n.length),s=[],c=0;c<i.length;c++)c<o?(i[c]=n[c],s.push("inputIdx["+c+"] = outputIdx["+c+"];")):c<o+r.length?(i[c]=r[c-o],s.push("indexDataIdx["+(c-o)+"] = outputIdx["+c+"];")):(i[c]=n[c-r.length+1],s.push("inputIdx["+(c-r.length+1)+"] = outputIdx["+c+"];"));var l="\n      float process(int outputIdx["+i.length+"]) {\n        int inputIdx["+n.length+"];\n        int indexDataIdx["+r.length+"];\n        "+s.join("\n        ")+"\n        int idx = int(_B(indexDataIdx));\n        inputIdx["+o+"] = idx < 0 ? idx + "+n[o]+" : idx;\n        return _A(inputIdx);\n      }";return{inputLayouts:e.map((function(e){return t.getOrCreateTextureLayout(e)})),outputLayout:t.createTextureLayoutFromShape(i),samplers:["A","B"],shaderSource:l}},e.prototype.createRunData=function(t,e,n){var r=n.map((function(n,r){return t.getOrCreateTextureData(n,e.inputLayouts[r])}));return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{}}},e}(o.Gather);e.WebGLGather=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLGemm=void 0;var a=n(19),s=n(0),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){var n=e[0].dims.slice(),r=e[1].dims.slice(),i=o(s.GemmUtil.getShapeOfGemmResult(n,this.transA,r,this.transB,3===e.length?e[2].dims:void 0),2),a=[i[0],i[1]];if(!a)throw new Error("Can't use gemm on the given tensors");var c=n[n.length-1],l="";this.transA&&(c=n[0]),this.transA&&this.transB?l="value += _A_T(a) * _B_T(b);":this.transA&&!this.transB?l="value += _A_T(a) * _B(b);":!this.transA&&this.transB?l="value += _A(a) * _B_T(b);":this.transA||this.transB||(l="value += _A(a) * _B(b);");var u=a.length,h="\n      float process(int indices["+u+"]) {\n          int a["+u+"];\n          int b["+u+"];\n          "+(3===e.length?"int c["+e[2].dims.length+"];":"")+"\n\n          copyVec(indices, a);\n          copyVec(indices, b);\n          "+(3===e.length?"bcastIndices_C(indices, c);":"")+"\n\n          float value = 0.0;\n          for (int k=0; k<"+c+"; ++k) {\n              a["+(u-1)+"] = k;\n              b["+(u-2)+"] = k;\n              "+l+"\n          }\n\n          value = value * alpha;\n          "+(3===e.length?"value += beta * _C(c);":"")+"\n          return value;\n      }";return{inputLayouts:e.map((function(e){return t.getOrCreateTextureLayout(e)})),outputLayout:t.createTextureLayoutFromShape(a),samplers:3===e.length?["A","B","C"]:["A","B"],variables:[{name:"alpha",type:"float"},{name:"beta",type:"float"}],shaderSource:h}},e.prototype.createRunData=function(t,e,n){var r=n.map((function(n,r){return t.getOrCreateTextureData(n,e.inputLayouts[r])}));return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{alpha:this.alpha,beta:this.beta}}},e}(a.Gemm);e.WebGLGemm=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLImageScaler=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){var n=e[0].dims.slice(),r=n.length,i="\n      "+this.createGetBiasMethod(this.bias.length)+"\n      float process(int indices["+r+"]) {\n        return _X(indices) * scale + getBias(bias, indices[1]);\n      }";return{inputLayouts:[t.getOrCreateTextureLayout(e[0])],outputLayout:t.createTextureLayoutFromShape(n),samplers:["X"],variables:[{name:"bias",type:"float",arrayLength:this.bias.length},{name:"scale",type:"float"}],shaderSource:i}},e.prototype.createRunData=function(t,e,n){var r=[t.getOrCreateTextureData(n[0],e.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{bias:this.bias,scale:this.scale}}},e.prototype.createGetBiasMethod=function(t){for(var e=["float getBias(float bias["+t+"], int channel) {"],n=0;n<t;++n)0===n?e.push("\tif (channel == "+n+") { return bias["+n+"]; }"):n===t-1?e.push("\telse { return bias["+n+"]; }"):e.push("\telse if (channel == "+n+") { return bias["+n+"]; }");return e.push("\t}"),e.join("\n")},e}(n(34).ImageScaler);e.WebGLImageScaler=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInstanceNormalization=void 0;var o=n(20),a=n(2),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){var n=this;this.artifacts||(this.artifacts=[],this.createProgramInfos(t,e).forEach((function(e,r){var i=t.session.programManager.build(e);n.artifacts.push(i)})));var r=this.createRunDatas(t,this.artifacts.map((function(t){return t.programInfo})),e);return r.forEach((function(e,r){return t.session.programManager.run(n.artifacts[r],e)})),[r[1].outputTextureData.tensor]},e.prototype.checkInputTypes=function(e){return!!t.prototype.checkInputTypes.call(this,e)&&4===e[0].dims.length},e.prototype.createMeanAndVarianceProgramInfo=function(t,e){var n=e.shape,r=n[1],i=n[2]*n[3],o=[n[0],r],a=[n[0],4*r],s="\n    vec4 process(int[2] indices) {\n      vec4 v = vec4(0.0);\n      int a[4];\n      a[0] = indices[0];\n      a[1] = indices[1];\n      float temp = 0.0;\n      for(int a2=0; a2<"+n[2]+"; a2++) {\n        a[2] = a2;\n        for(int a3=0; a3<"+n[3]+"; a3++) {\n          a[3] = a3;\n          float x = _X(a);\n          temp += x;\n        }\n      }\n      float mean = temp / float("+i+");\n      temp = 0.0;\n      for(int a2=0; a2<"+n[2]+"; a2++) {\n        a[2] = a2;\n        for(int a3=0; a3<"+n[3]+"; a3++) {\n          a[3] = a3;\n          float x = _X(a);\n          temp += (x - mean) * (x - mean);\n        }\n      }\n      v.r = mean;\n      v.g = temp / float("+i+");\n\n      return v;\n    }";return{inputLayouts:[e],outputLayout:t.createTextureLayoutFromShape(o,4,a),samplers:["X"],shaderSource:s}},e.prototype.createComputOutputProgramInfo=function(t,e,n,r,i){var o=a.getGlsl(t.session.backend.glContext.version),s="\n    vec4 getMeanAndVariance(int[2] mv) {\n      int offset = indicesToOffset_MeanAndVariance(mv);\n      vec2 coords = offsetToCoords(offset, "+i.width+", "+i.height+");\n      return "+o.texture2D+"(MeanAndVariance, coords);\n    }\n\n    float process(int[4] indices) {\n\n          int mv[2];\n          mv[0] = indices[0];\n          mv[1] = indices[1];\n          vec4 mean_and_variance = getMeanAndVariance(mv);\n          float mean = mean_and_variance.r;\n          float variance = mean_and_variance.g;\n\n          int sb[1];\n          sb[0] = indices[1];\n          float scale = _Scale(sb);\n          float b = _B(sb);\n\n          return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;\n        }";return{inputLayouts:[e,i,n,r],outputLayout:t.createTextureLayoutFromShape(e.shape),samplers:["X","MeanAndVariance","Scale","B"],variables:[{name:"epsilon",type:"float"}],shaderSource:s}},e.prototype.createProgramInfos=function(t,e){var n=t.getOrCreateTextureLayout(e[0]),r=t.getOrCreateTextureLayout(e[1]),i=t.getOrCreateTextureLayout(e[2]),o=this.createMeanAndVarianceProgramInfo(t,n);return[o,this.createComputOutputProgramInfo(t,n,r,i,o.outputLayout)]},e.prototype.createRunDatas=function(t,e,n){var r=n[0].type,i=t.getOrCreateTextureData(n[0],e[0].inputLayouts[0]),o=t.getOrCreateTextureData(n[1],e[1].inputLayouts[2]),a=t.getOrCreateTextureData(n[2],e[1].inputLayouts[3]),s=[];return s.push({inputTextureDatas:[i],outputTextureData:t.createTextureDataFromLayout(e[0].outputLayout,r),uniformData:{}}),s.push({inputTextureDatas:[i,s[0].outputTextureData,o,a],outputTextureData:t.createTextureDataFromLayout(e[1].outputLayout,r),uniformData:{epsilon:this.epsilon}}),s},e}(o.InstanceNormalization);e.WebGLInstanceNormalization=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLLeakyRelu=void 0;var o=n(138),a=n(2),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){var n=e[0].dims.slice(),r=a.getGlsl(t.session.backend.glContext.version),i="\n      void main() {\n        float v = "+r.texture2D+"(A, TexCoords).r;\n        "+r.output+" = vec4(v < 0.0 ? v * float("+this.alpha+") : v);\n      }\n      ";return{hasMain:!0,inputLayouts:[t.getOrCreateTextureLayout(e[0])],outputLayout:t.createTextureLayoutFromShape(n),samplers:["A"],shaderSource:i}},e.prototype.createRunData=function(t,e,n){var r=[t.getOrCreateTextureData(n[0],e.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{}}},e}(o.LeakyRelu);e.WebGLLeakyRelu=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LeakyRelu=void 0;var r=function(){function t(){}return t.prototype.initialize=function(t){this.alpha=t.getFloat("alpha",.01)},t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"float32"===t[0].type||"float64"===t[0].type},t}();e.LeakyRelu=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLMatMul=void 0;var o=n(18),a=n(0),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){var n=e[0].dims,r=e[1].dims,i=a.BroadcastUtil.calcShape(n,r,!0);if(!i)throw new Error("Can't use matmul on the given tensors");var o=i.length,s=n.length,c=r.length,l="\n      float process(int indices["+o+"]) {\n          int a["+s+"];\n          int b["+c+"];\n          bcastMatmulIndices_A(indices, a);\n          bcastMatmulIndices_B(indices, b);\n\n          float value;\n          for (int k=0; k<"+n[n.length-1]+"; ++k) {\n              a["+(s-1)+"] = k;\n              b["+(c-2)+"] = k;\n              value += _A(a) * _B(b);\n          }\n          return value;\n      }";return{inputLayouts:e.map((function(e){return t.getOrCreateTextureLayout(e)})),outputLayout:t.createTextureLayoutFromShape(i),samplers:["A","B"],shaderSource:l}},e.prototype.createRunData=function(t,e,n){var r=n.map((function(n,r){return t.getOrCreateTextureData(n,e.inputLayouts[r])}));return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{}}},e}(o.MatMul);e.WebGLMatMul=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.getPadFunction=e.WebGLPad=void 0;var o=n(35),a=n(0),s=n(2),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){var n=a.ShapeUtil.padShape(e[0].dims.slice(),this.pads),r=n.length,i=t.getOrCreateTextureLayout(e[0]),o="\n      "+l(s.getGlsl(t.session.backend.glContext.version),"A",i,this.mode,this.pads,this.value)+"\n      float process(int["+r+"] indices) {\n          return padA(indices);\n      }";return{inputLayouts:[i],outputLayout:t.createTextureLayoutFromShape(n),samplers:["A"],shaderSource:o}},e.prototype.createRunData=function(t,e,n){var r=[t.getOrCreateTextureData(n[0],e.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{}}},e}(o.Pad);function l(t,e,n,r,i,o){switch(r){case"constant":return function(t,e,n,r,i,o,a,s){for(var c=n.length,l="",u=c-1;u>=0;--u)l+="\n          k = m["+u+"] - "+a[u]+";\n          if (k < 0)  return constant;\n          if (k >= "+n[u]+") return constant;\n          offset += k * "+r[u]+";\n          ";return"\n        float pad"+e+"(int m["+c+"]) {\n          const float constant = float("+s+");\n          int offset = 0;\n          int k = 0;\n          "+l+"\n          vec2 coords = offsetToCoords(offset, "+i+", "+o+");\n          float value = getColorAsFloat("+t.texture2D+"("+e+", coords));\n          return value;\n        }\n        "}(t,e,n.shape,n.strides,n.width,n.height,i,o);case"reflect":return function(t,e,n,r,i,o,a){for(var s=n.length,c="",l=s-1;l>=0;--l)c+="\n        k = m["+l+"] - "+a[l]+";\n        if (k < 0) { k = -k; }\n        {\n          const int _2n_1 = "+2*(n[l]-1)+";\n          k = int( mod( float(k), float(_2n_1) ) ) ;\n          if(k >= "+n[l]+") { k = _2n_1 - k; }\n        }\n        offset += k * "+r[l]+";\n        ";return"\n      float pad"+e+"(int m["+s+"]) {\n        int offset = 0;\n        int k = 0;\n        "+c+"\n        vec2 coords = offsetToCoords(offset, "+i+", "+o+");\n        float value = getColorAsFloat("+t.texture2D+"("+e+", coords));\n        return value;\n      }\n      "}(t,e,n.shape,n.strides,n.width,n.height,i);case"edge":return function(t,e,n,r,i,o,a){for(var s=n.length,c="",l=s-1;l>=0;--l)c+="\n      k = m["+l+"] - "+a[l]+";\n      if (k < 0)  k = 0;\n      if (k >= "+n[l]+") k = "+(n[l]-1)+";\n      offset += k * "+r[l]+";\n      ";return"\n    float pad"+e+"(int m["+s+"]) {\n      int offset = 0;\n      int k = 0;\n      "+c+"\n      vec2 coords = offsetToCoords(offset, "+i+", "+o+");\n      float value = getColorAsFloat("+t.texture2D+"("+e+", coords));\n      return value;\n    }\n    "}(t,e,n.shape,n.strides,n.width,n.height,i);default:throw new Error("Invalid mode")}}e.WebGLPad=c,e.getPadFunction=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.offsetToIndices=e.copyArray=e.GeneratePoolingCode=e.WebGLMaxPool=e.WebGLGlobalMaxPool=e.WebGLAveragePool=e.WebGLGlobalAveragePool=void 0;var o=n(21),a=n(0),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){return l(t,e,!0,this.kernelShape,this.autoPad,this.strides,this.pads,this.countIncludePad)},e.prototype.createRunData=function(t,e,n){var r=[t.getOrCreateTextureData(n[0],e.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{}}},e}(o.GlobalAveragePool);e.WebGLGlobalAveragePool=s;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){return l(t,e,!1,this.kernelShape,this.autoPad,this.strides,this.pads,this.countIncludePad)},e.prototype.createRunData=function(t,e,n){var r=[t.getOrCreateTextureData(n[0],e.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{}}},e}(o.AveragePool);function l(t,e,n,r,i,o,s,c){void 0===r&&(r=[]),void 0===i&&(i=""),void 0===o&&(o=[]),void 0===s&&(s=[]);var l=e[0].dims.slice();a.PoolConvUtil.adjustPoolAttributes(n,l,r,o,s);var u=a.PoolConvUtil.computePoolOutputShape(n,l,o,r,s,i),h=a.ShapeUtil.size(r),d="";d+=c?"value /= float("+h+");":"value /= float("+h+" - pad);";var f=t.getOrCreateTextureLayout(e[0]),m="\n      "+p(f,r,s,o,"value += _X(x);",d,"0.0")+"\n    ";return{inputLayouts:[f],outputLayout:t.createTextureLayoutFromShape(u),samplers:["X"],shaderSource:m}}e.WebGLAveragePool=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){return d(t,e,!0,this.kernelShape,this.autoPad,this.strides,this.pads)},e.prototype.createRunData=function(t,e,n){var r=[t.getOrCreateTextureData(n[0])];return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{}}},e}(o.GlobalMaxPool);e.WebGLGlobalMaxPool=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){return d(t,e,!1,this.kernelShape,this.autoPad,this.strides,this.pads)},e.prototype.createRunData=function(t,e,n){var r=[t.getOrCreateTextureData(n[0])];return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{}}},e}(o.MaxPool);function d(t,e,n,r,i,o,s){void 0===r&&(r=[]),void 0===i&&(i=""),void 0===o&&(o=[]),void 0===s&&(s=[]);var c=e[0].dims.slice();a.PoolConvUtil.adjustPoolAttributes(n,c,r,o,s);var l=a.PoolConvUtil.computePoolOutputShape(n,c,o,r,s,i),u=t.createTextureLayoutFromShape(c),h="\n    "+p(u,r,s,o,"\n              value = max(_X(x), value);\n      ","","-1e5")+"\n  ";return{inputLayouts:[u],outputLayout:t.createTextureLayoutFromShape(l),samplers:["X"],shaderSource:h}}function p(t,e,n,r,i,o,s){var c=t.shape,l=t.shape.length;if(e.length<=2){var u,h=e[e.length-1],d=r[r.length-1],p=n[n.length/2-1],g=n[n.length-1],y=c[l-1],v="",b="";if(u=p+g!==0?"\n                for (int i = 0; i < "+h+"; i++) {\n                  x["+l+" - 1] = indices["+l+" - 1] * "+d+" - "+p+" + i;\n                  if (x["+l+" - 1] < 0 || x["+l+" - 1] >= "+y+") {\n                    pad++;\n                    continue;\n                  }\n                  "+i+"\n                }":"\n                for (int i = 0; i < "+h+"; i++) {\n                  x["+l+" - 1] = indices["+l+" - 1] * "+d+" - "+p+" + i;\n                  "+i+"\n                }",2===e.length){var x=e[e.length-2],_=r[r.length-2],w=n[n.length/2-2],S=n[n.length-2],T=c[l-2];v=w+S!==0?"\n              for (int j = 0; j < "+x+"; j++) {\n                x["+l+" - 2] = indices["+l+" - 2] * "+_+" - "+w+" + j;\n                if (x["+l+" - 2] < 0 || x["+l+" - 2] >= "+T+") {\n                  pad+= "+h+";\n                  continue;\n                }\n            ":"\n                for (int j = 0; j < "+x+"; j++) {\n                  x["+l+" - 2] = indices["+l+" - 2] * "+_+" - "+w+" + j;\n                ",b="\n              }\n            "}return"\n            float process(int indices["+l+"]) {\n              int x["+l+"];\n              copyVec(indices, x);\n\n              float value = "+s+";\n              int pad = 0;\n              "+v+"\n              "+u+"\n              "+b+"\n              "+o+"\n              return value;\n            }\n          "}var E=a.ShapeUtil.size(e),A=a.ShapeUtil.computeStrides(e),M=A.length,O=n.length,C=m(M),k=f(c,"inputDims"),P=f(n,"pads"),I=f(A,"kernelStrides");return"\n            "+C+"\n            float process(int indices["+l+"]) {\n                int x["+l+"];\n                copyVec(indices, x);\n                int offset["+M+"];\n                int pads["+O+"];\n                int inputDims["+l+"];\n                int kernelStrides["+M+"];\n                int strides["+M+"];\n                "+P+"\n                "+k+"\n                "+f(r,"strides")+"\n                "+I+"\n\n                float value = "+s+";\n                int pad = 0;\n                bool isPad = false;\n                for (int i = 0; i < "+E+"; i++) {\n                    offsetToIndices(i, kernelStrides, offset);\n                    isPad = false;\n                    for (int j = "+l+" - "+M+"; j < "+l+"; j++) {\n                      x[j] = indices[j] * strides[j - "+l+" + "+M+"]\n                        + offset[j - "+l+" + "+M+"] - pads[j - 2];\n                      "+(n.reduce((function(t,e){return t+e}))?"\n                if (x[j] >= inputDims[j] || x[j] < 0) {\n                  pad++;\n                  isPad = true;\n                  break;\n                }\n              }\n              if (!isPad) {\n                "+i+"\n              }":"\n                  }\n                  "+i)+"\n                }\n                "+o+"\n\n                return value;\n            }"}function f(t,e){for(var n="",r=0;r<t.length;r++)n+="\n      "+e+"["+r+"] = "+t[r]+";\n    ";return n}function m(t){return"\n    void offsetToIndices(int offset, int["+t+"] strides, out int["+t+"] indices) {\n      if ("+t+" == 0) {\n        return;\n      }\n      for (int i = 0; i < "+t+" - 1; ++i) {\n        indices[i] = offset / strides[i];\n        offset -= indices[i] * strides[i];\n      }\n      indices["+t+" - 1] = offset;\n    }"}e.WebGLMaxPool=h,e.GeneratePoolingCode=p,e.copyArray=f,e.offsetToIndices=m},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLReduceSumSquare=e.WebGLReduceLogSum=e.WebGLReduceProd=e.WebGLReduceMin=e.WebGLReduceMax=e.WebGLReduceMean=e.WebGLReduceSum=void 0;var o=n(36),a=n(0),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){for(var n=[],r=e[0].dims.length||1,i=[],o=a.ShapeUtil.normalizeAxes(this.axes,e[0].dims.length),s=this.getOps(e,o),c=s[1],l=0;l<e[0].dims.length;l++)o.indexOf(l)>=0||0===o.length?(this.keepDims&&n.push(1),c="\n        for(int j"+l+" = 0; j"+l+" < "+e[0].dims[l]+"; j"+l+"++) {\n          inputIdx["+l+"] = j"+l+";\n          "+c+"\n        }\n        "):(i.push("inputIdx["+l+"] = outputIdx["+n.length+"];"),n.push(e[0].dims[l]));var u="\n      float process(int outputIdx["+(n.length||1)+"]) {\n        float value;                 // final result\n        int inputIdx["+r+"];      // addressing input data\n        "+i.join("\n")+"\n        "+s[0]+"       // init ops for reduce max/min\n        "+c+"\n        "+s[2]+"       // final computation for reduce mean\n        return value;\n      }";return{inputLayouts:e.map((function(e){return t.getOrCreateTextureLayout(e)})),outputLayout:t.createTextureLayoutFromShape(n),samplers:["A"],shaderSource:u}},e.prototype.createRunData=function(t,e,n){var r=n.map((function(n,r){return t.getOrCreateTextureData(n,e.inputLayouts[r])}));return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{}}},e}(o.ReduceBase),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getOps=function(t){return["value = 0.0;","value += _A(inputIdx);",""]},e}(s);e.WebGLReduceSum=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getOps=function(t,e){for(var n=1,r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&(n*=t[0].dims[r]);return["value = 0.0;","value += _A(inputIdx);","value /= "+n+".;"]},e}(s);e.WebGLReduceMean=l;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getOps=function(t,e){for(var n=[],r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&n.push("inputIdx["+r+"] = 0;");return[n.join("\n")+"\nvalue = _A(inputIdx);","value = max(value, _A(inputIdx));",""]},e}(s);e.WebGLReduceMax=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getOps=function(t,e){for(var n=[],r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&n.push("inputIdx["+r+"] = 0;");return[n.join("\n")+"\nvalue = _A(inputIdx);","value = min(value, _A(inputIdx));",""]},e}(s);e.WebGLReduceMin=h;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getOps=function(t){return["value = 1.0;","value *= _A(inputIdx);",""]},e}(s);e.WebGLReduceProd=d;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getOps=function(t){return["value = 0.0;","value += _A(inputIdx);","value = log(value);"]},e}(s);e.WebGLReduceLogSum=p;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getOps=function(t){return["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""]},e}(s);e.WebGLReduceSumSquare=f},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSliceV10=e.WebGLSlice=void 0;var o=n(38),a=n(0),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){return l(t,e[0],this.starts,this.ends,this.axes)},e.prototype.createRunData=function(t,e,n){return u(t,e,n)},e}(o.Slice);e.WebGLSlice=s;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){if(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)||e.length>=4&&!t.session.isInitializer(e[3].dataId)||e.length>=5&&!t.session.isInitializer(e[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(e.length>=5&&e[4].integerData.some((function(t){return 1!==t})))throw new Error("currently non-1 steps is not supported for Slice");var n=Array.from(e[1].integerData),r=Array.from(e[2].integerData),i=e.length>=4?Array.from(e[3].integerData):[];return l(t,e[0],n,r,i)},e.prototype.createRunData=function(t,e,n){return u(t,e,n)},e}(o.SliceV10);function l(t,e,n,r,i){0===i.length&&(i=e.dims.slice(0).map((function(t,e){return e}))),i=a.ShapeUtil.normalizeAxes(i,e.dims.length),n=n.map((function(t,n){return t>e.dims[i[n]]-1?e.dims[i[n]]:a.ShapeUtil.normalizeAxis(t,e.dims[i[n]])})),r=r.map((function(t,n){return t>e.dims[i[n]]-1?e.dims[i[n]]:a.ShapeUtil.normalizeAxis(t,e.dims[i[n]])}));for(var o=e.dims.slice(),s=[],c=0;c<i.length;c++)o[i[c]]=r[c]-n[c],n[c]>0&&s.push("outputIdx["+i[c]+"] += "+n[c]+";");var l="\n      float process(int outputIdx["+o.length+"]) {\n        "+s.join("\n      ")+"\n        return _A(outputIdx);\n      }";return{inputLayouts:[t.getOrCreateTextureLayout(e)],outputLayout:t.createTextureLayoutFromShape(o),samplers:["A"],shaderSource:l}}function u(t,e,n){var r=[t.getOrCreateTextureData(n[0],e.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{}}}e.WebGLSliceV10=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSoftmax=void 0;var s=n(22),c=n(0),l=n(2),u=function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.run=function(t,e){var n=this;this.artifacts||(this.artifacts=[],this.createProgramInfos(t,e).forEach((function(e,r){var i=t.session.programManager.build(e);n.artifacts.push(i)})));var r=this.createRunDatas(t,this.artifacts.map((function(t){return t.programInfo})),e);return r.forEach((function(e,r){return t.session.programManager.run(n.artifacts[r],e)})),[r[r.length-1].outputTextureData.tensor]},e.prototype.createSoftMaxProgramInfo=function(t,e,n,r,i,o){var a=e.dims.slice(),s=t.createTextureLayoutFromShape(a),c=a,l=c.length,u=s.width,h=s.height;if(n<1||r<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.shape.length||1!==o.shape.length)throw new Error("Dimensionality of the intermediate results should be 1");if(i.shape[0]!==n||o.shape[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");var d="\n    float process(int["+l+"] indices) {\n\n      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)\n      int offset = coordsToOffset(TexCoords, "+u+", "+h+");\n\n      //determine the logical row for this index\n      int logical_row_index[1];\n      logical_row_index[0] = offset / "+r+";\n\n      float norm_factor = _Norm(logical_row_index);\n\n      // avoid possible division by 0\n      // if norm_facor is 0, all elements are zero\n      // if so, return 0\n      if(norm_factor == 0.0)\n        return 0.0;\n\n      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;\n    }";return{inputLayouts:[s,i,o],outputLayout:t.createTextureLayoutFromShape(c),samplers:["A","Max","Norm"],shaderSource:d}},e.prototype.createComputScaleProgramInfo=function(t,e,n,r,i,o){var a=t.createTextureLayoutFromShape(e.dims.slice()),s=o.length,c=a.width,u=a.height;if(n<1||r<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==o.length)throw new Error("Dimensionality of the output should be 1");if(o[0]!==n)throw new Error("Shape of the output should be equal to logical row count");if(1!==i.shape.length)throw new Error("Dimensionality of the intermediate results should be 1");if(i.shape[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");var h="\n    float process(int["+s+"] indices) {\n\n      int logical_row_start_offset = indices[0] * "+r+";\n\n      float norm_factor = 0.0;\n      float max = _Max(indices);\n      for(int i=0; i<"+r+"; ++i)\n      {\n        norm_factor += exp(getColorAsFloat("+l.getGlsl(t.session.backend.glContext.version).texture2D+"(A, offsetToCoords(logical_row_start_offset + i, "+c+", "+u+"))) - max);\n      }\n\n      return norm_factor;\n    }";return{inputLayouts:[a,i],outputLayout:t.createTextureLayoutFromShape(o),samplers:["A","Max"],shaderSource:h}},e.prototype.createComputeMaxProgramInfo=function(t,e,n,r,i){var o=t.createTextureLayoutFromShape(e.dims.slice()),a=i.length,s=o.width,c=o.height;if(n<1||r<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.length)throw new Error("Dimensionality of the output should be 1");if(i[0]!==n)throw new Error("Shape of the output should be equal to logical row count");var u=l.getGlsl(t.session.backend.glContext.version),h="\n        float process(int["+a+"] indices) {\n\n          int logical_row_start_offset = indices[0] * "+r+";\n\n          float max = getColorAsFloat("+u.texture2D+"(A, offsetToCoords(logical_row_start_offset, "+s+", "+c+" )));\n          for(int i=1; i<"+r+"; ++i)\n          {\n            float current = getColorAsFloat("+u.texture2D+"(A, offsetToCoords(logical_row_start_offset + i, "+s+", "+c+")));\n            if(current > max)\n              max = current;\n          }\n\n          return max;\n        }";return{inputLayouts:[o],outputLayout:t.createTextureLayoutFromShape(i),samplers:["A"],shaderSource:h}},e.prototype.createProgramInfos=function(t,e){var n=e[0].dims.slice(),r=c.ShapeUtil.normalizeAxis(this.axis,n.length),i=c.ShapeUtil.sizeToDimension(n,r),o=c.ShapeUtil.sizeFromDimension(n,r),a=this.createComputeMaxProgramInfo(t,e[0],i,o,[i]),s=this.createComputScaleProgramInfo(t,e[0],i,o,a.outputLayout,[i]);return[a,s,this.createSoftMaxProgramInfo(t,e[0],i,o,a.outputLayout,s.outputLayout)]},e.prototype.createRunDatas=function(t,e,n){var r=n[0].type,i=t.getOrCreateTextureData(n[0],e[0].inputLayouts[0]),o=[];o.push({inputTextureDatas:[i],outputTextureData:t.createTextureDataFromLayout(e[0].outputLayout,r),uniformData:{}});for(var s=1;s<e.length;++s)o.push({inputTextureDatas:a(o[s-1].inputTextureDatas,[o[s-1].outputTextureData]),outputTextureData:t.createTextureDataFromLayout(e[s].outputLayout,r),uniformData:{}});return o},e}(s.Softmax);e.WebGLSoftmax=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSplit=void 0;var a=n(146),s=n(0),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){var n=this;if(!this.artifacts){this.artifacts=[];for(var r=s.ShapeUtil.normalizeAxis(this.axis,e[0].dims.length),i=this.getProgramCount(t,e,r),o=0;o<i;++o){var a=this.createProgramInfo(t,e[0],r,o),c=t.session.programManager.build(a);this.artifacts.push(c)}}var l=[];return this.artifacts.forEach((function(r){var i=n.createRunData(t,r.programInfo,e);t.session.programManager.run(r,i),l.push(i.outputTextureData.tensor)})),l},e.prototype.getProgramCount=function(t,e,n){return o(s.SplitUtil.splitShape(e[0].dims,n,this.split,this.numOutputs),2)[1].length},e.prototype.createProgramInfo=function(t,e,n,r){var i=o(s.SplitUtil.splitShape(e.dims,n,this.split,this.numOutputs),2),a=i[0],c=i[1][r],l=a[r],u="\n      float process(int indices["+l.length+"]) {\n        indices["+n+"] += "+c+";\n        return _A(indices);\n      }";return{inputLayouts:[t.getOrCreateTextureLayout(e)],outputLayout:t.createTextureLayoutFromShape(l),samplers:["A"],shaderSource:u}},e.prototype.createRunData=function(t,e,n){var r=[t.getOrCreateTextureData(n[0],e.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{}}},e}(a.Split);e.WebGLSplit=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Split=void 0;var r=function(){function t(t){this.numOutputs=t}return t.prototype.initialize=function(t){this.axis=t.getInt("axis",0),this.split=t.getInts("split",[])},t.prototype.checkInputs=function(t){return!(!t||1!==t.length)&&this.checkInputTypes(t)},t.prototype.checkInputTypes=function(t){return"int8"===t[0].type||"uint8"===t[0].type||"int16"===t[0].type||"uint16"===t[0].type||"int32"===t[0].type||"uint32"===t[0].type||"float32"===t[0].type||"float64"===t[0].type||"bool"===t[0].type},t}();e.Split=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSqueeze=void 0;var o=n(39),a=n(0),s=n(10),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){var n=a.ShapeUtil.squeezeShape(e[0].dims,this.axes);return[s.reshape(t,e[0],n)]},e}(o.Squeeze);e.WebGLSqueeze=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSum=void 0;var o=n(23),a=n(2),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){var n=a.getGlsl(t.session.backend.glContext.version),r=e[0].dims.slice(),i=e.map((function(t,e){return n.texture2D+"(X"+e+",TexCoords)"})).join(" + "),o=e.map((function(t,e){return"X"+e}));return{inputLayouts:e.map((function(e){return t.getOrCreateTextureLayout(e)})),outputLayout:t.createTextureLayoutFromShape(r),samplers:o,shaderSource:"\n      void main() {\n        vec4 result = "+i+";\n        "+n.output+" = result;\n      }",hasMain:!0}},e.prototype.createRunData=function(t,e,n){var r=n.map((function(n,r){return t.getOrCreateTextureData(n,e.inputLayouts[r])}));return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{}}},e}(o.Sum);e.WebGLSum=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLTile=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){for(var n=e[0].dims.slice(),r=new Array(n.length),i=[],o=0;o<n.length;o++)r[o]=n[o]*e[1].numberData[o],i.push("inputIdx["+o+"] = int(mod(float(outputIdx["+o+"]), "+n[o]+".));");var a=r.length,s="\n    float process(int outputIdx["+a+"]) {\n      int inputIdx["+a+"];\n      "+i.join("\n")+"\n      return _A(inputIdx);\n    }";return{inputLayouts:e.map((function(e){return t.getOrCreateTextureLayout(e)})),outputLayout:t.createTextureLayoutFromShape(r),samplers:["A"],shaderSource:s}},e.prototype.createRunData=function(t,e,n){var r=n.map((function(n,r){return t.getOrCreateTextureData(n,e.inputLayouts[r])}));return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{}}},e}(n(40).Tile);e.WebGLTile=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLTranspose=void 0;var s=n(41),c=n(0),l=n(5),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.getOutputShape=function(t){var e=this.getAdjustedPerm(t[0]);return c.ShapeUtil.sortBasedOnPerm(t[0],e)},e.prototype.createProgramInfo=function(t,e){var n=e.map((function(t){return t.dims.slice()})),r=this.getAdjustedPerm(n[0]),i=this.getOutputShape(n),o=e[0].dims.length,a="\n      "+this.getPermFunctionBody("perm",r,o)+"\n      float process(int indices["+o+"]) {\n        int a["+o+"];\n        perm(a, indices);\n        return _A(a);\n      }",s=t.createTextureLayoutFromShape(i,1,i);return{inputLayouts:[t.getOrCreateTextureLayout(e[0])],outputLayout:s,samplers:["A"],shaderSource:a}},e.prototype.createRunData=function(t,e,n){var r=[t.getOrCreateTextureData(n[0],e.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{}}},e.prototype.getPositionalFunction=function(t,e,n){var r=this.getOutputShape([e]);return n||(n="perm"),{name:n,body:this.getPermFunctionBody(n,this.getAdjustedPerm(e),r.length),type:l.FunctionType.Positional,inputShape:e,outputShape:r}},e.prototype.getAdjustedPerm=function(t){var e=this.perm;return e&&e.length!==t.length&&(e=a(t.keys()).reverse()),e},e.prototype.getPermFunctionBody=function(t,e,n){var r=[];r.push("void "+t+"(out int a["+n+"], int src["+n+"]) {");for(var i=0;i<n;++i)r.push("\ta["+e[i]+"]=src["+i+"];");return r.push("\t}"),r.join("\n")},e}(s.Transpose);e.WebGLTranspose=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslIdentity=e.glslFloor=e.glslExp=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=e.WebGLUnaryOp=void 0;var o=n(43),a=n(5),s=n(2),c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.typeConstraint=e,r.glslFunc=n,r}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){var n=e[0].dims.slice(),r=t.getOrCreateTextureLayout(e[0]),i=s.getGlsl(t.session.backend.glContext.version),o="\n      "+this.glslFunc.body+"\n      void main() {\n        vec4 v = "+i.texture2D+"(A, TexCoords);\n        v = "+this.glslFunc.name+"(v);\n        "+i.output+" = v;\n      }\n      ";return{inputLayouts:[r],outputLayout:t.createTextureLayoutFromShape(n),samplers:["A"],shaderSource:o,hasMain:!0}},e.prototype.createRunData=function(t,e,n){var r=[t.getOrCreateTextureData(n[0],e.inputLayouts[0])];return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{}}},e}(o.UnaryOp);function l(t){var e=t+"_";return{body:"\n  float "+e+"(float a) {\n    return "+t+"(a);\n  }\n  vec4 "+e+"(vec4 v) {\n    return "+t+"(v);\n  }\n  ",name:e,type:a.FunctionType.ValueBased}}e.WebGLUnaryOp=c,e.glslAbs=function(){return l("abs")},e.glslAcos=function(){return l("acos")},e.glslAsin=function(){return l("asin")},e.glslAtan=function(){return l("atan")},e.glslCeil=function(){return l("ceil")},e.glslCos=function(){return l("cos")},e.glslExp=function(){return l("exp")},e.glslFloor=function(){return l("floor")},e.glslIdentity=function(){return{body:"\n  float indentity_(float a) {\n    return a;\n  }\n  vec4 indentity_(vec4 v) {\n    return v;\n  }\n  ",name:"indentity_",type:a.FunctionType.ValueBased}},e.glslLog=function(){return l("log")},e.glslNeg=function(){return{body:"\n  float neg_(float a) {\n    return -a;\n  }\n  vec4 neg_(vec4 v) {\n    return -v;\n  }\n  ",name:"neg_",type:a.FunctionType.ValueBased}},e.glslNot=function(){return{body:"\n  float not_(float a) {\n    return float( ! bool(a) );\n  }\n  bool not_(bool a) {\n    return !a;\n  }\n  vec4 not_(vec4 v) {\n    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));\n  }\n  bvec4 not_(bvec4 v) {\n    return bvec4(!v.x, !v.y, !v.z, !v.w);\n  }\n  ",name:"not_",type:a.FunctionType.ValueBased}},e.glslSin=function(){return l("sin")},e.glslRelu=function(){return{body:"\n  float relu_(float a) {\n    return max( a, 0.0 );\n  }\n  vec4 relu_(vec4 v) {\n    return max( v, 0.0 );\n  }\n  ",name:"relu_",type:a.FunctionType.ValueBased}},e.glslSigmoid=function(){return{body:"\n  float sigmoid_(float a) {\n    return 1.0 / (1.0 + exp(-a));\n  }\n  vec4 sigmoid_(vec4 v) {\n    return 1.0 / (1.0 + exp(-v));\n  }\n  ",name:"sigmoid_",type:a.FunctionType.ValueBased}},e.glslSqrt=function(){return l("sqrt")},e.glslTan=function(){return l("tan")},e.glslTanh=function(){return{body:"\n  float tanh_(float a) {\n    a = clamp(a, -10., 10.);\n    a = exp(2.*a);\n    return (a - 1.) / (a + 1.);\n  }\n  vec4 tanh_(vec4 v) {\n    v = clamp(v, -10., 10.);\n    v = exp(2.*v);\n    return (v - 1.) / (v + 1.);\n  }\n  ",name:"tanh_",type:a.FunctionType.ValueBased}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLUnsqueeze=void 0;var o=n(44),a=n(0),s=n(10),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){var n=a.ShapeUtil.unsqueezeShape(e[0].dims,this.axes);return[s.reshape(t,e[0],n)]},e}(o.Unsqueeze);e.WebGLUnsqueeze=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLUpsample=void 0;var o=n(45),a=n(2),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.run=function(t,e){return t.run(this,e)},e.prototype.createProgramInfo=function(t,e){for(var n=this,r=t.getOrCreateTextureLayout(e[0]),i=e[0].dims.map((function(t,e){return Math.floor(t*n.scales[e])})),o=t.createTextureLayoutFromShape(i),s=i.length,c=a.getGlsl(t.session.backend.glContext.version),l=new Array(s),u=new Array(s),h="\n      int output_pitches["+s+"];\n      int input_pitches["+s+"];\n      ",d=s-1;d>=0;d--)l[d]=d===s-1?1:l[d+1]*i[d+1],u[d]=d===s-1?1:u[d+1]*e[0].dims[d+1],h+="\n      output_pitches["+d+"] = "+l[d]+";\n      input_pitches["+d+"] = "+u[d]+";\n      ";var p="\n    float getInputFloat(int index) {\n      vec2 coords = offsetToCoords(index, "+r.width+", "+r.height+");\n      float value = getColorAsFloat("+c.texture2D+"(X, coords));\n      return value;\n    }\n    ";return{inputLayouts:[r],outputLayout:o,samplers:["X"],shaderSource:"nearest"===this.mode?"\n      "+p+"\n      float process(int indices["+s+"]) {\n        int input_index = 0;\n        int output_index = coordsToOffset(TexCoords, "+o.width+", "+o.height+");\n\n        "+h+"\n\n        int d, m;\n        for (int dim = 0; dim < "+s+"; ++dim) {\n          d = output_index / output_pitches[dim];\n          m = output_index - d * output_pitches[dim];\n          output_index = m;\n\n          if (scales[dim] != 1 && d > 0) {\n            int d2 = d / scales[dim];\n            m = d - d2 * scales[dim];\n            d = d2;\n          }\n          input_index += input_pitches[dim] * d;\n        }\n\n        return getInputFloat(input_index);\n      }":4===s?"\n      "+p+"\n      float process(int indices[4]) {\n        int input_index = 0;\n        int output_index = coordsToOffset(TexCoords, "+o.width+", "+o.height+");\n\n        "+h+"\n\n        int m;\n        int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;\n        index_of_dim0 = output_index / output_pitches[0];\n        m = output_index - index_of_dim0 * output_pitches[0];\n        index_of_dim1 = m / output_pitches[1];\n        m = m - index_of_dim1 * output_pitches[1];\n        index_of_dim2 = m / output_pitches[2];\n        m = m - index_of_dim2 * output_pitches[2];\n        index_of_dim3 = m;\n\n        int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;\n        index_of_input_dim2 = index_of_dim2 / scales[2];\n        y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];\n        index_of_input_dim3 = index_of_dim3 / scales[3];\n        x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];\n\n        input_index = index_of_dim0 * input_pitches[0] +\n                      index_of_dim1 * input_pitches[1] +\n                      index_of_input_dim2 * input_pitches[2] +\n                      index_of_input_dim3;\n\n        float x00 = getInputFloat(input_index);\n        float x10, x01, x11;\n\n        bool end_of_dim2 = false;\n        if (index_of_input_dim2 == ("+e[0].dims[2]+" - 1)) {\n          // It's the end in dimension 2\n          x01 = x00;\n          end_of_dim2 = true;\n        } else {\n          x01 = getInputFloat(input_index + input_pitches[2]);\n        }\n\n        if (index_of_input_dim3 == (input_pitches[2] - 1)) {\n          // It's the end in dimension 3\n          x10 = x00;\n          x11 = x01;\n        }\n        else {\n          x10 = getInputFloat(input_index + 1);\n          x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);\n        }\n\n        float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);\n        float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);\n        return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);\n      }":"\n      "+p+"\n      float process(int indices[2]) {\n        int input_index = 0;\n        int output_index = coordsToOffset(TexCoords, "+o.width+", "+o.height+");\n\n        "+h+"\n\n        int m;\n        int index_of_dim0, index_of_dim1;\n        index_of_dim0 = output_index / output_pitches[0];\n        m = output_index - index_of_dim0 * output_pitches[0];\n        index_of_dim1 = m;\n\n        int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;\n        index_of_input_dim0 = index_of_dim0 / scales[0];\n        y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];\n        index_of_input_dim1 = index_of_dim1 / scales[1];\n        x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];\n\n        input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;\n\n        float x00 = getInputFloat(input_index);\n        float x10, x01, x11;\n\n        bool end_of_dim0 = false;\n        if (index_of_input_dim0 == ("+e[0].dims[0]+" - 1)) {\n          // It's the end in dimension 0\n          x01 = x00;\n          end_of_dim0 = true;\n        } else {\n          x01 = getInputFloat(input_index + input_pitches[0]);\n        }\n\n        if (index_of_input_dim1 == (input_pitches[0] - 1)) {\n          // It's the end in dimension 1\n          x10 = x00;\n          x11 = x01;\n        }\n        else {\n          x10 = getInputFloat(input_index + 1);\n          x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);\n        }\n\n        float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);\n        float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);\n        return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);\n      }",variables:[{name:"scales",type:"int",arrayLength:this.scales.length}]}},e.prototype.createRunData=function(t,e,n){var r=n.map((function(n,r){return t.getOrCreateTextureData(n,e.inputLayouts[r])}));return{inputTextureDatas:r,outputTextureData:t.createTextureDataFromLayout(e.outputLayout,r[0].tensor.type),uniformData:{scales:this.scales.map((function(t){return Math.ceil(t)}))}}},e}(o.Upsample);e.WebGLUpsample=s},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;var o=n(25),a=n(3),s=n(155),c=n(2),l=function(){function t(t,e){this.profiler=t,this.glContext=e,this.repo=new Map,this.attributesBound=!1}return t.prototype.getArtifact=function(t){return this.repo.get(t)},t.prototype.setArtifact=function(t,e){this.repo.set(t,e)},t.prototype.run=function(t,e){var n=this;this.profiler.event("backend","ProgramManager.run",(function(){var r=n.glContext.gl,i=t.program;r.useProgram(i);try{n.bindOutput(e.outputTextureData),n.attributesBound||n.bindAttributes(t.attribLocations),n.bindUniforms(t.uniformLocations,e.uniformData,e.inputTextureDatas)}catch(e){throw a.Logger.error("ProgramManager",t.programInfo.shaderSource),e}n.profiler.event("backend","GlContext.draw()",(function(){n.doDraw(t,e),r.flush()}))}))},t.prototype.dispose=function(){var t=this;this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach((function(e){return t.glContext.deleteProgram(e.program)}))},t.prototype.build=function(t){var e=this;return this.profiler.event("backend","ProgramManager.build",(function(){var n=new s.GlslPreprocessor(e.glContext,t),r=n.preprocess(),i=e.compile(r);return{programInfo:t,program:i,uniformLocations:e.getUniformLocations(i,n.context.programInfo.samplers,n.context.programInfo.variables),attribLocations:e.getAttribLocations(i)}}))},t.prototype.doDraw=function(t,e){e.draw?(a.Logger.verbose("ProgramManager","Custom draw function"),e.draw(this.glContext,t)):this.glContext.draw()},t.prototype.compile=function(t){if(!this.vertexShader){a.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");var e=c.getVertexShaderSource(this.glContext.version);this.vertexShader=this.glContext.compileShader(e,this.glContext.gl.VERTEX_SHADER)}o.env.debug&&a.Logger.verbose("ProrgramManager","FragShader:\n"+t+"\n");var n=this.glContext.compileShader(t,this.glContext.gl.FRAGMENT_SHADER),r=this.glContext.createProgram(this.vertexShader,n);return this.glContext.deleteShader(n),r},t.prototype.bindOutput=function(t){a.Logger.verbose("ProrgramManager","Binding output texture to Framebuffer: w/h="+t.width+"/"+t.height+", shape="+t.shape+", type="+t.tensor.type),this.glContext.attachFramebuffer(t.texture,t.width,t.height)},t.prototype.bindAttributes=function(t){var e=t.position,n=t.textureCoord;this.glContext.setVertexAttributes(e,n),this.attributesBound=!0},t.prototype.bindUniforms=function(t,e,n){var r,o,a=this.glContext.gl,s=0;try{for(var c=i(t),l=c.next();!l.done;l=c.next()){var u=l.value,h=u.name,d=u.type,p=u.location,f=u.arrayLength;switch(d){case"sampler2D":this.bindTexture(n[s],p,s),s++;break;case"float":f?a.uniform1fv(p,e[h]):a.uniform1f(p,e[h]);break;case"int":f?a.uniform1iv(p,e[h]):a.uniform1i(p,e[h]);break;default:throw new Error("Uniform not implemented: "+d)}}}catch(t){r={error:t}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}},t.prototype.bindTexture=function(t,e,n){this.glContext.bindTextureToUniform(t.texture,n,e)},t.prototype.getAttribLocations=function(t){return{position:this.getAttribLocation(t,"position"),textureCoord:this.getAttribLocation(t,"textureCoord")}},t.prototype.getUniformLocations=function(t,e,n){var o,a,s,c,l=[];if(e)try{for(var u=i(e),h=u.next();!h.done;h=u.next()){var d=h.value;l.push({name:d,type:"sampler2D",location:this.getUniformLocation(t,d)})}}catch(t){o={error:t}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}if(n)try{for(var p=i(n),f=p.next();!f.done;f=p.next()){var m=f.value;l.push(r(r({},m),{location:this.getUniformLocation(t,m.name)}))}}catch(t){s={error:t}}finally{try{f&&!f.done&&(c=p.return)&&c.call(p)}finally{if(s)throw s.error}}return l},t.prototype.getUniformLocation=function(t,e){var n=this.glContext.gl.getUniformLocation(t,e);if(null===n)throw new Error("Uniform "+e+" not found.");return n},t.prototype.getAttribLocation=function(t,e){return this.glContext.gl.getAttribLocation(t,e)},t}();e.ProgramManager=l},function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;var i=n(5),o=n(156),a=n(157),s=n(2),c=function(){function t(t,e){var n=this;this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new i.GlslContext(t,e),Object.keys(a.glslRegistry).forEach((function(t){var e=new a.glslRegistry[t](n.context);n.libs[t]=e}));var r=this.glslLibRoutineDependencyGraph;for(var o in this.libs){var s=this.libs[o].getFunctions();for(var c in s){var l=o+"."+c,u=void 0;r[l]?(u=r[l]).routineBody=s[c].routineBody:(u=new i.GlslLibRoutineNode(l,s[c].routineBody),r[l]=u);var h=s[c].dependencies;if(h)for(var d=0;d<h.length;++d)if(r[h[d]])u.addDependency(r[h[d]]);else{var p=new i.GlslLibRoutineNode(h[d]);r[h[d]]=p,u.addDependency(p)}}}}return t.prototype.preprocess=function(){var t=this.context.programInfo,e=t.shaderSource;return this.context.programInfo.hasMain||(e=e+"\n      "+s.getDefaultFragShaderMain(this.context.glContext.version,t.outputLayout.shape.length)),e=o.replaceInlines(e),s.getFragShaderPreamble(this.context.glContext.version)+"\n    "+this.getUniforms(t.samplers,t.variables)+"\n    "+this.getImports(e)+"\n    "+e},t.prototype.getImports=function(t){var e=this.selectGlslLibRoutinesToBeIncluded(t);if(0===e.length)return"";for(var n="",r=0;r<e.length;++r){if(!e[r].routineBody)throw new Error("Missing body for the Glsl Library routine: "+e[r].name);n+=e[r].routineBody+"\n"}return n},t.prototype.selectGlslLibRoutinesToBeIncluded=function(t){var e=this,n=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach((function(r){var i=r.split(".")[1];-1!==t.indexOf(i)&&n.push(e.glslLibRoutineDependencyGraph[r])})),i.TopologicalSortGlslRoutines.returnOrderedNodes(n)},t.prototype.getUniforms=function(t,e){var n,i,o,a,s=[];if(t)try{for(var c=r(t),l=c.next();!l.done;l=c.next()){var u=l.value;s.push("uniform sampler2D "+u+";")}}catch(t){n={error:t}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}if(e)try{for(var h=r(e),d=h.next();!d.done;d=h.next()){var p=d.value;s.push("uniform "+p.type+" "+p.name+(p.arrayLength?"["+p.arrayLength+"]":"")+";")}}catch(t){o={error:t}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}return s.join("\n")},t}();e.GlslPreprocessor=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;var r=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(t){for(var e,n={};null!==(e=r.exec(t));){var i=e[3].split(",").map((function(t){var e=t.trim().split(" ");return e&&2===e.length?{type:e[0],name:e[1]}:null})).filter((function(t){return null!==t}));n[e[2]]={params:i,body:e[4]}}for(var o in n)for(var a="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",o),s=new RegExp(a,"gm"),c=function(){var r=e[1],i=e[2],a=e[3].split(","),s=r?r+" "+i+";":"",c=n[o].body,l="";n[o].params.forEach((function(t,e){t&&(l+=t.type+" "+t.name+" = "+a[e]+";\n")}));var u="\n      "+s+"\n      {\n        "+(c=(c=l+"\n "+c).replace("return",i+" = "))+"\n      }\n      ";t=t.replace(e[0],u)};null!==(e=s.exec(t));)c();return t=t.replace(r,"")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;var r=n(158),i=n(159),o=n(160),a=n(161),s=n(162);e.glslRegistry={encoding:i.EncodingGlslLib,fragcolor:o.FragColorGlslLib,vec:s.VecGlslLib,shapeUtils:a.ShapeUtilsGlslLib,coordinates:r.CoordsGlslLib}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;var a=n(5),s=n(2),c=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getFunctions=function(){return o(o(o(o({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom())},e.prototype.getCustomTypes=function(){return{}},e.prototype.offsetToCoords=function(){return{offsetToCoords:new a.GlslLibRoutine("\n      vec2 offsetToCoords(int offset, int width, int height) {\n        int t = offset / width;\n        int s = offset - t*width;\n        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);\n        return coords;\n      }\n      ")}},e.prototype.coordsToOffset=function(){return{coordsToOffset:new a.GlslLibRoutine("\n      int coordsToOffset(vec2 coords, int width, int height) {\n        float s = coords.s * float(width);\n        float t = coords.t * float(height);\n        int offset = int(t) * width + int(s);\n        return offset;\n      }\n      ")}},e.prototype.toVec=function(){for(var t=this.context.programInfo.outputLayout,e=t.shape.length,n=t.strides,r=t.width,i=t.height,o=[],s=0;s<e-1;++s)o.push("\n        c["+s+"] = offset / "+n[s]+";"),o.push("\n        offset -= c["+s+"] * "+n[s]+";");o.push("\n        c["+(e-1)+"] = offset;");var c="\n      void toVec(vec2 texCoords, out int c["+e+"]) {\n        int offset = coordsToOffset(texCoords, "+r+", "+i+");\n        "+o.join("")+"\n      }\n      void toVec(int offset, out int c["+e+"]) {\n        "+o.join("")+"\n      }\n    ";return{toVec:new a.GlslLibRoutine(c,["coordinates.coordsToOffset"])}},e.prototype.valueFrom=function(){var t=this,e=this.context.programInfo,n={};return this.context.programInfo.samplers.forEach((function(r,i){var o=e.inputLayouts[i],s=o.shape.length,c="_"+r;n[c]=new a.GlslLibRoutine(t.getValueFromSingle(r,s,o.width,o.height,!1),["shapeUtils.indicesToOffset"+c,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),n[c+="_T"]=new a.GlslLibRoutine(t.getValueFromSingle(r,s,o.width,o.height,!0),["shapeUtils.indicesToOffset"+c,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])})),n},e.prototype.getValueFromSingle=function(t,e,n,r,i){var o="_"+t;return i&&(o+="_T"),"\n        float "+o+"(int m["+e+"]) {\n          int offset = indicesToOffset"+o+"(m);\n          vec2 coords = offsetToCoords(offset, "+n+", "+r+");\n          float value = getColorAsFloat("+s.getGlsl(this.context.glContext.version).texture2D+"("+t+", coords));\n          return value;\n        }\n        "},e}(a.GlslLib);e.CoordsGlslLib=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;var a=n(5),s=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getFunctions=function(){return o(o({},this.encodeFloat32()),this.decodeFloat32())},e.prototype.getCustomTypes=function(){return{}},e.prototype.encodeFloat32=function(){return{encode:new a.GlslLibRoutine("highp vec4 encode(highp float f) {\n        return vec4(f, 0.0, 0.0, 0.0);\n      }\n        ")}},e.prototype.decodeFloat32=function(){return{decode:new a.GlslLibRoutine("highp float decode(highp vec4 rgba) {\n        return rgba.r;\n      }\n        ")}},e.prototype.encodeUint8=function(){var t=e.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new a.GlslLibRoutine("\n      highp vec4 encode(highp float f) {\n        highp float F = abs(f);\n        highp float Sign = step(0.0,-f);\n        highp float Exponent = floor(log2(F));\n        highp float Mantissa = (exp2(- Exponent) * F);\n        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));\n        highp vec4 rgba;\n        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));\n        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);\n        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));\n        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));\n        "+t+"\n        rgba = rgba / 255.0; // values need to be normalized to [0,1]\n        return rgba;\n    }\n        ")}},e.prototype.decodeUint8=function(){var t=e.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new a.GlslLibRoutine("\n        highp float decode(highp vec4 rgba) {\n          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]\n          "+t+"\n          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;\n          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;\n          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);\n          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));\n          return Result;\n      }\n        ")}},e.isLittleEndian=function(){var t=new ArrayBuffer(4),e=new Uint32Array(t),n=new Uint8Array(t);if(e[0]=3735928559,239===n[0])return!0;if(222===n[0])return!1;throw new Error("unknown endianness")},e}(a.GlslLib);e.EncodingGlslLib=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;var a=n(5),s=n(2),c=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getFunctions=function(){return o(o({},this.setFragColor()),this.getColorAsFloat())},e.prototype.getCustomTypes=function(){return{}},e.prototype.setFragColor=function(){var t=s.getGlsl(this.context.glContext.version);return{setFragColor:new a.GlslLibRoutine("\n        void setFragColor(float value) {\n            "+t.output+" = encode(value);\n        }\n        ",["encoding.encode"])}},e.prototype.getColorAsFloat=function(){return{getColorAsFloat:new a.GlslLibRoutine("\n        float getColorAsFloat(vec4 color) {\n            return decode(color);\n        }\n        ",["encoding.decode"])}},e}(a.GlslLib);e.FragColorGlslLib=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;var a=n(5),s=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getFunctions=function(){return o(o(o(o(o({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())},e.prototype.getCustomTypes=function(){return{}},e.prototype.bcastIndex=function(){var t=this.context.programInfo,e=t.outputLayout.shape.length,n={};return this.context.programInfo.samplers.forEach((function(r,i){var o=t.inputLayouts[i].shape;if(o.length<=e){for(var s=o.length,c=e-s,l="bcastIndices_"+r,u="",h=0;h<s;++h)u+="\n          realIndices["+h+"] = int( mod(float(bcastedIndices["+(c+h)+"]), "+o[h]+".0) );\n          ";var d="\n        void "+l+" (int bcastedIndices["+e+"], out int realIndices["+s+"]) {\n          "+u+"\n        }\n        ";n[l]=new a.GlslLibRoutine(d)}})),n},e.prototype.bcastMatmulIndex=function(){var t=this.context.programInfo,e=t.outputLayout.shape.length,n={};return this.context.programInfo.samplers.forEach((function(r,i){var o=t.inputLayouts[i].shape;if(!(o.length<2||o.length>e)){for(var s=o.length,c=e-s,l="bcastMatmulIndices_"+r,u="",h=0;h<s-2;++h)u+="\n          realIndices["+h+"] = int( mod(float(bcastedIndices["+(c+h)+"]), "+o[h]+".0) );\n          ";var d="\n        void "+l+"(int bcastedIndices["+e+"], out int realIndices["+s+"]) {\n          "+u+"\n          realIndices["+(s-1)+"] = bcastedIndices["+(e-1)+"];\n          realIndices["+(s-2)+"] = bcastedIndices["+(e-2)+"];\n        }\n        ";n[l]=new a.GlslLibRoutine(d)}})),n},e.prototype.indicesToOffset=function(){var t=this.context.programInfo,n={};return this.context.programInfo.samplers.forEach((function(r,i){var o=t.inputLayouts[i].shape,s=t.inputLayouts[i].strides,c=o.length,l="indicesToOffset_"+r;n[l]=new a.GlslLibRoutine(e.indexToOffsetSingle(l,c,s)),n[l="indicesToOffset_"+r+"_T"]=new a.GlslLibRoutine(e.indexToOffsetSingle(l,c,s.slice().reverse()))})),n},e.indexToOffsetSingle=function(t,e,n){for(var r="",i=e-1;i>=0;--i)r+="\n        offset += indices["+i+"] * "+n[i]+";\n        ";return"\n      int "+t+"(int indices["+e+"]) {\n        int offset = 0;\n        "+r+"\n        return offset;\n      }\n      "},e.prototype.offsetToIndices=function(){var t=this.context.programInfo,n={};return this.context.programInfo.samplers.forEach((function(r,i){var o=t.inputLayouts[i].shape,s=t.inputLayouts[i].strides,c=o.length,l="offsetToIndices_"+r;n[l]=new a.GlslLibRoutine(e.offsetToIndicesSingle(l,c,s)),n[l="offsetToIndices_"+r+"_T"]=new a.GlslLibRoutine(e.offsetToIndicesSingle(l,c,s.slice().reverse()))})),n},e.offsetToIndicesSingle=function(t,e,n){for(var r=[],i=0;i<e-1;++i)r.push("\n      indices["+i+"] = offset / "+n[i]+";"),r.push("\n        offset -= indices["+i+"] * "+n[i]+";");return r.push("\n      indices["+(e-1)+"] = offset;"),"\n      void "+t+"(int offset, out int indices["+e+"]) {\n        "+r.join("")+"\n      }\n      "},e.prototype.incrementIndices=function(){var t=this.context.programInfo,e={};return this.context.programInfo.samplers.forEach((function(n,r){for(var i=t.inputLayouts[r].shape,o=i.length,s="incrementIndices_"+n,c="",l=0;l<o;++l)c+="\n        shape["+l+"] = "+i[l]+";";var u="\n        void "+s+"(int axis, out int indices["+o+"]) {\n          int shape["+o+"];\n          "+c+";\n          for(int i = "+o+" -1 ; i >= 0; --i) {\n            if(i > axis) continue;\n            indices[i] += 1;\n            if(indices[i] < shape[i]) {\n              break;\n            }\n            indices[i] = 0;\n          }\n        }\n        ";e[s]=new a.GlslLibRoutine(u)})),e},e}(a.GlslLib);e.ShapeUtilsGlslLib=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;var a=n(5),s=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getCustomTypes=function(){return{}},e.prototype.getFunctions=function(){return o(o(o(o({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())},e.prototype.binaryVecFunctions=function(){var t=this.context.programInfo.outputLayout.shape.length,e={add:"+=",sub:"-=",mul:"*=",div:"/="},n={};for(var r in e){for(var i=r+"Vec",o="",s=0;s<t;++s)o+="\n          dest["+s+"] "+e[r]+" src["+s+"];\n          ";var c="\n        void "+i+"(int src["+t+"], out int dest["+t+"]) {\n          "+o+"\n        }\n        ";n[i]=new a.GlslLibRoutine(c)}return n},e.prototype.copyVec=function(){for(var t=this.context.programInfo.outputLayout.shape.length,e="",n=0;n<t;++n)e+="\n        dest["+n+"] = src["+n+"];\n        ";var r="\n      void copyVec(int src["+t+"], out int dest["+t+"]) {\n        "+e+"\n      }\n      ";return{copyVec:new a.GlslLibRoutine(r)}},e.prototype.setVecItem=function(){for(var t=this.context.programInfo.outputLayout.shape.length,e="\n        if(index < 0)\n            index ="+t+" + index;\n        if (index == 0)\n            m[0] = value;\n        ",n=1;n<t-1;++n)e+="\n        else if (index == "+n+")\n            m["+n+"] = value;\n            ";var r="\n      void setVecItem(out int m["+t+"], int index, int value) {\n        "+(e+="\n        else\n            m["+(t-1)+"] = value;\n        ")+"\n      }\n        ";return{setVecItem:new a.GlslLibRoutine(r)}},e.prototype.getVecItem=function(){for(var t=this.context.programInfo.outputLayout.shape.length,e="\n        if(index < 0)\n            index = "+t+" + index;\n        if (index == 0)\n            return m[0];\n      ",n=1;n<t-1;++n)e+="\n        else if (index == "+n+")\n            return m["+n+"];\n      ";var r="\n      int getVecItem(int m["+t+"], int index) {\n        "+(e+="\n        else\n            return m["+(t-1)+"];\n        ")+"\n      }\n    ";return{getVecItem:new a.GlslLibRoutine(r)}},e}(a.GlslLib);e.VecGlslLib=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysKeepOriginalSizeStrategy=void 0;var r=n(3),i=function(){function t(t){this.maxTextureSize=t}return t.prototype.computeTextureWH=function(t,e){if(0===t.length)return[1,1];var n=this.maxTextureSize;if(e){var i=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce((function(t,e){return t*e})),o=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce((function(t,e){return t*e}));if(!(i>n||o>n))return[i,o];r.Logger.verbose("TextureLayout","Given width/height preferences were unattainable: shape:"+t+", breakAxis:"+e.breakAxis)}for(var a=t.reduce((function(t,e){return t*e})),s=Math.floor(Math.sqrt(a));s<n&&s<a&&a%s!=0;s++);if(s>=n||a%s!=0)throw new Error("The given dimensions are outside this GPU's boundaries: "+t);return[s,a/s]},t}();e.AlwaysKeepOriginalSizeStrategy=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;var r=n(3),i=function(){function t(t,e,n,r){this.glContext=t,this.layoutStrategy=e,this.profiler=n,this.config=r,r.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}return t.prototype.createTextureFromLayout=function(t,e,n,i){var o,a,s=this.toEncoderType(t),c=this.glContext.getEncoder(s,e.channels||1,i);if(this.config.reuseTextures){o=e.width+"x"+e.height+"_"+c.format+"_"+c.internalFormat+"_"+c.textureType,(a=this.inUseTextures.get(o))||(a=[],this.inUseTextures.set(o,a));var l=this.idleTextures.get(o);if(l&&l.length>0){var u=l.pop();return a.push(u),1===i&&this.glContext.updateTexture(u,e.width,e.height,c,this.toTextureData(t,n)),u}}r.Logger.verbose("TextureManager","Creating new texture of size "+e.width+"x"+e.height);var h=this.glContext.allocateTexture(e.width,e.height,c,this.toTextureData(t,n));return this.config.reuseTextures&&(a.push(h),this.textureLookup.set(h,o)),h},t.prototype.readTexture=function(t,e,n){var r=this;return n||(n=1),this.profiler.event("backend","TextureManager.readTexture",(function(){var i=t.shape.reduce((function(t,e){return t*e}))*n,o=r.glContext.readTexture(t.texture,t.width,t.height,i,r.toEncoderType(e),n);return r.toTensorData(e,o)}))},t.prototype.readUint8TextureAsFloat=function(t){var e=this;return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",(function(){var n=t.shape.reduce((function(t,e){return t*e})),r=e.glContext.readTexture(t.texture,t.width,t.height,4*n,"byte",4);return new Float32Array(r.buffer,r.byteOffset,n)}))},t.prototype.releaseTexture=function(t,e){var n;if(this.config.reuseTextures&&(n=this.textureLookup.get(t.texture))){e&&this.textureLookup.delete(n);var i=this.inUseTextures.get(n);if(i){var o=i.indexOf(t.texture);if(-1!==o){i.splice(o,1);var a=this.idleTextures.get(n);a||(a=[],this.idleTextures.set(n,a)),a.push(t.texture)}}}n&&!e||(r.Logger.verbose("TextureManager","Deleting texture of size "+t.width+"x"+t.height),this.glContext.deleteTexture(t.texture))},t.prototype.toTensorData=function(t,e){return e instanceof Float32Array?e:new Float32Array(e)},t.prototype.toTextureData=function(t,e){if(e)return e instanceof Float32Array?e:new Float32Array(e)},t.prototype.toEncoderType=function(t){return"float"},t.prototype.clearActiveTextures=function(){this.glContext.clearActiveTextures()},t}();e.TextureManager=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;var r=n(3),i=n(166),o={};function a(t){var e,n=function(){var t=document.createElement("canvas");return t.width=1,t.height=1,t}(),o={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!t||"webgl2"===t)&&(e=n.getContext("webgl2",o)))try{return new i.WebGLContext(e,2)}catch(t){r.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl2'. Error: "+t)}if((!t||"webgl"===t)&&(e=n.getContext("webgl",o)||n.getContext("experimental-webgl",o)))try{return new i.WebGLContext(e,1)}catch(t){r.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: "+t)}throw new Error("WebGL is not supported")}e.createWebGLContext=function t(e){var n;e&&"webgl2"!==e||!("webgl2"in o)?e&&"webgl"!==e||!("webgl"in o)||(n=o.webgl):n=o.webgl2,n=n||a(e),e=e||1===n.version?"webgl":"webgl2";var r=n.gl;return o[e]=n,r.isContextLost()?(delete o[e],t(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),n)},e.createNewWebGLContext=a},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=void 0;var a=n(25),s=o(n(167)),c=function(){function t(t,e){this.frameBufferBound=!1,this.gl=t,this.version=e,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}return t.prototype.allocateTexture=function(t,e,n,r){var i=this.gl,o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE);var a=r?n.encode(r,t*e):null;return i.texImage2D(i.TEXTURE_2D,0,n.internalFormat,t,e,0,n.format,n.textureType,a),this.checkError(),o},t.prototype.updateTexture=function(t,e,n,r,i){var o=this.gl;o.bindTexture(o.TEXTURE_2D,t);var a=r.encode(i,e*n);o.texSubImage2D(o.TEXTURE_2D,0,0,0,e,n,r.format,r.textureType,a),this.checkError()},t.prototype.attachFramebuffer=function(t,e,n){var r=this.gl;r.bindTexture(r.TEXTURE_2D,t),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),this.checkError(),r.viewport(0,0,e,n),r.scissor(0,0,e,n)},t.prototype.readTexture=function(t,e,n,r,i,o){var a=this.gl;o||(o=1),this.frameBufferBound||this.attachFramebuffer(t,e,n);var s=this.getEncoder(i,o),c=s.allocate(e*n);return a.bindTexture(a.TEXTURE_2D,t),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,t,0),a.readPixels(0,0,e,n,a.RGBA,s.textureType,c),this.checkError(),s.decode(c,r)},t.prototype.isFramebufferReady=function(){return!0},t.prototype.getActiveTexture=function(){var t=this.gl;return"TEXTURE"+(t.getParameter(this.gl.ACTIVE_TEXTURE)-t.TEXTURE0)},t.prototype.getTextureBinding=function(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)},t.prototype.getFramebufferBinding=function(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)},t.prototype.setVertexAttributes=function(t,e){var n=this.gl;n.vertexAttribPointer(t,3,n.FLOAT,!1,20,0),n.enableVertexAttribArray(t),-1!==e&&(n.vertexAttribPointer(e,2,n.FLOAT,!1,20,12),n.enableVertexAttribArray(e)),this.checkError()},t.prototype.createProgram=function(t,e){var n=this.gl,r=n.createProgram();return n.attachShader(r,t),n.attachShader(r,e),n.linkProgram(r),r},t.prototype.compileShader=function(t,e){var n=this.gl,r=n.createShader(e);if(!r)throw new Error("createShader() returned null with type "+e);if(n.shaderSource(r,t),n.compileShader(r),!1===n.getShaderParameter(r,n.COMPILE_STATUS))throw new Error("Failed to compile shader: "+n.getShaderInfoLog(r));return r},t.prototype.deleteShader=function(t){this.gl.deleteShader(t)},t.prototype.bindTextureToUniform=function(t,e,n){var r=this.gl;r.activeTexture(r.TEXTURE0+e),this.checkError(),r.bindTexture(r.TEXTURE_2D,t),this.checkError(),r.uniform1i(n,e),this.checkError()},t.prototype.draw=function(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()},t.prototype.checkError=function(){if(a.env.debug){var t=this.gl,e=t.getError(),n="";switch(e){case t.NO_ERROR:return;case t.INVALID_ENUM:n="INVALID_ENUM";break;case t.INVALID_VALUE:n="INVALID_VALUE";break;case t.INVALID_OPERATION:n="INVALID_OPERATION";break;case t.INVALID_FRAMEBUFFER_OPERATION:n="INVALID_FRAMEBUFFER_OPERATION";break;case t.OUT_OF_MEMORY:n="OUT_OF_MEMORY";break;case t.CONTEXT_LOST_WEBGL:n="CONTEXT_LOST_WEBGL";break;default:n="Unknown WebGL Error: "+e.toString(16)}throw new Error(n)}},t.prototype.deleteTexture=function(t){this.gl.deleteTexture(t)},t.prototype.deleteProgram=function(t){this.gl.deleteProgram(t)},t.prototype.getEncoder=function(t,e,n){if(void 0===n&&(n=0),2===this.version)return new s.RedFloat32DataEncoder(this.gl,e);switch(t){case"float":return 1===n||this.isRenderFloat32Supported?new s.RGBAFloatDataEncoder(this.gl,e):new s.RGBAFloatDataEncoder(this.gl,e,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new s.Uint8DataEncoder(this.gl,e);default:throw new Error("Invalid dataType: "+t)}},t.prototype.clearActiveTextures=function(){for(var t=this.gl,e=0;e<this.maxTextureImageUnits;++e)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,null)},t.prototype.dispose=function(){if(!this.disposed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexbuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.finish(),this.disposed=!0}},t.prototype.createDefaultGeometry=function(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])},t.prototype.createVertexbuffer=function(){var t=this.gl,e=t.createBuffer();if(!e)throw new Error("createBuffer() returned null");var n=this.createDefaultGeometry();return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),this.checkError(),e},t.prototype.createFramebuffer=function(){var t=this.gl.createFramebuffer();if(!t)throw new Error("createFramebuffer returned null");return t},t.prototype.queryVitalParameters=function(){var t=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),1===this.version&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.version},t.prototype.getExtensions=function(){2===this.version?this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))},t.prototype.checkFloatTextureAttachableToFrameBuffer=function(){var t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);var n=2===this.version?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,n,1,1,0,t.RGBA,t.FLOAT,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(r),i},t.prototype.checkRenderFloat32=function(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer},t.prototype.checkFloat32Download=function(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else{if(!this.textureFloatExtension)return!1;if(!this.gl.getExtension("WEBGL_color_buffer_float"))return!1}return this.isFloatTextureAttachableToFrameBuffer},t.prototype.checkFloat32Blend=function(){var t,e,n,r,i,o=this.gl;try{t=o.createTexture(),e=o.createFramebuffer(),o.bindTexture(o.TEXTURE_2D,t);var a=2===this.version?o.RGBA32F:o.RGBA;return o.texImage2D(o.TEXTURE_2D,0,a,1,1,0,o.RGBA,o.FLOAT,null),o.bindFramebuffer(o.FRAMEBUFFER,e),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,t,0),o.enable(o.BLEND),!!(n=o.createShader(o.VERTEX_SHADER))&&(o.shaderSource(n,"void main(){}"),o.compileShader(n),!!(r=o.createShader(o.FRAGMENT_SHADER))&&(o.shaderSource(r,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),o.compileShader(r),!!(i=o.createProgram())&&(o.attachShader(i,n),o.attachShader(i,r),o.linkProgram(i),o.useProgram(i),o.drawArrays(o.POINTS,0,1),o.getError()===o.NO_ERROR)))}finally{o.disable(o.BLEND),i&&o.deleteProgram(i),n&&o.deleteShader(n),r&&o.deleteShader(r),e&&(o.bindFramebuffer(o.FRAMEBUFFER,null),o.deleteFramebuffer(e)),t&&(o.bindTexture(o.TEXTURE_2D,null),o.deleteTexture(t))}},t}();e.WebGLContext=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;var r=n(3),i=function(){function t(t,e){if(void 0===e&&(e=1),1===e)this.internalFormat=t.R32F,this.format=t.RED,this.textureType=t.FLOAT,this.channelSize=e;else{if(4!==e)throw new Error("Invalid number of channels: "+e);this.internalFormat=t.RGBA32F,this.format=t.RGBA,this.textureType=t.FLOAT,this.channelSize=e}}return t.prototype.encode=function(t,e){var n,i;return t.constructor!==Float32Array&&(r.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),i=new Float32Array(t)),e*this.channelSize>t.length?(r.Logger.warning("Encoder","Source data too small. Allocating larger array"),i=t,n=this.allocate(e*this.channelSize),i.forEach((function(t,e){return n[e]=t}))):n=i=t,n},t.prototype.allocate=function(t){return new Float32Array(4*t)},t.prototype.decode=function(t,e){return 1===this.channelSize?t.filter((function(t,e){return e%4==0})).subarray(0,e):t.subarray(0,e)},t}();e.RedFloat32DataEncoder=i;var o=function(){function t(t,e,n){if(void 0===e&&(e=1),1!==e&&4!==e)throw new Error("Invalid number of channels: "+e);this.internalFormat=t.RGBA,this.format=t.RGBA,this.channelSize=e,this.textureType=n||t.FLOAT}return t.prototype.encode=function(t,e){var n=t;return 1===this.channelSize&&(r.Logger.verbose("Encoder","Exploding into a larger array"),n=this.allocate(e),t.forEach((function(t,e){return n[4*e]=t}))),n},t.prototype.allocate=function(t){return new Float32Array(4*t)},t.prototype.decode=function(t,e){return 1===this.channelSize?t.filter((function(t,e){return e%4==0})).subarray(0,e):t.subarray(0,e)},t}();e.RGBAFloatDataEncoder=o;var a=function(){function t(t,e){if(void 0===e&&(e=1),this.channelSize=4,1===e)this.internalFormat=t.ALPHA,this.format=t.ALPHA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else{if(4!==e)throw new Error("Invalid number of channels: "+e);this.internalFormat=t.RGBA,this.format=t.RGBA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e}}return t.prototype.encode=function(t,e){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},t.prototype.allocate=function(t){return new Uint8Array(t*this.channelSize)},t.prototype.decode=function(t,e){if(t instanceof Uint8Array)return t.subarray(0,e);throw new Error("Invalid array type: "+t.constructor)},t}();e.Uint8DataEncoder=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envImpl=void 0;var r=n(25),i=function(){function t(){}return Object.defineProperty(t.prototype,"debug",{get:function(){return r.env.debug},set:function(t){r.env.debug=t},enumerable:!1,configurable:!0}),t}();e.envImpl=new i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;var a=o(n(51));e.Tensor=a.Tensor},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.InferenceSession=void 0;var a=o(n(173));e.InferenceSession=a.InferenceSession},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.InferenceSession=void 0;var c=n(174),l=o(n(52)),u=function(){function t(t){this.session=new c.Session(t)}return t.prototype.loadModel=function(t,e,n){if("string"==typeof t)return this.session.loadModel(t);if("undefined"!=typeof Blob&&t instanceof Blob){var r=URL.createObjectURL(t);return this.session.loadModel(r)}if(t instanceof ArrayBuffer)return this.session.loadModel(t,e,n);if(ArrayBuffer.isView(t))return this.session.loadModel(t);throw new Error("Model type is not supported.")},t.prototype.run=function(t,e){return a(this,void 0,void 0,(function(){var e,n,r,i,o,a;return s(this,(function(s){switch(s.label){case 0:return e=new Map,t instanceof Map?(n=new Map,t.forEach((function(t,e){n.set(e,t.internalTensor)})),[4,this.session.run(n)]):[3,2];case 1:return e=s.sent(),[3,5];case 2:return Array.isArray(t)?(r=[],t.forEach((function(t){r.push(t.internalTensor)})),[4,this.session.run(r)]):[3,4];case 3:return e=s.sent(),[3,5];case 4:for(o in i=new Map,t)i.set(o,t[o].internalTensor);s.label=5;case 5:return a=new Map,e.forEach((function(t,e){a.set(e,l.fromInternalTensor(t))})),[2,a]}}))}))},t.prototype.startProfiling=function(){this.session.startProfiling()},t.prototype.endProfiling=function(){this.session.endProfiling()},t}();e.InferenceSession=u},function(t,e,n){"use strict";(function(t){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;var o=n(48),a=n(175),s=n(178),c=n(179),l=n(3),u=n(180),h=function(){function e(t){void 0===t&&(t={}),this._initialized=!1,this.backendHint=t.backendHint,this.profiler=l.Profiler.create(t.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}return e.prototype.startProfiling=function(){this.profiler.start()},e.prototype.endProfiling=function(){this.profiler.stop()},e.prototype.loadModel=function(e,n,c){return r(this,void 0,void 0,(function(){var l=this;return i(this,(function(h){switch(h.label){case 0:return[4,this.profiler.event("session","Session.loadModel",(function(){return r(l,void 0,void 0,(function(){var r,l,h;return i(this,(function(i){switch(i.label){case 0:return[4,s.Backend(this.backendHint)];case 1:return r=i.sent(),this.sessionHandler=r.createSessionHandler(this.context),this._model=new u.Model,"string"!=typeof e?[3,7]:"undefined"!=typeof fetch?[3,3]:[4,a.promisify(o.readFile)(e)];case 2:return l=i.sent(),this.initialize(t.from(l)),[3,6];case 3:return[4,fetch(e)];case 4:return[4,i.sent().arrayBuffer()];case 5:l=i.sent(),this.initialize(t.from(l)),i.label=6;case 6:return[3,8];case 7:ArrayBuffer.isView(e)?this.initialize(t.from(e)):(h=new Uint8Array(e,n||0,c||e.byteLength),this.initialize(t.from(h))),i.label=8;case 8:return[2]}}))}))}))];case 1:return h.sent(),[2]}}))}))},e.prototype.initialize=function(t){var e=this;if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",(function(){var n=e.sessionHandler.transformGraph?e.sessionHandler:void 0;e._model.load(t,n),e.sessionHandler.onGraphInitialized&&e.sessionHandler.onGraphInitialized(e._model.graph),e.initializeOps(e._model.graph),e._executionPlan=new c.ExecutionPlan(e._model.graph,e._ops,e.profiler)})),this._initialized=!0},e.prototype.run=function(t){var e=this;if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",(function(){return r(e,void 0,void 0,(function(){var e,n;return i(this,(function(r){switch(r.label){case 0:return e=this.normalizeAndValidateInputs(t),[4,this._executionPlan.execute(this.sessionHandler,e)];case 1:return n=r.sent(),[2,this.createOutput(n)]}}))}))}))},e.prototype.normalizeAndValidateInputs=function(t){var e=this._model.graph.getInputNames();if(Array.isArray(t)){if(t.length!==e.length)throw new Error("incorrect input array length: expected "+e.length+" but got "+t.length)}else{if(t.size!==e.length)throw new Error("incorrect input map size: expected "+e.length+" but got "+t.size);for(var n=new Array(t.size),r=0,i=0;i<e.length;++i){var o=t.get(e[i]);if(!o)throw new Error("missing input tensor for: '"+name+"'");n[r++]=o}t=n}if(this.context.graphInputTypes&&0!==this.context.graphInputTypes.length&&this.context.graphInputDims&&0!==this.context.graphInputDims.length)this.validateInputTensorDims(this.context.graphInputDims,t,!1);else{var a=this._model.graph.getInputIndices(),s=this._model.graph.getValues(),c=new Array(a.length);for(i=0;i<a.length;++i){var l=s[a[i]];c[i]=l.type.shape.dims,this.context.graphInputTypes.push(l.type.tensorType),this.context.graphInputDims.push(t[i].dims)}this.validateInputTensorDims(c,t,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,t),t},e.prototype.validateInputTensorTypes=function(t,e){for(var n=0;n<e.length;n++){var r=t[n],i=e[n].type;if(r!==i)throw new Error("input tensor["+n+"] check failed: expected type '"+r+"' but got "+i)}},e.prototype.validateInputTensorDims=function(t,e,n){for(var r=0;r<e.length;r++){var i=t[r],o=e[r].dims;if(!this.compareTensorDims(i,o,n))throw new Error("input tensor["+r+"] check failed: expected shape '["+i.join(",")+"]' but got ["+o.join(",")+"]")}},e.prototype.compareTensorDims=function(t,e,n){if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r]&&(!n||0!==t[r]))return!1;return!0},e.prototype.createOutput=function(t){var e=this._model.graph.getOutputNames();if(t.length!==e.length)throw new Error("expected number of outputs do not match number of generated outputs");for(var n=new Map,r=0;r<e.length;++r)n.set(e[r],t[r]);return n},e.prototype.initializeOps=function(t){var e=t.getNodes();this._ops=new Array(e.length);for(var n=0;n<e.length;n++)this._ops[n]=this.sessionHandler.resolve(e[n],this._model.opsets)},e}();e.Session=h}).call(this,n(12).Buffer)},function(t,e,n){(function(t){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},i=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(t).replace(i,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),c=r[n];n<o;c=r[++n])m(c)||!x(c)?a+=" "+c:a+=" "+s(c);return a},e.deprecate=function(n,r){if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var o,a={};function s(t,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(n)?r.showHidden=n:n&&e._extend(r,n),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),u(r,t,r.depth)}function c(t,e){var n=s.styles[e];return n?"\x1b["+s.colors[n][0]+"m"+t+"\x1b["+s.colors[n][1]+"m":t}function l(t,e){return t}function u(t,n,r){if(t.customInspect&&n&&S(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return y(i)||(i=u(t,i,r)),i}var o=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return g(e)?t.stylize(""+e,"number"):f(e)?t.stylize(""+e,"boolean"):m(e)?t.stylize("null","null"):void 0}(t,n);if(o)return o;var a=Object.keys(n),s=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),w(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(n);if(0===a.length){if(S(n)){var c=n.name?": "+n.name:"";return t.stylize("[Function"+c+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return t.stylize(Date.prototype.toString.call(n),"date");if(w(n))return h(n)}var l,x="",T=!1,E=["{","}"];return p(n)&&(T=!0,E=["[","]"]),S(n)&&(x=" [Function"+(n.name?": "+n.name:"")+"]"),b(n)&&(x=" "+RegExp.prototype.toString.call(n)),_(n)&&(x=" "+Date.prototype.toUTCString.call(n)),w(n)&&(x=" "+h(n)),0!==a.length||T&&0!=n.length?r<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),l=T?function(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)M(e,String(a))?o.push(d(t,e,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(d(t,e,n,r,i,!0))})),o}(t,n,r,s,a):a.map((function(e){return d(t,n,r,s,e,T)})),t.seen.pop(),function(t,e,n){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(l,x,E)):E[0]+x+E[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,e,n,r,i,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),M(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(c.value)<0?(s=m(n)?u(t,c.value,null):u(t,c.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),v(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function m(t){return null===t}function g(t){return"number"==typeof t}function y(t){return"string"==typeof t}function v(t){return void 0===t}function b(t){return x(t)&&"[object RegExp]"===T(t)}function x(t){return"object"==typeof t&&null!==t}function _(t){return x(t)&&"[object Date]"===T(t)}function w(t){return x(t)&&("[object Error]"===T(t)||t instanceof Error)}function S(t){return"function"==typeof t}function T(t){return Object.prototype.toString.call(t)}function E(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(v(o)&&(o=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=t.pid;a[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else a[n]=function(){};return a[n]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=f,e.isNull=m,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=y,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=b,e.isObject=x,e.isDate=_,e.isError=w,e.isFunction=S,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(176);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",function(){var t=new Date,e=[E(t.getHours()),E(t.getMinutes()),E(t.getSeconds())].join(":");return[t.getDate(),A[t.getMonth()],e].join(" ")}(),e.format.apply(e,arguments))},e.inherits=n(177),e._extend=function(t,e){if(!e||!x(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var O="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function C(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(O&&t[O]){var e;if("function"!=typeof(e=t[O]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,O,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise((function(t,r){e=t,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,r){t?n(t):e(r)}));try{t.apply(this,i)}catch(t){n(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),O&&Object.defineProperty(e,O,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=O,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,n).then((function(e){t.nextTick(a,null,e)}),(function(e){t.nextTick(C,e,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,r(e)),n}}).call(this,n(24))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Backend=void 0;var a=new Map;function s(t){return r(this,void 0,void 0,(function(){var e,n,r;return i(this,(function(i){switch(i.label){case 0:return void 0!==(e=onnx.backend)[t]&&function(t){var e=t;return"initialize"in e&&"function"==typeof e.initialize&&"createSessionHandler"in e&&"function"==typeof e.createSessionHandler&&"dispose"in e&&"function"==typeof e.dispose}(e[t])?e[t].disabled?[3,3]:(n=e[t],"object"==typeof(r=n.initialize())&&"then"in r?[4,r]:[3,2]):[3,3];case 1:r=i.sent(),i.label=2;case 2:if(r)return a.set(t,n),[2,n];i.label=3;case 3:return[2,void 0]}}))}))}e.Backend=function t(e){return r(this,void 0,void 0,(function(){var n,r,c,l,u,h,d,p,f;return i(this,(function(i){switch(i.label){case 0:return e?[3,1]:[2,t(["webgl","wasm","cpu"])];case 1:n="string"==typeof e?[e]:e,i.label=2;case 2:i.trys.push([2,7,8,9]),r=o(n),c=r.next(),i.label=3;case 3:return c.done?[3,6]:(l=c.value,(u=a.get(l))?[2,u]:[4,s(l)]);case 4:if(h=i.sent())return[2,h];i.label=5;case 5:return c=r.next(),[3,3];case 6:return[3,9];case 7:return d=i.sent(),p={error:d},[3,9];case 8:try{c&&!c.done&&(f=r.return)&&f.call(r)}finally{if(p)throw p.error}return[7];case 9:throw new Error("no available backend to use")}}))}))}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;var c=n(3),l=function(t,e){this.op=t,this.node=e},u=function(){function t(t,e,n){this.graph=t,this.profiler=n,this.initialize(e)}return t.prototype.initialize=function(t){var e=this;this.profiler.event("session","ExecutionPlan.initialize",(function(){var n=e.graph.getNodes();if(n.length!==t.length)throw new Error("The size of nodes and OPs do not match.");e._ops=t.map((function(t,e){return new l(t,n[e])})),e.reset(),e._starter=[],e._ops.forEach((function(t,n){var r,i,a=!0;try{for(var s=o(t.node.inputs),c=s.next();!c.done;c=s.next()){var l=c.value;if(!e._values[l]&&-1===e.graph.getInputIndices().indexOf(l)){a=!1;break}}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}a&&e._starter.push(n)}))}))},t.prototype.reset=function(){this._values=this.graph.getValues().map((function(t){return t.tensor}))},t.prototype.execute=function(t,e){var n=this;return this.profiler.event("session","ExecutionPlan.execute",(function(){return r(n,void 0,void 0,(function(){var n,a,l,u,h,d,p,f,m,g=this;return i(this,(function(y){switch(y.label){case 0:if(this.reset(),n=t.createInferenceHandler(),a=this.graph.getInputIndices(),e.length!==a.length)throw new Error("number of input tensors don't match the number of inputs to the model: actual: "+e.length+" expected: "+a.length);e.forEach((function(t,e){var n=a[e];g._values[n]=t})),l=this._starter.slice(0),u=this.graph.getValues(),h=this.graph.getNodes(),d=0,p=function(){var t,e,a,p,m,y;return i(this,(function(v){switch(v.label){case 0:if(t=l[d++],e=f._ops[t],-1!==(a=e.node.inputs.map((function(t){return g._values[t]}))).indexOf(void 0))throw new Error("unresolved input detected: op: "+e.node);return p=a,c.Logger.verbose("ExecPlan","Runing op:"+e.node.name+" ("+p.map((function(t,n){return"'"+e.node.inputs[n]+"': "+t.type+"["+t.dims.join(",")+"]"})).join(", ")+")"),[4,f.profiler.event("node",e.node.name,(function(){return r(g,void 0,void 0,(function(){var t;return i(this,(function(r){if(!(t=e.op).checkInputs(p))throw new Error("invalid inputs detected; op: "+e.node.name);return[2,t.run(n,p)]}))}))}))];case 1:if((m=v.sent()).length!==e.node.outputs.length)throw new Error("the size of output does not match model definition.");return m.forEach((function(t,n){var r=e.node.outputs[n];if(g._values[r])throw new Error("output ["+r+"] already has value: op:"+e.node.name);g._values[r]=t})),y=new Set,m.forEach((function(t,n){var r,i,a,s,c=e.node.outputs[n];try{for(var l=(r=void 0,o(u[c].to)),d=l.next();!d.done;d=l.next()){var p=d.value,f=h[p],m=!0;try{for(var v=(a=void 0,o(f.inputs)),b=v.next();!b.done;b=v.next()){var x=b.value;if(!g._values[x]){m=!1;break}}}catch(t){a={error:t}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}m&&y.add(p)}}catch(t){r={error:t}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}})),l.push.apply(l,s(y)),[2]}}))},f=this,y.label=1;case 1:return d<l.length?[5,p()]:[3,3];case 2:return y.sent(),[3,1];case 3:return m=[],this.graph.getOutputIndices().forEach((function(t,e){var n=g._values[t];if(void 0===n)throw new Error("required output ["+t+"] does not have value");n.data,m.push(n)})),c.Logger.verbose("ExecPlan","disposing of inferenceHandler"),n.dispose(),[2,m]}}))}))}))},t}();e.ExecutionPlan=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var r=n(9),i=n(181),o=n(0),a=function(){function t(){}return t.prototype.load=function(t,e){var n=r.onnx.ModelProto.decode(t);if(o.LongUtil.longToNumber(n.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=n.opsetImport.map((function(t){return{domain:t.domain,version:o.LongUtil.longToNumber(t.version)}})),this._graph=i.Graph.from(n.graph,e)},Object.defineProperty(t.prototype,"graph",{get:function(){return this._graph},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"opsets",{get:function(){return this._opsets},enumerable:!1,configurable:!0}),t}();e.Model=a},function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;var i=n(182),o=n(1),a=n(0);e.Graph={from:function(t,e){return new l(t,e)}};var s=function(){function t(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=a.ProtoUtil.tensorValueTypeFromProto(t.type.tensorType))}return Object.defineProperty(t.prototype,"from",{get:function(){return this._from},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this._to},enumerable:!1,configurable:!0}),t}(),c=function(t){this.name=t.name,this.opType=t.opType,this.inputs=[],this.outputs=[],this.attributes=new i.Attribute(t.attribute),this.executeNode=!0},l=function(){function t(t,e){if(!t)throw new TypeError("graph is empty");this.buildGraph(t),this.transformGraph(e),this.checkIsAcyclic()}return t.prototype.getInputIndices=function(){return this._allInputIndices},t.prototype.getInputNames=function(){return this._allInputNames},t.prototype.getOutputIndices=function(){return this._allOutputIndices},t.prototype.getOutputNames=function(){return this._allOutputNames},t.prototype.getValues=function(){return this._allData},t.prototype.getNodes=function(){return this._nodes},t.prototype.buildGraph=function(t){var e,n,i,l,u,h,d,p,f,m,g,y,v=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];var b=new Map;if(!t.input)throw new Error("missing information in graph: input");var x=[];try{for(var _=r(t.input),w=_.next();!w.done;w=_.next()){var S=w.value;if(v.has(S.name))throw new Error("duplicated input name: "+S.name);var T=this._allData.push(new s(S))-1;v.set(S.name,T),x.push(S.name)}}catch(t){e={error:t}}finally{try{w&&!w.done&&(n=_.return)&&n.call(_)}finally{if(e)throw e.error}}if(!t.initializer)throw new Error("missing information in graph: initializer");try{for(var E=r(t.initializer),A=E.next();!A.done;A=E.next()){S=A.value;var M=v.get(S.name);if(void 0===M){var O=new s;O.type={shape:{dims:a.ProtoUtil.tensorDimsFromProto(S.dims)},tensorType:a.ProtoUtil.tensorDataTypeFromProto(S.dataType)},M=this._allData.push(O)-1,v.set(S.name,M)}this._allData[M]._from=-1,this._allData[M].tensor=o.Tensor.fromProto(S)}}catch(t){i={error:t}}finally{try{A&&!A.done&&(l=E.return)&&l.call(E)}finally{if(i)throw i.error}}for(S=0;S<this._allData.length;S++)this._allData[S].tensor||(this._allInputIndices.push(S),this._allInputNames.push(x[S]));if(!t.output)throw new Error("missing information in graph: output");try{for(var C=r(t.output),k=C.next();!k.done;k=C.next()){if(S=k.value,v.has(S.name))throw new Error("duplicated output name: "+S.name);T=this._allData.push(new s(S))-1,v.set(S.name,T),this._allOutputIndices.push(T),this._allOutputNames.push(S.name)}}catch(t){u={error:t}}finally{try{k&&!k.done&&(h=C.return)&&h.call(C)}finally{if(u)throw u.error}}if(!t.node)throw new Error("missing information in graph: node");try{for(var P=r(t.node),I=P.next();!I.done;I=P.next()){if(!(U=I.value).name)for(var N=0;;N++){var R="unnamed_"+U.opType+"_"+N;if(!b.has(R)){U.name=R;break}}if(b.has(U.name))throw new Error("duplicated node name: "+U.name);T=this._nodes.push(new c(U))-1,b.set(U.name,T)}}catch(t){d={error:t}}finally{try{I&&!I.done&&(p=P.return)&&p.call(P)}finally{if(d)throw d.error}}for(S=0;S<this._nodes.length;S++){var D=this._nodes[S];if(!(U=t.node[S]).output)throw new Error("missing output for node: "+U.name);try{for(var L=(f=void 0,r(U.output)),F=L.next();!F.done;F=L.next()){var j=F.value;if(void 0===(V=v.get(j))&&(V=this._allData.push(new s)-1,v.set(j,V)),D.outputs.push(V),void 0!==this._allData[V]._from)throw new Error("multiple nodes output to one data value: "+V);if(this._allData[V]._from=S,"Constant"===U.opType){if(!U.attribute||1!==U.attribute.length||!U.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!U.output||1!==U.output.length)throw new Error("missing output or incorrect number of outputs for this Constant operator");D.outputs.pop(),D.executeNode=!1,this._allData[V]._from=-1,this._allData[V].tensor=o.Tensor.fromProto(U.attribute[0].t)}}}catch(t){f={error:t}}finally{try{F&&!F.done&&(m=L.return)&&m.call(L)}finally{if(f)throw f.error}}}for(S=0;S<this._nodes.length;S++){var U;if(D=this._nodes[S],!(U=t.node[S]).input)throw new Error("missing input for node: "+U.name);try{for(var B=(g=void 0,r(U.input)),z=B.next();!z.done;z=B.next()){var V,G=z.value;if(void 0===(V=v.get(G)))throw new Error("unrecognized input '"+G+"' for node: "+U.name);D.inputs.push(V),this._allData[V]._to.push(S)}}catch(t){g={error:t}}finally{try{z&&!z.done&&(y=B.return)&&y.call(B)}finally{if(g)throw g.error}}}return!0},t.prototype.checkIsAcyclic=function(){var t=this,e=new Set;this._allInputIndices.forEach((function(n){t._allData[n]._to.forEach((function(t){e.add(t)}))}));for(var n=Array.from(e),r=new Array(this._nodes.length).fill("white"),i=function(){var e=n.pop();"gray"===r[e]?r[e]="black":(n.push(e),r[e]="gray",o._nodes[e].outputs.forEach((function(i){var o=t._allData[i];if(void 0!==o.tensor)throw new Error("node outputs should not be initialized");if(o._from!==e)throw new Error("from property of the Value object doesn't match index of Node being processed");o._to.forEach((function(t){if("gray"===r[t])throw new Error("model graph is cyclic");"white"===r[t]&&n.push(t)}))})))},o=this;n.length>0;)i()},t.prototype.transformGraph=function(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),t&&t.transformGraph(this),this.finalizeGraph()},t.prototype.finalizeGraph=function(){for(var t,e=this,n=0,r=function(r){if(!i._nodes[r].executeNode)return n++,i._nodes[r].outputs.forEach((function(t){e._allData[t]._from=-2})),i._nodes.splice(r,1),r--,t=r,"continue";n>0&&(i._nodes[r].inputs.forEach((function(t){var i=e._allData[t]._to.indexOf(r+n);-1!==i&&(e._allData[t]._to[i]=r)})),i._nodes[r].outputs.forEach((function(t){e._allData[t]._from&&e._allData[t]._from===r+n&&(e._allData[t]._from=r)}))),t=r},i=this,o=0;o<this._nodes.length;o++)r(o),o=t;n=0;var a,s=function(t){if(-2===c._allData[t].from&&-1===c._allOutputIndices.indexOf(t+n))return n++,c._allData.splice(t,1),t--,a=t,"continue";if(n>0){var r=-1;void 0!==c._allData[t].from&&-1!==c._allData[t].from?-1!==(r=c._nodes[c._allData[t].from].outputs.indexOf(t+n))&&(c._nodes[c._allData[t].from].outputs[r]=t):-1!==(r=c._allInputIndices.indexOf(t+n))&&(c._allInputIndices[r]=t),c._allData[t].to.forEach((function(i){-1!==(r=e._nodes[i].inputs.indexOf(t+n))&&(e._nodes[i].inputs[r]=t)})),0===c._allData[t].to.length&&-1!==(r=c._allOutputIndices.indexOf(t+n))&&(c._allOutputIndices[r]=t)}a=t},c=this;for(o=0;o<this._allData.length;o++)s(o),o=a},t.prototype.deleteNode=function(t){var e,n,i=this._nodes[t];if(i.inputs.length>1)throw new Error("Node deletion with multiple inputs is not supported. ");if(i.outputs.length>1)for(var o=1;o<i.outputs.length;o++)if(this._allData[i.outputs[o]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ");i.executeNode=!1;var a=i.inputs[0],s=i.outputs[0],c=this._allData[s].to,l=this._allData[a].to.indexOf(t);if(-1===l)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[a].to.splice(l,1),this._allData[s]._to=[];var u=this._allOutputIndices.indexOf(s);if(-1!==u&&(this._allOutputIndices[u]=a),c&&c.length>0)try{for(var h=r(c),d=h.next();!d.done;d=h.next()){var p=d.value,f=this._nodes[p].inputs.indexOf(s);if(-1===f)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[p].inputs[f]=a,this._allData[a].to.push(p)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}}},t.prototype.removeAllDropoutNodes=function(){var t,e,n=0;try{for(var i=r(this._nodes),o=i.next();!o.done;o=i.next()){var a=o.value;if("Dropout"===a.opType){if(1!==a.inputs.length)throw new Error("Dropout nodes should only contain one input. ");if(1!==a.outputs.length&&2!==a.outputs.length)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(2===a.outputs.length&&0!==this._allData[a.outputs[1]]._to.length)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(n)}n++}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.removeAllIdentityNodes=function(){var t,e,n=0;try{for(var i=r(this._nodes),o=i.next();!o.done;o=i.next())"Identity"===o.value.opType&&this.deleteNode(n),n++}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t}()},function(t,e,n){"use strict";(function(t){var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;var o=i(n(13)),a=n(9),s=n(1),c=n(0),l=function(){function e(t){var n,i;if(this._attributes=new Map,null!=t){try{for(var o=r(t),a=o.next();!a.done;a=o.next()){var s=a.value;this._attributes.set(s.name,[e.getValue(s),e.getType(s)])}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}if(this._attributes.size<t.length)throw new Error("duplicated attribute names")}}return e.prototype.set=function(t,e,n){this._attributes.set(t,[n,e])},e.prototype.delete=function(t){this._attributes.delete(t)},e.prototype.getFloat=function(t,e){return this.get(t,"float",e)},e.prototype.getInt=function(t,e){return this.get(t,"int",e)},e.prototype.getString=function(t,e){return this.get(t,"string",e)},e.prototype.getTensor=function(t,e){return this.get(t,"tensor",e)},e.prototype.getFloats=function(t,e){return this.get(t,"floats",e)},e.prototype.getInts=function(t,e){return this.get(t,"ints",e)},e.prototype.getStrings=function(t,e){return this.get(t,"strings",e)},e.prototype.getTensors=function(t,e){return this.get(t,"tensors",e)},e.prototype.get=function(t,e,n){var r=this._attributes.get(t);if(void 0===r){if(void 0!==n)return n;throw new Error("required attribute not found: "+t)}if(r[1]!==e)throw new Error("type mismatch: expected "+e+" but got "+r[1]);return r[0]},e.getType=function(t){switch(t.type){case a.onnx.AttributeProto.AttributeType.FLOAT:return"float";case a.onnx.AttributeProto.AttributeType.INT:return"int";case a.onnx.AttributeProto.AttributeType.STRING:return"string";case a.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case a.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case a.onnx.AttributeProto.AttributeType.INTS:return"ints";case a.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case a.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error("attribute type is not supported yet: "+a.onnx.AttributeProto.AttributeType[t.type])}},e.getValue=function(e){if(e.type===a.onnx.AttributeProto.AttributeType.GRAPH||e.type===a.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");var n=this.getValueNoCheck(e);if(e.type===a.onnx.AttributeProto.AttributeType.INT&&o.default.isLong(n))return n.toNumber();if(e.type===a.onnx.AttributeProto.AttributeType.INTS){for(var r=n,i=new Array(r.length),l=0;l<r.length;l++){var u=r[l];i[l]=c.LongUtil.longToNumber(u)}return i}if(e.type===a.onnx.AttributeProto.AttributeType.TENSOR)return s.Tensor.fromProto(n);if(e.type===a.onnx.AttributeProto.AttributeType.TENSORS)return n.map((function(t){return s.Tensor.fromProto(t)}));if(e.type===a.onnx.AttributeProto.AttributeType.STRING){var h=n;return t.from(h.buffer,h.byteOffset,h.byteLength).toString()}return e.type===a.onnx.AttributeProto.AttributeType.STRINGS?n.map((function(e){return t.from(e.buffer,e.byteOffset,e.byteLength).toString()})):n},e.getValueNoCheck=function(t){switch(t.type){case a.onnx.AttributeProto.AttributeType.FLOAT:return t.f;case a.onnx.AttributeProto.AttributeType.INT:return t.i;case a.onnx.AttributeProto.AttributeType.STRING:return t.s;case a.onnx.AttributeProto.AttributeType.TENSOR:return t.t;case a.onnx.AttributeProto.AttributeType.GRAPH:return t.g;case a.onnx.AttributeProto.AttributeType.FLOATS:return t.floats;case a.onnx.AttributeProto.AttributeType.INTS:return t.ints;case a.onnx.AttributeProto.AttributeType.STRINGS:return t.strings;case a.onnx.AttributeProto.AttributeType.TENSORS:return t.tensors;case a.onnx.AttributeProto.AttributeType.GRAPHS:return t.graphs;default:throw new Error("unsupported attribute type: "+a.onnx.AttributeProto.AttributeType[t.type])}},e}();e.Attribute=l}).call(this,n(12).Buffer)}])},module.exports=e()},4554:(t,e,n)=>{"use strict";n.r(e),n.d(e,{InferenceSession:()=>f,Tensor:()=>d,env:()=>a,registerBackend:()=>o});const r={},i=[],o=(t,e,n)=>{if(!e||"function"!==typeof e.init||"function"!==typeof e.createSessionHandler)throw new TypeError("not a valid backend");{const o=r[t];if(void 0===o)r[t]={backend:e,priority:n};else{if(o.priority>n)return;if(o.priority===n&&o.backend!==e)throw new Error('cannot register backend "'.concat(t,'" using priority ').concat(n))}if(n>=0){const e=i.indexOf(t);-1!==e&&i.splice(e,1);for(let o=0;o<i.length;o++)if(r[i[o]].priority<=n)return void i.splice(o,0,t);i.push(t)}}};const a=new class{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(t){if(void 0!==t){if("string"!==typeof t||-1===["verbose","info","warning","error","fatal"].indexOf(t))throw new Error("Unsupported logging level: ".concat(t));this.logLevelInternal=t}}get logLevel(){return this.logLevelInternal}},s="undefined"!==typeof BigInt64Array&&"function"===typeof BigInt64Array.from,c="undefined"!==typeof BigUint64Array&&"function"===typeof BigUint64Array.from,l=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),u=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);s&&(l.set("int64",BigInt64Array),u.set(BigInt64Array,"int64")),c&&(l.set("uint64",BigUint64Array),u.set(BigUint64Array,"uint64"));class h{constructor(t,e,n){let r,i,o;if("string"===typeof t)if(r=t,o=n,"string"===t){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");i=e}else{const n=l.get(t);if(void 0===n)throw new TypeError("Unsupported tensor type: ".concat(t,"."));if(Array.isArray(e))i=n.from(e);else{if(!(e instanceof n))throw new TypeError("A ".concat(r," tensor's data must be type of ").concat(n));i=e}}else if(o=e,Array.isArray(t)){if(0===t.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");const e=typeof t[0];if("string"===e)r="string",i=t;else{if("boolean"!==e)throw new TypeError("Invalid element type of data array: ".concat(e,"."));r="bool",i=Uint8Array.from(t)}}else{const e=u.get(t.constructor);if(void 0===e)throw new TypeError("Unsupported type for tensor data: ".concat(t.constructor,"."));r=e,i=t}if(void 0===o)o=[i.length];else if(!Array.isArray(o))throw new TypeError("A tensor's dims must be a number array");const a=(t=>{let e=1;for(let n=0;n<t.length;n++){const r=t[n];if("number"!==typeof r||!Number.isSafeInteger(r))throw new TypeError("dims[".concat(n,"] must be an integer, got: ").concat(r));if(r<0)throw new RangeError("dims[".concat(n,"] must be a non-negative integer, got: ").concat(r));e*=r}return e})(o);if(a!==i.length)throw new Error("Tensor's size(".concat(a,") does not match data length(").concat(i.length,")."));this.dims=o,this.type=r,this.data=i,this.size=a}static bufferToTensor(t,e){if(void 0===t)throw new Error("Image buffer must be defined");if(void 0===e.height||void 0===e.width)throw new Error("Image height and width must be defined");const{height:n,width:r}=e,i=e.norm;let o,a;o=void 0===i||void 0===i.mean?255:i.mean,a=void 0===i||void 0===i.bias?0:i.bias;const s=void 0!==e.bitmapFormat?e.bitmapFormat:"RGBA",c=void 0!==e.tensorFormat&&void 0!==e.tensorFormat?e.tensorFormat:"RGB",l=n*r,u="RGBA"===c?new Float32Array(4*l):new Float32Array(3*l);let d=4,p=0,f=1,m=2,g=3,y=0,v=l,b=2*l,x=-1;"RGB"===s&&(d=3,p=0,f=1,m=2,g=-1),"RGBA"===c?x=3*l:"RBG"===c?(y=0,b=l,v=2*l):"BGR"===c&&(b=0,v=l,y=2*l);for(let h=0;h<l;h++,p+=d,m+=d,f+=d,g+=d)u[y++]=(t[p]+a)/o,u[v++]=(t[f]+a)/o,u[b++]=(t[m]+a)/o,-1!==x&&-1!==g&&(u[x++]=(t[g]+a)/o);return new h("float32",u,"RGBA"===c?[1,4,n,r]:[1,3,n,r])}static async fromImage(t,e){const n="undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement,r="undefined"!==typeof ImageData&&t instanceof ImageData,i="undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap,o="undefined"!==typeof String&&(t instanceof String||"string"===typeof t);let a,s={};if(n){const n=document.createElement("canvas"),r=n.getContext("2d");if(null==r)throw new Error("Can not access image data");{let i=t.naturalHeight,o=t.naturalWidth;if(void 0!==e&&void 0!==e.resizedHeight&&void 0!==e.resizedWidth&&(i=e.resizedHeight,o=e.resizedWidth),void 0!==e){if(s=e,void 0!==e.tensorFormat)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(s.tensorFormat="RGBA",void 0!==e.height&&e.height!==i)throw new Error("Image input config height doesn't match HTMLImageElement height");if(s.height=i,void 0!==e.width&&e.width!==o)throw new Error("Image input config width doesn't match HTMLImageElement width");s.width=o}else s.tensorFormat="RGBA",s.height=i,s.width=o;n.width=o,n.height=i,r.drawImage(t,0,0,o,i),a=r.getImageData(0,0,o,i).data}}else{if(!r){if(i){if(void 0===e)throw new Error("Please provide image config with format for Imagebitmap");if(void 0!==e.bitmapFormat)throw new Error("Image input config format must be defined for ImageBitmap");const n=document.createElement("canvas").getContext("2d");if(null!=n){const r=t.height,i=t.width;if(n.drawImage(t,0,0,i,r),a=n.getImageData(0,0,i,r).data,void 0!==e){if(void 0!==e.height&&e.height!==r)throw new Error("Image input config height doesn't match ImageBitmap height");if(s.height=r,void 0!==e.width&&e.width!==i)throw new Error("Image input config width doesn't match ImageBitmap width");s.width=i}else s.height=r,s.width=i;return h.bufferToTensor(a,s)}throw new Error("Can not access image data")}if(o)return new Promise(((n,r)=>{const i=document.createElement("canvas"),o=i.getContext("2d");if(!t||!o)return r();const a=new Image;a.crossOrigin="Anonymous",a.src=t,a.onload=()=>{i.width=a.width,i.height=a.height,o.drawImage(a,0,0,i.width,i.height);const t=o.getImageData(0,0,i.width,i.height);if(void 0!==e){if(void 0!==e.height&&e.height!==i.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(s.height=i.height,void 0!==e.width&&e.width!==i.width)throw new Error("Image input config width doesn't match ImageBitmap width");s.width=i.width}else s.height=i.height,s.width=i.width;n(h.bufferToTensor(t.data,s))}}));throw new Error("Input data provided is not supported - aborted tensor creation")}{const n="RGBA";let r,i;if(void 0!==e&&void 0!==e.resizedWidth&&void 0!==e.resizedHeight?(r=e.resizedHeight,i=e.resizedWidth):(r=t.height,i=t.width),void 0!==e){if(s=e,void 0!==e.bitmapFormat&&e.bitmapFormat!==n)throw new Error("Image input config format must be RGBA for ImageData");s.bitmapFormat="RGBA"}else s.bitmapFormat="RGBA";if(s.height=r,s.width=i,void 0!==e){const e=document.createElement("canvas");e.width=i,e.height=r;const n=e.getContext("2d");if(null==n)throw new Error("Can not access image data");n.putImageData(t,0,0),a=n.getImageData(0,0,i,r).data}else a=t.data}}if(void 0!==a)return h.bufferToTensor(a,s);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(t){var e,n;const r=document.createElement("canvas").getContext("2d");let i;if(null==r)throw new Error("Can not access image data");{const o=this.dims[3],a=this.dims[2],s=this.dims[1],c=void 0!==t&&void 0!==t.format?t.format:"RGB",l=void 0!==t&&void 0!==(null===(e=t.norm)||void 0===e?void 0:e.mean)?t.norm.mean:255,u=void 0!==t&&void 0!==(null===(n=t.norm)||void 0===n?void 0:n.bias)?t.norm.bias:0,h=a*o;if(void 0!==t){if(void 0!==t.height&&t.height!==a)throw new Error("Image output config height doesn't match tensor height");if(void 0!==t.width&&t.width!==o)throw new Error("Image output config width doesn't match tensor width");if(void 0!==t.format&&4===s&&"RGBA"!==t.format||3===s&&"RGB"!==t.format&&"BGR"!==t.format)throw new Error("Tensor format doesn't match input tensor dims")}const d=4;let p=0,f=1,m=2,g=3,y=0,v=h,b=2*h,x=-1;"RGBA"===c?(y=0,v=h,b=2*h,x=3*h):"RGB"===c?(y=0,v=h,b=2*h):"RBG"===c&&(y=0,b=h,v=2*h),i=r.createImageData(o,a);for(let t=0;t<a*o;p+=d,f+=d,m+=d,g+=d,t++)i.data[p]=(this.data[y++]-u)*l,i.data[f]=(this.data[v++]-u)*l,i.data[m]=(this.data[b++]-u)*l,i.data[g]=-1===x?255:(this.data[x++]-u)*l}return i}reshape(t){return new h(this.type,this.data,t)}}const d=h;class p{constructor(t){this.handler=t}async run(t,e,n){const r={};let i={};if("object"!==typeof t||null===t||t instanceof d||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let o=!0;if("object"===typeof e){if(null===e)throw new TypeError("Unexpected argument[1]: cannot be null.");if(e instanceof d)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(e)){if(0===e.length)throw new TypeError("'fetches' cannot be an empty array.");o=!1;for(const t of e){if("string"!==typeof t)throw new TypeError("'fetches' must be a string array or an object.");if(-1===this.outputNames.indexOf(t))throw new RangeError("'fetches' contains invalid output name: ".concat(t,"."));r[t]=null}if("object"===typeof n&&null!==n)i=n;else if("undefined"!==typeof n)throw new TypeError("'options' must be an object.")}else{let t=!1;const a=Object.getOwnPropertyNames(e);for(const n of this.outputNames)if(-1!==a.indexOf(n)){const i=e[n];(null===i||i instanceof d)&&(t=!0,o=!1,r[n]=i)}if(t){if("object"===typeof n&&null!==n)i=n;else if("undefined"!==typeof n)throw new TypeError("'options' must be an object.")}else i=e}}else if("undefined"!==typeof e)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const c of this.inputNames)if("undefined"===typeof t[c])throw new Error("input '".concat(c,"' is missing in 'feeds'."));if(o)for(const c of this.outputNames)r[c]=null;const a=await this.handler.run(t,r,i),s={};for(const c in a)Object.hasOwnProperty.call(a,c)&&(s[c]=new d(a[c].type,a[c].data,a[c].dims));return s}static async create(t,e,n,o){let a,s={};if("string"===typeof t){if(a=t,"object"===typeof e&&null!==e)s=e;else if("undefined"!==typeof e)throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(a=t,"object"===typeof e&&null!==e)s=e;else if("undefined"!==typeof e)throw new TypeError("'options' must be an object.")}else{if(!(t instanceof ArrayBuffer||"undefined"!==typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{const r=t;let i=0,c=t.byteLength;if("object"===typeof e&&null!==e)s=e;else if("number"===typeof e){if(i=e,!Number.isSafeInteger(i))throw new RangeError("'byteOffset' must be an integer.");if(i<0||i>=r.byteLength)throw new RangeError("'byteOffset' is out of range [0, ".concat(r.byteLength,")."));if(c=t.byteLength-i,"number"===typeof n){if(c=n,!Number.isSafeInteger(c))throw new RangeError("'byteLength' must be an integer.");if(c<=0||i+c>r.byteLength)throw new RangeError("'byteLength' is out of range (0, ".concat(r.byteLength-i,"]."));if("object"===typeof o&&null!==o)s=o;else if("undefined"!==typeof o)throw new TypeError("'options' must be an object.")}else if("undefined"!==typeof n)throw new TypeError("'byteLength' must be a number.")}else if("undefined"!==typeof e)throw new TypeError("'options' must be an object.");a=new Uint8Array(r,i,c)}}const c=(s.executionProviders||[]).map((t=>"string"===typeof t?t:t.name)),l=await(async t=>{const e=0===t.length?i:t,n=[];for(const i of e){const t=r[i];if(t){if(t.initialized)return t.backend;if(t.aborted)continue;const e=!!t.initPromise;try{return e||(t.initPromise=t.backend.init()),await t.initPromise,t.initialized=!0,t.backend}catch(o){e||n.push({name:i,err:o}),t.aborted=!0}finally{delete t.initPromise}}}throw new Error("no available backend found. ERR: ".concat(n.map((t=>"[".concat(t.name,"] ").concat(t.err))).join(", ")))})(c),u=await l.createSessionHandler(a,s);return new p(u)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}const f=p},9373:(module,__unused_webpack_exports,__webpack_require__)=>{var e;self,e=__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(t,e,n)=>{var r,i=(r=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return I.buffer!=R&&q(I.buffer),D}function i(){return I.buffer!=R&&q(I.buffer),L}function o(){return I.buffer!=R&&q(I.buffer),F}function a(){return I.buffer!=R&&q(I.buffer),j}function s(){return I.buffer!=R&&q(I.buffer),U}var c,l,u;t=t||{},c||(c=void 0!==t?t:{}),c.ready=new Promise((function(t,e){l=t,u=e}));var h,d,p,f,m,g,y=Object.assign({},c),v="./this.program",b=(t,e)=>{throw e},x="object"==typeof window,_="function"==typeof importScripts,w="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,S=c.ENVIRONMENT_IS_PTHREAD||!1,T="";function E(t){return c.locateFile?c.locateFile(t,T):T+t}if(w){let e;T=_?n(908).dirname(T)+"/":"//",g=()=>{m||(f=n(1384),m=n(908))},h=function(t,e){return g(),t=m.normalize(t),f.readFileSync(t,e?void 0:"utf8")},p=t=>((t=h(t,!0)).buffer||(t=new Uint8Array(t)),t),d=(t,e,n)=>{g(),t=m.normalize(t),f.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(v=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof lt))throw t})),process.on("unhandledRejection",(function(t){throw t})),b=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof lt||k("exiting due to exception: "+e),process.exit(t)},c.inspect=function(){return"[Emscripten Module object]"};try{e=n(9925)}catch(t){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),t}n.g.Worker=e.Worker}else(x||_)&&(_?T=self.location.href:"undefined"!=typeof document&&document.currentScript&&(T=document.currentScript.src),r&&(T=r),T=0!==T.indexOf("blob:")?T.substr(0,T.replace(/[?#].*/,"").lastIndexOf("/")+1):"",w||(h=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},_&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),d=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));w&&"undefined"==typeof performance&&(n.g.performance=n(6953).performance);var A=console.log.bind(console),M=console.warn.bind(console);w&&(g(),A=t=>f.writeSync(1,t+"\n"),M=t=>f.writeSync(2,t+"\n"));var O,C=c.print||A,k=c.printErr||M;Object.assign(c,y),y=null,c.thisProgram&&(v=c.thisProgram),c.quit&&(b=c.quit),c.wasmBinary&&(O=c.wasmBinary);var P=c.noExitRuntime||!1;"object"!=typeof WebAssembly&&ot("no native wasm support detected");var I,N,R,D,L,F,j,U,B=!1,z="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function V(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&z)return z.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var i=t[e++];if(128&i){var o=63&t[e++];if(192==(224&i))r+=String.fromCharCode((31&i)<<6|o);else{var a=63&t[e++];65536>(i=224==(240&i)?(15&i)<<12|o<<6|a:(7&i)<<18|o<<12|a<<6|63&t[e++])?r+=String.fromCharCode(i):(i-=65536,r+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else r+=String.fromCharCode(i)}return r}function G(t,e){return(t>>>=0)?V(i(),t,e):""}function W(t,e,n,r){if(!(0<r))return 0;var i=n>>>=0;r=n+r-1;for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++o)),127>=a){if(n>=r)break;e[n++>>>0]=a}else{if(2047>=a){if(n+1>=r)break;e[n++>>>0]=192|a>>6}else{if(65535>=a){if(n+2>=r)break;e[n++>>>0]=224|a>>12}else{if(n+3>=r)break;e[n++>>>0]=240|a>>18,e[n++>>>0]=128|a>>12&63}e[n++>>>0]=128|a>>6&63}e[n++>>>0]=128|63&a}}return e[n>>>0]=0,n-i}function H(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function q(t){R=t,c.HEAP8=D=new Int8Array(t),c.HEAP16=new Int16Array(t),c.HEAP32=F=new Int32Array(t),c.HEAPU8=L=new Uint8Array(t),c.HEAPU16=new Uint16Array(t),c.HEAPU32=j=new Uint32Array(t),c.HEAPF32=new Float32Array(t),c.HEAPF64=U=new Float64Array(t)}S&&(R=c.buffer);var X=c.INITIAL_MEMORY||16777216;if(S)I=c.wasmMemory,R=c.buffer;else if(c.wasmMemory)I=c.wasmMemory;else if(!((I=new WebAssembly.Memory({initial:X/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw k("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),w&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");I&&(R=I.buffer),X=R.byteLength,q(R);var Y,K=[],Z=[],J=[],$=[];function Q(){return P||!1}function tt(){var t=c.preRun.shift();K.unshift(t)}var et,nt=0,rt=null,it=null;function ot(t){throw S?postMessage({cmd:"onAbort",arg:t}):c.onAbort&&c.onAbort(t),k(t="Aborted("+t+")"),B=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),u(t),t}function at(){return et.startsWith("data:application/octet-stream;base64,")}function st(){var t=et;try{if(t==et&&O)return new Uint8Array(O);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){ot(t)}}et="ort-wasm-threaded.wasm",at()||(et=E(et));var ct={};function lt(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function ut(t){(t=ft.Vb[t])||ot(),ft.mc(t)}function ht(t){var e=ft.Cc();if(!e)return 6;ft.ac.push(e),ft.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function dt(t){if(S)return Xt(1,1,t);Q()||(ft.oc(),c.onExit&&c.onExit(t),B=!0),b(t,new lt(t))}function pt(t,e){if(!e&&S)throw gt(t),"unwind";Q()||S||(ye(),mt(J),ge(0),re[1].length&&ie(1,10),re[2].length&&ie(2,10),ft.oc()),dt(t)}var ft={Yb:[],ac:[],qc:[],Vb:{},fc:function(){S&&ft.Ec()},Pc:function(){},Ec:function(){ft.receiveObjectTransfer=ft.Gc,ft.threadInitTLS=ft.pc,ft.setExitStatus=ft.nc,P=!1},nc:function(){},oc:function(){for(var t of Object.values(ft.Vb))ft.mc(t);for(t of ft.Yb)t.terminate();ft.Yb=[]},mc:function(t){var e=t.Ub;delete ft.Vb[e],ft.Yb.push(t),ft.ac.splice(ft.ac.indexOf(t),1),t.Ub=0,we(e)},Gc:function(){},pc:function(){ft.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ft.Bc=t.Ub),n.targetThread&&n.targetThread!=pe()){var i=ft.Vb[n.Qc];i?i.postMessage(n,n.transferList):k('Internal error! Worker sent a message "'+r+'" to target pthread '+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?ht(n):"cleanupThread"===r?ut(n.thread):"killThread"===r?(n=n.thread,r=ft.Vb[n],delete ft.Vb[n],r.terminate(),we(n),ft.ac.splice(ft.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ft.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?k("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?c.onAbort&&c.onAbort(n.arg):r&&k("worker sent an unknown command "+r);ft.Bc=void 0},t.onerror=t=>{throw k("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},w&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:c.mainScriptUrlOrBlob||r,wasmMemory:I,wasmModule:N})},yc:function(){var t=E("ort-wasm-threaded.worker.js");ft.Yb.push(new Worker(t))},Cc:function(){return 0==ft.Yb.length&&(ft.yc(),ft.Fc(ft.Yb[0])),ft.Yb.pop()}};function mt(t){for(;0<t.length;)t.shift()(c)}function gt(t){if(S)return Xt(2,0,t);try{pt(t)}catch(t){t instanceof lt||"unwind"==t||b(1,t)}}c.PThread=ft,c.establishStackSpace=function(){var t=pe(),e=o()[t+44>>2>>>0];t=o()[t+48>>2>>>0],Ee(e,e-t),Me(e)};var yt=[];function vt(t){var e=yt[t];return e||(t>=yt.length&&(yt.length=t+1),yt[t]=e=Y.get(t)),e}c.invokeEntryPoint=function(t,e){t=vt(t)(e),Q()?ft.nc(t):Se(t)};var bt,xt,_t=[],wt=0,St=0;function Tt(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){a()[this.Sb+4>>2>>>0]=t},this.bc=function(){return a()[this.Sb+4>>2>>>0]},this.wc=function(t){a()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return a()[this.Sb+8>>2>>>0]},this.rc=function(){o()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[(this.Sb+12|0)>>>0]=t},this.uc=function(){return 0!=e()[(this.Sb+12|0)>>>0]},this.ic=function(t){t=t?1:0,e()[(this.Sb+13|0)>>>0]=t},this.kc=function(){return 0!=e()[(this.Sb+13|0)>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(o(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(o(),this.Sb>>2,1)},this.cc=function(t){a()[this.Sb+16>>2>>>0]=t},this.tc=function(){return a()[this.Sb+16>>2>>>0]},this.vc=function(){if(ke(this.bc()))return a()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Et(t){return me(new Tt(t).Sb)}function At(t,e,n,r){return S?Xt(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return k("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var i=[];return S&&0===i.length?At(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:i},S?(t.Oc="spawnThread",postMessage(t,i),0):ht(t))}function Ot(t,e,n){return S?Xt(4,1,t,e,n):0}function Ct(t,e){if(S)return Xt(5,1,t,e)}function kt(t,e){if(S)return Xt(6,1,t,e)}function Pt(t,e,n){if(S)return Xt(7,1,t,e,n)}function It(t,e,n){return S?Xt(8,1,t,e,n):0}function Nt(t,e){if(S)return Xt(9,1,t,e)}function Rt(t,e,n){if(S)return Xt(10,1,t,e,n)}function Dt(t,e,n,r){if(S)return Xt(11,1,t,e,n,r)}function Lt(t,e,n,r){if(S)return Xt(12,1,t,e,n,r)}function Ft(t,e,n,r){if(S)return Xt(13,1,t,e,n,r)}function jt(t){if(S)return Xt(14,1,t)}function Ut(t,e){if(S)return Xt(15,1,t,e)}function Bt(t,e,n){if(S)return Xt(16,1,t,e,n)}function zt(t){Atomics.store(o(),t>>2,1),pe()&&_e(t),Atomics.compareExchange(o(),t>>2,1,0)}function Vt(t){return a()[t>>>2]+4294967296*o()[t+4>>>2]}function Gt(t,e,n,r,i,o){return S?Xt(17,1,t,e,n,r,i,o):-52}function Wt(t,e,n,r,i,o){if(S)return Xt(18,1,t,e,n,r,i,o)}function Ht(t){var n=H(t)+1,r=fe(n);return r&&W(t,e(),r,n),r}function qt(t,e,n){function r(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}if(S)return Xt(19,1,t,e,n);var i=(new Date).getFullYear(),s=new Date(i,0,1),c=new Date(i,6,1);i=s.getTimezoneOffset();var l=c.getTimezoneOffset(),u=Math.max(i,l);o()[t>>2>>>0]=60*u,o()[e>>2>>>0]=Number(i!=l),t=r(s),e=r(c),t=Ht(t),e=Ht(e),l<i?(a()[n>>2>>>0]=t,a()[n+4>>2>>>0]=e):(a()[n>>2>>>0]=e,a()[n+4>>2>>>0]=t)}function Xt(t,e){var n=arguments.length-2,r=arguments;return function(t){var e=Ae();return t=t(),Me(e),t}((()=>{for(var i=Oe(8*n),o=i>>3,a=0;a<n;a++){var c=r[2+a];s()[o+a>>>0]=c}return xe(t,n,i,e)}))}c.executeNotifiedProxyingQueue=zt,xt=w?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:S?()=>performance.now()-c.__performance_now_clock_drift:()=>performance.now();var Yt,Kt=[],Zt={};function Jt(){if(!Yt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:v||"./this.program"};for(t in Zt)void 0===Zt[t]?delete e[t]:e[t]=Zt[t];var n=[];for(t in e)n.push(t+"="+e[t]);Yt=n}return Yt}function $t(t,n){if(S)return Xt(20,1,t,n);var r=0;return Jt().forEach((function(i,o){var s=n+r;for(o=a()[t+4*o>>2>>>0]=s,s=0;s<i.length;++s)e()[(0|o++)>>>0]=i.charCodeAt(s);e()[(0|o)>>>0]=0,r+=i.length+1})),0}function Qt(t,e){if(S)return Xt(21,1,t,e);var n=Jt();a()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),a()[e>>2>>>0]=r,0}function te(t){return S?Xt(22,1,t):52}function ee(t,e,n,r){return S?Xt(23,1,t,e,n,r):52}function ne(t,e,n,r,i){return S?Xt(24,1,t,e,n,r,i):70}var re=[null,[],[]];function ie(t,e){var n=re[t];0===e||10===e?((1===t?C:k)(V(n,0)),n.length=0):n.push(e)}function oe(t,e,n,r){if(S)return Xt(25,1,t,e,n,r);for(var o=0,s=0;s<n;s++){var c=a()[e>>2>>>0],l=a()[e+4>>2>>>0];e+=8;for(var u=0;u<l;u++)ie(t,i()[c+u>>>0]);o+=l}return a()[r>>2>>>0]=o,0}var ae=0;function se(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],le=[31,28,31,30,31,30,31,31,30,31,30,31];function ue(t,n,r,i){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function s(t,e){return a(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function l(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function u(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(se(t.getFullYear())?ce:le)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=l(new Date(t.getFullYear(),0,4)),n=l(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var h=o()[i+40>>2>>>0];for(var d in i={Lc:o()[i>>2>>>0],Kc:o()[i+4>>2>>>0],dc:o()[i+8>>2>>>0],jc:o()[i+12>>2>>>0],ec:o()[i+16>>2>>>0],Xb:o()[i+20>>2>>>0],Tb:o()[i+24>>2>>>0],Wb:o()[i+28>>2>>>0],Rc:o()[i+32>>2>>>0],Jc:o()[i+36>>2>>>0],Mc:h?G(h):""},r=G(r),h={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(d,"g"),h[d]);var p="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),f="January February March April May June July August September October November December".split(" ");for(d in h={"%a":function(t){return p[t.Tb].substring(0,3)},"%A":function(t){return p[t.Tb]},"%b":function(t){return f[t.ec].substring(0,3)},"%B":function(t){return f[t.ec]},"%C":function(t){return s((t.Xb+1900)/100|0,2)},"%d":function(t){return s(t.jc,2)},"%e":function(t){return a(t.jc,2," ")},"%g":function(t){return u(t).toString().substring(2)},"%G":function(t){return u(t)},"%H":function(t){return s(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),s(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(se(t.Xb+1900)?ce:le)[n++]);return s(t.jc+e,3)},"%m":function(t){return s(t.ec+1,2)},"%M":function(t){return s(t.Kc,2)},"%n":function(){return"\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return s(t.Lc,2)},"%t":function(){return"\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return s(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&se(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&se(t.Xb%400-1))&&e++}return s(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return s(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\0\0"),h)r.includes(d)&&(r=r.replace(new RegExp(d,"g"),h[d](i)));return d=function(t){var e=Array(H(t)+1);return W(t,e,0,e.length),e}(r=r.replace(/\0\0/g,"%")),d.length>n?0:(function(t,n){e().set(t,n>>>0)}(d,t),d.length-1)}ft.fc();var he=[null,dt,gt,At,Ot,Ct,kt,Pt,It,Nt,Rt,Dt,Lt,Ft,jt,Ut,Bt,Gt,Wt,qt,$t,Qt,te,ee,ne,oe],de={b:function(t){return fe(t+24)+24},n:function(t){return(t=new Tt(t)).uc()||(t.hc(!0),wt--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw k("Unexpected exception thrown, this is not properly supported - aborting"),B=!0,t},x:function(){Te(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&vt(e)(t.Zb),Et(t.Zb)}St=0},e:function(){var t=St;if(!t)return ae=0;var e=new Tt(t);e.cc(t);var n=e.bc();if(!n)return ae=0,t;for(var r=Array.prototype.slice.call(arguments),i=0;i<r.length;i++){var o=r[i];if(0===o||o===n)break;if(Ce(o,n,e.Sb+16))return ae=o,t}return ae=n,t},l:function(){var t=St;if(!t)return ae=0;var e=new Tt(t);e.cc(t);var n=e.bc();if(!n)return ae=0,t;for(var r=Array.prototype.slice.call(arguments),i=0;i<r.length;i++){var o=r[i];if(0===o||o===n)break;if(Ce(o,n,e.Sb+16))return ae=o,t}return ae=n,t},h:function(){var t=St;if(!t)return ae=0;var e=new Tt(t);e.cc(t);var n=e.bc();if(!n)return ae=0,t;for(var r=Array.prototype.slice.call(arguments),i=0;i<r.length;i++){var o=r[i];if(0===o||o===n)break;if(Ce(o,n,e.Sb+16))return ae=o,t}return ae=n,t},t:Et,M:function(){var t=_t.pop();t||ot("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),wt++),St=e,e},c:function(t,e,n){throw new Tt(t).fc(e,n),St=t,wt++,t},pa:function(){return wt},Fa:function(t){ve(t,!_,1,!x),ft.pc()},T:function(t){S?postMessage({cmd:"cleanupThread",thread:t}):ut(t)},xa:Mt,j:function(t){throw St||(St=t),t},H:Ot,Ma:Ct,ua:kt,wa:Pt,oa:It,Ka:Nt,Ca:Rt,Ja:Dt,V:Lt,va:Ft,sa:jt,La:Ut,ta:Bt,Ta:function(){},X:function(){ot("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){ot("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(S)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ft.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Vt(t)),o()[e>>2>>>0]=t.getUTCSeconds(),o()[e+4>>2>>>0]=t.getUTCMinutes(),o()[e+8>>2>>>0]=t.getUTCHours(),o()[e+12>>2>>>0]=t.getUTCDate(),o()[e+16>>2>>>0]=t.getUTCMonth(),o()[e+20>>2>>>0]=t.getUTCFullYear()-1900,o()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,o()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Vt(t)),o()[e>>2>>>0]=t.getSeconds(),o()[e+4>>2>>>0]=t.getMinutes(),o()[e+8>>2>>>0]=t.getHours(),o()[e+12>>2>>>0]=t.getDate(),o()[e+16>>2>>>0]=t.getMonth(),o()[e+20>>2>>>0]=t.getFullYear()-1900,o()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;o()[e+28>>2>>>0]=r,o()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),o()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(o()[t+20>>2>>>0]+1900,o()[t+16>>2>>>0],o()[t+12>>2>>>0],o()[t+8>>2>>>0],o()[t+4>>2>>>0],o()[t>>2>>>0],0),n=o()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),a=new Date(e.getFullYear(),6,1).getTimezoneOffset(),s=i.getTimezoneOffset(),c=Math.min(s,a);return 0>n?o()[t+32>>2>>>0]=Number(a!=s&&c==r):0<n!=(c==r)&&(a=Math.max(s,a),e.setTime(e.getTime()+6e4*((0<n?c:a)-r))),o()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,o()[t+28>>2>>>0]=n,o()[t>>2>>>0]=e.getSeconds(),o()[t+4>>2>>>0]=e.getMinutes(),o()[t+8>>2>>>0]=e.getHours(),o()[t+12>>2>>>0]=e.getDate(),o()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Gt,Ba:Wt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,qt(e,n,r))},y:function(){ot("")},U:function(){if(!w&&!_){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";bt||(bt={}),bt[t]||(bt[t]=1,w&&(t="warning: "+t),k(t))}},ra:function(){return 4294901760},B:xt,Ia:function(t,e,n){i().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return w?n(3993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Kt.length=e,n>>=3;for(var r=0;r<e;r++)Kt[r]=s()[n+r>>>0];return(0>t?ct[-t-1]:he[t]).apply(null,Kt)},qa:function(t){var e=i().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var o=Math;r=Math.max(t,r),o=o.min.call(o,4294901760,r+(65536-r%65536)%65536);t:{try{I.grow(o-R.byteLength+65535>>>16),q(I.buffer);var a=1;break t}catch(t){}a=void 0}if(a)return!0}return!1},Na:function(){throw"unwind"},Ga:$t,Ha:Qt,J:pt,I:te,S:ee,ga:ne,R:oe,d:function(){return ae},na:function t(r,i){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(w)try{var e=n(Object(function(){var t=new Error("Cannot find module 'crypto'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>ot("randomDevice")}());for(var o=0;o<i;o++)e()[(r+o|0)>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ae();try{return vt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Te(1,0)}},ja:function(t,e,n){var r=Ae();try{return vt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Te(1,0)}},K:function(t){var e=Ae();try{return vt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Te(1,0)}},f:function(t,e){var n=Ae();try{return vt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Te(1,0)}},P:function(t,e,n){var r=Ae();try{return vt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Te(1,0)}},Q:function(t,e,n){var r=Ae();try{return vt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Te(1,0)}},k:function(t,e,n){var r=Ae();try{return vt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Te(1,0)}},p:function(t,e,n,r){var i=Ae();try{return vt(t)(e,n,r)}catch(t){if(Me(i),t!==t+0)throw t;Te(1,0)}},q:function(t,e,n,r,i){var o=Ae();try{return vt(t)(e,n,r,i)}catch(t){if(Me(o),t!==t+0)throw t;Te(1,0)}},N:function(t,e,n,r,i,o){var a=Ae();try{return vt(t)(e,n,r,i,o)}catch(t){if(Me(a),t!==t+0)throw t;Te(1,0)}},s:function(t,e,n,r,i,o){var a=Ae();try{return vt(t)(e,n,r,i,o)}catch(t){if(Me(a),t!==t+0)throw t;Te(1,0)}},w:function(t,e,n,r,i,o,a){var s=Ae();try{return vt(t)(e,n,r,i,o,a)}catch(t){if(Me(s),t!==t+0)throw t;Te(1,0)}},L:function(t,e,n,r,i,o,a,s){var c=Ae();try{return vt(t)(e,n,r,i,o,a,s)}catch(t){if(Me(c),t!==t+0)throw t;Te(1,0)}},E:function(t,e,n,r,i,o,a,s,c,l,u,h){var d=Ae();try{return vt(t)(e,n,r,i,o,a,s,c,l,u,h)}catch(t){if(Me(d),t!==t+0)throw t;Te(1,0)}},aa:function(t,e,n,r,i,o,a,s){var c=Ae();try{return Ue(t,e,n,r,i,o,a,s)}catch(t){if(Me(c),t!==t+0)throw t;Te(1,0)}},_:function(t,e,n,r,i,o,a){var s=Ae();try{return Ie(t,e,n,r,i,o,a)}catch(t){if(Me(s),t!==t+0)throw t;Te(1,0)}},Z:function(t,e,n,r,i){var o=Ae();try{return Be(t,e,n,r,i)}catch(t){if(Me(o),t!==t+0)throw t;Te(1,0)}},ca:function(t,e,n,r){var i=Ae();try{return Fe(t,e,n,r)}catch(t){if(Me(i),t!==t+0)throw t;Te(1,0)}},$:function(t){var e=Ae();try{return Pe(t)}catch(t){if(Me(e),t!==t+0)throw t;Te(1,0)}},ba:function(t,e){var n=Ae();try{return je(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Te(1,0)}},Y:function(t,e,n){var r=Ae();try{return Ne(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Te(1,0)}},g:function(t){var e=Ae();try{vt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Te(1,0)}},r:function(t,e){var n=Ae();try{vt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Te(1,0)}},i:function(t,e,n){var r=Ae();try{vt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Te(1,0)}},ha:function(t,e,n,r){var i=Ae();try{vt(t)(e,n,r)}catch(t){if(Me(i),t!==t+0)throw t;Te(1,0)}},m:function(t,e,n,r){var i=Ae();try{vt(t)(e,n,r)}catch(t){if(Me(i),t!==t+0)throw t;Te(1,0)}},v:function(t,e,n,r,i){var o=Ae();try{vt(t)(e,n,r,i)}catch(t){if(Me(o),t!==t+0)throw t;Te(1,0)}},u:function(t,e,n,r,i,o){var a=Ae();try{vt(t)(e,n,r,i,o)}catch(t){if(Me(a),t!==t+0)throw t;Te(1,0)}},O:function(t,e,n,r,i,o,a){var s=Ae();try{vt(t)(e,n,r,i,o,a)}catch(t){if(Me(s),t!==t+0)throw t;Te(1,0)}},A:function(t,e,n,r,i,o,a,s){var c=Ae();try{vt(t)(e,n,r,i,o,a,s)}catch(t){if(Me(c),t!==t+0)throw t;Te(1,0)}},ka:function(t,e,n,r,i,o,a,s,c){var l=Ae();try{vt(t)(e,n,r,i,o,a,s,c)}catch(t){if(Me(l),t!==t+0)throw t;Te(1,0)}},C:function(t,e,n,r,i,o,a,s,c,l,u){var h=Ae();try{vt(t)(e,n,r,i,o,a,s,c,l,u)}catch(t){if(Me(h),t!==t+0)throw t;Te(1,0)}},D:function(t,e,n,r,i,o,a,s,c,l,u,h,d,p,f,m){var g=Ae();try{vt(t)(e,n,r,i,o,a,s,c,l,u,h,d,p,f,m)}catch(t){if(Me(g),t!==t+0)throw t;Te(1,0)}},fa:function(t,e,n,r,i,o,a,s){var c=Ae();try{Re(t,e,n,r,i,o,a,s)}catch(t){if(Me(c),t!==t+0)throw t;Te(1,0)}},da:function(t,e,n,r,i,o,a,s,c,l,u,h){var d=Ae();try{Le(t,e,n,r,i,o,a,s,c,l,u,h)}catch(t){if(Me(d),t!==t+0)throw t;Te(1,0)}},ea:function(t,e,n,r,i,o){var a=Ae();try{De(t,e,n,r,i,o)}catch(t){if(Me(a),t!==t+0)throw t;Te(1,0)}},o:function(t){return t},a:I||c.wasmMemory,G:function(t){ae=t},la:ue,z:function(t,e,n,r){return ue(t,e,n,r)}};!function(){function t(t,e){c.asm=t.exports,ft.qc.push(c.asm.sb),Y=c.asm.ub,Z.unshift(c.asm.Va),N=e,S||(nt--,c.monitorRunDependencies&&c.monitorRunDependencies(nt),0==nt&&(null!==rt&&(clearInterval(rt),rt=null),it&&(t=it,it=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!O&&(x||_)){if("function"==typeof fetch&&!et.startsWith("file://"))return fetch(et,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+et+"'";return t.arrayBuffer()})).catch((function(){return st()}));if(d)return new Promise((function(t,e){d(et,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return st()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){k("failed to asynchronously prepare wasm: "+t),ot(t)}))}var r={a:de};if(S||(nt++,c.monitorRunDependencies&&c.monitorRunDependencies(nt)),c.instantiateWasm)try{return c.instantiateWasm(r,t)}catch(t){return k("Module.instantiateWasm callback failed with error: "+t),!1}(O||"function"!=typeof WebAssembly.instantiateStreaming||at()||et.startsWith("file://")||w||"function"!=typeof fetch?n(e):fetch(et,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return k("wasm streaming compile failed: "+t),k("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(u)}(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.Va).apply(null,arguments)},c._OrtInit=function(){return(c._OrtInit=c.asm.Wa).apply(null,arguments)},c._OrtCreateSessionOptions=function(){return(c._OrtCreateSessionOptions=c.asm.Xa).apply(null,arguments)},c._OrtAppendExecutionProvider=function(){return(c._OrtAppendExecutionProvider=c.asm.Ya).apply(null,arguments)},c._OrtAddSessionConfigEntry=function(){return(c._OrtAddSessionConfigEntry=c.asm.Za).apply(null,arguments)},c._OrtReleaseSessionOptions=function(){return(c._OrtReleaseSessionOptions=c.asm._a).apply(null,arguments)},c._OrtCreateSession=function(){return(c._OrtCreateSession=c.asm.$a).apply(null,arguments)},c._OrtReleaseSession=function(){return(c._OrtReleaseSession=c.asm.ab).apply(null,arguments)},c._OrtGetInputCount=function(){return(c._OrtGetInputCount=c.asm.bb).apply(null,arguments)},c._OrtGetOutputCount=function(){return(c._OrtGetOutputCount=c.asm.cb).apply(null,arguments)},c._OrtGetInputName=function(){return(c._OrtGetInputName=c.asm.db).apply(null,arguments)},c._OrtGetOutputName=function(){return(c._OrtGetOutputName=c.asm.eb).apply(null,arguments)},c._OrtFree=function(){return(c._OrtFree=c.asm.fb).apply(null,arguments)},c._OrtCreateTensor=function(){return(c._OrtCreateTensor=c.asm.gb).apply(null,arguments)},c._OrtGetTensorData=function(){return(c._OrtGetTensorData=c.asm.hb).apply(null,arguments)},c._OrtReleaseTensor=function(){return(c._OrtReleaseTensor=c.asm.ib).apply(null,arguments)},c._OrtCreateRunOptions=function(){return(c._OrtCreateRunOptions=c.asm.jb).apply(null,arguments)},c._OrtAddRunConfigEntry=function(){return(c._OrtAddRunConfigEntry=c.asm.kb).apply(null,arguments)},c._OrtReleaseRunOptions=function(){return(c._OrtReleaseRunOptions=c.asm.lb).apply(null,arguments)},c._OrtRun=function(){return(c._OrtRun=c.asm.mb).apply(null,arguments)},c._OrtEndProfiling=function(){return(c._OrtEndProfiling=c.asm.nb).apply(null,arguments)};var pe=c._pthread_self=function(){return(pe=c._pthread_self=c.asm.ob).apply(null,arguments)},fe=c._malloc=function(){return(fe=c._malloc=c.asm.pb).apply(null,arguments)},me=c._free=function(){return(me=c._free=c.asm.qb).apply(null,arguments)},ge=c._fflush=function(){return(ge=c._fflush=c.asm.rb).apply(null,arguments)};c.__emscripten_tls_init=function(){return(c.__emscripten_tls_init=c.asm.sb).apply(null,arguments)};var ye=c.___funcs_on_exit=function(){return(ye=c.___funcs_on_exit=c.asm.tb).apply(null,arguments)},ve=c.__emscripten_thread_init=function(){return(ve=c.__emscripten_thread_init=c.asm.vb).apply(null,arguments)};c.__emscripten_thread_crashed=function(){return(c.__emscripten_thread_crashed=c.asm.wb).apply(null,arguments)};var be,xe=c._emscripten_run_in_main_runtime_thread_js=function(){return(xe=c._emscripten_run_in_main_runtime_thread_js=c.asm.xb).apply(null,arguments)},_e=c.__emscripten_proxy_execute_task_queue=function(){return(_e=c.__emscripten_proxy_execute_task_queue=c.asm.yb).apply(null,arguments)},we=c.__emscripten_thread_free_data=function(){return(we=c.__emscripten_thread_free_data=c.asm.zb).apply(null,arguments)},Se=c.__emscripten_thread_exit=function(){return(Se=c.__emscripten_thread_exit=c.asm.Ab).apply(null,arguments)},Te=c._setThrew=function(){return(Te=c._setThrew=c.asm.Bb).apply(null,arguments)},Ee=c._emscripten_stack_set_limits=function(){return(Ee=c._emscripten_stack_set_limits=c.asm.Cb).apply(null,arguments)},Ae=c.stackSave=function(){return(Ae=c.stackSave=c.asm.Db).apply(null,arguments)},Me=c.stackRestore=function(){return(Me=c.stackRestore=c.asm.Eb).apply(null,arguments)},Oe=c.stackAlloc=function(){return(Oe=c.stackAlloc=c.asm.Fb).apply(null,arguments)},Ce=c.___cxa_can_catch=function(){return(Ce=c.___cxa_can_catch=c.asm.Gb).apply(null,arguments)},ke=c.___cxa_is_pointer_type=function(){return(ke=c.___cxa_is_pointer_type=c.asm.Hb).apply(null,arguments)},Pe=c.dynCall_j=function(){return(Pe=c.dynCall_j=c.asm.Ib).apply(null,arguments)},Ie=c.dynCall_iiiiij=function(){return(Ie=c.dynCall_iiiiij=c.asm.Jb).apply(null,arguments)},Ne=c.dynCall_jii=function(){return(Ne=c.dynCall_jii=c.asm.Kb).apply(null,arguments)},Re=c.dynCall_viiiiij=function(){return(Re=c.dynCall_viiiiij=c.asm.Lb).apply(null,arguments)},De=c.dynCall_vjji=function(){return(De=c.dynCall_vjji=c.asm.Mb).apply(null,arguments)},Le=c.dynCall_viiijjjii=function(){return(Le=c.dynCall_viiijjjii=c.asm.Nb).apply(null,arguments)},Fe=c.dynCall_iij=function(){return(Fe=c.dynCall_iij=c.asm.Ob).apply(null,arguments)},je=c.dynCall_ji=function(){return(je=c.dynCall_ji=c.asm.Pb).apply(null,arguments)},Ue=c.dynCall_iiiiiij=function(){return(Ue=c.dynCall_iiiiiij=c.asm.Qb).apply(null,arguments)},Be=c.dynCall_iiij=function(){return(Be=c.dynCall_iiij=c.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!be&&(be=!0,c.calledRun=!0,!B)&&(S||mt(Z),l(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),!S)){if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;){var t=c.postRun.shift();$.unshift(t)}mt($)}}if(!(0<nt))if(S)l(c),S||mt(Z),postMessage({cmd:"loaded"});else{if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)tt();mt(K),0<nt||(c.setStatus?(c.setStatus("Running..."),setTimeout((function(){setTimeout((function(){c.setStatus("")}),1),t()}),1)):t())}}if(c.UTF8ToString=G,c.stringToUTF8=function(t,e,n){return W(t,i(),e,n)},c.lengthBytesUTF8=H,c.keepRuntimeAlive=Q,c.wasmMemory=I,c.stackSave=Ae,c.stackRestore=Me,c.stackAlloc=Oe,c.ExitStatus=lt,c.PThread=ft,it=function t(){be||ze(),be||(it=t)},c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return ze(),t.ready});t.exports=i},932:(t,e,n)=>{var r,i=(r=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,i,o;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){i=t,o=e}));var a,s,c,l,u,h,d=Object.assign({},e),p="./this.program",f=(t,e)=>{throw e},m="object"==typeof window,g="function"==typeof importScripts,y="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,v="";y?(v=g?n(908).dirname(v)+"/":"//",h=()=>{u||(l=n(1384),u=n(908))},a=function(t,e){return h(),t=u.normalize(t),l.readFileSync(t,e?void 0:"utf8")},c=t=>((t=a(t,!0)).buffer||(t=new Uint8Array(t)),t),s=(t,e,n)=>{h(),t=u.normalize(t),l.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),f=(t,e)=>{if(w||0<z)throw process.exitCode=t,e;e instanceof J||_("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(m||g)&&(g?v=self.location.href:"undefined"!=typeof document&&document.currentScript&&(v=document.currentScript.src),r&&(v=r),v=0!==v.indexOf("blob:")?v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1):"",a=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},g&&(c=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),s=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var b,x=e.print||console.log.bind(console),_=e.printErr||console.warn.bind(console);Object.assign(e,d),d=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(f=e.quit),e.wasmBinary&&(b=e.wasmBinary);var w=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&X("no native wasm support detected");var S,T,E,A,M,O,C=!1,k="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function P(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&k)return k.decode(t.subarray(e,n));for(r="";e<n;){var i=t[e++];if(128&i){var o=63&t[e++];if(192==(224&i))r+=String.fromCharCode((31&i)<<6|o);else{var a=63&t[e++];65536>(i=224==(240&i)?(15&i)<<12|o<<6|a:(7&i)<<18|o<<12|a<<6|63&t[e++])?r+=String.fromCharCode(i):(i-=65536,r+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else r+=String.fromCharCode(i)}return r}function I(t,e){return(t>>>=0)?P(A,t,e):""}function N(t,e,n,r){if(!(0<r))return 0;var i=n>>>=0;r=n+r-1;for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++o)),127>=a){if(n>=r)break;e[n++>>>0]=a}else{if(2047>=a){if(n+1>=r)break;e[n++>>>0]=192|a>>6}else{if(65535>=a){if(n+2>=r)break;e[n++>>>0]=224|a>>12}else{if(n+3>=r)break;e[n++>>>0]=240|a>>18,e[n++>>>0]=128|a>>12&63}e[n++>>>0]=128|a>>6&63}e[n++>>>0]=128|63&a}}return e[n>>>0]=0,n-i}function R(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function D(){var t=S.buffer;T=t,e.HEAP8=E=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=M=new Int32Array(t),e.HEAPU8=A=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=O=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var L,F=[],j=[],U=[],B=[],z=0;function V(){var t=e.preRun.shift();F.unshift(t)}var G,W=0,H=null,q=null;function X(t){throw e.onAbort&&e.onAbort(t),_(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),o(t),t}function Y(){return G.startsWith("data:application/octet-stream;base64,")}if(G="ort-wasm.wasm",!Y()){var K=G;G=e.locateFile?e.locateFile(K,v):v+K}function Z(){var t=G;try{if(t==G&&b)return new Uint8Array(b);if(c)return c(t);throw"both async and sync fetching of the wasm failed"}catch(t){X(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function $(t){for(;0<t.length;)t.shift()(e)}var Q=[],tt=0,et=0;function nt(t){this.Db=t,this.zb=t-24,this.Ub=function(t){O[this.zb+4>>2>>>0]=t},this.Eb=function(){return O[this.zb+4>>2>>>0]},this.Sb=function(t){O[this.zb+8>>2>>>0]=t},this.Wb=function(){return O[this.zb+8>>2>>>0]},this.Tb=function(){M[this.zb>>2>>>0]=0},this.Ib=function(t){E[(this.zb+12|0)>>>0]=t?1:0},this.Pb=function(){return 0!=E[(this.zb+12|0)>>>0]},this.Jb=function(t){E[(this.zb+13|0)>>>0]=t?1:0},this.Lb=function(){return 0!=E[(this.zb+13|0)>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){M[this.zb>>2>>>0]+=1},this.Xb=function(){var t=M[this.zb>>2>>>0];return M[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){O[this.zb+16>>2>>>0]=t},this.Ob=function(){return O[this.zb+16>>2>>>0]},this.Qb=function(){if(Ot(this.Eb()))return O[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function rt(t){return xt(new nt(t).zb)}var it=[];function ot(t){var e=it[t];return e||(t>=it.length&&(it.length=t+1),it[t]=e=L.get(t)),e}function at(t){var e=R(t)+1,n=bt(e);return n&&N(t,E,n,e),n}var st={};function ct(){if(!lt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in st)void 0===st[t]?delete e[t]:e[t]=st[t];var n=[];for(t in e)n.push(t+"="+e[t]);lt=n}return lt}var lt,ut=[null,[],[]];function ht(t,e){var n=ut[t];0===e||10===e?((1===t?x:_)(P(n,0)),n.length=0):n.push(e)}var dt=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ft=[31,29,31,30,31,30,31,31,30,31,30,31],mt=[31,28,31,30,31,30,31,31,30,31,30,31];function gt(t,e,n,r){function i(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function o(t,e){return i(t,e,"0")}function a(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ft:mt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=a(e,t)?0>=a(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var l=M[r+40>>2>>>0];for(var u in r={$b:M[r>>2>>>0],Zb:M[r+4>>2>>>0],Gb:M[r+8>>2>>>0],Kb:M[r+12>>2>>>0],Hb:M[r+16>>2>>>0],Cb:M[r+20>>2>>>0],Ab:M[r+24>>2>>>0],Bb:M[r+28>>2>>>0],bc:M[r+32>>2>>>0],Yb:M[r+36>>2>>>0],ac:l?I(l):""},n=I(n),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(u,"g"),l[u]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(u in l={"%a":function(t){return h[t.Ab].substring(0,3)},"%A":function(t){return h[t.Ab]},"%b":function(t){return d[t.Hb].substring(0,3)},"%B":function(t){return d[t.Hb]},"%C":function(t){return o((t.Cb+1900)/100|0,2)},"%d":function(t){return o(t.Kb,2)},"%e":function(t){return i(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return o(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),o(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ft:mt)[n++]);return o(t.Kb+e,3)},"%m":function(t){return o(t.Hb+1,2)},"%M":function(t){return o(t.Zb,2)},"%n":function(){return"\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return o(t.$b,2)},"%t":function(){return"\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return o(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return o(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return o(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\0\0"),l)n.includes(u)&&(n=n.replace(new RegExp(u,"g"),l[u](r)));return u=function(t){var e=Array(R(t)+1);return N(t,e,0,e.length),e}(n=n.replace(/\0\0/g,"%")),u.length>e?0:(E.set(u,t>>>0),u.length-1)}var yt={a:function(t){return bt(t+24)+24},m:function(t){return(t=new nt(t)).Pb()||(t.Ib(!0),tt--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw _("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){St(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&ot(e)(t.Db),rt(t.Db)}et=0},d:function(){var t=et;if(!t)return dt=0;var e=new nt(t);e.Fb(t);var n=e.Eb();if(!n)return dt=0,t;for(var r=Array.prototype.slice.call(arguments),i=0;i<r.length;i++){var o=r[i];if(0===o||o===n)break;if(Mt(o,n,e.zb+16))return dt=o,t}return dt=n,t},k:function(){var t=et;if(!t)return dt=0;var e=new nt(t);e.Fb(t);var n=e.Eb();if(!n)return dt=0,t;for(var r=Array.prototype.slice.call(arguments),i=0;i<r.length;i++){var o=r[i];if(0===o||o===n)break;if(Mt(o,n,e.zb+16))return dt=o,t}return dt=n,t},g:function(){var t=et;if(!t)return dt=0;var e=new nt(t);e.Fb(t);var n=e.Eb();if(!n)return dt=0,t;for(var r=Array.prototype.slice.call(arguments),i=0;i<r.length;i++){var o=r[i];if(0===o||o===n)break;if(Mt(o,n,e.zb+16))return dt=o,t}return dt=n,t},s:rt,L:function(){var t=Q.pop();t||X("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),tt++),et=e,e},b:function(t,e,n){throw new nt(t).Rb(e,n),et=t,tt++,t},la:function(){return tt},i:function(t){throw et||(et=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){X("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){X("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(O[t>>>2]+4294967296*M[t+4>>>2])),M[e>>2>>>0]=t.getUTCSeconds(),M[e+4>>2>>>0]=t.getUTCMinutes(),M[e+8>>2>>>0]=t.getUTCHours(),M[e+12>>2>>>0]=t.getUTCDate(),M[e+16>>2>>>0]=t.getUTCMonth(),M[e+20>>2>>>0]=t.getUTCFullYear()-1900,M[e+24>>2>>>0]=t.getUTCDay(),M[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(O[t>>>2]+4294967296*M[t+4>>>2])),M[e>>2>>>0]=t.getSeconds(),M[e+4>>2>>>0]=t.getMinutes(),M[e+8>>2>>>0]=t.getHours(),M[e+12>>2>>>0]=t.getDate(),M[e+16>>2>>>0]=t.getMonth(),M[e+20>>2>>>0]=t.getFullYear()-1900,M[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);M[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,M[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),M[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(M[t+20>>2>>>0]+1900,M[t+16>>2>>>0],M[t+12>>2>>>0],M[t+8>>2>>>0],M[t+4>>2>>>0],M[t>>2>>>0],0),n=M[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),a=i.getTimezoneOffset(),s=Math.min(a,o);return 0>n?M[t+32>>2>>>0]=Number(o!=a&&s==r):0<n!=(s==r)&&(o=Math.max(a,o),e.setTime(e.getTime()+6e4*((0<n?s:o)-r))),M[t+24>>2>>>0]=e.getDay(),M[t+28>>2>>>0]=(e.getTime()-i.getTime())/864e5|0,M[t>>2>>>0]=e.getSeconds(),M[t+4>>2>>>0]=e.getMinutes(),M[t+8>>2>>>0]=e.getHours(),M[t+12>>2>>>0]=e.getDate(),M[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}var i=(new Date).getFullYear(),o=new Date(i,0,1),a=new Date(i,6,1);i=o.getTimezoneOffset();var s=a.getTimezoneOffset();M[t>>2>>>0]=60*Math.max(i,s),M[e>>2>>>0]=Number(i!=s),t=r(o),e=r(a),t=at(t),e=at(e),s<i?(O[n>>2>>>0]=t,O[n+4>>2>>>0]=e):(O[n>>2>>>0]=e,O[n+4>>2>>>0]=t)}(e,n,r))},B:function(){X("")},ma:function(){return 4294901760},I:y?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){A.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=A.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var i=Math;r=Math.max(t,r),i=i.min.call(i,4294901760,r+(65536-r%65536)%65536);t:{try{S.grow(i-T.byteLength+65535>>>16),D();var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},va:function(t,e){var n=0;return ct().forEach((function(r,i){var o=e+n;for(i=O[t+4*i>>2>>>0]=o,o=0;o<r.length;++o)E[(0|i++)>>>0]=r.charCodeAt(o);E[(0|i)>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ct();O[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),O[e>>2>>>0]=r,0},ba:function(t){w||0<z||(wt(),$(U),_t(0),ut[1].length&&ht(1,10),ut[2].length&&ht(2,10)),w||0<z||(e.onExit&&e.onExit(t),C=!0),f(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var i=0,o=0;o<n;o++){var a=O[e>>2>>>0],s=O[e+4>>2>>>0];e+=8;for(var c=0;c<s;c++)ht(t,A[a+c>>>0]);i+=s}return O[r>>2>>>0]=i,0},c:function(){return dt},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(y)try{var e=n(Object(function(){var t=new Error("Cannot find module 'crypto'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>X("randomDevice")}());for(var i=0;i<r;i++)E[(e+i|0)>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=Tt();try{return ot(t)(e,n)}catch(t){if(Et(r),t!==t+0)throw t;St(1,0)}},fa:function(t,e,n){var r=Tt();try{return ot(t)(e,n)}catch(t){if(Et(r),t!==t+0)throw t;St(1,0)}},J:function(t){var e=Tt();try{return ot(t)()}catch(t){if(Et(e),t!==t+0)throw t;St(1,0)}},e:function(t,e){var n=Tt();try{return ot(t)(e)}catch(t){if(Et(n),t!==t+0)throw t;St(1,0)}},N:function(t,e,n){var r=Tt();try{return ot(t)(e,n)}catch(t){if(Et(r),t!==t+0)throw t;St(1,0)}},O:function(t,e,n){var r=Tt();try{return ot(t)(e,n)}catch(t){if(Et(r),t!==t+0)throw t;St(1,0)}},j:function(t,e,n){var r=Tt();try{return ot(t)(e,n)}catch(t){if(Et(r),t!==t+0)throw t;St(1,0)}},o:function(t,e,n,r){var i=Tt();try{return ot(t)(e,n,r)}catch(t){if(Et(i),t!==t+0)throw t;St(1,0)}},p:function(t,e,n,r,i){var o=Tt();try{return ot(t)(e,n,r,i)}catch(t){if(Et(o),t!==t+0)throw t;St(1,0)}},M:function(t,e,n,r,i,o){var a=Tt();try{return ot(t)(e,n,r,i,o)}catch(t){if(Et(a),t!==t+0)throw t;St(1,0)}},r:function(t,e,n,r,i,o){var a=Tt();try{return ot(t)(e,n,r,i,o)}catch(t){if(Et(a),t!==t+0)throw t;St(1,0)}},v:function(t,e,n,r,i,o,a){var s=Tt();try{return ot(t)(e,n,r,i,o,a)}catch(t){if(Et(s),t!==t+0)throw t;St(1,0)}},K:function(t,e,n,r,i,o,a,s){var c=Tt();try{return ot(t)(e,n,r,i,o,a,s)}catch(t){if(Et(c),t!==t+0)throw t;St(1,0)}},D:function(t,e,n,r,i,o,a,s,c,l,u,h){var d=Tt();try{return ot(t)(e,n,r,i,o,a,s,c,l,u,h)}catch(t){if(Et(d),t!==t+0)throw t;St(1,0)}},X:function(t,e,n,r,i,o,a,s){var c=Tt();try{return Ft(t,e,n,r,i,o,a,s)}catch(t){if(Et(c),t!==t+0)throw t;St(1,0)}},V:function(t,e,n,r,i,o,a){var s=Tt();try{return kt(t,e,n,r,i,o,a)}catch(t){if(Et(s),t!==t+0)throw t;St(1,0)}},U:function(t,e,n,r,i){var o=Tt();try{return jt(t,e,n,r,i)}catch(t){if(Et(o),t!==t+0)throw t;St(1,0)}},Z:function(t,e,n,r){var i=Tt();try{return Dt(t,e,n,r)}catch(t){if(Et(i),t!==t+0)throw t;St(1,0)}},W:function(t){var e=Tt();try{return Ct(t)}catch(t){if(Et(e),t!==t+0)throw t;St(1,0)}},Y:function(t,e){var n=Tt();try{return Lt(t,e)}catch(t){if(Et(n),t!==t+0)throw t;St(1,0)}},T:function(t,e,n){var r=Tt();try{return Pt(t,e,n)}catch(t){if(Et(r),t!==t+0)throw t;St(1,0)}},f:function(t){var e=Tt();try{ot(t)()}catch(t){if(Et(e),t!==t+0)throw t;St(1,0)}},q:function(t,e){var n=Tt();try{ot(t)(e)}catch(t){if(Et(n),t!==t+0)throw t;St(1,0)}},h:function(t,e,n){var r=Tt();try{ot(t)(e,n)}catch(t){if(Et(r),t!==t+0)throw t;St(1,0)}},da:function(t,e,n,r){var i=Tt();try{ot(t)(e,n,r)}catch(t){if(Et(i),t!==t+0)throw t;St(1,0)}},l:function(t,e,n,r){var i=Tt();try{ot(t)(e,n,r)}catch(t){if(Et(i),t!==t+0)throw t;St(1,0)}},t:function(t,e,n,r,i){var o=Tt();try{ot(t)(e,n,r,i)}catch(t){if(Et(o),t!==t+0)throw t;St(1,0)}},u:function(t,e,n,r,i,o){var a=Tt();try{ot(t)(e,n,r,i,o)}catch(t){if(Et(a),t!==t+0)throw t;St(1,0)}},x:function(t,e,n,r,i,o,a){var s=Tt();try{ot(t)(e,n,r,i,o,a)}catch(t){if(Et(s),t!==t+0)throw t;St(1,0)}},z:function(t,e,n,r,i,o,a,s){var c=Tt();try{ot(t)(e,n,r,i,o,a,s)}catch(t){if(Et(c),t!==t+0)throw t;St(1,0)}},ga:function(t,e,n,r,i,o,a,s,c){var l=Tt();try{ot(t)(e,n,r,i,o,a,s,c)}catch(t){if(Et(l),t!==t+0)throw t;St(1,0)}},A:function(t,e,n,r,i,o,a,s,c,l,u){var h=Tt();try{ot(t)(e,n,r,i,o,a,s,c,l,u)}catch(t){if(Et(h),t!==t+0)throw t;St(1,0)}},C:function(t,e,n,r,i,o,a,s,c,l,u,h,d,p,f,m){var g=Tt();try{ot(t)(e,n,r,i,o,a,s,c,l,u,h,d,p,f,m)}catch(t){if(Et(g),t!==t+0)throw t;St(1,0)}},aa:function(t,e,n,r,i,o,a,s){var c=Tt();try{It(t,e,n,r,i,o,a,s)}catch(t){if(Et(c),t!==t+0)throw t;St(1,0)}},_:function(t,e,n,r,i,o,a,s,c,l,u,h){var d=Tt();try{Rt(t,e,n,r,i,o,a,s,c,l,u,h)}catch(t){if(Et(d),t!==t+0)throw t;St(1,0)}},$:function(t,e,n,r,i,o){var a=Tt();try{Nt(t,e,n,r,i,o)}catch(t){if(Et(a),t!==t+0)throw t;St(1,0)}},n:function(t){return t},F:function(t){dt=t},ha:gt,y:function(t,e,n,r){return gt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,S=e.asm.Ka,D(),L=e.asm.ib,j.unshift(e.asm.La),W--,e.monitorRunDependencies&&e.monitorRunDependencies(W),0==W&&(null!==H&&(clearInterval(H),H=null),q&&(t=q,q=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!b&&(m||g)){if("function"==typeof fetch&&!G.startsWith("file://"))return fetch(G,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+G+"'";return t.arrayBuffer()})).catch((function(){return Z()}));if(s)return new Promise((function(t,e){s(G,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return Z()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){_("failed to asynchronously prepare wasm: "+t),X(t)}))}var i={a:yt};if(W++,e.monitorRunDependencies&&e.monitorRunDependencies(W),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return _("Module.instantiateWasm callback failed with error: "+t),!1}(b||"function"!=typeof WebAssembly.instantiateStreaming||Y()||G.startsWith("file://")||y||"function"!=typeof fetch?r(n):fetch(G,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return _("wasm streaming compile failed: "+t),_("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(o)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var vt,bt=e._malloc=function(){return(bt=e._malloc=e.asm.eb).apply(null,arguments)},xt=e._free=function(){return(xt=e._free=e.asm.fb).apply(null,arguments)},_t=e._fflush=function(){return(_t=e._fflush=e.asm.gb).apply(null,arguments)},wt=e.___funcs_on_exit=function(){return(wt=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},St=e._setThrew=function(){return(St=e._setThrew=e.asm.jb).apply(null,arguments)},Tt=e.stackSave=function(){return(Tt=e.stackSave=e.asm.kb).apply(null,arguments)},Et=e.stackRestore=function(){return(Et=e.stackRestore=e.asm.lb).apply(null,arguments)},At=e.stackAlloc=function(){return(At=e.stackAlloc=e.asm.mb).apply(null,arguments)},Mt=e.___cxa_can_catch=function(){return(Mt=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Ot=e.___cxa_is_pointer_type=function(){return(Ot=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},kt=e.dynCall_iiiiij=function(){return(kt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Pt=e.dynCall_jii=function(){return(Pt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},It=e.dynCall_viiiiij=function(){return(It=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},Nt=e.dynCall_vjji=function(){return(Nt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Rt=e.dynCall_viiijjjii=function(){return(Rt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Dt=e.dynCall_iij=function(){return(Dt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Lt=e.dynCall_ji=function(){return(Lt=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},jt=e.dynCall_iiij=function(){return(jt=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Ut(){function t(){if(!vt&&(vt=!0,e.calledRun=!0,!C)){if($(j),i(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();B.unshift(t)}$(B)}}if(!(0<W)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)V();$(F),0<W||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=I,e.stringToUTF8=function(t,e,n){return N(t,A,e,n)},e.lengthBytesUTF8=R,e.stackSave=Tt,e.stackRestore=Et,e.stackAlloc=At,q=function t(){vt||Ut(),vt||(q=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Ut(),t.ready});t.exports=i},4537:t=>{"use strict";t.exports=function(t,e){for(var n=new Array(arguments.length-1),r=0,i=2,o=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,a){n[r]=function(t){if(o)if(o=!1,t)a(t);else{for(var e=new Array(arguments.length-1),n=0;n<e.length;)e[n++]=arguments[n];i.apply(null,e)}};try{t.apply(e||null,n)}catch(t){o&&(o=!1,a(t))}}))}},7419:(t,e)=>{"use strict";var n=e;n.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&"="===t.charAt(e);)++n;return Math.ceil(3*t.length)/4-n};for(var r=new Array(64),i=new Array(123),o=0;o<64;)i[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;n.encode=function(t,e,n){for(var i,o=null,a=[],s=0,c=0;e<n;){var l=t[e++];switch(c){case 0:a[s++]=r[l>>2],i=(3&l)<<4,c=1;break;case 1:a[s++]=r[i|l>>4],i=(15&l)<<2,c=2;break;case 2:a[s++]=r[i|l>>6],a[s++]=r[63&l],c=0}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=r[i],a[s++]=61,1===c&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var a="invalid encoding";n.decode=function(t,e,n){for(var r,o=n,s=0,c=0;c<t.length;){var l=t.charCodeAt(c++);if(61===l&&s>1)break;if(void 0===(l=i[l]))throw Error(a);switch(s){case 0:r=l,s=1;break;case 1:e[n++]=r<<2|(48&l)>>4,r=l,s=2;break;case 2:e[n++]=(15&r)<<4|(60&l)>>2,r=l,s=3;break;case 3:e[n++]=(3&r)<<6|l,s=0}}if(1===s)throw Error(a);return n-o},n.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},9211:t=>{"use strict";function e(){this._listeners={}}t.exports=e,e.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this},e.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var n=this._listeners[t],r=0;r<n.length;)n[r].fn===e?n.splice(r,1):++r;return this},e.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,n)}return this}},945:t=>{"use strict";function e(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),r=128===n[3];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(t,r,i){e[0]=t,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function a(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],e[0]}function s(t,r){return n[3]=t[r],n[2]=t[r+1],n[1]=t[r+2],n[0]=t[r+3],e[0]}t.writeFloatLE=r?i:o,t.writeFloatBE=r?o:i,t.readFloatLE=r?a:s,t.readFloatBE=r?s:a}():function(){function e(t,e,n,r){var i=e<0?1:0;if(i&&(e=-e),0===e)t(1/e>0?0:2147483648,n,r);else if(isNaN(e))t(2143289344,n,r);else if(e>34028234663852886e22)t((i<<31|2139095040)>>>0,n,r);else if(e<11754943508222875e-54)t((i<<31|Math.round(e/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(e)/Math.LN2);t((i<<31|o+127<<23|8388607&Math.round(e*Math.pow(2,-o)*8388608))>>>0,n,r)}}function a(t,e,n){var r=t(e,n),i=2*(r>>31)+1,o=r>>>23&255,a=8388607&r;return 255===o?a?NaN:i*(1/0):0===o?1401298464324817e-60*i*a:i*Math.pow(2,o-150)*(a+8388608)}t.writeFloatLE=e.bind(null,n),t.writeFloatBE=e.bind(null,r),t.readFloatLE=a.bind(null,i),t.readFloatBE=a.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),r=128===n[7];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(t,r,i){e[0]=t,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function a(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],n[4]=t[r+4],n[5]=t[r+5],n[6]=t[r+6],n[7]=t[r+7],e[0]}function s(t,r){return n[7]=t[r],n[6]=t[r+1],n[5]=t[r+2],n[4]=t[r+3],n[3]=t[r+4],n[2]=t[r+5],n[1]=t[r+6],n[0]=t[r+7],e[0]}t.writeDoubleLE=r?i:o,t.writeDoubleBE=r?o:i,t.readDoubleLE=r?a:s,t.readDoubleBE=r?s:a}():function(){function e(t,e,n,r,i,o){var a=r<0?1:0;if(a&&(r=-r),0===r)t(0,i,o+e),t(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))t(0,i,o+e),t(2146959360,i,o+n);else if(r>17976931348623157e292)t(0,i,o+e),t((a<<31|2146435072)>>>0,i,o+n);else{var s;if(r<22250738585072014e-324)t((s=r/5e-324)>>>0,i,o+e),t((a<<31|s/4294967296)>>>0,i,o+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),t(4503599627370496*(s=r*Math.pow(2,-c))>>>0,i,o+e),t((a<<31|c+1023<<20|1048576*s&1048575)>>>0,i,o+n)}}}function a(t,e,n,r,i){var o=t(r,i+e),a=t(r,i+n),s=2*(a>>31)+1,c=a>>>20&2047,l=4294967296*(1048575&a)+o;return 2047===c?l?NaN:s*(1/0):0===c?5e-324*s*l:s*Math.pow(2,c-1075)*(l+4503599627370496)}t.writeDoubleLE=e.bind(null,n,0,4),t.writeDoubleBE=e.bind(null,r,4,0),t.readDoubleLE=a.bind(null,i,0,4),t.readDoubleBE=a.bind(null,o,4,0)}(),t}function n(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function r(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t}function i(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function o(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=e(e)},7199:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},6662:t=>{"use strict";t.exports=function(t,e,n){var r=n||8192,i=r>>>1,o=null,a=r;return function(n){if(n<1||n>i)return t(n);a+n>r&&(o=t(r),a=0);var s=e.call(o,a,a+=n);return 7&a&&(a=1+(7|a)),s}}},4997:(t,e)=>{"use strict";var n=e;n.length=function(t){for(var e=0,n=0,r=0;r<t.length;++r)(n=t.charCodeAt(r))<128?e+=1:n<2048?e+=2:55296==(64512&n)&&56320==(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e},n.read=function(t,e,n){if(n-e<1)return"";for(var r,i=null,o=[],a=0;e<n;)(r=t[e++])<128?o[a++]=r:r>191&&r<224?o[a++]=(31&r)<<6|63&t[e++]:r>239&&r<365?(r=((7&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,o[a++]=55296+(r>>10),o[a++]=56320+(1023&r)):o[a++]=(15&r)<<12|(63&t[e++])<<6|63&t[e++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))},n.write=function(t,e,n){for(var r,i,o=n,a=0;a<t.length;++a)(r=t.charCodeAt(a))<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=t.charCodeAt(a+1)))?(r=65536+((1023&r)<<10)+(1023&i),++a,e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128);return n-o}},3442:(t,e)=>{"use strict";e.__esModule=!0;var n=function(){function t(e){if(!e)throw new TypeError("Invalid argument; `value` has no value.");this.value=t.EMPTY,e&&t.isGuid(e)&&(this.value=e)}return t.isGuid=function(e){var n=e.toString();return e&&(e instanceof t||t.validator.test(n))},t.create=function(){return new t([t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-"))},t.createEmpty=function(){return new t("emptyguid")},t.parse=function(e){return new t(e)},t.raw=function(){return[t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-")},t.gen=function(t){for(var e="",n=0;n<t;n++)e+=(65536*(1+Math.random())|0).toString(16).substring(1);return e},t.prototype.equals=function(e){return t.isGuid(e)&&this.value===e.toString()},t.prototype.isEmpty=function(){return this.value===t.EMPTY},t.prototype.toString=function(){return this.value},t.prototype.toJSON=function(){return{value:this.value}},t.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),t.EMPTY="00000000-0000-0000-0000-000000000000",t}();e.Guid=n},3720:t=>{t.exports=n;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function n(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function r(t){return!0===(t&&t.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},o={};function a(t,e){var n,r,a;return e?(a=0<=(t>>>=0)&&t<256)&&(r=o[t])?r:(n=c(t,(0|t)<0?-1:0,!0),a&&(o[t]=n),n):(a=-128<=(t|=0)&&t<128)&&(r=i[t])?r:(n=c(t,t<0?-1:0,!1),a&&(i[t]=n),n)}function s(t,e){if(isNaN(t))return e?y:g;if(e){if(t<0)return y;if(t>=p)return w}else{if(t<=-f)return S;if(t+1>=f)return _}return t<0?s(-t,e).neg():c(t%d|0,t/d|0,e)}function c(t,e,r){return new n(t,e,r)}n.fromInt=a,n.fromNumber=s,n.fromBits=c;var l=Math.pow;function u(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return g;if("number"==typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(t.substring(1),e,n).neg();for(var i=s(l(n,8)),o=g,a=0;a<t.length;a+=8){var c=Math.min(8,t.length-a),h=parseInt(t.substring(a,a+c),n);if(c<8){var d=s(l(n,c));o=o.mul(d).add(s(h))}else o=(o=o.mul(i)).add(s(h))}return o.unsigned=e,o}function h(t,e){return"number"==typeof t?s(t,e):"string"==typeof t?u(t,e):c(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}n.fromString=u,n.fromValue=h;var d=4294967296,p=d*d,f=p/2,m=a(1<<24),g=a(0);n.ZERO=g;var y=a(0,!0);n.UZERO=y;var v=a(1);n.ONE=v;var b=a(1,!0);n.UONE=b;var x=a(-1);n.NEG_ONE=x;var _=c(-1,2147483647,!1);n.MAX_VALUE=_;var w=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=w;var S=c(0,-2147483648,!1);n.MIN_VALUE=S;var T=n.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},T.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var e=s(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=s(l(t,6),this.unsigned),o=this,a="";;){var c=o.div(i),u=(o.sub(c.mul(i)).toInt()>>>0).toString(t);if((o=c).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1==(1&this.low)},T.isEven=function(){return 0==(1&this.low)},T.equals=function(t){return r(t)||(t=h(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},T.eq=T.equals,T.notEquals=function(t){return!this.eq(t)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(t){return this.comp(t)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(t){return this.comp(t)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(t){return this.comp(t)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(t){return this.comp(t)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(t){if(r(t)||(t=h(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(v)},T.neg=T.negate,T.add=function(t){r(t)||(t=h(t));var e=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,a=t.high>>>16,s=65535&t.high,l=t.low>>>16,u=0,d=0,p=0,f=0;return p+=(f+=o+(65535&t.low))>>>16,d+=(p+=i+l)>>>16,u+=(d+=n+s)>>>16,u+=e+a,c((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},T.subtract=function(t){return r(t)||(t=h(t)),this.add(t.neg())},T.sub=T.subtract,T.multiply=function(t){if(this.isZero())return g;if(r(t)||(t=h(t)),e)return c(e.mul(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned);if(t.isZero())return g;if(this.eq(S))return t.isOdd()?S:g;if(t.eq(S))return this.isOdd()?S:g;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(m)&&t.lt(m))return s(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,a=65535&this.low,l=t.high>>>16,u=65535&t.high,d=t.low>>>16,p=65535&t.low,f=0,y=0,v=0,b=0;return v+=(b+=a*p)>>>16,y+=(v+=o*p)>>>16,v&=65535,y+=(v+=a*d)>>>16,f+=(y+=i*p)>>>16,y&=65535,f+=(y+=o*d)>>>16,y&=65535,f+=(y+=a*u)>>>16,f+=n*p+i*d+o*u+a*l,c((v&=65535)<<16|(b&=65535),(f&=65535)<<16|(y&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(t){if(r(t)||(t=h(t)),t.isZero())throw Error("division by zero");var n,i,o;if(e)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?c((this.unsigned?e.div_u:e.div_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return y;if(t.gt(this.shru(1)))return b;o=y}else{if(this.eq(S))return t.eq(v)||t.eq(x)?S:t.eq(S)?v:(n=this.shr(1).div(t).shl(1)).eq(g)?t.isNegative()?v:x:(i=this.sub(t.mul(n)),o=n.add(i.div(t)));if(t.eq(S))return this.unsigned?y:g;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=g}for(i=this;i.gte(t);){n=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),u=a<=48?1:l(2,a-48),d=s(n),p=d.mul(t);p.isNegative()||p.gt(i);)p=(d=s(n-=u,this.unsigned)).mul(t);d.isZero()&&(d=v),o=o.add(d),i=i.sub(p)}return o},T.div=T.divide,T.modulo=function(t){return r(t)||(t=h(t)),e?c((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return c(~this.low,~this.high,this.unsigned)},T.and=function(t){return r(t)||(t=h(t)),c(this.low&t.low,this.high&t.high,this.unsigned)},T.or=function(t){return r(t)||(t=h(t)),c(this.low|t.low,this.high|t.high,this.unsigned)},T.xor=function(t){return r(t)||(t=h(t)),c(this.low^t.low,this.high^t.high,this.unsigned)},T.shiftLeft=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?c(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):c(0,this.low<<t-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?c(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):c(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(t){if(r(t)&&(t=t.toInt()),0==(t&=63))return this;var e=this.high;return t<32?c(this.low>>>t|e<<32-t,e>>>t,this.unsigned):c(32===t?e:e>>>t-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},T.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},T.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},n.fromBytes=function(t,e,r){return r?n.fromBytesLE(t,e):n.fromBytesBE(t,e)},n.fromBytesLE=function(t,e){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},n.fromBytesBE=function(t,e){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},1446:(t,e,n)=>{"use strict";var r,i,o,a=n(2100),s=a.Reader,c=a.Writer,l=a.util,u=a.roots.default||(a.roots.default={});u.onnx=((o={}).Version=(r={},(i=Object.create(r))[r[0]="_START_VERSION"]=0,i[r[1]="IR_VERSION_2017_10_10"]=1,i[r[2]="IR_VERSION_2017_10_30"]=2,i[r[3]="IR_VERSION_2017_11_3"]=3,i[r[4]="IR_VERSION_2019_1_22"]=4,i[r[5]="IR_VERSION"]=5,i),o.AttributeProto=function(){function t(t){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.refAttrName="",t.prototype.docString="",t.prototype.type=0,t.prototype.f=0,t.prototype.i=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.s=l.newBuffer([]),t.prototype.t=null,t.prototype.g=null,t.prototype.floats=l.emptyArray,t.prototype.ints=l.emptyArray,t.prototype.strings=l.emptyArray,t.prototype.tensors=l.emptyArray,t.prototype.graphs=l.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=c.create()),null!=t.name&&t.hasOwnProperty("name")&&e.uint32(10).string(t.name),null!=t.f&&t.hasOwnProperty("f")&&e.uint32(21).float(t.f),null!=t.i&&t.hasOwnProperty("i")&&e.uint32(24).int64(t.i),null!=t.s&&t.hasOwnProperty("s")&&e.uint32(34).bytes(t.s),null!=t.t&&t.hasOwnProperty("t")&&u.onnx.TensorProto.encode(t.t,e.uint32(42).fork()).ldelim(),null!=t.g&&t.hasOwnProperty("g")&&u.onnx.GraphProto.encode(t.g,e.uint32(50).fork()).ldelim(),null!=t.floats&&t.floats.length){e.uint32(58).fork();for(var n=0;n<t.floats.length;++n)e.float(t.floats[n]);e.ldelim()}if(null!=t.ints&&t.ints.length){for(e.uint32(66).fork(),n=0;n<t.ints.length;++n)e.int64(t.ints[n]);e.ldelim()}if(null!=t.strings&&t.strings.length)for(n=0;n<t.strings.length;++n)e.uint32(74).bytes(t.strings[n]);if(null!=t.tensors&&t.tensors.length)for(n=0;n<t.tensors.length;++n)u.onnx.TensorProto.encode(t.tensors[n],e.uint32(82).fork()).ldelim();if(null!=t.graphs&&t.graphs.length)for(n=0;n<t.graphs.length;++n)u.onnx.GraphProto.encode(t.graphs[n],e.uint32(90).fork()).ldelim();return null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(106).string(t.docString),null!=t.type&&t.hasOwnProperty("type")&&e.uint32(160).int32(t.type),null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&e.uint32(170).string(t.refAttrName),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new u.onnx.AttributeProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.name=t.string();break;case 21:r.refAttrName=t.string();break;case 13:r.docString=t.string();break;case 20:r.type=t.int32();break;case 2:r.f=t.float();break;case 3:r.i=t.int64();break;case 4:r.s=t.bytes();break;case 5:r.t=u.onnx.TensorProto.decode(t,t.uint32());break;case 6:r.g=u.onnx.GraphProto.decode(t,t.uint32());break;case 7:if(r.floats&&r.floats.length||(r.floats=[]),2==(7&i))for(var o=t.uint32()+t.pos;t.pos<o;)r.floats.push(t.float());else r.floats.push(t.float());break;case 8:if(r.ints&&r.ints.length||(r.ints=[]),2==(7&i))for(o=t.uint32()+t.pos;t.pos<o;)r.ints.push(t.int64());else r.ints.push(t.int64());break;case 9:r.strings&&r.strings.length||(r.strings=[]),r.strings.push(t.bytes());break;case 10:r.tensors&&r.tensors.length||(r.tensors=[]),r.tensors.push(u.onnx.TensorProto.decode(t,t.uint32()));break;case 11:r.graphs&&r.graphs.length||(r.graphs=[]),r.graphs.push(u.onnx.GraphProto.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!l.isString(t.name))return"name: string expected";if(null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&!l.isString(t.refAttrName))return"refAttrName: string expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!l.isString(t.docString))return"docString: string expected";if(null!=t.type&&t.hasOwnProperty("type"))switch(t.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(null!=t.f&&t.hasOwnProperty("f")&&"number"!=typeof t.f)return"f: number expected";if(null!=t.i&&t.hasOwnProperty("i")&&!(l.isInteger(t.i)||t.i&&l.isInteger(t.i.low)&&l.isInteger(t.i.high)))return"i: integer|Long expected";if(null!=t.s&&t.hasOwnProperty("s")&&!(t.s&&"number"==typeof t.s.length||l.isString(t.s)))return"s: buffer expected";if(null!=t.t&&t.hasOwnProperty("t")&&(n=u.onnx.TensorProto.verify(t.t)))return"t."+n;if(null!=t.g&&t.hasOwnProperty("g")&&(n=u.onnx.GraphProto.verify(t.g)))return"g."+n;if(null!=t.floats&&t.hasOwnProperty("floats")){if(!Array.isArray(t.floats))return"floats: array expected";for(var e=0;e<t.floats.length;++e)if("number"!=typeof t.floats[e])return"floats: number[] expected"}if(null!=t.ints&&t.hasOwnProperty("ints")){if(!Array.isArray(t.ints))return"ints: array expected";for(e=0;e<t.ints.length;++e)if(!(l.isInteger(t.ints[e])||t.ints[e]&&l.isInteger(t.ints[e].low)&&l.isInteger(t.ints[e].high)))return"ints: integer|Long[] expected"}if(null!=t.strings&&t.hasOwnProperty("strings")){if(!Array.isArray(t.strings))return"strings: array expected";for(e=0;e<t.strings.length;++e)if(!(t.strings[e]&&"number"==typeof t.strings[e].length||l.isString(t.strings[e])))return"strings: buffer[] expected"}if(null!=t.tensors&&t.hasOwnProperty("tensors")){if(!Array.isArray(t.tensors))return"tensors: array expected";for(e=0;e<t.tensors.length;++e)if(n=u.onnx.TensorProto.verify(t.tensors[e]))return"tensors."+n}if(null!=t.graphs&&t.hasOwnProperty("graphs")){if(!Array.isArray(t.graphs))return"graphs: array expected";for(e=0;e<t.graphs.length;++e){var n;if(n=u.onnx.GraphProto.verify(t.graphs[e]))return"graphs."+n}}return null},t.fromObject=function(t){if(t instanceof u.onnx.AttributeProto)return t;var e=new u.onnx.AttributeProto;switch(null!=t.name&&(e.name=String(t.name)),null!=t.refAttrName&&(e.refAttrName=String(t.refAttrName)),null!=t.docString&&(e.docString=String(t.docString)),t.type){case"UNDEFINED":case 0:e.type=0;break;case"FLOAT":case 1:e.type=1;break;case"INT":case 2:e.type=2;break;case"STRING":case 3:e.type=3;break;case"TENSOR":case 4:e.type=4;break;case"GRAPH":case 5:e.type=5;break;case"FLOATS":case 6:e.type=6;break;case"INTS":case 7:e.type=7;break;case"STRINGS":case 8:e.type=8;break;case"TENSORS":case 9:e.type=9;break;case"GRAPHS":case 10:e.type=10}if(null!=t.f&&(e.f=Number(t.f)),null!=t.i&&(l.Long?(e.i=l.Long.fromValue(t.i)).unsigned=!1:"string"==typeof t.i?e.i=parseInt(t.i,10):"number"==typeof t.i?e.i=t.i:"object"==typeof t.i&&(e.i=new l.LongBits(t.i.low>>>0,t.i.high>>>0).toNumber())),null!=t.s&&("string"==typeof t.s?l.base64.decode(t.s,e.s=l.newBuffer(l.base64.length(t.s)),0):t.s.length&&(e.s=t.s)),null!=t.t){if("object"!=typeof t.t)throw TypeError(".onnx.AttributeProto.t: object expected");e.t=u.onnx.TensorProto.fromObject(t.t)}if(null!=t.g){if("object"!=typeof t.g)throw TypeError(".onnx.AttributeProto.g: object expected");e.g=u.onnx.GraphProto.fromObject(t.g)}if(t.floats){if(!Array.isArray(t.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");e.floats=[];for(var n=0;n<t.floats.length;++n)e.floats[n]=Number(t.floats[n])}if(t.ints){if(!Array.isArray(t.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(e.ints=[],n=0;n<t.ints.length;++n)l.Long?(e.ints[n]=l.Long.fromValue(t.ints[n])).unsigned=!1:"string"==typeof t.ints[n]?e.ints[n]=parseInt(t.ints[n],10):"number"==typeof t.ints[n]?e.ints[n]=t.ints[n]:"object"==typeof t.ints[n]&&(e.ints[n]=new l.LongBits(t.ints[n].low>>>0,t.ints[n].high>>>0).toNumber())}if(t.strings){if(!Array.isArray(t.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(e.strings=[],n=0;n<t.strings.length;++n)"string"==typeof t.strings[n]?l.base64.decode(t.strings[n],e.strings[n]=l.newBuffer(l.base64.length(t.strings[n])),0):t.strings[n].length&&(e.strings[n]=t.strings[n])}if(t.tensors){if(!Array.isArray(t.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(e.tensors=[],n=0;n<t.tensors.length;++n){if("object"!=typeof t.tensors[n])throw TypeError(".onnx.AttributeProto.tensors: object expected");e.tensors[n]=u.onnx.TensorProto.fromObject(t.tensors[n])}}if(t.graphs){if(!Array.isArray(t.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(e.graphs=[],n=0;n<t.graphs.length;++n){if("object"!=typeof t.graphs[n])throw TypeError(".onnx.AttributeProto.graphs: object expected");e.graphs[n]=u.onnx.GraphProto.fromObject(t.graphs[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.floats=[],n.ints=[],n.strings=[],n.tensors=[],n.graphs=[]),e.defaults){if(n.name="",n.f=0,l.Long){var r=new l.Long(0,0,!1);n.i=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.i=e.longs===String?"0":0;e.bytes===String?n.s="":(n.s=[],e.bytes!==Array&&(n.s=l.newBuffer(n.s))),n.t=null,n.g=null,n.docString="",n.type=e.enums===String?"UNDEFINED":0,n.refAttrName=""}if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.f&&t.hasOwnProperty("f")&&(n.f=e.json&&!isFinite(t.f)?String(t.f):t.f),null!=t.i&&t.hasOwnProperty("i")&&("number"==typeof t.i?n.i=e.longs===String?String(t.i):t.i:n.i=e.longs===String?l.Long.prototype.toString.call(t.i):e.longs===Number?new l.LongBits(t.i.low>>>0,t.i.high>>>0).toNumber():t.i),null!=t.s&&t.hasOwnProperty("s")&&(n.s=e.bytes===String?l.base64.encode(t.s,0,t.s.length):e.bytes===Array?Array.prototype.slice.call(t.s):t.s),null!=t.t&&t.hasOwnProperty("t")&&(n.t=u.onnx.TensorProto.toObject(t.t,e)),null!=t.g&&t.hasOwnProperty("g")&&(n.g=u.onnx.GraphProto.toObject(t.g,e)),t.floats&&t.floats.length){n.floats=[];for(var i=0;i<t.floats.length;++i)n.floats[i]=e.json&&!isFinite(t.floats[i])?String(t.floats[i]):t.floats[i]}if(t.ints&&t.ints.length)for(n.ints=[],i=0;i<t.ints.length;++i)"number"==typeof t.ints[i]?n.ints[i]=e.longs===String?String(t.ints[i]):t.ints[i]:n.ints[i]=e.longs===String?l.Long.prototype.toString.call(t.ints[i]):e.longs===Number?new l.LongBits(t.ints[i].low>>>0,t.ints[i].high>>>0).toNumber():t.ints[i];if(t.strings&&t.strings.length)for(n.strings=[],i=0;i<t.strings.length;++i)n.strings[i]=e.bytes===String?l.base64.encode(t.strings[i],0,t.strings[i].length):e.bytes===Array?Array.prototype.slice.call(t.strings[i]):t.strings[i];if(t.tensors&&t.tensors.length)for(n.tensors=[],i=0;i<t.tensors.length;++i)n.tensors[i]=u.onnx.TensorProto.toObject(t.tensors[i],e);if(t.graphs&&t.graphs.length)for(n.graphs=[],i=0;i<t.graphs.length;++i)n.graphs[i]=u.onnx.GraphProto.toObject(t.graphs[i],e);return null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.type&&t.hasOwnProperty("type")&&(n.type=e.enums===String?u.onnx.AttributeProto.AttributeType[t.type]:t.type),null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&(n.refAttrName=t.refAttrName),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t.AttributeType=function(){var t={},e=Object.create(t);return e[t[0]="UNDEFINED"]=0,e[t[1]="FLOAT"]=1,e[t[2]="INT"]=2,e[t[3]="STRING"]=3,e[t[4]="TENSOR"]=4,e[t[5]="GRAPH"]=5,e[t[6]="FLOATS"]=6,e[t[7]="INTS"]=7,e[t[8]="STRINGS"]=8,e[t[9]="TENSORS"]=9,e[t[10]="GRAPHS"]=10,e}(),t}(),o.ValueInfoProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.type=null,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=c.create()),null!=t.name&&t.hasOwnProperty("name")&&e.uint32(10).string(t.name),null!=t.type&&t.hasOwnProperty("type")&&u.onnx.TypeProto.encode(t.type,e.uint32(18).fork()).ldelim(),null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(26).string(t.docString),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new u.onnx.ValueInfoProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.name=t.string();break;case 2:r.type=u.onnx.TypeProto.decode(t,t.uint32());break;case 3:r.docString=t.string();break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!l.isString(t.name))return"name: string expected";if(null!=t.type&&t.hasOwnProperty("type")){var e=u.onnx.TypeProto.verify(t.type);if(e)return"type."+e}return null!=t.docString&&t.hasOwnProperty("docString")&&!l.isString(t.docString)?"docString: string expected":null},t.fromObject=function(t){if(t instanceof u.onnx.ValueInfoProto)return t;var e=new u.onnx.ValueInfoProto;if(null!=t.name&&(e.name=String(t.name)),null!=t.type){if("object"!=typeof t.type)throw TypeError(".onnx.ValueInfoProto.type: object expected");e.type=u.onnx.TypeProto.fromObject(t.type)}return null!=t.docString&&(e.docString=String(t.docString)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.name="",n.type=null,n.docString=""),null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.type&&t.hasOwnProperty("type")&&(n.type=u.onnx.TypeProto.toObject(t.type,e)),null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),o.NodeProto=function(){function t(t){if(this.input=[],this.output=[],this.attribute=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.input=l.emptyArray,t.prototype.output=l.emptyArray,t.prototype.name="",t.prototype.opType="",t.prototype.domain="",t.prototype.attribute=l.emptyArray,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=c.create()),null!=t.input&&t.input.length)for(var n=0;n<t.input.length;++n)e.uint32(10).string(t.input[n]);if(null!=t.output&&t.output.length)for(n=0;n<t.output.length;++n)e.uint32(18).string(t.output[n]);if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(26).string(t.name),null!=t.opType&&t.hasOwnProperty("opType")&&e.uint32(34).string(t.opType),null!=t.attribute&&t.attribute.length)for(n=0;n<t.attribute.length;++n)u.onnx.AttributeProto.encode(t.attribute[n],e.uint32(42).fork()).ldelim();return null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(50).string(t.docString),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(58).string(t.domain),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new u.onnx.NodeProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.input&&r.input.length||(r.input=[]),r.input.push(t.string());break;case 2:r.output&&r.output.length||(r.output=[]),r.output.push(t.string());break;case 3:r.name=t.string();break;case 4:r.opType=t.string();break;case 7:r.domain=t.string();break;case 5:r.attribute&&r.attribute.length||(r.attribute=[]),r.attribute.push(u.onnx.AttributeProto.decode(t,t.uint32()));break;case 6:r.docString=t.string();break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(var e=0;e<t.input.length;++e)if(!l.isString(t.input[e]))return"input: string[] expected"}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(e=0;e<t.output.length;++e)if(!l.isString(t.output[e]))return"output: string[] expected"}if(null!=t.name&&t.hasOwnProperty("name")&&!l.isString(t.name))return"name: string expected";if(null!=t.opType&&t.hasOwnProperty("opType")&&!l.isString(t.opType))return"opType: string expected";if(null!=t.domain&&t.hasOwnProperty("domain")&&!l.isString(t.domain))return"domain: string expected";if(null!=t.attribute&&t.hasOwnProperty("attribute")){if(!Array.isArray(t.attribute))return"attribute: array expected";for(e=0;e<t.attribute.length;++e){var n=u.onnx.AttributeProto.verify(t.attribute[e]);if(n)return"attribute."+n}}return null!=t.docString&&t.hasOwnProperty("docString")&&!l.isString(t.docString)?"docString: string expected":null},t.fromObject=function(t){if(t instanceof u.onnx.NodeProto)return t;var e=new u.onnx.NodeProto;if(t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.NodeProto.input: array expected");e.input=[];for(var n=0;n<t.input.length;++n)e.input[n]=String(t.input[n])}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.NodeProto.output: array expected");for(e.output=[],n=0;n<t.output.length;++n)e.output[n]=String(t.output[n])}if(null!=t.name&&(e.name=String(t.name)),null!=t.opType&&(e.opType=String(t.opType)),null!=t.domain&&(e.domain=String(t.domain)),t.attribute){if(!Array.isArray(t.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(e.attribute=[],n=0;n<t.attribute.length;++n){if("object"!=typeof t.attribute[n])throw TypeError(".onnx.NodeProto.attribute: object expected");e.attribute[n]=u.onnx.AttributeProto.fromObject(t.attribute[n])}}return null!=t.docString&&(e.docString=String(t.docString)),e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.input=[],n.output=[],n.attribute=[]),e.defaults&&(n.name="",n.opType="",n.docString="",n.domain=""),t.input&&t.input.length){n.input=[];for(var r=0;r<t.input.length;++r)n.input[r]=t.input[r]}if(t.output&&t.output.length)for(n.output=[],r=0;r<t.output.length;++r)n.output[r]=t.output[r];if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.opType&&t.hasOwnProperty("opType")&&(n.opType=t.opType),t.attribute&&t.attribute.length)for(n.attribute=[],r=0;r<t.attribute.length;++r)n.attribute[r]=u.onnx.AttributeProto.toObject(t.attribute[r],e);return null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),o.ModelProto=function(){function t(t){if(this.opsetImport=[],this.metadataProps=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.irVersion=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.opsetImport=l.emptyArray,t.prototype.producerName="",t.prototype.producerVersion="",t.prototype.domain="",t.prototype.modelVersion=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.docString="",t.prototype.graph=null,t.prototype.metadataProps=l.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=c.create()),null!=t.irVersion&&t.hasOwnProperty("irVersion")&&e.uint32(8).int64(t.irVersion),null!=t.producerName&&t.hasOwnProperty("producerName")&&e.uint32(18).string(t.producerName),null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&e.uint32(26).string(t.producerVersion),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(34).string(t.domain),null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&e.uint32(40).int64(t.modelVersion),null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(50).string(t.docString),null!=t.graph&&t.hasOwnProperty("graph")&&u.onnx.GraphProto.encode(t.graph,e.uint32(58).fork()).ldelim(),null!=t.opsetImport&&t.opsetImport.length)for(var n=0;n<t.opsetImport.length;++n)u.onnx.OperatorSetIdProto.encode(t.opsetImport[n],e.uint32(66).fork()).ldelim();if(null!=t.metadataProps&&t.metadataProps.length)for(n=0;n<t.metadataProps.length;++n)u.onnx.StringStringEntryProto.encode(t.metadataProps[n],e.uint32(114).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new u.onnx.ModelProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.irVersion=t.int64();break;case 8:r.opsetImport&&r.opsetImport.length||(r.opsetImport=[]),r.opsetImport.push(u.onnx.OperatorSetIdProto.decode(t,t.uint32()));break;case 2:r.producerName=t.string();break;case 3:r.producerVersion=t.string();break;case 4:r.domain=t.string();break;case 5:r.modelVersion=t.int64();break;case 6:r.docString=t.string();break;case 7:r.graph=u.onnx.GraphProto.decode(t,t.uint32());break;case 14:r.metadataProps&&r.metadataProps.length||(r.metadataProps=[]),r.metadataProps.push(u.onnx.StringStringEntryProto.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.irVersion&&t.hasOwnProperty("irVersion")&&!(l.isInteger(t.irVersion)||t.irVersion&&l.isInteger(t.irVersion.low)&&l.isInteger(t.irVersion.high)))return"irVersion: integer|Long expected";if(null!=t.opsetImport&&t.hasOwnProperty("opsetImport")){if(!Array.isArray(t.opsetImport))return"opsetImport: array expected";for(var e=0;e<t.opsetImport.length;++e)if(n=u.onnx.OperatorSetIdProto.verify(t.opsetImport[e]))return"opsetImport."+n}if(null!=t.producerName&&t.hasOwnProperty("producerName")&&!l.isString(t.producerName))return"producerName: string expected";if(null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&!l.isString(t.producerVersion))return"producerVersion: string expected";if(null!=t.domain&&t.hasOwnProperty("domain")&&!l.isString(t.domain))return"domain: string expected";if(null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&!(l.isInteger(t.modelVersion)||t.modelVersion&&l.isInteger(t.modelVersion.low)&&l.isInteger(t.modelVersion.high)))return"modelVersion: integer|Long expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!l.isString(t.docString))return"docString: string expected";if(null!=t.graph&&t.hasOwnProperty("graph")&&(n=u.onnx.GraphProto.verify(t.graph)))return"graph."+n;if(null!=t.metadataProps&&t.hasOwnProperty("metadataProps")){if(!Array.isArray(t.metadataProps))return"metadataProps: array expected";for(e=0;e<t.metadataProps.length;++e){var n;if(n=u.onnx.StringStringEntryProto.verify(t.metadataProps[e]))return"metadataProps."+n}}return null},t.fromObject=function(t){if(t instanceof u.onnx.ModelProto)return t;var e=new u.onnx.ModelProto;if(null!=t.irVersion&&(l.Long?(e.irVersion=l.Long.fromValue(t.irVersion)).unsigned=!1:"string"==typeof t.irVersion?e.irVersion=parseInt(t.irVersion,10):"number"==typeof t.irVersion?e.irVersion=t.irVersion:"object"==typeof t.irVersion&&(e.irVersion=new l.LongBits(t.irVersion.low>>>0,t.irVersion.high>>>0).toNumber())),t.opsetImport){if(!Array.isArray(t.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");e.opsetImport=[];for(var n=0;n<t.opsetImport.length;++n){if("object"!=typeof t.opsetImport[n])throw TypeError(".onnx.ModelProto.opsetImport: object expected");e.opsetImport[n]=u.onnx.OperatorSetIdProto.fromObject(t.opsetImport[n])}}if(null!=t.producerName&&(e.producerName=String(t.producerName)),null!=t.producerVersion&&(e.producerVersion=String(t.producerVersion)),null!=t.domain&&(e.domain=String(t.domain)),null!=t.modelVersion&&(l.Long?(e.modelVersion=l.Long.fromValue(t.modelVersion)).unsigned=!1:"string"==typeof t.modelVersion?e.modelVersion=parseInt(t.modelVersion,10):"number"==typeof t.modelVersion?e.modelVersion=t.modelVersion:"object"==typeof t.modelVersion&&(e.modelVersion=new l.LongBits(t.modelVersion.low>>>0,t.modelVersion.high>>>0).toNumber())),null!=t.docString&&(e.docString=String(t.docString)),null!=t.graph){if("object"!=typeof t.graph)throw TypeError(".onnx.ModelProto.graph: object expected");e.graph=u.onnx.GraphProto.fromObject(t.graph)}if(t.metadataProps){if(!Array.isArray(t.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(e.metadataProps=[],n=0;n<t.metadataProps.length;++n){if("object"!=typeof t.metadataProps[n])throw TypeError(".onnx.ModelProto.metadataProps: object expected");e.metadataProps[n]=u.onnx.StringStringEntryProto.fromObject(t.metadataProps[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.opsetImport=[],n.metadataProps=[]),e.defaults){if(l.Long){var r=new l.Long(0,0,!1);n.irVersion=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.irVersion=e.longs===String?"0":0;n.producerName="",n.producerVersion="",n.domain="",l.Long?(r=new l.Long(0,0,!1),n.modelVersion=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):n.modelVersion=e.longs===String?"0":0,n.docString="",n.graph=null}if(null!=t.irVersion&&t.hasOwnProperty("irVersion")&&("number"==typeof t.irVersion?n.irVersion=e.longs===String?String(t.irVersion):t.irVersion:n.irVersion=e.longs===String?l.Long.prototype.toString.call(t.irVersion):e.longs===Number?new l.LongBits(t.irVersion.low>>>0,t.irVersion.high>>>0).toNumber():t.irVersion),null!=t.producerName&&t.hasOwnProperty("producerName")&&(n.producerName=t.producerName),null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&(n.producerVersion=t.producerVersion),null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&("number"==typeof t.modelVersion?n.modelVersion=e.longs===String?String(t.modelVersion):t.modelVersion:n.modelVersion=e.longs===String?l.Long.prototype.toString.call(t.modelVersion):e.longs===Number?new l.LongBits(t.modelVersion.low>>>0,t.modelVersion.high>>>0).toNumber():t.modelVersion),null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.graph&&t.hasOwnProperty("graph")&&(n.graph=u.onnx.GraphProto.toObject(t.graph,e)),t.opsetImport&&t.opsetImport.length){n.opsetImport=[];for(var i=0;i<t.opsetImport.length;++i)n.opsetImport[i]=u.onnx.OperatorSetIdProto.toObject(t.opsetImport[i],e)}if(t.metadataProps&&t.metadataProps.length)for(n.metadataProps=[],i=0;i<t.metadataProps.length;++i)n.metadataProps[i]=u.onnx.StringStringEntryProto.toObject(t.metadataProps[i],e);return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),o.StringStringEntryProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.key="",t.prototype.value="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=c.create()),null!=t.key&&t.hasOwnProperty("key")&&e.uint32(10).string(t.key),null!=t.value&&t.hasOwnProperty("value")&&e.uint32(18).string(t.value),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new u.onnx.StringStringEntryProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.key=t.string();break;case 2:r.value=t.string();break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.key&&t.hasOwnProperty("key")&&!l.isString(t.key)?"key: string expected":null!=t.value&&t.hasOwnProperty("value")&&!l.isString(t.value)?"value: string expected":null},t.fromObject=function(t){if(t instanceof u.onnx.StringStringEntryProto)return t;var e=new u.onnx.StringStringEntryProto;return null!=t.key&&(e.key=String(t.key)),null!=t.value&&(e.value=String(t.value)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.key="",n.value=""),null!=t.key&&t.hasOwnProperty("key")&&(n.key=t.key),null!=t.value&&t.hasOwnProperty("value")&&(n.value=t.value),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),o.TensorAnnotation=function(){function t(t){if(this.quantParameterTensorNames=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.tensorName="",t.prototype.quantParameterTensorNames=l.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=c.create()),null!=t.tensorName&&t.hasOwnProperty("tensorName")&&e.uint32(10).string(t.tensorName),null!=t.quantParameterTensorNames&&t.quantParameterTensorNames.length)for(var n=0;n<t.quantParameterTensorNames.length;++n)u.onnx.StringStringEntryProto.encode(t.quantParameterTensorNames[n],e.uint32(18).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new u.onnx.TensorAnnotation;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.tensorName=t.string();break;case 2:r.quantParameterTensorNames&&r.quantParameterTensorNames.length||(r.quantParameterTensorNames=[]),r.quantParameterTensorNames.push(u.onnx.StringStringEntryProto.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.tensorName&&t.hasOwnProperty("tensorName")&&!l.isString(t.tensorName))return"tensorName: string expected";if(null!=t.quantParameterTensorNames&&t.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(t.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var e=0;e<t.quantParameterTensorNames.length;++e){var n=u.onnx.StringStringEntryProto.verify(t.quantParameterTensorNames[e]);if(n)return"quantParameterTensorNames."+n}}return null},t.fromObject=function(t){if(t instanceof u.onnx.TensorAnnotation)return t;var e=new u.onnx.TensorAnnotation;if(null!=t.tensorName&&(e.tensorName=String(t.tensorName)),t.quantParameterTensorNames){if(!Array.isArray(t.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");e.quantParameterTensorNames=[];for(var n=0;n<t.quantParameterTensorNames.length;++n){if("object"!=typeof t.quantParameterTensorNames[n])throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");e.quantParameterTensorNames[n]=u.onnx.StringStringEntryProto.fromObject(t.quantParameterTensorNames[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.quantParameterTensorNames=[]),e.defaults&&(n.tensorName=""),null!=t.tensorName&&t.hasOwnProperty("tensorName")&&(n.tensorName=t.tensorName),t.quantParameterTensorNames&&t.quantParameterTensorNames.length){n.quantParameterTensorNames=[];for(var r=0;r<t.quantParameterTensorNames.length;++r)n.quantParameterTensorNames[r]=u.onnx.StringStringEntryProto.toObject(t.quantParameterTensorNames[r],e)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),o.GraphProto=function(){function t(t){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.node=l.emptyArray,t.prototype.name="",t.prototype.initializer=l.emptyArray,t.prototype.docString="",t.prototype.input=l.emptyArray,t.prototype.output=l.emptyArray,t.prototype.valueInfo=l.emptyArray,t.prototype.quantizationAnnotation=l.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=c.create()),null!=t.node&&t.node.length)for(var n=0;n<t.node.length;++n)u.onnx.NodeProto.encode(t.node[n],e.uint32(10).fork()).ldelim();if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(18).string(t.name),null!=t.initializer&&t.initializer.length)for(n=0;n<t.initializer.length;++n)u.onnx.TensorProto.encode(t.initializer[n],e.uint32(42).fork()).ldelim();if(null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(82).string(t.docString),null!=t.input&&t.input.length)for(n=0;n<t.input.length;++n)u.onnx.ValueInfoProto.encode(t.input[n],e.uint32(90).fork()).ldelim();if(null!=t.output&&t.output.length)for(n=0;n<t.output.length;++n)u.onnx.ValueInfoProto.encode(t.output[n],e.uint32(98).fork()).ldelim();if(null!=t.valueInfo&&t.valueInfo.length)for(n=0;n<t.valueInfo.length;++n)u.onnx.ValueInfoProto.encode(t.valueInfo[n],e.uint32(106).fork()).ldelim();if(null!=t.quantizationAnnotation&&t.quantizationAnnotation.length)for(n=0;n<t.quantizationAnnotation.length;++n)u.onnx.TensorAnnotation.encode(t.quantizationAnnotation[n],e.uint32(114).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new u.onnx.GraphProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.node&&r.node.length||(r.node=[]),r.node.push(u.onnx.NodeProto.decode(t,t.uint32()));break;case 2:r.name=t.string();break;case 5:r.initializer&&r.initializer.length||(r.initializer=[]),r.initializer.push(u.onnx.TensorProto.decode(t,t.uint32()));break;case 10:r.docString=t.string();break;case 11:r.input&&r.input.length||(r.input=[]),r.input.push(u.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 12:r.output&&r.output.length||(r.output=[]),r.output.push(u.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 13:r.valueInfo&&r.valueInfo.length||(r.valueInfo=[]),r.valueInfo.push(u.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 14:r.quantizationAnnotation&&r.quantizationAnnotation.length||(r.quantizationAnnotation=[]),r.quantizationAnnotation.push(u.onnx.TensorAnnotation.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.node&&t.hasOwnProperty("node")){if(!Array.isArray(t.node))return"node: array expected";for(var e=0;e<t.node.length;++e)if(n=u.onnx.NodeProto.verify(t.node[e]))return"node."+n}if(null!=t.name&&t.hasOwnProperty("name")&&!l.isString(t.name))return"name: string expected";if(null!=t.initializer&&t.hasOwnProperty("initializer")){if(!Array.isArray(t.initializer))return"initializer: array expected";for(e=0;e<t.initializer.length;++e)if(n=u.onnx.TensorProto.verify(t.initializer[e]))return"initializer."+n}if(null!=t.docString&&t.hasOwnProperty("docString")&&!l.isString(t.docString))return"docString: string expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(e=0;e<t.input.length;++e)if(n=u.onnx.ValueInfoProto.verify(t.input[e]))return"input."+n}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(e=0;e<t.output.length;++e)if(n=u.onnx.ValueInfoProto.verify(t.output[e]))return"output."+n}if(null!=t.valueInfo&&t.hasOwnProperty("valueInfo")){if(!Array.isArray(t.valueInfo))return"valueInfo: array expected";for(e=0;e<t.valueInfo.length;++e)if(n=u.onnx.ValueInfoProto.verify(t.valueInfo[e]))return"valueInfo."+n}if(null!=t.quantizationAnnotation&&t.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(t.quantizationAnnotation))return"quantizationAnnotation: array expected";for(e=0;e<t.quantizationAnnotation.length;++e){var n;if(n=u.onnx.TensorAnnotation.verify(t.quantizationAnnotation[e]))return"quantizationAnnotation."+n}}return null},t.fromObject=function(t){if(t instanceof u.onnx.GraphProto)return t;var e=new u.onnx.GraphProto;if(t.node){if(!Array.isArray(t.node))throw TypeError(".onnx.GraphProto.node: array expected");e.node=[];for(var n=0;n<t.node.length;++n){if("object"!=typeof t.node[n])throw TypeError(".onnx.GraphProto.node: object expected");e.node[n]=u.onnx.NodeProto.fromObject(t.node[n])}}if(null!=t.name&&(e.name=String(t.name)),t.initializer){if(!Array.isArray(t.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(e.initializer=[],n=0;n<t.initializer.length;++n){if("object"!=typeof t.initializer[n])throw TypeError(".onnx.GraphProto.initializer: object expected");e.initializer[n]=u.onnx.TensorProto.fromObject(t.initializer[n])}}if(null!=t.docString&&(e.docString=String(t.docString)),t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.GraphProto.input: array expected");for(e.input=[],n=0;n<t.input.length;++n){if("object"!=typeof t.input[n])throw TypeError(".onnx.GraphProto.input: object expected");e.input[n]=u.onnx.ValueInfoProto.fromObject(t.input[n])}}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.GraphProto.output: array expected");for(e.output=[],n=0;n<t.output.length;++n){if("object"!=typeof t.output[n])throw TypeError(".onnx.GraphProto.output: object expected");e.output[n]=u.onnx.ValueInfoProto.fromObject(t.output[n])}}if(t.valueInfo){if(!Array.isArray(t.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(e.valueInfo=[],n=0;n<t.valueInfo.length;++n){if("object"!=typeof t.valueInfo[n])throw TypeError(".onnx.GraphProto.valueInfo: object expected");e.valueInfo[n]=u.onnx.ValueInfoProto.fromObject(t.valueInfo[n])}}if(t.quantizationAnnotation){if(!Array.isArray(t.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(e.quantizationAnnotation=[],n=0;n<t.quantizationAnnotation.length;++n){if("object"!=typeof t.quantizationAnnotation[n])throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");e.quantizationAnnotation[n]=u.onnx.TensorAnnotation.fromObject(t.quantizationAnnotation[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.node=[],n.initializer=[],n.input=[],n.output=[],n.valueInfo=[],n.quantizationAnnotation=[]),e.defaults&&(n.name="",n.docString=""),t.node&&t.node.length){n.node=[];for(var r=0;r<t.node.length;++r)n.node[r]=u.onnx.NodeProto.toObject(t.node[r],e)}if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),t.initializer&&t.initializer.length)for(n.initializer=[],r=0;r<t.initializer.length;++r)n.initializer[r]=u.onnx.TensorProto.toObject(t.initializer[r],e);if(null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),t.input&&t.input.length)for(n.input=[],r=0;r<t.input.length;++r)n.input[r]=u.onnx.ValueInfoProto.toObject(t.input[r],e);if(t.output&&t.output.length)for(n.output=[],r=0;r<t.output.length;++r)n.output[r]=u.onnx.ValueInfoProto.toObject(t.output[r],e);if(t.valueInfo&&t.valueInfo.length)for(n.valueInfo=[],r=0;r<t.valueInfo.length;++r)n.valueInfo[r]=u.onnx.ValueInfoProto.toObject(t.valueInfo[r],e);if(t.quantizationAnnotation&&t.quantizationAnnotation.length)for(n.quantizationAnnotation=[],r=0;r<t.quantizationAnnotation.length;++r)n.quantizationAnnotation[r]=u.onnx.TensorAnnotation.toObject(t.quantizationAnnotation[r],e);return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),o.TensorProto=function(){function t(t){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dims=l.emptyArray,t.prototype.dataType=0,t.prototype.segment=null,t.prototype.floatData=l.emptyArray,t.prototype.int32Data=l.emptyArray,t.prototype.stringData=l.emptyArray,t.prototype.int64Data=l.emptyArray,t.prototype.name="",t.prototype.docString="",t.prototype.rawData=l.newBuffer([]),t.prototype.externalData=l.emptyArray,t.prototype.dataLocation=0,t.prototype.doubleData=l.emptyArray,t.prototype.uint64Data=l.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=c.create()),null!=t.dims&&t.dims.length){e.uint32(10).fork();for(var n=0;n<t.dims.length;++n)e.int64(t.dims[n]);e.ldelim()}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&e.uint32(16).int32(t.dataType),null!=t.segment&&t.hasOwnProperty("segment")&&u.onnx.TensorProto.Segment.encode(t.segment,e.uint32(26).fork()).ldelim(),null!=t.floatData&&t.floatData.length){for(e.uint32(34).fork(),n=0;n<t.floatData.length;++n)e.float(t.floatData[n]);e.ldelim()}if(null!=t.int32Data&&t.int32Data.length){for(e.uint32(42).fork(),n=0;n<t.int32Data.length;++n)e.int32(t.int32Data[n]);e.ldelim()}if(null!=t.stringData&&t.stringData.length)for(n=0;n<t.stringData.length;++n)e.uint32(50).bytes(t.stringData[n]);if(null!=t.int64Data&&t.int64Data.length){for(e.uint32(58).fork(),n=0;n<t.int64Data.length;++n)e.int64(t.int64Data[n]);e.ldelim()}if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(66).string(t.name),null!=t.rawData&&t.hasOwnProperty("rawData")&&e.uint32(74).bytes(t.rawData),null!=t.doubleData&&t.doubleData.length){for(e.uint32(82).fork(),n=0;n<t.doubleData.length;++n)e.double(t.doubleData[n]);e.ldelim()}if(null!=t.uint64Data&&t.uint64Data.length){for(e.uint32(90).fork(),n=0;n<t.uint64Data.length;++n)e.uint64(t.uint64Data[n]);e.ldelim()}if(null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(98).string(t.docString),null!=t.externalData&&t.externalData.length)for(n=0;n<t.externalData.length;++n)u.onnx.StringStringEntryProto.encode(t.externalData[n],e.uint32(106).fork()).ldelim();return null!=t.dataLocation&&t.hasOwnProperty("dataLocation")&&e.uint32(112).int32(t.dataLocation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new u.onnx.TensorProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:if(r.dims&&r.dims.length||(r.dims=[]),2==(7&i))for(var o=t.uint32()+t.pos;t.pos<o;)r.dims.push(t.int64());else r.dims.push(t.int64());break;case 2:r.dataType=t.int32();break;case 3:r.segment=u.onnx.TensorProto.Segment.decode(t,t.uint32());break;case 4:if(r.floatData&&r.floatData.length||(r.floatData=[]),2==(7&i))for(o=t.uint32()+t.pos;t.pos<o;)r.floatData.push(t.float());else r.floatData.push(t.float());break;case 5:if(r.int32Data&&r.int32Data.length||(r.int32Data=[]),2==(7&i))for(o=t.uint32()+t.pos;t.pos<o;)r.int32Data.push(t.int32());else r.int32Data.push(t.int32());break;case 6:r.stringData&&r.stringData.length||(r.stringData=[]),r.stringData.push(t.bytes());break;case 7:if(r.int64Data&&r.int64Data.length||(r.int64Data=[]),2==(7&i))for(o=t.uint32()+t.pos;t.pos<o;)r.int64Data.push(t.int64());else r.int64Data.push(t.int64());break;case 8:r.name=t.string();break;case 12:r.docString=t.string();break;case 9:r.rawData=t.bytes();break;case 13:r.externalData&&r.externalData.length||(r.externalData=[]),r.externalData.push(u.onnx.StringStringEntryProto.decode(t,t.uint32()));break;case 14:r.dataLocation=t.int32();break;case 10:if(r.doubleData&&r.doubleData.length||(r.doubleData=[]),2==(7&i))for(o=t.uint32()+t.pos;t.pos<o;)r.doubleData.push(t.double());else r.doubleData.push(t.double());break;case 11:if(r.uint64Data&&r.uint64Data.length||(r.uint64Data=[]),2==(7&i))for(o=t.uint32()+t.pos;t.pos<o;)r.uint64Data.push(t.uint64());else r.uint64Data.push(t.uint64());break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.dims&&t.hasOwnProperty("dims")){if(!Array.isArray(t.dims))return"dims: array expected";for(var e=0;e<t.dims.length;++e)if(!(l.isInteger(t.dims[e])||t.dims[e]&&l.isInteger(t.dims[e].low)&&l.isInteger(t.dims[e].high)))return"dims: integer|Long[] expected"}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&!l.isInteger(t.dataType))return"dataType: integer expected";if(null!=t.segment&&t.hasOwnProperty("segment")&&(n=u.onnx.TensorProto.Segment.verify(t.segment)))return"segment."+n;if(null!=t.floatData&&t.hasOwnProperty("floatData")){if(!Array.isArray(t.floatData))return"floatData: array expected";for(e=0;e<t.floatData.length;++e)if("number"!=typeof t.floatData[e])return"floatData: number[] expected"}if(null!=t.int32Data&&t.hasOwnProperty("int32Data")){if(!Array.isArray(t.int32Data))return"int32Data: array expected";for(e=0;e<t.int32Data.length;++e)if(!l.isInteger(t.int32Data[e]))return"int32Data: integer[] expected"}if(null!=t.stringData&&t.hasOwnProperty("stringData")){if(!Array.isArray(t.stringData))return"stringData: array expected";for(e=0;e<t.stringData.length;++e)if(!(t.stringData[e]&&"number"==typeof t.stringData[e].length||l.isString(t.stringData[e])))return"stringData: buffer[] expected"}if(null!=t.int64Data&&t.hasOwnProperty("int64Data")){if(!Array.isArray(t.int64Data))return"int64Data: array expected";for(e=0;e<t.int64Data.length;++e)if(!(l.isInteger(t.int64Data[e])||t.int64Data[e]&&l.isInteger(t.int64Data[e].low)&&l.isInteger(t.int64Data[e].high)))return"int64Data: integer|Long[] expected"}if(null!=t.name&&t.hasOwnProperty("name")&&!l.isString(t.name))return"name: string expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!l.isString(t.docString))return"docString: string expected";if(null!=t.rawData&&t.hasOwnProperty("rawData")&&!(t.rawData&&"number"==typeof t.rawData.length||l.isString(t.rawData)))return"rawData: buffer expected";if(null!=t.externalData&&t.hasOwnProperty("externalData")){if(!Array.isArray(t.externalData))return"externalData: array expected";for(e=0;e<t.externalData.length;++e){var n;if(n=u.onnx.StringStringEntryProto.verify(t.externalData[e]))return"externalData."+n}}if(null!=t.dataLocation&&t.hasOwnProperty("dataLocation"))switch(t.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(null!=t.doubleData&&t.hasOwnProperty("doubleData")){if(!Array.isArray(t.doubleData))return"doubleData: array expected";for(e=0;e<t.doubleData.length;++e)if("number"!=typeof t.doubleData[e])return"doubleData: number[] expected"}if(null!=t.uint64Data&&t.hasOwnProperty("uint64Data")){if(!Array.isArray(t.uint64Data))return"uint64Data: array expected";for(e=0;e<t.uint64Data.length;++e)if(!(l.isInteger(t.uint64Data[e])||t.uint64Data[e]&&l.isInteger(t.uint64Data[e].low)&&l.isInteger(t.uint64Data[e].high)))return"uint64Data: integer|Long[] expected"}return null},t.fromObject=function(t){if(t instanceof u.onnx.TensorProto)return t;var e=new u.onnx.TensorProto;if(t.dims){if(!Array.isArray(t.dims))throw TypeError(".onnx.TensorProto.dims: array expected");e.dims=[];for(var n=0;n<t.dims.length;++n)l.Long?(e.dims[n]=l.Long.fromValue(t.dims[n])).unsigned=!1:"string"==typeof t.dims[n]?e.dims[n]=parseInt(t.dims[n],10):"number"==typeof t.dims[n]?e.dims[n]=t.dims[n]:"object"==typeof t.dims[n]&&(e.dims[n]=new l.LongBits(t.dims[n].low>>>0,t.dims[n].high>>>0).toNumber())}if(null!=t.dataType&&(e.dataType=0|t.dataType),null!=t.segment){if("object"!=typeof t.segment)throw TypeError(".onnx.TensorProto.segment: object expected");e.segment=u.onnx.TensorProto.Segment.fromObject(t.segment)}if(t.floatData){if(!Array.isArray(t.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(e.floatData=[],n=0;n<t.floatData.length;++n)e.floatData[n]=Number(t.floatData[n])}if(t.int32Data){if(!Array.isArray(t.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(e.int32Data=[],n=0;n<t.int32Data.length;++n)e.int32Data[n]=0|t.int32Data[n]}if(t.stringData){if(!Array.isArray(t.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(e.stringData=[],n=0;n<t.stringData.length;++n)"string"==typeof t.stringData[n]?l.base64.decode(t.stringData[n],e.stringData[n]=l.newBuffer(l.base64.length(t.stringData[n])),0):t.stringData[n].length&&(e.stringData[n]=t.stringData[n])}if(t.int64Data){if(!Array.isArray(t.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(e.int64Data=[],n=0;n<t.int64Data.length;++n)l.Long?(e.int64Data[n]=l.Long.fromValue(t.int64Data[n])).unsigned=!1:"string"==typeof t.int64Data[n]?e.int64Data[n]=parseInt(t.int64Data[n],10):"number"==typeof t.int64Data[n]?e.int64Data[n]=t.int64Data[n]:"object"==typeof t.int64Data[n]&&(e.int64Data[n]=new l.LongBits(t.int64Data[n].low>>>0,t.int64Data[n].high>>>0).toNumber())}if(null!=t.name&&(e.name=String(t.name)),null!=t.docString&&(e.docString=String(t.docString)),null!=t.rawData&&("string"==typeof t.rawData?l.base64.decode(t.rawData,e.rawData=l.newBuffer(l.base64.length(t.rawData)),0):t.rawData.length&&(e.rawData=t.rawData)),t.externalData){if(!Array.isArray(t.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(e.externalData=[],n=0;n<t.externalData.length;++n){if("object"!=typeof t.externalData[n])throw TypeError(".onnx.TensorProto.externalData: object expected");e.externalData[n]=u.onnx.StringStringEntryProto.fromObject(t.externalData[n])}}switch(t.dataLocation){case"DEFAULT":case 0:e.dataLocation=0;break;case"EXTERNAL":case 1:e.dataLocation=1}if(t.doubleData){if(!Array.isArray(t.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(e.doubleData=[],n=0;n<t.doubleData.length;++n)e.doubleData[n]=Number(t.doubleData[n])}if(t.uint64Data){if(!Array.isArray(t.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(e.uint64Data=[],n=0;n<t.uint64Data.length;++n)l.Long?(e.uint64Data[n]=l.Long.fromValue(t.uint64Data[n])).unsigned=!0:"string"==typeof t.uint64Data[n]?e.uint64Data[n]=parseInt(t.uint64Data[n],10):"number"==typeof t.uint64Data[n]?e.uint64Data[n]=t.uint64Data[n]:"object"==typeof t.uint64Data[n]&&(e.uint64Data[n]=new l.LongBits(t.uint64Data[n].low>>>0,t.uint64Data[n].high>>>0).toNumber(!0))}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.dims=[],n.floatData=[],n.int32Data=[],n.stringData=[],n.int64Data=[],n.doubleData=[],n.uint64Data=[],n.externalData=[]),e.defaults&&(n.dataType=0,n.segment=null,n.name="",e.bytes===String?n.rawData="":(n.rawData=[],e.bytes!==Array&&(n.rawData=l.newBuffer(n.rawData))),n.docString="",n.dataLocation=e.enums===String?"DEFAULT":0),t.dims&&t.dims.length){n.dims=[];for(var r=0;r<t.dims.length;++r)"number"==typeof t.dims[r]?n.dims[r]=e.longs===String?String(t.dims[r]):t.dims[r]:n.dims[r]=e.longs===String?l.Long.prototype.toString.call(t.dims[r]):e.longs===Number?new l.LongBits(t.dims[r].low>>>0,t.dims[r].high>>>0).toNumber():t.dims[r]}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&(n.dataType=t.dataType),null!=t.segment&&t.hasOwnProperty("segment")&&(n.segment=u.onnx.TensorProto.Segment.toObject(t.segment,e)),t.floatData&&t.floatData.length)for(n.floatData=[],r=0;r<t.floatData.length;++r)n.floatData[r]=e.json&&!isFinite(t.floatData[r])?String(t.floatData[r]):t.floatData[r];if(t.int32Data&&t.int32Data.length)for(n.int32Data=[],r=0;r<t.int32Data.length;++r)n.int32Data[r]=t.int32Data[r];if(t.stringData&&t.stringData.length)for(n.stringData=[],r=0;r<t.stringData.length;++r)n.stringData[r]=e.bytes===String?l.base64.encode(t.stringData[r],0,t.stringData[r].length):e.bytes===Array?Array.prototype.slice.call(t.stringData[r]):t.stringData[r];if(t.int64Data&&t.int64Data.length)for(n.int64Data=[],r=0;r<t.int64Data.length;++r)"number"==typeof t.int64Data[r]?n.int64Data[r]=e.longs===String?String(t.int64Data[r]):t.int64Data[r]:n.int64Data[r]=e.longs===String?l.Long.prototype.toString.call(t.int64Data[r]):e.longs===Number?new l.LongBits(t.int64Data[r].low>>>0,t.int64Data[r].high>>>0).toNumber():t.int64Data[r];if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.rawData&&t.hasOwnProperty("rawData")&&(n.rawData=e.bytes===String?l.base64.encode(t.rawData,0,t.rawData.length):e.bytes===Array?Array.prototype.slice.call(t.rawData):t.rawData),t.doubleData&&t.doubleData.length)for(n.doubleData=[],r=0;r<t.doubleData.length;++r)n.doubleData[r]=e.json&&!isFinite(t.doubleData[r])?String(t.doubleData[r]):t.doubleData[r];if(t.uint64Data&&t.uint64Data.length)for(n.uint64Data=[],r=0;r<t.uint64Data.length;++r)"number"==typeof t.uint64Data[r]?n.uint64Data[r]=e.longs===String?String(t.uint64Data[r]):t.uint64Data[r]:n.uint64Data[r]=e.longs===String?l.Long.prototype.toString.call(t.uint64Data[r]):e.longs===Number?new l.LongBits(t.uint64Data[r].low>>>0,t.uint64Data[r].high>>>0).toNumber(!0):t.uint64Data[r];if(null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),t.externalData&&t.externalData.length)for(n.externalData=[],r=0;r<t.externalData.length;++r)n.externalData[r]=u.onnx.StringStringEntryProto.toObject(t.externalData[r],e);return null!=t.dataLocation&&t.hasOwnProperty("dataLocation")&&(n.dataLocation=e.enums===String?u.onnx.TensorProto.DataLocation[t.dataLocation]:t.dataLocation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t.DataType=function(){var t={},e=Object.create(t);return e[t[0]="UNDEFINED"]=0,e[t[1]="FLOAT"]=1,e[t[2]="UINT8"]=2,e[t[3]="INT8"]=3,e[t[4]="UINT16"]=4,e[t[5]="INT16"]=5,e[t[6]="INT32"]=6,e[t[7]="INT64"]=7,e[t[8]="STRING"]=8,e[t[9]="BOOL"]=9,e[t[10]="FLOAT16"]=10,e[t[11]="DOUBLE"]=11,e[t[12]="UINT32"]=12,e[t[13]="UINT64"]=13,e[t[14]="COMPLEX64"]=14,e[t[15]="COMPLEX128"]=15,e[t[16]="BFLOAT16"]=16,e}(),t.Segment=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.begin=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.end=l.Long?l.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=c.create()),null!=t.begin&&t.hasOwnProperty("begin")&&e.uint32(8).int64(t.begin),null!=t.end&&t.hasOwnProperty("end")&&e.uint32(16).int64(t.end),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new u.onnx.TensorProto.Segment;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.begin=t.int64();break;case 2:r.end=t.int64();break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.begin&&t.hasOwnProperty("begin")&&!(l.isInteger(t.begin)||t.begin&&l.isInteger(t.begin.low)&&l.isInteger(t.begin.high))?"begin: integer|Long expected":null!=t.end&&t.hasOwnProperty("end")&&!(l.isInteger(t.end)||t.end&&l.isInteger(t.end.low)&&l.isInteger(t.end.high))?"end: integer|Long expected":null},t.fromObject=function(t){if(t instanceof u.onnx.TensorProto.Segment)return t;var e=new u.onnx.TensorProto.Segment;return null!=t.begin&&(l.Long?(e.begin=l.Long.fromValue(t.begin)).unsigned=!1:"string"==typeof t.begin?e.begin=parseInt(t.begin,10):"number"==typeof t.begin?e.begin=t.begin:"object"==typeof t.begin&&(e.begin=new l.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber())),null!=t.end&&(l.Long?(e.end=l.Long.fromValue(t.end)).unsigned=!1:"string"==typeof t.end?e.end=parseInt(t.end,10):"number"==typeof t.end?e.end=t.end:"object"==typeof t.end&&(e.end=new l.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(l.Long){var r=new l.Long(0,0,!1);n.begin=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.begin=e.longs===String?"0":0;l.Long?(r=new l.Long(0,0,!1),n.end=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):n.end=e.longs===String?"0":0}return null!=t.begin&&t.hasOwnProperty("begin")&&("number"==typeof t.begin?n.begin=e.longs===String?String(t.begin):t.begin:n.begin=e.longs===String?l.Long.prototype.toString.call(t.begin):e.longs===Number?new l.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber():t.begin),null!=t.end&&t.hasOwnProperty("end")&&("number"==typeof t.end?n.end=e.longs===String?String(t.end):t.end:n.end=e.longs===String?l.Long.prototype.toString.call(t.end):e.longs===Number?new l.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber():t.end),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),t.DataLocation=function(){var t={},e=Object.create(t);return e[t[0]="DEFAULT"]=0,e[t[1]="EXTERNAL"]=1,e}(),t}(),o.TensorShapeProto=function(){function t(t){if(this.dim=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dim=l.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=c.create()),null!=t.dim&&t.dim.length)for(var n=0;n<t.dim.length;++n)u.onnx.TensorShapeProto.Dimension.encode(t.dim[n],e.uint32(10).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new u.onnx.TensorShapeProto;t.pos<n;){var i=t.uint32();i>>>3==1?(r.dim&&r.dim.length||(r.dim=[]),r.dim.push(u.onnx.TensorShapeProto.Dimension.decode(t,t.uint32()))):t.skipType(7&i)}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.dim&&t.hasOwnProperty("dim")){if(!Array.isArray(t.dim))return"dim: array expected";for(var e=0;e<t.dim.length;++e){var n=u.onnx.TensorShapeProto.Dimension.verify(t.dim[e]);if(n)return"dim."+n}}return null},t.fromObject=function(t){if(t instanceof u.onnx.TensorShapeProto)return t;var e=new u.onnx.TensorShapeProto;if(t.dim){if(!Array.isArray(t.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");e.dim=[];for(var n=0;n<t.dim.length;++n){if("object"!=typeof t.dim[n])throw TypeError(".onnx.TensorShapeProto.dim: object expected");e.dim[n]=u.onnx.TensorShapeProto.Dimension.fromObject(t.dim[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.dim=[]),t.dim&&t.dim.length){n.dim=[];for(var r=0;r<t.dim.length;++r)n.dim[r]=u.onnx.TensorShapeProto.Dimension.toObject(t.dim[r],e)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t.Dimension=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.dimValue=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.dimParam="",t.prototype.denotation="",Object.defineProperty(t.prototype,"value",{get:l.oneOfGetter(e=["dimValue","dimParam"]),set:l.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=c.create()),null!=t.dimValue&&t.hasOwnProperty("dimValue")&&e.uint32(8).int64(t.dimValue),null!=t.dimParam&&t.hasOwnProperty("dimParam")&&e.uint32(18).string(t.dimParam),null!=t.denotation&&t.hasOwnProperty("denotation")&&e.uint32(26).string(t.denotation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new u.onnx.TensorShapeProto.Dimension;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.dimValue=t.int64();break;case 2:r.dimParam=t.string();break;case 3:r.denotation=t.string();break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";var e={};if(null!=t.dimValue&&t.hasOwnProperty("dimValue")&&(e.value=1,!(l.isInteger(t.dimValue)||t.dimValue&&l.isInteger(t.dimValue.low)&&l.isInteger(t.dimValue.high))))return"dimValue: integer|Long expected";if(null!=t.dimParam&&t.hasOwnProperty("dimParam")){if(1===e.value)return"value: multiple values";if(e.value=1,!l.isString(t.dimParam))return"dimParam: string expected"}return null!=t.denotation&&t.hasOwnProperty("denotation")&&!l.isString(t.denotation)?"denotation: string expected":null},t.fromObject=function(t){if(t instanceof u.onnx.TensorShapeProto.Dimension)return t;var e=new u.onnx.TensorShapeProto.Dimension;return null!=t.dimValue&&(l.Long?(e.dimValue=l.Long.fromValue(t.dimValue)).unsigned=!1:"string"==typeof t.dimValue?e.dimValue=parseInt(t.dimValue,10):"number"==typeof t.dimValue?e.dimValue=t.dimValue:"object"==typeof t.dimValue&&(e.dimValue=new l.LongBits(t.dimValue.low>>>0,t.dimValue.high>>>0).toNumber())),null!=t.dimParam&&(e.dimParam=String(t.dimParam)),null!=t.denotation&&(e.denotation=String(t.denotation)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.denotation=""),null!=t.dimValue&&t.hasOwnProperty("dimValue")&&("number"==typeof t.dimValue?n.dimValue=e.longs===String?String(t.dimValue):t.dimValue:n.dimValue=e.longs===String?l.Long.prototype.toString.call(t.dimValue):e.longs===Number?new l.LongBits(t.dimValue.low>>>0,t.dimValue.high>>>0).toNumber():t.dimValue,e.oneofs&&(n.value="dimValue")),null!=t.dimParam&&t.hasOwnProperty("dimParam")&&(n.dimParam=t.dimParam,e.oneofs&&(n.value="dimParam")),null!=t.denotation&&t.hasOwnProperty("denotation")&&(n.denotation=t.denotation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),t}(),o.TypeProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.tensorType=null,t.prototype.denotation="",Object.defineProperty(t.prototype,"value",{get:l.oneOfGetter(e=["tensorType"]),set:l.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=c.create()),null!=t.tensorType&&t.hasOwnProperty("tensorType")&&u.onnx.TypeProto.Tensor.encode(t.tensorType,e.uint32(10).fork()).ldelim(),null!=t.denotation&&t.hasOwnProperty("denotation")&&e.uint32(50).string(t.denotation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new u.onnx.TypeProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.tensorType=u.onnx.TypeProto.Tensor.decode(t,t.uint32());break;case 6:r.denotation=t.string();break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.tensorType&&t.hasOwnProperty("tensorType")){var e=u.onnx.TypeProto.Tensor.verify(t.tensorType);if(e)return"tensorType."+e}return null!=t.denotation&&t.hasOwnProperty("denotation")&&!l.isString(t.denotation)?"denotation: string expected":null},t.fromObject=function(t){if(t instanceof u.onnx.TypeProto)return t;var e=new u.onnx.TypeProto;if(null!=t.tensorType){if("object"!=typeof t.tensorType)throw TypeError(".onnx.TypeProto.tensorType: object expected");e.tensorType=u.onnx.TypeProto.Tensor.fromObject(t.tensorType)}return null!=t.denotation&&(e.denotation=String(t.denotation)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.denotation=""),null!=t.tensorType&&t.hasOwnProperty("tensorType")&&(n.tensorType=u.onnx.TypeProto.Tensor.toObject(t.tensorType,e),e.oneofs&&(n.value="tensorType")),null!=t.denotation&&t.hasOwnProperty("denotation")&&(n.denotation=t.denotation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t.Tensor=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.elemType=0,t.prototype.shape=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=c.create()),null!=t.elemType&&t.hasOwnProperty("elemType")&&e.uint32(8).int32(t.elemType),null!=t.shape&&t.hasOwnProperty("shape")&&u.onnx.TensorShapeProto.encode(t.shape,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new u.onnx.TypeProto.Tensor;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.elemType=t.int32();break;case 2:r.shape=u.onnx.TensorShapeProto.decode(t,t.uint32());break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.elemType&&t.hasOwnProperty("elemType")&&!l.isInteger(t.elemType))return"elemType: integer expected";if(null!=t.shape&&t.hasOwnProperty("shape")){var e=u.onnx.TensorShapeProto.verify(t.shape);if(e)return"shape."+e}return null},t.fromObject=function(t){if(t instanceof u.onnx.TypeProto.Tensor)return t;var e=new u.onnx.TypeProto.Tensor;if(null!=t.elemType&&(e.elemType=0|t.elemType),null!=t.shape){if("object"!=typeof t.shape)throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");e.shape=u.onnx.TensorShapeProto.fromObject(t.shape)}return e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.elemType=0,n.shape=null),null!=t.elemType&&t.hasOwnProperty("elemType")&&(n.elemType=t.elemType),null!=t.shape&&t.hasOwnProperty("shape")&&(n.shape=u.onnx.TensorShapeProto.toObject(t.shape,e)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),t}(),o.OperatorSetIdProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.domain="",t.prototype.version=l.Long?l.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=c.create()),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(10).string(t.domain),null!=t.version&&t.hasOwnProperty("version")&&e.uint32(16).int64(t.version),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new u.onnx.OperatorSetIdProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.domain=t.string();break;case 2:r.version=t.int64();break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.domain&&t.hasOwnProperty("domain")&&!l.isString(t.domain)?"domain: string expected":null!=t.version&&t.hasOwnProperty("version")&&!(l.isInteger(t.version)||t.version&&l.isInteger(t.version.low)&&l.isInteger(t.version.high))?"version: integer|Long expected":null},t.fromObject=function(t){if(t instanceof u.onnx.OperatorSetIdProto)return t;var e=new u.onnx.OperatorSetIdProto;return null!=t.domain&&(e.domain=String(t.domain)),null!=t.version&&(l.Long?(e.version=l.Long.fromValue(t.version)).unsigned=!1:"string"==typeof t.version?e.version=parseInt(t.version,10):"number"==typeof t.version?e.version=t.version:"object"==typeof t.version&&(e.version=new l.LongBits(t.version.low>>>0,t.version.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults)if(n.domain="",l.Long){var r=new l.Long(0,0,!1);n.version=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.version=e.longs===String?"0":0;return null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),null!=t.version&&t.hasOwnProperty("version")&&("number"==typeof t.version?n.version=e.longs===String?String(t.version):t.version:n.version=e.longs===String?l.Long.prototype.toString.call(t.version):e.longs===Number?new l.LongBits(t.version.low>>>0,t.version.high>>>0).toNumber():t.version),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},t}(),o),t.exports=u},2100:(t,e,n)=>{"use strict";t.exports=n(9482)},9482:(t,e,n)=>{"use strict";var r=e;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(1173),r.BufferWriter=n(3155),r.Reader=n(1408),r.BufferReader=n(593),r.util=n(9693),r.rpc=n(5994),r.roots=n(5054),r.configure=i,i()},1408:(t,e,n)=>{"use strict";t.exports=c;var r,i=n(9693),o=i.LongBits,a=i.utf8;function s(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function c(t){this.buf=t,this.pos=0,this.len=t.length}var l,u="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new c(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new c(t);throw Error("illegal buffer")},h=function(){return i.Buffer?function(t){return(c.create=function(t){return i.Buffer.isBuffer(t)?new r(t):u(t)})(t)}:u};function d(){var t=new o(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw s(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw s(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function p(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw s(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=h(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var t=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},c.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var t=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},c.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw s(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n)},c.prototype.string=function(){var t=this.bytes();return a.read(t,0,t.length)},c.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw s(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},c._configure=function(t){r=t,c.create=h(),r._configure();var e=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return d.call(this)[e](!1)},uint64:function(){return d.call(this)[e](!0)},sint64:function(){return d.call(this).zzDecode()[e](!1)},fixed64:function(){return f.call(this)[e](!0)},sfixed64:function(){return f.call(this)[e](!1)}})}},593:(t,e,n)=>{"use strict";t.exports=o;var r=n(1408);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(9693);function o(t){r.call(this,t)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},o._configure()},5054:t=>{"use strict";t.exports={}},5994:(t,e,n)=>{"use strict";e.Service=n(7948)},7948:(t,e,n)=>{"use strict";t.exports=i;var r=n(9693);function i(t,e,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function t(e,n,i,o,a){if(!o)throw TypeError("request must be specified");var s=this;if(!a)return r.asPromise(t,s,e,n,i,o);if(s.rpcImpl)try{return s.rpcImpl(e,n[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(t,n){if(t)return s.emit("error",t,e),a(t);if(null!==n){if(!(n instanceof i))try{n=i[s.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){return s.emit("error",t,e),a(t)}return s.emit("data",n,e),a(null,n)}s.end(!0)}))}catch(t){return s.emit("error",t,e),void setTimeout((function(){a(t)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},i.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(t,e,n)=>{"use strict";t.exports=i;var r=n(9693);function i(t,e){this.lo=t>>>0,this.hi=e>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var a=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return o;var e=t<0;e&&(t=-t);var n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(t){if("number"==typeof t)return i.fromNumber(t);if(r.isString(t)){if(!r.Long)return i.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new i(t.low>>>0,t.high>>>0):o},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var s=String.prototype.charCodeAt;i.fromHash=function(t){return t===a?o:new i((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},i.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}},9693:function(t,e,n){"use strict";var r=e;function i(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;++i)void 0!==t[r[i]]&&n||(t[r[i]]=e[r[i]]);return t}function o(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}r.asPromise=n(4537),r.base64=n(7419),r.EventEmitter=n(9211),r.float=n(945),r.inquire=n(7199),r.utf8=n(4997),r.pool=n(6662),r.LongBits=n(1945),r.isNode=Boolean(void 0!==n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"==typeof t||t instanceof String},r.isObject=function(t){return t&&"object"==typeof t},r.isset=r.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(t){return"number"==typeof t?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){var n=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(n.lo,n.hi,e):n.toNumber(Boolean(e))},r.merge=i,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(1===e[t[n]]&&void 0!==this[t[n]]&&null!==this[t[n]])return t[n]}},r.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var t=r.Buffer;t?(r._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,n){return new t(e,n)},r._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},1173:(t,e,n)=>{"use strict";t.exports=h;var r,i=n(9693),o=i.LongBits,a=i.base64,s=i.utf8;function c(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function l(){}function u(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function h(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(h.create=function(){return new r})()}:function(){return new h}};function p(t,e,n){e[n]=255&t}function f(t,e){this.len=t,this.next=void 0,this.val=e}function m(t,e,n){for(;t.hi;)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function g(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}h.create=d(),h.alloc=function(t){return new i.Array(t)},i.Array!==Array&&(h.alloc=i.pool(h.alloc,i.Array.prototype.subarray)),h.prototype._push=function(t,e,n){return this.tail=this.tail.next=new c(t,e,n),this.len+=e,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(t,e,n){for(;t>127;)e[n++]=127&t|128,t>>>=7;e[n]=t},h.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},h.prototype.int32=function(t){return t<0?this._push(m,10,o.fromNumber(t)):this.uint32(t)},h.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},h.prototype.uint64=function(t){var e=o.from(t);return this._push(m,e.length(),e)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(t){var e=o.from(t).zzEncode();return this._push(m,e.length(),e)},h.prototype.bool=function(t){return this._push(p,1,t?1:0)},h.prototype.fixed32=function(t){return this._push(g,4,t>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(t){var e=o.from(t);return this._push(g,4,e.lo)._push(g,4,e.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(t){return this._push(i.float.writeFloatLE,4,t)},h.prototype.double=function(t){return this._push(i.float.writeDoubleLE,8,t)};var y=i.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var r=0;r<t.length;++r)e[n+r]=t[r]};h.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(p,1,0);if(i.isString(t)){var n=h.alloc(e=a.length(t));a.decode(t,n,0),t=n}return this.uint32(e)._push(y,e,t)},h.prototype.string=function(t){var e=s.length(t);return e?this.uint32(e)._push(s.write,e,t):this._push(p,1,0)},h.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},h.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this},h.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e},h._configure=function(t){r=t,h.create=d(),r._configure()}},3155:(t,e,n)=>{"use strict";t.exports=o;var r=n(1173);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(9693);function o(){r.call(this)}function a(t,e,n){t.length<40?i.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var r=0;r<t.length;)e[n++]=t[r++]}},o.prototype.bytes=function(t){i.isString(t)&&(t=i._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(o.writeBytesBuffer,e,t),this},o.prototype.string=function(t){var e=i.Buffer.byteLength(t);return this.uint32(e),e&&this._push(a,e,t),this},o._configure()},7714:(t,e,n)=>{"use strict";e.R=void 0;const r=n(6919),i=n(7448);e.R=new class{async init(){}async createSessionHandler(t,e){const n=new r.Session(e);return await n.loadModel(t),new i.OnnxjsSessionHandler(n)}}},4200:(t,e,n)=>{"use strict";e.c8=e.rX=void 0;const r=n(1670),i=n(5381),o=n(2157),a=n(2306);e.rX=()=>{if(("number"!=typeof r.env.wasm.initTimeout||r.env.wasm.initTimeout<0)&&(r.env.wasm.initTimeout=0),"boolean"!=typeof r.env.wasm.simd&&(r.env.wasm.simd=!0),"boolean"!=typeof r.env.wasm.proxy&&(r.env.wasm.proxy=!1),"number"!=typeof r.env.wasm.numThreads||!Number.isInteger(r.env.wasm.numThreads)||r.env.wasm.numThreads<=0){const t="undefined"==typeof navigator?(0,i.cpus)().length:navigator.hardwareConcurrency;r.env.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},e.c8=new class{async init(){(0,e.rX)(),await(0,o.initWasm)()}async createSessionHandler(t,e){const n=new a.OnnxruntimeWebAssemblySessionHandler;return await n.loadModel(t,e),Promise.resolve(n)}}},6018:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(1670),e);const o=n(1670);{const t=n(7714).R;(0,o.registerBackend)("webgl",t,-10)}{const t=n(4200).c8;(0,o.registerBackend)("cpu",t,10),(0,o.registerBackend)("wasm",t,10),(0,o.registerBackend)("xnnpack",t,9)}},246:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;class n{constructor(t){Object.assign(this,t)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map((t=>"".concat(this[t]))).join(";")),this._cacheKey}}e.createAttributeWithCacheKey=t=>new n(t)},7778:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;const r=n(1446),i=n(9395),o=n(9162),a=n(2517);var s=i.onnxruntime.experimental.fbs;class c{constructor(t){if(this._attributes=new Map,null!=t){for(const e of t)e instanceof r.onnx.AttributeProto?this._attributes.set(e.name,[c.getValue(e),c.getType(e)]):e instanceof s.Attribute&&this._attributes.set(e.name(),[c.getValue(e),c.getType(e)]);if(this._attributes.size<t.length)throw new Error("duplicated attribute names")}}set(t,e,n){this._attributes.set(t,[n,e])}delete(t){this._attributes.delete(t)}getFloat(t,e){return this.get(t,"float",e)}getInt(t,e){return this.get(t,"int",e)}getString(t,e){return this.get(t,"string",e)}getTensor(t,e){return this.get(t,"tensor",e)}getFloats(t,e){return this.get(t,"floats",e)}getInts(t,e){return this.get(t,"ints",e)}getStrings(t,e){return this.get(t,"strings",e)}getTensors(t,e){return this.get(t,"tensors",e)}get(t,e,n){const r=this._attributes.get(t);if(void 0===r){if(void 0!==n)return n;throw new Error("required attribute not found: ".concat(t))}if(r[1]!==e)throw new Error("type mismatch: expected ".concat(e," but got ").concat(r[1]));return r[0]}static getType(t){const e=t instanceof r.onnx.AttributeProto?t.type:t.type();switch(e){case r.onnx.AttributeProto.AttributeType.FLOAT:return"float";case r.onnx.AttributeProto.AttributeType.INT:return"int";case r.onnx.AttributeProto.AttributeType.STRING:return"string";case r.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case r.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case r.onnx.AttributeProto.AttributeType.INTS:return"ints";case r.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case r.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error("attribute type is not supported yet: ".concat(r.onnx.AttributeProto.AttributeType[e]))}}static getValue(t){const e=t instanceof r.onnx.AttributeProto?t.type:t.type();if(e===r.onnx.AttributeProto.AttributeType.GRAPH||e===r.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const n=this.getValueNoCheck(t);if(e===r.onnx.AttributeProto.AttributeType.INT&&a.LongUtil.isLong(n))return a.LongUtil.longToNumber(n);if(e===r.onnx.AttributeProto.AttributeType.INTS){const t=n,e=new Array(t.length);for(let n=0;n<t.length;n++){const r=t[n];e[n]=a.LongUtil.longToNumber(r)}return e}if(e===r.onnx.AttributeProto.AttributeType.TENSOR)return t instanceof r.onnx.AttributeProto?o.Tensor.fromProto(n):o.Tensor.fromOrtTensor(n);if(e===r.onnx.AttributeProto.AttributeType.TENSORS){if(t instanceof r.onnx.AttributeProto)return n.map((t=>o.Tensor.fromProto(t)));if(t instanceof s.Attribute)return n.map((t=>o.Tensor.fromOrtTensor(t)))}if(e===r.onnx.AttributeProto.AttributeType.STRING&&t instanceof r.onnx.AttributeProto){const t=n;return(0,a.decodeUtf8String)(t)}return e===r.onnx.AttributeProto.AttributeType.STRINGS&&t instanceof r.onnx.AttributeProto?n.map(a.decodeUtf8String):n}static getValueNoCheck(t){return t instanceof r.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(t):this.getValueNoCheckFromOrtFormat(t)}static getValueNoCheckFromOnnxFormat(t){switch(t.type){case r.onnx.AttributeProto.AttributeType.FLOAT:return t.f;case r.onnx.AttributeProto.AttributeType.INT:return t.i;case r.onnx.AttributeProto.AttributeType.STRING:return t.s;case r.onnx.AttributeProto.AttributeType.TENSOR:return t.t;case r.onnx.AttributeProto.AttributeType.GRAPH:return t.g;case r.onnx.AttributeProto.AttributeType.FLOATS:return t.floats;case r.onnx.AttributeProto.AttributeType.INTS:return t.ints;case r.onnx.AttributeProto.AttributeType.STRINGS:return t.strings;case r.onnx.AttributeProto.AttributeType.TENSORS:return t.tensors;case r.onnx.AttributeProto.AttributeType.GRAPHS:return t.graphs;default:throw new Error("unsupported attribute type: ".concat(r.onnx.AttributeProto.AttributeType[t.type]))}}static getValueNoCheckFromOrtFormat(t){switch(t.type()){case s.AttributeType.FLOAT:return t.f();case s.AttributeType.INT:return t.i();case s.AttributeType.STRING:return t.s();case s.AttributeType.TENSOR:return t.t();case s.AttributeType.GRAPH:return t.g();case s.AttributeType.FLOATS:return t.floatsArray();case s.AttributeType.INTS:{const e=[];for(let n=0;n<t.intsLength();n++)e.push(t.ints(n));return e}case s.AttributeType.STRINGS:{const e=[];for(let n=0;n<t.stringsLength();n++)e.push(t.strings(n));return e}case s.AttributeType.TENSORS:{const e=[];for(let n=0;n<t.tensorsLength();n++)e.push(t.tensors(n));return e}default:throw new Error("unsupported attribute type: ".concat(s.AttributeType[t.type()]))}}}e.Attribute=c},7091:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.backend=void 0;const r=n(5038),i=new Map;async function o(t){const n=e.backend;if(void 0!==n[t]&&function(t){const e=t;return"initialize"in e&&"function"==typeof e.initialize&&"createSessionHandler"in e&&"function"==typeof e.createSessionHandler&&"dispose"in e&&"function"==typeof e.dispose}(n[t])){const e=n[t];let r=e.initialize();if("object"==typeof r&&"then"in r&&(r=await r),r)return i.set(t,e),e}}e.backend={webgl:new r.WebGLBackend},e.resolveBackend=async function t(e){if(!e)return t(["webgl"]);{const t="string"==typeof e?[e]:e;for(const e of t){const t=i.get(e);if(t)return t;const n=await o(e);if(n)return n}}throw new Error("no available backend to use")}},5038:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;const r=n(1670),i=n(6231),o=n(6416),a=n(7305);e.WebGLBackend=class{get contextId(){return r.env.webgl.contextId}set contextId(t){r.env.webgl.contextId=t}get matmulMaxBatchSize(){return r.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(t){r.env.webgl.matmulMaxBatchSize=t}get textureCacheMode(){return r.env.webgl.textureCacheMode}set textureCacheMode(t){r.env.webgl.textureCacheMode=t}get pack(){return r.env.webgl.pack}set pack(t){r.env.webgl.pack=t}get async(){return r.env.webgl.async}set async(t){r.env.webgl.async=t}initialize(){try{return this.glContext=(0,a.createWebGLContext)(this.contextId),"number"!=typeof this.matmulMaxBatchSize&&(this.matmulMaxBatchSize=16),"string"!=typeof this.textureCacheMode&&(this.textureCacheMode="full"),"boolean"!=typeof this.pack&&(this.pack=!1),"boolean"!=typeof this.async&&(this.async=!1),i.Logger.setWithEnv(r.env),i.Logger.verbose("WebGLBackend","Created WebGLContext: ".concat(typeof this.glContext," with matmulMaxBatchSize: ").concat(this.matmulMaxBatchSize,"; textureCacheMode: ").concat(this.textureCacheMode,"; pack: ").concat(this.pack,"; async: ").concat(this.async,".")),!0}catch(t){return i.Logger.warning("WebGLBackend","Unable to initialize WebGLBackend. ".concat(t)),!1}}createSessionHandler(t){return new o.WebGLSessionHandler(this,t)}dispose(){this.glContext.dispose()}}},5107:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;const r=n(2517),i=n(8520),o=n(5060),a=n(7859),s=n(9390);class c extends i.GlslLib{constructor(t){super(t)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new i.GlslLibRoutine("\n      vec2 offsetToCoords(int offset, int width, int height) {\n        int t = offset / width;\n        int s = offset - t*width;\n        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);\n        return coords;\n      }\n      ")}}coordsToOffset(){return{coordsToOffset:new i.GlslLibRoutine("\n      int coordsToOffset(vec2 coords, int width, int height) {\n        float s = coords.s * float(width);\n        float t = coords.t * float(height);\n        int offset = int(t) * width + int(s);\n        return offset;\n      }\n      ")}}getOutputSamplingSnippet(){const t=this.context.outputTextureLayout;return t.isPacked?this.getPackedOutputSamplingSnippet(t):this.getUnpackedOutputSamplingSnippet(t)}getPackedOutputSamplingSnippet(t){const e=t.unpackedShape,n=[t.width,t.height],r={},a="getOutputCoords";switch(e.length){case 0:r[a]=this.getOutputScalarCoords();break;case 1:r[a]=this.getOutputPacked1DCoords(e,n);break;case 2:r[a]=this.getOutputPacked2DCoords(e,n);break;case 3:r[a]=this.getOutputPacked3DCoords(e,n);break;default:r[a]=this.getOutputPackedNDCoords(e,n)}const s="\n      void setOutput(vec4 val) {\n        ".concat((0,o.getGlsl)(this.context.glContext.version).output," = val;\n      }\n    ");return r.floatTextureSetRGBA=new i.GlslLibRoutine(s),r}getUnpackedOutputSamplingSnippet(t){const e=t.unpackedShape,n=[t.width,t.height],r={},a="getOutputCoords";switch(e.length){case 0:r[a]=this.getOutputScalarCoords();break;case 1:r[a]=this.getOutputUnpacked1DCoords(e,n);break;case 2:r[a]=this.getOutputUnpacked2DCoords(e,n);break;case 3:r[a]=this.getOutputUnpacked3DCoords(e,n);break;case 4:r[a]=this.getOutputUnpacked4DCoords(e,n);break;case 5:r[a]=this.getOutputUnpacked5DCoords(e,n);break;case 6:r[a]=this.getOutputUnpacked6DCoords(e,n);break;default:throw new Error("Unsupported output dimensionality: ".concat(e.length))}const s="\n        void setOutput(float val) {\n          ".concat((0,o.getGlsl)(this.context.glContext.version).output," = vec4(val, 0, 0, 0);\n        }\n    ");return r.floatTextureSetR=new i.GlslLibRoutine(s),r}getOutputScalarCoords(){return new i.GlslLibRoutine("\n      int getOutputCoords() {\n        return 0;\n      }\n    ")}getOutputPacked1DCoords(t,e){const n=e;let r="";return 1===n[0]?(r="\n          int getOutputCoords() {\n            return 2 * int(TexCoords.y * ".concat(n[1],".0);\n          }\n        "),new i.GlslLibRoutine(r)):1===n[1]?(r="\n          int getOutputCoords() {\n            return 2 * int(TexCoords.x * ".concat(n[0],".0);\n          }\n        "),new i.GlslLibRoutine(r)):(r="\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                 vec2(".concat(n[0],", ").concat(n[1],"));\n          return 2 * (resTexRC.y * ").concat(n[0]," + resTexRC.x);\n        }\n      "),new i.GlslLibRoutine(r))}getOutputPacked2DCoords(t,e){let n="";if(r.ArrayUtil.arraysEqual(t,e))return n="\n        ivec2 getOutputCoords() {\n          return 2 * ivec2(TexCoords.xy * vec2(".concat(e[0],", ").concat(e[1],"));\n        }\n      "),new i.GlslLibRoutine(n);const o=e,a=Math.ceil(t[1]/2);return n="\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(o[0],", ").concat(o[1],"));\n\n          int index = resTexRC.y * ").concat(o[0]," + resTexRC.x;\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ").concat(a,") * 2;\n          int c = 2 * (index / ").concat(a,");\n\n          return ivec2(r, c);\n        }\n      "),new i.GlslLibRoutine(n)}getOutputPacked3DCoords(t,e){const n=[e[0],e[1]],r=Math.ceil(t[2]/2),o=r*Math.ceil(t[1]/2),a="\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(n[0],", ").concat(n[1],"));\n          int index = resTexRC.y * ").concat(n[0]," + resTexRC.x;\n\n          int b = index / ").concat(o,";\n          index -= b * ").concat(o,";\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ").concat(r,") * 2;\n          int c = 2 * (index / ").concat(r,");\n\n          return ivec3(b, r, c);\n        }\n      ");return new i.GlslLibRoutine(a)}getOutputPackedNDCoords(t,e){const n=[e[0],e[1]],r=Math.ceil(t[t.length-1]/2),o=r*Math.ceil(t[t.length-2]/2);let a=o,s="",c="b, r, c";for(let i=2;i<t.length-1;i++)a*=t[t.length-i-1],s="\n      int b".concat(i," = index / ").concat(a,";\n      index -= b").concat(i," * ").concat(a,";\n    ")+s,c="b".concat(i,", ")+c;const l="\n      ivec".concat(t.length," getOutputCoords() {\n        ivec2 resTexRC = ivec2(TexCoords.xy *\n                              vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = resTexRC.y * ").concat(n[0]," + resTexRC.x;\n\n        ").concat(s,"\n\n        int b = index / ").concat(o,";\n        index -= b * ").concat(o,";\n\n        // reverse r and c order for packed texture\n        int r = imod(index, ").concat(r,") * 2;\n        int c = 2 * (index / ").concat(r,");\n\n        return ivec").concat(t.length,"(").concat(c,");\n      }\n    ");return new i.GlslLibRoutine(l)}getOutputUnpacked1DCoords(t,e){const n="\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          return resTexRC.y * ").concat(e[0]," + resTexRC.x;\n        }\n      ");return new i.GlslLibRoutine(n)}getOutputUnpacked2DCoords(t,e){const n="\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n          int r = index / ").concat(t[1],";\n          int c = index - r * ").concat(t[1],";\n          return ivec2(r, c);\n        }\n      ");return new i.GlslLibRoutine(n)}getOutputUnpacked3DCoords(t,e){let n="";const r=t.length;let o=null;r<2&&(o=[]),o=new Array(r-1),o[r-2]=t[r-1];for(let i=r-3;i>=0;--i)o[i]=o[i+1]*t[i+1];const a=["r","c","d"],s=o.map(((t,e)=>"int ".concat(a[e]," = index / ").concat(t,"; ").concat(e===o.length-1?"int ".concat(a[e+1]," = index - ").concat(a[e]," * ").concat(t):"index -= ".concat(a[e]," * ").concat(t),";"))).join("");return n="\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n          ").concat(s,"\n          return ivec3(r, c, d);\n        }\n      "),new i.GlslLibRoutine(n)}getOutputUnpacked4DCoords(t,e){let n="";const r=t.length;let o=null;r<2&&(o=[]),o=new Array(r-1),o[r-2]=t[r-1];for(let i=r-3;i>=0;--i)o[i]=o[i+1]*t[i+1];const a=["r","c","d","d2"],s=o.map(((t,e)=>"int ".concat(a[e]," = index / ").concat(t,"; ").concat(e===o.length-1?"int ".concat(a[e+1]," = index - ").concat(a[e]," * ").concat(t):"index -= ".concat(a[e]," * ").concat(t),";"))).join("");return n="\n      ivec4 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n          ").concat(s,"\n          return ivec4(r, c, d, d2);\n        }\n      "),new i.GlslLibRoutine(n)}getOutputUnpacked5DCoords(t,e){let n="";const r=t.length;let o=null;r<2&&(o=[]),o=new Array(r-1),o[r-2]=t[r-1];for(let i=r-3;i>=0;--i)o[i]=o[i+1]*t[i+1];const a=["r","c","d","d2","d3"],s=o.map(((t,e)=>"int ".concat(a[e]," = index / ").concat(t,"; ").concat(e===o.length-1?"int ".concat(a[e+1]," = index - ").concat(a[e]," * ").concat(t):"index -= ".concat(a[e]," * ").concat(t),";"))).join("");return n="\n      ivec5 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n          ").concat(s,"\n          return ivec5(r, c, d, d2, d3);\n        }\n      "),new i.GlslLibRoutine(n)}getOutputUnpacked6DCoords(t,e){let n="";const r=t.length;let o=null;r<2&&(o=[]),o=new Array(r-1),o[r-2]=t[r-1];for(let i=r-3;i>=0;--i)o[i]=o[i+1]*t[i+1];const a=["r","c","d","d2","d3","d4"],s=o.map(((t,e)=>"int ".concat(a[e]," = index / ").concat(t,"; ").concat(e===o.length-1?"int ".concat(a[e+1]," = index - ").concat(a[e]," * ").concat(t):"index -= ".concat(a[e]," * ").concat(t),";"))).join("");return n="\n     ivec6 getOutputCoords() {\n         ivec2 resTexRC = ivec2(TexCoords.xy *\n                               vec2(".concat(e[0],", ").concat(e[1],"));\n         int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n         ").concat(s,"\n         return ivec6(r, c, d, d2, d3, d4);\n       }\n     "),new i.GlslLibRoutine(n)}getCommonUtilFuncs(){const t={};let e="uvFromFlat";t[e]=new i.GlslLibRoutine("\n    vec2 uvFromFlat(int texNumR, int texNumC, int index) {\n      int texC = index / texNumR;\n      int texR = index - texC * texNumR;\n      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to\n      //       v.\n      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);\n    }\n    "),e="packedUVfrom1D",t[e]=new i.GlslLibRoutine("\n      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n        int texelIndex = index / 2;\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),e="packedUVfrom2D",t[e]=new i.GlslLibRoutine("\n      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {\n        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),e="packedUVfrom3D",t[e]=new i.GlslLibRoutine("\n      vec2 packedUVfrom3D(int texNumR, int texNumC,\n          int texelsInBatch, int texelsInLogicalRow, int b,\n          int row, int col) {\n        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = index / texNumC;\n        int texC = index - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),e="sampleTexture";const n=(0,o.getGlsl)(this.context.glContext.version);return t[e]=new i.GlslLibRoutine("\n        float sampleTexture(sampler2D textureSampler, vec2 uv) {\n            return ".concat(n.texture2D,"(textureSampler, uv).r;\n        }")),t}getInputsSamplingSnippets(){const t={},e=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach(((n,r)=>{const i=this.context.inputTextureLayouts[r],o=(0,s.generateShaderFuncNameFromInputSamplerName)(n);i.isPacked?t[o]=this.getPackedSamplerFromInput(o,n,i):t[o]=this.getUnpackedSamplerFromInput(o,n,i);const a=(0,s.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(n);i.unpackedShape.length<=e.unpackedShape.length&&(i.isPacked?t[a]=this.getPackedSamplerAtOutputCoords(a,i,e,n):t[a]=this.getUnpackedSamplerAtOutputCoords(a,i,e,n))})),t}getPackedSamplerAtOutputCoords(t,e,n,o){const a=e.unpackedShape,c=n.unpackedShape,l=o,u=(0,s.generateShaderFuncNameFromInputSamplerName)(l),h=a.length,d=c.length,p=r.BroadcastUtil.getBroadcastDims(a,c),f=(0,s.getCoordsDataType)(d),m=d-h;let g;const y=(0,s.getGlChannels)();g=0===h?"":d<2&&p.length>=1?"coords = 0;":p.map((t=>"coords.".concat(y[t+m]," = 0;"))).join("\n");let v="";v=d<2&&h>0?"coords":a.map(((t,e)=>"coords.".concat(y[e+m]))).join(", ");let b="return outputValue;";const x=1===r.ShapeUtil.size(a),_=1===r.ShapeUtil.size(c);if(1!==h||x||_){if(x&&!_)b=1===d?"\n          return vec4(outputValue.x, outputValue.x, 0., 0.);\n        ":"\n          return vec4(outputValue.x);\n        ";else if(p.length){const t=h-2,e=h-1;p.indexOf(t)>-1&&p.indexOf(e)>-1?b="return vec4(outputValue.x);":p.indexOf(t)>-1?b="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":p.indexOf(e)>-1&&(b="return vec4(outputValue.xx, outputValue.zz);")}}else b="\n        return vec4(outputValue.xy, outputValue.xy);\n      ";const w="\n      vec4 ".concat(t,"() {\n        ").concat(f," coords = getOutputCoords();\n        \n        int lastDim = coords.").concat(y[d-1],";\n        coords.").concat(y[d-1]," = coords.").concat(y[d-2],";\n        coords.").concat(y[d-2]," = lastDim;\n      \n        ").concat(g,"\n        vec4 outputValue = ").concat(u,"(").concat(v,");\n        ").concat(b,"\n      }\n    ");return new i.GlslLibRoutine(w,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(t,e,n,o){const a=[n.width,n.height],c=[e.width,e.height],l=e.unpackedShape.length,u=n.unpackedShape.length,h=e.unpackedShape,d=n.unpackedShape,p=(0,s.generateShaderFuncNameFromInputSamplerName)(o);if(l===u&&r.ArrayUtil.arraysEqual(c,a)){const e="\n          float ".concat(t,"() {\n            return sampleTexture(").concat(o,", TexCoords);\n          }\n        ");return new i.GlslLibRoutine(e,["coordinates.sampleTexture"])}const f=(0,s.getCoordsDataType)(u),m=r.BroadcastUtil.getBroadcastDims(h,d),g=u-l;let y;const v=(0,s.getGlChannels)();y=0===l?"":u<2&&m.length>=1?"coords = 0;":m.map((t=>"coords.".concat(v[t+g]," = 0;"))).join("\n");let b="";b=u<2&&l>0?"coords":e.unpackedShape.map(((t,e)=>"coords.".concat(v[e+g]))).join(", ");const x="\n        float ".concat(t,"() {\n          ").concat(f," coords = getOutputCoords();\n          ").concat(y,"\n          return ").concat(p,"(").concat(b,");\n        }\n      ");return new i.GlslLibRoutine(x,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(t,e,n){switch(n.unpackedShape.length){case 0:return this.getPackedSamplerScalar(t,e);case 1:return this.getPackedSampler1D(t,e,n);case 2:return this.getPackedSampler2D(t,e,n);case 3:return this.getPackedSampler3D(t,e,n);default:return this.getPackedSamplerND(t,e,n)}}getUnpackedSamplerFromInput(t,e,n){const r=n.unpackedShape;switch(r.length){case 0:return this.getUnpackedSamplerScalar(t,e,n);case 1:return this.getUnpackedSampler1D(t,e,n);case 2:return this.getUnpackedSampler2D(t,e,n);case 3:return this.getUnpackedSampler3D(t,e,n);case 4:return this.getUnpackedSampler4D(t,e,n);case 5:return this.getUnpackedSampler5D(t,e,n);case 6:return this.getUnpackedSampler6D(t,e,n);default:throw new Error("Unsupported dimension ".concat(r.length,"-D"))}}getPackedSamplerScalar(t,e){const n="\n          vec4 ".concat(t,"() {\n            return ").concat((0,o.getGlsl)(this.context.glContext.version).texture2D,"(").concat(e,", halfCR);\n          }\n        ");return new i.GlslLibRoutine(n)}getPackedSampler1D(t,e,n){const r=[n.width,n.height],a=[r[1],r[0]],s=(0,o.getGlsl)(this.context.glContext.version),c="vec4 ".concat(t,"(int index) {\n      vec2 uv = packedUVfrom1D(\n      ").concat(a[0],", ").concat(a[1],", index);\n      return ").concat(s.texture2D,"(").concat(e,", uv);\n    }");return new i.GlslLibRoutine(c,["coordinates.packedUVfrom1D"])}getPackedSampler2D(t,e,n){const a=n.unpackedShape,s=[n.width,n.height],c=(0,o.getGlsl)(this.context.glContext.version),l=s[0],u=s[1];if(null!=s&&r.ArrayUtil.arraysEqual(a,s)){const n="vec4 ".concat(t,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(u,".0, ").concat(l,".0);\n        return ").concat(c.texture2D,"(").concat(e,", uv);\n      }");return new i.GlslLibRoutine(n)}const h=s,d=Math.ceil(a[1]/2),p="vec4 ".concat(t,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(h[1],", ").concat(h[0],", ").concat(d,", row, col);\n      return ").concat(c.texture2D,"(").concat(e,", uv);\n    }");return new i.GlslLibRoutine(p,["coordinates.packedUVfrom2D"])}getPackedSampler3D(t,e,n){const r=n.unpackedShape,a=[n.width,n.height],c=[a[0],a[1]],l=(0,o.getGlsl)(this.context.glContext.version);if(1===r[0]){const o=r.slice(1),a=[1,2],c=(0,s.squeezeInputShape)(r,o),l=["b","row","col"],u=JSON.parse(JSON.stringify(n));u.unpackedShape=c;const h=this.getPackedSamplerFromInput(t,e,u),d="".concat(h.routineBody,"\n      vec4 ").concat(t,"(int b, int row, int col) {\n        return ").concat(t,"(").concat((0,s.getSqueezedParams)(l,a),");\n      } ");return new i.GlslLibRoutine(d,h.dependencies)}const u=c[0],h=c[1],d=Math.ceil(r[2]/2),p="vec4 ".concat(t,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(h,", ").concat(u,", ").concat(d*Math.ceil(r[1]/2),", ").concat(d,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(e,", uv);}");return new i.GlslLibRoutine(p,["coordinates.packedUVfrom3D"])}getPackedSamplerND(t,e,n){const r=n.unpackedShape,a=r.length,s=[n.width,n.height],c=(0,o.getGlsl)(this.context.glContext.version),l=[s[0],s[1]],u=l[1],h=l[0],d=Math.ceil(r[a-1]/2);let p=d*Math.ceil(r[a-2]/2),f="int b, int row, int col",m="b * ".concat(p," + (row / 2) * ").concat(d," + (col / 2)");for(let i=2;i<a-1;i++)f="int b".concat(i,", ")+f,p*=r[a-i-1],m="b".concat(i," * ").concat(p," + ")+m;const g="vec4 ".concat(t,"(").concat(f,") {\n      int index = ").concat(m,";\n      int texR = index / ").concat(h,";\n      int texC = index - texR * ").concat(h,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,", ").concat(u,");\n      return ").concat(c.texture2D,"(").concat(e,", uv);\n    }");return new i.GlslLibRoutine(g)}getUnpackedSamplerScalar(t,e,n){const[r,o]=[n.width,n.height];if(1===r&&1===o){const n="\n          float ".concat(t,"() {\n            return sampleTexture(").concat(e,", halfCR);\n          }\n        ");return new i.GlslLibRoutine(n,["coordinates.sampleTexture"])}const a="\n        float ".concat(t,"() {\n          int offset_").concat(e," = coordsToOffset(TexCoords, ").concat(r,", ").concat(o,");\n          vec2 uv = uvFromFlat(").concat(r,", ").concat(o,", offset_").concat(e,");\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new i.GlslLibRoutine(a,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(t,e,n){const r=n.width,o=n.height;if(1===o&&1===r){const n="\n        float ".concat(t,"(int index) {\n          return sampleTexture(").concat(e,", halfCR);\n        }\n      ");return new i.GlslLibRoutine(n,["coordinates.sampleTexture"])}if(1===o){const n="\n          float ".concat(t,"(int index) {\n            vec2 uv = vec2((float(index) + 0.5) / ").concat(r,".0, 0.5);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new i.GlslLibRoutine(n,["coordinates.sampleTexture"])}if(1===r){const n="\n          float ".concat(t,"(int index) {\n            vec2 uv = vec2(0.5, (float(index) + 0.5) / ").concat(o,".0);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new i.GlslLibRoutine(n,["coordinates.sampleTexture"])}const a="\n        float ".concat(t,"(int index) {\n          vec2 uv = uvFromFlat(").concat(r,", ").concat(o,", index);\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new i.GlslLibRoutine(a,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(t,e,n){const o=n.unpackedShape,c=[n.height,n.width];if(null!=c&&r.ArrayUtil.arraysEqual(o,c)){const n="\n          float ".concat(t,"(int row, int col) {\n            vec2 uv = (vec2(row, col) + halfCR) / vec2(").concat(c[1],".0, ").concat(c[0],".0);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new i.GlslLibRoutine(n,["coordinates.sampleTexture"])}const{newShape:l,keptDims:u}=(0,a.squeezeShape)(o),h=l;if(h.length<o.length){const r=(0,s.squeezeInputShape)(o,h),a=JSON.parse(JSON.stringify(n));a.unpackedShape=r;const c=["col","row"],l="\n          ".concat(this.getUnpackedSamplerFromInput(t,e,a).routineBody,"\n          float ").concat(t,"(int row, int col) {\n            return ").concat(t,"(").concat((0,s.getSqueezedParams)(c,u),");\n          }\n        ");return new i.GlslLibRoutine(l,["coordinates.sampleTexture"])}const d=c[1],p=c[0];if(1===p){const n="\n          float ".concat(t,"(int row, int col) {\n            int offset_").concat(e," = coordsToOffset(TexCoords, ").concat(d,", ").concat(p,");\n            float index = dot(vec3(row, col, offset_").concat(e,"), vec3(").concat(o[1],", 1, 1));\n            vec2 uv = vec2(0.5, (index + 0.5) / ").concat(d,".0);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new i.GlslLibRoutine(n,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(1===d){const n="\n          float ".concat(t,"(int row, int col) {\n            int offset_").concat(e," = coordsToOffset(TexCoords, ").concat(d,", ").concat(p,");\n            float index = dot(vec3(row, col, offset_").concat(e,"), vec3(").concat(o[1],", 1, 1));\n            vec2 uv = vec2((index + 0.5) / ").concat(p,".0, 0.5);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new i.GlslLibRoutine(n,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const f="\n        float ".concat(t,"(int row, int col) {\n          int index = col * ").concat(o[1]," + row;\n          vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new i.GlslLibRoutine(f,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(t,e,n){const r=n.unpackedShape,o=r[1]*r[2],c=r[2],{newShape:l,keptDims:u}=(0,a.squeezeShape)(r),h=l;if(h.length<r.length){const o=(0,s.squeezeInputShape)(r,h),a=["batch","col","row"],c=JSON.parse(JSON.stringify(n));c.unpackedShape=o;const l=this.getUnpackedSamplerFromInput(t,e,c),d=u.reverse(),p="\n          ".concat(l.routineBody,"\n          float ").concat(t,"(int batch, int row, int col) {\n            return ").concat(t,"(").concat((0,s.getSqueezedParams)(a,d),");\n          }\n        ");return new i.GlslLibRoutine(p,l.dependencies)}const d="\n          float ".concat(t,"(int depth, int row, int col) {\n            // Explicitly use integer operations as dot() only works on floats.\n            int index = depth * ").concat(o," + col * ").concat(c," + row;\n            vec2 uv = uvFromFlat(").concat(n.width,", ").concat(n.height,", index);\n            return sampleTexture(").concat(e,", uv);\n          }\n      ");return new i.GlslLibRoutine(d,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(t,e,n){const r=n.unpackedShape,o=r[3],a=r[2]*o,s="\n        float ".concat(t,"(int row, int col, int depth, int depth2) {\n          int index = row * ").concat(r[1]*a," + col * ").concat(a," +\n              depth2 * ").concat(o," + depth;\n          vec2 uv = uvFromFlat(").concat(n.width,", ").concat(n.height,", index);\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new i.GlslLibRoutine(s,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(t,e,n){const r=n.unpackedShape,o=r[4],c=r[3]*o,l=r[2]*c,u=r[1]*l,{newShape:h,keptDims:d}=(0,a.squeezeShape)(r);if(h.length<r.length){const o=(0,s.squeezeInputShape)(r,h),a=["row","col","depth","depth2","depth3"],c=JSON.parse(JSON.stringify(n));c.unpackedShape=o;const l="\n          ".concat(this.getUnpackedSamplerFromInput(t,e,c).routineBody,"\n          float ").concat(t,"(int row, int col, int depth, int depth2, int depth3) {\n            return ").concat(t,"(").concat((0,s.getSqueezedParams)(a,d),");\n          }\n        ");return new i.GlslLibRoutine(l,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const p="\n        float ".concat(t,"(int row, int col, int depth, int depth2, int depth3) {\n          int index = row * ").concat(u," + col * ").concat(l," + depth * ").concat(c," +\n          depth3 * ").concat(o," + depth2;\n          vec2 uv = uvFromFlat(").concat(n.width,", ").concat(n.height,", index);\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new i.GlslLibRoutine(p,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(t,e,n){const r=n.unpackedShape,o=r[5],c=r[4]*o,l=r[3]*c,u=r[2]*l,h=r[1]*u,{newShape:d,keptDims:p}=(0,a.squeezeShape)(r);if(d.length<r.length){const o=(0,s.squeezeInputShape)(r,d),a=["row","col","depth","depth2","depth3","depth4"],c=JSON.parse(JSON.stringify(n));c.unpackedShape=o;const l="\n            ".concat(this.getUnpackedSamplerFromInput(t,e,c).routineBody,"\n            float ").concat(t,"(int row, int col, int depth,\n              int depth2, int depth3, int depth4) {\n              return ").concat(t,"(").concat((0,s.getSqueezedParams)(a,p),");\n            }\n          ");return new i.GlslLibRoutine(l,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const f="\n          float ".concat(t,"(int row, int col, int depth,\n            int depth2, int depth3, int depth4) {\n            int index = row * ").concat(h," + col * ").concat(u," + depth * ").concat(l," +\n            depth2 * ").concat(c," + depth3 * ").concat(o," + depth4;\n            vec2 uv = uvFromFlat(").concat(n.width,", ").concat(n.height,", index);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new i.GlslLibRoutine(f,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const t=this.context.outputTextureLayout,e=t.shape.length,n=t.strides,r=t.width,o=t.height,a=[];for(let i=0;i<e-1;++i)a.push("\n        c[".concat(i,"] = offset / ").concat(n[i],";")),a.push("\n        offset -= c[".concat(i,"] * ").concat(n[i],";"));a.push("\n        c[".concat(e-1,"] = offset;"));const s="\n      void toVec(vec2 texCoords, out int c[".concat(e,"]) {\n        int offset = coordsToOffset(texCoords, ").concat(r,", ").concat(o,");\n        ").concat(a.join(""),"\n      }\n      void toVec(int offset, out int c[").concat(e,"]) {\n        ").concat(a.join(""),"\n      }\n    ");return{toVec:new i.GlslLibRoutine(s,["coordinates.coordsToOffset"])}}valueFrom(){const t={};return this.context.programInfo.inputNames.forEach(((e,n)=>{const r=this.context.inputTextureLayouts[n],o=(r.unpackedShape.length>0?r.unpackedShape:r.shape).length;let a="_".concat(e);t[a]=new i.GlslLibRoutine(this.getValueFromSingle(e,o,r.width,r.height,!1),["shapeUtils.indicesToOffset".concat(a),"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),a+="_T",t[a]=new i.GlslLibRoutine(this.getValueFromSingle(e,o,r.width,r.height,!0),["shapeUtils.indicesToOffset".concat(a),"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])})),t}getValueFromSingle(t,e,n,r,i){let a="_".concat(t);return i&&(a+="_T"),"\n        float ".concat(a,"(int m[").concat(e,"]) {\n          int offset = indicesToOffset").concat(a,"(m);\n          vec2 coords = offsetToCoords(offset, ").concat(n,", ").concat(r,");\n          float value = getColorAsFloat(").concat((0,o.getGlsl)(this.context.glContext.version).texture2D,"(").concat(t,", coords));\n          return value;\n        }\n        ")}getPackedValueFrom(t,e,n,r,i){let a="_".concat(t,"_Pack");return i&&(a+="_T"),"\n        vec4 ".concat(a,"(int m[").concat(e,"]) {\n          int offset = indicesToOffset_").concat(t,"(m);\n          vec2 coords = offsetToCoords(offset, ").concat(n,", ").concat(r,");\n          return ").concat((0,o.getGlsl)(this.context.glContext.version).texture2D,"(").concat(t,", coords);\n        }\n        ")}}e.CoordsGlslLib=c},8520:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,(n=e.FunctionType||(e.FunctionType={}))[n.ValueBased=0]="ValueBased",n[n.Positional=1]="Positional",e.GlslContext=class{constructor(t,e,n,r){this.glContext=t,this.programInfo=e,this.inputTextureLayouts=n,this.outputTextureLayout=r}},e.GlslLib=class{constructor(t){this.context=t}},e.GlslLibRoutine=class{constructor(t,e){this.routineBody=t,this.dependencies=e}},e.GlslLibRoutineNode=class{constructor(t,e,n){this.name=t,this.dependencies=n||[],e&&(this.routineBody=e)}addDependency(t){t&&this.dependencies.push(t)}},e.TopologicalSortGlslRoutines=class{static returnOrderedNodes(t){if(!t||0===t.length)return[];if(1===t.length)return t;const e=new Set,n=new Set,r=new Array;return this.createOrderedNodes(t,e,n,r),r}static createOrderedNodes(t,e,n,r){for(let i=0;i<t.length;++i)this.dfsTraverse(t[i],e,n,r)}static dfsTraverse(t,e,n,r){if(!t||n.has(t.name))return;if(e.has(t.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");e.add(t.name);const i=t.dependencies;if(i&&i.length>0)for(let o=0;o<i.length;++o)this.dfsTraverse(i[o],e,n,r);r.push(t),n.add(t.name),e.delete(t.name)}}},7341:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;const r=n(8520);class i extends r.GlslLib{constructor(t){super(t)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new r.GlslLibRoutine("highp vec4 encode(highp float f) {\n        return vec4(f, 0.0, 0.0, 0.0);\n      }\n        ")}}decodeFloat32(){return{decode:new r.GlslLibRoutine("highp float decode(highp vec4 rgba) {\n        return rgba.r;\n      }\n        ")}}encodeUint8(){const t=i.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new r.GlslLibRoutine("\n      highp vec4 encode(highp float f) {\n        highp float F = abs(f);\n        highp float Sign = step(0.0,-f);\n        highp float Exponent = floor(log2(F));\n        highp float Mantissa = (exp2(- Exponent) * F);\n        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));\n        highp vec4 rgba;\n        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));\n        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);\n        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));\n        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));\n        ".concat(t,"\n        rgba = rgba / 255.0; // values need to be normalized to [0,1]\n        return rgba;\n    }\n        "))}}decodeUint8(){const t=i.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new r.GlslLibRoutine("\n        highp float decode(highp vec4 rgba) {\n          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]\n          ".concat(t,"\n          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;\n          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;\n          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);\n          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));\n          return Result;\n      }\n        "))}}static isLittleEndian(){const t=new ArrayBuffer(4),e=new Uint32Array(t),n=new Uint8Array(t);if(e[0]=3735928559,239===n[0])return!0;if(222===n[0])return!1;throw new Error("unknown endianness")}}e.EncodingGlslLib=i},9894:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;const r=n(8520),i=n(5060);class o extends r.GlslLib{constructor(t){super(t)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const t=(0,i.getGlsl)(this.context.glContext.version);return{setFragColor:new r.GlslLibRoutine("\n        void setFragColor(float value) {\n            ".concat(t.output," = encode(value);\n        }\n        "),["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new r.GlslLibRoutine("\n        float getColorAsFloat(vec4 color) {\n            return decode(color);\n        }\n        ",["encoding.decode"])}}}e.FragColorGlslLib=o},2848:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;const n=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(t){const e={};let r;for(;null!==(r=n.exec(t));){const t=r[3].split(",").map((t=>{const e=t.trim().split(" ");return e&&2===e.length?{type:e[0],name:e[1]}:null})).filter((t=>null!==t));e[r[2]]={params:t,body:r[4]}}for(const n in e){const i="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",n),o=new RegExp(i,"gm");for(;null!==(r=o.exec(t));){const i=r[1],o=r[2],a=r[3].split(","),s=i?"".concat(i," ").concat(o,";"):"";let c=e[n].body,l="";e[n].params.forEach(((t,e)=>{t&&(l+="".concat(t.type," ").concat(t.name," = ").concat(a[e],";\n"))})),c="".concat(l,"\n ").concat(c),c=c.replace("return","".concat(o," = "));const u="\n      ".concat(s,"\n      {\n        ").concat(c,"\n      }\n      ");t=t.replace(r[0],u)}}return t.replace(n,"")}},8879:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;const r=n(8520),i=n(2848),o=n(5483),a=n(5060);e.GlslPreprocessor=class{constructor(t,e,n,i){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new r.GlslContext(t,e,n,i),Object.keys(o.glslRegistry).forEach((t=>{const e=new o.glslRegistry[t](this.context);this.libs[t]=e}));const a=this.glslLibRoutineDependencyGraph;for(const o in this.libs){const t=this.libs[o].getFunctions();for(const e in t){const n=o+"."+e;let i;a[n]?(i=a[n],i.routineBody=t[e].routineBody):(i=new r.GlslLibRoutineNode(n,t[e].routineBody),a[n]=i);const s=t[e].dependencies;if(s)for(let t=0;t<s.length;++t)if(a[s[t]])i.addDependency(a[s[t]]);else{const e=new r.GlslLibRoutineNode(s[t]);a[s[t]]=e,i.addDependency(e)}}}}preprocess(){const t=this.context.programInfo;let e=t.shaderSource;return this.context.programInfo.hasMain||(e="".concat(e,"\n      ").concat((0,a.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length))),e=(0,i.replaceInlines)(e),"".concat((0,a.getFragShaderPreamble)(this.context.glContext.version),"\n    ").concat(this.getUniforms(t.inputNames,t.variables),"\n    ").concat(this.getImports(e),"\n    ").concat(e)}getImports(t){const e=this.selectGlslLibRoutinesToBeIncluded(t);if(0===e.length)return"";let n="";for(let r=0;r<e.length;++r){if(!e[r].routineBody)throw new Error("Missing body for the Glsl Library routine: ".concat(e[r].name));n+=e[r].routineBody+"\n"}return n}selectGlslLibRoutinesToBeIncluded(t){const e=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach((n=>{const r=n.split(".")[1];-1!==t.indexOf(r)&&e.push(this.glslLibRoutineDependencyGraph[n])})),r.TopologicalSortGlslRoutines.returnOrderedNodes(e)}getUniforms(t,e){const n=[];if(t)for(const r of t)n.push("uniform sampler2D ".concat(r,";"));if(e)for(const r of e)n.push("uniform ".concat(r.type," ").concat(r.name).concat(r.arrayLength?"[".concat(r.arrayLength,"]"):"",";"));return n.join("\n")}}},5483:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;const r=n(5107),i=n(7341),o=n(9894),a=n(2655),s=n(3891);e.glslRegistry={encoding:i.EncodingGlslLib,fragcolor:o.FragColorGlslLib,vec:s.VecGlslLib,shapeUtils:a.ShapeUtilsGlslLib,coordinates:r.CoordsGlslLib}},2655:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;const r=n(8520);class i extends r.GlslLib{constructor(t){super(t)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const t=this.context.outputTextureLayout.shape.length,e={};return this.context.programInfo.inputNames.forEach(((n,i)=>{const o=this.context.inputTextureLayouts[i].unpackedShape;if(o.length<=t){const i=o.length,a=t-i,s="bcastIndices_".concat(n);let c="";for(let t=0;t<i;++t)c+="\n          realIndices[".concat(t,"] = int( mod(float(bcastedIndices[").concat(a+t,"]), ").concat(o[t],".0) );\n          ");const l="\n        void ".concat(s," (int bcastedIndices[").concat(t,"], out int realIndices[").concat(i,"]) {\n          ").concat(c,"\n        }\n        ");e[s]=new r.GlslLibRoutine(l)}})),e}bcastMatmulIndex(){const t=this.context.outputTextureLayout.shape.length,e={};return this.context.programInfo.inputNames.forEach(((n,i)=>{const o=this.context.inputTextureLayouts[i].shape;if(!(o.length<2||o.length>t)){const i=o.length,a=t-i,s="bcastMatmulIndices_".concat(n);let c="";for(let t=0;t<i-2;++t)c+="\n          realIndices[".concat(t,"] = int( mod(float(bcastedIndices[").concat(a+t,"]), ").concat(o[t],".0) );\n          ");const l="\n        void ".concat(s,"(int bcastedIndices[").concat(t,"], out int realIndices[").concat(i,"]) {\n          ").concat(c,"\n          realIndices[").concat(i-1,"] = bcastedIndices[").concat(t-1,"];\n          realIndices[").concat(i-2,"] = bcastedIndices[").concat(t-2,"];\n        }\n        ");e[s]=new r.GlslLibRoutine(l)}})),e}indicesToOffset(){const t={};return this.context.programInfo.inputNames.forEach(((e,n)=>{const o=this.context.inputTextureLayouts[n].shape,a=this.context.inputTextureLayouts[n].strides,s=o.length;let c="indicesToOffset_".concat(e);t[c]=new r.GlslLibRoutine(i.indexToOffsetSingle(c,s,a)),c="indicesToOffset_".concat(e,"_T"),t[c]=new r.GlslLibRoutine(i.indexToOffsetSingle(c,s,a.slice().reverse()))})),t}static indexToOffsetSingle(t,e,n){let r="";for(let i=e-1;i>=0;--i)r+="\n        offset += indices[".concat(i,"] * ").concat(n[i],";\n        ");return"\n      int ".concat(t,"(int indices[").concat(e,"]) {\n        int offset = 0;\n        ").concat(r,"\n        return offset;\n      }\n      ")}offsetToIndices(){const t={};return this.context.programInfo.inputNames.forEach(((e,n)=>{const o=this.context.inputTextureLayouts[n].shape,a=this.context.inputTextureLayouts[n].strides,s=o.length;let c="offsetToIndices_".concat(e);t[c]=new r.GlslLibRoutine(i.offsetToIndicesSingle(c,s,a)),c="offsetToIndices_".concat(e,"_T"),t[c]=new r.GlslLibRoutine(i.offsetToIndicesSingle(c,s,a.slice().reverse()))})),t}static offsetToIndicesSingle(t,e,n){const r=[];for(let i=0;i<e-1;++i)r.push("\n      indices[".concat(i,"] = offset / ").concat(n[i],";")),r.push("\n        offset -= indices[".concat(i,"] * ").concat(n[i],";"));return r.push("\n      indices[".concat(e-1,"] = offset;")),"\n      void ".concat(t,"(int offset, out int indices[").concat(e,"]) {\n        ").concat(r.join(""),"\n      }\n      ")}incrementIndices(){const t={};return this.context.programInfo.inputNames.forEach(((e,n)=>{const i=this.context.inputTextureLayouts[n].shape,o=i.length,a="incrementIndices_".concat(e);let s="";for(let t=0;t<o;++t)s+="\n        shape[".concat(t,"] = ").concat(i[t],";");const c="\n        void ".concat(a,"(int axis, out int indices[").concat(o,"]) {\n          int shape[").concat(o,"];\n          ").concat(s,";\n          for(int i = ").concat(o," -1 ; i >= 0; --i) {\n            if(i > axis) continue;\n            indices[i] += 1;\n            if(indices[i] < shape[i]) {\n              break;\n            }\n            indices[i] = 0;\n          }\n        }\n        ");t[a]=new r.GlslLibRoutine(c)})),t}}e.ShapeUtilsGlslLib=i},5060:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;const n={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},r={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function i(t){return 1===t?n:r}e.getGlsl=i,e.getVertexShaderSource=function(t){const e=i(t);return"".concat(e.version,"\n      precision highp float;\n      ").concat(e.attribute," vec3 position;\n      ").concat(e.attribute," vec2 textureCoord;\n\n      ").concat(e.varyingVertex," vec2 TexCoords;\n\n      void main()\n      {\n          gl_Position = vec4(position, 1.0);\n          TexCoords = textureCoord;\n      }")},e.getFragShaderPreamble=function(t){const e=i(t);return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFrag," vec2 TexCoords;\n    ").concat(e.outputDeclaration,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    // Custom vector types to handle higher dimenalities.\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    ")},e.getDefaultFragShaderMain=function(t,e){return"\n  void main() {\n    int indices[".concat(e,"];\n    toVec(TexCoords, indices);\n    vec4 result = vec4(process(indices));\n    ").concat(i(t).output," = result;\n  }\n  ")}},3891:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;const r=n(8520);class i extends r.GlslLib{constructor(t){super(t)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const t=this.context.outputTextureLayout.shape.length,e={add:"+=",sub:"-=",mul:"*=",div:"/="},n={};for(const i in e){const o="".concat(i,"Vec");let a="";for(let n=0;n<t;++n)a+="\n          dest[".concat(n,"] ").concat(e[i]," src[").concat(n,"];\n          ");const s="\n        void ".concat(o,"(int src[").concat(t,"], out int dest[").concat(t,"]) {\n          ").concat(a,"\n        }\n        ");n[o]=new r.GlslLibRoutine(s)}return n}copyVec(){const t=this.context.outputTextureLayout.shape.length;let e="";for(let r=0;r<t;++r)e+="\n        dest[".concat(r,"] = src[").concat(r,"];\n        ");const n="\n      void copyVec(int src[".concat(t,"], out int dest[").concat(t,"]) {\n        ").concat(e,"\n      }\n      ");return{copyVec:new r.GlslLibRoutine(n)}}setVecItem(){const t=this.context.outputTextureLayout.shape.length;let e="\n        if(index < 0)\n            index =".concat(t," + index;\n        if (index == 0)\n            m[0] = value;\n        ");for(let r=1;r<t-1;++r)e+="\n        else if (index == ".concat(r,")\n            m[").concat(r,"] = value;\n            ");e+="\n        else\n            m[".concat(t-1,"] = value;\n        ");const n="\n      void setVecItem(out int m[".concat(t,"], int index, int value) {\n        ").concat(e,"\n      }\n        ");return{setVecItem:new r.GlslLibRoutine(n)}}getVecItem(){const t=this.context.outputTextureLayout.shape.length;let e="\n        if(index < 0)\n            index = ".concat(t," + index;\n        if (index == 0)\n            return m[0];\n      ");for(let r=1;r<t-1;++r)e+="\n        else if (index == ".concat(r,")\n            return m[").concat(r,"];\n      ");e+="\n        else\n            return m[".concat(t-1,"];\n        ");const n="\n      int getVecItem(int m[".concat(t,"], int index) {\n        ").concat(e,"\n      }\n    ");return{getVecItem:new r.GlslLibRoutine(n)}}}e.VecGlslLib=i},8316:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;const r=n(6231),i=n(9162),o=n(2517),a=n(2403),s=n(7019),c=n(8710),l=n(5611),u=n(4057),h=n(2039);e.WebGLInferenceHandler=class{constructor(t){this.session=t,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(t,e){return(0,u.calculateTextureWidthAndHeight)(this.session.layoutStrategy,t,e)}executeProgram(t,e){if(e.length<t.inputNames.length)throw new Error("Input size mustn't be less than ".concat(t.inputNames.length,"."));if(t.inputNames.length!==t.inputTypes.length)throw new Error("input names size does not match input types");const n=[];for(let c=0;c<t.inputNames.length;++c)n[c]=this.getOrCreateTextureData(e[c],t.inputTypes[c]);const r=((t,e)=>{const n=e.map((t=>"".concat(t.unpackedShape.join(","),";").concat(t.width,"x").concat(t.height))).join("_");let r=t.name;return t.cacheHint&&(r+="["+t.cacheHint+"]"),r+=":"+n,r})(t,n);let i=this.session.programManager.getArtifact(r);const o=i?i.programInfo:"function"==typeof t.get?t.get():t,a=(0,u.createTextureLayoutFromTextureType)(this.session.layoutStrategy,o.output.dims,o.output.textureType),s=this.createTextureData(a,o.output.type);return i||(i=this.session.programManager.build(o,n,s),this.session.programManager.setArtifact(r,i)),this.runProgram(i,n,s),s}run(t,e){return this.executeProgram(t,e).tensor}runProgram(t,e,n){for(let r=0;r<e.length;++r)if(!!e[r].isPacked!=(t.programInfo.inputTypes[r]===h.TextureType.packed))throw new Error("input[".concat(r,"] property packed inconsistent"));if(!!n.isPacked!=(t.programInfo.output.textureType===h.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(t,e,n)}getOrCreateTextureData(t,e){let n=this.getTextureData(t.dataId,e===h.TextureType.packed);if(!n&&(n=this.getTextureData(t.dataId,e!==h.TextureType.packed),n))return e===h.TextureType.packed?this.pack(n):this.unpack(n);if(!n){const r=(0,u.createTextureLayoutFromTextureType)(this.session.layoutStrategy,t.dims,e);if(e===h.TextureType.packedLastDimension){const n=1,r=4,i=t.dims;if(4===i.length){const o=[i[0],Math.ceil(i[1]*i[2]*i[3]/r)],a=(0,u.createTextureLayoutFromTextureType)(this.session.layoutStrategy,o,e);let s=t.numberData;if(i[1]*i[2]*i[3]%r!=0){const e=i[0],o=i[1]*i[2]*i[3],a=Math.ceil(o*n/r)*r;s=new Float32Array(e*a);for(let r=0;r<e;++r){const e=r*o,i=r*a+r%n*o;s.set(t.numberData.subarray(e,e+o),i)}}return this.createTextureData(a,t.type,s,t,1)}}if(e===h.TextureType.packed){const e=(0,u.createTextureLayoutFromShape)(this.session.layoutStrategy,t.dims,1,[],{reverseWH:!0}),r=this.createTextureData(e,t.type,t.numberData,t,1);n=this.pack(r)}else n=this.createTextureData(r,t.type,t.numberData,t,1)}return n}createTextureDataFromLayoutBindTensor(t,e,n,r){return this.createTextureData(t,e,n,r,1)}createTextureData(t,e,n,i,o){r.Logger.verbose("InferenceHandler","Creating TextureData: layout:[".concat(JSON.stringify(t),"]"));const a=this.session.textureManager.createTextureFromLayout(e,t,n,o);return this.createTextureDataFromTexture(t,e,a,i)}reshapeUnpacked(t,e){const n=this.getOrCreateTextureData(t,h.TextureType.unpacked),r={channels:n.channels,height:n.height,width:n.width,shape:0!==e.length?e:[1],strides:o.ShapeUtil.computeStrides(e),unpackedShape:e};return this.createTextureDataFromTexture(r,t.type,n.texture).tensor}reshapePacked(t,e){const n=this.getOrCreateTextureData(t,h.TextureType.packed);if((0,s.isReshapeCheap)(t.dims,e)){const r={channels:n.channels,height:n.height,width:n.width,shape:0!==e.length?e:[1],strides:o.ShapeUtil.computeStrides(e),unpackedShape:e,isPacked:!0};return this.createTextureDataFromTexture(r,t.type,n.texture).tensor}const r=(0,s.processDims3D)(t.dims),i=(0,s.processDims3D)(e),a=this.reshapePacked(t,r),c=this.run((0,s.createPackedReshape3DProgramInfoLoader)(this,a,i),[a]);return this.reshapePacked(c,e)}cast(t,e){const n=this.getOrCreateTextureData(t,h.TextureType.unpacked);return this.createTextureDataFromTexture(n,e,n.texture).tensor}createTextureDataFromTexture(t,e,n,r,o){const a=Object.assign(Object.assign({},t),{tensor:r||new i.Tensor(t.unpackedShape,e,(t=>this.readTexture(a)),(async t=>this.readTextureAsync(a)),void 0,o),texture:n});return this.setTextureData(a.tensor.dataId,a,t.isPacked),a}getTextureData(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.session.isInitializer(t)?this.session.getTextureData(t,e):e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.session.isInitializer(t)?this.session.setTextureData(t,e,n):(n?this.packedTextureDataCache:this.unpackedTextureDataCache).set(t,e)}isTextureLayoutCached(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!!this.getTextureData(t.dataId,e)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((t=>this.session.textureManager.releaseTexture(t))),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((t=>this.session.textureManager.releaseTexture(t))),this.unpackedTextureDataCache=new Map}readTexture(t){return t.isPacked?this.readTexture(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat((0,c.encodeAsUint8)(this,t))}async readTextureAsync(t){return t.isPacked?this.readTextureAsync(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat((0,c.encodeAsUint8)(this,t))}pack(t){return this.executeProgram((0,a.createPackProgramInfoLoader)(this,t.tensor),[t.tensor])}unpack(t){return this.executeProgram((0,l.createUnpackProgramInfoLoader)(this,t.tensor),[t.tensor])}}},1640:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;const a=n(2898),s=o(n(7839)),c=n(4196),l=n(2069),u=n(8138),h=n(9663),d=n(5193),p=n(7992),f=n(1253),m=n(4776),g=n(6572),y=n(3346),v=n(5623),b=n(2870),x=n(2143),_=n(4939),w=n(718),S=n(2268),T=n(8117),E=n(2278),A=n(5524),M=n(5975),O=n(3933),C=n(6558),k=n(5723),P=n(3738),I=o(n(4909)),N=n(8428),R=n(9793);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",I.abs],["Acos","","7+",I.acos],["Add","","7+",s.add],["And","","7+",s.and],["Asin","","7+",I.asin],["Atan","","7+",I.atan],["AveragePool","","7+",x.averagePool,x.parseAveragePoolAttributes],["BatchNormalization","","7+",a.batchNormalization,a.parseBatchNormalizationAttributes],["Cast","","6+",c.cast,c.parseCastAttributes],["Ceil","","6+",I.ceil],["Clip","","6-10",I.clip,I.parseClipAttributes],["Clip","","11+",I.clipV11],["Concat","","4+",l.concat,l.parseConcatAttributes],["Conv","","1+",u.conv,u.parseConvAttributes],["ConvTranspose","","1+",h.convTranspose,h.parseConvTransposeAttributes],["Cos","","7+",I.cos],["Div","","7+",s.div],["Dropout","","7+",I.identity],["DepthToSpace","","1+",d.depthToSpace,d.parseDepthToSpaceAttributes],["Equal","","7+",s.equal],["Elu","","6+",I.elu,I.parseEluAttributes],["Exp","","6+",I.exp],["Flatten","","1+",p.flatten,p.parseFlattenAttributes],["Floor","","6+",I.floor],["FusedConv","com.microsoft","1+",u.conv,u.parseConvAttributes],["Gather","","1+",f.gather,f.parseGatherAttributes],["Gemm","","7-10",m.gemm,m.parseGemmAttributesV7],["Gemm","","11+",m.gemm,m.parseGemmAttributesV11],["GlobalAveragePool","","1+",x.globalAveragePool,x.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",x.globalMaxPool],["Greater","","7+",s.greater],["Identity","","1+",I.identity],["ImageScaler","","1+",g.imageScaler,g.parseImageScalerAttributes],["InstanceNormalization","","6+",y.instanceNormalization,y.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",I.leakyRelu,I.parseLeakyReluAttributes],["Less","","7+",s.less],["Log","","6+",I.log],["MatMul","","1+",v.matMul,v.parseMatMulAttributes],["MaxPool","","1+",x.maxPool,x.parseMaxPoolAttributes],["Mul","","7+",s.mul],["Neg","","6+",I.neg],["Not","","1+",I.not],["Or","","7+",s.or],["Pad","","2-10",b.padV2,b.parsePadAttributesV2],["Pad","","11+",b.padV11,b.parsePadAttributesV11],["Pow","","7+",s.pow],["PRelu","","7+",s.pRelu],["ReduceLogSum","","1+",_.reduceLogSum,_.parseReduceAttributes],["ReduceMax","","1+",_.reduceMax,_.parseReduceAttributes],["ReduceMean","","1+",_.reduceMean,_.parseReduceAttributes],["ReduceMin","","1+",_.reduceMin,_.parseReduceAttributes],["ReduceProd","","1+",_.reduceProd,_.parseReduceAttributes],["ReduceSum","","1-12",_.reduceSum,_.parseReduceAttributes],["ReduceSumSquare","","1+",_.reduceLogSumSquare,_.parseReduceAttributes],["Relu","","6+",I.relu],["Reshape","","5+",w.reshape],["Resize","","10",S.resize,S.parseResizeAttributesV10],["Resize","","11+",S.resize,S.parseResizeAttributesV11],["Shape","","1+",T.shape],["Sigmoid","","6+",I.sigmoid],["Sin","","7+",I.sin],["Slice","","10+",E.sliceV10],["Slice","","1-9",E.slice,E.parseSliceAttributes],["Softmax","","1-12",A.softmax,A.parseSoftmaxAttributes],["Softmax","","13+",A.softmaxV13,A.parseSoftmaxAttributesV13],["Split","","2-12",M.split,M.parseSplitAttributes],["Sqrt","","6+",I.sqrt],["Squeeze","","1-12",O.squeeze,O.parseSqueezeAttributes],["Squeeze","","13+",O.squeezeV13],["Sub","","7+",s.sub],["Sum","","6+",C.sum],["Tan","","7+",I.tan],["Tanh","","6+",I.tanh],["Tile","","6+",k.tile],["Transpose","","1+",P.transpose,P.parseTransposeAttributes],["Upsample","","7-8",R.upsample,R.parseUpsampleAttributesV7],["Upsample","","9",R.upsample,R.parseUpsampleAttributesV9],["Unsqueeze","","1-12",N.unsqueeze,N.parseUnsqueezeAttributes],["Unsqueeze","","13+",N.unsqueezeV13],["Xor","","7+",s.xor]]},2898:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseBatchNormalizationAttributes=e.batchNormalization=void 0;const r=n(246),i=n(5060),o=n(2039),a={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[o.TextureType.unpacked,o.TextureType.unpacked,o.TextureType.unpacked,o.TextureType.unpacked,o.TextureType.unpacked]};e.batchNormalization=(t,e,n)=>(c(e),[t.run(Object.assign(Object.assign({},a),{cacheHint:n.cacheKey,get:()=>s(t,e,n)}),e)]),e.parseBatchNormalizationAttributes=t=>{const e=t.attributes.getFloat("epsilon",1e-5),n=t.attributes.getFloat("momentum",.9),i=t.attributes.getInt("spatial",1);return(0,r.createAttributeWithCacheKey)({epsilon:e,momentum:n,spatial:i})};const s=(t,e,n)=>{const r=(0,i.getGlsl)(t.session.backend.glContext.version),s=e[0].dims.length,[c,l]=t.calculateTextureWidthAndHeight(e[1].dims,o.TextureType.unpacked),u="\n  float process(int[".concat(s,"] indices) {\n    vec2 position = offsetToCoords(indices[1], ").concat(c,", ").concat(l,");\n    float scale = getColorAsFloat(").concat(r.texture2D,"(Scale, position));\n    float mean = getColorAsFloat(").concat(r.texture2D,"(Mean, position));\n    float variance = getColorAsFloat(").concat(r.texture2D,"(Variance, position));\n    float b = getColorAsFloat(").concat(r.texture2D,"(B, position));\n\n    return scale * ( (_A(indices) - mean) / sqrt(variance + float(").concat(n.epsilon,")) ) + b;\n  }");return Object.assign(Object.assign({},a),{output:{dims:e[0].dims,type:e[0].type,textureType:o.TextureType.unpacked},shaderSource:u})},c=t=>{if(!t||5!==t.length)throw new Error("BatchNormalization requires 5 inputs.");const e=t[0],n=t[1],r=t[2],i=t[3],o=t[4];if(e.dims.length<3||1!==n.dims.length||1!==r.dims.length||1!==i.dims.length||1!==o.dims.length)throw new Error("invalid input shape.");if(n.dims[0]!==e.dims[1]||r.dims[0]!==e.dims[1]||i.dims[0]!==e.dims[1]||o.dims[0]!==e.dims[1])throw new Error("invalid input shape.");if("float32"!==e.type&&"float64"!==e.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==r.type&&"float64"!==r.type||"float32"!==i.type&&"float64"!==i.type||"float32"!==o.type&&"float64"!==o.type)throw new Error("invalid input tensor types.")}},7839:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.xor=e.sub=e.pRelu=e.pow=e.or=e.mul=e.less=e.greater=e.equal=e.div=e.and=e.add=e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=void 0;const r=n(2517),i=n(8520),o=n(5060),a=n(2039);function s(){const t="add_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a + b;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return v1 + v2;\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function c(){const t="div_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a / b;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return v1 / v2;\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function l(){const t="mul_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a * b;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return v1 * v2;\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function u(){const t="sub_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a - b;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return v1 - v2;\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function h(){const t="equal_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float(a == b);\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return vec4(equal(v1, v2));\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function d(){const t="greater_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float(a > b);\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return vec4( v1.r > v2.r ,\n      v1.g > v2.g,\n      v1.b > v2.b,\n      v1.a > v2.a );\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function p(){const t="less_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float(a < b);\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return vec4( v1.r < v2.r ,\n                v1.g < v2.g,\n                v1.b < v2.b,\n                v1.a < v2.a );\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function f(){const t="and_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float( bool(a) && bool(b) );\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r && b2.r ,\n                b1.g && b2.g,\n                b1.b && b2.b,\n                b1.a && b2.a );\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function m(){const t="or_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float( bool(a) || bool(b) );\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r || b2.r ,\n                b1.g || b2.g,\n                b1.b || b2.b,\n                b1.a || b2.a );\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function g(){const t="xor_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float( bool(a) ^^ bool(b) );\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r ^^ b2.r ,\n                b1.g ^^ b2.g,\n                b1.b ^^ b2.b,\n                b1.a ^^ b2.a );\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function y(){return function(t){const e="".concat(t,"_");return{body:"\n  float ".concat(e,"(float a, float b) {\n    return ").concat(t,"(a, b);\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return ").concat(t,"(v1, v2);\n  }\n  "),name:e,type:i.FunctionType.ValueBased}}("pow")}function v(){const t="prelu_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a < 0.0 ? a * b: a;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return vec4(\n      v1.r < 0.0 ? v1.r * v2.r: v1.r,\n      v1.g < 0.0 ? v1.g * v2.g: v1.g,\n      v1.b < 0.0 ? v1.b * v2.b: v1.b,\n      v1.a < 0.0 ? v1.a * v2.a: v1.a\n      );\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}e.glslAdd=s,e.glslDiv=c,e.glslMul=l,e.glslSub=u,e.glslEqual=h,e.glslGreater=d,e.glslLess=p,e.glslAnd=f,e.glslOr=m,e.glslXor=g,e.glslPow=y,e.glslPRelu=v;const b=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e[0].type,i=arguments.length>4?arguments[4]:void 0;const o=t.session.pack?a.TextureType.packed:a.TextureType.unpacked;return{name:n.name,inputNames:["A","B"],inputTypes:[o,o],cacheHint:i,get:()=>x(t,e,n,r)}},x=function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e[0].type;const s=t.session.pack?a.TextureType.packed:a.TextureType.unpacked,c=!r.ShapeUtil.areEqual(e[0].dims,e[1].dims);let l=e[0].dims;const u=t.session.pack;if(c){const a=r.BroadcastUtil.calcShape(e[0].dims,e[1].dims,!1);if(!a)throw new Error("Can't perform binary op on the given tensors");l=a;const c=l.length,h=0!==e[0].dims.length?e[0].dims.length:1,d=0!==e[1].dims.length?e[1].dims.length:1,p=0!==e[0].dims.length?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",f=0!==e[1].dims.length?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",m=(0,o.getGlsl)(t.session.backend.glContext.version),g=u?"\n      ".concat(n.body,"\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n        vec4 result = ").concat(n.name,"(a, b);\n        ").concat(m.output," = result;\n      }"):"\n      ".concat(n.body,"\n      float process(int indices[").concat(c,"]) {\n        int aindices[").concat(h,"];\n        int bindices[").concat(d,"];\n        ").concat(p,"\n        ").concat(f,"\n        return ").concat(n.name,"(_A(aindices), _B(bindices));\n      }");return{name:n.name,inputNames:["A","B"],inputTypes:[s,s],output:{dims:l,type:i,textureType:s},shaderSource:g,hasMain:u}}const h=(0,o.getGlsl)(t.session.backend.glContext.version),d="\n    ".concat(n.body,"\n    void main() {\n      vec4 v1 = ").concat(h.texture2D,"(A, TexCoords);\n      vec4 v2 = ").concat(h.texture2D,"(B, TexCoords);\n      vec4 result = ").concat(n.name,"(v1, v2);\n      ").concat(h.output," = result;\n    }\n    ");return{name:n.name,inputNames:["A","B"],inputTypes:[s,s],output:{dims:e[0].dims,type:i,textureType:s},shaderSource:d,hasMain:!0}};e.add=(t,e)=>[t.run(b(t,e,s()),e)],e.and=(t,e)=>[t.run(b(t,e,f(),"bool"),e)],e.div=(t,e)=>[t.run(b(t,e,c()),e)],e.equal=(t,e)=>[t.run(b(t,e,h(),"bool"),e)],e.greater=(t,e)=>[t.run(b(t,e,d(),"bool"),e)],e.less=(t,e)=>[t.run(b(t,e,p(),"bool"),e)],e.mul=(t,e)=>[t.run(b(t,e,l()),e)],e.or=(t,e)=>[t.run(b(t,e,m(),"bool"),e)],e.pow=(t,e)=>[t.run(b(t,e,y()),e)],e.pRelu=(t,e)=>[t.run(b(t,e,v()),e)],e.sub=(t,e)=>[t.run(b(t,e,u()),e)],e.xor=(t,e)=>[t.run(b(t,e,g(),"bool"),e)]},4196:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseCastAttributes=e.cast=void 0;const r=n(2517);e.cast=(t,e,n)=>(i(e),[t.cast(e[0],n)]),e.parseCastAttributes=t=>r.ProtoUtil.tensorDataTypeFromProto(t.attributes.getInt("to"));const i=t=>{if(!t||1!==t.length)throw new Error("Cast requires 1 input.");if("string"===t[0].type)throw new Error("Invalid input type.")}},1163:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedConcatProgramInfoLoader=void 0;const r=n(5060),i=n(2039),o=n(9390),a=n(2827);e.createPackedConcatProgramInfoLoader=(t,e,n)=>{const c=(l=e.length,u=n.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:l},((t,e)=>"X".concat(e))),inputTypes:Array(l).fill(i.TextureType.packed),cacheHint:u});var l,u;return Object.assign(Object.assign({},c),{get:()=>((t,e,n,c)=>{const l=n[0].dims.slice();if(c>=l.length||c<-1*l.length)throw new Error("axis specified for concat doesn't match input dimensionality");c<0&&(c=l.length+c);const u=l.slice(0);for(let r=1;r<n.length;r++){const t=n[r].dims.slice();for(let e=0;e<l.length;e++)if(e===c)u[c]+=t[e];else if(l[e]!==t[e])throw new Error("non concat dimensions must match")}const h=u.length,d=(0,a.getChannels)("coords",h),p=(0,o.getCoordsDataType)(h),f=(0,a.unpackFromChannel)(),m=n.map((t=>t.dims)),g=(0,o.getGlChannels)(h),y=new Array(m.length-1);y[0]=m[0][c];for(let r=1;r<y.length;r++)y[r]=y[r-1]+m[r][c];const v=g[c],b=g.slice(-2),x=g.join();let _="if (".concat(v," < ").concat(y[0],") {\n        return getChannel(\n            getX0(").concat(x,"), vec2(").concat(b.join(),"));\n        }");for(let r=1;r<y.length;r++){const t=y[r-1];_+="\n            if (".concat(v," < ").concat(y[r],"  && ").concat(v," >= ").concat(y[r-1],") {\n              return getChannel(\n                getX").concat(r,"(").concat(s(g,v,t),"),\n                vec2(").concat(s(b,v,t),"));\n            }")}const w=y.length,S=y[y.length-1];_+="\n            return getChannel(\n              getX".concat(w,"(").concat(s(g,v,S),"),\n              vec2(").concat(s(b,v,S),"));");const T=(0,r.getGlsl)(t.session.backend.glContext.version),E="\n          ".concat(f,"\n          float getValue(").concat(g.map((t=>"int "+t)),") {\n            ").concat(_,"\n          }\n\n          void main() {\n            ").concat(p," coords = getOutputCoords();\n            int lastDim = coords.").concat(g[h-1],";\n            coords.").concat(g[h-1]," = coords.").concat(g[h-2],";\n            coords.").concat(g[h-2]," = lastDim;\n\n            vec4 result = vec4(getValue(").concat(d,"), 0., 0., 0.);\n\n            ").concat(d[h-1]," = ").concat(d[h-1]," + 1;\n            if (").concat(d[h-1]," < ").concat(u[h-1],") {\n              result.g = getValue(").concat(d,");\n            }\n\n            ").concat(d[h-2]," = ").concat(d[h-2]," + 1;\n            if (").concat(d[h-2]," < ").concat(u[h-2],") {\n              result.a = getValue(").concat(d,");\n            }\n\n            ").concat(d[h-1]," = ").concat(d[h-1]," - 1;\n            if (").concat(d[h-2]," < ").concat(u[h-2]," &&\n                ").concat(d[h-1]," < ").concat(u[h-1],") {\n              result.b = getValue(").concat(d,");\n            }\n            ").concat(T.output," = result;\n          }\n        ");return Object.assign(Object.assign({},e),{output:{dims:u,type:n[0].type,textureType:i.TextureType.packed},shaderSource:E,hasMain:!0})})(t,c,e,n.axis)})};const s=(t,e,n)=>{const r=t.indexOf(e);return t.map(((t,e)=>e===r?"".concat(t," - ").concat(n):t)).join()}},2069:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;const r=n(246),i=n(2039),o=n(1163);e.concat=(t,e,n)=>(h(e),t.session.pack&&e[0].dims.length>1?[t.run((0,o.createPackedConcatProgramInfoLoader)(t,e,n),e)]:[t.run(a(t,e,n),e)]);const a=(t,e,n)=>{const r=(o=e.length,a=n.cacheKey,{name:"Concat",inputNames:Array.from({length:o},((t,e)=>"X".concat(e))),inputTypes:Array(o).fill(i.TextureType.unpacked),cacheHint:a});var o,a;return Object.assign(Object.assign({},r),{get:()=>((t,e,n,r)=>{const o=n[0].dims.slice();if(r>=o.length||r<-1*o.length)throw new Error("axis specified for concat doesn't match input dimensionality");r<0&&(r=o.length+r);const a=o.slice(0);for(let i=1;i<n.length;i++){const t=n[i].dims.slice();for(let e=0;e<o.length;e++)if(e===r)a[r]+=t[e];else if(o[e]!==t[e])throw new Error("non concat dimensions must match")}const h=a.length,d=new Array(n.length);let p=0;for(let i=0;i<d.length;++i)p+=n[i].dims[r],d[i]=p;let f="";f=n.length<5?s(d):c(d);const m="\n        ".concat(l(n.length,h),"\n        ").concat(u(d),"\n        ").concat(f,"\n        float process(int indices[").concat(h,"]) {\n          int textureIndex = getTextureWhereDataResides (indices[").concat(r,"]);\n\n          if(textureIndex != 0) {\n            indices[").concat(r,"] = indices[").concat(r,"] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));\n          }\n\n          return fetchDataFromCorrectTexture(textureIndex, indices);\n        }");return Object.assign(Object.assign({},e),{output:{dims:a,type:n[0].type,textureType:i.TextureType.unpacked},shaderSource:m})})(0,r,e,n.axis)})},s=t=>"int getTextureWhereDataResides(int index) {\n      ".concat(t.map(((t,e)=>"if(index<".concat(t,") {return ").concat(e,";}\n"))).join(""),"\n    }"),c=t=>s(t),l=(t,e)=>{const n=["float fetchDataFromCorrectTexture(int textureIndex, int indices[".concat(e,"]) {")];for(let r=0;r<t;++r)0===r?n.push("\tif (textureIndex == ".concat(r,") { return _X").concat(r,"(indices); }")):r===t-1?n.push("\telse { return _X".concat(r,"(indices); }")):n.push("\telse if (textureIndex == ".concat(r,") { return _X").concat(r,"(indices); }"));return n.push("\t}"),n.join("\n")},u=t=>{const e=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let n=0;n<t.length;++n)0===n?e.push("\tif (index == ".concat(n,") { return ").concat(t[n],"; }")):n===t.length-1?e.push("\telse { return ".concat(t[n],"; }")):e.push("\telse if (index == ".concat(n,") { return ").concat(t[n],"; }"));return e.push("\t}"),e.join("\n")};e.parseConcatAttributes=t=>(0,r.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis")});const h=t=>{if(!t||t.length<1)throw new Error("too few inputs");const e=t[0].type,n=t[0].dims.length;if("string"===e)throw new Error("string tensor is not supported yet");for(const r of t){if(r.type!==e)throw new Error("input tensors should be one type");if(r.dims.length!==n)throw new Error("input tensors should have the same shape")}}},4770:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackedGroupedConvProgramInfoLoader=void 0;const r=n(6231),i=n(5060),o=n(2039),a=n(8138),s=n(2823);e.createUnpackedGroupedConvProgramInfoLoader=(t,e,n)=>{const c=(l=e.length>2,u=n.cacheKey,{name:"GroupedConv",inputNames:l?["X","W","Bias"]:["X","W"],inputTypes:l?[o.TextureType.unpacked,o.TextureType.unpacked,o.TextureType.unpacked]:[o.TextureType.unpacked,o.TextureType.unpacked],cacheHint:u});var l,u;return Object.assign(Object.assign({},c),{get:()=>((t,e,n,c)=>{const l=e.length>2?"value += getBias(output_channel);":"",u=e[0].dims.slice(),h=e[1].dims.slice(),d=h[0]/c.group;r.Logger.verbose("GroupedConv","autpPad:".concat(c.autoPad,", dilations:").concat(c.dilations,", group:").concat(c.group,", kernelShape:").concat(c.kernelShape,", pads:").concat(c.pads,", strides:").concat(c.strides));const p=(0,a.calculateOutputShape)(u,h,c.dilations,c.pads,c.strides),f=(0,i.getGlsl)(t.session.backend.glContext.version),{activationFunction:m,applyActivation:g}=(0,s.getActivationSnippet)(c),y="\n  const ivec2 strides = ivec2(".concat(c.strides[0],", ").concat(c.strides[1],");\n  const ivec2 pads = ivec2(").concat(c.pads[0],", ").concat(c.pads[1],");\n  ").concat(m,"\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n    ivec2 xRCCorner = coords.zw * strides - pads;\n    int group_id = output_channel / ").concat(d,";\n\n    float value = 0.0;\n    for (int wInChannel = 0; wInChannel < ").concat(h[1],"; wInChannel++) {\n      int input_channel = group_id * ").concat(h[1]," + wInChannel;\n      for (int wHeight = 0; wHeight < ").concat(h[2],"; wHeight++) {\n        int xHeight = xRCCorner.x + wHeight * ").concat(c.dilations[0],";\n\n        if (xHeight < 0 || xHeight >= ").concat(u[2],") {\n          continue;\n        }\n\n        for (int wWidth = 0; wWidth < ").concat(h[3],"; wWidth++) {\n          int xWidth = xRCCorner.y + wWidth * ").concat(c.dilations[1],";\n          if (xWidth < 0 || xWidth >= ").concat(u[3],") {\n            continue;\n          }\n\n          float xVal = getX(batch, input_channel, xWidth, xHeight);\n          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);\n          value += xVal*wVal;\n        }\n      }\n    }\n    ").concat(l,"\n    ").concat(g,"\n    ").concat(f.output," = vec4(value, .0, .0, .0);\n  }\n");return Object.assign(Object.assign({},n),{output:{dims:p,type:e[0].type,textureType:o.TextureType.unpacked},shaderSource:y,hasMain:!0})})(t,e,c,n)})}},1386:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.conv2DPacked=e.conv2DPackedPointwise=void 0;const r=n(8138),i=n(8555),o=n(708);e.conv2DPackedPointwise=(t,e,n)=>{const i=e[0].dims,a=e[1].dims,s=(0,r.calculateOutputShape)(i,a,n.dilations,n.pads,n.strides),c=t.reshapePacked(e[0],[i[1],i[2]*i[3]]),l=t.reshapePacked(e[1],[a[0],a[1]]),u=e.length>2?[l,c,e[2]]:[l,c],h=t.run((0,o.createPackedMatmulProgramInfoLoader)(t,u,n),u);return t.reshapePacked(h,s)},e.conv2DPacked=(t,e,n)=>{const a=e[0].dims,s=e[1].dims,c=(0,r.calculateOutputShape)(a,s,n.dilations,n.pads,n.strides),l=t.run((0,i.createPackedIm2ColProgramInfoLoader)(t,e[0],e[1],c,n),[e[0]]),u=t.reshapePacked(e[1],[s[0],s[1]*s[2]*s[3]]),h=3===e.length?[u,l,e[2]]:[u,l],d=t.run((0,o.createPackedMatmulProgramInfoLoader)(t,h,n),h);return t.reshapePacked(d,c)}},9663:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvTransposeAttributes=e.convTranspose=void 0;const r=n(246),i=n(5060),o=n(2039),a=n(2823),s=(t,e,n,r,i,o)=>(t-1)*e+n+(r-1)*i+1-o,c=(t,e,n,r,i)=>{const o=Math.floor(t/2);"SAME_UPPER"===e?(n[r]=o,n[i]=t-o):"SAME_LOWER"===e&&(n[r]=t-o,n[i]=o)};e.convTranspose=(t,e,n)=>(d(e,n),l(t,e,n));const l=(t,e,n)=>{const r=h(n,e);return[u(t,e,r)]},u=(t,e,n)=>t.run(((t,e,n)=>{const r=(s=e.length>2,c=n.cacheKey,{name:"ConvTranspose",inputNames:s?["X","W","B"]:["X","W"],inputTypes:s?[o.TextureType.unpacked,o.TextureType.unpacked,o.TextureType.unpacked]:[o.TextureType.unpacked,o.TextureType.unpacked],cacheHint:c});var s,c;return Object.assign(Object.assign({},r),{get:()=>((t,e,n,r)=>{const s=e.length>2?"getB(output_channel)":"0.0",c=e[0].dims,l=e[1].dims,u=l[1],h=l[0]/r.group,d=[e[0].dims[0],e[1].dims[1]*r.group,...r.outputShape],p=(0,i.getGlsl)(t.session.backend.glContext.version),{activationFunction:f,applyActivation:m}=(0,a.getActivationSnippet)(r),g="\n  const ivec2 strides = ivec2(".concat(r.strides[0],", ").concat(r.strides[1],");\n  const ivec2 pads = ivec2(").concat(r.pads[0],", ").concat(r.pads[1],");\n  ").concat(f,"\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n\n    ivec2 loc = coords.zw + pads;\n\n    int group_id = output_channel / ").concat(u,";\n    int wOutChannel = output_channel - group_id * ").concat(u,";\n\n    float value = ").concat(s,";\n    for (int inChannelOffset = 0; inChannelOffset < ").concat(h,"; inChannelOffset++) {\n      int input_channel = group_id * ").concat(h," + inChannelOffset;\n      for (int wWOff = 0; wWOff < ").concat(l[2],"; wWOff++) {\n        for (int wHOff = 0; wHOff < ").concat(l[3],"; wHOff++) {\n          ivec2 wOff = ivec2(wWOff * ").concat(r.dilations[0],", wHOff * ").concat(r.dilations[1],");\n          ivec2 wLoc = loc - wOff;\n          ivec2 wLocIn = wLoc / strides;\n          if (\n            wLocIn * strides == wLoc &&\n            wLocIn.x >= 0 && wLocIn.x < ").concat(c[2]," &&\n            wLocIn.y >= 0 && wLocIn.y < ").concat(c[3],"\n          ) {\n            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);\n            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);\n            value += xVal * wVal;\n          }\n        }\n      }\n    }\n    ").concat(m,"\n    ").concat(p.output," = vec4(value, .0, .0, .0);\n  }\n");return Object.assign(Object.assign({},n),{output:{dims:d,type:e[0].type,textureType:o.TextureType.unpacked},shaderSource:g,hasMain:!0})})(t,e,r,n)})})(t,e,n),e),h=(t,e)=>{const n=t.kernelShape.slice();if(0===t.kernelShape.length)for(let a=2;a<e[1].dims.length;++a)n.push(e[1].dims[a]);const r=t.pads.slice(),i=t.outputShape.slice();((t,e,n,r,i,o,a,l)=>{const u=t.length-2,h=0===l.length;for(let d=0;d<u;++d){const p=h?t[d+2]*o[d]:l[d],f=s(t[d+2],o[d],i[d],e[d],n[d],p);c(f,r,i,d,d+u),h&&l.push(o[d]*(t[d+2]-1)+a[d]+(e[d]-1)*n[d]+1-i[d]-i[d+u])}})(e[0].dims,n,t.dilations,t.autoPad,r,t.strides,t.outputPadding,i);const o=Object.assign({},t);return Object.assign(o,{kernelShape:n,pads:r,outputShape:i,cacheKey:t.cacheKey}),o};e.parseConvTransposeAttributes=t=>{const e=t.attributes,n=(0,a.parseInternalActivationAttributes)(e),i=e.getString("auto_pad","NOTSET"),o=e.getInts("dilations",[1,1]),s=e.getInt("group",1),c=e.getInts("kernel_shape",[]),l=e.getInts("output_padding",[0,0]),u=e.getInts("output_shape",[]),h=e.getInts("pads",[0,0,0,0]),d=e.getInts("strides",[1,1]);return(0,r.createAttributeWithCacheKey)(Object.assign({autoPad:i,dilations:o,group:s,kernelShape:c,outputPadding:l,outputShape:u,pads:h,strides:d},n))};const d=(t,e)=>{if(!t||2!==t.length&&3!==t.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length||4!==t[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(t[0].dims[1]!==t[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const n=t[1].dims[1]*e.group;if(3===t.length&&(1!==t[2].dims.length||t[2].dims[0]!==n))throw new Error("invalid bias");const r=t[0].dims.length-2;if(e.dilations.length!==r)throw new Error("dilations should be ".concat(r,"D"));if(e.strides.length!==r)throw new Error("strides should be ".concat(r,"D"));if(e.pads.length!==2*r)throw new Error("pads should be ".concat(2*r,"D"));if(e.outputPadding.length!==r)throw new Error("output_padding should be ".concat(r,"D"));if(0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(0!==e.outputShape.length&&e.outputShape.length!==t[0].dims.length-2)throw new Error("invalid output shape");if("float32"!==t[0].type||"float32"!==t[1].type)throw new Error("ConvTranspose input(X,W) should be float tensor");if(3===t.length&&"float32"!==t[2].type)throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvAttributes=e.conv=e.calculateOutputShape=void 0;const r=n(246),i=n(2517),o=n(4770),a=n(1386),s=n(9828),c=n(2823),l=n(3248),u=n(5623);e.calculateOutputShape=(t,e,n,r,i)=>{const o=t[0],a=t.slice(2),s=a.length,c=e[0],l=e.slice(2).map(((t,e)=>t+(t-1)*(n[e]-1))),u=a.map(((t,e)=>t+r[e]+r[e+s])).map(((t,e)=>Math.floor((t-l[e]+i[e])/i[e])));return[o,c].concat(...u)},e.conv=(t,e,n)=>(m(e,n),h(t,e,n));const h=(t,e,n)=>{const r=f(n,e),i=t.session.pack,s=1===r.kernelShape[0]&&1===r.kernelShape[1];return r.group>1?[t.run((0,o.createUnpackedGroupedConvProgramInfoLoader)(t,e,r),e)]:s&&i?[d(t,e,r)]:i&&4===e[0].dims.length&&1===e[0].dims[0]&&!s?[(0,a.conv2DPacked)(t,e,r)]:[p(t,e,r)]},d=(t,n,r)=>{const i=n[0].dims,o=n[1].dims,a=(0,e.calculateOutputShape)(i,o,r.dilations,r.pads,r.strides),s=t.reshapeUnpacked(n[0],[i[1],i[2]*i[3]]),c=t.reshapeUnpacked(n[1],[o[0],o[1]]),l=n.length>2?[c,s,n[2]]:[c,s],h=t.run((0,u.createMatmulProgramInfoLoader)(l,r),l);return t.reshapeUnpacked(h,a)},p=(t,n,r)=>{const i=n[0].dims,o=n[1].dims,a=(0,e.calculateOutputShape)(i,o,r.dilations,r.pads,r.strides),c=t.run((0,l.createIm2ColProgramInfoLoader)(t,n[0],n[1],a,r),[n[0]]),u=3===n.length?[c,n[1],n[2]]:[c,n[1]];return t.run((0,s.createDotProductProgramInfoLoader)(t,n,a,r),u)},f=(t,e)=>{const n=t.kernelShape.slice();if(0===t.kernelShape.length)for(let i=2;i<e[1].dims.length;++i)n.push(e[1].dims[i]);const r=t.pads.slice();i.PoolConvUtil.adjustPadsBasedOnAutoPad(e[0].dims,t.strides,t.dilations,n,r,t.autoPad);const o=Object.assign({},t);return Object.assign(o,{kernelShape:n,pads:r,cacheKey:t.cacheKey}),o};e.parseConvAttributes=t=>{const e=t.attributes,n=(0,c.parseInternalActivationAttributes)(e),i=e.getString("auto_pad","NOTSET"),o=e.getInts("dilations",[1,1]),a=e.getInt("group",1),s=e.getInts("kernel_shape",[]),l=e.getInts("pads",[0,0,0,0]),u=e.getInts("strides",[1,1]);return(0,r.createAttributeWithCacheKey)(Object.assign({autoPad:i,dilations:o,group:a,kernelShape:s,pads:l,strides:u},n))};const m=(t,e)=>{if(!t||2!==t.length&&3!==t.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length||4!==t[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(t[0].dims[1]!==t[1].dims[1]*e.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===t.length&&(1!==t[2].dims.length||t[1].dims[0]!==t[2].dims[0]))throw new Error("invalid bias");const n=t[0].dims.length-2;if(e.dilations.length!==n)throw new Error("dilations should be ".concat(n,"D"));if(e.strides.length!==n)throw new Error("strides should be ".concat(n,"D"));if(e.pads.length!==2*n)throw new Error("pads should be ".concat(2*n,"D"));if(0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if("float32"!==t[0].type||"float32"!==t[1].type)throw new Error("Conv input(X,W) should be float tensor");if(3===t.length&&"float32"!==t[2].type)throw new Error("Conv input(bias) should be float tensor")}},5193:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseDepthToSpaceAttributes=e.depthToSpace=void 0;const r=n(3738);e.depthToSpace=(t,e,n)=>{i(e);const o=n.blocksize,a=o*o,s="DCR"===n.mode?[0,3,4,1,5,2]:[0,1,4,2,5,3],c="DCR"===n.mode?[e[0].dims[0],o,o,e[0].dims[1]/a,e[0].dims[2],e[0].dims[3]]:[e[0].dims[0],e[0].dims[1]/a,o,o,e[0].dims[2],e[0].dims[3]],l=t.reshapeUnpacked(e[0],c),u={perm:s,cacheKey:"".concat(s)},[h]=(0,r.transpose)(t,[l],u),d=[e[0].dims[0],e[0].dims[1]/a,e[0].dims[2]*o,e[0].dims[3]*o];return[t.reshapeUnpacked(h,d)]},e.parseDepthToSpaceAttributes=t=>{const e=t.attributes.getInt("blocksize");if(e<1)throw new Error("blocksize must be >= 1, but got : ".concat(e," for DepthToSpace"));const n=t.attributes.getString("mode","DCR");if("DCR"!==n&&"CRD"!==n)throw new Error("unrecognized mode: ".concat(n," for DepthToSpace"));return{mode:n,blocksize:e}};const i=t=>{if(1!==t.length)throw new Error("DepthToSpace expect 1 inputs, but got ".concat(t.length));if("string"===t[0].type||4!==t[0].dims.length)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createDotProductProgramInfoLoader=void 0;const r=n(2517),i=n(5060),o=n(2039),a=n(2823),s=n(3248);e.createDotProductProgramInfoLoader=(t,e,n,c)=>{const l=((t,e)=>({name:"ConvDotProduct",inputNames:t?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:t?[o.TextureType.unpacked,o.TextureType.packedLastDimension,o.TextureType.unpacked]:[o.TextureType.unpacked,o.TextureType.packedLastDimension],cacheKey:e.activationCacheKey}))(e.length>2,c);return Object.assign(Object.assign({},l),{get:()=>((t,e,n,c,l)=>{const u=n[0].dims,h=n[1].dims,d=[h[0],Math.ceil(u[1]*h[2]*h[3]/4)],p=(0,s.calculateIm2ColDims)(u,h,c),[f,m]=t.calculateTextureWidthAndHeight(d,o.TextureType.packedLastDimension),g=r.ShapeUtil.computeStrides(p),[y,v]=t.calculateTextureWidthAndHeight(p,o.TextureType.packedLastDimension),b=c.length,x=n.length<3?"0.0":"_B(b)",_=Math.ceil(u[1]*h[2]*h[3]/4),{activationFunction:w,applyActivation:S}=(0,a.getActivationSnippet)(l),T=(0,i.getGlsl)(t.session.backend.glContext.version),E="\n".concat(w,"\nfloat process(int indices[").concat(b,"]) {\n  int b[1];\n  b[0] = indices[1];\n  int im2col[4];\n  im2col[0] = indices[0];\n  im2col[1] = indices[2];\n  im2col[2] = indices[3];\n  int im2colOffset = im2col[0] * ").concat(g[0]," + im2col[1] * ").concat(g[1]," + im2col[2] * ").concat(g[2],";\n  int kernelOffset = indices[1] * ").concat(d[1],";\n  float value = ").concat(x,";\n  for (int i = 0; i < ").concat(_,"; ++i) {\n    vec2 im2colCoords = offsetToCoords(im2colOffset, ").concat(y,", ").concat(v,");\n    vec2 kernelCoords = offsetToCoords(kernelOffset, ").concat(f,", ").concat(m,");\n    value += dot(").concat(T.texture2D,"(Im2Col, im2colCoords), ").concat(T.texture2D,"(K, kernelCoords));\n    ++im2colOffset;\n    ++kernelOffset;\n  }\n  ").concat(S,"\n  return value;\n}");return Object.assign(Object.assign({},e),{output:{dims:c,type:n[0].type,textureType:o.TextureType.unpacked},shaderSource:E})})(t,l,e,n,c)})}},7992:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseFlattenAttributes=e.flatten=void 0;const r=n(2517);e.flatten=(t,e,n)=>{i(e,n);const o=r.ShapeUtil.flattenShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],o)]},e.parseFlattenAttributes=t=>t.attributes.getInt("axis",1);const i=(t,e)=>{if(!t||1!==t.length)throw new Error("Flatten requires 1 input.");const n=t[0].dims.length;if(0===n)throw new Error("scalar tensor is not supported.");if(e<-n||e>n)throw new Error("Invalid axis");if("string"===t[0].type)throw new Error("string tensor is not supported.")}},2823:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActivationSnippet=void 0;const r=n(2517),i=n(4909);e.getActivationSnippet=function(t){let e;switch(t.activation){case"Relu":e=(0,i.glslRelu)();break;case"Sigmoid":e=(0,i.glslSigmoid)();break;case"Clip":e=(0,i.glslClip)(t.clipMin,t.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const n=e.name;return{activationFunction:e.body,applyActivation:"value = ".concat(n,"_(value);")}},e.parseInternalActivationAttributes=t=>{const e=t.getString("activation","");if("Clip"===e){const[n,i]=t.getFloats("activation_params",[r.MIN_CLIP,r.MAX_CLIP]);return{activation:e,clipMax:i,clipMin:n,activationCacheKey:"".concat(e,":").concat(n,",").concat(i)}}return{activation:e,activationCacheKey:e}}},1253:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseGatherAttributes=e.gather=void 0;const r=n(246),i=n(782),o=n(2517),a=n(2039);e.gather=(t,e,n)=>(l(e,n.axis),[t.run(c(t,e,n),e)]),e.parseGatherAttributes=t=>(0,r.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",0)});const s={name:"Gather",inputNames:["A","B"],inputTypes:[a.TextureType.unpacked,a.TextureType.unpacked]},c=(t,e,n)=>{const r=Object.assign(Object.assign({},s),{cacheHint:n.cacheKey});return Object.assign(Object.assign({},r),{get:()=>((t,e,n,r)=>{const i=n[0].dims.slice(),s=n[1].dims.slice(),c=new Array(i.length+s.length-1);r=o.ShapeUtil.normalizeAxis(r,i.length);const l=[];for(let o=0;o<c.length;o++)o<r?(c[o]=i[o],l.push("inputIdx[".concat(o,"] = outputIdx[").concat(o,"];"))):o<r+s.length?(c[o]=s[o-r],l.push("indexDataIdx[".concat(o-r,"] = outputIdx[").concat(o,"];"))):(c[o]=i[o-s.length+1],l.push("inputIdx[".concat(o-s.length+1,"] = outputIdx[").concat(o,"];")));const u="\n      float process(int outputIdx[".concat(c.length||1,"]) {\n        int inputIdx[").concat(i.length,"];\n        int indexDataIdx[").concat(s.length||1,"];\n        indexDataIdx[0] = 0;\n        ").concat(l.join("\n        "),"\n        int idx = int(_B(indexDataIdx));\n        inputIdx[").concat(r,"] = idx < 0 ? idx + ").concat(i[r]," : idx;\n        return _A(inputIdx);\n      }");return Object.assign(Object.assign({},e),{output:{dims:c,type:n[0].type,textureType:a.TextureType.unpacked},shaderSource:u})})(0,r,e,n.axis)})},l=(t,e)=>{if(!t||2!==t.length)throw new Error("Gather requires 2 inputs.");const n=t[0].dims.length;if(n<1)throw new Error("Invalid input shape.");if(e<-n||e>n-1)throw new Error("Invalid axis.");if(-1===i.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invaid input type.");if("int32"!==t[1].type&&"int16"!==t[1].type)throw new Error("Invaid input type.")}},4776:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributesV11=e.parseGemmAttributesV7=e.gemm=void 0;const r=n(246),i=n(2517),o=n(2039);e.gemm=(t,e,n)=>(l(e,n),[t.run(s(e,n),e)]);const a=(t,e)=>{const n=0!==t.attributes.getInt("transA",0),i=0!==t.attributes.getInt("transB",0),o=t.attributes.getFloat("alpha",1),a=t.attributes.getFloat("beta",1);return(0,r.createAttributeWithCacheKey)({transA:n,transB:i,alpha:o,beta:a,isOptionalC:e})};e.parseGemmAttributesV7=t=>a(t,!1),e.parseGemmAttributesV11=t=>a(t,!0);const s=(t,e)=>{const n={name:"Gemm",inputNames:3===t.length?["A","B","C"]:["A","B"],inputTypes:3===t.length?[o.TextureType.unpacked,o.TextureType.unpacked,o.TextureType.unpacked]:[o.TextureType.unpacked,o.TextureType.unpacked],key:e.cacheKey};return Object.assign(Object.assign({},n),{get:()=>c(n,t,e)})},c=(t,e,n)=>{const r=e[0].dims.slice(),a=e[1].dims.slice(),[s,c]=i.GemmUtil.getShapeOfGemmResult(r,n.transA,a,n.transB,3===e.length?e[2].dims:void 0),l=[s,c];if(!l)throw new Error("Can't use gemm on the given tensors");let u=r[r.length-1],h="";n.transA&&(u=r[0]),n.transA&&n.transB?h="value += _A_T(a) * _B_T(b);":n.transA&&!n.transB?h="value += _A_T(a) * _B(b);":!n.transA&&n.transB?h="value += _A(a) * _B_T(b);":n.transA||n.transB||(h="value += _A(a) * _B(b);");const d=l.length,p="\n      float process(int indices[".concat(d,"]) {\n          int a[").concat(d,"];\n          int b[").concat(d,"];\n          ").concat(3===e.length?"int c[".concat(e[2].dims.length,"];"):"","\n\n          copyVec(indices, a);\n          copyVec(indices, b);\n          ").concat(3===e.length?"bcastIndices_C(indices, c);":"","\n\n          float value = 0.0;\n          for (int k=0; k<").concat(u,"; ++k) {\n              a[").concat(d-1,"] = k;\n              b[").concat(d-2,"] = k;\n              ").concat(h,"\n          }\n\n          value = value * alpha;\n          ").concat(3===e.length?"value += beta * _C(c);":"","\n          return value;\n      }");return Object.assign(Object.assign({},t),{output:{dims:l,type:e[0].type,textureType:o.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:n.alpha},{name:"beta",type:"float",data:n.beta}],shaderSource:p})},l=(t,e)=>{if(!t)throw new Error("Input is missing");if(e.isOptionalC&&(t.length<2||t.length>3))throw new Error("Invaid input shape.");if(!e.isOptionalC&&3!==t.length)throw new Error("Gemm requires 3 inputs");if(3===t.length&&1!==t[2].dims.length&&2!==t[2].dims.length)throw new Error("Invalid input shape of C");if("float32"!==t[0].type&&"float64"!==t[0].type||"float32"!==t[1].type&&"float64"!==t[1].type||3===t.length&&"float32"!==t[2].type&&"float64"!==t[2].type)throw new Error("Invalid input type.");if(t[0].type!==t[1].type||3===t.length&&t[0].type!==t[2].type)throw new Error("Input types are mismatched")}},8555:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedIm2ColProgramInfoLoader=void 0;const r=n(5060),i=n(2039),o=n(2827);e.createPackedIm2ColProgramInfoLoader=(t,e,n,a,s)=>{const c=(l=s.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[i.TextureType.packed],cacheHint:l});var l;return Object.assign(Object.assign({},c),{get:()=>((t,e,n,a,s,c)=>{const l=n.dims,u=a.dims,h=s.length,d=[u[1]*u[2]*u[3],s[2]*s[3]],p=u[2]*u[3],f=(0,o.unpackFromChannel)(),m=(0,r.getGlsl)(t.session.backend.glContext.version);let g="";for(let r=0;r<=1;r++)for(let t=0;t<=1;t++)g+="\n            blockIndex = rc.x + ".concat(t,";\n            pos = rc.y + ").concat(r,";\n\n            if(blockIndex < ").concat(d[1]," && pos < ").concat(d[0],") {\n              offsetY = int(blockIndex / (").concat(s[h-1],")) * ").concat(c.strides[0]," -\n                ").concat(c.pads[0],";\n              d0 = offsetY + ").concat(c.dilations[0]," * (imod(pos, ").concat(p,") / ").concat(u[2],");\n\n              if(d0 < ").concat(l[2]," && d0 >= 0) {\n                offsetX = imod(blockIndex, ").concat(s[h-1],") * ").concat(c.strides[1]," -\n                  ").concat(c.pads[1],";\n                d1 = offsetX + ").concat(c.dilations[1]," * imod(imod(pos, ").concat(p,"), ").concat(u[2],");\n\n                if(d1 < ").concat(l[3]," && d1 >= 0) {\n\n                  ch = int(float(pos)/ ").concat(p,".);\n                    innerDims = vec2(d0, d1);\n                    result[").concat(2*r+t,"] = getChannel(\n                      getA(0, ch, int(innerDims.x),\n                      int(innerDims.y)), innerDims);\n                }\n              }\n            }\n\n          ");const y="\n      ".concat(f,"\n\n      void main() {\n        ivec2 rc = getOutputCoords();\n          vec4 result = vec4(0.0);\n          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n          vec2 innerDims;\n          ").concat(g,"\n          ").concat(m.output," = result;\n      }\n            ");return Object.assign(Object.assign({},e),{output:{dims:d,type:n.type,textureType:i.TextureType.packed},shaderSource:y,hasMain:!0})})(t,c,e,n,a,s)})}},3248:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculateIm2ColDims=e.createIm2ColProgramInfoLoader=void 0;const r=n(2039);e.createIm2ColProgramInfoLoader=(t,n,i,o,a)=>{const s=(c=a.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[r.TextureType.unpacked],cacheHint:c});var c;return Object.assign(Object.assign({},s),{get:()=>((t,n,i,o,a,s)=>{const c=i.dims,l=o.dims,u=a.length,h=(0,e.calculateIm2ColDims)(c,l,a,4),d="\n        const int XC = ".concat(c[1],";\n        const int XH = ").concat(c[2],";\n        const int XW = ").concat(c[3],";\n        const int KH = ").concat(s.kernelShape[0],";\n        const int KW = ").concat(s.kernelShape[1],";\n        const int dilationH = ").concat(s.dilations[0],";\n        const int dilationW = ").concat(s.dilations[1],";\n        const int strideH = ").concat(s.strides[0],";\n        const int strideW = ").concat(s.strides[1],";\n        const int padH = ").concat(s.pads[0],";\n        const int padW = ").concat(s.pads[1],";\n        const int KHKW = KH*KW;\n        const int XCKHKW = XC * KHKW;\n        const int outputChannels = 4;\n        vec4 process(int indices[").concat(u,"]) {\n          int b  = indices[0]; // batch size\n          int oh = indices[1] * strideH - padH; //output height\n          int ow = indices[2] * strideW - padW; //output width\n          int p = indices[3] * outputChannels; //patch\n          vec4 value = vec4(0.0);\n          for(int i=0; i < outputChannels; ++i) {\n            if(p < XCKHKW) {\n              int patchC = p / KHKW;\n              int patchH = (p - patchC*KHKW) / KW;\n              int patchW = (p - patchC*KHKW) - patchH * KW;\n              int xh2 = oh + patchH * dilationH;\n              int xw2 = ow + patchW * dilationW;\n              int x[").concat(c.length,"];\n              x[0] = b;\n              x[1] = patchC;\n              x[2] = xh2;\n              x[3] = xw2;\n              if(xh2 >= 0 &&\n                  xh2 < XH &&\n                  xw2 >= 0 &&\n                  xw2 < XW) {\n                value[i] = _X(x);\n              }\n            }\n            ++p;\n          }\n          return value;\n        }\n        ");return Object.assign(Object.assign({},n),{output:{dims:h,type:i.type,textureType:r.TextureType.packedLastDimension},shaderSource:d})})(0,s,n,i,o,a)})},e.calculateIm2ColDims=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;return[n[0],n[2],n[3],Math.ceil(t[1]*e[2]*e[3]/r)]}},6572:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseImageScalerAttributes=e.imageScaler=void 0;const r=n(246),i=n(2039);e.imageScaler=(t,e,n)=>(c(e),[t.run(a(t,e,n),e)]),e.parseImageScalerAttributes=t=>{const e=t.attributes.getFloat("scale"),n=t.attributes.getFloats("bias");return(0,r.createAttributeWithCacheKey)({scale:e,bias:n})};const o={name:"ImageScaler",inputNames:["X"],inputTypes:[i.TextureType.unpacked]},a=(t,e,n)=>{const r=Object.assign(Object.assign({},o),{cacheHint:n.cacheKey});return Object.assign(Object.assign({},r),{get:()=>((t,e,n,r)=>{const o=n[0].dims.slice(),a=o.length,c="\n      ".concat(s(r.bias.length),"\n      float process(int indices[").concat(a,"]) {\n        return _X(indices) * scale + getBias(bias, indices[1]);\n      }");return Object.assign(Object.assign({},e),{output:{dims:o,type:n[0].type,textureType:i.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:r.bias.length,data:r.bias},{name:"scale",type:"float",data:r.scale}],shaderSource:c})})(0,r,e,n)})},s=t=>{const e=["float getBias(float bias[".concat(t,"], int channel) {")];for(let n=0;n<t;++n)0===n?e.push("\tif (channel == ".concat(n,") { return bias[").concat(n,"]; }")):n===t-1?e.push("\telse { return bias[".concat(n,"]; }")):e.push("\telse if (channel == ".concat(n,") { return bias[").concat(n,"]; }"));return e.push("\t}"),e.join("\n")},c=t=>{if(!t||1!==t.length)throw new Error("ImageScaler requires 1 input.");if(4!==t[0].dims.length)throw new Error("Invalid input shape.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")}},3346:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseInstanceNormalizationAttributes=e.instanceNormalization=void 0;const r=n(5060),i=n(2039);e.instanceNormalization=(t,e,n)=>{l(e);const r=t.run(a(e[0]),e);return[t.run(c(t,e[0],n,r.dims),[e[0],r,e[1],e[2]])]},e.parseInstanceNormalizationAttributes=t=>t.attributes.getFloat("epsilon",1e-5);const o={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[i.TextureType.unpacked]},a=t=>Object.assign(Object.assign({},o),{get:()=>((t,e)=>{const n=e.dims.slice(),r=n[1],o=n[2]*n[3],a=[n[0],r],s="\n      vec4 process(int[2] indices) {\n        vec4 v = vec4(0.0);\n        int a[4];\n        a[0] = indices[0];\n        a[1] = indices[1];\n        float temp = 0.0;\n        for(int a2=0; a2<".concat(n[2],"; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<").concat(n[3],"; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += x;\n          }\n        }\n        float mean = temp / float(").concat(o,");\n        temp = 0.0;\n        for(int a2=0; a2<").concat(n[2],"; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<").concat(n[3],"; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += (x - mean) * (x - mean);\n          }\n        }\n        v.r = mean;\n        v.g = temp / float(").concat(o,");\n\n        return v;\n      }");return Object.assign(Object.assign({},t),{output:{dims:a,type:e.type,textureType:i.TextureType.packedLastDimension},shaderSource:s})})(o,t)}),s={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[i.TextureType.unpacked,i.TextureType.packedLastDimension,i.TextureType.unpacked,i.TextureType.unpacked]},c=(t,e,n,o)=>{const a=Object.assign(Object.assign({},s),{cacheHint:"".concat(n)});return Object.assign(Object.assign({},a),{get:()=>((t,e,n,o,a)=>{const s=(0,r.getGlsl)(t.session.backend.glContext.version),[c,l]=t.calculateTextureWidthAndHeight(a,i.TextureType.packedLastDimension),[u,h]=[c/4,l],d="\n      vec4 get_MeanAndVariance(int[2] mv) {\n        int offset = indicesToOffset_MeanAndVariance(mv);\n        vec2 coords = offsetToCoords(offset, ".concat(u,", ").concat(h,");\n        return ").concat(s.texture2D,"(MeanAndVariance, coords);\n      }\n\n      float process(int[4] indices) {\n        int mv[2];\n        mv[0] = indices[0];\n        mv[1] = indices[1];\n        vec4 mean_and_variance = get_MeanAndVariance(mv);\n        float mean = mean_and_variance.r;\n        float variance = mean_and_variance.g;\n\n        int sb[1];\n        sb[0] = indices[1];\n        float scale = _Scale(sb);\n        float b = _B(sb);\n\n        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;\n      }");return Object.assign(Object.assign({},e),{output:{dims:n.dims,type:n.type,textureType:i.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:o}],shaderSource:d})})(t,a,e,n,o)})},l=t=>{if(!t||3!==t.length)throw new Error("InstanceNormalization requires 3 inputs.");const e=t[0],n=t[1],r=t[2];if(e.dims.length<3||1!==n.dims.length||1!==r.dims.length)throw new Error("Invalid input shape.");if(n.dims[0]!==e.dims[1]||r.dims[0]!==e.dims[1])throw new Error("Input shapes are mismatched.");if("float32"!==e.type&&"float64"!==e.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==r.type&&"float64"!==r.type)throw new Error("Invalid input type.");if(4!==t[0].dims.length)throw new Error("Only support 4-D input shape.")}},708:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedMatmulProgramInfoLoader=void 0;const r=n(2517),i=n(5060),o=n(2039),a=n(9390),s=n(2823),c=n(5623);e.createPackedMatmulProgramInfoLoader=(t,e,n)=>{const l=(u=e.length>2,h=n.activationCacheKey,{name:"MatMul (packed)",inputNames:u?["A","B","Bias"]:["A","B"],inputTypes:u?[o.TextureType.packed,o.TextureType.packed,o.TextureType.packed]:[o.TextureType.packed,o.TextureType.packed],cacheHint:h});var u,h;return Object.assign(Object.assign({},l),{get:()=>((t,e,n,l)=>{const u=n.length>2,h=u?"value += getBiasForMatmul();":"",d=n[0].dims,p=n[1].dims,f=r.BroadcastUtil.calcShape(d,p,!0),m=!r.ShapeUtil.areEqual(n[0].dims,n[1].dims);if(!f)throw new Error("Can't use matmul on the given tensors");const g=d[d.length-1],y=Math.ceil(g/2),v=d.length,b=p.length,x=(0,i.getGlsl)(t.session.backend.glContext.version),_=(0,a.getCoordsDataType)(f.length),w=f.length,S=(0,a.getGlChannels)(),{activationFunction:T,applyActivation:E}=(0,s.getActivationSnippet)(l),A=u?"".concat((0,c.getBiasForMatmul)(_,S,n[2].dims,f,!0)):"",M=m?"".concat(function(t,e,n,i){let o=[],a=[];const s=n[0].dims,c=n[1].dims,l=s.length,u=c.length,h=i.length,d=h-l,p=h-u;o=s.map(((t,n)=>"coords.".concat(e[n+d]))),o[l-1]="i*2",o.join(", "),a=c.map(((t,n)=>"coords.".concat(e[n+p]))),a[u-2]="i*2",a.join(", ");const f=r.BroadcastUtil.getBroadcastDims(s,i),m=r.BroadcastUtil.getBroadcastDims(c,i),g=f.map((t=>"coords.".concat(e[t+d]," = 0;"))).join("\n"),y=m.map((t=>"coords.".concat(e[t+p]," = 0;"))).join("\n"),v="int lastDim = coords.".concat(e[h-1],";\n  coords.").concat(e[h-1]," = coords.").concat(e[h-2],";\n  coords.").concat(e[h-2]," = lastDim;");return"\nvec4 getAAtOutCoordsMatmul(int i) {\n  ".concat(t," coords = getOutputCoords();\n  ").concat(v,"\n  ").concat(g,"\n  vec4 outputValue = getA(").concat(o,");\n  return outputValue;\n}\n\nvec4 getBAtOutCoordsMatmul(int i) {\n  ").concat(t," coords = getOutputCoords();\n  ").concat(v,"\n  ").concat(y,"\n  vec4 outputValue = getB(").concat(a,");\n  return outputValue;\n}")}(_,S,n,f)):"",O=m?"getAAtOutCoordsMatmul(i)":"getA(".concat(function(t,e){let n="";for(let r=0;r<e-2;r++)n+="rc.".concat(t[r],", ");return n+="rc.".concat(t[e-2],", i*2"),n}(S,v),")"),C=m?"getBAtOutCoordsMatmul(i)":"getB(".concat(function(t,e){let n="";for(let r=0;r<e-2;r++)n+="rc.".concat(t[r],", ");return n+="i*2, rc.".concat(t[e-1]),n}(S,b),")"),k="\n            ".concat(M,"\n            ").concat(A,"\n            ").concat(T,"\n            void main() {\n              ").concat(m?"":"".concat(_," rc =\n          getOutputCoords(); int lastDim = rc.").concat(S[w-1],"; rc.").concat(S[w-1]," =\n          rc.").concat(S[w-2],"; rc.").concat(S[w-2]," = lastDim;\n      "),"\n\n              vec4 value = vec4(0);\n              for (int i = 0; i < ").concat(y,"; i++) {\n                vec4 a = ").concat(O,";\n                vec4 b = ").concat(C,";\n\n                value += (a.rrbb * b.rgrg);\n                value += (a.ggaa * b.baba);\n              }\n              ").concat(h,"\n              ").concat(E,"\n              ").concat(x.output," = value;\n            }");return Object.assign(Object.assign({},e),{output:{dims:f,type:n[0].type,textureType:o.TextureType.packed},shaderSource:k,hasMain:!0})})(t,l,e,n)})}},5623:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBiasForMatmul=e.createMatmulProgramInfoLoader=e.parseMatMulAttributes=e.matMul=void 0;const r=n(2517),i=n(2039),o=n(9390),a=n(2823),s=n(708);function c(t,e){const n=(s=t.length>2,c=e.activationCacheKey,{name:"MatMul",inputNames:s?["A","B","Bias"]:["A","B"],inputTypes:s?[i.TextureType.unpacked,i.TextureType.unpacked,i.TextureType.unpacked]:[i.TextureType.unpacked,i.TextureType.unpacked],cacheHint:c});var s,c;return Object.assign(Object.assign({},n),{get:()=>function(t,e,n){const s=e[0].dims,c=e[1].dims,l=r.BroadcastUtil.calcShape(s,c,!0);if(!l)throw new Error("Can't use matmul on the given tensors");const h=(0,o.getCoordsDataType)(l.length),d=(0,o.getGlChannels)(),{activationFunction:p,applyActivation:f}=(0,a.getActivationSnippet)(n),m=e.length>2,g=m?"value += getBiasForMatmul();":"",y=m?"".concat(u(h,d,e[2].dims,l,!1)):"",v=l.length,b=s.length,x=c.length,_="\n    ".concat(p,"\n    ").concat(y,"\n    float process(int indices[").concat(v,"]) {\n        int a[").concat(b,"];\n        int b[").concat(x,"];\n        bcastMatmulIndices_A(indices, a);\n        bcastMatmulIndices_B(indices, b);\n\n        float value;\n        for (int k=0; k<").concat(s[s.length-1],"; ++k) {\n            a[").concat(b-1,"] = k;\n            b[").concat(x-2,"] = k;\n            value += _A(a) * _B(b);\n        }\n        ").concat(g,"\n        ").concat(f,"\n        return value;\n    }");return Object.assign(Object.assign({},t),{output:{dims:l,type:e[0].type,textureType:i.TextureType.unpacked},shaderSource:_})}(n,t,e)})}e.matMul=(t,e,n)=>(l(e),t.session.pack?[t.run((0,s.createPackedMatmulProgramInfoLoader)(t,e,n),e)]:[t.run(c(e,n),e)]),e.parseMatMulAttributes=t=>(0,a.parseInternalActivationAttributes)(t.attributes),e.createMatmulProgramInfoLoader=c;const l=t=>{if(!t||2!==t.length)throw new Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw new Error("shared dimension does not match.");if("float32"!==t[0].type&&"float64"!==t[0].type||"float32"!==t[1].type&&"float64"!==t[1].type)throw new Error("inputs should be float type");if(t[0].type!==t[1].type)throw new Error("inputs types should match")};function u(t,e,n,i,o){let a="";const s=n.length,c=i.length,l=c-s;a=c<2&&s>0?"coords":n.map(((t,n)=>"coords.".concat(e[n+l]))).join(", ");const u=r.BroadcastUtil.getBroadcastDims(n,i).map((t=>"coords.".concat(e[t+l]," = 0;"))).join("\n");let h="vec4(outputValue.xx, outputValue.yy)";return 1===r.ShapeUtil.size(n)&&(h="vec4(outputValue.x)"),o?"\nvec4 getBiasForMatmul() {\n  ".concat(t," coords = getOutputCoords();\n  ").concat(u,"\n  vec4 outputValue = getBias(").concat(a,");\n  return ").concat(h,";\n}"):"\nfloat getBiasForMatmul() {\n  ".concat(t," coords = getOutputCoords();\n  ").concat(u,"\n  return getBias(coords.x);\n}")}e.getBiasForMatmul=u},2403:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createPackProgramInfoLoader=void 0;const r=n(5060),i=n(2039),o=n(9390),a=n(2827),s={name:"pack",inputNames:["A"],inputTypes:[i.TextureType.unpackedReversed]};e.createPackProgramInfoLoader=(t,e)=>Object.assign(Object.assign({},s),{get:()=>((t,e)=>{const n=(0,r.getGlsl)(t.session.backend.glContext.version),c=e.dims,l=c.length,u=e.dims.length,h=(0,o.getCoordsDataType)(u),d=(0,a.getChannels)("rc",u),p=(f=u,m=d,g=c[c.length-2],y=c[c.length-1],0===f||1===f?"":"\n    int r = ".concat(m[f-2],";\n    int c = ").concat(m[f-1],";\n    int rp1 = ").concat(m[f-2]," + 1;\n    int cp1 = ").concat(m[f-1]," + 1;\n    bool rEdge = rp1 >= ").concat(y,";\n    bool cEdge = cp1 >= ").concat(g,";\n    "));var f,m,g,y;let v;v=0===l?[1,1]:1===l?[c[0],1]:[c[u-1],c[u-2]];const b=function(t,e,n){if(0===t)return"false";if(1===t)return"rc > ".concat(e[0]);let r="";for(let i=t-2;i<t;i++)r+="".concat(n[i]," >= ").concat(e[i-t+2]),i<t-1&&(r+="||");return r}(u,v,d),x=function(t,e){const n=t.length;if(0===n)return"getA(), 0, 0, 0";if(1===n)return"getA(rc),\n            rc + 1 >= ".concat(t[0]," ? 0. : getA(rc + 1),\n            0, 0");let r="";if(n>2)for(let i=0;i<n-2;++i)r+="".concat(e[i],",");return"getA(".concat(r,"r, c),\n          rEdge ? 0. : getA(").concat(r,"rp1, c),\n          cEdge ? 0. : getA(").concat(r,"r, cp1),\n          rEdge || cEdge ? 0. : getA(").concat(r,"rp1, cp1)")}(c,d),_="\n        void main() {\n          ".concat(h," rc = getOutputCoords();\n\n          if(").concat(b,") {\n            ").concat(n.output," = vec4(0);\n          } else {\n            ").concat(p,"\n\n            ").concat(n.output," = vec4(").concat(x,");\n          }\n        }\n      ");return Object.assign(Object.assign({},s),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:i.TextureType.packed},shaderSource:_})})(t,e)})},2827:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unpackFromChannel=e.getChannels=e.getVecChannels=void 0;const r=n(9390);function i(t,e){return(0,r.getGlChannels)(e).map((e=>"".concat(t,".").concat(e)))}e.getVecChannels=i,e.getChannels=function(t,e){return 1===e?[t]:i(t,e)},e.unpackFromChannel=function(){return"\n    float getChannel(vec4 frag, int dim) {\n      int modCoord = imod(dim, 2);\n      return modCoord == 0 ? frag.r : frag.g;\n    }\n\n    float getChannel(vec4 frag, vec2 innerDims) {\n      vec2 modCoord = mod(innerDims, 2.);\n      return modCoord.x == 0. ?\n        (modCoord.y == 0. ? frag.r : frag.g) :\n        (modCoord.y == 0. ? frag.b : frag.a);\n    }\n  "}},2870:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributesV11=e.padV11=e.parsePadAttributesV2=e.padV2=void 0;const r=n(246),i=n(2517),o=n(5060),a=n(2039),s={name:"Pad",inputNames:["A"],inputTypes:[a.TextureType.unpacked]};e.padV2=(t,e,n)=>(u(e),[t.run(Object.assign(Object.assign({},s),{cacheHint:n.cacheKey,get:()=>l(t,e[0],n)}),e)]),e.parsePadAttributesV2=t=>{const e=t.attributes.getString("mode","constant"),n=t.attributes.getFloat("value",0),i=t.attributes.getInts("pads");return(0,r.createAttributeWithCacheKey)({mode:e,value:n,pads:i})},e.padV11=(t,n,r)=>{h(n);const i=c(t,n,r);return(0,e.padV2)(t,[n[0]],i)},e.parsePadAttributesV11=t=>t.attributes.getString("mode","constant");const c=(t,e,n)=>{if(!t.session.isInitializer(e[1].dataId)||e.length>=3&&!t.session.isInitializer(e[2].dataId))throw new Error("dynamic pad attributes are not allowed");const i=Array.from(e[1].integerData),o=e.length>=3?e[2].floatData[0]:0;return(0,r.createAttributeWithCacheKey)({mode:n,pads:i,value:o})},l=(t,e,n)=>{const r=i.ShapeUtil.padShape(e.dims.slice(),n.pads),o=r.length,s="\n      ".concat(d(t,e,n),"\n      float process(int[").concat(o,"] indices) {\n          return padA(indices);\n      }");return{name:"Pad",inputNames:["A"],inputTypes:[a.TextureType.unpacked],output:{dims:r,type:e.type,textureType:a.TextureType.unpacked},shaderSource:s}},u=t=>{if(!t||1!==t.length)throw new Error("Pad requires 1 input");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")},h=t=>{if(!t||2!==t.length&&3!==t.length)throw new Error("Pad requires 2 or 3 inputs");if("int32"!==t[1].type)throw new Error("Invalid input type.");if(t.length>=3&&"string"===t[2].type)throw new Error("Invalid input type.")},d=(t,e,n)=>{const r=(0,o.getGlsl)(t.session.backend.glContext.version),[s,c]=t.calculateTextureWidthAndHeight(e.dims,a.TextureType.unpacked),l=i.ShapeUtil.computeStrides(e.dims);switch(n.mode){case"constant":return p(r,e.dims,l,s,c,n.pads,n.value);case"reflect":return f(r,e.dims,l,s,c,n.pads);case"edge":return m(r,e.dims,l,s,c,n.pads);default:throw new Error("Invalid mode")}},p=(t,e,n,r,i,o,a)=>{const s=e.length;let c="";for(let l=s-1;l>=0;--l)c+="\n        k = m[".concat(l,"] - ").concat(o[l],";\n        if (k < 0)  return constant;\n        if (k >= ").concat(e[l],") return constant;\n        offset += k * ").concat(n[l],";\n        ");return"\n      float padA(int m[".concat(s,"]) {\n        const float constant = float(").concat(a,");\n        int offset = 0;\n        int k = 0;\n        ").concat(c,"\n        vec2 coords = offsetToCoords(offset, ").concat(r,", ").concat(i,");\n        float value = getColorAsFloat(").concat(t.texture2D,"(A, coords));\n        return value;\n      }\n      ")},f=(t,e,n,r,i,o)=>{const a=e.length;let s="";for(let c=a-1;c>=0;--c)s+="\n        k = m[".concat(c,"] - ").concat(o[c],";\n        if (k < 0) { k = -k; }\n        {\n          const int _2n_1 = ").concat(2*(e[c]-1),";\n          k = int( mod( float(k), float(_2n_1) ) ) ;\n          if(k >= ").concat(e[c],") { k = _2n_1 - k; }\n        }\n        offset += k * ").concat(n[c],";\n        ");return"\n      float padA(int m[".concat(a,"]) {\n        int offset = 0;\n        int k = 0;\n        ").concat(s,"\n        vec2 coords = offsetToCoords(offset, ").concat(r,", ").concat(i,");\n        float value = getColorAsFloat(").concat(t.texture2D,"(A, coords));\n        return value;\n      }\n      ")},m=(t,e,n,r,i,o)=>{const a=e.length;let s="";for(let c=a-1;c>=0;--c)s+="\n        k = m[".concat(c,"] - ").concat(o[c],";\n        if (k < 0)  k = 0;\n        if (k >= ").concat(e[c],") k = ").concat(e[c]-1,";\n        offset += k * ").concat(n[c],";\n      ");return"\n      float padA(int m[".concat(a,"]) {\n        int offset = 0;\n        int k = 0;\n        ").concat(s,"\n        vec2 coords = offsetToCoords(offset, ").concat(r,", ").concat(i,");\n        float value = getColorAsFloat(").concat(t.texture2D,"(A, coords));\n        return value;\n      }\n      ")}},2143:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseMaxPoolAttributes=e.maxPool=e.parseGlobalAveragePoolAttributes=e.globalAveragePool=e.parseAveragePoolAttributes=e.averagePool=void 0;const r=n(246),i=n(2517),o=n(2039);e.averagePool=(t,e,n)=>{h(e);const r={name:"AveragePool",inputNames:["X"],inputTypes:[o.TextureType.unpacked],cacheHint:n.cacheKey};return[t.run(Object.assign(Object.assign({},r),{get:()=>a(e,r,!1,n)}),e)]},e.parseAveragePoolAttributes=t=>{const e=t.attributes.getString("auto_pad","NOTSET"),n=t.attributes.getInt("ceil_mode",0),i=0!==t.attributes.getInt("count_include_pad",0),o=t.attributes.getInts("kernel_shape"),a=t.attributes.getInts("strides",[]),s=t.attributes.getInts("pads",[]);if(0!==n)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,r.createAttributeWithCacheKey)({autoPad:e,ceilMode:n,countIncludePad:i,kernelShape:o,strides:a,pads:s})};const a=(t,e,n,r)=>{const[a,s]=c(t,r,n),l=i.ShapeUtil.size(a.kernelShape);let u="";a.countIncludePad?u+="value /= float(".concat(l,");"):u+="value /= float(".concat(l," - pad);");const h="\n        ".concat(d(t[0].dims,a,"value += _X(x);",u,"0.0"),"\n      ");return Object.assign(Object.assign({},e),{output:{dims:s,type:t[0].type,textureType:o.TextureType.unpacked},shaderSource:h})};e.globalAveragePool=(t,e,n)=>{h(e);const r={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[o.TextureType.unpacked],cacheHint:"".concat(n.countIncludePad)};return[t.run(Object.assign(Object.assign({},r),{get:()=>a(e,r,!0,n)}),e)]},e.parseGlobalAveragePoolAttributes=t=>{const e=0!==t.attributes.getInt("count_include_pad",0);return(0,r.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:e,kernelShape:[],strides:[],pads:[]})},e.maxPool=(t,e,n)=>{h(e);const r={name:"MaxPool",inputNames:["X"],inputTypes:[o.TextureType.unpacked],cacheHint:n.cacheKey};return[t.run(Object.assign(Object.assign({},r),{get:()=>s(e,r,!1,n)}),e)]},e.parseMaxPoolAttributes=t=>{const e=t.attributes.getString("auto_pad","NOTSET"),n=t.attributes.getInt("ceil_mode",0),i=t.attributes.getInts("kernel_shape"),o=t.attributes.getInts("strides",[]),a=t.attributes.getInts("pads",[]),s=t.attributes.getInt("storage_order",0),c=t.attributes.getInts("dilations",[]);if(0!==s)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==n)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,r.createAttributeWithCacheKey)({autoPad:e,ceilMode:n,countIncludePad:!1,kernelShape:i,strides:o,pads:a,storageOrder:s,dilations:c})};const s=(t,e,n,r)=>{const[i,a]=c(t,r,n),s="\n      ".concat(d(t[0].dims,i,"\n      value = max(_X(x), value);\n    ","","-1e5"),"\n    ");return Object.assign(Object.assign({},e),{output:{dims:a,type:t[0].type,textureType:o.TextureType.unpacked},shaderSource:s})},c=(t,e,n)=>{const r=t[0].dims.slice(),o=Object.hasOwnProperty.call(e,"dilations"),a=e.kernelShape.slice(),s=e.strides.slice(),c=o?e.dilations.slice():[],l=e.pads.slice();i.PoolConvUtil.adjustPoolAttributes(n,r,a,s,c,l);const u=i.PoolConvUtil.computePoolOutputShape(n,r,s,c,a,l,e.autoPad),h=Object.assign({},e);return o?Object.assign(h,{kernelShape:a,strides:s,pads:l,dilations:c,cacheKey:e.cacheKey}):Object.assign(h,{kernelShape:a,strides:s,pads:l,cacheKey:e.cacheKey}),[h,u]},l={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},u={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[o.TextureType.unpacked]};e.globalMaxPool=(t,e)=>(h(e),[t.run(Object.assign(Object.assign({},u),{get:()=>s(e,u,!0,l)}),e)]);const h=t=>{if(!t||1!==t.length)throw new Error("Pool ops requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")},d=(t,e,n,r,o)=>{const a=t.length;if(e.kernelShape.length<=2){const i=e.kernelShape[e.kernelShape.length-1],s=e.strides[e.strides.length-1],c=e.pads[e.pads.length/2-1],l=e.pads[e.pads.length-1],u=t[a-1];let h="",d="",p="";if(h=c+l!==0?"\n          for (int i = 0; i < ".concat(i,"; i++) {\n            x[").concat(a," - 1] = indices[").concat(a," - 1] * ").concat(s," - ").concat(c," + i;\n            if (x[").concat(a," - 1] < 0 || x[").concat(a," - 1] >= ").concat(u,") {\n              pad++;\n              continue;\n            }\n            ").concat(n,"\n          }"):"\n          for (int i = 0; i < ".concat(i,"; i++) {\n            x[").concat(a," - 1] = indices[").concat(a," - 1] * ").concat(s," - ").concat(c," + i;\n            ").concat(n,"\n          }"),2===e.kernelShape.length){const n=e.kernelShape[e.kernelShape.length-2],r=e.strides[e.strides.length-2],o=e.pads[e.pads.length/2-2],s=e.pads[e.pads.length-2],c=t[a-2];d=o+s!==0?"\n            for (int j = 0; j < ".concat(n,"; j++) {\n              x[").concat(a," - 2] = indices[").concat(a," - 2] * ").concat(r," - ").concat(o," + j;\n              if (x[").concat(a," - 2] < 0 || x[").concat(a," - 2] >= ").concat(c,") {\n                pad+= ").concat(i,";\n                continue;\n              }\n          "):"\n            for (int j = 0; j < ".concat(n,"; j++) {\n              x[").concat(a," - 2] = indices[").concat(a," - 2] * ").concat(r," - ").concat(o," + j;\n            "),p="\n          }\n        "}return"\n        float process(int indices[".concat(a,"]) {\n          int x[").concat(a,"];\n          copyVec(indices, x);\n\n          float value = ").concat(o,";\n          int pad = 0;\n          ").concat(d,"\n          ").concat(h,"\n          ").concat(p,"\n          ").concat(r,"\n          return value;\n        }\n      ")}{const s=i.ShapeUtil.size(e.kernelShape),c=i.ShapeUtil.computeStrides(e.kernelShape),l=c.length,u=e.pads.length,h=f(l),d=p(t,"inputDims"),m=p(e.pads,"pads"),g=p(c,"kernelStrides"),y=p(e.strides,"strides");let v="";return v=e.pads.reduce(((t,e)=>t+e))?"\n            if (x[j] >= inputDims[j] || x[j] < 0) {\n              pad++;\n              isPad = true;\n              break;\n            }\n          }\n          if (!isPad) {\n            ".concat(n,"\n          }"):"\n          }\n          ".concat(n,"\n        "),"\n        ".concat(h,"\n        float process(int indices[").concat(a,"]) {\n          int x[").concat(a,"];\n          copyVec(indices, x);\n          int offset[").concat(l,"];\n          int pads[").concat(u,"];\n          int inputDims[").concat(a,"];\n          int kernelStrides[").concat(l,"];\n          int strides[").concat(l,"];\n          ").concat(m,"\n          ").concat(d,"\n          ").concat(y,"\n          ").concat(g,"\n\n          float value = ").concat(o,";\n          int pad = 0;\n          bool isPad = false;\n          for (int i = 0; i < ").concat(s,"; i++) {\n            offsetToIndices(i, kernelStrides, offset);\n            isPad = false;\n            for (int j = ").concat(a," - ").concat(l,"; j < ").concat(a,"; j++) {\n              x[j] = indices[j] * strides[j - ").concat(a," + ").concat(l,"]\n                + offset[j - ").concat(a," + ").concat(l,"] - pads[j - 2];\n              ").concat(v,"\n          }\n          ").concat(r,"\n\n          return value;\n        }\n      ")}},p=(t,e)=>{let n="";for(let r=0;r<t.length;r++)n+="\n      ".concat(e,"[").concat(r,"] = ").concat(t[r],";\n    ");return n},f=t=>"\n  void offsetToIndices(int offset, int[".concat(t,"] strides, out int[").concat(t,"] indices) {\n    if (").concat(t," == 0) {\n      return;\n    }\n    for (int i = 0; i < ").concat(t," - 1; ++i) {\n      indices[i] = offset / strides[i];\n      offset -= indices[i] * strides[i];\n    }\n    indices[").concat(t," - 1] = offset;\n  }")},4939:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reduceLogSumSquare=e.reduceLogSum=e.reduceProd=e.reduceMin=e.reduceMax=e.reduceMean=e.reduceSum=e.parseReduceAttributes=void 0;const r=n(246),i=n(782),o=n(2517),a=n(2039),s=(t,e,n,r,i)=>{l(e);const o={name:r,inputNames:["A"],inputTypes:[a.TextureType.unpacked]};return[t.run(Object.assign(Object.assign({},o),{cacheHint:n.cacheKey,get:()=>c(t,e,n,r,i,o)}),e)]};e.parseReduceAttributes=t=>{const e=t.attributes.getInts("axes",[]),n=1===t.attributes.getInt("keepdims",1);return(0,r.createAttributeWithCacheKey)({axes:e,keepDims:n})};const c=(t,e,n,r,i,s)=>{const c=[],l=e[0].dims.length||1,u=[],h=o.ShapeUtil.normalizeAxes(n.axes,e[0].dims.length),d=i(e,h);let p=d[1];for(let o=0;o<e[0].dims.length;o++)h.indexOf(o)>=0||0===h.length?(n.keepDims&&c.push(1),p="\n          for(int j".concat(o," = 0; j").concat(o," < ").concat(e[0].dims[o],"; j").concat(o,"++) {\n            inputIdx[").concat(o,"] = j").concat(o,";\n            ").concat(p,"\n          }")):(u.push("inputIdx[".concat(o,"] = outputIdx[").concat(c.length,"];")),c.push(e[0].dims[o]));const f="\n      float process(int outputIdx[".concat(c.length||1,"]) {\n        float value;                 // final result\n        int inputIdx[").concat(l,"];      // addressing input data\n        ").concat(u.join("\n"),"\n        ").concat(d[0],"       // init ops for reduce max/min\n        ").concat(p,"\n        ").concat(d[2],"       // final computation for reduce mean\n        return value;\n      }");return Object.assign(Object.assign({},s),{output:{dims:c,type:e[0].type,textureType:a.TextureType.unpacked},shaderSource:f})},l=t=>{if(!t||1!==t.length)throw new Error("Reduce op requires 1 input.");if(-1===i.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.")};e.reduceSum=(t,e,n)=>s(t,e,n,"ReduceSum",(()=>["value = 0.0;","value += _A(inputIdx);",""])),e.reduceMean=(t,e,n)=>s(t,e,n,"ReduceMean",((t,e)=>{let n=1;for(let r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&(n*=t[0].dims[r]);return["value = 0.0;","value += _A(inputIdx);","value /= ".concat(n,".;")]})),e.reduceMax=(t,e,n)=>s(t,e,n,"ReduceMax",((t,e)=>{const n=[];for(let r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&n.push("inputIdx[".concat(r,"] = 0;"));return["".concat(n.join("\n"),"\nvalue = _A(inputIdx);"),"value = max(value, _A(inputIdx));",""]})),e.reduceMin=(t,e,n)=>s(t,e,n,"ReduceMin",((t,e)=>{const n=[];for(let r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&n.push("inputIdx[".concat(r,"] = 0;"));return["".concat(n.join("\n"),"\nvalue = _A(inputIdx);"),"value = min(value, _A(inputIdx));",""]})),e.reduceProd=(t,e,n)=>s(t,e,n,"ReduceProd",(()=>["value = 1.0;","value *= _A(inputIdx);",""])),e.reduceLogSum=(t,e,n)=>s(t,e,n,"ReduceLogSum",(()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"])),e.reduceLogSumSquare=(t,e,n)=>s(t,e,n,"ReduceLogSumSquare",(()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""]))},7019:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isReshapeCheap=e.processDims3D=e.createPackedReshape3DProgramInfoLoader=void 0;const r=n(2517),i=n(5060),o=n(2039),a=n(2827);e.createPackedReshape3DProgramInfoLoader=(t,e,n)=>{const s=(t=>({name:"Reshape (packed)",inputTypes:[o.TextureType.packed],inputNames:["A"],cacheHint:"".concat(t)}))(n);return Object.assign(Object.assign({},s),{get:()=>((t,e,n,s)=>{const c=e.dims,l=s;let u="";for(let r=0;r<4;r++){let t="";switch(r){case 0:t="outputCoords = rc;";break;case 1:t="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:t="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:t="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}u+="\n        ".concat(t,"\n        ").concat(r>0?"if(outputCoords.y < rows && outputCoords.z < cols){":"","\n          int flattenedIndex = getFlattenedIndex(outputCoords);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);\n          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(r,"] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);\n\n        ").concat(r>0?"}":"","\n      ")}const h=(0,i.getGlsl)(t.session.backend.glContext.version),d="\n      ".concat(function(t){const e=r.ShapeUtil.computeStrides(t),n=["b","r","c"],i="index";return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(e.map(((t,r)=>"int ".concat(n[r]," = ").concat(i," / ").concat(t,"; ").concat(r===e.length-1?"int ".concat(n[r+1]," = ").concat(i," - ").concat(n[r]," * ").concat(t):"index -= ".concat(n[r]," * ").concat(t),";"))).join(""),"\n      return ivec3(b, r, c);\n    }\n  ")}(c),"\n      ").concat(function(t){const e=r.ShapeUtil.computeStrides(t);return"\n  int getFlattenedIndex(ivec3 coords) {\n    // reverse y, z order\n    return coords.x * ".concat(e[0]," + coords.z * ").concat(e[1]," + coords.y;\n  }\n")}(l),"\n      ").concat((0,a.unpackFromChannel)(),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.0);\n\n        ivec3 outputCoords;\n        int rows = ").concat(l[2],";\n        int cols = ").concat(l[1],";\n\n        ").concat(u,"\n        ").concat(h.output," = result;\n      }\n    ");return Object.assign(Object.assign({},n),{output:{dims:l,type:e.type,textureType:o.TextureType.packed},shaderSource:d,hasMain:!0})})(t,e,s,n)})},e.processDims3D=function(t){if(0===t.length)return[1,1,1];let e=1;for(let n=0;n<t.length-2;++n)e*=t[n];return[e,t.length>1?t[t.length-2]:1,t[t.length-1]]},e.isReshapeCheap=function(t,e){let n=!1;return n=0===t.length||0===e.length||(t.length<2||e.length<2?t[t.length-1]===e[e.length-1]:t[t.length-1]===e[e.length-1]&&t[t.length-2]===e[e.length-2]),n}},718:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=void 0;const r=n(2517);e.reshape=(t,e)=>{const n=r.ShapeUtil.calculateReshapedDims(e[0].dims,e[1].integerData);return t.session.pack?[t.reshapePacked(e[0],n)]:[t.reshapeUnpacked(e[0],n)]}},2268:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributesV11=e.parseResizeAttributesV10=e.resize=void 0;const r=n(5060),i=n(2039),o=n(9390),a=n(2827),s=n(9793),c={name:"Resize",inputNames:["A"],inputTypes:[i.TextureType.packed]};e.resize=(t,e,n)=>((0,s.validateInputs)(e,n),[t.run(Object.assign(Object.assign({},c),{cacheHint:n.cacheKey,get:()=>l(t,e,n)}),e)]),e.parseResizeAttributesV10=t=>(0,s.parseUpsampleAttributes)(t,10),e.parseResizeAttributesV11=t=>(0,s.parseUpsampleAttributes)(t,11);const l=(t,e,n)=>{const s=(0,r.getGlsl)(t.session.backend.glContext.version),[l,h]=u(e,n);if(l.every((t=>1===t))&&"tf_crop_and_resize"!==n.coordinateTransformMode)return Object.assign(Object.assign({},c),{output:{dims:h,type:e[0].type,textureType:i.TextureType.packed},hasMain:!0,shaderSource:"void main() {\n                    vec4 v = ".concat(s.texture2D,"(X, TexCoords);\n                    ").concat(s.output," = v;\n                }")});const d=h.length;if(d<2)throw new Error("output dimension should be at least 2, but got ".concat(d));const p=h[d-2],f=h[d-1],m=e[0].dims;if(d!==m.length)throw new Error("output dimension should match input ".concat(m.length,", but got ").concat(d));const g=m[d-2],y=m[d-1],v=l[d-2],b=l[d-1];let x="";if("linear"!==n.mode)throw new Error("resize (packed) does not support mode: '".concat(n.mode,"'"));switch(n.coordinateTransformMode){case"asymmetric":x="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return vec4(coords) / scaleWHWH;\n                    }\n                ";break;case"half_pixel":x="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;\n                    }\n                ";break;case"pytorch_half_pixel":x="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 fcoords = vec4(coords);\n                        return vec4(\n                            ".concat(f,".0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,\n                            ").concat(p,".0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,\n                            ").concat(f,".0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,\n                            ").concat(p,".0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0\n                          );\n                    }\n                ");break;case"align_corners":x="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 resized = vec4(".concat(f,".0 - 1.0, ").concat(p,".0 - 1.0, ").concat(f,".0 - 1.0,\n                            ").concat(p,".0 - 1.0);\n                        vec4 original = vec4(").concat(y,".0 - 1.0, ").concat(g,".0 - 1.0, ").concat(y,".0 - 1.0,\n                            ").concat(g,".0 - 1.0);\n                        vec4 new_scale = original / resized;\n                        return vec4(coords) * new_scale;\n                    }\n                ");break;default:throw new Error("resize (packed) does not support coordinateTransformMode:                                 '".concat(n.coordinateTransformMode,"'"))}const _=(0,o.getCoordsDataType)(d),w="\n            const vec2 inputWH = vec2(".concat(g,".0, ").concat(y,".0);\n            const vec4 scaleWHWH = vec4(float(").concat(v,"), float(").concat(b,"), float(").concat(v,"), float(").concat(b,"));\n            ").concat((0,a.unpackFromChannel)(),"\n            ").concat(x,"\n            float getAValue(int x10, int r, int c, int d) {\n                return getChannel(getA(x10, r, c, d), vec2(c, d));\n            }\n            void main() {\n                ").concat(_," rc = getOutputCoords();\n\n                int batch = rc[0];\n                int depth = rc[1];\n\n                // retrieve the 4 coordinates that is used in the 4 packed output values.\n                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);\n\n                // calculate the source index in fraction\n                vec4 sourceFrac = getSourceFracIndex(coords);\n\n                // get the lower and upper bound of the 4 values that will be packed into one texel.\n                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));\n                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));\n                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));\n                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));\n\n                bool hasNextRow = rc.w < ").concat(p-1,";\n                bool hasNextCol = rc.z < ").concat(f-1,";\n\n                // pack x00, x01, x10, x11's top-left corner into one vec4 structure\n                vec4 topLeft = vec4(\n                    getAValue(batch, depth, x00.x, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's top-right corner into one vec4 structure\n                vec4 topRight = vec4(\n                    getAValue(batch, depth, x00.x, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure\n                vec4 bottomLeft = vec4(\n                    getAValue(batch, depth, x00.z, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure\n                vec4 bottomRight = vec4(\n                    getAValue(batch, depth, x00.z, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);\n\n                // calculate the interpolation fraction on u and v direction\n                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);\n                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));\n\n                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);\n                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);\n                vec4 newValue = mix(top, bottom, clampFrac.xxzz);\n\n                ").concat(s.output," = vec4(newValue);\n            }\n        ");return Object.assign(Object.assign({},c),{output:{dims:h,type:e[0].type,textureType:i.TextureType.packed},hasMain:!0,shaderSource:w})},u=(t,e)=>{const n=t[0].dims;let r,i=e.scales;if(0===i.length){const o=t[e.scalesInputIdx];if(o&&0!==o.size){if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");i=h(o,e.mode,e.isResize)}else{const o=t[e.sizesInputIdx];if(!o||0===o.size)throw new Error("Either scales or sizes MUST be provided as input.");r=Array.from(o.integerData),i=d(r,n,e.mode,e.isResize)}}else if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const o=r||n.map(((t,e)=>Math.floor(t*i[e])));return[i,o]},h=(t,e,n)=>{const r=Array.from(t.floatData);return(0,s.scalesValidation)(r,e,n),r},d=(t,e,n,r)=>{const i=e.length,o=new Array(i);for(let a=0,s=i;a<s;a++)if(0===e[a]){if(0!==t[a])throw new Error("Input dim is zero but required output dim is non-zero.");o[a]=1}else o[a]=t[a]/e[a];return(0,s.scalesValidation)(o,n,r),o}},8117:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shape=void 0;const r=n(9162);e.shape=(t,e)=>(i(e),[new r.Tensor([e[0].dims.length],"int32",void 0,void 0,new Int32Array(e[0].dims))]);const i=t=>{if(!t||1!==t.length)throw new Error("Shape requires 1 input.")}},2278:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sliceV10=e.parseSliceAttributes=e.slice=void 0;const r=n(246),i=n(782),o=n(2517),a=n(2039),s={name:"Slice",inputNames:["A"],inputTypes:[a.TextureType.unpacked]};e.slice=(t,e,n)=>(l(e),[t.run(Object.assign(Object.assign({},s),{cacheHint:n.cacheKey,get:()=>c(t,e[0],n)}),e)]),e.parseSliceAttributes=t=>{const e=t.attributes.getInts("starts"),n=t.attributes.getInts("ends"),i=t.attributes.getInts("axes",[]);return(0,r.createAttributeWithCacheKey)({starts:e,ends:n,axes:i})};const c=(t,e,n)=>{const r=0===n.axes.length?e.dims.slice(0).map(((t,e)=>e)):n.axes,i=o.ShapeUtil.normalizeAxes(r,e.dims.length),c=n.starts.map(((t,n)=>t>e.dims[i[n]]-1?e.dims[i[n]]:o.ShapeUtil.normalizeAxis(t,e.dims[i[n]]))),l=n.ends.map(((t,n)=>t>e.dims[i[n]]-1?e.dims[i[n]]:o.ShapeUtil.normalizeAxis(t,e.dims[i[n]]))),u=e.dims.slice(),h=[];for(let o=0;o<i.length;o++)u[i[o]]=l[o]-c[o],c[o]>0&&h.push("outputIdx[".concat(i[o],"] += ").concat(c[o],";"));const d="\n      float process(int outputIdx[".concat(u.length,"]) {\n        ").concat(h.join("\n      "),"\n        return _A(outputIdx);\n      }");return Object.assign(Object.assign({},s),{output:{dims:u,type:e.type,textureType:a.TextureType.unpacked},shaderSource:d})},l=t=>{if(!t||1!==t.length)throw new Error("Slice requires 1 input.");if(-1===i.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.")};e.sliceV10=(t,e)=>{h(e);const n=u(t,e);return[t.run(Object.assign(Object.assign({},s),{cacheHint:n.cacheKey,get:()=>c(t,e[0],n)}),[e[0]])]};const u=(t,e)=>{if(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)||e.length>=4&&!t.session.isInitializer(e[3].dataId)||e.length>=5&&!t.session.isInitializer(e[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(e.length>=5&&e[4].integerData.some((t=>1!==t)))throw new Error("currently non-1 steps is not supported for Slice");const n=Array.from(e[1].integerData),r=Array.from(e[2].integerData),i=e.length>=4?Array.from(e[3].integerData):[];return{starts:n,ends:r,axes:i,cacheKey:"".concat(i,";").concat(n,";").concat(r)}},h=t=>{if(!t||t.length<3||t.length>5)throw new Error("Invalid input number.");if("int32"!==t[1].type||1!==t[1].dims.length)throw new Error("Invalid input type.");if("int32"!==t[2].type||1!==t[2].dims.length)throw new Error("Invalid input type.");if(t.length>=4&&("int32"!==t[3].type||1!==t[3].dims.length))throw new Error("Invalid input type.");if(t.length>=5&&("int32"!==t[4].type||1!==t[4].dims.length))throw new Error("Invalid input type.")}},5524:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.softmaxV13=e.parseSoftmaxAttributesV13=e.parseSoftmaxAttributes=e.softmax=void 0;const r=n(246),i=n(2517),o=n(5060),a=n(2039),s=n(3738),c={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[a.TextureType.unpacked]},l={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[a.TextureType.unpacked,a.TextureType.unpacked]},u={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[a.TextureType.unpacked,a.TextureType.unpacked,a.TextureType.unpacked]};e.softmax=(t,e,n)=>{m(e);const r=e[0].dims.slice(),o=i.ShapeUtil.normalizeAxis(n.axis,r.length),a=i.ShapeUtil.sizeToDimension(r,o),s=i.ShapeUtil.sizeFromDimension(r,o);return h(t,e,n,a,s)},e.parseSoftmaxAttributes=t=>(0,r.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",1)}),e.parseSoftmaxAttributesV13=t=>(0,r.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",-1)}),e.softmaxV13=(t,e,n)=>{m(e);const o=e[0].dims.slice(),a=i.ShapeUtil.normalizeAxis(n.axis,o.length),c=o.length,l=a!==c-1,u=[];let d,p=[],f=[];l&&(p=Array.from({length:c}).map(((t,e)=>e)),p[a]=c-1,p[c-1]=a,p.map((t=>u.push(o[t]))),d=(0,r.createAttributeWithCacheKey)({perm:p}),f=(0,s.transpose)(t,e,d));const g=l?i.ShapeUtil.sizeToDimension(u,c-1):i.ShapeUtil.sizeToDimension(o,c-1),y=l?i.ShapeUtil.sizeFromDimension(u,c-1):i.ShapeUtil.sizeFromDimension(o,c-1),v=h(t,l?f:e,n,g,y);return l?(0,s.transpose)(t,v,d):v};const h=(t,e,n,r,i)=>{const o=d(t,e[0],r,i,[r]),a=t.run(Object.assign(Object.assign({},c),{cacheHint:n.cacheKey,get:()=>o}),e),s=p(t,e[0],r,i,o.output.dims,[r]),h=t.run(Object.assign(Object.assign({},l),{cacheHint:n.cacheKey,get:()=>s}),[e[0],a]),m=f(t,e[0],r,i,o.output.dims,s.output.dims);return[t.run(Object.assign(Object.assign({},u),{cacheHint:n.cacheKey,get:()=>m}),[e[0],a,h])]},d=(t,e,n,r,i)=>{const[s,l]=t.calculateTextureWidthAndHeight(e.dims,a.TextureType.unpacked),u=i.length;if(n<1||r<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.length)throw new Error("Dimensionality of the output should be 1");if(i[0]!==n)throw new Error("Shape of the output should be equal to logical row count");const h=(0,o.getGlsl)(t.session.backend.glContext.version),d="\n      float process(int[".concat(u,"] indices) {\n        int logical_row_start_offset = indices[0] * ").concat(r,";\n\n        float max = getColorAsFloat(").concat(h.texture2D,"(A, offsetToCoords(logical_row_start_offset, ").concat(s,",\n        ").concat(l," )));\n        for(int i=1; i<").concat(r,"; ++i)\n        {\n          float current = getColorAsFloat(").concat(h.texture2D,"(A, offsetToCoords(logical_row_start_offset + i,\n            ").concat(s,", ").concat(l,")));\n          if(current > max)\n          max = current;\n        }\n\n        return max;\n      }");return Object.assign(Object.assign({},c),{output:{dims:i,type:e.type,textureType:a.TextureType.unpacked},shaderSource:d})},p=(t,e,n,r,i,s)=>{const[c,u]=t.calculateTextureWidthAndHeight(e.dims,a.TextureType.unpacked),h=s.length;if(n<1||r<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==s.length)throw new Error("Dimensionality of the output should be 1");if(s[0]!==n)throw new Error("Shape of the output should be equal to logical row count");if(1!==i.length)throw new Error("Dimensionality of the intermediate results should be 1");if(i[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");const d="\n      float process(int[".concat(h,"] indices) {\n        int logical_row_start_offset = indices[0] * ").concat(r,";\n\n        float norm_factor = 0.0;\n        float max = _Max(indices);\n        for(int i=0; i<").concat(r,"; ++i)\n        {\n          norm_factor += exp(getColorAsFloat(").concat((0,o.getGlsl)(t.session.backend.glContext.version).texture2D,"(A, offsetToCoords(logical_row_start_offset + i,\n            ").concat(c,", ").concat(u,"))) - max);\n        }\n\n        return norm_factor;\n      }");return Object.assign(Object.assign({},l),{output:{dims:s,type:e.type,textureType:a.TextureType.unpacked},shaderSource:d})},f=(t,e,n,r,i,o)=>{const[s,c]=t.calculateTextureWidthAndHeight(e.dims,a.TextureType.unpacked),l=e.dims.length;if(n<1||r<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.length||1!==o.length)throw new Error("Dimensionality of the intermediate results should be 1");if(i[0]!==n||o[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");const h="\n      float process(int[".concat(l,"] indices) {\n\n      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)\n      int offset = coordsToOffset(TexCoords, ").concat(s,", ").concat(c,");\n\n      //determine the logical row for this index\n      int logical_row_index[1];\n      logical_row_index[0] = offset / ").concat(r,";\n\n      float norm_factor = _Norm(logical_row_index);\n\n      // avoid possible division by 0\n      // if norm_facor is 0, all elements are zero\n      // if so, return 0\n      if(norm_factor == 0.0)\n        return 0.0;\n\n      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;\n    }");return Object.assign(Object.assign({},u),{output:{dims:e.dims,type:e.type,textureType:a.TextureType.unpacked},shaderSource:h})},m=t=>{if(!t||1!==t.length)throw new Error("Softmax requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type")}},5975:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;const r=n(246),i=n(2517),o=n(2039),a={name:"Split",inputNames:["A"],inputTypes:[o.TextureType.unpacked]};e.split=(t,e,n)=>{l(e);const r=i.ShapeUtil.normalizeAxis(n.axis,e[0].dims.length),o=s(t,e,r,n),u=[];for(let i=0;i<o;++i)u.push(t.run(Object.assign(Object.assign({},a),{cacheHint:"".concat(n.cacheKey,";").concat(i),get:()=>c(t,e[0],n,r,i)}),e));return u},e.parseSplitAttributes=t=>{const e=t.attributes.getInt("axis",0),n=t.attributes.getInts("split",[]),i=t.outputs.length;return(0,r.createAttributeWithCacheKey)({axis:e,split:n,numOutputs:i})};const s=(t,e,n,r)=>{const[,o]=i.SplitUtil.splitShape(e[0].dims,n,r.split,r.numOutputs);return o.length},c=(t,e,n,r,s)=>{const[c,l]=i.SplitUtil.splitShape(e.dims,r,n.split,n.numOutputs),u=l[s],h=c[s],d="\n      float process(int indices[".concat(h.length,"]) {\n        indices[").concat(r,"] += ").concat(u,";\n        return _A(indices);\n      }\n    ");return Object.assign(Object.assign({},a),{cacheHint:"".concat(n.cacheKey,":").concat(s),output:{dims:h,type:e.type,textureType:o.TextureType.unpacked},shaderSource:d})},l=t=>{if(!t||1!==t.length)throw new Error("Split requires one input.");if("int8"!==t[0].type&&"uint8"!==t[0].type&&"int16"!==t[0].type&&"uint16"!==t[0].type&&"int32"!==t[0].type&&"uint32"!==t[0].type&&"float32"!==t[0].type&&"float64"!==t[0].type&&"bool"!==t[0].type)throw new Error("Invalid input type.")}},3933:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseSqueezeAttributes=e.squeezeV13=e.squeeze=void 0;const r=n(2517);e.squeeze=(t,e,n)=>{i(e);const o=r.ShapeUtil.squeezeShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],o)]},e.squeezeV13=(t,n)=>(o(n),(0,e.squeeze)(t,[n[0]],Array.from(n[1].integerData))),e.parseSqueezeAttributes=t=>t.attributes.getInts("axes");const i=t=>{if(!t||1!==t.length)throw new Error("Squeeze requires 1 input.");if("string"===t[0].type)throw new Error("invalid input tensor types.")},o=t=>{if(!t||2!==t.length)throw new Error("Squeeze requires 2 inputs.");if("int32"!==t[1].type)throw new Error("Invalid input type.")}},6558:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sum=void 0;const r=n(5060),i=n(2039);e.sum=(t,e)=>{a(e);const n={name:"Sum",inputNames:e.map(((t,e)=>"X".concat(e))),inputTypes:new Array(e.length).fill(i.TextureType.unpacked)};return[t.run(Object.assign(Object.assign({},n),{get:()=>o(t,e,n)}),e)]};const o=(t,e,n)=>{const o=(0,r.getGlsl)(t.session.backend.glContext.version),a=e[0].dims.slice(),s="\n      void main() {\n        vec4 result = ".concat(e.map(((t,e)=>"".concat(o.texture2D,"(X").concat(e,",TexCoords)"))).join(" + "),";\n        ").concat(o.output," = result;\n      }\n    ");return Object.assign(Object.assign({},n),{output:{dims:a,type:e[0].type,textureType:i.TextureType.unpacked},hasMain:!0,shaderSource:s})},a=t=>{if(!t||0===t.length)throw new Error("Sum requires inputs.");const e=t[0].dims.length;for(let n=1;n<t.length;n++){if(e!==t[n].dims.length)throw new Error("Input shapes are mismatched.");for(let r=0;r<e;r++)if(t[0].dims[r]!==t[n].dims[r])throw new Error("Input shapes are not matched.")}if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.");for(let n=1;n<t.length;n++)if(t[0].type!==t[n].type)throw new Error("Input types are not matched.")}},5723:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tile=void 0;const r=n(782),i=n(2039);e.tile=(t,e)=>{a(e);const n={name:"Tile",inputNames:["A"],inputTypes:[i.TextureType.unpacked]};return[t.run(Object.assign(Object.assign({},n),{get:()=>o(t,e,n)}),e)]};const o=(t,e,n)=>{const r=e[0].dims.slice(),o=new Array(r.length),a=[];for(let i=0;i<r.length;i++)o[i]=r[i]*e[1].numberData[i],a.push("inputIdx[".concat(i,"] = int(mod(float(outputIdx[").concat(i,"]), ").concat(r[i],".));"));const s=o.length,c="\n      float process(int outputIdx[".concat(s,"]) {\n        int inputIdx[").concat(s,"];\n        ").concat(a.join("\n"),"\n        return _A(inputIdx);\n      }\n    ");return Object.assign(Object.assign({},n),{output:{dims:o,type:e[0].type,textureType:i.TextureType.unpacked},shaderSource:c})},a=t=>{if(!t||2!==t.length)throw new Error("Tile requires 2 input.");if(1!==t[1].dims.length)throw new Error("The second input shape must 1 dimension.");if(t[1].dims[0]!==t[0].dims.length)throw new Error("Invalid input shape.");if(-1===r.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.");if("int32"!==t[1].type&&"int16"!==t[1].type)throw new Error("Invalid repeat type.")}},3738:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=void 0;const r=n(246),i=n(2517),o=n(2039),a={name:"Transpose",inputNames:["A"],inputTypes:[o.TextureType.unpacked]};e.transpose=(t,e,n)=>(h(e),[t.run(Object.assign(Object.assign({},a),{cacheHint:n.cacheKey,get:()=>s(t,e[0],n.perm)}),e)]),e.parseTransposeAttributes=t=>(0,r.createAttributeWithCacheKey)({perm:t.attributes.getInts("perm",[])});const s=(t,e,n)=>{const r=e.dims;n=c(r,n);const i=l(r,n),s=r.length,h="\n      ".concat(u("perm",n,s),"\n      float process(int indices[").concat(s,"]) {\n        int a[").concat(s,"];\n        perm(a, indices);\n        return _A(a);\n      }");return Object.assign(Object.assign({},a),{output:{dims:i,type:e.type,textureType:o.TextureType.unpacked},shaderSource:h})},c=(t,e)=>(e&&e.length!==t.length&&(e=[...t.keys()].reverse()),e),l=(t,e)=>(e=c(t,e),i.ShapeUtil.sortBasedOnPerm(t,e)),u=(t,e,n)=>{const r=[];r.push("void ".concat(t,"(out int a[").concat(n,"], int src[").concat(n,"]) {"));for(let i=0;i<n;++i)r.push("\ta[".concat(e[i],"]=src[").concat(i,"];"));return r.push("\t}"),r.join("\n")},h=t=>{if(!t||1!==t.length)throw new Error("Transpose requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("input should be float tensor")}},8710:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeAsUint8=void 0;const r=n(5060),i=n(2039);e.encodeAsUint8=(t,e)=>{const n=e.shape,o=(0,r.getGlsl)(t.session.backend.glContext.version),a="\n    const float FLOAT_MAX = 1.70141184e38;\n    const float FLOAT_MIN = 1.17549435e-38;\n\n    bool isNaN(float val) {\n      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;\n    }\n\n    highp vec4 encodeAsUint8(highp float v) {\n      if (isNaN(v)) {\n        return vec4(255, 255, 255, 255);\n      }\n\n      highp float av = abs(v);\n\n      if(av < FLOAT_MIN) {\n        return vec4(0.0, 0.0, 0.0, 0.0);\n      } else if(v > FLOAT_MAX) {\n        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n      } else if(v < -FLOAT_MAX) {\n        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n      }\n\n      highp vec4 c = vec4(0,0,0,0);\n\n      highp float e = floor(log2(av));\n      highp float m = exp2(fract(log2(av))) - 1.0;\n\n      c[2] = floor(128.0 * m);\n      m -= c[2] / 128.0;\n      c[1] = floor(32768.0 * m);\n      m -= c[1] / 32768.0;\n      c[0] = floor(8388608.0 * m);\n\n      highp float ebias = e + 127.0;\n      c[3] = floor(ebias / 2.0);\n      ebias -= c[3] * 2.0;\n      c[2] += floor(ebias) * 128.0;\n\n      c[3] += 128.0 * step(0.0, -v);\n\n      return c / 255.0;\n    }\n\n    void main() {\n      float value = ".concat(o.texture2D,"(X,TexCoords).r;\n      ").concat(o.output," = encodeAsUint8(value);\n    }"),s={name:"Uint8Encode",inputTypes:[i.TextureType.unpacked],inputNames:["X"],output:{dims:n,type:e.tensor.type,textureType:i.TextureType.downloadUint8AsFloat},shaderSource:a,hasMain:!0};return t.executeProgram(s,[e.tensor])}},4909:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sin=e.sigmoid=e.relu=e.not=e.neg=e.log=e.parseLeakyReluAttributes=e.leakyRelu=e.identity=e.floor=e.exp=e.parseEluAttributes=e.elu=e.cos=e.ceil=e.clipV11=e.parseClipAttributes=e.clip=e.atan=e.asin=e.acos=e.abs=e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslLeakyRelu=e.glslIdentity=e.glslClip=e.glslFloor=e.glslExp=e.glslElu=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=void 0;const r=n(246),i=n(2517),o=n(8520),a=n(5060),s=n(2039);function c(){return C("abs")}function l(){return C("acos")}function u(){return C("asin")}function h(){return C("atan")}function d(){return C("ceil")}function p(){return C("cos")}function f(t){const e="elu";return{body:"\n  const float alpha = float(".concat(t,");\n\n  float ").concat(e,"_(float a) {\n    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return vec4(").concat(e,"_(v.x), ").concat(e,"_(v.y), ").concat(e,"_(v.z), ").concat(e,"_(v.w));\n  }\n  "),name:e,type:o.FunctionType.ValueBased}}function m(){return C("exp")}function g(){return C("floor")}function y(t,e){const n="clip";return{body:"\n  const float min = float(".concat(t,");\n  const float max = float(").concat(e,");\n\n  float ").concat(n,"_(float a) {\n    return clamp(a, min, max);\n  }\n  vec4 ").concat(n,"_(vec4 v) {\n    return clamp(v, min, max);\n  }\n  "),name:n,type:o.FunctionType.ValueBased}}function v(){const t="indentity";return{body:"\n  float ".concat(t,"_(float a) {\n    return a;\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return v;\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function b(t){const e="leakyRelu";return{body:"\n  const float alpha = float(".concat(t,");\n\n  float ").concat(e,"_(float a) {\n    return a < 0.0 ? a * alpha : a;\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return vec4(").concat(e,"_(v.x), ").concat(e,"_(v.y), ").concat(e,"_(v.z), ").concat(e,"_(v.w));\n  }\n  "),name:e,type:o.FunctionType.ValueBased}}function x(){return C("log")}function _(){const t="neg";return{body:"\n  float ".concat(t,"_(float a) {\n    return -a;\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return -v;\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function w(){const t="not";return{body:"\n  float ".concat(t,"_(float a) {\n    return float( ! bool(a) );\n  }\n  bool ").concat(t,"_(bool a) {\n    return !a;\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));\n  }\n  bvec4 ").concat(t,"_(bvec4 v) {\n    return bvec4(!v.x, !v.y, !v.z, !v.w);\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function S(){return C("sin")}function T(){const t="relu";return{body:"\n  float ".concat(t,"_(float a) {\n    return max( a, 0.0 );\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return max( v, 0.0 );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function E(){const t="sigmoid";return{body:"\n  float ".concat(t,"_(float a) {\n    return 1.0 / (1.0 + exp(-a));\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return 1.0 / (1.0 + exp(-v));\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function A(){return C("sqrt")}function M(){return C("tan")}function O(){const t="tanh";return{body:"\n  float ".concat(t,"_(float a) {\n    a = clamp(a, -10., 10.);\n    a = exp(2.*a);\n    return (a - 1.) / (a + 1.);\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    v = clamp(v, -10., 10.);\n    v = exp(2.*v);\n    return (v - 1.) / (v + 1.);\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function C(t){return{body:"\n  float ".concat(t,"_(float a) {\n    return ").concat(t,"(a);\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return ").concat(t,"(v);\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}e.glslAbs=c,e.glslAcos=l,e.glslAsin=u,e.glslAtan=h,e.glslCeil=d,e.glslCos=p,e.glslElu=f,e.glslExp=m,e.glslFloor=g,e.glslClip=y,e.glslIdentity=v,e.glslLeakyRelu=b,e.glslLog=x,e.glslNeg=_,e.glslNot=w,e.glslSin=S,e.glslRelu=T,e.glslSigmoid=E,e.glslSqrt=A,e.glslTan=M,e.glslTanh=O;const k=(t,e,n,r)=>{const i=t.session.pack?s.TextureType.packed:s.TextureType.unpacked,o={name:n.name,inputTypes:[i],inputNames:["A"],cacheHint:r};return Object.assign(Object.assign({},o),{get:()=>((t,e,n,r)=>{const i=t.session.pack?s.TextureType.packed:s.TextureType.unpacked,o=(0,a.getGlsl)(t.session.backend.glContext.version);return Object.assign(Object.assign({},e),{output:{dims:n.dims,type:n.type,textureType:i},shaderSource:"\n     ".concat(r.body,"\n     void main() {\n       vec4 v = ").concat(o.texture2D,"(A, TexCoords);\n       v = ").concat(r.name,"_(v);\n       ").concat(o.output," = v;\n     }\n     "),hasMain:!0})})(t,o,e,n)})};e.abs=(t,e)=>[t.run(k(t,e[0],c()),e)],e.acos=(t,e)=>[t.run(k(t,e[0],l()),e)],e.asin=(t,e)=>[t.run(k(t,e[0],u()),e)],e.atan=(t,e)=>[t.run(k(t,e[0],h()),e)],e.clip=(t,e,n)=>[t.run(k(t,e[0],y(n.min,n.max),n.cacheKey),e)],e.parseClipAttributes=t=>(0,r.createAttributeWithCacheKey)({min:t.attributes.getFloat("min",i.MIN_CLIP),max:t.attributes.getFloat("max",i.MAX_CLIP)}),e.clipV11=(t,n)=>{const r=P(t,n);return(0,e.clip)(t,[n[0]],r)};const P=(t,e)=>{if(e.length>=3&&(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const n=e.length>=3?e[1].numberData[0]:i.MIN_CLIP,o=e.length>=3?e[2].numberData[0]:i.MAX_CLIP;return(0,r.createAttributeWithCacheKey)({min:n,max:o})};e.ceil=(t,e)=>[t.run(k(t,e[0],d()),e)],e.cos=(t,e)=>[t.run(k(t,e[0],p()),e)],e.elu=(t,e,n)=>[t.run(k(t,e[0],f(n.alpha),n.cacheKey),e)],e.parseEluAttributes=t=>(0,r.createAttributeWithCacheKey)({alpha:t.attributes.getFloat("alpha",1)}),e.exp=(t,e)=>[t.run(k(t,e[0],m()),e)],e.floor=(t,e)=>[t.run(k(t,e[0],g()),e)],e.identity=(t,e)=>[t.run(k(t,e[0],v()),e)],e.leakyRelu=(t,e,n)=>[t.run(k(t,e[0],b(n.alpha),n.cacheKey),e)],e.parseLeakyReluAttributes=t=>(0,r.createAttributeWithCacheKey)({alpha:t.attributes.getFloat("alpha",.01)}),e.log=(t,e)=>[t.run(k(t,e[0],x()),e)],e.neg=(t,e)=>[t.run(k(t,e[0],_()),e)],e.not=(t,e)=>[t.run(k(t,e[0],w()),e)],e.relu=(t,e)=>[t.run(k(t,e[0],T()),e)],e.sigmoid=(t,e)=>[t.run(k(t,e[0],E()),e)],e.sin=(t,e)=>[t.run(k(t,e[0],S()),e)],e.sqrt=(t,e)=>[t.run(k(t,e[0],A()),e)],e.tan=(t,e)=>[t.run(k(t,e[0],M()),e)],e.tanh=(t,e)=>[t.run(k(t,e[0],O()),e)]},5611:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackProgramInfoLoader=e.createUnpackProgramInfo=void 0;const r=n(5060),i=n(2039),o=n(9390),a=n(2827),s={name:"unpack",inputNames:["A"],inputTypes:[i.TextureType.packed]};e.createUnpackProgramInfo=(t,e)=>{const n=e.dims.length,c=(0,a.getChannels)("rc",n),l=c.slice(-2),u=(0,o.getCoordsDataType)(n),h=(0,a.unpackFromChannel)(),d=0===e.dims.length?"":function(t,e){if(1===t)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}(n,c),p=n<=1?"rc":"vec2(".concat(l.join(","),")"),f="\n    ".concat(h,"\n    void main() {\n      ").concat(u," rc = getOutputCoords();\n\n       // Sample the texture with the coords to get the rgba channel value.\n       vec4 packedInput = getA(").concat(d,");\n\n       ").concat((0,r.getGlsl)(t.session.backend.glContext.version).output," = vec4(getChannel(packedInput, ").concat(p,"), 0, 0, 0);\n     }\n   ");return Object.assign(Object.assign({},s),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:i.TextureType.unpacked},shaderSource:f})},e.createUnpackProgramInfoLoader=(t,n)=>Object.assign(Object.assign({},s),{get:()=>(0,e.createUnpackProgramInfo)(t,n)})},8428:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnsqueezeAttributes=e.unsqueezeV13=e.unsqueeze=void 0;const r=n(2517);e.unsqueeze=(t,e,n)=>{i(e);const o=r.ShapeUtil.unsqueezeShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],o)]},e.unsqueezeV13=(t,n)=>(o(n),(0,e.unsqueeze)(t,[n[0]],Array.from(n[1].integerData))),e.parseUnsqueezeAttributes=t=>t.attributes.getInts("axes");const i=t=>{if(!t||1!==t.length)throw new Error("Unsqueeze requires 1 input.");if("string"===t[0].type)throw new Error("invalid input tensor types.")},o=t=>{if(!t||2!==t.length)throw new Error("Unsqueeze requires 2 inputs.");if("int32"!==t[1].type)throw new Error("Invalid input type.")}},9793:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.scalesValidation=e.validateInputs=e.parseUpsampleAttributes=e.parseUpsampleAttributesV9=e.parseUpsampleAttributesV7=e.upsample=void 0;const r=n(246),i=n(5060),o=n(2039),a={name:"Upsample",inputNames:["X"],inputTypes:[o.TextureType.unpacked]};e.upsample=(t,n,r)=>((0,e.validateInputs)(n,r),[t.run(Object.assign(Object.assign({},a),{cacheHint:r.cacheKey,get:()=>s(t,n,r)}),n)]),e.parseUpsampleAttributesV7=t=>(0,e.parseUpsampleAttributes)(t,7),e.parseUpsampleAttributesV9=t=>(0,e.parseUpsampleAttributes)(t,9),e.parseUpsampleAttributes=(t,n)=>{const i=n>=10,o=t.attributes.getString("mode","nearest");if("nearest"!==o&&"linear"!==o&&(n<11||"cubic"!==o))throw new Error("unrecognized mode: ".concat(o));let a=[];n<9&&(a=t.attributes.getFloats("scales"),(0,e.scalesValidation)(a,o,i));const s=t.attributes.getFloat("extrapolation_value",0),c=n>10?t.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(-1===["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(c))throw new Error("coordinate_transform_mode '".concat(c,"' is not supported"));const l="tf_crop_and_resize"===c,u=l,h="nearest"===o&&n>=11?t.attributes.getString("nearest_mode","round_prefer_floor"):"";if(-1===["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(h))throw new Error("nearest_mode '".concat(h,"' is not supported"));const d=t.attributes.getFloat("cubic_coeff_a",-.75),p=0!==t.attributes.getInt("exclude_outside",0);if(p&&"cubic"!==o)throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const f=n<11||"nearest"===o&&"asymmetric"===c&&"floor"===h;let m=0,g=0,y=0;return n>10?t.inputs.length>2?(m=1,g=2,y=3):(g=1,y=2):9===n&&(g=1),(0,r.createAttributeWithCacheKey)({opset:n,isResize:i,mode:o,scales:a,extrapolationValue:s,coordinateTransformMode:c,useExtrapolation:u,needRoiInput:l,nearestMode:h,cubicCoefficientA:d,excludeOutside:p,useNearest2xOptimization:f,roiInputIdx:m,scalesInputIdx:g,sizesInputIdx:y})};const s=(t,e,n)=>{const r=(0,i.getGlsl)(t.session.backend.glContext.version),[s,c]=t.calculateTextureWidthAndHeight(e[0].dims,o.TextureType.unpacked),l=e[0].dims.map(((t,e)=>Math.floor(t*n.scales[e]))),[u,h]=t.calculateTextureWidthAndHeight(l,o.TextureType.unpacked),d=l.length,p=new Array(d),f=new Array(d);let m="\n      int output_pitches[".concat(d,"];\n      int input_pitches[").concat(d,"];\n      ");for(let i=d-1;i>=0;i--)p[i]=i===d-1?1:p[i+1]*l[i+1],f[i]=i===d-1?1:f[i+1]*e[0].dims[i+1],m+="\n        output_pitches[".concat(i,"] = ").concat(p[i],";\n        input_pitches[").concat(i,"] = ").concat(f[i],";\n        ");const g="\n      float getInputFloat(int index) {\n        vec2 coords = offsetToCoords(index, ".concat(s,", ").concat(c,");\n        float value = getColorAsFloat(").concat(r.texture2D,"(X, coords));\n        return value;\n      }\n      "),y="nearest"===n.mode?"\n    ".concat(g,"\n    float process(int indices[").concat(d,"]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(u,", ").concat(h,");\n\n      ").concat(m,"\n\n      int d, m;\n      for (int dim = 0; dim < ").concat(d,"; ++dim) {\n        d = output_index / output_pitches[dim];\n        m = output_index - d * output_pitches[dim];\n        output_index = m;\n\n        if (scales[dim] != 1 && d > 0) {\n          int d2 = d / scales[dim];\n          m = d - d2 * scales[dim];\n          d = d2;\n        }\n        input_index += input_pitches[dim] * d;\n      }\n\n      return getInputFloat(input_index);\n    }"):4===d?"\n    ".concat(g,"\n    float process(int indices[4]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(u,", ").concat(h,");\n\n      ").concat(m,"\n\n      int m;\n      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m / output_pitches[1];\n      m = m - index_of_dim1 * output_pitches[1];\n      index_of_dim2 = m / output_pitches[2];\n      m = m - index_of_dim2 * output_pitches[2];\n      index_of_dim3 = m;\n\n      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;\n      index_of_input_dim2 = index_of_dim2 / scales[2];\n      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];\n      index_of_input_dim3 = index_of_dim3 / scales[3];\n      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];\n\n      input_index = index_of_dim0 * input_pitches[0] +\n            index_of_dim1 * input_pitches[1] +\n            index_of_input_dim2 * input_pitches[2] +\n            index_of_input_dim3;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim2 = false;\n      if (index_of_input_dim2 == (").concat(e[0].dims[2]," - 1)) {\n        // It's the end in dimension 2\n        x01 = x00;\n        end_of_dim2 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[2]);\n      }\n\n      if (index_of_input_dim3 == (input_pitches[2] - 1)) {\n        // It's the end in dimension 3\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);\n    }"):"\n    ".concat(g,"\n    float process(int indices[2]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(u,", ").concat(h,");\n\n      ").concat(m,"\n\n      int m;\n      int index_of_dim0, index_of_dim1;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m;\n\n      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;\n      index_of_input_dim0 = index_of_dim0 / scales[0];\n      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];\n      index_of_input_dim1 = index_of_dim1 / scales[1];\n      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];\n\n      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim0 = false;\n      if (index_of_input_dim0 == (").concat(e[0].dims[0]," - 1)) {\n        // It's the end in dimension 0\n        x01 = x00;\n        end_of_dim0 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[0]);\n      }\n\n      if (index_of_input_dim1 == (input_pitches[0] - 1)) {\n        // It's the end in dimension 1\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);\n    }");return Object.assign(Object.assign({},a),{output:{dims:l,type:e[0].type,textureType:o.TextureType.unpacked},shaderSource:y,variables:[{name:"scales",type:"int",arrayLength:n.scales.length,data:n.scales.map((t=>Math.ceil(t)))}]})};e.validateInputs=(t,e)=>{if(!t||e.opset<9&&1!==t.length||e.opset>=9&&e.opset<11&&2!==t.length||e.opset>=11&&t.length<2)throw new Error("invalid inputs.");if(e.scales.length>0&&t[0].dims.length!==e.scales.length)throw new Error("Invalid input shape.");if("string"===t[0].type)throw new Error("Invalid input tensor types.")},e.scalesValidation=(t,e,n)=>{if(n){for(const r of t)if(r<=0)throw new Error("Scale value should be greater than 0.")}else for(const r of t)if(r<1)throw new Error("Scale value should be greater than or equal to 1.");if(!("linear"!==e&&"cubic"!==e||2===t.length||4===t.length&&1===t[0]&&1===t[1]))throw new Error("'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ".concat(n?"Resize":"Upsample"," opeartor."))}},1958:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;const r=n(1670),i=n(6231),o=n(8879),a=n(5060);e.ProgramManager=class{constructor(t,e,n){this.profiler=t,this.glContext=e,this.textureLayoutStrategy=n,this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,e){this.repo.set(t,e)}run(t,e,n){var r;this.profiler.event("op","ProgramManager.run ".concat(null!==(r=t.programInfo.name)&&void 0!==r?r:"unknown kernel"),(()=>{var r;const o=this.glContext.gl,a=t.program;o.useProgram(a);try{this.bindOutput(n),this.attributesBound||this.bindAttributes(t.attribLocations),this.bindUniforms(t.uniformLocations,null!==(r=t.programInfo.variables)&&void 0!==r?r:[],e)}catch(e){throw i.Logger.error("ProgramManager",t.programInfo.shaderSource),e}this.profiler.event("backend","GlContext.draw()",(()=>{this.glContext.draw()}))}),this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach((t=>this.glContext.deleteProgram(t.program)))}build(t,e,n){return this.profiler.event("backend","ProgramManager.build",(()=>{const r=new o.GlslPreprocessor(this.glContext,t,e,n),i=r.preprocess(),a=this.compile(i);return{programInfo:t,program:a,uniformLocations:this.getUniformLocations(a,r.context.programInfo.inputNames,r.context.programInfo.variables),attribLocations:this.getAttribLocations(a)}}))}compile(t){if(!this.vertexShader){i.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const t=(0,a.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(t,this.glContext.gl.VERTEX_SHADER)}r.env.debug&&i.Logger.verbose("ProrgramManager","FragShader:\n".concat(t,"\n"));const e=this.glContext.compileShader(t,this.glContext.gl.FRAGMENT_SHADER),n=this.glContext.createProgram(this.vertexShader,e);return this.glContext.deleteShader(e),n}bindOutput(t){const e=t.width,n=t.height;i.Logger.verbose("ProrgramManager","Binding output texture to Framebuffer: w/h=".concat(e,"/").concat(n,", shape=").concat(t.shape,", type=").concat(t.tensor.type)),this.glContext.attachFramebuffer(t.texture,e,n)}bindAttributes(t){const e=t.position,n=t.textureCoord;this.glContext.setVertexAttributes(e,n),this.attributesBound=!0}bindUniforms(t,e,n){var r;const i=this.glContext.gl;let o=0;for(const{name:a,type:s,location:c,arrayLength:l}of t){const t=null===(r=e.find((t=>t.name===a)))||void 0===r?void 0:r.data;if("sampler2D"!==s&&!t)throw new Error("variable '".concat(a,"' does not have data defined in program info"));switch(s){case"sampler2D":this.bindTexture(n[o],c,o),o++;break;case"float":l?i.uniform1fv(c,t):i.uniform1f(c,t);break;case"int":l?i.uniform1iv(c,t):i.uniform1i(c,t);break;default:throw new Error("Uniform not implemented: ".concat(s))}}}bindTexture(t,e,n){this.glContext.bindTextureToUniform(t.texture,n,e)}getAttribLocations(t){return{position:this.getAttribLocation(t,"position"),textureCoord:this.getAttribLocation(t,"textureCoord")}}getUniformLocations(t,e,n){const r=[];if(e)for(const i of e)r.push({name:i,type:"sampler2D",location:this.getUniformLocation(t,i)});if(n)for(const i of n)r.push(Object.assign(Object.assign({},i),{location:this.getUniformLocation(t,i.name)}));return r}getUniformLocation(t,e){const n=this.glContext.gl.getUniformLocation(t,e);if(null===n)throw new Error("Uniform ".concat(e," not found."));return n}getAttribLocation(t,e){return this.glContext.gl.getAttribLocation(t,e)}}},6416:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;const r=n(6231),i=n(1047),o=n(8316),a=n(1640),s=n(1958),c=n(7859),l=n(5702);e.WebGLSessionHandler=class{constructor(t,e){this.backend=t,this.context=e,this.layoutStrategy=new c.PreferLogicalStrategy(t.glContext.maxTextureSize),this.programManager=new s.ProgramManager(this.context.profiler,t.glContext,this.layoutStrategy),this.textureManager=new l.TextureManager(t.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:"full"===t.textureCacheMode}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=t.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new o.WebGLInferenceHandler(this)}onGraphInitialized(t){const e=t.getValues().filter((t=>-1===t.from&&t.tensor)).map((t=>t.tensor.dataId));this.initializers=new Set(e)}isInitializer(t){return!!this.initializers&&this.initializers.has(t)}addInitializer(t){this.initializers.add(t)}getTextureData(t,e){return e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),n?this.packedTextureDataCache.set(t,e):this.unpackedTextureDataCache.set(t,e)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((t=>this.textureManager.releaseTexture(t,!0))),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((t=>this.textureManager.releaseTexture(t,!0))),this.unpackedTextureDataCache=new Map}resolve(t,e,n){const r=(0,i.resolveOperator)(t,e,a.WEBGL_OP_RESOLVE_RULES);return{impl:r.opImpl,context:r.opInit?r.opInit(t,n):t}}}},7769:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;const r=n(6231);e.RedFloat32DataEncoder=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1===e)this.internalFormat=t.R32F,this.format=t.RED,this.textureType=t.FLOAT,this.channelSize=e;else{if(4!==e)throw new Error("Invalid number of channels: ".concat(e));this.internalFormat=t.RGBA32F,this.format=t.RGBA,this.textureType=t.FLOAT,this.channelSize=e}}encode(t,e){let n,i;return t.constructor!==Float32Array&&(r.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),i=new Float32Array(t)),e*this.channelSize>t.length?(r.Logger.warning("Encoder","Source data too small. Allocating larger array"),i=t,n=this.allocate(e*this.channelSize),i.forEach(((t,e)=>n[e]=t))):(i=t,n=i),n}allocate(t){return new Float32Array(4*t)}decode(t,e){return 1===this.channelSize?t.filter(((t,e)=>e%4==0)).subarray(0,e):t.subarray(0,e)}},e.RGBAFloatDataEncoder=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;if(1!==e&&4!==e)throw new Error("Invalid number of channels: ".concat(e));this.internalFormat=t.RGBA,this.format=t.RGBA,this.channelSize=e,this.textureType=n||t.FLOAT}encode(t,e){let n=t;return 1===this.channelSize&&(r.Logger.verbose("Encoder","Exploding into a larger array"),n=this.allocate(e),t.forEach(((t,e)=>n[4*e]=t))),n}allocate(t){return new Float32Array(4*t)}decode(t,e){return 1===this.channelSize?t.filter(((t,e)=>e%4==0)).subarray(0,e):t.subarray(0,e)}},e.Uint8DataEncoder=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.channelSize=4,1===e)this.internalFormat=t.ALPHA,this.format=t.ALPHA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else{if(4!==e)throw new Error("Invalid number of channels: ".concat(e));this.internalFormat=t.RGBA,this.format=t.RGBA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e}}encode(t,e){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}allocate(t){return new Uint8Array(t*this.channelSize)}decode(t,e){if(t instanceof Uint8Array)return t.subarray(0,e);throw new Error("Invalid array type: ".concat(t.constructor))}}},7859:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBatchDim=e.sizeToSquarishShape=e.getRowsCols=e.sizeFromShape=e.isInt=e.parseAxisParam=e.squeezeShape=e.PreferLogicalStrategy=e.AlwaysKeepOriginalSizeStrategy=void 0;const r=n(6231),i=n(2517);function o(t,e){const n=[],r=[],i=null!=e&&Array.isArray(e)&&0===e.length,o=null==e||i?null:a(e,t).sort();let s=0;for(let a=0;a<t.length;++a){if(null!=o){if(o[s]===a&&1!==t[a])throw new Error("Can't squeeze axis ".concat(a," since its dim '").concat(t[a],"' is not 1"));(null==o[s]||o[s]>a)&&1===t[a]&&(n.push(t[a]),r.push(a)),o[s]<=a&&s++}1!==t[a]&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function a(t,e){const n=e.length;return t=null==t?e.map(((t,e)=>e)):[].concat(t),(0,i.assert)(t.every((t=>t>=-n&&t<n)),(()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but got axis ").concat(t))),(0,i.assert)(t.every(s),(()=>"All values in axis param must be integers but got axis ".concat(t))),t.map((t=>t<0?n+t:t))}function s(t){return t%1==0}function c(t){if(0===t.length)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function l(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}e.AlwaysKeepOriginalSizeStrategy=class{constructor(t){this.maxTextureSize=t}computeTextureWH(t,e){if(0===t.length)return[1,1];const n=this.maxTextureSize;if(e&&void 0!==e.breakAxis){const i=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce(((t,e)=>t*e)),o=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce(((t,e)=>t*e));if(!(i>n||o>n))return[i,o];r.Logger.verbose("TextureLayout","Given width/height preferences were unattainable: shape:".concat(t,", breakAxis:").concat(e.breakAxis))}const i=t.reduce(((t,e)=>t*e));let o=Math.floor(Math.sqrt(i));for(;o<n&&o<i&&i%o!=0;o++);if(o>=n||i%o!=0)throw new Error("The given dimensions are outside this GPU's boundaries: ".concat(t));return[o,i/o]}},e.PreferLogicalStrategy=class{constructor(t){this.maxTextureSize=t}computeTextureWH(t,e){const n=this.computeTexture(t,e);return e&&e.isPacked&&(n[0]/=2,n[1]/=2),e&&e.reverseWH?[n[1],n[0]]:n}computeTexture(t,e){const n=e&&e.isPacked;if(0===t.length)return n?[2,2]:[1,1];let i=this.maxTextureSize;if(e&&void 0!==e.breakAxis){const n=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce(((t,e)=>t*e)),o=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce(((t,e)=>t*e));if(!(n>i||o>i))return[n,o];r.Logger.verbose("TextureLayout","Given width/height preferences were unattainable: shape:".concat(t,", breakAxis:").concat(e.breakAxis))}let a=t.slice(0);if(n&&(i*=2,a=a.map(((t,e)=>e>=a.length-2?a[e]%2==0?a[e]:a[e]+1:a[e])),1===a.length&&(a=[2,a[0]])),2!==a.length){const t=o(a);a=t.newShape}const s=c(a);return a.length<=1&&s<=i?[1,s]:2===a.length&&a[0]<=i&&a[1]<=i?a:3===a.length&&a[0]*a[1]<=i&&a[2]<=i?[a[0]*a[1],a[2]]:3===a.length&&a[0]<=i&&a[1]*a[2]<=i?[a[0],a[1]*a[2]]:4===a.length&&a[0]*a[1]*a[2]<=i&&a[3]<=i?[a[0]*a[1]*a[2],a[3]]:4===a.length&&a[0]<=i&&a[1]*a[2]*a[3]<=i?[a[0],a[1]*a[2]*a[3]]:n?l(s/4).map((t=>2*t)):l(s)}},e.squeezeShape=o,e.parseAxisParam=a,e.isInt=s,e.sizeFromShape=c,e.getRowsCols=function(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]},e.sizeToSquarishShape=l,e.getBatchDim=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return c(t.slice(0,t.length-e))}},4057:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureLayoutFromShape=e.calculateTextureWidthAndHeight=e.createTextureLayoutFromTextureType=void 0;const r=n(2517),i=n(2039);e.createTextureLayoutFromTextureType=(t,n,r)=>{const o=r===i.TextureType.unpacked||r===i.TextureType.unpackedReversed?1:4,a=r===i.TextureType.packed,s=r===i.TextureType.unpackedReversed||r===i.TextureType.packed,c=r===i.TextureType.packedLastDimension?n.length-1:void 0,l=r===i.TextureType.packedLastDimension?n.map(((t,e)=>e===n.length-1?4*t:t)):void 0;return(0,e.createTextureLayoutFromShape)(t,n,o,l,{isPacked:a,reverseWH:s,breakAxis:c})},e.calculateTextureWidthAndHeight=(t,n,r)=>{const i=(0,e.createTextureLayoutFromTextureType)(t,n,r);return[i.width,i.height]},e.createTextureLayoutFromShape=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;const a=!(!o||!o.isPacked),[s,c]=t.computeTextureWH(a&&i||e,o),l=e.length;let u=e.slice(0);if(0===l&&(u=[1]),1===n)i=e;else if(a){if(4!==n)throw new Error("a packed texture must be 4-channel");i=e,l>0&&(u[l-1]=Math.ceil(u[l-1]/2)),l>1&&(u[l-2]=Math.ceil(u[l-2]/2))}else if(!i)throw new Error("Unpacked shape is needed when using channels > 1");return{width:s,height:c,channels:n,isPacked:a,shape:u,strides:r.ShapeUtil.computeStrides(u),unpackedShape:i,reversedWH:o&&o.reverseWH}}},5702:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;const r=n(6231);e.TextureManager=class{constructor(t,e,n,r){this.glContext=t,this.layoutStrategy=e,this.profiler=n,this.config=r,this.pendingRead=new Map,r.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(t,e,n,i){const o=this.toEncoderType(t),a=this.glContext.getEncoder(o,e.channels||1,i);if(e.isPacked&&1===i)throw new Error("not implemented");const s=e.width,c=e.height;let l,u;if(this.config.reuseTextures){l="".concat(s,"x").concat(c,"_").concat(a.format,"_").concat(a.internalFormat,"_").concat(a.textureType),u=this.inUseTextures.get(l),u||(u=[],this.inUseTextures.set(l,u));const e=this.idleTextures.get(l);if(e&&e.length>0){const r=e.pop();return u.push(r),1===i&&this.glContext.updateTexture(r,s,c,a,this.toTextureData(t,n)),r}}r.Logger.verbose("TextureManager","Creating new texture of size ".concat(e.width,"x").concat(e.height));const h=this.glContext.allocateTexture(s,c,a,this.toTextureData(t,n));return this.config.reuseTextures&&(u.push(h),this.textureLookup.set(h,l)),h}readTexture(t,e,n){return n||(n=1),this.profiler.event("backend","TextureManager.readTexture",(()=>{const r=t.shape.reduce(((t,e)=>t*e))*n,i=this.glContext.readTexture(t.texture,t.width,t.height,r,this.toEncoderType(e),n);return this.toTensorData(e,i)}))}async readTextureAsync(t,e,n){const r=t.tensor.dataId;if(n||(n=1),this.pendingRead.has(r)){const t=this.pendingRead.get(r);return new Promise((e=>null==t?void 0:t.push(e)))}return this.profiler.event("backend","TextureManager.readTextureAsync",(async()=>{this.pendingRead.set(r,[]);const i=t.shape.reduce(((t,e)=>t*e))*n;await this.glContext.createAndWaitForFence();const o=this.glContext.readTexture(t.texture,t.width,t.height,i,this.toEncoderType(e),n),a=this.toTensorData(e,o),s=this.pendingRead.get(r);return this.pendingRead.delete(r),null==s||s.forEach((t=>t(a))),a}))}readUint8TextureAsFloat(t){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",(()=>{const e=t.shape.reduce(((t,e)=>t*e)),n=this.glContext.readTexture(t.texture,t.width,t.height,4*e,"byte",4);return new Float32Array(n.buffer,n.byteOffset,e)}))}releaseTexture(t,e){let n;if(this.config.reuseTextures&&(n=this.textureLookup.get(t.texture),n)){e&&this.textureLookup.delete(n);const r=this.inUseTextures.get(n);if(r){const e=r.indexOf(t.texture);if(-1!==e){r.splice(e,1);let i=this.idleTextures.get(n);i||(i=[],this.idleTextures.set(n,i)),i.push(t.texture)}}}n&&!e||(r.Logger.verbose("TextureManager","Deleting texture of size ".concat(t.width,"x").concat(t.height)),this.glContext.deleteTexture(t.texture))}toTensorData(t,e){switch(t){case"int16":return e instanceof Int16Array?e:Int16Array.from(e);case"int32":return e instanceof Int32Array?e:Int32Array.from(e);case"int8":return e instanceof Int8Array?e:Int8Array.from(e);case"uint16":return e instanceof Uint16Array?e:Uint16Array.from(e);case"uint32":return e instanceof Uint32Array?e:Uint32Array.from(e);case"uint8":case"bool":return e instanceof Uint8Array?e:Uint8Array.from(e);case"float32":return e instanceof Float32Array?e:Float32Array.from(e);case"float64":return e instanceof Float64Array?e:Float64Array.from(e);default:throw new Error("TensorData type ".concat(t," is not supported"))}}toTextureData(t,e){if(e)return e instanceof Float32Array?e:new Float32Array(e)}toEncoderType(t){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureType=void 0,(n=e.TextureType||(e.TextureType={}))[n.unpacked=0]="unpacked",n[n.unpackedReversed=1]="unpackedReversed",n[n.packed=2]="packed",n[n.downloadUint8AsFloat=3]="downloadUint8AsFloat",n[n.packedLastDimension=4]="packedLastDimension"},9390:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getGlChannels=e.getCoordsDataType=e.getSqueezedParams=e.squeezeInputShape=e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=e.generateShaderFuncNameFromInputSamplerName=e.repeatedTry=e.getPackedShape=void 0;const r=n(2517);e.getPackedShape=function(t){const e=t.length;return t.slice(0,e-1).concat(t[e-1]/4)},e.repeatedTry=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t=>0,n=arguments.length>2?arguments[2]:void 0;return new Promise(((r,i)=>{let o=0;const a=()=>{if(t())return void r();o++;const s=e(o);null!=n&&o>=n?i():setTimeout(a,s)};a()}))},e.generateShaderFuncNameFromInputSamplerName=function(t){return(0,r.assert)(void 0!==t&&0!==t.length,(()=>"empty string found for sampler name")),"get"+t.charAt(0).toUpperCase()+t.slice(1)},e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(t){return(0,r.assert)(void 0!==t&&0!==t.length,(()=>"empty string found for sampler name")),"get"+t.charAt(0).toUpperCase()+t.slice(1)+"AtOutCoords"},e.squeezeInputShape=function(t,e){let n=JSON.parse(JSON.stringify(t));return n=e,n},e.getSqueezedParams=function(t,e){return e.map((e=>t[e])).join(", ")},e.getCoordsDataType=function(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error("GPU for rank ".concat(t," is not yet supported"))},e.getGlChannels=function(){return["x","y","z","w","u","v"].slice(0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:6)}},7305:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;const r=n(6231),i=n(1713),o={};function a(t){const e=function(){if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas)throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const t=document.createElement("canvas");return t.width=1,t.height=1,t}();let n;const o={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!t||"webgl2"===t)&&(n=e.getContext("webgl2",o),n))try{return new i.WebGLContext(n,2)}catch(t){r.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl2'. Error: ".concat(t))}if((!t||"webgl"===t)&&(n=e.getContext("webgl",o)||e.getContext("experimental-webgl",o),n))try{return new i.WebGLContext(n,1)}catch(t){r.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ".concat(t))}throw new Error("WebGL is not supported")}e.createWebGLContext=function t(e){let n;e&&"webgl2"!==e||!("webgl2"in o)?e&&"webgl"!==e||!("webgl"in o)||(n=o.webgl):n=o.webgl2,n=n||a(e),e=e||1===n.version?"webgl":"webgl2";const r=n.gl;return o[e]=n,r.isContextLost()?(delete o[e],t(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),n)},e.createNewWebGLContext=a},1713:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=e.linearSearchLastTrue=void 0;const a=n(1670),s=o(n(7769)),c=n(9390);function l(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}e.linearSearchLastTrue=l,e.WebGLContext=class{constructor(t,e){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=t,this.version=e,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(t,e,n,r){const i=this.gl,o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE);const a=r?n.encode(r,t*e):null;return i.texImage2D(i.TEXTURE_2D,0,n.internalFormat,t,e,0,n.format,n.textureType,a),this.checkError(),o}updateTexture(t,e,n,r,i){const o=this.gl;o.bindTexture(o.TEXTURE_2D,t);const a=r.encode(i,e*n);o.texSubImage2D(o.TEXTURE_2D,0,0,0,e,n,r.format,r.textureType,a),this.checkError()}attachFramebuffer(t,e,n){const r=this.gl;r.bindTexture(r.TEXTURE_2D,t),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),this.checkError(),r.viewport(0,0,e,n),r.scissor(0,0,e,n)}readTexture(t,e,n,r,i,o){const a=this.gl;o||(o=1),this.frameBufferBound||this.attachFramebuffer(t,e,n);const s=this.getEncoder(i,o),c=s.allocate(e*n);return a.bindTexture(a.TEXTURE_2D,t),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,t,0),a.readPixels(0,0,e,n,a.RGBA,s.textureType,c),this.checkError(),s.decode(c,r)}isFramebufferReady(){return!0}getActiveTexture(){const t=this.gl;return"TEXTURE"+(t.getParameter(this.gl.ACTIVE_TEXTURE)-t.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(t,e){const n=this.gl;n.vertexAttribPointer(t,3,n.FLOAT,!1,20,0),n.enableVertexAttribArray(t),-1!==e&&(n.vertexAttribPointer(e,2,n.FLOAT,!1,20,12),n.enableVertexAttribArray(e)),this.checkError()}createProgram(t,e){const n=this.gl,r=n.createProgram();return n.attachShader(r,t),n.attachShader(r,e),n.linkProgram(r),r}compileShader(t,e){const n=this.gl,r=n.createShader(e);if(!r)throw new Error("createShader() returned null with type ".concat(e));if(n.shaderSource(r,t),n.compileShader(r),!1===n.getShaderParameter(r,n.COMPILE_STATUS))throw new Error("Failed to compile shader: ".concat(n.getShaderInfoLog(r),"\nShader source:\n").concat(t));return r}deleteShader(t){this.gl.deleteShader(t)}bindTextureToUniform(t,e,n){const r=this.gl;r.activeTexture(r.TEXTURE0+e),this.checkError(),r.bindTexture(r.TEXTURE_2D,t),this.checkError(),r.uniform1i(n,e),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(a.env.debug){const t=this.gl,e=t.getError();let n="";switch(e){case t.NO_ERROR:return;case t.INVALID_ENUM:n="INVALID_ENUM";break;case t.INVALID_VALUE:n="INVALID_VALUE";break;case t.INVALID_OPERATION:n="INVALID_OPERATION";break;case t.INVALID_FRAMEBUFFER_OPERATION:n="INVALID_FRAMEBUFFER_OPERATION";break;case t.OUT_OF_MEMORY:n="OUT_OF_MEMORY";break;case t.CONTEXT_LOST_WEBGL:n="CONTEXT_LOST_WEBGL";break;default:n="Unknown WebGL Error: ".concat(e.toString(16))}throw new Error(n)}}deleteTexture(t){this.gl.deleteTexture(t)}deleteProgram(t){this.gl.deleteProgram(t)}getEncoder(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(2===this.version)return new s.RedFloat32DataEncoder(this.gl,e);switch(t){case"float":return 1===n||this.isRenderFloat32Supported?new s.RGBAFloatDataEncoder(this.gl,e):new s.RGBAFloatDataEncoder(this.gl,e,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new s.Uint8DataEncoder(this.gl,e);default:throw new Error("Invalid dataType: ".concat(t))}}clearActiveTextures(){const t=this.gl;for(let e=0;e<this.maxTextureImageUnits;++e)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexbuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const t=this.gl,e=t.createBuffer();if(!e)throw new Error("createBuffer() returned null");const n=this.createDefaultGeometry();return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),this.checkError(),e}createFramebuffer(){const t=this.gl.createFramebuffer();if(!t)throw new Error("createFramebuffer returned null");return t}queryVitalParameters(){const t=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),1===this.version&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){2===this.version?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);const n=2===this.version?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,n,1,1,0,t.RGBA,t.FLOAT,null);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(r),i}checkRenderFloat32(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else{if(!this.textureFloatExtension)return!1;if(!this.gl.getExtension("WEBGL_color_buffer_float"))return!1}return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const t=this.gl;let e,n,r,i,o;try{e=t.createTexture(),n=t.createFramebuffer(),t.bindTexture(t.TEXTURE_2D,e);const a=2===this.version?t.RGBA32F:t.RGBA;return t.texImage2D(t.TEXTURE_2D,0,a,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),t.enable(t.BLEND),r=t.createShader(t.VERTEX_SHADER),!!r&&(t.shaderSource(r,"void main(){}"),t.compileShader(r),i=t.createShader(t.FRAGMENT_SHADER),!!i&&(t.shaderSource(i,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),t.compileShader(i),o=t.createProgram(),!!o&&(t.attachShader(o,r),t.attachShader(o,i),t.linkProgram(o),t.useProgram(o),t.drawArrays(t.POINTS,0,1),t.getError()===t.NO_ERROR)))}finally{t.disable(t.BLEND),o&&t.deleteProgram(o),r&&t.deleteShader(r),i&&t.deleteShader(i),n&&(t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(n)),e&&(t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(e))}}beginTimer(){if(2===this.version&&this.disjointTimerQueryWebgl2Extension){const t=this.gl,e=this.disjointTimerQueryWebgl2Extension,n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const t=this.gl,e=this.disjointTimerQueryWebgl2Extension;t.endQuery(e.TIME_ELAPSED_EXT)}}isTimerResultAvailable(t){let e=!1,n=!1;if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const r=this.gl,i=this.disjointTimerQueryWebgl2Extension;e=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE),n=r.getParameter(i.GPU_DISJOINT_EXT)}return e&&!n}getTimerResult(t){let e=0;if(2!==this.version)throw new Error("WebGL1 profiling currently not supported");{const n=this.gl;e=n.getQueryParameter(t,n.QUERY_RESULT),n.deleteQuery(t)}return e/1e6}async waitForQueryAndGetTime(t){return await(0,c.repeatedTry)((()=>this.isTimerResultAvailable(t))),this.getTimerResult(t)}async createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let e;const n=t,r=n.fenceSync(n.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),e=null===r?()=>!0:()=>{const t=n.clientWaitSync(r,0,0);return t===n.ALREADY_SIGNALED||t===n.CONDITION_SATISFIED},{query:r,isFencePassed:e}}async pollFence(t){return new Promise((e=>{this.addItemToPoll((()=>t.isFencePassed()),(()=>e()))}))}pollItems(){const t=l(this.itemsToPoll.map((t=>t.isDoneFn)));for(let e=0;e<=t;++e){const{resolveFn:t}=this.itemsToPoll[e];t()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}async addItemToPoll(t,e){this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||await(0,c.repeatedTry)((()=>(this.pollItems(),0===this.itemsToPoll.length)))}}},1036:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;const r=n(6231);class i{constructor(t,e){this.op=t,this.node=e}}e.ExecutionPlan=class{constructor(t,e,n){this.graph=t,this.profiler=n,this.initialize(e)}initialize(t){this.profiler.event("session","ExecutionPlan.initialize",(()=>{const e=this.graph.getNodes();if(e.length!==t.length)throw new Error("The size of nodes and OPs do not match.");this._ops=t.map(((t,n)=>new i(t,e[n]))),this.reset(),this._starter=[],this._ops.forEach(((t,e)=>{let n=!0;for(const r of t.node.inputs)if(!this._values[r]&&-1===this.graph.getInputIndices().indexOf(r)){n=!1;break}n&&this._starter.push(e)}))}))}reset(){this._values=this.graph.getValues().map((t=>t.tensor))}async execute(t,e){return this.profiler.event("session","ExecutionPlan.execute",(async()=>{this.reset();const n=t.createInferenceHandler(),i=this.graph.getInputIndices();if(e.length!==i.length)throw new Error("number of input tensors don't match the number of inputs to the model: actual: ".concat(e.length," expected: ").concat(i.length));e.forEach(((t,e)=>{const n=i[e];this._values[n]=t}));const o=this._starter.slice(0),a=this.graph.getValues(),s=this.graph.getNodes();let c=0;for(;c<o.length;){const t=o[c++],e=this._ops[t],i=e.node.inputs.map((t=>this._values[t]));if(-1!==i.indexOf(void 0))throw new Error("unresolved input detected: op: ".concat(e.node));const l=i;r.Logger.verbose("ExecPlan","Runing op:".concat(e.node.name," (").concat(l.map(((t,n)=>"'".concat(e.node.inputs[n],"': ").concat(t.type,"[").concat(t.dims.join(","),"]"))).join(", "),")"));const u=await this.profiler.event("node",e.node.name,(async()=>e.op.impl(n,l,e.op.context)));if(u.length!==e.node.outputs.length)throw new Error("the size of output does not match model definition.");u.forEach(((t,n)=>{const r=e.node.outputs[n];if(this._values[r])throw new Error("output [".concat(r,"] already has value: op:").concat(e.node.name));this._values[r]=t}));const h=new Set;u.forEach(((t,n)=>{const r=e.node.outputs[n];for(const e of a[r].to){const t=s[e];let n=!0;for(const e of t.inputs)if(!this._values[e]){n=!1;break}n&&h.add(e)}})),o.push(...h)}const l=[];for(let t=0;t<this.graph.getOutputIndices().length;t++){const e=this.graph.getOutputIndices()[t],n=this._values[e];if(void 0===n)throw new Error("required output [".concat(e,"] does not have value"));0===e?await n.getData():n.data,l.push(n)}return r.Logger.verbose("ExecPlan","disposing of inferenceHandler"),n.dispose(),l}))}}},7070:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;const r=n(1446),i=n(7778),o=n(9395),a=n(9162),s=n(2517);var c=o.onnxruntime.experimental.fbs;e.Graph={from:(t,e)=>new h(t,e)};class l{constructor(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=s.ProtoUtil.tensorValueTypeFromProto(t.type.tensorType))}get from(){return this._from}get to(){return this._to}}class u{constructor(t,e){t instanceof r.onnx.NodeProto?(this.name=t.name,this.opType=t.opType,this.attributes=new i.Attribute(t.attribute)):t instanceof c.Node&&(this.name=null!=e?e:t.name(),this.opType=t.opType(),this.attributes=new i.Attribute(s.ProtoUtil.tensorAttributesFromORTFormat(t))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class h{constructor(t,e){if(!t)throw new TypeError("graph is empty");this.buildGraph(t),this.transformGraph(e),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(t){if(t instanceof r.onnx.GraphProto)this.buildGraphFromOnnxFormat(t);else{if(!(t instanceof c.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(t)}}buildGraphFromOnnxFormat(t){const e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const n=new Map;if(!t.input)throw new Error("missing information in graph: input");const r=[];for(const i of t.input){if(e.has(i.name))throw new Error("duplicated input name: ".concat(i.name));const t=this._allData.push(new l(i))-1;e.set(i.name,t),r.push(i.name)}if(!t.initializer)throw new Error("missing information in graph: initializer");for(const i of t.initializer){let t=e.get(i.name);if(void 0===t){const n=new l;n.type={shape:{dims:s.ProtoUtil.tensorDimsFromProto(i.dims)},tensorType:s.ProtoUtil.tensorDataTypeFromProto(i.dataType)},t=this._allData.push(n)-1,e.set(i.name,t)}this._allData[t]._from=-1,this._allData[t].tensor=a.Tensor.fromProto(i)}for(let i=0;i<this._allData.length;i++)this._allData[i].tensor||(this._allInputIndices.push(i),this._allInputNames.push(r[i]));if(!t.output)throw new Error("missing information in graph: output");for(const i of t.output){if(e.has(i.name))throw new Error("duplicated output name: ".concat(i.name));const t=this._allData.push(new l(i))-1;e.set(i.name,t),this._allOutputIndices.push(t),this._allOutputNames.push(i.name)}if(!t.node)throw new Error("missing information in graph: node");for(const i of t.node){if(!i.name)for(let e=0;;e++){const t="unnamed_".concat(i.opType,"_").concat(e);if(!n.has(t)){i.name=t;break}}if(n.has(i.name))throw new Error("duplicated node name: ".concat(i.name));const t=this._nodes.push(new u(i))-1;n.set(i.name,t)}for(let i=0;i<this._nodes.length;i++){const n=this._nodes[i],r=t.node[i];if(!r.output)throw new Error("missing output for node: ".concat(r.name));for(const t of r.output){let o=e.get(t);if(void 0===o&&(o=this._allData.push(new l)-1,e.set(t,o)),n.outputs.push(o),void 0!==this._allData[o]._from)throw new Error("multiple nodes output to one data value: ".concat(o));if(this._allData[o]._from=i,"Constant"===r.opType){if(!r.attribute||1!==r.attribute.length||!r.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!r.output||1!==r.output.length)throw new Error("missing output or incorrect number of outputs for this Constant operator");n.outputs.pop(),n.executeNode=!1,this._allData[o]._from=-1,this._allData[o].tensor=a.Tensor.fromProto(r.attribute[0].t)}}}for(let i=0;i<this._nodes.length;i++){const n=this._nodes[i],r=t.node[i];if(!r.input)throw new Error("missing input for node: ".concat(r.name));for(const t of r.input){const o=e.get(t);if(void 0===o){if(""===t&&3===r.input.length&&"Resize"===r.opType)continue;throw new Error("unrecognized input '".concat(t,"' for node: ").concat(r.name))}n.inputs.push(o),this._allData[o]._to.push(i)}}return!0}buildGraphFromOrtFormat(t){var e,n,r;const i=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const o=new Map,h=[];for(let a=0;a<t.inputsLength();a++){const o=t.inputs(a);if(i.has(o))throw new Error("duplicated input name: ".concat(o));for(let a=0;a<t.nodeArgsLength();a++)if((null===(e=t.nodeArgs(a))||void 0===e?void 0:e.name())===o){const e=new l;if((null===(r=null===(n=t.nodeArgs(a))||void 0===n?void 0:n.type())||void 0===r?void 0:r.valueType())!==c.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const u=t.nodeArgs(a).type().value(new c.TensorTypeAndShape),d=s.ProtoUtil.tensorDataTypeFromProto(u.elemType()),p=u.shape(),f=[];for(let t=0;t<p.dimLength();t++)f.push(s.LongUtil.longToNumber(p.dim(t).value().dimValue()));e.type={shape:{dims:f},tensorType:d};const m=this._allData.push(e)-1;i.set(o,m),h.push(o)}}for(let c=0;c<t.initializersLength();c++){const e=t.initializers(c);let n=i.get(e.name());if(void 0===n){const t=new l,r=s.ProtoUtil.tensorDimsFromORTFormat(e),o=s.ProtoUtil.tensorDataTypeFromProto(e.dataType());t.type={shape:{dims:r},tensorType:o},n=this._allData.push(t)-1,i.set(e.name(),n)}this._allData[n]._from=-1,this._allData[n].tensor=a.Tensor.fromOrtTensor(e)}for(let a=0;a<this._allData.length;a++)this._allData[a].tensor||(this._allInputIndices.push(a),this._allInputNames.push(h[a]));for(let a=0;a<t.outputsLength();a++){const e=t.outputs(a);if(i.has(e))throw new Error("duplicated output name: ".concat(e));const n=this._allData.push(new l)-1;i.set(e,n),this._allOutputIndices.push(n),this._allOutputNames.push(e)}if(!t.nodes)throw new Error("missing information in graph: node");for(let a=0;a<t.nodesLength();a++){const e=t.nodes(a);let n=e.name();if(!n)for(let t=0;n="unnamed_".concat(e.opType(),"_").concat(t),o.has(n);t++);if(o.has(n))throw new Error("duplicated node name: ".concat(n));const r=this._nodes.push(new u(e,n))-1;o.set(n,r)}for(let s=0;s<this._nodes.length;s++){const e=this._nodes[s],n=t.nodes(s);if(null==n)throw new Error("No node exists at index ".concat(s));if(0===(null==n?void 0:n.outputsLength()))throw new Error("missing output for node: ".concat(n.name));for(let t=0;t<(null==n?void 0:n.outputsLength());t++){const r=null==n?void 0:n.outputs(t);let o=i.get(r);if(void 0===o&&(o=this._allData.push(new l)-1,i.set(r,o)),e.outputs.push(o),void 0!==this._allData[o]._from)throw new Error("multiple nodes output to one data value: ".concat(o));if(this._allData[o]._from=s,"Constant"===n.opType()){if(1!==n.attributesLength()||!n.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(1!==n.outputsLength())throw new Error("missing output or incorrect number of outputs for this Constant operator");e.outputs.pop(),e.executeNode=!1,this._allData[o]._from=-1,this._allData[o].tensor=a.Tensor.fromOrtTensor(n.attributes(0).t())}}}for(let a=0;a<this._nodes.length;a++){const e=this._nodes[a],n=t.nodes(a);if(0===n.inputsLength())throw new Error("missing input for node: ".concat(n.name));for(let t=0;t<n.inputsLength();t++){const r=n.inputs(t),o=i.get(r);if(void 0===o)throw new Error("unrecognized input '".concat(r,"' for node: ").concat(n.name()));e.inputs.push(o),this._allData[o]._to.push(a)}}}checkIsAcyclic(){const t=new Set;this._allInputIndices.forEach((e=>{this._allData[e]._to.forEach((e=>{t.add(e)}))}));const e=Array.from(t),n=new Array(this._nodes.length).fill("white");for(;e.length>0;){const t=e.pop();"gray"===n[t]?n[t]="black":(e.push(t),n[t]="gray",this._nodes[t].outputs.forEach((r=>{const i=this._allData[r];if(void 0!==i.tensor)throw new Error("node outputs should not be initialized");if(i._from!==t)throw new Error("from property of the Value object doesn't match index of Node being processed");i._to.forEach((t=>{if("gray"===n[t])throw new Error("model graph is cyclic");"white"===n[t]&&e.push(t)}))})))}}transformGraph(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),t&&t.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let t=0;for(let e=0;e<this._nodes.length;e++)this._nodes[e].executeNode?t>0&&(this._nodes[e].inputs.forEach((n=>{const r=this._allData[n]._to.indexOf(e+t);-1!==r&&(this._allData[n]._to[r]=e)})),this._nodes[e].outputs.forEach((n=>{this._allData[n]._from&&this._allData[n]._from===e+t&&(this._allData[n]._from=e)}))):(t++,this._nodes[e].outputs.forEach((t=>{this._allData[t]._from=-2})),this._nodes.splice(e,1),e--);t=0;for(let e=0;e<this._allData.length;e++)if(-2!==this._allData[e].from||-1!==this._allOutputIndices.indexOf(e+t)){if(t>0){let n=-1;void 0!==this._allData[e].from&&-1!==this._allData[e].from?(n=this._nodes[this._allData[e].from].outputs.indexOf(e+t),-1!==n&&(this._nodes[this._allData[e].from].outputs[n]=e)):(n=this._allInputIndices.indexOf(e+t),-1!==n&&(this._allInputIndices[n]=e)),this._allData[e].to.forEach((r=>{n=this._nodes[r].inputs.indexOf(e+t),-1!==n&&(this._nodes[r].inputs[n]=e)})),0===this._allData[e].to.length&&(n=this._allOutputIndices.indexOf(e+t),-1!==n&&(this._allOutputIndices[n]=e))}}else t++,this._allData.splice(e,1),e--}deleteNode(t){const e=this._nodes[t];if(e.outputs.length>1)for(let s=1;s<e.outputs.length;s++)if(this._allData[e.outputs[s]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ");e.executeNode=!1;const n=e.inputs[0],r=e.outputs[0],i=this._allData[r].to,o=this._allData[n].to.indexOf(t);if(-1===o)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[n].to.splice(o,1),this._allData[r]._to=[];const a=this._allOutputIndices.indexOf(r);if(-1!==a&&(this._allOutputIndices[a]=n),i&&i.length>0)for(const s of i){const t=this._nodes[s].inputs.indexOf(r);if(-1===t)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[s].inputs[t]=n,this._allData[n].to.push(s)}}removeAllDropoutNodes(){let t=0;for(const e of this._nodes){if("Dropout"===e.opType){if(1!==e.inputs.length)throw new Error("Dropout nodes should only contain one input. ");if(1!==e.outputs.length&&2!==e.outputs.length)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(2===e.outputs.length&&0!==this._allData[e.outputs[1]]._to.length)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(t)}t++}}removeAllIdentityNodes(){let t=0;for(const e of this._nodes)"Identity"===e.opType&&this.deleteNode(t),t++}isActivation(t){switch(t.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const t of this._nodes)if("Conv"===t.opType){const n=this._allData[t.outputs[0]]._to;if(1===n.length&&this.isActivation(this._nodes[n[0]])){const r=this._nodes[n[0]];if("Clip"===r.opType)if(1===r.inputs.length)try{t.attributes.set("activation_params","floats",[r.attributes.getFloat("min"),r.attributes.getFloat("max")])}catch(e){t.attributes.set("activation_params","floats",[s.MIN_CLIP,s.MAX_CLIP])}else{if(!(r.inputs.length>=3&&void 0!==this._allData[r.inputs[1]].tensor&&void 0!==this._allData[r.inputs[2]].tensor))continue;t.attributes.set("activation_params","floats",[this._allData[r.inputs[1]].tensor.floatData[0],this._allData[r.inputs[2]].tensor.floatData[0]])}t.attributes.set("activation","string",r.opType),this.deleteNode(n[0])}}}}},6231:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;const n={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},r={none:new class{log(t,e,n){}},console:new class{log(t,e,n){console.log("".concat(this.color(t)," ").concat(n?"\x1b[35m"+n+"\x1b[0m ":"").concat(e))}color(t){switch(t){case"verbose":return"\x1b[34;40mv\x1b[0m";case"info":return"\x1b[32mi\x1b[0m";case"warning":return"\x1b[30;43mw\x1b[0m";case"error":return"\x1b[31;40me\x1b[0m";case"fatal":return"\x1b[101mf\x1b[0m";default:throw new Error("unsupported severity: ".concat(t))}}}},i={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let o={"":i};function a(t,e,n,r){if(void 0===e)return i=t,{verbose:a.verbose.bind(null,i),info:a.info.bind(null,i),warning:a.warning.bind(null,i),error:a.error.bind(null,i),fatal:a.fatal.bind(null,i)};if(void 0===n)s(t,e);else if("number"==typeof n&&void 0===r)s(t,e);else if("string"==typeof n&&void 0===r)s(t,n,0,e);else{if("string"!=typeof n||"number"!=typeof r)throw new TypeError("input is valid");s(t,n,0,e)}var i}function s(t,e,i,a){const s=o[a||""]||o[""];n[t]<n[s.minimalSeverity]||(s.logDateTime&&(e="".concat((new Date).toISOString(),"|").concat(e)),s.logSourceLocation,r[s.provider].log(t,e,a))}!function(t){function e(t){o={},n("",t||{})}function n(t,n){if("*"===t)e(n);else{const e=o[t]||i;o[t]={provider:n.provider||e.provider,minimalSeverity:n.minimalSeverity||e.minimalSeverity,logDateTime:void 0===n.logDateTime?e.logDateTime:n.logDateTime,logSourceLocation:void 0===n.logSourceLocation?e.logSourceLocation:n.logSourceLocation}}}t.verbose=function(e,n){t("verbose",e,n)},t.info=function(e,n){t("info",e,n)},t.warning=function(e,n){t("warning",e,n)},t.error=function(e,n){t("error",e,n)},t.fatal=function(e,n){t("fatal",e,n)},t.reset=e,t.set=n,t.setWithEnv=function(t){const e={};t.logLevel&&(e.minimalSeverity=t.logLevel),n("",e)}}(a||(a={})),e.Logger=a;class c{constructor(t,e,n,r,i,o){this.category=t,this.name=e,this.startTime=n,this.endCallback=r,this.timer=i,this.ctx=o}end(){return this.endCallback(this)}async checkTimer(){if(void 0===this.ctx||void 0===this.timer)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class l{constructor(t,e,n,r){this.category=t,this.name=e,this.startTime=n,this.endTime=r}}e.Profiler=class{static create(t){return void 0===t?new this:new this(t.maxNumberEvents,t.flushBatchSize,t.flushIntervalInMilliseconds)}constructor(t,e,n){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=void 0===t?1e4:t,this._flushBatchSize=void 0===e?10:e,this._flushIntervalInMilliseconds=void 0===n?5e3:n}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,e.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(t,e,n,r){const i=this._started?this.begin(t,e,r):void 0;let o=!1;const a=n();if(a&&"function"==typeof a.then)return o=!0,new Promise(((t,e)=>{a.then((async e=>{i&&await i.end(),t(e)}),(async t=>{i&&await i.end(),e(t)}))}));if(!o&&i){const t=i.end();if(t&&"function"==typeof t.then)return new Promise(((e,n)=>{t.then((()=>{e(a)}),(t=>{n(t)}))}))}return a}begin(t,n,r){if(!this._started)throw new Error("profiler is not started yet");if(void 0===r){const r=(0,e.now)();return this.flush(r),new c(t,n,r,(t=>this.endSync(t)))}{const e=r.beginTimer();return new c(t,n,0,(async t=>this.end(t)),e,r)}}async end(t){const e=await t.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new l(t.category,t.name,t.startTime,e)),this.flush(e))}endSync(t){const n=(0,e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new l(t.category,t.name,t.startTime,n)),this.flush(n))}logOneEvent(t){e.Logger.verbose("Profiler.".concat(t.category),"".concat((t.endTime-t.startTime).toFixed(2),"ms on event '").concat(t.name,"' at ").concat(t.endTime.toFixed(2)))}flush(t){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||t-this._flushTime>=this._flushIntervalInMilliseconds){for(const t=this._flushPointer;this._flushPointer<t+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,e.now)()}}get started(){return this._started}},e.now="undefined"!=typeof performance&&performance.now?()=>performance.now():Date.now},2644:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;const r=n(5686),i=n(1446),o=n(7070),a=n(9395),s=n(2517);var c=a.onnxruntime.experimental.fbs;e.Model=class{constructor(){}load(t,e,n){if(!n)try{return void this.loadFromOnnxFormat(t,e)}catch(t){if(void 0!==n)throw t}this.loadFromOrtFormat(t,e)}loadFromOnnxFormat(t,e){const n=i.onnx.ModelProto.decode(t);if(s.LongUtil.longToNumber(n.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=n.opsetImport.map((t=>({domain:t.domain,version:s.LongUtil.longToNumber(t.version)}))),this._graph=o.Graph.from(n.graph,e)}loadFromOrtFormat(t,e){const n=new r.flatbuffers.ByteBuffer(t),i=c.InferenceSession.getRootAsInferenceSession(n).model();if(s.LongUtil.longToNumber(i.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let r=0;r<i.opsetImportLength();r++){const t=i.opsetImport(r);this._opsets.push({domain:null==t?void 0:t.domain(),version:s.LongUtil.longToNumber(t.version())})}this._graph=o.Graph.from(i.graph(),e)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},1047:(t,e)=>{"use strict";function n(t,e){if(e.endsWith("+")){const n=Number.parseInt(e.substring(0,e.length-1),10);return!isNaN(n)&&n<=t}if(2===e.split("-").length){const n=e.split("-"),r=Number.parseInt(n[0],10),i=Number.parseInt(n[1],10);return!isNaN(r)&&!isNaN(i)&&r<=t&&t<=i}return Number.parseInt(e,10)===t}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(t,e,r){for(const i of r){const r=i[0],o=i[1],a=i[2],s=i[3],c=i[4];if(t.opType===r)for(const t of e)if((t.domain===o||"ai.onnx"===t.domain&&""===o)&&n(t.version,a))return{opImpl:s,opInit:c}}throw new TypeError("cannot resolve operator '".concat(t.opType,"' with opsets: ").concat(e.map((t=>"".concat(t.domain||"ai.onnx"," v").concat(t.version))).join(", ")))}},9395:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onnxruntime=void 0;const r=n(5686);var i,o;(function(t){let e;!function(t){t[t.UNDEFINED=0]="UNDEFINED",t[t.FLOAT=1]="FLOAT",t[t.INT=2]="INT",t[t.STRING=3]="STRING",t[t.TENSOR=4]="TENSOR",t[t.GRAPH=5]="GRAPH",t[t.FLOATS=6]="FLOATS",t[t.INTS=7]="INTS",t[t.STRINGS=8]="STRINGS",t[t.TENSORS=9]="TENSORS",t[t.GRAPHS=10]="GRAPHS",t[t.SPARSE_TENSOR=11]="SPARSE_TENSOR",t[t.SPARSE_TENSORS=12]="SPARSE_TENSORS"}(e=t.AttributeType||(t.AttributeType={}))})((o=(i=e.onnxruntime||(e.onnxruntime={})).experimental||(i.experimental={})).fbs||(o.fbs={})),function(t){!function(t){!function(t){let e;!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VALUE=1]="VALUE",t[t.PARAM=2]="PARAM"}(e=t.DimensionValueType||(t.DimensionValueType={}))}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){let e;!function(t){t[t.UNDEFINED=0]="UNDEFINED",t[t.FLOAT=1]="FLOAT",t[t.UINT8=2]="UINT8",t[t.INT8=3]="INT8",t[t.UINT16=4]="UINT16",t[t.INT16=5]="INT16",t[t.INT32=6]="INT32",t[t.INT64=7]="INT64",t[t.STRING=8]="STRING",t[t.BOOL=9]="BOOL",t[t.FLOAT16=10]="FLOAT16",t[t.DOUBLE=11]="DOUBLE",t[t.UINT32=12]="UINT32",t[t.UINT64=13]="UINT64",t[t.COMPLEX64=14]="COMPLEX64",t[t.COMPLEX128=15]="COMPLEX128",t[t.BFLOAT16=16]="BFLOAT16"}(e=t.TensorDataType||(t.TensorDataType={}))}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){let e;!function(t){t[t.Primitive=0]="Primitive",t[t.Fused=1]="Fused"}(e=t.NodeType||(t.NodeType={}))}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){let e;!function(t){t[t.NONE=0]="NONE",t[t.tensor_type=1]="tensor_type",t[t.sequence_type=2]="sequence_type",t[t.map_type=3]="map_type"}(e=t.TypeInfoValue||(t.TypeInfoValue={}))}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsShape(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsShape(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}dim(e,n){let r=this.bb.__offset(this.bb_pos,4);return r?(n||new t.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}dimLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}static startShape(t){t.startObject(1)}static addDim(t,e){t.addFieldOffset(0,e,0)}static createDimVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startDimVector(t,e){t.startVector(4,e,4)}static endShape(t){return t.endObject()}static createShape(t,e){return n.startShape(t),n.addDim(t,e),n.endShape(t)}}e.Shape=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDimension(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDimension(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}value(e){let n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}denotation(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startDimension(t){t.startObject(2)}static addValue(t,e){t.addFieldOffset(0,e,0)}static addDenotation(t,e){t.addFieldOffset(1,e,0)}static endDimension(t){return t.endObject()}static createDimension(t,e,r){return n.startDimension(t),n.addValue(t,e),n.addDenotation(t,r),n.endDimension(t)}}e.Dimension=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDimensionValue(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDimensionValue(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}dimType(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):t.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}dimParam(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}static startDimensionValue(t){t.startObject(3)}static addDimType(e,n){e.addFieldInt8(0,n,t.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(t,e){t.addFieldInt64(1,e,t.createLong(0,0))}static addDimParam(t,e){t.addFieldOffset(2,e,0)}static endDimensionValue(t){return t.endObject()}static createDimensionValue(t,e,r,i){return n.startDimensionValue(t),n.addDimType(t,e),n.addDimValue(t,r),n.addDimParam(t,i),n.endDimensionValue(t)}}e.DimensionValue=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTensorTypeAndShape(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTensorTypeAndShape(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}elemType(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED}shape(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startTensorTypeAndShape(t){t.startObject(2)}static addElemType(e,n){e.addFieldInt32(0,n,t.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(t,e){t.addFieldOffset(1,e,0)}static endTensorTypeAndShape(t){return t.endObject()}static createTensorTypeAndShape(t,e,r){return n.startTensorTypeAndShape(t),n.addElemType(t,e),n.addShape(t,r),n.endTensorTypeAndShape(t)}}e.TensorTypeAndShape=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMapType(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMapType(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}keyType(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED}valueType(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startMapType(t){t.startObject(2)}static addKeyType(e,n){e.addFieldInt32(0,n,t.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(t,e){t.addFieldOffset(1,e,0)}static endMapType(t){return t.endObject()}static createMapType(t,e,r){return n.startMapType(t),n.addKeyType(t,e),n.addValueType(t,r),n.endMapType(t)}}e.MapType=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSequenceType(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSequenceType(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}elemType(e){let n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startSequenceType(t){t.startObject(1)}static addElemType(t,e){t.addFieldOffset(0,e,0)}static endSequenceType(t){return t.endObject()}static createSequenceType(t,e){return n.startSequenceType(t),n.addElemType(t,e),n.endSequenceType(t)}}e.SequenceType=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){(t.fbs||(t.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(t,e,n,r){return t.prep(4,12),t.writeInt32(r),t.writeInt32(n),t.writeInt32(e),t.offset()}}}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNodeEdge(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNodeEdge(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}nodeIndex(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb_pos+t):0}inputEdges(e,n){let r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+r)+12*e,this.bb):null}inputEdgesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}outputEdges(e,n){let r=this.bb.__offset(this.bb_pos,8);return r?(n||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+r)+12*e,this.bb):null}outputEdgesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startNodeEdge(t){t.startObject(3)}static addNodeIndex(t,e){t.addFieldInt32(0,e,0)}static addInputEdges(t,e){t.addFieldOffset(1,e,0)}static startInputEdgesVector(t,e){t.startVector(12,e,4)}static addOutputEdges(t,e){t.addFieldOffset(2,e,0)}static startOutputEdgesVector(t,e){t.startVector(12,e,4)}static endNodeEdge(t){return t.endObject()}static createNodeEdge(t,e,r,i){return n.startNodeEdge(t),n.addNodeIndex(t,e),n.addInputEdges(t,r),n.addOutputEdges(t,i),n.endNodeEdge(t)}}e.NodeEdge=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNode(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNode(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}domain(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}sinceVersion(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt32(this.bb_pos+t):0}index(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint32(this.bb_pos+t):0}opType(t){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}type(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.NodeType.Primitive}executionProviderType(t){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__string(this.bb_pos+e,t):null}inputs(t,e){let n=this.bb.__offset(this.bb_pos,20);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}inputsLength(){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0}outputs(t,e){let n=this.bb.__offset(this.bb_pos,22);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}outputsLength(){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0}attributes(e,n){let r=this.bb.__offset(this.bb_pos,24);return r?(n||new t.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}attributesLength(){let t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0}inputArgCounts(t){let e=this.bb.__offset(this.bb_pos,26);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}inputArgCountsLength(){let t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0}inputArgCountsArray(){let t=this.bb.__offset(this.bb_pos,26);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}implicitInputs(t,e){let n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}implicitInputsLength(){let t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0}static startNode(t){t.startObject(13)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addDomain(t,e){t.addFieldOffset(2,e,0)}static addSinceVersion(t,e){t.addFieldInt32(3,e,0)}static addIndex(t,e){t.addFieldInt32(4,e,0)}static addOpType(t,e){t.addFieldOffset(5,e,0)}static addType(e,n){e.addFieldInt32(6,n,t.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(t,e){t.addFieldOffset(7,e,0)}static addInputs(t,e){t.addFieldOffset(8,e,0)}static createInputsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startInputsVector(t,e){t.startVector(4,e,4)}static addOutputs(t,e){t.addFieldOffset(9,e,0)}static createOutputsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startOutputsVector(t,e){t.startVector(4,e,4)}static addAttributes(t,e){t.addFieldOffset(10,e,0)}static createAttributesVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startAttributesVector(t,e){t.startVector(4,e,4)}static addInputArgCounts(t,e){t.addFieldOffset(11,e,0)}static createInputArgCountsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startInputArgCountsVector(t,e){t.startVector(4,e,4)}static addImplicitInputs(t,e){t.addFieldOffset(12,e,0)}static createImplicitInputsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startImplicitInputsVector(t,e){t.startVector(4,e,4)}static endNode(t){return t.endObject()}static createNode(t,e,r,i,o,a,s,c,l,u,h,d,p,f){return n.startNode(t),n.addName(t,e),n.addDocString(t,r),n.addDomain(t,i),n.addSinceVersion(t,o),n.addIndex(t,a),n.addOpType(t,s),n.addType(t,c),n.addExecutionProviderType(t,l),n.addInputs(t,u),n.addOutputs(t,h),n.addAttributes(t,d),n.addInputArgCounts(t,p),n.addImplicitInputs(t,f),n.endNode(t)}}e.Node=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsValueInfo(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsValueInfo(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}type(e){let n=this.bb.__offset(this.bb_pos,8);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startValueInfo(t){t.startObject(3)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addType(t,e){t.addFieldOffset(2,e,0)}static endValueInfo(t){return t.endObject()}static createValueInfo(t,e,r,i){return n.startValueInfo(t),n.addName(t,e),n.addDocString(t,r),n.addType(t,i),n.endValueInfo(t)}}e.ValueInfo=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTypeInfo(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTypeInfo(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}denotation(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}valueType(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):t.experimental.fbs.TypeInfoValue.NONE}value(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}static startTypeInfo(t){t.startObject(3)}static addDenotation(t,e){t.addFieldOffset(0,e,0)}static addValueType(e,n){e.addFieldInt8(1,n,t.experimental.fbs.TypeInfoValue.NONE)}static addValue(t,e){t.addFieldOffset(2,e,0)}static endTypeInfo(t){return t.endObject()}static createTypeInfo(t,e,r,i){return n.startTypeInfo(t),n.addDenotation(t,e),n.addValueType(t,r),n.addValue(t,i),n.endTypeInfo(t)}}e.TypeInfo=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsOperatorSetId(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsOperatorSetId(t,n){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}domain(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}version(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}static startOperatorSetId(t){t.startObject(2)}static addDomain(t,e){t.addFieldOffset(0,e,0)}static addVersion(t,e){t.addFieldInt64(1,e,t.createLong(0,0))}static endOperatorSetId(t){return t.endObject()}static createOperatorSetId(t,n,r){return e.startOperatorSetId(t),e.addDomain(t,n),e.addVersion(t,r),e.endOperatorSetId(t)}}t.OperatorSetId=e}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTensor(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTensor(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}dims(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}dimsLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}dataType(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED}rawData(t){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}rawDataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}rawDataArray(){let t=this.bb.__offset(this.bb_pos,12);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}stringData(t,e){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}stringDataLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}static startTensor(t){t.startObject(6)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addDims(t,e){t.addFieldOffset(2,e,0)}static createDimsVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startDimsVector(t,e){t.startVector(8,e,8)}static addDataType(e,n){e.addFieldInt32(3,n,t.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(t,e){t.addFieldOffset(4,e,0)}static createRawDataVector(t,e){t.startVector(1,e.length,1);for(let n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()}static startRawDataVector(t,e){t.startVector(1,e,1)}static addStringData(t,e){t.addFieldOffset(5,e,0)}static createStringDataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startStringDataVector(t,e){t.startVector(4,e,4)}static endTensor(t){return t.endObject()}static createTensor(t,e,r,i,o,a,s){return n.startTensor(t),n.addName(t,e),n.addDocString(t,r),n.addDims(t,i),n.addDataType(t,o),n.addRawData(t,a),n.addStringData(t,s),n.endTensor(t)}}e.Tensor=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSparseTensor(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSparseTensor(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}values(e){let n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}indices(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dims(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}dimsLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSparseTensor(t){t.startObject(3)}static addValues(t,e){t.addFieldOffset(0,e,0)}static addIndices(t,e){t.addFieldOffset(1,e,0)}static addDims(t,e){t.addFieldOffset(2,e,0)}static createDimsVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startDimsVector(t,e){t.startVector(8,e,8)}static endSparseTensor(t){return t.endObject()}static createSparseTensor(t,e,r,i){return n.startSparseTensor(t),n.addValues(t,e),n.addIndices(t,r),n.addDims(t,i),n.endSparseTensor(t)}}e.SparseTensor=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsAttribute(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsAttribute(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}type(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.AttributeType.UNDEFINED}f(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat32(this.bb_pos+t):0}i(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}s(t){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}t(e){let n=this.bb.__offset(this.bb_pos,16);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}g(e){let n=this.bb.__offset(this.bb_pos,18);return n?(e||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}floats(t){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readFloat32(this.bb.__vector(this.bb_pos+e)+4*t):0}floatsLength(){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0}floatsArray(){let t=this.bb.__offset(this.bb_pos,20);return t?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}ints(t){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}intsLength(){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0}strings(t,e){let n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}stringsLength(){let t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0}tensors(e,n){let r=this.bb.__offset(this.bb_pos,26);return r?(n||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}tensorsLength(){let t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0}graphs(e,n){let r=this.bb.__offset(this.bb_pos,28);return r?(n||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}graphsLength(){let t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0}static startAttribute(t){t.startObject(13)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addType(e,n){e.addFieldInt32(2,n,t.experimental.fbs.AttributeType.UNDEFINED)}static addF(t,e){t.addFieldFloat32(3,e,0)}static addI(t,e){t.addFieldInt64(4,e,t.createLong(0,0))}static addS(t,e){t.addFieldOffset(5,e,0)}static addT(t,e){t.addFieldOffset(6,e,0)}static addG(t,e){t.addFieldOffset(7,e,0)}static addFloats(t,e){t.addFieldOffset(8,e,0)}static createFloatsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addFloat32(e[n]);return t.endVector()}static startFloatsVector(t,e){t.startVector(4,e,4)}static addInts(t,e){t.addFieldOffset(9,e,0)}static createIntsVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startIntsVector(t,e){t.startVector(8,e,8)}static addStrings(t,e){t.addFieldOffset(10,e,0)}static createStringsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startStringsVector(t,e){t.startVector(4,e,4)}static addTensors(t,e){t.addFieldOffset(11,e,0)}static createTensorsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startTensorsVector(t,e){t.startVector(4,e,4)}static addGraphs(t,e){t.addFieldOffset(12,e,0)}static createGraphsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startGraphsVector(t,e){t.startVector(4,e,4)}static endAttribute(t){return t.endObject()}static createAttribute(t,e,r,i,o,a,s,c,l,u,h,d,p,f){return n.startAttribute(t),n.addName(t,e),n.addDocString(t,r),n.addType(t,i),n.addF(t,o),n.addI(t,a),n.addS(t,s),n.addT(t,c),n.addG(t,l),n.addFloats(t,u),n.addInts(t,h),n.addStrings(t,d),n.addTensors(t,p),n.addGraphs(t,f),n.endAttribute(t)}}e.Attribute=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGraph(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGraph(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}initializers(e,n){let r=this.bb.__offset(this.bb_pos,4);return r?(n||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}initializersLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}nodeArgs(e,n){let r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}nodeArgsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}nodes(e,n){let r=this.bb.__offset(this.bb_pos,8);return r?(n||new t.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}nodesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}maxNodeIndex(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint32(this.bb_pos+t):0}nodeEdges(e,n){let r=this.bb.__offset(this.bb_pos,12);return r?(n||new t.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}nodeEdgesLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}inputs(t,e){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}inputsLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}outputs(t,e){let n=this.bb.__offset(this.bb_pos,16);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}outputsLength(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}sparseInitializers(e,n){let r=this.bb.__offset(this.bb_pos,18);return r?(n||new t.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}sparseInitializersLength(){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}static startGraph(t){t.startObject(8)}static addInitializers(t,e){t.addFieldOffset(0,e,0)}static createInitializersVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startInitializersVector(t,e){t.startVector(4,e,4)}static addNodeArgs(t,e){t.addFieldOffset(1,e,0)}static createNodeArgsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startNodeArgsVector(t,e){t.startVector(4,e,4)}static addNodes(t,e){t.addFieldOffset(2,e,0)}static createNodesVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startNodesVector(t,e){t.startVector(4,e,4)}static addMaxNodeIndex(t,e){t.addFieldInt32(3,e,0)}static addNodeEdges(t,e){t.addFieldOffset(4,e,0)}static createNodeEdgesVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startNodeEdgesVector(t,e){t.startVector(4,e,4)}static addInputs(t,e){t.addFieldOffset(5,e,0)}static createInputsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startInputsVector(t,e){t.startVector(4,e,4)}static addOutputs(t,e){t.addFieldOffset(6,e,0)}static createOutputsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startOutputsVector(t,e){t.startVector(4,e,4)}static addSparseInitializers(t,e){t.addFieldOffset(7,e,0)}static createSparseInitializersVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startSparseInitializersVector(t,e){t.startVector(4,e,4)}static endGraph(t){return t.endObject()}static createGraph(t,e,r,i,o,a,s,c,l){return n.startGraph(t),n.addInitializers(t,e),n.addNodeArgs(t,r),n.addNodes(t,i),n.addMaxNodeIndex(t,o),n.addNodeEdges(t,a),n.addInputs(t,s),n.addOutputs(t,c),n.addSparseInitializers(t,l),n.endGraph(t)}}e.Graph=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsModel(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsModel(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}irVersion(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}opsetImport(e,n){let r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}opsetImportLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}producerName(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}producerVersion(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}domain(t){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}modelVersion(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}docString(t){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__string(this.bb_pos+e,t):null}graph(e){let n=this.bb.__offset(this.bb_pos,18);return n?(e||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}graphDocString(t){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__string(this.bb_pos+e,t):null}static startModel(t){t.startObject(9)}static addIrVersion(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addOpsetImport(t,e){t.addFieldOffset(1,e,0)}static createOpsetImportVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startOpsetImportVector(t,e){t.startVector(4,e,4)}static addProducerName(t,e){t.addFieldOffset(2,e,0)}static addProducerVersion(t,e){t.addFieldOffset(3,e,0)}static addDomain(t,e){t.addFieldOffset(4,e,0)}static addModelVersion(t,e){t.addFieldInt64(5,e,t.createLong(0,0))}static addDocString(t,e){t.addFieldOffset(6,e,0)}static addGraph(t,e){t.addFieldOffset(7,e,0)}static addGraphDocString(t,e){t.addFieldOffset(8,e,0)}static endModel(t){return t.endObject()}static createModel(t,e,r,i,o,a,s,c,l,u){return n.startModel(t),n.addIrVersion(t,e),n.addOpsetImport(t,r),n.addProducerName(t,i),n.addProducerVersion(t,o),n.addDomain(t,a),n.addModelVersion(t,s),n.addDocString(t,c),n.addGraph(t,l),n.addGraphDocString(t,u),n.endModel(t)}}e.Model=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKernelCreateInfos(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKernelCreateInfos(t,n){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}nodeIndices(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}nodeIndicesLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}nodeIndicesArray(){let t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}kernelDefHashes(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}kernelDefHashesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startKernelCreateInfos(t){t.startObject(2)}static addNodeIndices(t,e){t.addFieldOffset(0,e,0)}static createNodeIndicesVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startNodeIndicesVector(t,e){t.startVector(4,e,4)}static addKernelDefHashes(t,e){t.addFieldOffset(1,e,0)}static createKernelDefHashesVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startKernelDefHashesVector(t,e){t.startVector(8,e,8)}static endKernelCreateInfos(t){return t.endObject()}static createKernelCreateInfos(t,n,r){return e.startKernelCreateInfos(t),e.addNodeIndices(t,n),e.addKernelDefHashes(t,r),e.endKernelCreateInfos(t)}}t.KernelCreateInfos=e}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSubGraphSessionState(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSubGraphSessionState(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}graphId(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}sessionState(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startSubGraphSessionState(t){t.startObject(2)}static addGraphId(t,e){t.addFieldOffset(0,e,0)}static addSessionState(t,e){t.addFieldOffset(1,e,0)}static endSubGraphSessionState(t){let e=t.endObject();return t.requiredField(e,4),e}static createSubGraphSessionState(t,e,r){return n.startSubGraphSessionState(t),n.addGraphId(t,e),n.addSessionState(t,r),n.endSubGraphSessionState(t)}}e.SubGraphSessionState=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSessionState(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSessionState(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}kernels(e){let n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}subGraphSessionStates(e,n){let r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}subGraphSessionStatesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSessionState(t){t.startObject(2)}static addKernels(t,e){t.addFieldOffset(0,e,0)}static addSubGraphSessionStates(t,e){t.addFieldOffset(1,e,0)}static createSubGraphSessionStatesVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startSubGraphSessionStatesVector(t,e){t.startVector(4,e,4)}static endSessionState(t){return t.endObject()}static createSessionState(t,e,r){return n.startSessionState(t),n.addKernels(t,e),n.addSubGraphSessionStates(t,r),n.endSessionState(t)}}e.SessionState=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInferenceSession(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInferenceSession(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static bufferHasIdentifier(t){return t.__has_identifier("ORTM")}ortVersion(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}model(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}sessionState(e){let n=this.bb.__offset(this.bb_pos,8);return n?(e||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startInferenceSession(t){t.startObject(3)}static addOrtVersion(t,e){t.addFieldOffset(0,e,0)}static addModel(t,e){t.addFieldOffset(1,e,0)}static addSessionState(t,e){t.addFieldOffset(2,e,0)}static endInferenceSession(t){return t.endObject()}static finishInferenceSessionBuffer(t,e){t.finish(e,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(t,e){t.finish(e,"ORTM",!0)}static createInferenceSession(t,e,r,i){return n.startInferenceSession(t),n.addOrtVersion(t,e),n.addModel(t,r),n.addSessionState(t,i),n.endInferenceSession(t)}}e.InferenceSession=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={}))},7448:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxjsSessionHandler=void 0;const r=n(1670),i=n(9162);e.OnnxjsSessionHandler=class{constructor(t){this.session=t,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(t,e,n){const o=new Map;for(const r in t)if(Object.hasOwnProperty.call(t,r)){const e=t[r];o.set(r,new i.Tensor(e.dims,e.type,void 0,void 0,e.data))}const a=await this.session.run(o),s={};return a.forEach(((t,e)=>{s[e]=new r.Tensor(t.type,t.data,t.dims)})),s}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;const r=n(7067),i=n(1296),o=n(7091),a=n(1036),s=n(6231),c=n(2644);e.Session=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._initialized=!1,this.backendHint=t.backendHint,this.profiler=s.Profiler.create(t.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(t,e,n){await this.profiler.event("session","Session.loadModel",(async()=>{const a=await(0,o.resolveBackend)(this.backendHint);if(this.sessionHandler=a.createSessionHandler(this.context),this._model=new c.Model,"string"==typeof t){const e=t.endsWith(".ort");if("undefined"==typeof fetch){const n=await(0,i.promisify)(r.readFile)(t);this.initialize(n,e)}else{const n=await fetch(t),r=await n.arrayBuffer();this.initialize(new Uint8Array(r),e)}}else if(ArrayBuffer.isView(t))this.initialize(t);else{const r=new Uint8Array(t,e||0,n||t.byteLength);this.initialize(r)}}))}initialize(t,e){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",(()=>{const n=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(t,n,e),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new a.ExecutionPlan(this._model.graph,this._ops,this.profiler)})),this._initialized=!0}async run(t){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",(async()=>{const e=this.normalizeAndValidateInputs(t),n=await this._executionPlan.execute(this.sessionHandler,e);return this.createOutput(n)}))}normalizeAndValidateInputs(t){const e=this._model.graph.getInputNames();if(Array.isArray(t)){if(t.length!==e.length)throw new Error("incorrect input array length: expected ".concat(e.length," but got ").concat(t.length))}else{if(t.size!==e.length)throw new Error("incorrect input map size: expected ".concat(e.length," but got ").concat(t.size));const n=new Array(t.size);let r=0;for(let i=0;i<e.length;++i){const o=t.get(e[i]);if(!o)throw new Error("missing input tensor for: '".concat(name,"'"));n[r++]=o}t=n}if(this.context.graphInputTypes&&0!==this.context.graphInputTypes.length&&this.context.graphInputDims&&0!==this.context.graphInputDims.length)this.validateInputTensorDims(this.context.graphInputDims,t,!1);else{const e=this._model.graph.getInputIndices(),n=this._model.graph.getValues(),r=new Array(e.length);for(let i=0;i<e.length;++i){const o=n[e[i]];r[i]=o.type.shape.dims,this.context.graphInputTypes.push(o.type.tensorType),this.context.graphInputDims.push(t[i].dims)}this.validateInputTensorDims(r,t,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,t),t}validateInputTensorTypes(t,e){for(let n=0;n<e.length;n++){const r=t[n],i=e[n].type;if(r!==i)throw new Error("input tensor[".concat(n,"] check failed: expected type '").concat(r,"' but got ").concat(i))}}validateInputTensorDims(t,e,n){for(let r=0;r<e.length;r++){const i=t[r],o=e[r].dims;if(!this.compareTensorDims(i,o,n))throw new Error("input tensor[".concat(r,"] check failed: expected shape '[").concat(i.join(","),"]' but got [").concat(o.join(","),"]"))}}compareTensorDims(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r]&&(!n||0!==t[r]))return!1;return!0}createOutput(t){const e=this._model.graph.getOutputNames();if(t.length!==e.length)throw new Error("expected number of outputs do not match number of generated outputs");const n=new Map;for(let r=0;r<e.length;++r)n.set(e[r],t[r]);return n}initializeOps(t){const e=t.getNodes();this._ops=new Array(e.length);for(let n=0;n<e.length;n++)this._ops[n]=this.sessionHandler.resolve(e[n],this._model.opsets,t)}}},9162:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const i=n(3442),o=r(n(3720)),a=n(1446),s=n(9395),c=n(2517);var l=s.onnxruntime.experimental.fbs;class u{get data(){if(void 0===this.cache){const t=this.dataProvider(this.dataId);if(t.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=t}return this.cache}get stringData(){if("string"!==this.type)throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if("string"!==this.type)return this.data;throw new TypeError("type cannot be non-number (string)")}get(t){return this.data[c.ShapeUtil.indicesToOffset(t,this.strides)]}set(t,e){this.data[c.ShapeUtil.indicesToOffset(t,this.strides)]=e}async getData(){return void 0===this.cache&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=c.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(t,e,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i.Guid.create();this.dims=t,this.type=e,this.dataProvider=n,this.asyncDataProvider=r,this.cache=o,this.dataId=a,this.size=c.ShapeUtil.validateDimsAndCalcSize(t);const s=this.size,l=void 0===n&&void 0===r&&void 0===o;if(void 0!==o&&o.length!==s)throw new RangeError("Input dims doesn't match data length.");if("string"===e){if(!(void 0===o||Array.isArray(o)&&o.every((t=>"string"==typeof t))))throw new TypeError("cache should be a string array");l&&(this.cache=new Array(s))}else{if(void 0!==o){const t=d(e);if(!(o instanceof t))throw new TypeError("cache should be type ".concat(t.name))}if(l){const t=new ArrayBuffer(s*function(t){switch(t){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error("cannot calculate sizeof() on type ".concat(t))}}(e));this.cache=function(t,e){return new(d(e))(t)}(t,e)}}}static fromProto(t){if(!t)throw new Error("cannot construct Value from an empty tensor");const e=c.ProtoUtil.tensorDataTypeFromProto(t.dataType),n=c.ProtoUtil.tensorDimsFromProto(t.dims),r=new u(n,e);if("string"===e)t.stringData.forEach(((t,e)=>{r.data[e]=(0,c.decodeUtf8String)(t)}));else if(t.rawData&&"number"==typeof t.rawData.byteLength&&t.rawData.byteLength>0){const e=r.data,n=new DataView(t.rawData.buffer,t.rawData.byteOffset,t.rawData.byteLength),i=h(t.dataType),o=t.rawData.byteLength/i;if(t.rawData.byteLength%i!=0)throw new Error("invalid buffer length");if(e.length!==o)throw new Error("buffer length mismatch");for(let r=0;r<o;r++){const o=f(n,t.dataType,r*i);e[r]=o}}else{let e;switch(t.dataType){case a.onnx.TensorProto.DataType.FLOAT:e=t.floatData;break;case a.onnx.TensorProto.DataType.INT32:case a.onnx.TensorProto.DataType.INT16:case a.onnx.TensorProto.DataType.UINT16:case a.onnx.TensorProto.DataType.INT8:case a.onnx.TensorProto.DataType.UINT8:case a.onnx.TensorProto.DataType.BOOL:e=t.int32Data;break;case a.onnx.TensorProto.DataType.INT64:e=t.int64Data;break;case a.onnx.TensorProto.DataType.DOUBLE:e=t.doubleData;break;case a.onnx.TensorProto.DataType.UINT32:case a.onnx.TensorProto.DataType.UINT64:e=t.uint64Data;break;default:throw new Error("unspecific error")}if(null==e)throw new Error("failed to populate data from a tensorproto value");const n=r.data;if(n.length!==e.length)throw new Error("array length mismatch");for(let r=0;r<e.length;r++){const i=e[r];o.default.isLong(i)?n[r]=p(i,t.dataType):n[r]=i}}return r}static fromData(t,e,n){return new u(e,n,void 0,void 0,t)}static fromOrtTensor(t){if(!t)throw new Error("cannot construct Value from an empty tensor");const e=c.ProtoUtil.tensorDimsFromORTFormat(t),n=c.ProtoUtil.tensorDataTypeFromProto(t.dataType()),r=new u(e,n);if("string"===n)for(let i=0;i<t.stringDataLength();i++)r.data[i]=t.stringData(i);else if(t.rawDataArray()&&"number"==typeof t.rawDataLength()&&t.rawDataLength()>0){const e=r.data,n=new DataView(t.rawDataArray().buffer,t.rawDataArray().byteOffset,t.rawDataLength()),i=h(t.dataType()),o=t.rawDataLength()/i;if(t.rawDataLength()%i!=0)throw new Error("invalid buffer length");if(e.length!==o)throw new Error("buffer length mismatch");for(let r=0;r<o;r++){const o=f(n,t.dataType(),r*i);e[r]=o}}return r}}function h(t){switch(t){case a.onnx.TensorProto.DataType.UINT8:case a.onnx.TensorProto.DataType.INT8:case a.onnx.TensorProto.DataType.BOOL:return 1;case a.onnx.TensorProto.DataType.UINT16:case a.onnx.TensorProto.DataType.INT16:return 2;case a.onnx.TensorProto.DataType.FLOAT:case a.onnx.TensorProto.DataType.INT32:case a.onnx.TensorProto.DataType.UINT32:return 4;case a.onnx.TensorProto.DataType.INT64:case a.onnx.TensorProto.DataType.DOUBLE:case a.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error("cannot calculate sizeof() on type ".concat(a.onnx.TensorProto.DataType[t]))}}function d(t){switch(t){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function p(t,e){if(e===a.onnx.TensorProto.DataType.INT64||e===l.TensorDataType.INT64){if(t.greaterThanOrEqual(2147483648)||t.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(e!==a.onnx.TensorProto.DataType.UINT32&&e!==l.TensorDataType.UINT32&&e!==a.onnx.TensorProto.DataType.UINT64&&e!==l.TensorDataType.UINT64)throw new TypeError("not a LONG type: ".concat(a.onnx.TensorProto.DataType[e]));if(t.greaterThanOrEqual(4294967296)||t.lessThan(0))throw new TypeError("uint64 is not supported")}return t.toNumber()}function f(t,e,n){switch(e){case a.onnx.TensorProto.DataType.BOOL:case a.onnx.TensorProto.DataType.UINT8:return t.getUint8(n);case a.onnx.TensorProto.DataType.INT8:return t.getInt8(n);case a.onnx.TensorProto.DataType.UINT16:return t.getUint16(n,!0);case a.onnx.TensorProto.DataType.INT16:return t.getInt16(n,!0);case a.onnx.TensorProto.DataType.FLOAT:return t.getFloat32(n,!0);case a.onnx.TensorProto.DataType.INT32:return t.getInt32(n,!0);case a.onnx.TensorProto.DataType.UINT32:return t.getUint32(n,!0);case a.onnx.TensorProto.DataType.INT64:return p(o.default.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!1),e);case a.onnx.TensorProto.DataType.DOUBLE:return t.getFloat64(n,!0);case a.onnx.TensorProto.DataType.UINT64:return p(o.default.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!0),e);default:throw new Error("cannot read from DataView for type ".concat(a.onnx.TensorProto.DataType[e]))}}e.Tensor=u},2517:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUtf8String=e.MAX_CLIP=e.MIN_CLIP=e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.ArrayUtil=e.assert=e.checkInputsShape=void 0;const i=n(5686),o=r(n(3720)),a=n(1446),s=n(9162);e.checkInputsShape=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!t||t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].dims||t[i].dims.length!==n[i])return!1;return!0},e.assert=function(t,e){if(!t)throw new Error("string"==typeof e?e:e())},e.ArrayUtil=class{static arraysEqual(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}};class c{static preprocessInputShapes(t,e){return[1===t.length?[1,t[0]]:t,1===e.length?[e[0],1]:e]}static postprocessOutputShape(t,e,n){1===e&&t.splice(t.length-2,1),1===n&&t.pop()}static calcMatMulShape(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]}}e.MatMulUtil=c;class l{static calcShape(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t.length,i=e.length;if(0===r)return e;if(0===i)return t;const o=Math.max(t.length,e.length),a=new Array(o);if(n){if(r<2||i<2)return;const n=c.calcMatMulShape([t[r-2],t[r-1]],[e[i-2],e[i-1]]);if(void 0===n)return;[a[o-2],a[o-1]]=n}for(let s=n?3:1;s<=o;s++){const n=r-s<0?1:t[r-s],c=i-s<0?1:e[i-s];if(n!==c&&n>1&&c>1)return;a[o-s]=Math.max(n,c)}return a}static index(t,e){const n=new Array(e.length);return l.fillIndex(t,e,n),n}static fillIndex(t,e,n){const r=t.length-e.length;for(let i=0;i<e.length;i++)n[i]=t[r+i]%e[i]}static calc(t,e,n,r,i){const o=l.calcShape(t.dims,e.dims);if(o){if(r&&!d.areEqual(o,t.dims))return;const a=d.size(o),c=r?t:new s.Tensor(o,i||t.type);if(0===o.length)c.set([],n(t.get([]),e.get([])));else{const r=new Array(o.length),i=new Array(t.dims.length),s=new Array(e.dims.length);let u,h=0,d=0,p=!1,f=!1;0===t.dims.length&&(h=t.get([]),p=!0),0===e.dims.length&&(d=e.get([]),f=!0);for(let m=0;m<a;m++){u=m;for(let t=o.length-1;t>=0;t--)r[t]=u%o[t],u=Math.floor(u/o[t]);p||(l.fillIndex(r,t.dims,i),h=t.get(i)),f||(l.fillIndex(r,e.dims,s),d=e.get(s)),c.set(r,n(h,d))}}return c}}static isValidBroadcast(t,e){const n=t.length,r=e.length;if(n>r)return!1;for(let i=1;i<=n;i++)if(1!==t[n-i]&&t[n-i]!==e[r-i])return!1;return!0}static getBroadcastDims(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const o=n-1-i,a=t[o]||1;(e[e.length-1-i]||1)>1&&1===a&&r.unshift(o)}return r}}e.BroadcastUtil=l,e.arrayCopyHelper=function(t,e,n,r,i){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+i>e.length)throw new Error("source indices to be copied are outside bounds");if(n+i>t.length)throw new Error("target array is too small to hold result");for(let o=0;o<i;o++)t[n+o]=e[r+o]},e.GemmUtil=class{static getShapeOfGemmResult(t,e,n,r,i){if(2!==t.length||2!==n.length)throw new Error("shape need to be of size 2");let o,a,s;e?(o=t[1],a=t[0]):(o=t[0],a=t[1]);let c=-1;if(r?(s=n[0],c=1):(s=n[1],c=0),n[c]!==a)throw new Error("dimension mismatch");if(o<=0||s<=0||a<=0)throw new Error("invalid shape specified");if(i&&!l.isValidBroadcast(i,[o,s]))throw new Error("gemm: invalid bias shape for broadcast");return[o,s,a]}};class u{static tensorDataTypeFromProto(t){switch(t){case a.onnx.TensorProto.DataType.INT8:return"int8";case a.onnx.TensorProto.DataType.UINT8:return"uint8";case a.onnx.TensorProto.DataType.BOOL:return"bool";case a.onnx.TensorProto.DataType.INT16:return"int16";case a.onnx.TensorProto.DataType.UINT16:return"uint16";case a.onnx.TensorProto.DataType.INT32:return"int32";case a.onnx.TensorProto.DataType.UINT32:return"uint32";case a.onnx.TensorProto.DataType.FLOAT:return"float32";case a.onnx.TensorProto.DataType.DOUBLE:return"float64";case a.onnx.TensorProto.DataType.STRING:return"string";case a.onnx.TensorProto.DataType.INT64:return"int32";case a.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error("unsupported data type: ".concat(a.onnx.TensorProto.DataType[t]))}}static tensorDataTypeStringToEnum(t){switch(t){case"int8":return a.onnx.TensorProto.DataType.INT8;case"uint8":return a.onnx.TensorProto.DataType.UINT8;case"bool":return a.onnx.TensorProto.DataType.BOOL;case"int16":return a.onnx.TensorProto.DataType.INT16;case"uint16":return a.onnx.TensorProto.DataType.UINT16;case"int32":return a.onnx.TensorProto.DataType.INT32;case"uint32":return a.onnx.TensorProto.DataType.UINT32;case"float32":return a.onnx.TensorProto.DataType.FLOAT;case"float64":return a.onnx.TensorProto.DataType.DOUBLE;case"string":return a.onnx.TensorProto.DataType.STRING;case"int64":return a.onnx.TensorProto.DataType.INT64;case"uint64":return a.onnx.TensorProto.DataType.UINT64;default:throw new Error("unsupported data type: ".concat(t))}}static tensorDimsFromProto(t){return t.map((t=>o.default.isLong(t)?t.toNumber():t))}static tensorValueTypeFromProto(t){return{tensorType:u.tensorDataTypeFromProto(t.elemType),shape:{dims:u.tensorDimsFromProto(t.shape.dim.map((t=>t.dimValue)))}}}static tensorDimsFromORTFormat(t){const e=[];for(let n=0;n<t.dimsLength();n++)e.push(h.longToNumber(t.dims(n)));return e}static tensorAttributesFromORTFormat(t){const e=[];for(let n=0;n<t.attributesLength();n++)e.push(t.attributes(n));return e}}e.ProtoUtil=u;class h{static longToNumber(t,e){return o.default.isLong(t)?t.toNumber():t instanceof i.flatbuffers.Long?o.default.fromValue({low:t.low,high:t.high,unsigned:null!=e&&e}).toNumber():t}static isLong(t){return o.default.isLong(t)||t instanceof i.flatbuffers.Long}}e.LongUtil=h;class d{static size(t){return d.getSizeFromDimensionRange(t,0,t.length)}static sizeFromDimension(t,e){if(e<0||e>t.length)throw new Error("invalid dimension of ".concat(e," for sizeFromDimension as Tensor has ").concat(t.length," dimensions."));return d.getSizeFromDimensionRange(t,e,t.length)}static sizeToDimension(t,e){if(e<0||e>t.length)throw new Error("invalid dimension of ".concat(e," for sizeToDimension as Tensor has ").concat(t.length," dimensions."));return d.getSizeFromDimensionRange(t,0,e)}static getSizeFromDimensionRange(t,e,n){let r=1;for(let i=e;i<n;i++){if(t[i]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");r*=t[i]}return r}static computeStrides(t){const e=t.length;if(0===e)return[];if(1===e)return[1];const n=new Array(e);n[e-1]=1,n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}static transpose(t){return t.slice().reverse()}static indicesToOffset(t,e,n){void 0===n&&(n=t.length);let r=0;for(let i=0;i<n;++i)r+=e[i]*t[i];return r}static offsetToIndices(t,e){const n=e.length;if(0===n)return[];if(1===n)return[t*e[0]];const r=new Array(e.length);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/e[i]),t-=r[i]*e[i];return r[r.length-1]=t,r}static normalizeAxis(t,e){if(t<-e&&t>=e)throw new Error("unsupported axis for this operation.");return t<0?t+e:t}static normalizeAxes(t,e){return t.map((t=>this.normalizeAxis(t,e)))}static incrementIndex(t,e,n){if(0===e.length||0===t.length)throw new Error("Index incrementing unsupported for scalar Tensor");if(void 0===n)n=e.length;else if(n<=0||n>e.length)throw new Error("Incorrect axis to increment on");for(let r=n-1;r>=0&&(t[r]++,!(t[r]<e[r]));--r)t[r]=0}static calculateReshapedDims(t,e){if(0===e.length){if(0===t.length||1===d.size(t))return[];throw new Error("cannot reshape to a scalar Tensor")}const n=e.length,r=new Array(n);let i=-1,o=1;for(let s=0;s<n;s++){if(e[s]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(-1===e[s]){if(-1!==i)throw new Error("at most one dimension in shape hints can be -1");i=s}else{if(0===e[s]){if(s>=t.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");r[s]=t[s]}else r[s]=e[s];o*=r[s]}}const a=d.size(t);if(-1!==i){if(a%o!=0)throw new Error("the input tensor cannot be reshaped to the requested shape. Input shape: [".concat(t,"] Output shape: [").concat(e,"]"));r[i]=a/o}else if(o!==a)throw new Error("reshapedDims and originalDims don't have matching sizes");return r}static sortBasedOnPerm(t,e){return e?e.map((e=>t[e])):t.slice().reverse()}static padShape(t,e){const n=t.length;return t.map(((t,r)=>t+e[r]+e[r+n]))}static areEqual(t,e){return t.length===e.length&&t.every(((t,n)=>t===e[n]))}static validateDimsAndCalcSize(t){if(t.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let e=1;for(const n of t){if(!Number.isInteger(n))throw new TypeError("Invalid shape: ".concat(n," is not an integer"));if(n<0||n>2147483647)throw new TypeError("Invalid shape: length ".concat(n," is not allowed"));e*=n}return e}static flattenShape(t,e){e<0&&(e+=t.length);const n=t.reduce(((t,e)=>t*e),1),r=t.slice(e).reduce(((t,e)=>t*e),1);return[n/r,r]}static squeezeShape(t,e){const n=new Array;e=d.normalizeAxes(e,t.length);for(let r=0;r<t.length;r++){const i=e.indexOf(r)>=0;if(i&&1!==t[r])throw new Error("squeeze an axis of size different than 1");(0===e.length&&t[r]>1||e.length>0&&!i)&&n.push(t[r])}return n}static unsqueezeShape(t,e){const n=new Array(t.length+e.length);n.fill(0);for(let i=0;i<e.length;i++){const t=d.normalizeAxis(e[i],n.length);if(t>=n.length)throw new Error("'axes' has an out of range axis");if(0!==n[t])throw new Error("'axes' has a duplicate axis");n[t]=1}let r=0;for(let i=0;i<n.length;i++)0===n[i]&&(n[i]=t[r++]);if(r!==t.length)throw new Error("the unsqueezed dimension could not be established");return n}}e.ShapeUtil=d,e.MathUtil=class{static sqr(t,e,n,r,i){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+i>e.length)throw new Error("source indices to be copied are outside bounds");if(n+i>t.length)throw new Error("target array is too small to hold result");for(let o=0;o<i;o++)t[n+o]+=Math.pow(e[r+o],2)}static axpy(t,e,n,r,i,o){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+i>e.length)throw new Error("source indices to be copied are outside bounds");if(n+i>t.length)throw new Error("target array is too small to hold result");for(let a=0;a<i;a++)t[n+a]+=o*e[r+a]}static powx(t,e,n,r,i,o){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+i>e.length)throw new Error("source indices to be copied are outside bounds");if(n+i>t.length)throw new Error("target array is too small to hold result");for(let a=0;a<i;a++)t[n+a]=Math.pow(e[r+a],o)}static mul(t,e,n,r,i){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+i>e.length)throw new Error("source indices to be copied are outside bounds");if(n+i>t.length)throw new Error("target array is too small to hold result");for(let o=0;o<i;o++)t[n+o]=e[r+o]*t[n+o]}};class p{static splitShape(t,e,n,r){if(0===n.length){if(!r)throw new Error("need to know number of outputs when the 'split' attribute is not specified");p.determineSplit(t[e],r,n)}const i=[],o=[0];for(let a=0;a<n.length;++a){0!==a&&o.push(o[a-1]+n[a-1]);const r=t.slice();r[e]=n[a],i.push(r)}return[i,o]}static determineSplit(t,e,n){if(t%e!=0)throw new Error("cannot split tensor to equal sized parts");for(let r=0;r<e;++r)n.push(t/e)}}e.SplitUtil=p;class f{static calcReduce(t,e,n,r,i){const o=t.dims.slice(0);0===e.length&&o.forEach(((t,n)=>e.push(n)));const a=f.calcReduceShape(o,e,!0),c=d.size(a),u=new s.Tensor(a,t.type),h=d.computeStrides(a),p=d.computeStrides(o),m=new Array(o.length);for(let s=0;s<c;s++){const n=d.offsetToIndices(s,h);l.fillIndex(n,o,m),u.set(n,f.calcReduceByAxis(t.numberData,e,o,0,d.indicesToOffset(m,p),r,i))}return n?u:new s.Tensor(f.calcReduceShape(o,e,n),u.type,void 0,void 0,u.data,u.dataId)}static calcReduceByAxis(t,e,n,r,i,o,a){let s=0;if(r>=e.length)return o(t[i]);const c=e[r],l=c>=n.length?1:d.size(n.slice(c+1));for(let u=0;u<n[c];u++)s=0===u?f.calcReduceByAxis(t,e,n,r+1,i,o,a):a(s,f.calcReduceByAxis(t,e,n,r+1,i,o,a)),i+=l;return s}static calcReduceShape(t,e,n){const r=t.slice();for(let i=0;i<e.length;i++)r[e[i]]=n?1:0;return r.filter((t=>0!==t))}}e.ReduceUtil=f;class m{static adjustPoolAttributes(t,e,n,r,i,o){if(!t&&n.length!==e.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let a=0;a<e.length-2;a++)a>=n.length?n.push(e[a+2]):n[a]=e[a+2];for(let a=0;a<n.length;a++)if(a<r.length){if(r[a]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(let a=0;a<n.length;a++)if(a<i.length){if(i[a]<0)throw new Error("dilations should be greater than or equal to 1")}else i.push(1);for(let a=0;a<2*n.length;a++)if(a<o.length){if(o[a]<0)throw new Error("pad should be greater than or equal to 1")}else o.push(0);for(let a=0;a<n.length;a++){if(n[a]<=0)throw new Error("kernel shapes need to be greater than 0");if(o[a]>=n[a]||o[a+n.length]>=n[a])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,e,n,r,i,o){if(o){if(i.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(e.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let a=0;a<t.length-2;a++)m.adjustPadAndReturnShape(t[a+2],e[a],n[a],r[a],i,a,a+t.length-2,o)}}static computePoolOutputShape(t,e,n,r,i,o,a){if(e.length<=0)throw new Error("input shape must be of size greater than 0");const s=[e[0],e[1]];return m.computeShapeHelper(t,e,s,n,r,i,o,a),s}static computeConvOutputShape(t,e,n,r,i,o,a){if(t.length<=0||e.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const s=[t[0],e[0]];return m.computeShapeHelper(!1,t,s,n,r,i,o,a),s}static computeShapeHelper(t,e,n,r,i,o,a,s){if(t)for(let c=0;c<e.length-2;c++)n.push(1);else for(let c=0;c<e.length-2;c++)n.push(m.adjustPadAndReturnShape(e[c+2],r[c],i[c],o[c],a,c,c+e.length-2,s))}static adjustPadAndReturnShape(t,e,n,r,i,o,a,s){const c=n*(r-1)+1;if(!s||"NOTSET"===s)return Math.floor((t+i[o]+i[a]-c)/e+1);switch(s){case"VALID":return i[o]=0,i[a]=0,Math.floor((t-c)/e+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==n)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const n=((t+e-1)/e-1)*e+r-t;return i[o]="SAME_LOWER"===s?Math.floor((n+1)/2):Math.floor(n/2),i[a]=n-i[o],Math.floor((t+n-r)/e+1)}default:throw new Error("Unsupported AutoPad type")}}}e.PoolConvUtil=m,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22,e.decodeUtf8String=function(t){return(new TextDecoder).decode(t)}},7967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,i)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((t=>{let[o,a]=t;const s=n?n+o:o;if("object"==typeof a)(0,e.iterateExtraOptions)(a,s+".",r,i);else if("string"==typeof a||"number"==typeof a)i(s,a.toString());else{if("boolean"!=typeof a)throw new Error("Can't handle extra config type: "+typeof a);i(s,a?"1":"0")}}))}},2157:function(t,e,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=e.initWasm=void 0;const s=n(1670),c=a(n(349)),l=n(6361),u=()=>!!s.env.wasm.proxy&&"undefined"!=typeof document;let h,d,p,f=!1,m=!1,g=!1;const y=[],v=[],b=[],x=[],_=[],w=[],S=()=>{if(f||!m||g||!h)throw new Error("worker not ready")},T=t=>{switch(t.data.type){case"init-wasm":f=!1,t.data.err?(g=!0,d[1](t.data.err)):(m=!0,d[0]());break;case"init-ort":t.data.err?p[1](t.data.err):p[0]();break;case"create_allocate":t.data.err?y.shift()[1](t.data.err):y.shift()[0](t.data.out);break;case"create_finalize":t.data.err?v.shift()[1](t.data.err):v.shift()[0](t.data.out);break;case"create":t.data.err?b.shift()[1](t.data.err):b.shift()[0](t.data.out);break;case"release":t.data.err?x.shift()[1](t.data.err):x.shift()[0]();break;case"run":t.data.err?_.shift()[1](t.data.err):_.shift()[0](t.data.out);break;case"end-profiling":t.data.err?w.shift()[1](t.data.err):w.shift()[0]()}},E="undefined"!=typeof document?null===(r=null===document||void 0===document?void 0:document.currentScript)||void 0===r?void 0:r.src:void 0;e.initWasm=async()=>{if(u()){if(m)return;if(f)throw new Error("multiple calls to 'initWasm()' detected.");if(g)throw new Error("previous call to 'initWasm()' failed.");return f=!0,void 0===s.env.wasm.wasmPaths&&E&&0!==E.indexOf("blob:")&&(s.env.wasm.wasmPaths=E.substr(0,+E.lastIndexOf("/")+1)),new Promise(((t,e)=>{null==h||h.terminate(),h=n(9710).Z(),h.onmessage=T,d=[t,e];const r={type:"init-wasm",in:s.env.wasm};h.postMessage(r)}))}return(0,l.initializeWebAssembly)(s.env.wasm)},e.initOrt=async(t,e)=>{if(u())return S(),new Promise(((n,r)=>{p=[n,r];const i={type:"init-ort",in:{numThreads:t,loggingLevel:e}};h.postMessage(i)}));c.initOrt(t,e)},e.createSessionAllocate=async t=>u()?(S(),new Promise(((e,n)=>{y.push([e,n]);const r={type:"create_allocate",in:{model:t}};h.postMessage(r,[t.buffer])}))):c.createSessionAllocate(t),e.createSessionFinalize=async(t,e)=>u()?(S(),new Promise(((n,r)=>{v.push([n,r]);const i={type:"create_finalize",in:{modeldata:t,options:e}};h.postMessage(i)}))):c.createSessionFinalize(t,e),e.createSession=async(t,e)=>u()?(S(),new Promise(((n,r)=>{b.push([n,r]);const i={type:"create",in:{model:t,options:e}};h.postMessage(i,[t.buffer])}))):c.createSession(t,e),e.releaseSession=async t=>{if(u())return S(),new Promise(((e,n)=>{x.push([e,n]);const r={type:"release",in:t};h.postMessage(r)}));c.releaseSession(t)},e.run=async(t,e,n,r,i)=>u()?(S(),new Promise(((o,a)=>{_.push([o,a]);const s={type:"run",in:{sessionId:t,inputIndices:e,inputs:n,outputIndices:r,options:i}};h.postMessage(s,c.extractTransferableBuffers(n))}))):c.run(t,e,n,r,i),e.endProfiling=async t=>{if(u())return S(),new Promise(((e,n)=>{w.push([e,n]);const r={type:"end-profiling",in:t};h.postMessage(r)}));c.endProfiling(t)}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(7967),i=n(4983),o=n(6361);e.setRunOptions=t=>{const e=(0,o.getInstance)();let n=0;const a=[],s=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))s.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error("log serverity level is not valid: ".concat(t.logSeverityLevel));if(void 0===(null==t?void 0:t.logVerbosityLevel))s.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error("log verbosity level is not valid: ".concat(t.logVerbosityLevel));void 0===(null==t?void 0:t.terminate)&&(s.terminate=!1);let o=0;if(void 0!==(null==t?void 0:t.tag)&&(o=(0,i.allocWasmString)(t.tag,a)),n=e._OrtCreateRunOptions(s.logSeverityLevel,s.logVerbosityLevel,!!s.terminate,o),0===n)throw new Error("Can't create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const o=(0,i.allocWasmString)(t,a),s=(0,i.allocWasmString)(r,a);if(0!==e._OrtAddRunConfigEntry(n,o,s))throw new Error("Can't set a run config entry: ".concat(t," - ").concat(r))})),[n,a]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),a.forEach(e._free),t}}},2306:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxruntimeWebAssemblySessionHandler=void 0;const r=n(2806),i=n(1670),o=n(2850),a=n(2157);let s;e.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(t){const e=await fetch(t),n=await e.arrayBuffer();return(0,a.createSessionAllocate)(new Uint8Array(n))}async loadModel(t,e){if(s||(await(0,a.initOrt)(i.env.wasm.numThreads,(t=>{switch(t){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error("unsupported logging level: ".concat(t))}})(i.env.logLevel)),s=!0),"string"==typeof t)if("undefined"==typeof fetch){const n=await(0,o.promisify)(r.readFile)(t);[this.sessionId,this.inputNames,this.outputNames]=await(0,a.createSession)(n,e)}else{const n=await this.createSessionAllocate(t);[this.sessionId,this.inputNames,this.outputNames]=await(0,a.createSessionFinalize)(n,e)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,a.createSession)(t,e)}async dispose(){return(0,a.releaseSession)(this.sessionId)}async run(t,e,n){const r=[],o=[];Object.entries(t).forEach((t=>{const e=t[0],n=t[1],i=this.inputNames.indexOf(e);if(-1===i)throw new Error("invalid input '".concat(e,"'"));r.push(n),o.push(i)}));const s=[];Object.entries(e).forEach((t=>{const e=t[0],n=this.outputNames.indexOf(e);if(-1===n)throw new Error("invalid output '".concat(e,"'"));s.push(n)}));const c=await(0,a.run)(this.sessionId,o,r.map((t=>[t.type,t.dims,t.data])),s,n),l={};for(let a=0;a<c.length;a++)l[this.outputNames[s[a]]]=new i.Tensor(c[a][0],c[a][2],c[a][1]);return l}startProfiling(){}endProfiling(){(0,a.endProfiling)(this.sessionId)}}},4919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(7967),i=n(4983),o=n(6361);e.setSessionOptions=t=>{const e=(0,o.getInstance)();let n=0;const a=[],s=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(s);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(s.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error("unsupported graph optimization level: ".concat(t))}})(s.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(s.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(s.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(s.executionMode="sequential");const l=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error("unsupported execution mode: ".concat(t))}})(s.executionMode);let u=0;if(void 0!==(null==t?void 0:t.logId)&&(u=(0,i.allocWasmString)(t.logId,a)),void 0===(null==t?void 0:t.logSeverityLevel))s.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error("log serverity level is not valid: ".concat(t.logSeverityLevel));if(void 0===(null==t?void 0:t.logVerbosityLevel))s.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error("log verbosity level is not valid: ".concat(t.logVerbosityLevel));if(void 0===(null==t?void 0:t.enableProfiling)&&(s.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!s.enableCpuMemArena,!!s.enableMemPattern,l,!!s.enableProfiling,0,u,s.logSeverityLevel,s.logVerbosityLevel),0===n)throw new Error("Can't create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error("not supported EP: ".concat(e))}const a=(0,i.allocWasmString)(e,n);if(0!==(0,o.getInstance)()._OrtAppendExecutionProvider(t,a))throw new Error("Can't append execution provider: ".concat(e))}})(n,t.executionProviders,a),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const o=(0,i.allocWasmString)(t,a),s=(0,i.allocWasmString)(r,a);if(0!==e._OrtAddSessionConfigEntry(n,o,s))throw new Error("Can't set a session config entry: ".concat(t," - ").concat(r))})),[n,a]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),a.forEach(e._free),t}}},4983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(6361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),i=n.lengthBytesUTF8(t)+1,o=n._malloc(i);return n.stringToUTF8(t,o,i),e.push(o),o}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),i=n(4919),o=n(4983),a=n(6361);e.initOrt=(t,e)=>{const n=(0,a.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error("Can't initialize onnxruntime. error code = ".concat(n))};const s=new Map;e.createSessionAllocate=t=>{const e=(0,a.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,a.getInstance)();let r=0,o=0,c=[];try{if([o,c]=(0,i.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],o),0===r)throw new Error("Can't create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(o),c.forEach(n._free)}const l=n._OrtGetInputCount(r),u=n._OrtGetOutputCount(r),h=[],d=[],p=[],f=[];for(let i=0;i<l;i++){const t=n._OrtGetInputName(r,i);if(0===t)throw new Error("Can't get an input name");d.push(t),h.push(n.UTF8ToString(t))}for(let i=0;i<u;i++){const t=n._OrtGetOutputName(r,i);if(0===t)throw new Error("Can't get an output name");f.push(t),p.push(n.UTF8ToString(t))}return s.set(r,[r,d,f]),[r,h,p]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,a.getInstance)(),n=s.get(t);if(!n)throw new Error("invalid session id");const r=n[0],i=n[1],o=n[2];i.forEach(e._OrtFree),o.forEach(e._OrtFree),e._OrtReleaseSession(r),s.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error("unsupported data type: ".concat(t))}},l=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error("unsupported data type: ".concat(t))}},u=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error("unsupported type: ".concat(t))}};e.run=(t,e,n,i,h)=>{const d=(0,a.getInstance)(),p=s.get(t);if(!p)throw new Error("invalid session id");const f=p[0],m=p[1],g=p[2],y=e.length,v=i.length;let b=0,x=[];const _=[],w=[];try{[b,x]=(0,r.setRunOptions)(h);for(let e=0;e<y;e++){const t=n[e][0],r=n[e][1],i=n[e][2];let a,s;if(Array.isArray(i)){s=4*i.length,a=d._malloc(s),w.push(a);let t=a/4;for(let e=0;e<i.length;e++){if("string"!=typeof i[e])throw new TypeError("tensor data at index ".concat(e," is not a string"));d.HEAPU32[t++]=(0,o.allocWasmString)(i[e],w)}}else s=i.byteLength,a=d._malloc(s),w.push(a),d.HEAPU8.set(new Uint8Array(i.buffer,i.byteOffset,s),a);const l=d.stackSave(),u=d.stackAlloc(4*r.length);try{let e=u/4;r.forEach((t=>d.HEAP32[e++]=t));const n=d._OrtCreateTensor(c(t),a,s,u,r.length);if(0===n)throw new Error("Can't create a tensor");_.push(n)}finally{d.stackRestore(l)}}const t=d.stackSave(),a=d.stackAlloc(4*y),s=d.stackAlloc(4*y),p=d.stackAlloc(4*v),S=d.stackAlloc(4*v);try{let t=a/4,n=s/4,r=p/4,o=S/4;for(let i=0;i<y;i++)d.HEAPU32[t++]=_[i],d.HEAPU32[n++]=m[e[i]];for(let e=0;e<v;e++)d.HEAPU32[r++]=0,d.HEAPU32[o++]=g[i[e]];let c=d._OrtRun(f,s,a,y,S,v,p,b);const h=[];if(0===c)for(let e=0;e<v;e++){const t=d.HEAPU32[p/4+e],n=d.stackSave(),r=d.stackAlloc(16);let i,o=0;try{if(c=d._OrtGetTensorData(t,r,r+4,r+8,r+12),0!==c)throw new Error("Can't access output tensor data. error code = ".concat(c));let e=r/4;const n=d.HEAPU32[e++];o=d.HEAPU32[e++];const a=d.HEAPU32[e++],s=d.HEAPU32[e++],p=[];for(let t=0;t<s;t++)p.push(d.HEAPU32[a/4+t]);d._OrtFree(a);const f=0===p.length?1:p.reduce(((t,e)=>t*e));if(i=l(n),"string"===i){const t=[];let e=o/4;for(let n=0;n<f;n++){const r=d.HEAPU32[e++],i=n===f-1?void 0:d.HEAPU32[e]-r;t.push(d.UTF8ToString(r,i))}h.push([i,p,t])}else{const t=new(u(i))(f);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(d.HEAPU8.subarray(o,o+t.byteLength)),h.push([i,p,t])}}finally{d.stackRestore(n),"string"===i&&o&&d._free(o),d._OrtReleaseTensor(t)}}if(0===c)return h;throw new Error("failed to call OrtRun(). error code = ".concat(c,"."))}finally{d.stackRestore(t)}}finally{_.forEach(d._OrtReleaseTensor),w.forEach(d._free),d._OrtReleaseRunOptions(b),x.forEach(d._free)}},e.endProfiling=t=>{const e=(0,a.getInstance)(),n=s.get(t);if(!n)throw new Error("invalid session id");const r=n[0],i=e._OrtEndProfiling(r);if(0===i)throw new Error("Can't get an profile file name");e._OrtFree(i)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},6361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const s=o(n(6449)),c=a(n(932)),l=n(3474);let u,h=!1,d=!1,p=!1;const f=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(h)return Promise.resolve();if(d)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(p)throw new Error("previous call to 'initializeWebAssembly()' failed.");d=!0;const e=t.initTimeout,r=t.numThreads,i=t.simd,o=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),a=i&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),m="string"==typeof t.wasmPaths?t.wasmPaths:void 0,g=f(!1,o),y=f(a,o),v="object"==typeof t.wasmPaths?t.wasmPaths[y]:void 0;let b=!1;const x=[];if(e>0&&x.push(new Promise((t=>{setTimeout((()=>{b=!0,t()}),e)}))),x.push(new Promise(((t,e)=>{const r=o?l:c.default,i={locateFile:(t,e)=>o&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(4154)],{type:"text/javascript"})):t===g?null!=v?v:(null!=m?m:e)+y:e+t};if(o)if("undefined"==typeof Blob)i.mainScriptUrlOrBlob=s.join("/","ort-wasm-threaded.js");else{const t="var ortWasmThreaded=(function(){var _scriptDir;return ".concat(r.toString(),"})();");i.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(i).then((e=>{d=!1,h=!0,u=e,t()}),(t=>{d=!1,p=!0,e(t)}))}))),await Promise.race(x),b)throw new Error("WebAssembly backend initializing failed due to timeout: ".concat(e,"ms"))},e.getInstance=()=>{if(h&&u)return u;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!h||d||p||(d=!0,null===(t=u.PThread)||void 0===t||t.terminateAllThreads(),u=void 0,d=!1,h=!1,p=!0)}},9710:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(477),i=n.n(r);function o(){return i()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:t=>{"use strict";t.exports=function(t,e,n,r){var i=self||window;try{try{var o;try{o=new i.Blob([t])}catch(e){(o=new(i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder)).append(t),o=o.getBlob()}var a=i.URL||i.webkitURL,s=a.createObjectURL(o),c=new i[e](s,n);return a.revokeObjectURL(s),c}catch(r){return new i[e]("data:application/javascript,".concat(encodeURIComponent(t)),n)}}catch(t){if(!r)throw Error("Inline worker is not supported");return new i[e](r,n)}}},4154:t=>{"use strict";t.exports='"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\n'},1670:t=>{"use strict";t.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(t,e,n)=>{"use strict";n.r(e),n.d(e,{flatbuffers:()=>r});var r={};r.Offset,r.Table,r.SIZEOF_SHORT=2,r.SIZEOF_INT=4,r.FILE_IDENTIFIER_LENGTH=4,r.SIZE_PREFIX_LENGTH=4,r.Encoding={UTF8_BYTES:1,UTF16_STRING:2},r.int32=new Int32Array(2),r.float32=new Float32Array(r.int32.buffer),r.float64=new Float64Array(r.int32.buffer),r.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],r.Long=function(t,e){this.low=0|t,this.high=0|e},r.Long.create=function(t,e){return 0==t&&0==e?r.Long.ZERO:new r.Long(t,e)},r.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},r.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},r.Long.ZERO=new r.Long(0,0),r.Builder=function(t){if(t)e=t;else var e=1024;this.bb=r.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},r.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},r.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},r.Builder.prototype.dataBuffer=function(){return this.bb},r.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},r.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var n=1+~(this.bb.capacity()-this.space+e)&t-1;this.space<n+t+e;){var i=this.bb.capacity();this.bb=r.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(n)},r.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},r.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},r.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},r.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},r.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},r.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},r.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},r.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},r.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},r.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},r.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},r.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},r.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},r.Builder.prototype.addFieldInt8=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))},r.Builder.prototype.addFieldInt16=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))},r.Builder.prototype.addFieldInt32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))},r.Builder.prototype.addFieldInt64=function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))},r.Builder.prototype.addFieldFloat32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))},r.Builder.prototype.addFieldFloat64=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))},r.Builder.prototype.addFieldOffset=function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))},r.Builder.prototype.addFieldStruct=function(t,e,n){e!=n&&(this.nested(e),this.slot(t))},r.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},r.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},r.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},r.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},r.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,i=r.ByteBuffer.allocate(n);return i.setPosition(n-e),i.bytes().set(t.bytes(),n-e),i},r.Builder.prototype.addOffset=function(t){this.prep(r.SIZEOF_INT,0),this.writeInt32(this.offset()-t+r.SIZEOF_INT)},r.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},r.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var n=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var i=(n+2)*r.SIZEOF_SHORT;this.addInt16(i);var o=0,a=this.space;t:for(e=0;e<this.vtables.length;e++){var s=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(s)){for(var c=r.SIZEOF_SHORT;c<i;c+=r.SIZEOF_SHORT)if(this.bb.readInt16(a+c)!=this.bb.readInt16(s+c))continue t;o=this.vtables[e];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},r.Builder.prototype.finish=function(t,e,n){var i=n?r.SIZE_PREFIX_LENGTH:0;if(e){var o=e;if(this.prep(this.minalign,r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH+i),o.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var a=r.FILE_IDENTIFIER_LENGTH-1;a>=0;a--)this.writeInt8(o.charCodeAt(a))}this.prep(this.minalign,r.SIZEOF_INT+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},r.Builder.prototype.finishSizePrefixed=function(t,e){this.finish(t,e,!0)},r.Builder.prototype.requiredField=function(t,e){var n=this.bb.capacity()-t,r=n-this.bb.readInt32(n);if(0==this.bb.readInt16(r+e))throw new Error("FlatBuffers: field "+e+" must be set")},r.Builder.prototype.startVector=function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(r.SIZEOF_INT,t*e),this.prep(n,t*e)},r.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},r.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var n=0;n<t.length;){var r,i=t.charCodeAt(n++);(r=i<55296||i>=56320?i:(i<<10)+t.charCodeAt(n++)+-56613888)<128?e.push(r):(r<2048?e.push(r>>6&31|192):(r<65536?e.push(r>>12&15|224):e.push(r>>18&7|240,r>>12&63|128),e.push(r>>6&63|128)),e.push(63&r|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),n=0;for(var o=this.space,a=this.bb.bytes();n<e.length;n++)a[o++]=e[n];return this.endVector()},r.Builder.prototype.createLong=function(t,e){return r.Long.create(t,e)},r.ByteBuffer=function(t){this.bytes_=t,this.position_=0},r.ByteBuffer.allocate=function(t){return new r.ByteBuffer(new Uint8Array(t))},r.ByteBuffer.prototype.clear=function(){this.position_=0},r.ByteBuffer.prototype.bytes=function(){return this.bytes_},r.ByteBuffer.prototype.position=function(){return this.position_},r.ByteBuffer.prototype.setPosition=function(t){this.position_=t},r.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},r.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},r.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},r.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},r.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},r.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},r.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},r.ByteBuffer.prototype.readInt64=function(t){return new r.Long(this.readInt32(t),this.readInt32(t+4))},r.ByteBuffer.prototype.readUint64=function(t){return new r.Long(this.readUint32(t),this.readUint32(t+4))},r.ByteBuffer.prototype.readFloat32=function(t){return r.int32[0]=this.readInt32(t),r.float32[0]},r.ByteBuffer.prototype.readFloat64=function(t){return r.int32[r.isLittleEndian?0:1]=this.readInt32(t),r.int32[r.isLittleEndian?1:0]=this.readInt32(t+4),r.float64[0]},r.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},r.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},r.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},r.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},r.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},r.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},r.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},r.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},r.ByteBuffer.prototype.writeFloat32=function(t,e){r.float32[0]=e,this.writeInt32(t,r.int32[0])},r.ByteBuffer.prototype.writeFloat64=function(t,e){r.float64[0]=e,this.writeInt32(t,r.int32[r.isLittleEndian?0:1]),this.writeInt32(t+4,r.int32[r.isLittleEndian?1:0])},r.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<r.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+r.SIZEOF_INT+e));return t},r.ByteBuffer.prototype.__offset=function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0},r.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},r.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),i="",o=0;if(t+=r.SIZEOF_INT,e===r.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;o<n;){var a,s=this.readUint8(t+o++);if(s<192)a=s;else{var c=this.readUint8(t+o++);if(s<224)a=(31&s)<<6|63&c;else{var l=this.readUint8(t+o++);a=s<240?(15&s)<<12|(63&c)<<6|63&l:(7&s)<<18|(63&c)<<12|(63&l)<<6|63&this.readUint8(t+o++)}}a<65536?i+=String.fromCharCode(a):(a-=65536,i+=String.fromCharCode(55296+(a>>10),56320+(1023&a)))}return i},r.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},r.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+r.SIZEOF_INT},r.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},r.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var e=0;e<r.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+r.SIZEOF_INT+e))return!1;return!0},r.ByteBuffer.prototype.createLong=function(t,e){return r.Long.create(t,e)}}},__webpack_module_cache__={};function __nested_webpack_require_817794__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__nested_webpack_require_817794__),n.exports}__nested_webpack_require_817794__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __nested_webpack_require_817794__.d(e,{a:e}),e},__nested_webpack_require_817794__.d=(t,e)=>{for(var n in e)__nested_webpack_require_817794__.o(e,n)&&!__nested_webpack_require_817794__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__nested_webpack_require_817794__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__nested_webpack_require_817794__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__nested_webpack_require_817794__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __nested_webpack_exports__=__nested_webpack_require_817794__(6018);return __nested_webpack_exports__})(),module.exports=e(__webpack_require__(4554))},1497:(t,e,n)=>{"use strict";var r=n(3218);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5173:(t,e,n)=>{t.exports=n(1497)()},3218:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2730:(t,e,n)=>{"use strict";var r=n(5043),i=n(7067);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function c(t,e){l(t,e),l(t+"Capture",e)}function l(t,e){for(s[t]=e,t=0;t<e.length;t++)a.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function b(t,e,n,r){var i=g.hasOwnProperty(e)?g[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!h.call(f,t)||!h.call(p,t)&&(d.test(t)?f[t]=!0:(p[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),M=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function D(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=R&&t[R]||t["@@iterator"])?t:null}var L,F=Object.assign;function j(t){if(void 0===L)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);L=e&&e[1]||""}return"\n"+L+t}var U=!1;function B(t,e){if(!t||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var c="\n"+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}}while(1<=a&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?j(t):""}function z(t){switch(t.tag){case 5:return j(t.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return t=B(t.type,!1);case 11:return t=B(t.type.render,!1);case 1:return t=B(t.type,!0);default:return""}}function V(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case w:return"Portal";case E:return"Profiler";case T:return"StrictMode";case C:return"Suspense";case k:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case M:return(t.displayName||"Context")+".Consumer";case A:return(t._context.displayName||"Context")+".Provider";case O:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case P:return null!==(e=t.displayName||null)?e:V(t.type)||"Memo";case I:e=t._payload,t=t._init;try{return V(t(e))}catch(n){}}return null}function G(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(e);case 8:return e===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function W(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function H(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function q(t){t._valueTracker||(t._valueTracker=function(t){var e=H(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function X(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=H(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function Y(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function K(t,e){var n=e.checked;return F({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Z(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=W(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function J(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function $(t,e){J(t,e);var n=W(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,W(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Q(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&Y(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+W(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return F({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(et(n)){if(1<n.length)throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:W(n)}}function ot(t,e){var n=W(e.value),r=W(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function st(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?st(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var lt,ut,ht=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((lt=lt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ut(t,e)}))}:ut);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];function mt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||pt.hasOwnProperty(t)&&pt[t]?(""+e).trim():e+"px"}function gt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=mt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(pt).forEach((function(t){ft.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pt[e]=pt[t]}))}));var yt=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=null;function _t(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var wt=null,St=null,Tt=null;function Et(t){if(t=bi(t)){if("function"!==typeof wt)throw Error(o(280));var e=t.stateNode;e&&(e=_i(e),wt(t.stateNode,t.type,e))}}function At(t){St?Tt?Tt.push(t):Tt=[t]:St=t}function Mt(){if(St){var t=St,e=Tt;if(Tt=St=null,Et(t),e)for(t=0;t<e.length;t++)Et(e[t])}}function Ot(t,e){return t(e)}function Ct(){}var kt=!1;function Pt(t,e,n){if(kt)return t(e,n);kt=!0;try{return Ot(t,e,n)}finally{kt=!1,(null!==St||null!==Tt)&&(Ct(),Mt())}}function It(t,e){var n=t.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}var Nt=!1;if(u)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){Nt=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch(ut){Nt=!1}function Dt(t,e,n,r,i,o,a,s,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var Lt=!1,Ft=null,jt=!1,Ut=null,Bt={onError:function(t){Lt=!0,Ft=t}};function zt(t,e,n,r,i,o,a,s,c){Lt=!1,Ft=null,Dt.apply(Bt,arguments)}function Vt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Gt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Wt(t){if(Vt(t)!==t)throw Error(o(188))}function Ht(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Vt(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Wt(i),t;if(a===r)return Wt(i),e;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,c=i.child;c;){if(c===n){s=!0,n=i,r=a;break}if(c===r){s=!0,r=i,n=a;break}c=c.sibling}if(!s){for(c=a.child;c;){if(c===n){s=!0,n=a,r=i;break}if(c===r){s=!0,r=a,n=i;break}c=c.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t))?qt(t):null}function qt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=qt(t);if(null!==e)return e;t=t.sibling}return null}var Xt=i.unstable_scheduleCallback,Yt=i.unstable_cancelCallback,Kt=i.unstable_shouldYield,Zt=i.unstable_requestPaint,Jt=i.unstable_now,$t=i.unstable_getCurrentPriorityLevel,Qt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,oe=null;var ae=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(se(t)/ce|0)|0},se=Math.log,ce=Math.LN2;var le=64,ue=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=he(s):0!==(o&=a)&&(r=he(o))}else 0!==(a=n&~i)?r=he(a):0!==o&&(r=he(o));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(o=e&-e)||16===i&&0!==(4194240&o)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-ae(e)),r|=t[n],e&=~i;return r}function pe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function fe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=le;return 0===(4194240&(le<<=1))&&(le=64),t}function ge(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ye(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=n}function ve(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ae(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var be=0;function xe(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var _e,we,Se,Te,Ee,Ae=!1,Me=[],Oe=null,Ce=null,ke=null,Pe=new Map,Ie=new Map,Ne=[],Re="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function De(t,e){switch(t){case"focusin":case"focusout":Oe=null;break;case"dragenter":case"dragleave":Ce=null;break;case"mouseover":case"mouseout":ke=null;break;case"pointerover":case"pointerout":Pe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ie.delete(e.pointerId)}}function Le(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==e&&(null!==(e=bi(e))&&we(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Fe(t){var e=vi(t.target);if(null!==e){var n=Vt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Gt(n)))return t.blockedOn=e,void Ee(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function je(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ke(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=bi(n))&&we(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);xt=r,n.target.dispatchEvent(r),xt=null,e.shift()}return!0}function Ue(t,e,n){je(t)&&n.delete(e)}function Be(){Ae=!1,null!==Oe&&je(Oe)&&(Oe=null),null!==Ce&&je(Ce)&&(Ce=null),null!==ke&&je(ke)&&(ke=null),Pe.forEach(Ue),Ie.forEach(Ue)}function ze(t,e){t.blockedOn===e&&(t.blockedOn=null,Ae||(Ae=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Be)))}function Ve(t){function e(e){return ze(e,t)}if(0<Me.length){ze(Me[0],t);for(var n=1;n<Me.length;n++){var r=Me[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Oe&&ze(Oe,t),null!==Ce&&ze(Ce,t),null!==ke&&ze(ke,t),Pe.forEach(e),Ie.forEach(e),n=0;n<Ne.length;n++)(r=Ne[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Ne.length&&null===(n=Ne[0]).blockedOn;)Fe(n),null===n.blockedOn&&Ne.shift()}var Ge=x.ReactCurrentBatchConfig,We=!0;function He(t,e,n,r){var i=be,o=Ge.transition;Ge.transition=null;try{be=1,Xe(t,e,n,r)}finally{be=i,Ge.transition=o}}function qe(t,e,n,r){var i=be,o=Ge.transition;Ge.transition=null;try{be=4,Xe(t,e,n,r)}finally{be=i,Ge.transition=o}}function Xe(t,e,n,r){if(We){var i=Ke(t,e,n,r);if(null===i)Wr(t,e,r,Ye,n),De(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Oe=Le(Oe,t,e,n,r,i),!0;case"dragenter":return Ce=Le(Ce,t,e,n,r,i),!0;case"mouseover":return ke=Le(ke,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pe.set(o,Le(Pe.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ie.set(o,Le(Ie.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(De(t,r),4&e&&-1<Re.indexOf(t)){for(;null!==i;){var o=bi(i);if(null!==o&&_e(o),null===(o=Ke(t,e,n,r))&&Wr(t,e,r,Ye,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(t,e,r,null,n)}}var Ye=null;function Ke(t,e,n,r){if(Ye=null,null!==(t=vi(t=_t(r))))if(null===(e=Vt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Gt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ye=t,null}function Ze(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($t()){case Qt:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var Je=null,$e=null,Qe=null;function tn(){if(Qe)return Qe;var t,e,n=$e,r=n.length,i="value"in Je?Je.value:Je.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return Qe=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function on(t){function e(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var an,sn,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(ln),hn=F({},ln,{view:0,detail:0}),dn=on(hn),pn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==cn&&(cn&&"mousemove"===t.type?(an=t.screenX-cn.screenX,sn=t.screenY-cn.screenY):sn=an=0,cn=t),an)},movementY:function(t){return"movementY"in t?t.movementY:sn}}),fn=on(pn),mn=on(F({},pn,{dataTransfer:0})),gn=on(F({},hn,{relatedTarget:0})),yn=on(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},ln,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bn=on(vn),xn=on(F({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function En(){return Tn}var An=F({},hn,{key:function(t){if(t.key){var e=_n[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?wn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Mn=on(An),On=on(F({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),kn=on(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},pn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),In=on(Pn),Nn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Dn,Fn=u&&(!Rn||Dn&&8<Dn&&11>=Dn),jn=String.fromCharCode(32),Un=!1;function Bn(t,e){switch(t){case"keyup":return-1!==Nn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Vn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Gn[t.type]:"textarea"===e}function Hn(t,e,n,r){At(r),0<(e=qr(e,"onChange")).length&&(n=new un("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qn=null,Xn=null;function Yn(t){jr(t,0)}function Kn(t){if(X(xi(t)))return t}function Zn(t,e){if("change"===t)return e}var Jn=!1;if(u){var $n;if(u){var Qn="oninput"in document;if(!Qn){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),Qn="function"===typeof tr.oninput}$n=Qn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function er(){qn&&(qn.detachEvent("onpropertychange",nr),Xn=qn=null)}function nr(t){if("value"===t.propertyName&&Kn(Xn)){var e=[];Hn(e,Xn,t,_t(t)),Pt(Yn,e)}}function rr(t,e,n){"focusin"===t?(er(),Xn=n,(qn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Kn(Xn)}function or(t,e){if("click"===t)return Kn(e)}function ar(t,e){if("input"===t||"change"===t)return Kn(e)}var sr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function cr(t,e){if(sr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(e,i)||!sr(t[i],e[i]))return!1}return!0}function lr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ur(t,e){var n,r=lr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=lr(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function dr(){for(var t=window,e=Y();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=Y((t=e.contentWindow).document)}return e}function pr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function fr(t){var e=dr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var a=ur(n,r);i&&a&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&cr(vr,r)||(vr=r,0<(r=qr(yr,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gr)))}function _r(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},Tr={};function Er(t){if(Sr[t])return Sr[t];if(!wr[t])return t;var e,n=wr[t];for(e in n)if(n.hasOwnProperty(e)&&e in Tr)return Sr[t]=n[e];return t}u&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Ar=Er("animationend"),Mr=Er("animationiteration"),Or=Er("animationstart"),Cr=Er("transitionend"),kr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(t,e){kr.set(t,e),c(e,[t])}for(var Nr=0;Nr<Pr.length;Nr++){var Rr=Pr[Nr];Ir(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Ir(Ar,"onAnimationEnd"),Ir(Mr,"onAnimationIteration"),Ir(Or,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Cr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Fr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,a,s,c,l){if(zt.apply(this,arguments),Lt){if(!Lt)throw Error(o(198));var u=Ft;Lt=!1,Ft=null,jt||(jt=!0,Ut=u)}}(r,e,void 0,t),t.currentTarget=null}function jr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break t;Fr(i,s,l),o=c}else for(a=0;a<r.length;a++){if(c=(s=r[a]).instance,l=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break t;Fr(i,s,l),o=c}}}if(jt)throw t=Ut,jt=!1,Ut=null,t}function Ur(t,e){var n=e[mi];void 0===n&&(n=e[mi]=new Set);var r=t+"__bubble";n.has(r)||(Gr(e,t,2,!1),n.add(r))}function Br(t,e,n){var r=0;e&&(r|=4),Gr(n,t,r,e)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Vr(t){if(!t[zr]){t[zr]=!0,a.forEach((function(e){"selectionchange"!==e&&(Lr.has(e)||Br(e,!1,t),Br(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[zr]||(e[zr]=!0,Br("selectionchange",!1,e))}}function Gr(t,e,n,r){switch(Ze(e)){case 1:var i=He;break;case 4:i=qe;break;default:i=Xe}n=i.bind(null,e,n,t),i=void 0,!Nt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wr(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&((c=a.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=vi(s)))return;if(5===(c=a.tag)||6===c){r=o=a;continue t}s=s.parentNode}}r=r.return}Pt((function(){var r=o,i=_t(n),a=[];t:{var s=kr.get(t);if(void 0!==s){var c=un,l=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":c=Mn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Cn;break;case Ar:case Mr:case Or:c=yn;break;case Cr:c=kn;break;case"scroll":c=dn;break;case"wheel":c=In;break;case"copy":case"cut":case"paste":c=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=On}var u=0!==(4&e),h=!u&&"scroll"===t,d=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=It(f,d))&&u.push(Hr(f,m,p)))),h)break;f=f.return}0<u.length&&(s=new c(s,l,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&e)){if(c="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||n===xt||!(l=n.relatedTarget||n.fromElement)||!vi(l)&&!l[fi])&&(c||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?vi(l):null)&&(l!==(h=Vt(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(u=On,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==c?s:xi(c),p=null==l?s:xi(l),(s=new u(m,f+"leave",c,n,i)).target=h,s.relatedTarget=p,m=null,vi(i)===r&&((u=new u(d,f+"enter",l,n,i)).target=p,u.relatedTarget=h,m=u),h=m,c&&l)t:{for(d=l,f=0,p=u=c;p;p=Xr(p))f++;for(p=0,m=d;m;m=Xr(m))p++;for(;0<f-p;)u=Xr(u),f--;for(;0<p-f;)d=Xr(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break t;u=Xr(u),d=Xr(d)}u=null}else u=null;null!==c&&Yr(a,s,c,u,!1),null!==l&&null!==h&&Yr(a,h,l,u,!0)}if("select"===(c=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var g=Zn;else if(Wn(s))if(Jn)g=ar;else{g=ir;var y=rr}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(t,r))?Hn(a,g,n,i):(y&&y(t,s,r),"focusout"===t&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&tt(s,"number",s.value)),y=r?xi(r):window,t){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,i)}var v;if(Rn)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Vn?Bn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(v=tn()):($e="value"in(Je=i)?Je.value:Je.textContent,Vn=!0)),0<(y=qr(r,b)).length&&(b=new xn(b,t,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=Ln?function(t,e){switch(t){case"compositionend":return zn(e);case"keypress":return 32!==e.which?null:(Un=!0,jn);case"textInput":return(t=e.data)===jn&&Un?null:t;default:return null}}(t,n):function(t,e){if(Vn)return"compositionend"===t||!Rn&&Bn(t,e)?(t=tn(),Qe=$e=Je=null,Vn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}jr(a,e)}))}function Hr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=It(t,n))&&r.unshift(Hr(t,o,i)),null!=(o=It(t,e))&&r.push(Hr(t,o,i))),t=t.return}return r}function Xr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Yr(t,e,n,r,i){for(var o=e._reactName,a=[];null!==n&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(null!==c&&c===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(c=It(n,o))&&a.unshift(Hr(n,c,s)):i||null!=(c=It(n,o))&&a.push(Hr(n,c,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}var Kr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Jr(t){return("string"===typeof t?t:""+t).replace(Kr,"\n").replace(Zr,"")}function $r(t,e,n){if(e=Jr(e),Jr(t)!==e&&n)throw Error(o(425))}function Qr(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(t){return oi.resolve(null).then(t).catch(si)}:ri;function si(t){setTimeout((function(){throw t}))}function ci(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void Ve(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ve(e)}function li(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ui(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(t){var e=t[di];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fi]||n[di]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ui(t);null!==t;){if(n=t[di])return n;t=ui(t)}return e}n=(t=n).parentNode}return null}function bi(t){return!(t=t[di]||t[fi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function xi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function _i(t){return t[pi]||null}var wi=[],Si=-1;function Ti(t){return{current:t}}function Ei(t){0>Si||(t.current=wi[Si],wi[Si]=null,Si--)}function Ai(t,e){Si++,wi[Si]=t.current,t.current=e}var Mi={},Oi=Ti(Mi),Ci=Ti(!1),ki=Mi;function Pi(t,e){var n=t.type.contextTypes;if(!n)return Mi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Ii(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Ni(){Ei(Ci),Ei(Oi)}function Ri(t,e,n){if(Oi.current!==Mi)throw Error(o(168));Ai(Oi,e),Ai(Ci,n)}function Di(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,G(t)||"Unknown",i));return F({},n,r)}function Li(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mi,ki=Oi.current,Ai(Oi,t),Ai(Ci,Ci.current),!0}function Fi(t,e,n){var r=t.stateNode;if(!r)throw Error(o(169));n?(t=Di(t,e,ki),r.__reactInternalMemoizedMergedChildContext=t,Ei(Ci),Ei(Oi),Ai(Oi,t)):Ei(Ci),Ai(Ci,n)}var ji=null,Ui=!1,Bi=!1;function zi(t){null===ji?ji=[t]:ji.push(t)}function Vi(){if(!Bi&&null!==ji){Bi=!0;var t=0,e=be;try{var n=ji;for(be=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(t+1)),Xt(Qt,Vi),i}finally{be=e,Bi=!1}}return null}var Gi=[],Wi=0,Hi=null,qi=0,Xi=[],Yi=0,Ki=null,Zi=1,Ji="";function $i(t,e){Gi[Wi++]=qi,Gi[Wi++]=Hi,Hi=t,qi=e}function Qi(t,e,n){Xi[Yi++]=Zi,Xi[Yi++]=Ji,Xi[Yi++]=Ki,Ki=t;var r=Zi;t=Ji;var i=32-ae(r)-1;r&=~(1<<i),n+=1;var o=32-ae(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Zi=1<<32-ae(e)+i|n<<i|r,Ji=o+t}else Zi=1<<o|n<<i|r,Ji=t}function to(t){null!==t.return&&($i(t,1),Qi(t,1,0))}function eo(t){for(;t===Hi;)Hi=Gi[--Wi],Gi[Wi]=null,qi=Gi[--Wi],Gi[Wi]=null;for(;t===Ki;)Ki=Xi[--Yi],Xi[Yi]=null,Ji=Xi[--Yi],Xi[Yi]=null,Zi=Xi[--Yi],Xi[Yi]=null}var no=null,ro=null,io=!1,oo=null;function ao(t,e){var n=Pl(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function so(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,no=t,ro=li(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,no=t,ro=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Ki?{id:Zi,overflow:Ji}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Pl(18,null,null,0)).stateNode=e,n.return=t,t.child=n,no=t,ro=null,!0);default:return!1}}function co(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function lo(t){if(io){var e=ro;if(e){var n=e;if(!so(t,e)){if(co(t))throw Error(o(418));e=li(n.nextSibling);var r=no;e&&so(t,e)?ao(r,n):(t.flags=-4097&t.flags|2,io=!1,no=t)}}else{if(co(t))throw Error(o(418));t.flags=-4097&t.flags|2,io=!1,no=t}}}function uo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;no=t}function ho(t){if(t!==no)return!1;if(!io)return uo(t),io=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=ro)){if(co(t))throw po(),Error(o(418));for(;e;)ao(t,e),e=li(e.nextSibling)}if(uo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ro=li(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ro=null}}else ro=no?li(t.stateNode.nextSibling):null;return!0}function po(){for(var t=ro;t;)t=li(t.nextSibling)}function fo(){ro=no=null,io=!1}function mo(t){null===oo?oo=[t]:oo.push(t)}var go=x.ReactCurrentBatchConfig;function yo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,t));var i=r,a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=i.refs;null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function vo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bo(t){return(0,t._init)(t._payload)}function xo(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Nl(t,e)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function c(t,e,n,r){return null===e||6!==e.tag?((e=Fl(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function l(t,e,n,r){var o=n.type;return o===S?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===I&&bo(o)===e.type)?((r=i(e,n.props)).ref=yo(t,e,n),r.return=t,r):((r=Rl(n.type,n.key,n.props,null,t.mode,r)).ref=yo(t,e,n),r.return=t,r)}function u(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=jl(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Dl(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Fl(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case _:return(n=Rl(e.type,e.key,e.props,null,t.mode,n)).ref=yo(t,null,e),n.return=t,n;case w:return(e=jl(e,t.mode,n)).return=t,e;case I:return d(t,(0,e._init)(e._payload),n)}if(et(e)||D(e))return(e=Dl(e,t.mode,n,null)).return=t,e;vo(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?l(t,e,n,r):null;case w:return n.key===i?u(t,e,n,r):null;case I:return p(t,e,(i=n._init)(n._payload),r)}if(et(n)||D(n))return null!==i?null:h(t,e,n,r,null);vo(t,n)}return null}function f(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i);case w:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case I:return f(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||D(r))return h(e,t=t.get(n)||null,r,i,null);vo(e,r)}return null}function m(i,o,s,c){for(var l=null,u=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(i,h,s[m],c);if(null===y){null===h&&(h=g);break}t&&h&&null===y.alternate&&e(i,h),o=a(y,o,m),null===u?l=y:u.sibling=y,u=y,h=g}if(m===s.length)return n(i,h),io&&$i(i,m),l;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],c))&&(o=a(h,o,m),null===u?l=h:u.sibling=h,u=h);return io&&$i(i,m),l}for(h=r(i,h);m<s.length;m++)null!==(g=f(h,i,m,s[m],c))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?l=g:u.sibling=g,u=g);return t&&h.forEach((function(t){return e(i,t)})),io&&$i(i,m),l}function g(i,s,c,l){var u=D(c);if("function"!==typeof u)throw Error(o(150));if(null==(c=u.call(c)))throw Error(o(151));for(var h=u=null,m=s,g=s=0,y=null,v=c.next();null!==m&&!v.done;g++,v=c.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=p(i,m,v.value,l);if(null===b){null===m&&(m=y);break}t&&m&&null===b.alternate&&e(i,m),s=a(b,s,g),null===h?u=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),io&&$i(i,g),u;if(null===m){for(;!v.done;g++,v=c.next())null!==(v=d(i,v.value,l))&&(s=a(v,s,g),null===h?u=v:h.sibling=v,h=v);return io&&$i(i,g),u}for(m=r(i,m);!v.done;g++,v=c.next())null!==(v=f(m,i,g,v.value,l))&&(t&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=a(v,s,g),null===h?u=v:h.sibling=v,h=v);return t&&m.forEach((function(t){return e(i,t)})),io&&$i(i,g),u}return function t(r,o,a,c){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case _:t:{for(var l=a.key,u=o;null!==u;){if(u.key===l){if((l=a.type)===S){if(7===u.tag){n(r,u.sibling),(o=i(u,a.props.children)).return=r,r=o;break t}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===I&&bo(l)===u.type){n(r,u.sibling),(o=i(u,a.props)).ref=yo(r,u,a),o.return=r,r=o;break t}n(r,u);break}e(r,u),u=u.sibling}a.type===S?((o=Dl(a.props.children,r.mode,c,a.key)).return=r,r=o):((c=Rl(a.type,a.key,a.props,null,r.mode,c)).ref=yo(r,o,a),c.return=r,r=c)}return s(r);case w:t:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break t}n(r,o);break}e(r,o),o=o.sibling}(o=jl(a,r.mode,c)).return=r,r=o}return s(r);case I:return t(r,o,(u=a._init)(a._payload),c)}if(et(a))return m(r,o,a,c);if(D(a))return g(r,o,a,c);vo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Fl(a,r.mode,c)).return=r,r=o),s(r)):n(r,o)}}var _o=xo(!0),wo=xo(!1),So=Ti(null),To=null,Eo=null,Ao=null;function Mo(){Ao=Eo=To=null}function Oo(t){var e=So.current;Ei(So),t._currentValue=e}function Co(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ko(t,e){To=t,Ao=Eo=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(bs=!0),t.firstContext=null)}function Po(t){var e=t._currentValue;if(Ao!==t)if(t={context:t,memoizedValue:e,next:null},null===Eo){if(null===To)throw Error(o(308));Eo=t,To.dependencies={lanes:0,firstContext:t}}else Eo=Eo.next=t;return e}var Io=null;function No(t){null===Io?Io=[t]:Io.push(t)}function Ro(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,No(e)):(n.next=i.next,i.next=n),e.interleaved=n,Do(t,r)}function Do(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Lo=!1;function Fo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Uo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bo(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Oc)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Do(t,n)}return null===(i=r.interleaved)?(e.next=e,No(r)):(e.next=i.next,i.next=e),r.interleaved=e,Do(t,n)}function zo(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}function Vo(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Go(t,e,n,r){var i=t.updateQueue;Lo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var c=s,l=c.next;c.next=null,null===a?o=l:a.next=l,a=c;var u=t.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(null!==o){var h=i.baseState;for(a=0,u=l=c=null,s=o;;){var d=s.lane,p=s.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var f=t,m=s;switch(d=e,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break t}h=f;break t;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break t;h=F({},h,d);break t;case 2:Lo=!0}}null!==s.callback&&0!==s.lane&&(t.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(l=u=p,c=h):u=u.next=p,a|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(e=i.shared.interleaved)){i=e;do{a|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Lc|=a,t.lanes=a,t.memoizedState=h}}function Wo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Ho={},qo=Ti(Ho),Xo=Ti(Ho),Yo=Ti(Ho);function Ko(t){if(t===Ho)throw Error(o(174));return t}function Zo(t,e){switch(Ai(Yo,e),Ai(Xo,t),Ai(qo,Ho),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ct(null,"");break;default:e=ct(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ei(qo),Ai(qo,e)}function Jo(){Ei(qo),Ei(Xo),Ei(Yo)}function $o(t){Ko(Yo.current);var e=Ko(qo.current),n=ct(e,t.type);e!==n&&(Ai(Xo,t),Ai(qo,n))}function Qo(t){Xo.current===t&&(Ei(qo),Ei(Xo))}var ta=Ti(0);function ea(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var na=[];function ra(){for(var t=0;t<na.length;t++)na[t]._workInProgressVersionPrimary=null;na.length=0}var ia=x.ReactCurrentDispatcher,oa=x.ReactCurrentBatchConfig,aa=0,sa=null,ca=null,la=null,ua=!1,ha=!1,da=0,pa=0;function fa(){throw Error(o(321))}function ma(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function ga(t,e,n,r,i,a){if(aa=a,sa=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ia.current=null===t||null===t.memoizedState?Qa:ts,t=n(r,i),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(o(301));a+=1,la=ca=null,e.updateQueue=null,ia.current=es,t=n(r,i)}while(ha)}if(ia.current=$a,e=null!==ca&&null!==ca.next,aa=0,la=ca=sa=null,ua=!1,e)throw Error(o(300));return t}function ya(){var t=0!==da;return da=0,t}function va(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?sa.memoizedState=la=t:la=la.next=t,la}function ba(){if(null===ca){var t=sa.alternate;t=null!==t?t.memoizedState:null}else t=ca.next;var e=null===la?sa.memoizedState:la.next;if(null!==e)la=e,ca=t;else{if(null===t)throw Error(o(310));t={memoizedState:(ca=t).memoizedState,baseState:ca.baseState,baseQueue:ca.baseQueue,queue:ca.queue,next:null},null===la?sa.memoizedState=la=t:la=la.next=t}return la}function xa(t,e){return"function"===typeof e?e(t):e}function _a(t){var e=ba(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=ca,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var c=s=null,l=null,u=a;do{var h=u.lane;if((aa&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,s=r):l=l.next=d,sa.lanes|=h,Lc|=h}u=u.next}while(null!==u&&u!==a);null===l?s=r:l.next=c,sr(r,e.memoizedState)||(bs=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{a=i.lane,sa.lanes|=a,Lc|=a,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wa(t){var e=ba(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=t(a,s.action),s=s.next}while(s!==i);sr(a,e.memoizedState)||(bs=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function Ta(t,e){var n=sa,r=ba(),i=e(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,La(Ma.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Pa(9,Aa.bind(null,n,r,i,e),void 0,null),null===Cc)throw Error(o(349));0!==(30&aa)||Ea(n,e,i)}return i}function Ea(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=sa.updateQueue)?(e={lastEffect:null,stores:null},sa.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Aa(t,e,n,r){e.value=n,e.getSnapshot=r,Oa(e)&&Ca(t)}function Ma(t,e,n){return n((function(){Oa(e)&&Ca(t)}))}function Oa(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch(r){return!0}}function Ca(t){var e=Do(t,1);null!==e&&nl(e,t,1,-1)}function ka(t){var e=va();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:t},e.queue=t,t=t.dispatch=Ya.bind(null,sa,t),[e.memoizedState,t]}function Pa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=sa.updateQueue)?(e={lastEffect:null,stores:null},sa.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Ia(){return ba().memoizedState}function Na(t,e,n,r){var i=va();sa.flags|=t,i.memoizedState=Pa(1|e,n,void 0,void 0===r?null:r)}function Ra(t,e,n,r){var i=ba();r=void 0===r?null:r;var o=void 0;if(null!==ca){var a=ca.memoizedState;if(o=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=Pa(e,n,o,r))}sa.flags|=t,i.memoizedState=Pa(1|e,n,o,r)}function Da(t,e){return Na(8390656,8,t,e)}function La(t,e){return Ra(2048,8,t,e)}function Fa(t,e){return Ra(4,2,t,e)}function ja(t,e){return Ra(4,4,t,e)}function Ua(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ba(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Ra(4,4,Ua.bind(null,e,t),n)}function za(){}function Va(t,e){var n=ba();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ma(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ga(t,e){var n=ba();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ma(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Wa(t,e,n){return 0===(21&aa)?(t.baseState&&(t.baseState=!1,bs=!0),t.memoizedState=n):(sr(n,e)||(n=me(),sa.lanes|=n,Lc|=n,t.baseState=!0),e)}function Ha(t,e){var n=be;be=0!==n&&4>n?n:4,t(!0);var r=oa.transition;oa.transition={};try{t(!1),e()}finally{be=n,oa.transition=r}}function qa(){return ba().memoizedState}function Xa(t,e,n){var r=el(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ka(t))Za(e,n);else if(null!==(n=Ro(t,e,n,r))){nl(n,t,r,tl()),Ja(n,e,r)}}function Ya(t,e,n){var r=el(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ka(t))Za(e,i);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var c=e.interleaved;return null===c?(i.next=i,No(e)):(i.next=c.next,c.next=i),void(e.interleaved=i)}}catch(l){}null!==(n=Ro(t,e,i,r))&&(nl(n,t,r,i=tl()),Ja(n,e,r))}}function Ka(t){var e=t.alternate;return t===sa||null!==e&&e===sa}function Za(t,e){ha=ua=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ja(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}var $a={readContext:Po,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Qa={readContext:Po,useCallback:function(t,e){return va().memoizedState=[t,void 0===e?null:e],t},useContext:Po,useEffect:Da,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Na(4194308,4,Ua.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Na(4194308,4,t,e)},useInsertionEffect:function(t,e){return Na(4,2,t,e)},useMemo:function(t,e){var n=va();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=va();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Xa.bind(null,sa,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},va().memoizedState=t},useState:ka,useDebugValue:za,useDeferredValue:function(t){return va().memoizedState=t},useTransition:function(){var t=ka(!1),e=t[0];return t=Ha.bind(null,t[1]),va().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=sa,i=va();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===Cc)throw Error(o(349));0!==(30&aa)||Ea(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,Da(Ma.bind(null,r,a,t),[t]),r.flags|=2048,Pa(9,Aa.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=va(),e=Cc.identifierPrefix;if(io){var n=Ji;e=":"+e+"R"+(n=(Zi&~(1<<32-ae(Zi)-1)).toString(32)+n),0<(n=da++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=pa++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ts={readContext:Po,useCallback:Va,useContext:Po,useEffect:La,useImperativeHandle:Ba,useInsertionEffect:Fa,useLayoutEffect:ja,useMemo:Ga,useReducer:_a,useRef:Ia,useState:function(){return _a(xa)},useDebugValue:za,useDeferredValue:function(t){return Wa(ba(),ca.memoizedState,t)},useTransition:function(){return[_a(xa)[0],ba().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ta,useId:qa,unstable_isNewReconciler:!1},es={readContext:Po,useCallback:Va,useContext:Po,useEffect:La,useImperativeHandle:Ba,useInsertionEffect:Fa,useLayoutEffect:ja,useMemo:Ga,useReducer:wa,useRef:Ia,useState:function(){return wa(xa)},useDebugValue:za,useDeferredValue:function(t){var e=ba();return null===ca?e.memoizedState=t:Wa(e,ca.memoizedState,t)},useTransition:function(){return[wa(xa)[0],ba().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ta,useId:qa,unstable_isNewReconciler:!1};function ns(t,e){if(t&&t.defaultProps){for(var n in e=F({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}function rs(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:F({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var is={isMounted:function(t){return!!(t=t._reactInternals)&&Vt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tl(),i=el(t),o=Uo(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Bo(t,o,i))&&(nl(e,t,i,r),zo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tl(),i=el(t),o=Uo(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Bo(t,o,i))&&(nl(e,t,i,r),zo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tl(),r=el(t),i=Uo(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=Bo(t,i,r))&&(nl(e,t,r,n),zo(e,t,r))}};function os(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,o))}function as(t,e,n){var r=!1,i=Mi,o=e.contextType;return"object"===typeof o&&null!==o?o=Po(o):(i=Ii(e)?ki:Oi.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?Pi(t,i):Mi),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=is,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function ss(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&is.enqueueReplaceState(e,e.state,null)}function cs(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Fo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=Po(o):(o=Ii(e)?ki:Oi.current,i.context=Pi(t,o)),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(rs(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&is.enqueueReplaceState(i,i.state,null),Go(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function ls(t,e){try{var n="",r=e;do{n+=z(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i,digest:null}}function us(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function hs(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(t,e,n){(n=Uo(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wc||(Wc=!0,Hc=r),hs(0,e)},n}function fs(t,e,n){(n=Uo(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){hs(0,e),"function"!==typeof r&&(null===qc?qc=new Set([this]):qc.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ms(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new ds;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=El.bind(null,t,e,n),e.then(t,t))}function gs(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ys(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Uo(-1,1)).tag=2,Bo(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var vs=x.ReactCurrentOwner,bs=!1;function xs(t,e,n,r){e.child=null===t?wo(e,null,n,r):_o(e,t.child,n,r)}function _s(t,e,n,r,i){n=n.render;var o=e.ref;return ko(e,i),r=ga(t,e,n,r,o,i),n=ya(),null===t||bs?(io&&n&&to(e),e.flags|=1,xs(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ws(t,e,i))}function ws(t,e,n,r,i){if(null===t){var o=n.type;return"function"!==typeof o||Il(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Rl(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Ss(t,e,o,r,i))}if(o=t.child,0===(t.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(a,r)&&t.ref===e.ref)return Ws(t,e,i)}return e.flags|=1,(t=Nl(o,r)).ref=e.ref,t.return=e,e.child=t}function Ss(t,e,n,r,i){if(null!==t){var o=t.memoizedProps;if(cr(o,r)&&t.ref===e.ref){if(bs=!1,e.pendingProps=r=o,0===(t.lanes&i))return e.lanes=t.lanes,Ws(t,e,i);0!==(131072&t.flags)&&(bs=!0)}}return As(t,e,n,r,i)}function Ts(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Nc,Ic),Ic|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ai(Nc,Ic),Ic|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ai(Nc,Ic),Ic|=r}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ai(Nc,Ic),Ic|=r;return xs(t,e,i,n),e.child}function Es(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function As(t,e,n,r,i){var o=Ii(n)?ki:Oi.current;return o=Pi(e,o),ko(e,i),n=ga(t,e,n,r,o,i),r=ya(),null===t||bs?(io&&r&&to(e),e.flags|=1,xs(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ws(t,e,i))}function Ms(t,e,n,r,i){if(Ii(n)){var o=!0;Li(e)}else o=!1;if(ko(e,i),null===e.stateNode)Gs(t,e),as(e,n,r),cs(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var c=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=Po(l):l=Pi(e,l=Ii(n)?ki:Oi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||c!==l)&&ss(e,a,r,l),Lo=!1;var d=e.memoizedState;a.state=d,Go(e,r,a,i),c=e.memoizedState,s!==r||d!==c||Ci.current||Lo?("function"===typeof u&&(rs(e,n,u,r),c=e.memoizedState),(s=Lo||os(e,n,s,r,d,c,l))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=l,r=s):("function"===typeof a.componentDidMount&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,jo(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:ns(e.type,s),a.props=l,h=e.pendingProps,d=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=Po(c):c=Pi(e,c=Ii(n)?ki:Oi.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==c)&&ss(e,a,r,c),Lo=!1,d=e.memoizedState,a.state=d,Go(e,r,a,i);var f=e.memoizedState;s!==h||d!==f||Ci.current||Lo?("function"===typeof p&&(rs(e,n,p,r),f=e.memoizedState),(l=Lo||os(e,n,l,r,d,f,c)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Os(t,e,n,r,o,i)}function Os(t,e,n,r,i,o){Es(t,e);var a=0!==(128&e.flags);if(!r&&!a)return i&&Fi(e,n,!1),Ws(t,e,o);r=e.stateNode,vs.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=_o(e,t.child,null,o),e.child=_o(e,null,s,o)):xs(t,e,s,o),e.memoizedState=r.state,i&&Fi(e,n,!0),e.child}function Cs(t){var e=t.stateNode;e.pendingContext?Ri(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Ri(0,e.context,!1),Zo(t,e.containerInfo)}function ks(t,e,n,r,i){return fo(),mo(i),e.flags|=256,xs(t,e,n,r),e.child}var Ps,Is,Ns,Rs,Ds={dehydrated:null,treeContext:null,retryLane:0};function Ls(t){return{baseLanes:t,cachePool:null,transitions:null}}function Fs(t,e,n){var r,i=e.pendingProps,a=ta.current,s=!1,c=0!==(128&e.flags);if((r=c)||(r=(null===t||null!==t.memoizedState)&&0!==(2&a)),r?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Ai(ta,1&a),null===t)return lo(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(c=i.children,t=i.fallback,s?(i=e.mode,s=e.child,c={mode:"hidden",children:c},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=c):s=Ll(c,i,0,null),t=Dl(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ls(n),e.memoizedState=Ds,t):js(e,c));if(null!==(a=t.memoizedState)&&null!==(r=a.dehydrated))return function(t,e,n,r,i,a,s){if(n)return 256&e.flags?(e.flags&=-257,Us(t,e,s,r=us(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Ll({mode:"visible",children:r.children},i,0,null),(a=Dl(a,i,s,null)).flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,0!==(1&e.mode)&&_o(e,t.child,null,s),e.child.memoizedState=Ls(s),e.memoizedState=Ds,a);if(0===(1&e.mode))return Us(t,e,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Us(t,e,s,r=us(a=Error(o(419)),r,void 0))}if(c=0!==(s&t.childLanes),bs||c){if(null!==(r=Cc)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Do(t,i),nl(r,t,i,-1))}return ml(),Us(t,e,s,r=us(Error(o(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Ml.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,ro=li(i.nextSibling),no=e,io=!0,oo=null,null!==t&&(Xi[Yi++]=Zi,Xi[Yi++]=Ji,Xi[Yi++]=Ki,Zi=t.id,Ji=t.overflow,Ki=e),e=js(e,r.children),e.flags|=4096,e)}(t,e,c,i,r,a,n);if(s){s=i.fallback,c=e.mode,r=(a=t.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&e.child!==a?((i=e.child).childLanes=0,i.pendingProps=l,e.deletions=null):(i=Nl(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Nl(r,s):(s=Dl(s,c,n,null)).flags|=2,s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,c=null===(c=t.child.memoizedState)?Ls(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=t.childLanes&~n,e.memoizedState=Ds,i}return t=(s=t.child).sibling,i=Nl(s,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function js(t,e){return(e=Ll({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Us(t,e,n,r){return null!==r&&mo(r),_o(e,t.child,null,n),(t=js(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Bs(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),Co(t.return,e,n)}function zs(t,e,n,r,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Vs(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(xs(t,e,r.children,n),0!==(2&(r=ta.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Bs(t,n,e);else if(19===t.tag)Bs(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ai(ta,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===ea(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),zs(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===ea(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}zs(e,!0,n,null,o);break;case"together":zs(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gs(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ws(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Lc|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Nl(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Nl(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Hs(t,e){if(!io)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qs(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Xs(t,e,n){var r=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(e),null;case 1:case 17:return Ii(e.type)&&Ni(),qs(e),null;case 3:return r=e.stateNode,Jo(),Ei(Ci),Ei(Oi),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ho(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(al(oo),oo=null))),Is(t,e),qs(e),null;case 5:Qo(e);var i=Ko(Yo.current);if(n=e.type,null!==t&&null!=e.stateNode)Ns(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(o(166));return qs(e),null}if(t=Ko(qo.current),ho(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[di]=e,r[pi]=a,t=0!==(1&e.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Z(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":it(r,a),Ur("invalid",r)}for(var c in vt(n,a),i=null,a)if(a.hasOwnProperty(c)){var l=a[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,l,t),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,l,t),i=["children",""+l]):s.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Ur("scroll",r)}switch(n){case"input":q(r),Q(r,a,!0);break;case"textarea":q(r),at(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Qr)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=st(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=c.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=c.createElement(n,{is:r.is}):(t=c.createElement(n),"select"===n&&(c=t,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):t=c.createElementNS(t,n),t[di]=e,t[pi]=r,Ps(t,e,!1,!1),e.stateNode=t;t:{switch(c=bt(n,r),n){case"dialog":Ur("cancel",t),Ur("close",t),i=r;break;case"iframe":case"object":case"embed":Ur("load",t),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],t);i=r;break;case"source":Ur("error",t),i=r;break;case"img":case"image":case"link":Ur("error",t),Ur("load",t),i=r;break;case"details":Ur("toggle",t),i=r;break;case"input":Z(t,r),i=K(t,r),Ur("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),Ur("invalid",t)}for(a in vt(n,i),l=i)if(l.hasOwnProperty(a)){var u=l[a];"style"===a?gt(t,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ht(t,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&dt(t,u):"number"===typeof u&&dt(t,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",t):null!=u&&b(t,a,u,c))}switch(n){case"input":q(t),Q(t,r,!1);break;case"textarea":q(t),at(t);break;case"option":null!=r.value&&t.setAttribute("value",""+W(r.value));break;case"select":t.multiple=!!r.multiple,null!=(a=r.value)?nt(t,!!r.multiple,a,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return qs(e),null;case 6:if(t&&null!=e.stateNode)Rs(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(o(166));if(n=Ko(Yo.current),Ko(qo.current),ho(e)){if(r=e.stateNode,n=e.memoizedProps,r[di]=e,(a=r.nodeValue!==n)&&null!==(t=no))switch(t.tag){case 3:$r(r.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&t.mode))}a&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=e,e.stateNode=r}return qs(e),null;case 13:if(Ei(ta),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&e.mode)&&0===(128&e.flags))po(),fo(),e.flags|=98560,a=!1;else if(a=ho(e),null!==r&&null!==r.dehydrated){if(null===t){if(!a)throw Error(o(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(o(317));a[di]=e}else fo(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;qs(e),a=!1}else null!==oo&&(al(oo),oo=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ta.current)?0===Rc&&(Rc=3):ml())),null!==e.updateQueue&&(e.flags|=4),qs(e),null);case 4:return Jo(),Is(t,e),null===t&&Vr(e.stateNode.containerInfo),qs(e),null;case 10:return Oo(e.type._context),qs(e),null;case 19:if(Ei(ta),null===(a=e.memoizedState))return qs(e),null;if(r=0!==(128&e.flags),null===(c=a.rendering))if(r)Hs(a,!1);else{if(0!==Rc||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(c=ea(t))){for(e.flags|=128,Hs(a,!1),null!==(r=c.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(a=n).flags&=14680066,null===(c=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,t=c.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ai(ta,1&ta.current|2),e.child}t=t.sibling}null!==a.tail&&Jt()>Vc&&(e.flags|=128,r=!0,Hs(a,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=ea(c))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Hs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!c.alternate&&!io)return qs(e),null}else 2*Jt()-a.renderingStartTime>Vc&&1073741824!==n&&(e.flags|=128,r=!0,Hs(a,!1),e.lanes=4194304);a.isBackwards?(c.sibling=e.child,e.child=c):(null!==(n=a.last)?n.sibling=c:e.child=c,a.last=c)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Jt(),e.sibling=null,n=ta.current,Ai(ta,r?1&n|2:1&n),e):(qs(e),null);case 22:case 23:return hl(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Ic)&&(qs(e),6&e.subtreeFlags&&(e.flags|=8192)):qs(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function Ys(t,e){switch(eo(e),e.tag){case 1:return Ii(e.type)&&Ni(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Jo(),Ei(Ci),Ei(Oi),ra(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return Qo(e),null;case 13:if(Ei(ta),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));fo()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ei(ta),null;case 4:return Jo(),null;case 10:return Oo(e.type._context),null;case 22:case 23:return hl(),null;default:return null}}Ps=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Is=function(){},Ns=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ko(qo.current);var o,a=null;switch(n){case"input":i=K(t,i),r=K(t,r),a=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":i=rt(t,i),r=rt(t,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(t.onclick=Qr)}for(u in vt(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var c=i[u];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(a=a||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Ur("scroll",t),a||c===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}},Rs=function(t,e,n,r){n!==r&&(e.flags|=4)};var Ks=!1,Zs=!1,Js="function"===typeof WeakSet?WeakSet:Set,$s=null;function Qs(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tl(t,e,r)}else n.current=null}function tc(t,e,n){try{n()}catch(r){Tl(t,e,r)}}var ec=!1;function nc(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&tc(e,n,o)}i=i.next}while(i!==r)}}function rc(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ic(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function oc(t){var e=t.alternate;null!==e&&(t.alternate=null,oc(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[di],delete e[pi],delete e[mi],delete e[gi],delete e[yi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ac(t){return 5===t.tag||3===t.tag||4===t.tag}function sc(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||ac(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function cc(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Qr));else if(4!==r&&null!==(t=t.child))for(cc(t,e,n),t=t.sibling;null!==t;)cc(t,e,n),t=t.sibling}function lc(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(lc(t,e,n),t=t.sibling;null!==t;)lc(t,e,n),t=t.sibling}var uc=null,hc=!1;function dc(t,e,n){for(n=n.child;null!==n;)pc(t,e,n),n=n.sibling}function pc(t,e,n){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ie,n)}catch(s){}switch(n.tag){case 5:Zs||Qs(n,e);case 6:var r=uc,i=hc;uc=null,dc(t,e,n),hc=i,null!==(uc=r)&&(hc?(t=uc,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):uc.removeChild(n.stateNode));break;case 18:null!==uc&&(hc?(t=uc,n=n.stateNode,8===t.nodeType?ci(t.parentNode,n):1===t.nodeType&&ci(t,n),Ve(t)):ci(uc,n.stateNode));break;case 4:r=uc,i=hc,uc=n.stateNode.containerInfo,hc=!0,dc(t,e,n),uc=r,hc=i;break;case 0:case 11:case 14:case 15:if(!Zs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&tc(n,e,a),i=i.next}while(i!==r)}dc(t,e,n);break;case 1:if(!Zs&&(Qs(n,e),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Tl(n,e,s)}dc(t,e,n);break;case 21:dc(t,e,n);break;case 22:1&n.mode?(Zs=(r=Zs)||null!==n.memoizedState,dc(t,e,n),Zs=r):dc(t,e,n);break;default:dc(t,e,n)}}function fc(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Js),e.forEach((function(e){var r=Ol.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function mc(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,c=s;t:for(;null!==c;){switch(c.tag){case 5:uc=c.stateNode,hc=!1;break t;case 3:case 4:uc=c.stateNode.containerInfo,hc=!0;break t}c=c.return}if(null===uc)throw Error(o(160));pc(a,s,i),uc=null,hc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(u){Tl(i,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)gc(e,t),e=e.sibling}function gc(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mc(e,t),yc(t),4&r){try{nc(3,t,t.return),rc(3,t)}catch(g){Tl(t,t.return,g)}try{nc(5,t,t.return)}catch(g){Tl(t,t.return,g)}}break;case 1:mc(e,t),yc(t),512&r&&null!==n&&Qs(n,n.return);break;case 5:if(mc(e,t),yc(t),512&r&&null!==n&&Qs(n,n.return),32&t.flags){var i=t.stateNode;try{dt(i,"")}catch(g){Tl(t,t.return,g)}}if(4&r&&null!=(i=t.stateNode)){var a=t.memoizedProps,s=null!==n?n.memoizedProps:a,c=t.type,l=t.updateQueue;if(t.updateQueue=null,null!==l)try{"input"===c&&"radio"===a.type&&null!=a.name&&J(i,a),bt(c,s);var u=bt(c,a);for(s=0;s<l.length;s+=2){var h=l[s],d=l[s+1];"style"===h?gt(i,d):"dangerouslySetInnerHTML"===h?ht(i,d):"children"===h?dt(i,d):b(i,h,d,u)}switch(c){case"input":$(i,a);break;case"textarea":ot(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?nt(i,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?nt(i,!!a.multiple,a.defaultValue,!0):nt(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(g){Tl(t,t.return,g)}}break;case 6:if(mc(e,t),yc(t),4&r){if(null===t.stateNode)throw Error(o(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(g){Tl(t,t.return,g)}}break;case 3:if(mc(e,t),yc(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ve(e.containerInfo)}catch(g){Tl(t,t.return,g)}break;case 4:default:mc(e,t),yc(t);break;case 13:mc(e,t),yc(t),8192&(i=t.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(zc=Jt())),4&r&&fc(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Zs=(u=Zs)||h,mc(e,t),Zs=u):mc(e,t),yc(t),8192&r){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&0!==(1&t.mode))for($s=t,h=t.child;null!==h;){for(d=$s=h;null!==$s;){switch(f=(p=$s).child,p.tag){case 0:case 11:case 14:case 15:nc(4,p,p.return);break;case 1:Qs(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Tl(r,n,g)}}break;case 5:Qs(p,p.return);break;case 22:if(null!==p.memoizedState){_c(d);continue}}null!==f?(f.return=p,$s=f):_c(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(c=d.stateNode,s=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=mt("display",s))}catch(g){Tl(t,t.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tl(t,t.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mc(e,t),yc(t),4&r&&fc(t);case 21:}}function yc(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(ac(n)){var r=n;break t}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(dt(i,""),r.flags&=-33),lc(t,sc(t),i);break;case 3:case 4:var a=r.stateNode.containerInfo;cc(t,sc(t),a);break;default:throw Error(o(161))}}catch(s){Tl(t,t.return,s)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function vc(t,e,n){$s=t,bc(t,e,n)}function bc(t,e,n){for(var r=0!==(1&t.mode);null!==$s;){var i=$s,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Ks;if(!a){var s=i.alternate,c=null!==s&&null!==s.memoizedState||Zs;s=Ks;var l=Zs;if(Ks=a,(Zs=c)&&!l)for($s=i;null!==$s;)c=(a=$s).child,22===a.tag&&null!==a.memoizedState?wc(i):null!==c?(c.return=a,$s=c):wc(i);for(;null!==o;)$s=o,bc(o,e,n),o=o.sibling;$s=i,Ks=s,Zs=l}xc(t)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,$s=o):xc(t)}}function xc(t){for(;null!==$s;){var e=$s;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Zs||rc(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Zs)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ns(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&Wo(e,a,r);break;case 3:var s=e.updateQueue;if(null!==s){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Wo(e,s,n)}break;case 5:var c=e.stateNode;if(null===n&&4&e.flags){n=c;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ve(d)}}}break;default:throw Error(o(163))}Zs||512&e.flags&&ic(e)}catch(p){Tl(e,e.return,p)}}if(e===t){$s=null;break}if(null!==(n=e.sibling)){n.return=e.return,$s=n;break}$s=e.return}}function _c(t){for(;null!==$s;){var e=$s;if(e===t){$s=null;break}var n=e.sibling;if(null!==n){n.return=e.return,$s=n;break}$s=e.return}}function wc(t){for(;null!==$s;){var e=$s;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rc(4,e)}catch(c){Tl(e,n,c)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(c){Tl(e,i,c)}}var o=e.return;try{ic(e)}catch(c){Tl(e,o,c)}break;case 5:var a=e.return;try{ic(e)}catch(c){Tl(e,a,c)}}}catch(c){Tl(e,e.return,c)}if(e===t){$s=null;break}var s=e.sibling;if(null!==s){s.return=e.return,$s=s;break}$s=e.return}}var Sc,Tc=Math.ceil,Ec=x.ReactCurrentDispatcher,Ac=x.ReactCurrentOwner,Mc=x.ReactCurrentBatchConfig,Oc=0,Cc=null,kc=null,Pc=0,Ic=0,Nc=Ti(0),Rc=0,Dc=null,Lc=0,Fc=0,jc=0,Uc=null,Bc=null,zc=0,Vc=1/0,Gc=null,Wc=!1,Hc=null,qc=null,Xc=!1,Yc=null,Kc=0,Zc=0,Jc=null,$c=-1,Qc=0;function tl(){return 0!==(6&Oc)?Jt():-1!==$c?$c:$c=Jt()}function el(t){return 0===(1&t.mode)?1:0!==(2&Oc)&&0!==Pc?Pc&-Pc:null!==go.transition?(0===Qc&&(Qc=me()),Qc):0!==(t=be)?t:t=void 0===(t=window.event)?16:Ze(t.type)}function nl(t,e,n,r){if(50<Zc)throw Zc=0,Jc=null,Error(o(185));ye(t,n,r),0!==(2&Oc)&&t===Cc||(t===Cc&&(0===(2&Oc)&&(Fc|=n),4===Rc&&sl(t,Pc)),rl(t,r),1===n&&0===Oc&&0===(1&e.mode)&&(Vc=Jt()+500,Ui&&Vi()))}function rl(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ae(o),s=1<<a,c=i[a];-1===c?0!==(s&n)&&0===(s&r)||(i[a]=pe(s,e)):c<=e&&(t.expiredLanes|=s),o&=~s}}(t,e);var r=de(t,t===Cc?Pc:0);if(0===r)null!==n&&Yt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Yt(n),1===e)0===t.tag?function(t){Ui=!0,zi(t)}(cl.bind(null,t)):zi(cl.bind(null,t)),ai((function(){0===(6&Oc)&&Vi()})),n=null;else{switch(xe(r)){case 1:n=Qt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Cl(n,il.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function il(t,e){if($c=-1,Qc=0,0!==(6&Oc))throw Error(o(327));var n=t.callbackNode;if(wl()&&t.callbackNode!==n)return null;var r=de(t,t===Cc?Pc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=gl(t,r);else{e=r;var i=Oc;Oc|=2;var a=fl();for(Cc===t&&Pc===e||(Gc=null,Vc=Jt()+500,dl(t,e));;)try{vl();break}catch(c){pl(t,c)}Mo(),Ec.current=a,Oc=i,null!==kc?e=0:(Cc=null,Pc=0,e=Rc)}if(0!==e){if(2===e&&(0!==(i=fe(t))&&(r=i,e=ol(t,i))),1===e)throw n=Dc,dl(t,0),sl(t,r),rl(t,Jt()),n;if(6===e)sl(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=gl(t,r))&&(0!==(a=fe(t))&&(r=a,e=ol(t,a))),1===e))throw n=Dc,dl(t,0),sl(t,r),rl(t,Jt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(o(345));case 2:case 5:_l(t,Bc,Gc);break;case 3:if(sl(t,r),(130023424&r)===r&&10<(e=zc+500-Jt())){if(0!==de(t,0))break;if(((i=t.suspendedLanes)&r)!==r){tl(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(_l.bind(null,t,Bc,Gc),e);break}_l(t,Bc,Gc);break;case 4:if(sl(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ae(r);a=1<<s,(s=e[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Jt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tc(r/1960))-r)){t.timeoutHandle=ri(_l.bind(null,t,Bc,Gc),r);break}_l(t,Bc,Gc);break;default:throw Error(o(329))}}}return rl(t,Jt()),t.callbackNode===n?il.bind(null,t):null}function ol(t,e){var n=Uc;return t.current.memoizedState.isDehydrated&&(dl(t,e).flags|=256),2!==(t=gl(t,e))&&(e=Bc,Bc=n,null!==e&&al(e)),t}function al(t){null===Bc?Bc=t:Bc.push.apply(Bc,t)}function sl(t,e){for(e&=~jc,e&=~Fc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ae(e),r=1<<n;t[n]=-1,e&=~r}}function cl(t){if(0!==(6&Oc))throw Error(o(327));wl();var e=de(t,0);if(0===(1&e))return rl(t,Jt()),null;var n=gl(t,e);if(0!==t.tag&&2===n){var r=fe(t);0!==r&&(e=r,n=ol(t,r))}if(1===n)throw n=Dc,dl(t,0),sl(t,e),rl(t,Jt()),n;if(6===n)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_l(t,Bc,Gc),rl(t,Jt()),null}function ll(t,e){var n=Oc;Oc|=1;try{return t(e)}finally{0===(Oc=n)&&(Vc=Jt()+500,Ui&&Vi())}}function ul(t){null!==Yc&&0===Yc.tag&&0===(6&Oc)&&wl();var e=Oc;Oc|=1;var n=Mc.transition,r=be;try{if(Mc.transition=null,be=1,t)return t()}finally{be=r,Mc.transition=n,0===(6&(Oc=e))&&Vi()}}function hl(){Ic=Nc.current,Ei(Nc)}function dl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==kc)for(n=kc.return;null!==n;){var r=n;switch(eo(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:Jo(),Ei(Ci),Ei(Oi),ra();break;case 5:Qo(r);break;case 4:Jo();break;case 13:case 19:Ei(ta);break;case 10:Oo(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Cc=t,kc=t=Nl(t.current,null),Pc=Ic=e,Rc=0,Dc=null,jc=Fc=Lc=0,Bc=Uc=null,null!==Io){for(e=0;e<Io.length;e++)if(null!==(r=(n=Io[e]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Io=null}return t}function pl(t,e){for(;;){var n=kc;try{if(Mo(),ia.current=$a,ua){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ua=!1}if(aa=0,la=ca=sa=null,ha=!1,da=0,Ac.current=null,null===n||null===n.return){Rc=1,Dc=e,kc=null;break}t:{var a=t,s=n.return,c=n,l=e;if(e=Pc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,ys(f,s,c,0,e),1&f.mode&&ms(a,u,e),l=u;var m=(e=f).updateQueue;if(null===m){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break t}if(0===(1&e)){ms(a,u,e),ml();break t}l=Error(o(426))}else if(io&&1&c.mode){var y=gs(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,c,0,e),mo(ls(l,c));break t}}a=l=ls(l,c),4!==Rc&&(Rc=2),null===Uc?Uc=[a]:Uc.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,Vo(a,ps(0,l,e));break t;case 1:c=l;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===qc||!qc.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e,Vo(a,fs(a,c,e));break t}}a=a.return}while(null!==a)}xl(n)}catch(x){e=x,kc===n&&null!==n&&(kc=n=n.return);continue}break}}function fl(){var t=Ec.current;return Ec.current=$a,null===t?$a:t}function ml(){0!==Rc&&3!==Rc&&2!==Rc||(Rc=4),null===Cc||0===(268435455&Lc)&&0===(268435455&Fc)||sl(Cc,Pc)}function gl(t,e){var n=Oc;Oc|=2;var r=fl();for(Cc===t&&Pc===e||(Gc=null,dl(t,e));;)try{yl();break}catch(i){pl(t,i)}if(Mo(),Oc=n,Ec.current=r,null!==kc)throw Error(o(261));return Cc=null,Pc=0,Rc}function yl(){for(;null!==kc;)bl(kc)}function vl(){for(;null!==kc&&!Kt();)bl(kc)}function bl(t){var e=Sc(t.alternate,t,Ic);t.memoizedProps=t.pendingProps,null===e?xl(t):kc=e,Ac.current=null}function xl(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Xs(n,e,Ic)))return void(kc=n)}else{if(null!==(n=Ys(n,e)))return n.flags&=32767,void(kc=n);if(null===t)return Rc=6,void(kc=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(kc=e);kc=e=t}while(null!==e);0===Rc&&(Rc=5)}function _l(t,e,n){var r=be,i=Mc.transition;try{Mc.transition=null,be=1,function(t,e,n,r){do{wl()}while(null!==Yc);if(0!==(6&Oc))throw Error(o(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ae(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}(t,a),t===Cc&&(kc=Cc=null,Pc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xc||(Xc=!0,Cl(ee,(function(){return wl(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Mc.transition,Mc.transition=null;var s=be;be=1;var c=Oc;Oc|=4,Ac.current=null,function(t,e){if(ti=We,pr(t=dr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(_){n=null;break t}var s=0,c=-1,l=-1,u=0,h=0,d=t,p=null;e:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(c=s+i),d!==a||0!==r&&3!==d.nodeType||(l=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===t)break e;if(p===n&&++u===i&&(c=s),p===a&&++h===r&&(l=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},We=!1,$s=e;null!==$s;)if(t=(e=$s).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,$s=t;else for(;null!==$s;){e=$s;try{var m=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:ns(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=e.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(_){Tl(e,e.return,_)}if(null!==(t=e.sibling)){t.return=e.return,$s=t;break}$s=e.return}m=ec,ec=!1}(t,n),gc(n,t),fr(ei),We=!!ti,ei=ti=null,t.current=n,vc(n,t,i),Zt(),Oc=c,be=s,Mc.transition=a}else t.current=n;if(Xc&&(Xc=!1,Yc=t,Kc=i),a=t.pendingLanes,0===a&&(qc=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),rl(t,Jt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wc)throw Wc=!1,t=Hc,Hc=null,t;0!==(1&Kc)&&0!==t.tag&&wl(),a=t.pendingLanes,0!==(1&a)?t===Jc?Zc++:(Zc=0,Jc=t):Zc=0,Vi()}(t,e,n,r)}finally{Mc.transition=i,be=r}return null}function wl(){if(null!==Yc){var t=xe(Kc),e=Mc.transition,n=be;try{if(Mc.transition=null,be=16>t?16:t,null===Yc)var r=!1;else{if(t=Yc,Yc=null,Kc=0,0!==(6&Oc))throw Error(o(331));var i=Oc;for(Oc|=4,$s=t.current;null!==$s;){var a=$s,s=a.child;if(0!==(16&$s.flags)){var c=a.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for($s=u;null!==$s;){var h=$s;switch(h.tag){case 0:case 11:case 15:nc(8,h,a)}var d=h.child;if(null!==d)d.return=h,$s=d;else for(;null!==$s;){var p=(h=$s).sibling,f=h.return;if(oc(h),h===u){$s=null;break}if(null!==p){p.return=f,$s=p;break}$s=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}$s=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,$s=s;else t:for(;null!==$s;){if(0!==(2048&(a=$s).flags))switch(a.tag){case 0:case 11:case 15:nc(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,$s=v;break t}$s=a.return}}var b=t.current;for($s=b;null!==$s;){var x=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,$s=x;else t:for(s=b;null!==$s;){if(0!==(2048&(c=$s).flags))try{switch(c.tag){case 0:case 11:case 15:rc(9,c)}}catch(w){Tl(c,c.return,w)}if(c===s){$s=null;break t}var _=c.sibling;if(null!==_){_.return=c.return,$s=_;break t}$s=c.return}}if(Oc=i,Vi(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ie,t)}catch(w){}r=!0}return r}finally{be=n,Mc.transition=e}}return!1}function Sl(t,e,n){t=Bo(t,e=ps(0,e=ls(n,e),1),1),e=tl(),null!==t&&(ye(t,1,e),rl(t,e))}function Tl(t,e,n){if(3===t.tag)Sl(t,t,n);else for(;null!==e;){if(3===e.tag){Sl(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===qc||!qc.has(r))){e=Bo(e,t=fs(e,t=ls(n,t),1),1),t=tl(),null!==e&&(ye(e,1,t),rl(e,t));break}}e=e.return}}function El(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=tl(),t.pingedLanes|=t.suspendedLanes&n,Cc===t&&(Pc&n)===n&&(4===Rc||3===Rc&&(130023424&Pc)===Pc&&500>Jt()-zc?dl(t,0):jc|=n),rl(t,e)}function Al(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=tl();null!==(t=Do(t,e))&&(ye(t,e,n),rl(t,n))}function Ml(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Al(t,n)}function Ol(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(e),Al(t,n)}function Cl(t,e){return Xt(t,e)}function kl(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(t,e,n,r){return new kl(t,e,n,r)}function Il(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Nl(t,e){var n=t.alternate;return null===n?((n=Pl(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Rl(t,e,n,r,i,a){var s=2;if(r=t,"function"===typeof t)Il(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case S:return Dl(n.children,i,a,e);case T:s=8,i|=8;break;case E:return(t=Pl(12,n,e,2|i)).elementType=E,t.lanes=a,t;case C:return(t=Pl(13,n,e,i)).elementType=C,t.lanes=a,t;case k:return(t=Pl(19,n,e,i)).elementType=k,t.lanes=a,t;case N:return Ll(n,i,a,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case A:s=10;break t;case M:s=9;break t;case O:s=11;break t;case P:s=14;break t;case I:s=16,r=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Pl(s,n,e,i)).elementType=t,e.type=r,e.lanes=a,e}function Dl(t,e,n,r){return(t=Pl(7,t,r,e)).lanes=n,t}function Ll(t,e,n,r){return(t=Pl(22,t,r,e)).elementType=N,t.lanes=n,t.stateNode={isHidden:!1},t}function Fl(t,e,n){return(t=Pl(6,t,null,e)).lanes=n,t}function jl(t,e,n){return(e=Pl(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ul(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bl(t,e,n,r,i,o,a,s,c){return t=new Ul(t,e,n,s,c),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Pl(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fo(o),t}function zl(t){if(!t)return Mi;t:{if(Vt(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Ii(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var n=t.type;if(Ii(n))return Di(t,n,e)}return e}function Vl(t,e,n,r,i,o,a,s,c){return(t=Bl(n,r,!0,t,0,o,0,s,c)).context=zl(null),n=t.current,(o=Uo(r=tl(),i=el(n))).callback=void 0!==e&&null!==e?e:null,Bo(n,o,i),t.current.lanes=i,ye(t,i,r),rl(t,r),t}function Gl(t,e,n,r){var i=e.current,o=tl(),a=el(i);return n=zl(n),null===e.context?e.context=n:e.pendingContext=n,(e=Uo(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Bo(i,e,a))&&(nl(t,i,a,o),zo(t,i,a)),a}function Wl(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Hl(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function ql(t,e){Hl(t,e),(t=t.alternate)&&Hl(t,e)}Sc=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ci.current)bs=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return bs=!1,function(t,e,n){switch(e.tag){case 3:Cs(e),fo();break;case 5:$o(e);break;case 1:Ii(e.type)&&Li(e);break;case 4:Zo(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ai(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Ai(ta,1&ta.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Fs(t,e,n):(Ai(ta,1&ta.current),null!==(t=Ws(t,e,n))?t.sibling:null);Ai(ta,1&ta.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return Vs(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(ta,ta.current),r)break;return null;case 22:case 23:return e.lanes=0,Ts(t,e,n)}return Ws(t,e,n)}(t,e,n);bs=0!==(131072&t.flags)}else bs=!1,io&&0!==(1048576&e.flags)&&Qi(e,qi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gs(t,e),t=e.pendingProps;var i=Pi(e,Oi.current);ko(e,n),i=ga(null,e,r,t,i,n);var a=ya();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ii(r)?(a=!0,Li(e)):a=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Fo(e),i.updater=is,e.stateNode=i,i._reactInternals=e,cs(e,r,t,n),e=Os(null,e,r,!0,a,n)):(e.tag=0,io&&a&&to(e),xs(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Gs(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return Il(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===O)return 11;if(t===P)return 14}return 2}(r),t=ns(r,t),i){case 0:e=As(null,e,r,t,n);break t;case 1:e=Ms(null,e,r,t,n);break t;case 11:e=_s(null,e,r,t,n);break t;case 14:e=ws(null,e,r,ns(r.type,t),n);break t}throw Error(o(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,As(t,e,r,i=e.elementType===r?i:ns(r,i),n);case 1:return r=e.type,i=e.pendingProps,Ms(t,e,r,i=e.elementType===r?i:ns(r,i),n);case 3:t:{if(Cs(e),null===t)throw Error(o(387));r=e.pendingProps,i=(a=e.memoizedState).element,jo(t,e),Go(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=ks(t,e,r,n,i=ls(Error(o(423)),e));break t}if(r!==i){e=ks(t,e,r,n,i=ls(Error(o(424)),e));break t}for(ro=li(e.stateNode.containerInfo.firstChild),no=e,io=!0,oo=null,n=wo(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){e=Ws(t,e,n);break t}xs(t,e,r,n)}e=e.child}return e;case 5:return $o(e),null===t&&lo(e),r=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(e.flags|=32),Es(t,e),xs(t,e,s,n),e.child;case 6:return null===t&&lo(e),null;case 13:return Fs(t,e,n);case 4:return Zo(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=_o(e,null,r,n):xs(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,_s(t,e,r,i=e.elementType===r?i:ns(r,i),n);case 7:return xs(t,e,e.pendingProps,n),e.child;case 8:case 12:return xs(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,Ai(So,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ci.current){e=Ws(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var c=a.dependencies;if(null!==c){s=a.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=Uo(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Co(a.return,n,e),c.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Co(s,n,e),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ko(e,n),r=r(i=Po(i)),e.flags|=1,xs(t,e,r,n),e.child;case 14:return i=ns(r=e.type,e.pendingProps),ws(t,e,r,i=ns(r.type,i),n);case 15:return Ss(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ns(r,i),Gs(t,e),e.tag=1,Ii(r)?(t=!0,Li(e)):t=!1,ko(e,n),as(e,r,i),cs(e,r,i,n),Os(null,e,r,!0,t,n);case 19:return Vs(t,e,n);case 22:return Ts(t,e,n)}throw Error(o(156,e.tag))};var Xl="function"===typeof reportError?reportError:function(t){console.error(t)};function Yl(t){this._internalRoot=t}function Kl(t){this._internalRoot=t}function Zl(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Jl(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function $l(){}function Ql(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var t=Wl(a);s.call(t)}}Gl(e,a,t,i)}else a=function(t,e,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var t=Wl(a);o.call(t)}}var a=Vl(e,r,t,0,null,!1,0,"",$l);return t._reactRootContainer=a,t[fi]=a.current,Vr(8===t.nodeType?t.parentNode:t),ul(),a}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof r){var s=r;r=function(){var t=Wl(c);s.call(t)}}var c=Bl(t,0,!1,null,0,!1,0,"",$l);return t._reactRootContainer=c,t[fi]=c.current,Vr(8===t.nodeType?t.parentNode:t),ul((function(){Gl(e,c,n,r)})),c}(n,e,t,i,r);return Wl(a)}Kl.prototype.render=Yl.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Gl(t,e,null,null)},Kl.prototype.unmount=Yl.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;ul((function(){Gl(null,t,null,null)})),e[fi]=null}},Kl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Te();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ne.length&&0!==e&&e<Ne[n].priority;n++);Ne.splice(n,0,t),0===n&&Fe(t)}},_e=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ve(e,1|n),rl(e,Jt()),0===(6&Oc)&&(Vc=Jt()+500,Vi()))}break;case 13:ul((function(){var e=Do(t,1);if(null!==e){var n=tl();nl(e,t,1,n)}})),ql(t,1)}},we=function(t){if(13===t.tag){var e=Do(t,134217728);if(null!==e)nl(e,t,134217728,tl());ql(t,134217728)}},Se=function(t){if(13===t.tag){var e=el(t),n=Do(t,e);if(null!==n)nl(n,t,e,tl());ql(t,e)}},Te=function(){return be},Ee=function(t,e){var n=be;try{return be=t,e()}finally{be=n}},wt=function(t,e,n){switch(e){case"input":if($(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_i(r);if(!i)throw Error(o(90));X(r),$(r,i)}}}break;case"textarea":ot(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Ot=ll,Ct=ul;var tu={usingClientEntryPoint:!1,Events:[bi,xi,_i,At,Mt,ll]},eu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Ht(t))?null:t.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{ie=ru.inject(nu),oe=ru}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zl(e))throw Error(o(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Zl(t))throw Error(o(299));var n=!1,r="",i=Xl;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Bl(t,1,!1,null,0,n,0,r,i),t[fi]=e.current,Vr(8===t.nodeType?t.parentNode:t),new Yl(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Ht(e))?null:t.stateNode},e.flushSync=function(t){return ul(t)},e.hydrate=function(t,e,n){if(!Jl(e))throw Error(o(200));return Ql(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Zl(t))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Xl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),e=Vl(e,null,t,1,null!=n?n:null,i,0,a,s),t[fi]=e.current,Vr(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Kl(e)},e.render=function(t,e,n){if(!Jl(e))throw Error(o(200));return Ql(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Jl(t))throw Error(o(40));return!!t._reactRootContainer&&(ul((function(){Ql(null,null,t,!1,(function(){t._reactRootContainer=null,t[fi]=null}))})),!0)},e.unstable_batchedUpdates=ll,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jl(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return Ql(t,e,n,!1,r)},e.version="18.3.1-next-f1338f8080-20240426"},4391:(t,e,n)=>{"use strict";var r=n(7950);e.createRoot=r.createRoot,e.hydrateRoot=r.hydrateRoot},7950:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(2730)},4612:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<o(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,a=i>>>1;r<a;){var s=2*(r+1)-1,c=t[s],l=s+1,u=t[l];if(0>o(c,n))l<i&&0>o(u,c)?(t[r]=u,t[l]=n,r=l):(t[r]=c,t[s]=n,r=s);else{if(!(l<i&&0>o(u,n)))break t;t[r]=u,t[l]=n,r=l}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();e.unstable_now=function(){return s.now()-c}}var l=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(t){for(var e=r(u);null!==e;){if(null===e.callback)i(u);else{if(!(e.startTime<=t))break;i(u),e.sortIndex=e.expirationTime,n(l,e)}e=r(u)}}function _(t){if(g=!1,x(t),!m)if(null!==r(l))m=!0,N(w);else{var e=r(u);null!==e&&R(_,e.startTime-t)}}function w(t,n){m=!1,g&&(g=!1,v(A),A=-1),f=!0;var o=p;try{for(x(n),d=r(l);null!==d&&(!(d.expirationTime>n)||t&&!C());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var s=a(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?d.callback=s:d===r(l)&&i(l),x(n)}else i(l);d=r(l)}if(null!==d)var c=!0;else{var h=r(u);null!==h&&R(_,h.startTime-n),c=!1}return c}finally{d=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,T=!1,E=null,A=-1,M=5,O=-1;function C(){return!(e.unstable_now()-O<M)}function k(){if(null!==E){var t=e.unstable_now();O=t;var n=!0;try{n=E(!0,t)}finally{n?S():(T=!1,E=null)}}else T=!1}if("function"===typeof b)S=function(){b(k)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,I=P.port2;P.port1.onmessage=k,S=function(){I.postMessage(null)}}else S=function(){y(k,0)};function N(t){E=t,T||(T=!0,S())}function R(t,n){A=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,N(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(t){switch(p){case 1:case 2:case 3:var e=3;break;default:e=p}var n=p;p=e;try{return t()}finally{p=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=p;p=t;try{return e()}finally{p=n}},e.unstable_scheduleCallback=function(t,i,o){var a=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(t.sortIndex=o,n(u,t),null===r(l)&&t===r(u)&&(g?(v(A),A=-1):g=!0,R(_,o-a))):(t.sortIndex=s,n(l,t),m||f||(m=!0,N(w))),t},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(t){var e=p;return function(){var n=p;p=e;try{return t.apply(this,arguments)}finally{p=n}}}},7067:(t,e,n)=>{"use strict";t.exports=n(4612)},5082:(t,e)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function _(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case u:case h:case o:case s:case a:case p:return t;default:switch(t=t&&t.$$typeof){case l:case d:case g:case m:case c:return t;default:return e}}case i:return e}}}function w(t){return _(t)===h}e.AsyncMode=u,e.ConcurrentMode=h,e.ContextConsumer=l,e.ContextProvider=c,e.Element=r,e.ForwardRef=d,e.Fragment=o,e.Lazy=g,e.Memo=m,e.Portal=i,e.Profiler=s,e.StrictMode=a,e.Suspense=p,e.isAsyncMode=function(t){return w(t)||_(t)===u},e.isConcurrentMode=w,e.isContextConsumer=function(t){return _(t)===l},e.isContextProvider=function(t){return _(t)===c},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return _(t)===d},e.isFragment=function(t){return _(t)===o},e.isLazy=function(t){return _(t)===g},e.isMemo=function(t){return _(t)===m},e.isPortal=function(t){return _(t)===i},e.isProfiler=function(t){return _(t)===s},e.isStrictMode=function(t){return _(t)===a},e.isSuspense=function(t){return _(t)===p},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===h||t===s||t===a||t===p||t===f||"object"===typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===m||t.$$typeof===c||t.$$typeof===l||t.$$typeof===d||t.$$typeof===v||t.$$typeof===b||t.$$typeof===x||t.$$typeof===y)},e.typeOf=_},2086:(t,e,n)=>{"use strict";t.exports=n(5082)},7302:(t,e)=>{"use strict";e.ConcurrentRoot=1,e.ContinuousEventPriority=4,e.DefaultEventPriority=16,e.DiscreteEventPriority=1},6958:(t,e,n)=>{t.exports=function(t){var e={},r=n(5043),i=n(8853),o=Object.assign;function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),b=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var x=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var _=Symbol.iterator;function w(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=_&&t[_]||t["@@iterator"])?t:null}function S(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case u:return"Fragment";case l:return"Portal";case d:return"Profiler";case h:return"StrictMode";case g:return"Suspense";case y:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case f:return(t.displayName||"Context")+".Consumer";case p:return(t._context.displayName||"Context")+".Provider";case m:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case v:return null!==(e=t.displayName||null)?e:S(t.type)||"Memo";case b:e=t._payload,t=t._init;try{return S(t(e))}catch(n){}}return null}function T(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S(e);case 8:return e===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function E(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function A(t){if(E(t)!==t)throw Error(a(188))}function M(t){var e=t.alternate;if(!e){if(null===(e=E(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return A(i),t;if(o===r)return A(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,c=i.child;c;){if(c===n){s=!0,n=i,r=o;break}if(c===r){s=!0,r=i,n=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===n){s=!0,n=o,r=i;break}if(c===r){s=!0,r=o,n=i;break}c=c.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}function O(t){return null!==(t=M(t))?C(t):null}function C(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=C(t);if(null!==e)return e;t=t.sibling}return null}function k(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){if(4!==t.tag){var e=k(t);if(null!==e)return e}t=t.sibling}return null}var P,I=Array.isArray,N=t.getPublicInstance,R=t.getRootHostContext,D=t.getChildHostContext,L=t.prepareForCommit,F=t.resetAfterCommit,j=t.createInstance,U=t.appendInitialChild,B=t.finalizeInitialChildren,z=t.prepareUpdate,V=t.shouldSetTextContent,G=t.createTextInstance,W=t.scheduleTimeout,H=t.cancelTimeout,q=t.noTimeout,X=t.isPrimaryRenderer,Y=t.supportsMutation,K=t.supportsPersistence,Z=t.supportsHydration,J=t.getInstanceFromNode,$=t.preparePortalMount,Q=t.getCurrentEventPriority,tt=t.detachDeletedInstance,et=t.supportsMicrotasks,nt=t.scheduleMicrotask,rt=t.supportsTestSelectors,it=t.findFiberRoot,ot=t.getBoundingRect,at=t.getTextContent,st=t.isHiddenSubtree,ct=t.matchAccessibilityRole,lt=t.setFocusIfFocusable,ut=t.setupIntersectionObserver,ht=t.appendChild,dt=t.appendChildToContainer,pt=t.commitTextUpdate,ft=t.commitMount,mt=t.commitUpdate,gt=t.insertBefore,yt=t.insertInContainerBefore,vt=t.removeChild,bt=t.removeChildFromContainer,xt=t.resetTextContent,_t=t.hideInstance,wt=t.hideTextInstance,St=t.unhideInstance,Tt=t.unhideTextInstance,Et=t.clearContainer,At=t.cloneInstance,Mt=t.createContainerChildSet,Ot=t.appendChildToContainerChildSet,Ct=t.finalizeContainerChildren,kt=t.replaceContainerChildren,Pt=t.cloneHiddenInstance,It=t.cloneHiddenTextInstance,Nt=t.canHydrateInstance,Rt=t.canHydrateTextInstance,Dt=t.canHydrateSuspenseInstance,Lt=t.isSuspenseInstancePending,Ft=t.isSuspenseInstanceFallback,jt=t.registerSuspenseInstanceRetry,Ut=t.getNextHydratableSibling,Bt=t.getFirstHydratableChild,zt=t.getFirstHydratableChildWithinContainer,Vt=t.getFirstHydratableChildWithinSuspenseInstance,Gt=t.hydrateInstance,Wt=t.hydrateTextInstance,Ht=t.hydrateSuspenseInstance,qt=t.getNextHydratableInstanceAfterSuspenseInstance,Xt=t.commitHydratedContainer,Yt=t.commitHydratedSuspenseInstance,Kt=t.clearSuspenseBoundary,Zt=t.clearSuspenseBoundaryFromContainer,Jt=t.shouldDeleteUnhydratedTailInstances,$t=t.didNotMatchHydratedContainerTextInstance,Qt=t.didNotMatchHydratedTextInstance;function te(t){if(void 0===P)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);P=e&&e[1]||""}return"\n"+P+t}var ee=!1;function ne(t,e){if(!t||ee)return"";ee=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var c="\n"+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}}while(1<=a&&0<=s);break}}}finally{ee=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?te(t):""}var re=Object.prototype.hasOwnProperty,ie=[],oe=-1;function ae(t){return{current:t}}function se(t){0>oe||(t.current=ie[oe],ie[oe]=null,oe--)}function ce(t,e){oe++,ie[oe]=t.current,t.current=e}var le={},ue=ae(le),he=ae(!1),de=le;function pe(t,e){var n=t.type.contextTypes;if(!n)return le;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function fe(t){return null!==(t=t.childContextTypes)&&void 0!==t}function me(){se(he),se(ue)}function ge(t,e,n){if(ue.current!==le)throw Error(a(168));ce(ue,e),ce(he,n)}function ye(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(a(108,T(t)||"Unknown",i));return o({},n,r)}function ve(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||le,de=ue.current,ce(ue,t),ce(he,he.current),!0}function be(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=ye(t,e,de),r.__reactInternalMemoizedMergedChildContext=t,se(he),se(ue),ce(ue,t)):se(he),ce(he,n)}var xe=Math.clz32?Math.clz32:function(t){return 0===(t>>>=0)?32:31-(_e(t)/we|0)|0},_e=Math.log,we=Math.LN2;var Se=64,Te=4194304;function Ee(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ae(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=Ee(s):0!==(o&=a)&&(r=Ee(o))}else 0!==(a=n&~i)?r=Ee(a):0!==o&&(r=Ee(o));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(o=e&-e)||16===i&&0!==(4194240&o)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-xe(e)),r|=t[n],e&=~i;return r}function Me(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function Oe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function Ce(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ke(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-xe(e)]=n}function Pe(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xe(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ie=0;function Ne(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var Re=i.unstable_scheduleCallback,De=i.unstable_cancelCallback,Le=i.unstable_shouldYield,Fe=i.unstable_requestPaint,je=i.unstable_now,Ue=i.unstable_ImmediatePriority,Be=i.unstable_UserBlockingPriority,ze=i.unstable_NormalPriority,Ve=i.unstable_IdlePriority,Ge=null,We=null;var He="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},qe=null,Xe=!1,Ye=!1;function Ke(t){null===qe?qe=[t]:qe.push(t)}function Ze(){if(!Ye&&null!==qe){Ye=!0;var t=0,e=Ie;try{var n=qe;for(Ie=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}qe=null,Xe=!1}catch(i){throw null!==qe&&(qe=qe.slice(t+1)),Re(Ue,Ze),i}finally{Ie=e,Ye=!1}}return null}var Je=s.ReactCurrentBatchConfig;function $e(t,e){if(He(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(e,i)||!He(t[i],e[i]))return!1}return!0}function Qe(t){switch(t.tag){case 5:return te(t.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return t=ne(t.type,!1);case 11:return t=ne(t.type.render,!1);case 1:return t=ne(t.type,!0);default:return""}}function tn(t,e){if(t&&t.defaultProps){for(var n in e=o({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var en=ae(null),nn=null,rn=null,on=null;function an(){on=rn=nn=null}function sn(t,e,n){X?(ce(en,e._currentValue),e._currentValue=n):(ce(en,e._currentValue2),e._currentValue2=n)}function cn(t){var e=en.current;se(en),X?t._currentValue=e:t._currentValue2=e}function ln(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function un(t,e){nn=t,on=rn=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Li=!0),t.firstContext=null)}function hn(t){var e=X?t._currentValue:t._currentValue2;if(on!==t)if(t={context:t,memoizedValue:e,next:null},null===rn){if(null===nn)throw Error(a(308));rn=t,nn.dependencies={lanes:0,firstContext:t}}else rn=rn.next=t;return e}var dn=null,pn=!1;function fn(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mn(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yn(t,e){var n=t.updateQueue;null!==n&&(n=n.shared,null!==Ko&&0!==(1&t.mode)&&0===(2&Yo)?(null===(t=n.interleaved)?(e.next=e,null===dn?dn=[n]:dn.push(n)):(e.next=t.next,t.next=e),n.interleaved=e):(null===(t=n.pending)?e.next=e:(e.next=t.next,t.next=e),n.pending=e))}function vn(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,Pe(t,n)}}function bn(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xn(t,e,n,r){var i=t.updateQueue;pn=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,c=i.shared.pending;if(null!==c){i.shared.pending=null;var l=c,u=l.next;l.next=null,null===s?a=u:s.next=u,s=l;var h=t.alternate;null!==h&&((c=(h=h.updateQueue).lastBaseUpdate)!==s&&(null===c?h.firstBaseUpdate=u:c.next=u,h.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(s=0,h=u=l=null,c=a;;){var p=c.lane,f=c.eventTime;if((r&p)===p){null!==h&&(h=h.next={eventTime:f,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});t:{var m=t,g=c;switch(p=e,f=n,g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(f,d,p);break t}d=m;break t;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(p="function"===typeof(m=g.payload)?m.call(f,d,p):m)||void 0===p)break t;d=o({},d,p);break t;case 2:pn=!0}}null!==c.callback&&0!==c.lane&&(t.flags|=64,null===(p=i.effects)?i.effects=[c]:p.push(c))}else f={eventTime:f,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},null===h?(u=h=f,l=d):h=h.next=f,s|=p;if(null===(c=c.next)){if(null===(c=i.shared.pending))break;c=(p=c).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===h&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,null!==(e=i.shared.interleaved)){i=e;do{s|=i.lane,i=i.next}while(i!==e)}else null===a&&(i.shared.lanes=0);na|=s,t.lanes=s,t.memoizedState=d}}function _n(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var wn=(new r.Component).refs;function Sn(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:o({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Tn={isMounted:function(t){return!!(t=t._reactInternals)&&E(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_a(),i=wa(t),o=gn(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),yn(t,o),null!==(e=Sa(t,i,r))&&vn(e,t,i)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_a(),i=wa(t),o=gn(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),yn(t,o),null!==(e=Sa(t,i,r))&&vn(e,t,i)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_a(),r=wa(t),i=gn(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),yn(t,i),null!==(e=Sa(t,r,n))&&vn(e,t,r)}};function En(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!$e(n,r)||!$e(i,o))}function An(t,e,n){var r=!1,i=le,o=e.contextType;return"object"===typeof o&&null!==o?o=hn(o):(i=fe(e)?de:ue.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?pe(t,i):le),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Tn,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Mn(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tn.enqueueReplaceState(e,e.state,null)}function On(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=wn,fn(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=hn(o):(o=fe(e)?de:ue.current,i.context=pe(t,o)),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(Sn(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Tn.enqueueReplaceState(i,i.state,null),xn(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}var Cn=[],kn=0,Pn=null,In=0,Nn=[],Rn=0,Dn=null,Ln=1,Fn="";function jn(t,e){Cn[kn++]=In,Cn[kn++]=Pn,Pn=t,In=e}function Un(t,e,n){Nn[Rn++]=Ln,Nn[Rn++]=Fn,Nn[Rn++]=Dn,Dn=t;var r=Ln;t=Fn;var i=32-xe(r)-1;r&=~(1<<i),n+=1;var o=32-xe(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ln=1<<32-xe(e)+i|n<<i|r,Fn=o+t}else Ln=1<<o|n<<i|r,Fn=t}function Bn(t){null!==t.return&&(jn(t,1),Un(t,1,0))}function zn(t){for(;t===Pn;)Pn=Cn[--kn],Cn[kn]=null,In=Cn[--kn],Cn[kn]=null;for(;t===Dn;)Dn=Nn[--Rn],Nn[Rn]=null,Fn=Nn[--Rn],Nn[Rn]=null,Ln=Nn[--Rn],Nn[Rn]=null}var Vn=null,Gn=null,Wn=!1,Hn=!1,qn=null;function Xn(t,e){var n=$a(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function Yn(t,e){switch(t.tag){case 5:return null!==(e=Nt(e,t.type,t.pendingProps))&&(t.stateNode=e,Vn=t,Gn=Bt(e),!0);case 6:return null!==(e=Rt(e,t.pendingProps))&&(t.stateNode=e,Vn=t,Gn=null,!0);case 13:if(null!==(e=Dt(e))){var n=null!==Dn?{id:Ln,overflow:Fn}:null;return t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=$a(18,null,null,0)).stateNode=e,n.return=t,t.child=n,Vn=t,Gn=null,!0}return!1;default:return!1}}function Kn(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function Zn(t){if(Wn){var e=Gn;if(e){var n=e;if(!Yn(t,e)){if(Kn(t))throw Error(a(418));e=Ut(n);var r=Vn;e&&Yn(t,e)?Xn(r,n):(t.flags=-4097&t.flags|2,Wn=!1,Vn=t)}}else{if(Kn(t))throw Error(a(418));t.flags=-4097&t.flags|2,Wn=!1,Vn=t}}}function Jn(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Vn=t}function $n(t){if(!Z||t!==Vn)return!1;if(!Wn)return Jn(t),Wn=!0,!1;if(3!==t.tag&&(5!==t.tag||Jt(t.type)&&!V(t.type,t.memoizedProps))){var e=Gn;if(e){if(Kn(t)){for(t=Gn;t;)t=Ut(t);throw Error(a(418))}for(;e;)Xn(t,e),e=Ut(e)}}if(Jn(t),13===t.tag){if(!Z)throw Error(a(316));if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));Gn=qt(t)}else Gn=Vn?Ut(t.stateNode):null;return!0}function Qn(){Z&&(Gn=Vn=null,Hn=Wn=!1)}function tr(t){null===qn?qn=[t]:qn.push(t)}function er(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=r,o=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=i.refs;e===wn&&(e=i.refs={}),null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function nr(t,e){throw t=Object.prototype.toString.call(e),Error(a(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rr(t){return(0,t._init)(t._payload)}function ir(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=ts(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function h(t,e,n,r){return null===e||6!==e.tag?((e=is(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function d(t,e,n,r){var o=n.type;return o===u?f(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===b&&rr(o)===e.type)?((r=i(e,n.props)).ref=er(t,e,n),r.return=t,r):((r=es(n.type,n.key,n.props,null,t.mode,r)).ref=er(t,e,n),r.return=t,r)}function p(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=os(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function f(t,e,n,r,o){return null===e||7!==e.tag?((e=ns(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function m(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=is(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case c:return(n=es(e.type,e.key,e.props,null,t.mode,n)).ref=er(t,null,e),n.return=t,n;case l:return(e=os(e,t.mode,n)).return=t,e;case b:return m(t,(0,e._init)(e._payload),n)}if(I(e)||w(e))return(e=ns(e,t.mode,n,null)).return=t,e;nr(t,e)}return null}function g(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:h(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case c:return n.key===i?d(t,e,n,r):null;case l:return n.key===i?p(t,e,n,r):null;case b:return g(t,e,(i=n._init)(n._payload),r)}if(I(n)||w(n))return null!==i?null:f(t,e,n,r,null);nr(t,n)}return null}function y(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return h(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case c:return d(e,t=t.get(null===r.key?n:r.key)||null,r,i);case l:return p(e,t=t.get(null===r.key?n:r.key)||null,r,i);case b:return y(t,e,n,(0,r._init)(r._payload),i)}if(I(r)||w(r))return f(e,t=t.get(n)||null,r,i,null);nr(e,r)}return null}function v(i,a,s,c){for(var l=null,u=null,h=a,d=a=0,p=null;null!==h&&d<s.length;d++){h.index>d?(p=h,h=null):p=h.sibling;var f=g(i,h,s[d],c);if(null===f){null===h&&(h=p);break}t&&h&&null===f.alternate&&e(i,h),a=o(f,a,d),null===u?l=f:u.sibling=f,u=f,h=p}if(d===s.length)return n(i,h),Wn&&jn(i,d),l;if(null===h){for(;d<s.length;d++)null!==(h=m(i,s[d],c))&&(a=o(h,a,d),null===u?l=h:u.sibling=h,u=h);return Wn&&jn(i,d),l}for(h=r(i,h);d<s.length;d++)null!==(p=y(h,i,d,s[d],c))&&(t&&null!==p.alternate&&h.delete(null===p.key?d:p.key),a=o(p,a,d),null===u?l=p:u.sibling=p,u=p);return t&&h.forEach((function(t){return e(i,t)})),Wn&&jn(i,d),l}function x(i,s,c,l){var u=w(c);if("function"!==typeof u)throw Error(a(150));if(null==(c=u.call(c)))throw Error(a(151));for(var h=u=null,d=s,p=s=0,f=null,v=c.next();null!==d&&!v.done;p++,v=c.next()){d.index>p?(f=d,d=null):f=d.sibling;var b=g(i,d,v.value,l);if(null===b){null===d&&(d=f);break}t&&d&&null===b.alternate&&e(i,d),s=o(b,s,p),null===h?u=b:h.sibling=b,h=b,d=f}if(v.done)return n(i,d),Wn&&jn(i,p),u;if(null===d){for(;!v.done;p++,v=c.next())null!==(v=m(i,v.value,l))&&(s=o(v,s,p),null===h?u=v:h.sibling=v,h=v);return Wn&&jn(i,p),u}for(d=r(i,d);!v.done;p++,v=c.next())null!==(v=y(d,i,p,v.value,l))&&(t&&null!==v.alternate&&d.delete(null===v.key?p:v.key),s=o(v,s,p),null===h?u=v:h.sibling=v,h=v);return t&&d.forEach((function(t){return e(i,t)})),Wn&&jn(i,p),u}return function t(r,o,a,h){if("object"===typeof a&&null!==a&&a.type===u&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case c:t:{for(var d=a.key,p=o;null!==p;){if(p.key===d){if((d=a.type)===u){if(7===p.tag){n(r,p.sibling),(o=i(p,a.props.children)).return=r,r=o;break t}}else if(p.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===b&&rr(d)===p.type){n(r,p.sibling),(o=i(p,a.props)).ref=er(r,p,a),o.return=r,r=o;break t}n(r,p);break}e(r,p),p=p.sibling}a.type===u?((o=ns(a.props.children,r.mode,h,a.key)).return=r,r=o):((h=es(a.type,a.key,a.props,null,r.mode,h)).ref=er(r,o,a),h.return=r,r=h)}return s(r);case l:t:{for(p=a.key;null!==o;){if(o.key===p){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break t}n(r,o);break}e(r,o),o=o.sibling}(o=os(a,r.mode,h)).return=r,r=o}return s(r);case b:return t(r,o,(p=a._init)(a._payload),h)}if(I(a))return v(r,o,a,h);if(w(a))return x(r,o,a,h);nr(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=is(a,r.mode,h)).return=r,r=o),s(r)):n(r,o)}}var or=ir(!0),ar=ir(!1),sr={},cr=ae(sr),lr=ae(sr),ur=ae(sr);function hr(t){if(t===sr)throw Error(a(174));return t}function dr(t,e){ce(ur,e),ce(lr,t),ce(cr,sr),t=R(e),se(cr),ce(cr,t)}function pr(){se(cr),se(lr),se(ur)}function fr(t){var e=hr(ur.current),n=hr(cr.current);n!==(e=D(n,t.type,e))&&(ce(lr,t),ce(cr,e))}function mr(t){lr.current===t&&(se(cr),se(lr))}var gr=ae(0);function yr(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Lt(n)||Ft(n)))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vr=[];function br(){for(var t=0;t<vr.length;t++){var e=vr[t];X?e._workInProgressVersionPrimary=null:e._workInProgressVersionSecondary=null}vr.length=0}var xr=s.ReactCurrentDispatcher,_r=s.ReactCurrentBatchConfig,wr=0,Sr=null,Tr=null,Er=null,Ar=!1,Mr=!1,Or=0,Cr=0;function kr(){throw Error(a(321))}function Pr(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!He(t[n],e[n]))return!1;return!0}function Ir(t,e,n,r,i,o){if(wr=o,Sr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xr.current=null===t||null===t.memoizedState?fi:mi,t=n(r,i),Mr){o=0;do{if(Mr=!1,Or=0,25<=o)throw Error(a(301));o+=1,Er=Tr=null,e.updateQueue=null,xr.current=gi,t=n(r,i)}while(Mr)}if(xr.current=pi,e=null!==Tr&&null!==Tr.next,wr=0,Er=Tr=Sr=null,Ar=!1,e)throw Error(a(300));return t}function Nr(){var t=0!==Or;return Or=0,t}function Rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Er?Sr.memoizedState=Er=t:Er=Er.next=t,Er}function Dr(){if(null===Tr){var t=Sr.alternate;t=null!==t?t.memoizedState:null}else t=Tr.next;var e=null===Er?Sr.memoizedState:Er.next;if(null!==e)Er=e,Tr=t;else{if(null===t)throw Error(a(310));t={memoizedState:(Tr=t).memoizedState,baseState:Tr.baseState,baseQueue:Tr.baseQueue,queue:Tr.queue,next:null},null===Er?Sr.memoizedState=Er=t:Er=Er.next=t}return Er}function Lr(t,e){return"function"===typeof e?e(t):e}function Fr(t){var e=Dr(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=Tr,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var c=s=null,l=null,u=o;do{var h=u.lane;if((wr&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,s=r):l=l.next=d,Sr.lanes|=h,na|=h}u=u.next}while(null!==u&&u!==o);null===l?s=r:l.next=c,He(r,e.memoizedState)||(Li=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{o=i.lane,Sr.lanes|=o,na|=o,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jr(t){var e=Dr(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);He(o,e.memoizedState)||(Li=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Ur(){}function Br(t,e){var n=Sr,r=Dr(),i=e(),o=!He(r.memoizedState,i);if(o&&(r.memoizedState=i,Li=!0),r=r.queue,Jr(Gr.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||null!==Er&&1&Er.memoizedState.tag){if(n.flags|=2048,qr(9,Vr.bind(null,n,r,i,e),void 0,null),null===Ko)throw Error(a(349));0!==(30&wr)||zr(n,e,i)}return i}function zr(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=Sr.updateQueue)?(e={lastEffect:null,stores:null},Sr.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Vr(t,e,n,r){e.value=n,e.getSnapshot=r,Wr(e)&&Sa(t,1,-1)}function Gr(t,e,n){return n((function(){Wr(e)&&Sa(t,1,-1)}))}function Wr(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!He(t,n)}catch(r){return!0}}function Hr(t){var e=Rr();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:t},e.queue=t,t=t.dispatch=ci.bind(null,Sr,t),[e.memoizedState,t]}function qr(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Sr.updateQueue)?(e={lastEffect:null,stores:null},Sr.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Xr(){return Dr().memoizedState}function Yr(t,e,n,r){var i=Rr();Sr.flags|=t,i.memoizedState=qr(1|e,n,void 0,void 0===r?null:r)}function Kr(t,e,n,r){var i=Dr();r=void 0===r?null:r;var o=void 0;if(null!==Tr){var a=Tr.memoizedState;if(o=a.destroy,null!==r&&Pr(r,a.deps))return void(i.memoizedState=qr(e,n,o,r))}Sr.flags|=t,i.memoizedState=qr(1|e,n,o,r)}function Zr(t,e){return Yr(8390656,8,t,e)}function Jr(t,e){return Kr(2048,8,t,e)}function $r(t,e){return Kr(4,2,t,e)}function Qr(t,e){return Kr(4,4,t,e)}function ti(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function ei(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Kr(4,4,ti.bind(null,e,t),n)}function ni(){}function ri(t,e){var n=Dr();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Pr(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ii(t,e){var n=Dr();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Pr(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function oi(t,e){var n=Ie;Ie=0!==n&&4>n?n:4,t(!0);var r=_r.transition;_r.transition={};try{t(!1),e()}finally{Ie=n,_r.transition=r}}function ai(){return Dr().memoizedState}function si(t,e,n){var r=wa(t);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},li(t)?ui(e,n):(hi(t,e,n),null!==(t=Sa(t,r,n=_a()))&&di(t,e,r))}function ci(t,e,n){var r=wa(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(li(t))ui(e,i);else{hi(t,e,i);var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,He(s,a))return}catch(c){}null!==(t=Sa(t,r,n=_a()))&&di(t,e,r)}}function li(t){var e=t.alternate;return t===Sr||null!==e&&e===Sr}function ui(t,e){Mr=Ar=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hi(t,e,n){null!==Ko&&0!==(1&t.mode)&&0===(2&Yo)?(null===(t=e.interleaved)?(n.next=n,null===dn?dn=[e]:dn.push(e)):(n.next=t.next,t.next=n),e.interleaved=n):(null===(t=e.pending)?n.next=n:(n.next=t.next,t.next=n),e.pending=n)}function di(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,Pe(t,n)}}var pi={readContext:hn,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useInsertionEffect:kr,useLayoutEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useMutableSource:kr,useSyncExternalStore:kr,useId:kr,unstable_isNewReconciler:!1},fi={readContext:hn,useCallback:function(t,e){return Rr().memoizedState=[t,void 0===e?null:e],t},useContext:hn,useEffect:Zr,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Yr(4194308,4,ti.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yr(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yr(4,2,t,e)},useMemo:function(t,e){var n=Rr();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rr();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=si.bind(null,Sr,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Rr().memoizedState=t},useState:Hr,useDebugValue:ni,useDeferredValue:function(t){var e=Hr(t),n=e[0],r=e[1];return Zr((function(){var e=_r.transition;_r.transition={};try{r(t)}finally{_r.transition=e}}),[t]),n},useTransition:function(){var t=Hr(!1),e=t[0];return t=oi.bind(null,t[1]),Rr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Sr,i=Rr();if(Wn){if(void 0===n)throw Error(a(407));n=n()}else{if(n=e(),null===Ko)throw Error(a(349));0!==(30&wr)||zr(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Zr(Gr.bind(null,r,o,t),[t]),r.flags|=2048,qr(9,Vr.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Rr(),e=Ko.identifierPrefix;if(Wn){var n=Fn;e=":"+e+"R"+(n=(Ln&~(1<<32-xe(Ln)-1)).toString(32)+n),0<(n=Or++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=Cr++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mi={readContext:hn,useCallback:ri,useContext:hn,useEffect:Jr,useImperativeHandle:ei,useInsertionEffect:$r,useLayoutEffect:Qr,useMemo:ii,useReducer:Fr,useRef:Xr,useState:function(){return Fr(Lr)},useDebugValue:ni,useDeferredValue:function(t){var e=Fr(Lr),n=e[0],r=e[1];return Jr((function(){var e=_r.transition;_r.transition={};try{r(t)}finally{_r.transition=e}}),[t]),n},useTransition:function(){return[Fr(Lr)[0],Dr().memoizedState]},useMutableSource:Ur,useSyncExternalStore:Br,useId:ai,unstable_isNewReconciler:!1},gi={readContext:hn,useCallback:ri,useContext:hn,useEffect:Jr,useImperativeHandle:ei,useInsertionEffect:$r,useLayoutEffect:Qr,useMemo:ii,useReducer:jr,useRef:Xr,useState:function(){return jr(Lr)},useDebugValue:ni,useDeferredValue:function(t){var e=jr(Lr),n=e[0],r=e[1];return Jr((function(){var e=_r.transition;_r.transition={};try{r(t)}finally{_r.transition=e}}),[t]),n},useTransition:function(){return[jr(Lr)[0],Dr().memoizedState]},useMutableSource:Ur,useSyncExternalStore:Br,useId:ai,unstable_isNewReconciler:!1};function yi(t,e){try{var n="",r=e;do{n+=Qe(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i}}function vi(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var bi,xi,_i,wi,Si="function"===typeof WeakMap?WeakMap:Map;function Ti(t,e,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ha||(ha=!0,da=r),vi(0,e)},n}function Ei(t,e,n){(n=gn(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){vi(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){vi(0,e),"function"!==typeof r&&(null===pa?pa=new Set([this]):pa.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function Ai(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new Si;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=qa.bind(null,t,e,n),e.then(t,t))}function Mi(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function Oi(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=gn(-1,1)).tag=2,yn(n,e))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}function Ci(t){t.flags|=4}function ki(t,e){if(null!==t&&t.child===e.child)return!0;if(0!==(16&e.flags))return!1;for(t=e.child;null!==t;){if(0!==(12854&t.flags)||0!==(12854&t.subtreeFlags))return!1;t=t.sibling}return!0}if(Y)bi=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)U(t,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},xi=function(){},_i=function(t,e,n,r,i){if((t=t.memoizedProps)!==r){var o=e.stateNode,a=hr(cr.current);n=z(o,n,t,r,i,a),(e.updateQueue=n)&&Ci(e)}},wi=function(t,e,n,r){n!==r&&Ci(e)};else if(K){bi=function(t,e,n,r){for(var i=e.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Pt(o,i.type,i.memoizedProps,i)),U(t,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=It(o,i.memoizedProps,i)),U(t,o);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(o=i.child)&&(o.return=i),bi(t,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Pi=function(t,e,n,r){for(var i=e.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Pt(o,i.type,i.memoizedProps,i)),Ot(t,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=It(o,i.memoizedProps,i)),Ot(t,o);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(o=i.child)&&(o.return=i),Pi(t,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};xi=function(t,e){var n=e.stateNode;if(!ki(t,e)){t=n.containerInfo;var r=Mt(t);Pi(r,e,!1,!1),n.pendingChildren=r,Ci(e),Ct(t,r)}},_i=function(t,e,n,r,i){var o=t.stateNode,a=t.memoizedProps;if((t=ki(t,e))&&a===r)e.stateNode=o;else{var s=e.stateNode,c=hr(cr.current),l=null;a!==r&&(l=z(s,n,a,r,i,c)),t&&null===l?e.stateNode=o:(o=At(o,l,n,a,r,e,t,s),B(o,n,r,i,c)&&Ci(e),e.stateNode=o,t?Ci(e):bi(o,e,!1,!1))}},wi=function(t,e,n,r){n!==r?(t=hr(ur.current),n=hr(cr.current),e.stateNode=G(r,t,n,e),Ci(e)):e.stateNode=t.stateNode}}else xi=function(){},_i=function(){},wi=function(){};function Ii(t,e){if(!Wn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ni(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ri(t,e,n){var r=e.pendingProps;switch(zn(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ni(e),null;case 1:case 17:return fe(e.type)&&me(),Ni(e),null;case 3:return r=e.stateNode,pr(),se(he),se(ue),br(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||($n(e)?Ci(e):null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==qn&&(Oa(qn),qn=null))),xi(t,e),Ni(e),null;case 5:mr(e),n=hr(ur.current);var i=e.type;if(null!==t&&null!=e.stateNode)_i(t,e,i,r,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(a(166));return Ni(e),null}if(t=hr(cr.current),$n(e)){if(!Z)throw Error(a(175));t=Gt(e.stateNode,e.type,e.memoizedProps,n,t,e,!Hn),e.updateQueue=t,null!==t&&Ci(e)}else{var o=j(i,r,n,t,e);bi(o,e,!1,!1),e.stateNode=o,B(o,i,r,n,t)&&Ci(e)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Ni(e),null;case 6:if(t&&null!=e.stateNode)wi(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(a(166));if(t=hr(ur.current),n=hr(cr.current),$n(e)){if(!Z)throw Error(a(176));if(t=e.stateNode,r=e.memoizedProps,(n=Wt(t,r,e,!Hn))&&null!==(i=Vn))switch(o=0!==(1&i.mode),i.tag){case 3:$t(i.stateNode.containerInfo,t,r,o);break;case 5:Qt(i.type,i.memoizedProps,i.stateNode,t,r,o)}n&&Ci(e)}else e.stateNode=G(r,t,n,e)}return Ni(e),null;case 13:if(se(gr),r=e.memoizedState,Wn&&null!==Gn&&0!==(1&e.mode)&&0===(128&e.flags)){for(t=Gn;t;)t=Ut(t);return Qn(),e.flags|=98560,e}if(null!==r&&null!==r.dehydrated){if(r=$n(e),null===t){if(!r)throw Error(a(318));if(!Z)throw Error(a(344));if(!(t=null!==(t=e.memoizedState)?t.dehydrated:null))throw Error(a(317));Ht(t,e)}else Qn(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;return Ni(e),null}return null!==qn&&(Oa(qn),qn=null),0!==(128&e.flags)?(e.lanes=n,e):(r=null!==r,n=!1,null===t?$n(e):n=null!==t.memoizedState,r&&!n&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&gr.current)?0===ta&&(ta=3):La())),null!==e.updateQueue&&(e.flags|=4),Ni(e),null);case 4:return pr(),xi(t,e),null===t&&$(e.stateNode.containerInfo),Ni(e),null;case 10:return cn(e.type._context),Ni(e),null;case 19:if(se(gr),null===(i=e.memoizedState))return Ni(e),null;if(r=0!==(128&e.flags),null===(o=i.rendering))if(r)Ii(i,!1);else{if(0!==ta||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(o=yr(t))){for(e.flags|=128,Ii(i,!1),null!==(t=o.updateQueue)&&(e.updateQueue=t,e.flags|=4),e.subtreeFlags=0,t=n,r=e.child;null!==r;)i=t,(n=r).flags&=14680066,null===(o=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return ce(gr,1&gr.current|2),e.child}t=t.sibling}null!==i.tail&&je()>ca&&(e.flags|=128,r=!0,Ii(i,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=yr(o))){if(e.flags|=128,r=!0,null!==(t=t.updateQueue)&&(e.updateQueue=t,e.flags|=4),Ii(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!Wn)return Ni(e),null}else 2*je()-i.renderingStartTime>ca&&1073741824!==n&&(e.flags|=128,r=!0,Ii(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(null!==(t=i.last)?t.sibling=o:e.child=o,i.last=o)}return null!==i.tail?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=je(),e.sibling=null,t=gr.current,ce(gr,r?1&t|2:1&t),e):(Ni(e),null);case 22:case 23:return Ia(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&$o)&&(Ni(e),Y&&6&e.subtreeFlags&&(e.flags|=8192)):Ni(e),null;case 24:case 25:return null}throw Error(a(156,e.tag))}var Di=s.ReactCurrentOwner,Li=!1;function Fi(t,e,n,r){e.child=null===t?ar(e,null,n,r):or(e,t.child,n,r)}function ji(t,e,n,r,i){n=n.render;var o=e.ref;return un(e,i),r=Ir(t,e,n,r,o,i),n=Nr(),null===t||Li?(Wn&&n&&Bn(e),e.flags|=1,Fi(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,io(t,e,i))}function Ui(t,e,n,r,i){if(null===t){var o=n.type;return"function"!==typeof o||Qa(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=es(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Bi(t,e,o,r,i))}if(o=t.child,0===(t.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:$e)(a,r)&&t.ref===e.ref)return io(t,e,i)}return e.flags|=1,(t=ts(o,r)).ref=e.ref,t.return=e,e.child=t}function Bi(t,e,n,r,i){if(null!==t&&$e(t.memoizedProps,r)&&t.ref===e.ref){if(Li=!1,0===(t.lanes&i))return e.lanes=t.lanes,io(t,e,i);0!==(131072&t.flags)&&(Li=!0)}return Gi(t,e,n,r,i)}function zi(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null},ce(Qo,$o),$o|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null},e.updateQueue=null,ce(Qo,$o),$o|=t,null;e.memoizedState={baseLanes:0,cachePool:null},r=null!==o?o.baseLanes:n,ce(Qo,$o),$o|=r}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,ce(Qo,$o),$o|=r;return Fi(t,e,i,n),e.child}function Vi(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gi(t,e,n,r,i){var o=fe(n)?de:ue.current;return o=pe(e,o),un(e,i),n=Ir(t,e,n,r,o,i),r=Nr(),null===t||Li?(Wn&&r&&Bn(e),e.flags|=1,Fi(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,io(t,e,i))}function Wi(t,e,n,r,i){if(fe(n)){var o=!0;ve(e)}else o=!1;if(un(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),An(e,n,r),On(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var c=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=hn(l):l=pe(e,l=fe(n)?de:ue.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||c!==l)&&Mn(e,a,r,l),pn=!1;var d=e.memoizedState;a.state=d,xn(e,r,a,i),c=e.memoizedState,s!==r||d!==c||he.current||pn?("function"===typeof u&&(Sn(e,n,u,r),c=e.memoizedState),(s=pn||En(e,n,s,r,d,c,l))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=l,r=s):("function"===typeof a.componentDidMount&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,mn(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:tn(e.type,s),a.props=l,h=e.pendingProps,d=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=hn(c):c=pe(e,c=fe(n)?de:ue.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==c)&&Mn(e,a,r,c),pn=!1,d=e.memoizedState,a.state=d,xn(e,r,a,i);var f=e.memoizedState;s!==h||d!==f||he.current||pn?("function"===typeof p&&(Sn(e,n,p,r),f=e.memoizedState),(l=pn||En(e,n,l,r,d,f,c)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Hi(t,e,n,r,o,i)}function Hi(t,e,n,r,i,o){Vi(t,e);var a=0!==(128&e.flags);if(!r&&!a)return i&&be(e,n,!1),io(t,e,o);r=e.stateNode,Di.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=or(e,t.child,null,o),e.child=or(e,null,s,o)):Fi(t,e,s,o),e.memoizedState=r.state,i&&be(e,n,!0),e.child}function qi(t){var e=t.stateNode;e.pendingContext?ge(0,e.pendingContext,e.pendingContext!==e.context):e.context&&ge(0,e.context,!1),dr(t,e.containerInfo)}function Xi(t,e,n,r,i){return Qn(),tr(i),e.flags|=256,Fi(t,e,n,r),e.child}var Yi={dehydrated:null,treeContext:null,retryLane:0};function Ki(t){return{baseLanes:t,cachePool:null}}function Zi(t,e,n){var r,i=e.pendingProps,o=gr.current,s=!1,c=0!==(128&e.flags);if((r=c)||(r=(null===t||null!==t.memoizedState)&&0!==(2&o)),r?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(o|=1),ce(gr,1&o),null===t)return Zn(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:Ft(t)?e.lanes=8:e.lanes=1073741824,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=rs(o,i,0,null),t=ns(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ki(n),e.memoizedState=Yi,t):Ji(e,o));if(null!==(o=t.memoizedState)){if(null!==(r=o.dehydrated)){if(c)return 256&e.flags?(e.flags&=-257,to(t,e,n,Error(a(422)))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(s=i.fallback,o=e.mode,i=rs({mode:"visible",children:i.children},o,0,null),(s=ns(s,o,n,null)).flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,0!==(1&e.mode)&&or(e,t.child,null,n),e.child.memoizedState=Ki(n),e.memoizedState=Yi,s);if(0===(1&e.mode))e=to(t,e,n,null);else if(Ft(r))e=to(t,e,n,Error(a(419)));else if(i=0!==(n&t.childLanes),Li||i){if(null!==(i=Ko)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(i=0!==(s&(i.suspendedLanes|n))?0:s)&&i!==o.retryLane&&(o.retryLane=i,Sa(t,i,-1))}La(),e=to(t,e,n,Error(a(421)))}else Lt(r)?(e.flags|=128,e.child=t.child,e=Ya.bind(null,t),jt(r,e),e=null):(n=o.treeContext,Z&&(Gn=Vt(r),Vn=e,Wn=!0,qn=null,Hn=!1,null!==n&&(Nn[Rn++]=Ln,Nn[Rn++]=Fn,Nn[Rn++]=Dn,Ln=n.id,Fn=n.overflow,Dn=e)),(e=Ji(e,e.pendingProps.children)).flags|=4096);return e}return s?(i=Qi(t,e,i.children,i.fallback,n),s=e.child,o=t.child.memoizedState,s.memoizedState=null===o?Ki(n):{baseLanes:o.baseLanes|n,cachePool:null},s.childLanes=t.childLanes&~n,e.memoizedState=Yi,i):(n=$i(t,e,i.children,n),e.memoizedState=null,n)}return s?(i=Qi(t,e,i.children,i.fallback,n),s=e.child,o=t.child.memoizedState,s.memoizedState=null===o?Ki(n):{baseLanes:o.baseLanes|n,cachePool:null},s.childLanes=t.childLanes&~n,e.memoizedState=Yi,i):(n=$i(t,e,i.children,n),e.memoizedState=null,n)}function Ji(t,e){return(e=rs({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function $i(t,e,n,r){var i=t.child;return t=i.sibling,n=ts(i,{mode:"visible",children:n}),0===(1&e.mode)&&(n.lanes=r),n.return=e,n.sibling=null,null!==t&&(null===(r=e.deletions)?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n}function Qi(t,e,n,r,i){var o=e.mode,a=(t=t.child).sibling,s={mode:"hidden",children:n};return 0===(1&o)&&e.child!==t?((n=e.child).childLanes=0,n.pendingProps=s,e.deletions=null):(n=ts(t,s)).subtreeFlags=14680064&t.subtreeFlags,null!==a?r=ts(a,r):(r=ns(r,o,i,null)).flags|=2,r.return=e,n.return=e,n.sibling=r,e.child=n,r}function to(t,e,n,r){return null!==r&&tr(r),or(e,t.child,null,n),(t=Ji(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function eo(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),ln(t.return,e,n)}function no(t,e,n,r,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function ro(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Fi(t,e,r.children,n),0!==(2&(r=gr.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&eo(t,n,e);else if(19===t.tag)eo(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ce(gr,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===yr(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),no(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===yr(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}no(e,!0,n,null,o);break;case"together":no(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function io(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),na|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=ts(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=ts(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function oo(t,e){switch(zn(e),e.tag){case 1:return fe(e.type)&&me(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return pr(),se(he),se(ue),br(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return mr(e),null;case 13:if(se(gr),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(a(340));Qn()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return se(gr),null;case 4:return pr(),null;case 10:return cn(e.type._context),null;case 22:case 23:return Ia(),null;default:return null}}var ao=!1,so=!1,co="function"===typeof WeakSet?WeakSet:Set,lo=null;function uo(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ha(t,e,r)}else n.current=null}function ho(t,e,n){try{n()}catch(r){Ha(t,e,r)}}var po=!1;function fo(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&ho(e,n,o)}i=i.next}while(i!==r)}}function mo(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function go(t){var e=t.ref;if(null!==e){var n=t.stateNode;if(5===t.tag)t=N(n);else t=n;"function"===typeof e?e(t):e.current=t}}function yo(t,e,n){if(We&&"function"===typeof We.onCommitFiberUnmount)try{We.onCommitFiberUnmount(Ge,e)}catch(a){}switch(e.tag){case 0:case 11:case 14:case 15:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t=t.next;do{var i=r,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&ho(e,n,o),r=r.next}while(r!==t)}break;case 1:if(uo(e,n),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(a){Ha(e,n,a)}break;case 5:uo(e,n);break;case 4:Y?Eo(t,e,n):K&&K&&(e=e.stateNode.containerInfo,n=Mt(e),kt(e,n))}}function vo(t,e,n){for(var r=e;;)if(yo(t,r,n),null===r.child||Y&&4===r.tag){if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function bo(t){var e=t.alternate;null!==e&&(t.alternate=null,bo(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&tt(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xo(t){return 5===t.tag||3===t.tag||4===t.tag}function _o(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||xo(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function wo(t){if(Y){t:{for(var e=t.return;null!==e;){if(xo(e))break t;e=e.return}throw Error(a(160))}var n=e;switch(n.tag){case 5:e=n.stateNode,32&n.flags&&(xt(e),n.flags&=-33),To(t,n=_o(t),e);break;case 3:case 4:e=n.stateNode.containerInfo,So(t,n=_o(t),e);break;default:throw Error(a(161))}}}function So(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?yt(n,t,e):dt(n,t);else if(4!==r&&null!==(t=t.child))for(So(t,e,n),t=t.sibling;null!==t;)So(t,e,n),t=t.sibling}function To(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?gt(n,t,e):ht(n,t);else if(4!==r&&null!==(t=t.child))for(To(t,e,n),t=t.sibling;null!==t;)To(t,e,n),t=t.sibling}function Eo(t,e,n){for(var r,i,o=e,s=!1;;){if(!s){s=o.return;t:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}s=s.return}s=!0}if(5===o.tag||6===o.tag)vo(t,o,n),i?bt(r,o.stateNode):vt(r,o.stateNode);else if(18===o.tag)i?Zt(r,o.stateNode):Kt(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(yo(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function Ao(t,e){if(Y){switch(e.tag){case 0:case 11:case 14:case 15:return fo(3,e,e.return),mo(3,e),void fo(5,e,e.return);case 1:case 12:case 17:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps;t=null!==t?t.memoizedProps:r;var i=e.type,o=e.updateQueue;e.updateQueue=null,null!==o&&mt(n,o,i,t,r,e)}return;case 6:if(null===e.stateNode)throw Error(a(162));return n=e.memoizedProps,void pt(e.stateNode,null!==t?t.memoizedProps:n,n);case 3:return void(Z&&null!==t&&t.memoizedState.isDehydrated&&Xt(e.stateNode.containerInfo));case 13:case 19:return void Mo(e)}throw Error(a(163))}switch(e.tag){case 0:case 11:case 14:case 15:return fo(3,e,e.return),mo(3,e),void fo(5,e,e.return);case 12:case 22:case 23:return;case 13:case 19:return void Mo(e);case 3:Z&&null!==t&&t.memoizedState.isDehydrated&&Xt(e.stateNode.containerInfo)}t:if(K){switch(e.tag){case 1:case 5:case 6:break t;case 3:case 4:e=e.stateNode,kt(e.containerInfo,e.pendingChildren);break t}throw Error(a(163))}}function Mo(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new co),e.forEach((function(e){var r=Ka.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function Oo(t,e,n){lo=t,Co(t,e,n)}function Co(t,e,n){for(var r=0!==(1&t.mode);null!==lo;){var i=lo,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||ao;if(!a){var s=i.alternate,c=null!==s&&null!==s.memoizedState||so;s=ao;var l=so;if(ao=a,(so=c)&&!l)for(lo=i;null!==lo;)c=(a=lo).child,22===a.tag&&null!==a.memoizedState?Io(i):null!==c?(c.return=a,lo=c):Io(i);for(;null!==o;)lo=o,Co(o,e,n),o=o.sibling;lo=i,ao=s,so=l}ko(t)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,lo=o):ko(t)}}function ko(t){for(;null!==lo;){var e=lo;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:so||mo(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!so)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:tn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;null!==o&&_n(e,o,r);break;case 3:var s=e.updateQueue;if(null!==s){if(n=null,null!==e.child)switch(e.child.tag){case 5:n=N(e.child.stateNode);break;case 1:n=e.child.stateNode}_n(e,s,n)}break;case 5:var c=e.stateNode;null===n&&4&e.flags&&ft(c,e.type,e.memoizedProps,e);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(Z&&null===e.memoizedState){var l=e.alternate;if(null!==l){var u=l.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Yt(h)}}}break;default:throw Error(a(163))}so||512&e.flags&&go(e)}catch(d){Ha(e,e.return,d)}}if(e===t){lo=null;break}if(null!==(n=e.sibling)){n.return=e.return,lo=n;break}lo=e.return}}function Po(t){for(;null!==lo;){var e=lo;if(e===t){lo=null;break}var n=e.sibling;if(null!==n){n.return=e.return,lo=n;break}lo=e.return}}function Io(t){for(;null!==lo;){var e=lo;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mo(4,e)}catch(c){Ha(e,n,c)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(c){Ha(e,i,c)}}var o=e.return;try{go(e)}catch(c){Ha(e,o,c)}break;case 5:var a=e.return;try{go(e)}catch(c){Ha(e,a,c)}}}catch(c){Ha(e,e.return,c)}if(e===t){lo=null;break}var s=e.sibling;if(null!==s){s.return=e.return,lo=s;break}lo=e.return}}var No=0,Ro=1,Do=2,Lo=3,Fo=4;if("function"===typeof Symbol&&Symbol.for){var jo=Symbol.for;No=jo("selector.component"),Ro=jo("selector.has_pseudo_class"),Do=jo("selector.role"),Lo=jo("selector.test_id"),Fo=jo("selector.text")}function Uo(t){var e=J(t);if(null!=e){if("string"!==typeof e.memoizedProps["data-testname"])throw Error(a(364));return e}if(null===(t=it(t)))throw Error(a(362));return t.stateNode.current}function Bo(t,e){switch(e.$$typeof){case No:if(t.type===e.value)return!0;break;case Ro:t:{e=e.value,t=[t,0];for(var n=0;n<t.length;){var r=t[n++],i=t[n++],o=e[i];if(5!==r.tag||!st(r)){for(;null!=o&&Bo(r,o);)o=e[++i];if(i===e.length){e=!0;break t}for(r=r.child;null!==r;)t.push(r,i),r=r.sibling}}e=!1}return e;case Do:if(5===t.tag&&ct(t.stateNode,e.value))return!0;break;case Fo:if((5===t.tag||6===t.tag)&&(null!==(t=at(t))&&0<=t.indexOf(e.value)))return!0;break;case Lo:if(5===t.tag&&("string"===typeof(t=t.memoizedProps["data-testname"])&&t.toLowerCase()===e.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function zo(t){switch(t.$$typeof){case No:return"<"+(S(t.value)||"Unknown")+">";case Ro:return":has("+(zo(t)||"")+")";case Do:return'[role="'+t.value+'"]';case Fo:return'"'+t.value+'"';case Lo:return'[data-testname="'+t.value+'"]';default:throw Error(a(365))}}function Vo(t,e){var n=[];t=[t,0];for(var r=0;r<t.length;){var i=t[r++],o=t[r++],a=e[o];if(5!==i.tag||!st(i)){for(;null!=a&&Bo(i,a);)a=e[++o];if(o===e.length)n.push(i);else for(i=i.child;null!==i;)t.push(i,o),i=i.sibling}}return n}function Go(t,e){if(!rt)throw Error(a(363));t=Vo(t=Uo(t),e),e=[],t=Array.from(t);for(var n=0;n<t.length;){var r=t[n++];if(5===r.tag)st(r)||e.push(r.stateNode);else for(r=r.child;null!==r;)t.push(r),r=r.sibling}return e}var Wo=Math.ceil,Ho=s.ReactCurrentDispatcher,qo=s.ReactCurrentOwner,Xo=s.ReactCurrentBatchConfig,Yo=0,Ko=null,Zo=null,Jo=0,$o=0,Qo=ae(0),ta=0,ea=null,na=0,ra=0,ia=0,oa=null,aa=null,sa=0,ca=1/0;function la(){ca=je()+500}var ua,ha=!1,da=null,pa=null,fa=!1,ma=null,ga=0,ya=0,va=null,ba=-1,xa=0;function _a(){return 0!==(6&Yo)?je():-1!==ba?ba:ba=je()}function wa(t){return 0===(1&t.mode)?1:0!==(2&Yo)&&0!==Jo?Jo&-Jo:null!==Je.transition?(0===xa&&(t=Se,0===(4194240&(Se<<=1))&&(Se=64),xa=t),xa):0!==(t=Ie)?t:Q()}function Sa(t,e,n){if(50<ya)throw ya=0,va=null,Error(a(185));var r=Ta(t,e);return null===r?null:(ke(r,e,n),0!==(2&Yo)&&r===Ko||(r===Ko&&(0===(2&Yo)&&(ra|=e),4===ta&&Ca(r,Jo)),Ea(r,n),1===e&&0===Yo&&0===(1&t.mode)&&(la(),Xe&&Ze())),r)}function Ta(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function Ea(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-xe(o),s=1<<a,c=i[a];-1===c?0!==(s&n)&&0===(s&r)||(i[a]=Me(s,e)):c<=e&&(t.expiredLanes|=s),o&=~s}}(t,e);var r=Ae(t,t===Ko?Jo:0);if(0===r)null!==n&&De(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&De(n),1===e)0===t.tag?function(t){Xe=!0,Ke(t)}(ka.bind(null,t)):Ke(ka.bind(null,t)),et?nt((function(){0===Yo&&Ze()})):Re(Ue,Ze),n=null;else{switch(Ne(r)){case 1:n=Ue;break;case 4:n=Be;break;case 16:default:n=ze;break;case 536870912:n=Ve}n=Za(n,Aa.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Aa(t,e){if(ba=-1,xa=0,0!==(6&Yo))throw Error(a(327));var n=t.callbackNode;if(Ga()&&t.callbackNode!==n)return null;var r=Ae(t,t===Ko?Jo:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=Fa(t,r);else{e=r;var i=Yo;Yo|=2;var o=Da();for(Ko===t&&Jo===e||(la(),Na(t,e));;)try{Ua();break}catch(c){Ra(t,c)}an(),Ho.current=o,Yo=i,null!==Zo?e=0:(Ko=null,Jo=0,e=ta)}if(0!==e){if(2===e&&(0!==(i=Oe(t))&&(r=i,e=Ma(t,i))),1===e)throw n=ea,Na(t,0),Ca(t,r),Ea(t,je()),n;if(6===e)Ca(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!He(o(),i))return!1}catch(s){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=Fa(t,r))&&(0!==(o=Oe(t))&&(r=o,e=Ma(t,o))),1===e))throw n=ea,Na(t,0),Ca(t,r),Ea(t,je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(a(345));case 2:case 5:Va(t,aa);break;case 3:if(Ca(t,r),(130023424&r)===r&&10<(e=sa+500-je())){if(0!==Ae(t,0))break;if(((i=t.suspendedLanes)&r)!==r){_a(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=W(Va.bind(null,t,aa),e);break}Va(t,aa);break;case 4:if(Ca(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-xe(r);o=1<<s,(s=e[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Wo(r/1960))-r)){t.timeoutHandle=W(Va.bind(null,t,aa),r);break}Va(t,aa);break;default:throw Error(a(329))}}}return Ea(t,je()),t.callbackNode===n?Aa.bind(null,t):null}function Ma(t,e){var n=oa;return t.current.memoizedState.isDehydrated&&(Na(t,e).flags|=256),2!==(t=Fa(t,e))&&(e=aa,aa=n,null!==e&&Oa(e)),t}function Oa(t){null===aa?aa=t:aa.push.apply(aa,t)}function Ca(t,e){for(e&=~ia,e&=~ra,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xe(e),r=1<<n;t[n]=-1,e&=~r}}function ka(t){if(0!==(6&Yo))throw Error(a(327));Ga();var e=Ae(t,0);if(0===(1&e))return Ea(t,je()),null;var n=Fa(t,e);if(0!==t.tag&&2===n){var r=Oe(t);0!==r&&(e=r,n=Ma(t,r))}if(1===n)throw n=ea,Na(t,0),Ca(t,e),Ea(t,je()),n;if(6===n)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Va(t,aa),Ea(t,je()),null}function Pa(t){null!==ma&&0===ma.tag&&0===(6&Yo)&&Ga();var e=Yo;Yo|=1;var n=Xo.transition,r=Ie;try{if(Xo.transition=null,Ie=1,t)return t()}finally{Ie=r,Xo.transition=n,0===(6&(Yo=e))&&Ze()}}function Ia(){$o=Qo.current,se(Qo)}function Na(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==q&&(t.timeoutHandle=q,H(n)),null!==Zo)for(n=Zo.return;null!==n;){var r=n;switch(zn(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&me();break;case 3:pr(),se(he),se(ue),br();break;case 5:mr(r);break;case 4:pr();break;case 13:case 19:se(gr);break;case 10:cn(r.type._context);break;case 22:case 23:Ia()}n=n.return}if(Ko=t,Zo=t=ts(t.current,null),Jo=$o=e,ta=0,ea=null,ia=ra=na=0,aa=oa=null,null!==dn){for(e=0;e<dn.length;e++)if(null!==(r=(n=dn[e]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}dn=null}return t}function Ra(t,e){for(;;){var n=Zo;try{if(an(),xr.current=pi,Ar){for(var r=Sr.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Ar=!1}if(wr=0,Er=Tr=Sr=null,Mr=!1,Or=0,qo.current=null,null===n||null===n.return){ta=1,ea=e,Zo=null;break}t:{var o=t,s=n.return,c=n,l=e;if(e=Jo,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=Mi(s);if(null!==f){f.flags&=-257,Oi(f,s,c,0,e),1&f.mode&&Ai(o,u,e),l=u;var m=(e=f).updateQueue;if(null===m){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break t}if(0===(1&e)){Ai(o,u,e),La();break t}l=Error(a(426))}else if(Wn&&1&c.mode){var y=Mi(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),Oi(y,s,c,0,e),tr(l);break t}}o=l,4!==ta&&(ta=2),null===oa?oa=[o]:oa.push(o),l=yi(l,c),c=s;do{switch(c.tag){case 3:c.flags|=65536,e&=-e,c.lanes|=e,bn(c,Ti(0,l,e));break t;case 1:o=l;var v=c.type,b=c.stateNode;if(0===(128&c.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===pa||!pa.has(b)))){c.flags|=65536,e&=-e,c.lanes|=e,bn(c,Ei(c,o,e));break t}}c=c.return}while(null!==c)}za(n)}catch(x){e=x,Zo===n&&null!==n&&(Zo=n=n.return);continue}break}}function Da(){var t=Ho.current;return Ho.current=pi,null===t?pi:t}function La(){0!==ta&&3!==ta&&2!==ta||(ta=4),null===Ko||0===(268435455&na)&&0===(268435455&ra)||Ca(Ko,Jo)}function Fa(t,e){var n=Yo;Yo|=2;var r=Da();for(Ko===t&&Jo===e||Na(t,e);;)try{ja();break}catch(i){Ra(t,i)}if(an(),Yo=n,Ho.current=r,null!==Zo)throw Error(a(261));return Ko=null,Jo=0,ta}function ja(){for(;null!==Zo;)Ba(Zo)}function Ua(){for(;null!==Zo&&!Le();)Ba(Zo)}function Ba(t){var e=ua(t.alternate,t,$o);t.memoizedProps=t.pendingProps,null===e?za(t):Zo=e,qo.current=null}function za(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Ri(n,e,$o)))return void(Zo=n)}else{if(null!==(n=oo(n,e)))return n.flags&=32767,void(Zo=n);if(null===t)return ta=6,void(Zo=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Zo=e);Zo=e=t}while(null!==e);0===ta&&(ta=5)}function Va(t,e){var n=Ie,r=Xo.transition;try{Xo.transition=null,Ie=1,function(t,e,n){do{Ga()}while(null!==ma);if(0!==(6&Yo))throw Error(a(327));var r=t.finishedWork,i=t.finishedLanes;if(null===r)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-xe(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}(t,o),t===Ko&&(Zo=Ko=null,Jo=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||fa||(fa=!0,Za(ze,(function(){return Ga(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=Xo.transition,Xo.transition=null;var s=Ie;Ie=1;var c=Yo;Yo|=4,qo.current=null,function(t,e){for(L(t.containerInfo),lo=e;null!==lo;)if(e=(t=lo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,lo=e;else for(;null!==lo;){t=lo;try{var n=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,o=t.stateNode,s=o.getSnapshotBeforeUpdate(t.elementType===t.type?r:tn(t.type,r),i);o.__reactInternalSnapshotBeforeUpdate=s}break;case 3:Y&&Et(t.stateNode.containerInfo);break;default:throw Error(a(163))}}catch(c){Ha(t,t.return,c)}if(null!==(e=t.sibling)){e.return=t.return,lo=e;break}lo=t.return}n=po,po=!1}(t,r),function(t,e){for(lo=e;null!==lo;){var n=(e=lo).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t;Y?Eo(o,i,e):vo(o,i,e);var a=i.alternate;null!==a&&(a.return=null),i.return=null}catch(_){Ha(i,e,_)}}if(n=e.child,0!==(12854&e.subtreeFlags)&&null!==n)n.return=e,lo=n;else for(;null!==lo;){e=lo;try{var s=e.flags;if(32&s&&Y&&xt(e.stateNode),512&s){var c=e.alternate;if(null!==c){var l=c.ref;null!==l&&("function"===typeof l?l(null):l.current=null)}}if(8192&s)switch(e.tag){case 13:if(null!==e.memoizedState){var u=e.alternate;null!==u&&null!==u.memoizedState||(sa=je())}break;case 22:var h=null!==e.memoizedState,d=e.alternate,p=null!==d&&null!==d.memoizedState;if(n=e,Y)t:if(r=n,i=h,o=null,Y)for(var f=r;;){if(5===f.tag){if(null===o){o=f;var m=f.stateNode;i?_t(m):St(f.stateNode,f.memoizedProps)}}else if(6===f.tag){if(null===o){var g=f.stateNode;i?wt(g):Tt(g,f.memoizedProps)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===r)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===r)break;for(;null===f.sibling;){if(null===f.return||f.return===r)break t;o===f&&(o=null),f=f.return}o===f&&(o=null),f.sibling.return=f.return,f=f.sibling}if(h&&!p&&0!==(1&n.mode)){lo=n;for(var y=n.child;null!==y;){for(n=lo=y;null!==lo;){var v=(r=lo).child;switch(r.tag){case 0:case 11:case 14:case 15:fo(4,r,r.return);break;case 1:uo(r,r.return);var b=r.stateNode;if("function"===typeof b.componentWillUnmount){var x=r.return;try{b.props=r.memoizedProps,b.state=r.memoizedState,b.componentWillUnmount()}catch(_){Ha(r,x,_)}}break;case 5:uo(r,r.return);break;case 22:if(null!==r.memoizedState){Po(n);continue}}null!==v?(v.return=r,lo=v):Po(n)}y=y.sibling}}}switch(4102&s){case 2:wo(e),e.flags&=-3;break;case 6:wo(e),e.flags&=-3,Ao(e.alternate,e);break;case 4096:e.flags&=-4097;break;case 4100:e.flags&=-4097,Ao(e.alternate,e);break;case 4:Ao(e.alternate,e)}}catch(_){Ha(e,e.return,_)}if(null!==(n=e.sibling)){n.return=e.return,lo=n;break}lo=e.return}}}(t,r),F(t.containerInfo),t.current=r,Oo(r,t,i),Fe(),Yo=c,Ie=s,Xo.transition=o}else t.current=r;if(fa&&(fa=!1,ma=t,ga=i),o=t.pendingLanes,0===o&&(pa=null),function(t){if(We&&"function"===typeof We.onCommitFiberRoot)try{We.onCommitFiberRoot(Ge,t,void 0,128===(128&t.current.flags))}catch(e){}}(r.stateNode),Ea(t,je()),null!==e)for(n=t.onRecoverableError,r=0;r<e.length;r++)n(e[r]);if(ha)throw ha=!1,t=da,da=null,t;0!==(1&ga)&&0!==t.tag&&Ga(),o=t.pendingLanes,0!==(1&o)?t===va?ya++:(ya=0,va=t):ya=0,Ze()}(t,e,n)}finally{Xo.transition=r,Ie=n}return null}function Ga(){if(null!==ma){var t=Ne(ga),e=Xo.transition,n=Ie;try{if(Xo.transition=null,Ie=16>t?16:t,null===ma)var r=!1;else{if(t=ma,ma=null,ga=0,0!==(6&Yo))throw Error(a(331));var i=Yo;for(Yo|=4,lo=t.current;null!==lo;){var o=lo,s=o.child;if(0!==(16&lo.flags)){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(lo=u;null!==lo;){var h=lo;switch(h.tag){case 0:case 11:case 15:fo(8,h,o)}var d=h.child;if(null!==d)d.return=h,lo=d;else for(;null!==lo;){var p=(h=lo).sibling,f=h.return;if(bo(h),h===u){lo=null;break}if(null!==p){p.return=f,lo=p;break}lo=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}lo=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,lo=s;else t:for(;null!==lo;){if(0!==(2048&(o=lo).flags))switch(o.tag){case 0:case 11:case 15:fo(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,lo=v;break t}lo=o.return}}var b=t.current;for(lo=b;null!==lo;){var x=(s=lo).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,lo=x;else t:for(s=b;null!==lo;){if(0!==(2048&(c=lo).flags))try{switch(c.tag){case 0:case 11:case 15:mo(9,c)}}catch(w){Ha(c,c.return,w)}if(c===s){lo=null;break t}var _=c.sibling;if(null!==_){_.return=c.return,lo=_;break t}lo=c.return}}if(Yo=i,Ze(),We&&"function"===typeof We.onPostCommitFiberRoot)try{We.onPostCommitFiberRoot(Ge,t)}catch(w){}r=!0}return r}finally{Ie=n,Xo.transition=e}}return!1}function Wa(t,e,n){yn(t,e=Ti(0,e=yi(n,e),1)),e=_a(),null!==(t=Ta(t,1))&&(ke(t,1,e),Ea(t,e))}function Ha(t,e,n){if(3===t.tag)Wa(t,t,n);else for(;null!==e;){if(3===e.tag){Wa(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===pa||!pa.has(r))){yn(e,t=Ei(e,t=yi(n,t),1)),t=_a(),null!==(e=Ta(e,1))&&(ke(e,1,t),Ea(e,t));break}}e=e.return}}function qa(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=_a(),t.pingedLanes|=t.suspendedLanes&n,Ko===t&&(Jo&n)===n&&(4===ta||3===ta&&(130023424&Jo)===Jo&&500>je()-sa?Na(t,0):ia|=n),Ea(t,e)}function Xa(t,e){0===e&&(0===(1&t.mode)?e=1:(e=Te,0===(130023424&(Te<<=1))&&(Te=4194304)));var n=_a();null!==(t=Ta(t,e))&&(ke(t,e,n),Ea(t,n))}function Ya(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Xa(t,n)}function Ka(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(e),Xa(t,n)}function Za(t,e){return Re(t,e)}function Ja(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $a(t,e,n,r){return new Ja(t,e,n,r)}function Qa(t){return!(!(t=t.prototype)||!t.isReactComponent)}function ts(t,e){var n=t.alternate;return null===n?((n=$a(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function es(t,e,n,r,i,o){var s=2;if(r=t,"function"===typeof t)Qa(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case u:return ns(n.children,i,o,e);case h:s=8,i|=8;break;case d:return(t=$a(12,n,e,2|i)).elementType=d,t.lanes=o,t;case g:return(t=$a(13,n,e,i)).elementType=g,t.lanes=o,t;case y:return(t=$a(19,n,e,i)).elementType=y,t.lanes=o,t;case x:return rs(n,i,o,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case p:s=10;break t;case f:s=9;break t;case m:s=11;break t;case v:s=14;break t;case b:s=16,r=null;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=$a(s,n,e,i)).elementType=t,e.type=r,e.lanes=o,e}function ns(t,e,n,r){return(t=$a(7,t,r,e)).lanes=n,t}function rs(t,e,n,r){return(t=$a(22,t,r,e)).elementType=x,t.lanes=n,t.stateNode={},t}function is(t,e,n){return(t=$a(6,t,null,e)).lanes=n,t}function os(t,e,n){return(e=$a(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function as(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=q,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ce(0),this.expirationTimes=Ce(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ce(0),this.identifierPrefix=r,this.onRecoverableError=i,Z&&(this.mutableSourceEagerHydrationData=null)}function ss(t,e,n,r,i,o,a,s,c){return t=new as(t,e,n,s,c),1===e?(e=1,!0===o&&(e|=8)):e=0,o=$a(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},fn(o),t}function cs(t){if(!t)return le;t:{if(E(t=t._reactInternals)!==t||1!==t.tag)throw Error(a(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(fe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(a(171))}if(1===t.tag){var n=t.type;if(fe(n))return ye(t,n,e)}return e}function ls(t){var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw t=Object.keys(t).join(","),Error(a(268,t))}return null===(t=O(e))?null:t.stateNode}function us(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function hs(t,e){us(t,e),(t=t.alternate)&&us(t,e)}function ds(t){return null===(t=O(t))?null:t.stateNode}function ps(){return null}return ua=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||he.current)Li=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return Li=!1,function(t,e,n){switch(e.tag){case 3:qi(e),Qn();break;case 5:fr(e);break;case 1:fe(e.type)&&ve(e);break;case 4:dr(e,e.stateNode.containerInfo);break;case 10:sn(0,e.type._context,e.memoizedProps.value);break;case 13:var r=e.memoizedState;if(null!==r)return null!==r.dehydrated?(ce(gr,1&gr.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Zi(t,e,n):(ce(gr,1&gr.current),null!==(t=io(t,e,n))?t.sibling:null);ce(gr,1&gr.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return ro(t,e,n);e.flags|=128}var i=e.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),ce(gr,gr.current),r)break;return null;case 22:case 23:return e.lanes=0,zi(t,e,n)}return io(t,e,n)}(t,e,n);Li=0!==(131072&t.flags)}else Li=!1,Wn&&0!==(1048576&e.flags)&&Un(e,In,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps;var i=pe(e,ue.current);un(e,n),i=Ir(null,e,r,t,i,n);var o=Nr();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fe(r)?(o=!0,ve(e)):o=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,fn(e),i.updater=Tn,e.stateNode=i,i._reactInternals=e,On(e,r,t,n),e=Hi(null,e,r,!0,o,n)):(e.tag=0,Wn&&o&&Bn(e),Fi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return Qa(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===m)return 11;if(t===v)return 14}return 2}(r),t=tn(r,t),i){case 0:e=Gi(null,e,r,t,n);break t;case 1:e=Wi(null,e,r,t,n);break t;case 11:e=ji(null,e,r,t,n);break t;case 14:e=Ui(null,e,r,tn(r.type,t),n);break t}throw Error(a(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Gi(t,e,r,i=e.elementType===r?i:tn(r,i),n);case 1:return r=e.type,i=e.pendingProps,Wi(t,e,r,i=e.elementType===r?i:tn(r,i),n);case 3:t:{if(qi(e),null===t)throw Error(a(387));r=e.pendingProps,i=(o=e.memoizedState).element,mn(t,e),xn(e,r,null,n);var s=e.memoizedState;if(r=s.element,Z&&o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,256&e.flags){e=Xi(t,e,r,n,i=Error(a(423)));break t}if(r!==i){e=Xi(t,e,r,n,i=Error(a(424)));break t}for(Z&&(Gn=zt(e.stateNode.containerInfo),Vn=e,Wn=!0,qn=null,Hn=!1),n=ar(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Qn(),r===i){e=io(t,e,n);break t}Fi(t,e,r,n)}e=e.child}return e;case 5:return fr(e),null===t&&Zn(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,V(r,i)?s=null:null!==o&&V(r,o)&&(e.flags|=32),Vi(t,e),Fi(t,e,s,n),e.child;case 6:return null===t&&Zn(e),null;case 13:return Zi(t,e,n);case 4:return dr(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=or(e,null,r,n):Fi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,ji(t,e,r,i=e.elementType===r?i:tn(r,i),n);case 7:return Fi(t,e,e.pendingProps,n),e.child;case 8:case 12:return Fi(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,sn(0,r,s=i.value),null!==o)if(He(o.value,s)){if(o.children===i.children&&!he.current){e=io(t,e,n);break t}}else for(null!==(o=e.child)&&(o.return=e);null!==o;){var c=o.dependencies;if(null!==c){s=o.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=gn(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),ln(o.return,n,e),c.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===e.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),ln(s,n,e),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===e){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}Fi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,un(e,n),r=r(i=hn(i)),e.flags|=1,Fi(t,e,r,n),e.child;case 14:return i=tn(r=e.type,e.pendingProps),Ui(t,e,r,i=tn(r.type,i),n);case 15:return Bi(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tn(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,fe(r)?(t=!0,ve(e)):t=!1,un(e,n),An(e,r,i),On(e,r,i,n),Hi(null,e,r,!0,t,n);case 19:return ro(t,e,n);case 22:return zi(t,e,n)}throw Error(a(156,e.tag))},e.attemptContinuousHydration=function(t){13===t.tag&&(Sa(t,134217728,_a()),hs(t,134217728))},e.attemptHydrationAtCurrentPriority=function(t){if(13===t.tag){var e=_a(),n=wa(t);Sa(t,n,e),hs(t,n)}},e.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ee(e.pendingLanes);0!==n&&(Pe(e,1|n),Ea(e,je()),0===(6&Yo)&&(la(),Ze()))}break;case 13:var r=_a();Pa((function(){return Sa(t,1,r)})),hs(t,1)}},e.batchedUpdates=function(t,e){var n=Yo;Yo|=1;try{return t(e)}finally{0===(Yo=n)&&(la(),Xe&&Ze())}},e.createComponentSelector=function(t){return{$$typeof:No,value:t}},e.createContainer=function(t,e,n,r,i,o,a){return ss(t,e,!1,null,0,r,0,o,a)},e.createHasPseudoClassSelector=function(t){return{$$typeof:Ro,value:t}},e.createHydrationContainer=function(t,e,n,r,i,o,a,s,c){return(t=ss(n,r,!0,t,0,o,0,s,c)).context=cs(null),n=t.current,(o=gn(r=_a(),i=wa(n))).callback=void 0!==e&&null!==e?e:null,yn(n,o),t.current.lanes=i,ke(t,i,r),Ea(t,r),t},e.createPortal=function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:l,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}},e.createRoleSelector=function(t){return{$$typeof:Do,value:t}},e.createTestNameSelector=function(t){return{$$typeof:Lo,value:t}},e.createTextSelector=function(t){return{$$typeof:Fo,value:t}},e.deferredUpdates=function(t){var e=Ie,n=Xo.transition;try{return Xo.transition=null,Ie=16,t()}finally{Ie=e,Xo.transition=n}},e.discreteUpdates=function(t,e,n,r,i){var o=Ie,a=Xo.transition;try{return Xo.transition=null,Ie=1,t(e,n,r,i)}finally{Ie=o,Xo.transition=a,0===Yo&&la()}},e.findAllNodes=Go,e.findBoundingRects=function(t,e){if(!rt)throw Error(a(363));e=Go(t,e),t=[];for(var n=0;n<e.length;n++)t.push(ot(e[n]));for(e=t.length-1;0<e;e--)for(var r=(n=t[e]).x,i=r+n.width,o=n.y,s=o+n.height,c=e-1;0<=c;c--)if(e!==c){var l=t[c],u=l.x,h=u+l.width,d=l.y,p=d+l.height;if(r>=u&&o>=d&&i<=h&&s<=p){t.splice(e,1);break}if(!(r!==u||n.width!==l.width||p<o||d>s)){d>o&&(l.height+=d-o,l.y=o),p<s&&(l.height=s-d),t.splice(e,1);break}if(!(o!==d||n.height!==l.height||h<r||u>i)){u>r&&(l.width+=u-r,l.x=r),h<i&&(l.width=i-u),t.splice(e,1);break}}return t},e.findHostInstance=ls,e.findHostInstanceWithNoPortals=function(t){return null===(t=null!==(t=M(t))?k(t):null)?null:t.stateNode},e.findHostInstanceWithWarning=function(t){return ls(t)},e.flushControlled=function(t){var e=Yo;Yo|=1;var n=Xo.transition,r=Ie;try{Xo.transition=null,Ie=1,t()}finally{Ie=r,Xo.transition=n,0===(Yo=e)&&(la(),Ze())}},e.flushPassiveEffects=Ga,e.flushSync=Pa,e.focusWithin=function(t,e){if(!rt)throw Error(a(363));for(e=Vo(t=Uo(t),e),e=Array.from(e),t=0;t<e.length;){var n=e[t++];if(!st(n)){if(5===n.tag&&lt(n.stateNode))return!0;for(n=n.child;null!==n;)e.push(n),n=n.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Ie},e.getFindAllNodesFailureDescription=function(t,e){if(!rt)throw Error(a(363));var n=0,r=[];t=[Uo(t),0];for(var i=0;i<t.length;){var o=t[i++],s=t[i++],c=e[s];if((5!==o.tag||!st(o))&&(Bo(o,c)&&(r.push(zo(c)),++s>n&&(n=s)),s<e.length))for(o=o.child;null!==o;)t.push(o,s),o=o.sibling}if(n<e.length){for(t=[];n<e.length;n++)t.push(zo(e[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+t.join(" > ")}return null},e.getPublicRootInstance=function(t){return(t=t.current).child?5===t.child.tag?N(t.child.stateNode):t.child.stateNode:null},e.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:ds,findFiberByHostInstance:t.findFiberByHostInstance||ps,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)t=!1;else{var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)t=!0;else{try{Ge=e.inject(t),We=e}catch(n){}t=!!e.checkDCE}}return t},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(t,e,n,r){if(!rt)throw Error(a(363));t=Go(t,e);var i=ut(t,n,r).disconnect;return{disconnect:function(){i()}}},e.registerMutableSourceForHydration=function(t,e){var n=e._getVersion;n=n(e._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[e,n]:t.mutableSourceEagerHydrationData.push(e,n)},e.runWithPriority=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(t,e,n,r){var i=e.current,o=_a(),a=wa(i);return n=cs(n),null===e.context?e.context=n:e.pendingContext=n,(e=gn(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),yn(i,e),null!==(t=Sa(i,a,o))&&vn(t,i,a),a},e}},7205:(t,e,n)=>{"use strict";t.exports=n(7302)},2016:(t,e,n)=>{"use strict";t.exports=n(6958)},7029:function(t,e,n){var r;r=function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(t,e,n){"use strict";n.r(e);var r=n("react"),i=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)},a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function s(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(t){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return e?new Promise((function(n,r){e.call(navigator,t,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var c=function(t){function e(e){var n=t.call(this,e)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return i(e,t),e.prototype.componentDidMount=function(){var t=this.state,e=this.props;this.unmounted=!1,s()?(t.hasUserMedia||this.requestUserMedia(),e.children&&"function"!=typeof e.children&&console.warn("children must be a function")):e.onUserMediaError("getUserMedia not supported")},e.prototype.componentDidUpdate=function(t){var e=this.props;if(s()){var n=JSON.stringify(t.audioConstraints)!==JSON.stringify(e.audioConstraints),r=JSON.stringify(t.videoConstraints)!==JSON.stringify(e.videoConstraints),i=t.minScreenshotWidth!==e.minScreenshotWidth,o=t.minScreenshotHeight!==e.minScreenshotHeight;(r||i||o)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else e.onUserMediaError("getUserMedia not supported")},e.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},e.stopMediaStream=function(t){t&&(t.getVideoTracks&&t.getAudioTracks?(t.getVideoTracks().map((function(e){t.removeTrack(e),e.stop()})),t.getAudioTracks().map((function(e){t.removeTrack(e),e.stop()}))):t.stop())},e.prototype.stopAndCleanup=function(){var t=this.state;t.hasUserMedia&&(e.stopMediaStream(this.stream),t.src&&window.URL.revokeObjectURL(t.src))},e.prototype.getScreenshot=function(t){var e=this.state,n=this.props;if(!e.hasUserMedia)return null;var r=this.getCanvas(t);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},e.prototype.getCanvas=function(t){var e=this.state,n=this.props;if(!this.video)return null;if(!e.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,i=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var o=r/i;i=(r=n.minScreenshotWidth||this.video.clientWidth)/o,n.minScreenshotHeight&&i<n.minScreenshotHeight&&(r=(i=n.minScreenshotHeight)*o)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===t||void 0===t?void 0:t.width)||r,this.canvas.height=(null===t||void 0===t?void 0:t.height)||i,this.ctx=this.canvas.getContext("2d")}var a=this.ctx,s=this.canvas;return a&&s&&(s.width=(null===t||void 0===t?void 0:t.width)||s.width,s.height=(null===t||void 0===t?void 0:t.height)||s.height,n.mirrored&&(a.translate(s.width,0),a.scale(-1,1)),a.imageSmoothingEnabled=n.imageSmoothing,a.drawImage(this.video,0,0,(null===t||void 0===t?void 0:t.width)||s.width,(null===t||void 0===t?void 0:t.height)||s.height),n.mirrored&&(a.scale(-1,1),a.translate(-s.width,0))),s},e.prototype.requestUserMedia=function(){var t=this,n=this.props,r=function(r,i){var o={video:"undefined"===typeof i||i};n.audio&&(o.audio="undefined"===typeof r||r),t.requestUserMediaId++;var a=t.requestUserMediaId;navigator.mediaDevices.getUserMedia(o).then((function(n){t.unmounted||a!==t.requestUserMediaId?e.stopMediaStream(n):t.handleUserMedia(null,n)})).catch((function(e){t.handleUserMedia(e)}))};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var i=function(t){return{optional:[{sourceId:t}]}},o=function(t){var e=t.deviceId;return"string"===typeof e?e:Array.isArray(e)&&e.length>0?e[0]:"object"===typeof e&&e.ideal?e.ideal:null};MediaStreamTrack.getSources((function(t){var e=null,a=null;t.forEach((function(t){"audio"===t.kind?e=t.id:"video"===t.kind&&(a=t.id)}));var s=o(n.audioConstraints);s&&(e=s);var c=o(n.videoConstraints);c&&(a=c),r(i(e),i(a))}))}},e.prototype.handleUserMedia=function(t,e){var n=this.props;if(t||!e)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(t);this.stream=e;try{this.video&&(this.video.srcObject=e),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(e)})}n.onUserMedia(e)},e.prototype.render=function(){var t=this,e=this.state,n=this.props,i=n.audio,s=(n.forceScreenshotSourceSize,n.disablePictureInPicture),c=(n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),l=n.style,u=void 0===l?{}:l,h=n.children,d=a(n,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),p=c?o(o({},u),{transform:(u.transform||"")+" scaleX(-1)"}):u,f={getScreenshot:this.getScreenshot.bind(this)};return r.createElement(r.Fragment,null,r.createElement("video",o({autoPlay:!0,disablePictureInPicture:s,src:e.src,muted:!i,playsInline:!0,ref:function(e){t.video=e},style:p},d)),h&&h(f))},e.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},e}(r.Component);e.default=c},react:function(e,n){e.exports=t}}).default},t.exports=r(n(5043))},1153:(t,e,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(t,e,n){var r,o={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==e.key&&(l=""+e.key),void 0!==e.ref&&(u=e.ref),e)a.call(e,r)&&!c.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:l,ref:u,props:o,_owner:s.current}}e.Fragment=o,e.jsx=l,e.jsxs=l},4202:(t,e)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||f}function v(){}function b(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function E(t,e,r){var i,o={},a=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)w.call(e,i)&&!T.hasOwnProperty(i)&&(o[i]=e[i]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}if(t&&t.defaultProps)for(i in c=t.defaultProps)void 0===o[i]&&(o[i]=c[i]);return{$$typeof:n,type:t,key:a,ref:s,props:o,_owner:S.current}}function A(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var M=/\/+/g;function O(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function C(t,e,i,o,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var c=!1;if(null===t)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case n:case r:c=!0}}if(c)return a=a(c=t),t=""===o?"."+O(c,0):o,_(a)?(i="",null!=t&&(i=t.replace(M,"$&/")+"/"),C(a,e,i,"",(function(t){return t}))):null!=a&&(A(a)&&(a=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,i+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(M,"$&/")+"/")+t)),e.push(a)),1;if(c=0,o=""===o?".":o+":",_(t))for(var l=0;l<t.length;l++){var u=o+O(s=t[l],l);c+=C(s,e,i,u,a)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=p&&t[p]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),l=0;!(s=t.next()).done;)c+=C(s=s.value,e,i,u=o+O(s,l++),a);else if("object"===s)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function k(t,e,n){if(null==t)return t;var r=[],i=0;return C(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function P(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var I={current:null},N={transition:null},R={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:N,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:k,forEach:function(t,e,n){k(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return k(t,(function(){e++})),e},toArray:function(t){return k(t,(function(t){return t}))||[]},only:function(t){if(!A(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=i,e.Profiler=a,e.PureComponent=b,e.StrictMode=o,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,e.act=D,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=m({},t.props),o=t.key,a=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,s=S.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(l in e)w.call(e,l)&&!T.hasOwnProperty(l)&&(i[l]=void 0===e[l]&&void 0!==c?c[l]:e[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:n,type:t.type,key:o,ref:a,props:i,_owner:s}},e.createContext=function(t){return(t={$$typeof:c,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=E,e.createFactory=function(t){var e=E.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:l,render:t}},e.isValidElement=A,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:P}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=N.transition;N.transition={};try{t()}finally{N.transition=e}},e.unstable_act=D,e.useCallback=function(t,e){return I.current.useCallback(t,e)},e.useContext=function(t){return I.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return I.current.useDeferredValue(t)},e.useEffect=function(t,e){return I.current.useEffect(t,e)},e.useId=function(){return I.current.useId()},e.useImperativeHandle=function(t,e,n){return I.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return I.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return I.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return I.current.useMemo(t,e)},e.useReducer=function(t,e,n){return I.current.useReducer(t,e,n)},e.useRef=function(t){return I.current.useRef(t)},e.useState=function(t){return I.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return I.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return I.current.useTransition()},e.version="18.3.1"},5043:(t,e,n)=>{"use strict";t.exports=n(4202)},579:(t,e,n)=>{"use strict";t.exports=n(1153)},7234:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<o(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,a=i>>>1;r<a;){var s=2*(r+1)-1,c=t[s],l=s+1,u=t[l];if(0>o(c,n))l<i&&0>o(u,c)?(t[r]=u,t[l]=n,r=l):(t[r]=c,t[s]=n,r=s);else{if(!(l<i&&0>o(u,n)))break t;t[r]=u,t[l]=n,r=l}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();e.unstable_now=function(){return s.now()-c}}var l=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(t){for(var e=r(u);null!==e;){if(null===e.callback)i(u);else{if(!(e.startTime<=t))break;i(u),e.sortIndex=e.expirationTime,n(l,e)}e=r(u)}}function _(t){if(g=!1,x(t),!m)if(null!==r(l))m=!0,N(w);else{var e=r(u);null!==e&&R(_,e.startTime-t)}}function w(t,n){m=!1,g&&(g=!1,v(A),A=-1),f=!0;var o=p;try{for(x(n),d=r(l);null!==d&&(!(d.expirationTime>n)||t&&!C());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var s=a(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?d.callback=s:d===r(l)&&i(l),x(n)}else i(l);d=r(l)}if(null!==d)var c=!0;else{var h=r(u);null!==h&&R(_,h.startTime-n),c=!1}return c}finally{d=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,T=!1,E=null,A=-1,M=5,O=-1;function C(){return!(e.unstable_now()-O<M)}function k(){if(null!==E){var t=e.unstable_now();O=t;var n=!0;try{n=E(!0,t)}finally{n?S():(T=!1,E=null)}}else T=!1}if("function"===typeof b)S=function(){b(k)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,I=P.port2;P.port1.onmessage=k,S=function(){I.postMessage(null)}}else S=function(){y(k,0)};function N(t){E=t,T||(T=!0,S())}function R(t,n){A=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,N(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(t){switch(p){case 1:case 2:case 3:var e=3;break;default:e=p}var n=p;p=e;try{return t()}finally{p=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=p;p=t;try{return e()}finally{p=n}},e.unstable_scheduleCallback=function(t,i,o){var a=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(t.sortIndex=o,n(u,t),null===r(l)&&t===r(u)&&(g?(v(A),A=-1):g=!0,R(_,o-a))):(t.sortIndex=s,n(l,t),m||f||(m=!0,N(w))),t},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(t){var e=p;return function(){var n=p;p=e;try{return t.apply(this,arguments)}finally{p=n}}}},8853:(t,e,n)=>{"use strict";t.exports=n(7234)},4334:(t,e,n)=>{var r=n(7359),i=n(7066),o=n(9016),a=n(9538),s=n(6288),c=n(5262),l=n(2430);l.alea=r,l.xor128=i,l.xorwow=o,l.xorshift7=a,l.xor4096=s,l.tychei=c,t.exports=l},7359:function(t,e,n){var r;!function(t,i,o){function a(t){var e=this,n=function(){var t=4022871197,e=function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)};return e}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=n(" "),e.s1=n(" "),e.s2=n(" "),e.s0-=n(t),e.s0<0&&(e.s0+=1),e.s1-=n(t),e.s1<0&&(e.s1+=1),e.s2-=n(t),e.s2<0&&(e.s2+=1),n=null}function s(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function c(t,e){var n=new a(t),r=e&&e.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,i))||(i.exports=r):this.alea=c}(0,t=n.nmd(t),n.amdD)},5262:function(t,e,n){var r;!function(t,i,o){function a(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function c(t,e){var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,i))||(i.exports=r):this.tychei=c}(0,t=n.nmd(t),n.amdD)},7066:function(t,e,n){var r;!function(t,i,o){function a(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function c(t,e){var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,i))||(i.exports=r):this.xor128=c}(0,t=n.nmd(t),n.amdD)},6288:function(t,e,n){var r;!function(t,i,o){function a(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,o=e.i;return e.w=r=r+1640531527|0,n=i[o+34&127],t=i[o=o+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[o]=n^t,e.i=o,n+(r^r>>>16)|0},function(t,e){var n,r,i,o,a,s=[],c=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,c=Math.max(c,e.length)),i=0,o=-32;o<c;++o)e&&(r^=e.charCodeAt((o+32)%e.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,i=0==(n=s[127&o]^=r+a)?i+1:0);for(i>=128&&(s[127&(e&&e.length||0)]=-1),i=127,o=512;o>0;--o)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;t.w=a,t.X=s,t.i=i}(e,t)}function s(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function c(t,e){null==t&&(t=+new Date);var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&(r.X&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,i))||(i.exports=r):this.xor4096=c}(0,t=n.nmd(t),n.amdD)},9538:function(t,e,n){var r;!function(t,i,o){function a(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],n=(t^=t>>>7)^t<<24,n^=(t=r[i+1&7])^t>>>10,n^=(t=r[i+3&7])^t>>>3,n^=(t=r[i+4&7])^t<<7,t=r[i+7&7],n^=(t^=t<<13)^t<<9,r[i]=n,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function s(t,e){return e.x=t.x.slice(),e.i=t.i,e}function c(t,e){null==t&&(t=+new Date);var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&(r.x&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,i))||(i.exports=r):this.xorshift7=c}(0,t=n.nmd(t),n.amdD)},9016:function(t,e,n){var r;!function(t,i,o){function a(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function c(t,e){var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,i))||(i.exports=r):this.xorwow=c}(0,t=n.nmd(t),n.amdD)},2430:function(t,e,n){var r;!function(i,o,a){var s,c=256,l=a.pow(c,6),u=a.pow(2,52),h=2*u,d=c-1;function p(t,e,n){var r=[],d=y(g((e=1==e?{entropy:!0}:e||{}).entropy?[t,v(o)]:null==t?function(){try{var t;return s&&(t=s.randomBytes)?t=t(c):(t=new Uint8Array(c),(i.crypto||i.msCrypto).getRandomValues(t)),v(t)}catch(r){var e=i.navigator,n=e&&e.plugins;return[+new Date,i,n,i.screen,v(o)]}}():t,3),r),p=new f(r),b=function(){for(var t=p.g(6),e=l,n=0;t<u;)t=(t+n)*c,e*=c,n=p.g(1);for(;t>=h;)t/=2,e/=2,n>>>=1;return(t+n)/e};return b.int32=function(){return 0|p.g(4)},b.quick=function(){return p.g(4)/4294967296},b.double=b,y(v(p.S),o),(e.pass||n||function(t,e,n,r){return r&&(r.S&&m(r,p),t.state=function(){return m(p,{})}),n?(a.random=t,e):t})(b,d,"global"in e?e.global:this==a,e.state)}function f(t){var e,n=t.length,r=this,i=0,o=r.i=r.j=0,a=r.S=[];for(n||(t=[n++]);i<c;)a[i]=i++;for(i=0;i<c;i++)a[i]=a[o=d&o+t[i%n]+(e=a[i])],a[o]=e;(r.g=function(t){for(var e,n=0,i=r.i,o=r.j,a=r.S;t--;)e=a[i=d&i+1],n=n*c+a[d&(a[i]=a[o=d&o+e])+(a[o]=e)];return r.i=i,r.j=o,n})(c)}function m(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function g(t,e){var n,r=[],i=typeof t;if(e&&"object"==i)for(n in t)try{r.push(g(t[n],e-1))}catch(o){}return r.length?r:"string"==i?t:t+"\0"}function y(t,e){for(var n,r=t+"",i=0;i<r.length;)e[d&i]=d&(n^=19*e[d&i])+r.charCodeAt(i++);return v(e)}function v(t){return String.fromCharCode.apply(0,t)}if(y(a.random(),o),t.exports){t.exports=p;try{s=n(1234)}catch(b){}}else void 0===(r=function(){return p}.call(e,n,e,t))||(t.exports=r)}("undefined"!==typeof self?self:this,[],Math)},4068:t=>{"use strict";t.exports=function(t,e,n){return 0===t.length?t:e?(n||t.sort(e),function(t,e){for(var n=1,r=t.length,i=t[0],o=t[0],a=1;a<r;++a)if(o=i,e(i=t[a],o)){if(a===n){n++;continue}t[n++]=i}return t.length=n,t}(t,e)):(n||t.sort(),function(t){for(var e=1,n=t.length,r=t[0],i=t[0],o=1;o<n;++o,i=r)if(i=r,(r=t[o])!==i){if(o===e){e++;continue}t[e++]=r}return t.length=e,t}(t))}},5817:()=>{},8590:()=>{},3052:()=>{},143:()=>{},2603:()=>{},7806:()=>{},2009:()=>{},6837:()=>{},2499:()=>{},1234:()=>{}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;__webpack_require__.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var i=Object.create(null);__webpack_require__.r(i);var o={};t=t||[null,e({}),e([]),e(e)];for(var a=2&r&&n;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>o[t]=()=>n[t]));return o.default=()=>n,__webpack_require__.d(i,o),i}})(),__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.f={},__webpack_require__.e=t=>Promise.all(Object.keys(__webpack_require__.f).reduce(((e,n)=>(__webpack_require__.f[n](t,e),e)),[])),__webpack_require__.u=t=>"static/js/"+t+".ed84460c.chunk.js",__webpack_require__.miniCssF=t=>{},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="alkasalissou.tech:";__webpack_require__.l=(n,r,i,o)=>{if(t[n])t[n].push(r);else{var a,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==e+i){a=u;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,__webpack_require__.nc&&a.setAttribute("nonce",__webpack_require__.nc),a.setAttribute("data-webpack",e+i),a.src=n),t[n]=[r];var h=(e,r)=>{a.onerror=a.onload=null,clearTimeout(d);var i=t[n];if(delete t[n],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((t=>t(r))),e)return e(r)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),s&&document.head.appendChild(a)}}})(),__webpack_require__.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),__webpack_require__.p="/",(()=>{var t={792:0};__webpack_require__.f.j=(e,n)=>{var r=__webpack_require__.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=t[e]=[n,i]));n.push(r[2]=i);var o=__webpack_require__.p+__webpack_require__.u(e),a=new Error;__webpack_require__.l(o,(n=>{if(__webpack_require__.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,r[1](a)}}),"chunk-"+e,e)}};var e=(e,n)=>{var r,i,o=n[0],a=n[1],s=n[2],c=0;if(o.some((e=>0!==t[e]))){for(r in a)__webpack_require__.o(a,r)&&(__webpack_require__.m[r]=a[r]);if(s)s(__webpack_require__)}for(e&&e(n);c<o.length;c++)i=o[c],__webpack_require__.o(t,i)&&t[i]&&t[i][0](),t[i]=0},n=self.webpackChunkalkasalissou_tech=self.webpackChunkalkasalissou_tech||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var __webpack_exports__={};(()=>{"use strict";var t={};__webpack_require__.r(t),__webpack_require__.d(t,{ACESFilmicToneMapping:()=>Mh,AddEquation:()=>qu,AddOperation:()=>wh,AdditiveAnimationBlendMode:()=>up,AdditiveBlending:()=>Vu,AgXToneMapping:()=>Ch,AlphaFormat:()=>ud,AlwaysCompare:()=>Zp,AlwaysDepth:()=>ph,AlwaysStencilFunc:()=>Vp,AmbientLight:()=>UT,AnimationAction:()=>OE,AnimationClip:()=>lT,AnimationLoader:()=>vT,AnimationMixer:()=>kE,AnimationObjectGroup:()=>ME,AnimationUtils:()=>ZS,ArcCurve:()=>fw,ArrayCamera:()=>px,ArrowHelper:()=>wA,AttachedBindMode:()=>Ph,Audio:()=>dE,AudioAnalyser:()=>vE,AudioContext:()=>QT,AudioListener:()=>hE,AudioLoader:()=>tE,AxesHelper:()=>SA,BackSide:()=>ju,BasicDepthPacking:()=>fp,BasicShadowMap:()=>Nu,BatchedMesh:()=>j_,Bone:()=>o_,BooleanKeyframeTrack:()=>nT,Box2:()=>GE,Box3:()=>im,Box3Helper:()=>yA,BoxGeometry:()=>my,BoxHelper:()=>gA,BufferAttribute:()=>Ig,BufferGeometry:()=>Kg,BufferGeometryLoader:()=>qT,ByteType:()=>Qh,Cache:()=>hT,Camera:()=>_y,CameraHelper:()=>pA,CanvasTexture:()=>hw,CapsuleGeometry:()=>Dw,CatmullRomCurve3:()=>xw,CineonToneMapping:()=>Ah,CircleGeometry:()=>Lw,ClampToEdgeWrapping:()=>Bh,Clock:()=>oE,Color:()=>xg,ColorKeyframeTrack:()=>rT,ColorManagement:()=>Ff,CompressedArrayTexture:()=>lw,CompressedCubeTexture:()=>uw,CompressedTexture:()=>cw,CompressedTextureLoader:()=>bT,ConeGeometry:()=>jw,ConstantAlphaFactor:()=>uh,ConstantColorFactor:()=>ch,CubeCamera:()=>My,CubeReflectionMapping:()=>Rh,CubeRefractionMapping:()=>Dh,CubeTexture:()=>Oy,CubeTextureLoader:()=>_T,CubeUVReflectionMapping:()=>jh,CubicBezierCurve:()=>Tw,CubicBezierCurve3:()=>Ew,CubicInterpolant:()=>$S,CullFaceBack:()=>ku,CullFaceFront:()=>Pu,CullFaceFrontBack:()=>Iu,CullFaceNone:()=>Cu,Curve:()=>dw,CurvePath:()=>Iw,CustomBlending:()=>Hu,CustomToneMapping:()=>Oh,CylinderGeometry:()=>Fw,Cylindrical:()=>zE,Data3DTexture:()=>$f,DataArrayTexture:()=>Zf,DataTexture:()=>a_,DataTextureLoader:()=>wT,DataUtils:()=>Cg,DecrementStencilOp:()=>Pp,DecrementWrapStencilOp:()=>Np,DefaultLoadingManager:()=>pT,DepthFormat:()=>md,DepthStencilFormat:()=>gd,DepthTexture:()=>wv,DetachedBindMode:()=>Ih,DirectionalLight:()=>jT,DirectionalLightHelper:()=>uA,DiscreteInterpolant:()=>tT,DisplayP3ColorSpace:()=>_p,DodecahedronGeometry:()=>Bw,DoubleSide:()=>Uu,DstAlphaFactor:()=>rh,DstColorFactor:()=>oh,DynamicCopyUsage:()=>of,DynamicDrawUsage:()=>$p,DynamicReadUsage:()=>ef,EdgesGeometry:()=>Hw,EllipseCurve:()=>pw,EqualCompare:()=>Hp,EqualDepth:()=>gh,EqualStencilFunc:()=>Fp,EquirectangularReflectionMapping:()=>Lh,EquirectangularRefractionMapping:()=>Fh,Euler:()=>zm,EventDispatcher:()=>hf,ExtrudeGeometry:()=>_S,FileLoader:()=>yT,Float16BufferAttribute:()=>Bg,Float32BufferAttribute:()=>zg,FloatType:()=>id,Fog:()=>Ex,FogExp2:()=>Tx,FramebufferTexture:()=>sw,FrontSide:()=>Fu,Frustum:()=>Ly,GLBufferAttribute:()=>DE,GLSL1:()=>sf,GLSL3:()=>cf,GreaterCompare:()=>Xp,GreaterDepth:()=>vh,GreaterEqualCompare:()=>Kp,GreaterEqualDepth:()=>yh,GreaterEqualStencilFunc:()=>zp,GreaterStencilFunc:()=>Up,GridHelper:()=>oA,Group:()=>fx,HalfFloatType:()=>od,HemisphereLight:()=>ET,HemisphereLightHelper:()=>iA,IcosahedronGeometry:()=>SS,ImageBitmapLoader:()=>JT,ImageLoader:()=>xT,ImageUtils:()=>zf,IncrementStencilOp:()=>kp,IncrementWrapStencilOp:()=>Ip,InstancedBufferAttribute:()=>u_,InstancedBufferGeometry:()=>HT,InstancedInterleavedBuffer:()=>RE,InstancedMesh:()=>v_,Int16BufferAttribute:()=>Lg,Int32BufferAttribute:()=>jg,Int8BufferAttribute:()=>Ng,IntType:()=>nd,InterleavedBuffer:()=>Mx,InterleavedBufferAttribute:()=>Cx,Interpolant:()=>JS,InterpolateDiscrete:()=>rp,InterpolateLinear:()=>ip,InterpolateSmooth:()=>op,InvertStencilOp:()=>Rp,KeepStencilOp:()=>Op,KeyframeTrack:()=>eT,LOD:()=>Yx,LatheGeometry:()=>Rw,Layers:()=>Vm,LessCompare:()=>Wp,LessDepth:()=>fh,LessEqualCompare:()=>qp,LessEqualDepth:()=>mh,LessEqualStencilFunc:()=>jp,LessStencilFunc:()=>Lp,Light:()=>TT,LightProbe:()=>VT,Line:()=>X_,Line3:()=>qE,LineBasicMaterial:()=>U_,LineCurve:()=>Aw,LineCurve3:()=>Mw,LineDashedMaterial:()=>WS,LineLoop:()=>$_,LineSegments:()=>J_,LinearDisplayP3ColorSpace:()=>wp,LinearFilter:()=>Xh,LinearInterpolant:()=>QS,LinearMipMapLinearFilter:()=>Jh,LinearMipMapNearestFilter:()=>Kh,LinearMipmapLinearFilter:()=>Zh,LinearMipmapNearestFilter:()=>Yh,LinearSRGBColorSpace:()=>xp,LinearToneMapping:()=>Th,LinearTransfer:()=>Sp,Loader:()=>fT,LoaderUtils:()=>WT,LoadingManager:()=>dT,LoopOnce:()=>tp,LoopPingPong:()=>np,LoopRepeat:()=>ep,LuminanceAlphaFormat:()=>fd,LuminanceFormat:()=>pd,MOUSE:()=>Mu,Material:()=>Sg,MaterialLoader:()=>GT,MathUtils:()=>wf,Matrix3:()=>Tf,Matrix4:()=>Pm,MaxEquation:()=>Zu,Mesh:()=>py,MeshBasicMaterial:()=>Tg,MeshDepthMaterial:()=>sx,MeshDistanceMaterial:()=>cx,MeshLambertMaterial:()=>VS,MeshMatcapMaterial:()=>GS,MeshNormalMaterial:()=>zS,MeshPhongMaterial:()=>US,MeshPhysicalMaterial:()=>jS,MeshStandardMaterial:()=>FS,MeshToonMaterial:()=>BS,MinEquation:()=>Ku,MirroredRepeatWrapping:()=>zh,MixOperation:()=>_h,MultiplyBlending:()=>Wu,MultiplyOperation:()=>xh,NearestFilter:()=>Vh,NearestMipMapLinearFilter:()=>qh,NearestMipMapNearestFilter:()=>Wh,NearestMipmapLinearFilter:()=>Hh,NearestMipmapNearestFilter:()=>Gh,NeutralToneMapping:()=>kh,NeverCompare:()=>Gp,NeverDepth:()=>dh,NeverStencilFunc:()=>Dp,NoBlending:()=>Bu,NoColorSpace:()=>vp,NoToneMapping:()=>Sh,NormalAnimationBlendMode:()=>lp,NormalBlending:()=>zu,NotEqualCompare:()=>Yp,NotEqualDepth:()=>bh,NotEqualStencilFunc:()=>Bp,NumberKeyframeTrack:()=>iT,Object3D:()=>ig,ObjectLoader:()=>XT,ObjectSpaceNormalMap:()=>yp,OctahedronGeometry:()=>TS,OneFactor:()=>$u,OneMinusConstantAlphaFactor:()=>hh,OneMinusConstantColorFactor:()=>lh,OneMinusDstAlphaFactor:()=>ih,OneMinusDstColorFactor:()=>ah,OneMinusSrcAlphaFactor:()=>nh,OneMinusSrcColorFactor:()=>th,OrthographicCamera:()=>$y,P3Primaries:()=>Ap,PCFShadowMap:()=>Ru,PCFSoftShadowMap:()=>Du,PMREMGenerator:()=>uv,Path:()=>Nw,PerspectiveCamera:()=>Ey,Plane:()=>Ny,PlaneGeometry:()=>Uy,PlaneHelper:()=>vA,PointLight:()=>LT,PointLightHelper:()=>tA,Points:()=>iw,PointsMaterial:()=>Q_,PolarGridHelper:()=>aA,PolyhedronGeometry:()=>Uw,PositionalAudio:()=>yE,PropertyBinding:()=>AE,PropertyMixer:()=>bE,QuadraticBezierCurve:()=>Ow,QuadraticBezierCurve3:()=>Cw,Quaternion:()=>tm,QuaternionKeyframeTrack:()=>aT,QuaternionLinearInterpolant:()=>oT,RED_GREEN_RGTC2_Format:()=>$d,RED_RGTC1_Format:()=>Zd,REVISION:()=>Au,RGBADepthPacking:()=>mp,RGBAFormat:()=>dd,RGBAIntegerFormat:()=>_d,RGBA_ASTC_10x10_Format:()=>Wd,RGBA_ASTC_10x5_Format:()=>zd,RGBA_ASTC_10x6_Format:()=>Vd,RGBA_ASTC_10x8_Format:()=>Gd,RGBA_ASTC_12x10_Format:()=>Hd,RGBA_ASTC_12x12_Format:()=>qd,RGBA_ASTC_4x4_Format:()=>Nd,RGBA_ASTC_5x4_Format:()=>Rd,RGBA_ASTC_5x5_Format:()=>Dd,RGBA_ASTC_6x5_Format:()=>Ld,RGBA_ASTC_6x6_Format:()=>Fd,RGBA_ASTC_8x5_Format:()=>jd,RGBA_ASTC_8x6_Format:()=>Ud,RGBA_ASTC_8x8_Format:()=>Bd,RGBA_BPTC_Format:()=>Xd,RGBA_ETC2_EAC_Format:()=>Id,RGBA_PVRTC_2BPPV1_Format:()=>Cd,RGBA_PVRTC_4BPPV1_Format:()=>Od,RGBA_S3TC_DXT1_Format:()=>Sd,RGBA_S3TC_DXT3_Format:()=>Td,RGBA_S3TC_DXT5_Format:()=>Ed,RGBFormat:()=>hd,RGB_BPTC_SIGNED_Format:()=>Yd,RGB_BPTC_UNSIGNED_Format:()=>Kd,RGB_ETC1_Format:()=>kd,RGB_ETC2_Format:()=>Pd,RGB_PVRTC_2BPPV1_Format:()=>Md,RGB_PVRTC_4BPPV1_Format:()=>Ad,RGB_S3TC_DXT1_Format:()=>wd,RGFormat:()=>bd,RGIntegerFormat:()=>xd,RawShaderMaterial:()=>LS,Ray:()=>km,Raycaster:()=>FE,Rec709Primaries:()=>Ep,RectAreaLight:()=>BT,RedFormat:()=>yd,RedIntegerFormat:()=>vd,ReinhardToneMapping:()=>Eh,RenderTarget:()=>Yf,RepeatWrapping:()=>Uh,ReplaceStencilOp:()=>Cp,ReverseSubtractEquation:()=>Yu,RingGeometry:()=>ES,SIGNED_RED_GREEN_RGTC2_Format:()=>Qd,SIGNED_RED_RGTC1_Format:()=>Jd,SRGBColorSpace:()=>bp,SRGBTransfer:()=>Tp,Scene:()=>Ax,ShaderChunk:()=>By,ShaderLib:()=>Vy,ShaderMaterial:()=>xy,ShadowMaterial:()=>DS,Shape:()=>qw,ShapeGeometry:()=>AS,ShapePath:()=>TA,ShapeUtils:()=>vS,ShortType:()=>td,Skeleton:()=>l_,SkeletonHelper:()=>$E,SkinnedMesh:()=>i_,Source:()=>Gf,Sphere:()=>wm,SphereGeometry:()=>MS,Spherical:()=>BE,SphericalHarmonics3:()=>zT,SplineCurve:()=>kw,SpotLight:()=>PT,SpotLightHelper:()=>YE,Sprite:()=>Wx,SpriteMaterial:()=>kx,SrcAlphaFactor:()=>eh,SrcAlphaSaturateFactor:()=>sh,SrcColorFactor:()=>Qu,StaticCopyUsage:()=>rf,StaticDrawUsage:()=>Jp,StaticReadUsage:()=>tf,StereoCamera:()=>iE,StreamCopyUsage:()=>af,StreamDrawUsage:()=>Qp,StreamReadUsage:()=>nf,StringKeyframeTrack:()=>sT,SubtractEquation:()=>Xu,SubtractiveBlending:()=>Gu,TOUCH:()=>Ou,TangentSpaceNormalMap:()=>gp,TetrahedronGeometry:()=>OS,Texture:()=>qf,TextureLoader:()=>ST,TorusGeometry:()=>CS,TorusKnotGeometry:()=>kS,Triangle:()=>mg,TriangleFanDrawMode:()=>pp,TriangleStripDrawMode:()=>dp,TrianglesDrawMode:()=>hp,TubeGeometry:()=>PS,UVMapping:()=>Nh,Uint16BufferAttribute:()=>Fg,Uint32BufferAttribute:()=>Ug,Uint8BufferAttribute:()=>Rg,Uint8ClampedBufferAttribute:()=>Dg,Uniform:()=>PE,UniformsGroup:()=>NE,UniformsLib:()=>zy,UniformsUtils:()=>by,UnsignedByteType:()=>$h,UnsignedInt248Type:()=>cd,UnsignedInt5999Type:()=>ld,UnsignedIntType:()=>rd,UnsignedShort4444Type:()=>ad,UnsignedShort5551Type:()=>sd,UnsignedShortType:()=>ed,VSMShadowMap:()=>Lu,Vector2:()=>Sf,Vector3:()=>em,Vector4:()=>Xf,VectorKeyframeTrack:()=>cT,VideoTexture:()=>aw,WebGL3DRenderTarget:()=>Qf,WebGLArrayRenderTarget:()=>Jf,WebGLCoordinateSystem:()=>lf,WebGLCubeRenderTarget:()=>Cy,WebGLMultipleRenderTargets:()=>EA,WebGLRenderTarget:()=>Kf,WebGLRenderer:()=>Sx,WebGLUtils:()=>dx,WebGPUCoordinateSystem:()=>uf,WireframeGeometry:()=>IS,WrapAroundEnding:()=>cp,ZeroCurvatureEnding:()=>ap,ZeroFactor:()=>Ju,ZeroSlopeEnding:()=>sp,ZeroStencilOp:()=>Mp,createCanvasElement:()=>kf});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{axisBottom:()=>YF,axisLeft:()=>KF,axisRight:()=>XF,axisTop:()=>qF});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{CompositeArrayBuffer:()=>AG,browserFiles:()=>hH,browserHTTPRequest:()=>xH,concatenateArrayBuffers:()=>VG,copyModel:()=>MW,decodeWeights:()=>NG,decodeWeightsStream:()=>jG,encodeWeights:()=>IG,fromMemory:()=>TH,fromMemorySync:()=>EH,getLoadHandlers:()=>QG,getModelArtifactsForJSON:()=>qG,getModelArtifactsForJSONSync:()=>HG,getModelArtifactsInfoForJSON:()=>XG,getSaveHandlers:()=>$G,getWeightSpecs:()=>YG,http:()=>bH,isHTTPScheme:()=>yH,listModels:()=>EW,loadWeights:()=>fH,moveModel:()=>OW,registerLoadRouter:()=>JG,registerSaveRouter:()=>ZG,removeModel:()=>AW,weightsLoaderFactory:()=>mH,withSaveHandler:()=>AH,withSaveHandlerSync:()=>MH});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{assertParamsValid:()=>FH,computeFlatOffset:()=>ZH,computeOutShape:()=>UH,getNormalizedAxes:()=>GH,isSliceContinous:()=>KH,maskToAxes:()=>jH,parseSliceParams:()=>JH,sliceInfo:()=>$H,startForAxis:()=>XH,startIndicesWithElidedDims:()=>WH,stopForAxis:()=>YH,stopIndicesWithElidedDims:()=>HH,stridesForAxis:()=>qH,stridesWithElidedDims:()=>BH});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{conv2d:()=>hZ,depthwiseConv2d:()=>fZ,matMul:()=>mZ});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{collectGatherOpShapeInfo:()=>w$,computeOutShape:()=>_$,segOpComputeOptimalWindowSize:()=>x$});var a={};__webpack_require__.r(a),__webpack_require__.d(a,{ERF_A1:()=>jJ,ERF_A2:()=>UJ,ERF_A3:()=>BJ,ERF_A4:()=>zJ,ERF_A5:()=>VJ,ERF_P:()=>FJ,PARALLELIZE_THRESHOLD:()=>AJ,RowPartitionType:()=>_J,SELU_SCALE:()=>LJ,SELU_SCALEALPHA:()=>DJ,applyActivation:()=>lZ,assertAndGetBroadcastShape:()=>iH,assertAxesAreInnerMostDims:()=>EX,assertParamsConsistent:()=>bJ,assignToTypedArray:()=>YJ,axesAreInnerMostDims:()=>_X,calculateShapes:()=>UK,checkEinsumDimSizes:()=>r$,checkPadOnDimRoundingMode:()=>Aq,combineLocations:()=>wX,combineRaggedTensorToTensorShapes:()=>wJ,complexWithEvenIndex:()=>HJ,complexWithOddIndex:()=>qJ,computeConv2DInfo:()=>mq,computeConv3DInfo:()=>gq,computeDefaultPad:()=>yq,computeDilation2DInfo:()=>dq,computeOptimalWindowSize:()=>MJ,computeOutAndReduceShapes:()=>SX,computeOutShape:()=>xJ,computePool2DInfo:()=>pq,computePool3DInfo:()=>fq,convertConv2DDataFormat:()=>Eq,decodeEinsumEquation:()=>e$,eitherStridesOrDilationsAreOne:()=>Sq,expandShapeToKeepDim:()=>TX,exponent:()=>ZJ,exponents:()=>KJ,fromStringArrayToUint8:()=>T$,fromUint8ToStringArray:()=>S$,getAxesPermutation:()=>AX,getBroadcastDims:()=>nH,getComplexWithIndex:()=>XJ,getEinsumComputePath:()=>i$,getEinsumPermutation:()=>n$,getFusedBiasGradient:()=>cZ,getFusedDyActivation:()=>sZ,getImageCenter:()=>OJ,getInnerMostAxes:()=>OX,getPermuted:()=>kJ,getRaggedRank:()=>TJ,getReductionAxes:()=>rH,getReshaped:()=>CJ,getReshapedPermuted:()=>PJ,getRowPartitionTypesHelper:()=>SJ,getSliceBeginCoords:()=>IJ,getSliceSize:()=>NJ,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>c$,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>l$,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>u$,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>p$,getSparseReshapeInputOutputMismatchErrorMessage:()=>m$,getSparseReshapeInputOutputMultipleErrorMessage:()=>f$,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>h$,getSparseReshapeNegativeOutputDimErrorMessage:()=>d$,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>b$,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>g$,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>y$,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>v$,getUndoAxesPermutation:()=>MX,isIdentityPermutation:()=>o$,log:()=>$z,mergeRealAndImagArrays:()=>GJ,prepareAndValidate:()=>RJ,prepareSplitSize:()=>s$,segment_util:()=>o,shouldFuse:()=>uZ,slice_util:()=>r,splitRealAndImagArrays:()=>WJ,stridesOrDilationsArePositive:()=>Tq,tupleValuesAreOne:()=>wq,upcastType:()=>$V,validateDefaultValueShape:()=>EJ,validateInput:()=>jK,validateUpdateShape:()=>FK,warn:()=>Jz});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{json:()=>F$});var c={};__webpack_require__.r(c),__webpack_require__.d(c,{json:()=>j$});var l={};__webpack_require__.r(l),__webpack_require__.d(l,{json:()=>U$});var u={};__webpack_require__.r(u),__webpack_require__.d(u,{json:()=>B$});var h={};__webpack_require__.r(h),__webpack_require__.d(h,{json:()=>z$});var d={};__webpack_require__.r(d),__webpack_require__.d(d,{json:()=>V$});var p={};__webpack_require__.r(p),__webpack_require__.d(p,{json:()=>G$});var f={};__webpack_require__.r(f),__webpack_require__.d(f,{json:()=>W$});var m={};__webpack_require__.r(m),__webpack_require__.d(m,{json:()=>H$});var g={};__webpack_require__.r(g),__webpack_require__.d(g,{json:()=>q$});var y={};__webpack_require__.r(y),__webpack_require__.d(y,{json:()=>X$});var v={};__webpack_require__.r(v),__webpack_require__.d(v,{json:()=>Y$});var b={};__webpack_require__.r(b),__webpack_require__.d(b,{json:()=>K$});var x={};__webpack_require__.r(x),__webpack_require__.d(x,{json:()=>Z$});var _={};__webpack_require__.r(_),__webpack_require__.d(_,{json:()=>J$});var w={};__webpack_require__.r(w),__webpack_require__.d(w,{json:()=>$$});var S={};__webpack_require__.r(S),__webpack_require__.d(S,{json:()=>Q$});var T={};__webpack_require__.r(T),__webpack_require__.d(T,{json:()=>tQ});var E={};__webpack_require__.r(E),__webpack_require__.d(E,{json:()=>eQ});var A={};__webpack_require__.r(A),__webpack_require__.d(A,{OP_SCOPE_SUFFIX:()=>xG,abs:()=>eH,acos:()=>tq,acosh:()=>eq,add:()=>FW,addN:()=>nq,all:()=>rq,any:()=>iq,argMax:()=>oq,argMin:()=>aq,asin:()=>sq,asinh:()=>cq,atan:()=>lq,atan2:()=>uq,atanh:()=>hq,avgPool:()=>Oq,avgPool3d:()=>Cq,basicLSTMCell:()=>Dq,batchNorm:()=>Fq,batchNorm2d:()=>jq,batchNorm3d:()=>Uq,batchNorm4d:()=>Bq,batchToSpaceND:()=>Lq,bincount:()=>zq,bitwiseAnd:()=>Vq,booleanMaskAsync:()=>ZK,broadcastArgs:()=>Gq,broadcastTo:()=>Wq,buffer:()=>NW,cast:()=>RW,ceil:()=>Hq,clipByValue:()=>qq,clone:()=>DW,complex:()=>wG,concat:()=>kq,concat1d:()=>Xq,concat2d:()=>Yq,concat3d:()=>Kq,concat4d:()=>Zq,conv1d:()=>$q,conv2d:()=>Jq,conv2dTranspose:()=>tX,conv3d:()=>eX,conv3dTranspose:()=>rX,cos:()=>iX,cosh:()=>oX,cosineWindow:()=>iZ,cumprod:()=>aX,cumsum:()=>sX,denseBincount:()=>cX,depthToSpace:()=>lX,depthwiseConv2d:()=>uX,diag:()=>hX,dilation2d:()=>dX,div:()=>UW,divNoNan:()=>mX,dot:()=>gX,dropout:()=>nZ,einsum:()=>yX,elu:()=>vX,enclosingPowerOfTwo:()=>rZ,ensureShape:()=>bX,equal:()=>pX,erf:()=>xX,euclideanNorm:()=>RX,exp:()=>DX,expandDims:()=>LX,expm1:()=>FX,eye:()=>UX,fft:()=>_K,fill:()=>$W,floor:()=>BX,floorDiv:()=>jW,fused:()=>i,gather:()=>zX,gatherND:()=>eZ,greater:()=>VX,greaterEqual:()=>GX,ifft:()=>wK,imag:()=>WX,image:()=>pJ,inTopKAsync:()=>oZ,irfft:()=>SK,isFinite:()=>HX,isInf:()=>qX,isNaN:()=>XX,leakyRelu:()=>YX,less:()=>KX,lessEqual:()=>ZX,linalg:()=>fJ,linspace:()=>JX,localResponseNormalization:()=>$X,log:()=>QX,log1p:()=>tY,logSigmoid:()=>rY,logSoftmax:()=>iY,logSumExp:()=>oY,logicalAnd:()=>aY,logicalNot:()=>sY,logicalOr:()=>cY,logicalXor:()=>lY,losses:()=>mJ,lowerBound:()=>dY,matMul:()=>Pq,max:()=>CX,maxPool:()=>pY,maxPool3d:()=>fY,maxPoolWithArgmax:()=>mY,maximum:()=>oH,mean:()=>gY,meshgrid:()=>bY,min:()=>kX,minimum:()=>xY,mirrorPad:()=>_Y,mod:()=>wY,moments:()=>SY,movingAverage:()=>$K,mul:()=>BW,multiRNNCell:()=>TY,multinomial:()=>EY,neg:()=>eY,norm:()=>NX,notEqual:()=>AY,oneHot:()=>MY,ones:()=>vY,onesLike:()=>OY,op:()=>_G,outerProduct:()=>CY,pad:()=>kY,pad1d:()=>PY,pad2d:()=>IY,pad3d:()=>NY,pad4d:()=>RY,pool:()=>LY,pow:()=>QW,prelu:()=>FY,print:()=>LW,prod:()=>jY,raggedGather:()=>UY,raggedRange:()=>BY,raggedTensorToTensor:()=>zY,rand:()=>VY,randomGamma:()=>XY,randomNormal:()=>YY,randomStandardNormal:()=>KY,randomUniform:()=>ZY,randomUniformInt:()=>JY,range:()=>$Y,real:()=>QY,reciprocal:()=>tK,relu:()=>eK,relu6:()=>nK,reshape:()=>Mq,reverse:()=>rK,reverse1d:()=>iK,reverse2d:()=>oK,reverse3d:()=>aK,reverse4d:()=>sK,rfft:()=>EK,round:()=>cK,rsqrt:()=>lK,scalar:()=>HW,scatterND:()=>QK,searchSorted:()=>hY,selu:()=>uK,separableConv2d:()=>hK,setdiff1dAsync:()=>dK,sigmoid:()=>Iq,sign:()=>pK,signal:()=>dJ,sin:()=>fK,sinh:()=>mK,slice:()=>Nq,slice1d:()=>gK,slice2d:()=>yK,slice3d:()=>vK,slice4d:()=>bK,softmax:()=>xK,softplus:()=>nY,spaceToBatchND:()=>DY,sparse:()=>gJ,sparseToDense:()=>tZ,spectral:()=>hJ,split:()=>TK,sqrt:()=>zW,square:()=>VW,squaredDifference:()=>AK,squeeze:()=>MK,stack:()=>OK,step:()=>CK,stridedSlice:()=>kK,string:()=>yJ,sub:()=>tH,sum:()=>PX,tan:()=>PK,tanh:()=>Rq,tensor:()=>TG,tensor1d:()=>IK,tensor2d:()=>NK,tensor3d:()=>OH,tensor4d:()=>RK,tensor5d:()=>DK,tensor6d:()=>LK,tensorScatterUpdate:()=>BK,tile:()=>jX,topk:()=>zK,transpose:()=>JK,truncatedNormal:()=>VK,unique:()=>GK,unsortedSegmentSum:()=>WK,unstack:()=>HK,upperBound:()=>qK,variable:()=>XK,where:()=>fX,whereAsync:()=>KK,zeros:()=>yY,zerosLike:()=>GW});var M={};__webpack_require__.r(M),__webpack_require__.d(M,{mx:()=>Y2,XI:()=>Z2,Nk:()=>J2,f6:()=>$2,ct:()=>W2,YG:()=>n3,hH:()=>r3,z3:()=>i3,sG:()=>o3,uM:()=>a3,vS:()=>s3,qB:()=>c3,GG:()=>l3,lg:()=>h3,rq:()=>u3,cu:()=>p3,WR:()=>d3,GE:()=>f3,px:()=>m3,jC:()=>g3,He:()=>y3,hE:()=>v3,BF:()=>b3,Dk:()=>_3,cl:()=>w3,_B:()=>T3,ub:()=>O3,_f:()=>k3,Ku:()=>D3,qy:()=>L3,Zy:()=>F3,bu:()=>j3,zv:()=>U3,dH:()=>j2,HS:()=>B3,yH:()=>z3,l3:()=>V3,z9:()=>G3,x6:()=>W3,_m:()=>H3,eW:()=>q3,GK:()=>Y3,SP:()=>Z3,yr:()=>J3,dl:()=>$3,Dw:()=>t4,xT:()=>r4,_X:()=>S3,wz:()=>i4});var O={};__webpack_require__.r(O),__webpack_require__.d(O,{scaleBand:()=>sN,scaleDiverging:()=>lF,scaleDivergingLog:()=>uF,scaleDivergingPow:()=>dF,scaleDivergingSqrt:()=>pF,scaleDivergingSymlog:()=>hF,scaleIdentity:()=>iR,scaleImplicit:()=>oN,scaleLinear:()=>rR,scaleLog:()=>pR,scaleOrdinal:()=>aN,scalePoint:()=>lN,scalePow:()=>wR,scaleQuantile:()=>NR,scaleQuantize:()=>RR,scaleRadial:()=>ER,scaleSequential:()=>nF,scaleSequentialLog:()=>rF,scaleSequentialPow:()=>oF,scaleSequentialQuantile:()=>sF,scaleSequentialSqrt:()=>aF,scaleSequentialSymlog:()=>iF,scaleSqrt:()=>SR,scaleSymlog:()=>yR,scaleThreshold:()=>DR,scaleTime:()=>$L,scaleUtc:()=>QL,tickFormat:()=>eR});var C,k=__webpack_require__(5043),P=__webpack_require__.t(k,2),I=__webpack_require__(4391),N=__webpack_require__(7950),R=__webpack_require__.t(N,2);function D(){return D=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(C||(C={}));const L="popstate";function F(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function j(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(n){}}}function U(t,e){return{usr:t.state,key:t.key,idx:e}}function B(t,e,n,r){return void 0===n&&(n=null),D({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?V(e):e,{state:n,key:e&&e.key||r||Math.random().toString(36).substr(2,8)})}function z(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function V(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function G(t,e,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=C.Pop,c=null,l=u();function u(){return(a.state||{idx:null}).idx}function h(){s=C.Pop;let t=u(),e=null==t?null:t-l;l=t,c&&c({action:s,location:p.location,delta:e})}function d(t){let e="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof t?t:z(t);return n=n.replace(/ $/,"%20"),F(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}null==l&&(l=0,a.replaceState(D({},a.state,{idx:l}),""));let p={get action(){return s},get location(){return t(i,a)},listen(t){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(L,h),c=t,()=>{i.removeEventListener(L,h),c=null}},createHref:t=>e(i,t),createURL:d,encodeLocation(t){let e=d(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,e){s=C.Push;let r=B(p.location,t,e);n&&n(r,t),l=u()+1;let h=U(r,l),d=p.createHref(r);try{a.pushState(h,"",d)}catch(sO){if(sO instanceof DOMException&&"DataCloneError"===sO.name)throw sO;i.location.assign(d)}o&&c&&c({action:s,location:p.location,delta:1})},replace:function(t,e){s=C.Replace;let r=B(p.location,t,e);n&&n(r,t),l=u();let i=U(r,l),h=p.createHref(r);a.replaceState(i,"",h),o&&c&&c({action:s,location:p.location,delta:0})},go:t=>a.go(t)};return p}var W;!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(W||(W={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function H(t,e,n){void 0===n&&(n="/");let r=ot(("string"===typeof e?V(e):e).pathname||"/",n);if(null==r)return null;let i=q(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(i);let o=null;for(let a=0;null==o&&a<i.length;++a){let t=it(r);o=nt(i[a],t)}return o}function q(t,e,n,r){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(t,i,o)=>{let a={relativePath:void 0===o?t.path||"":o,caseSensitive:!0===t.caseSensitive,childrenIndex:i,route:t};a.relativePath.startsWith("/")&&(F(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=ut([r,a.relativePath]),c=n.concat(a);t.children&&t.children.length>0&&(F(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),q(t.children,e,c,s)),(null!=t.path||t.index)&&e.push({path:s,score:et(s,t.index),routesMeta:c})};return t.forEach(((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let r of X(t.path))i(t,e,r);else i(t,e)})),e}function X(t){let e=t.split("/");if(0===e.length)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=X(r.join("/")),s=[];return s.push(...a.map((t=>""===t?o:[o,t].join("/")))),i&&s.push(...a),s.map((e=>t.startsWith("/")&&""===e?"/":e))}const Y=/^:[\w-]+$/,K=3,Z=2,J=1,$=10,Q=-2,tt=t=>"*"===t;function et(t,e){let n=t.split("/"),r=n.length;return n.some(tt)&&(r+=Q),e&&(r+=Z),n.filter((t=>!tt(t))).reduce(((t,e)=>t+(Y.test(e)?K:""===e?J:$)),r)}function nt(t,e){let{routesMeta:n}=t,r={},i="/",o=[];for(let a=0;a<n.length;++a){let t=n[a],s=a===n.length-1,c="/"===i?e:e.slice(i.length)||"/",l=rt({path:t.relativePath,caseSensitive:t.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);let u=t.route;o.push({params:r,pathname:ut([i,l.pathname]),pathnameBase:ht(ut([i,l.pathnameBase])),route:u}),"/"!==l.pathnameBase&&(i=ut([i,l.pathnameBase]))}return o}function rt(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);j("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((t,e,n)=>(r.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));t.endsWith("*")?(r.push({paramName:"*"}),i+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==t&&"/"!==t&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,e?void 0:"i");return[o,r]}(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1),c=r.reduce(((t,e,n)=>{let{paramName:r,isOptional:i}=e;if("*"===r){let t=s[n]||"";a=o.slice(0,o.length-t.length).replace(/(.)\/+$/,"$1")}const c=s[n];return t[r]=i&&!c?void 0:(c||"").replace(/%2F/g,"/"),t}),{});return{params:c,pathname:o,pathnameBase:a,pattern:t}}function it(t){try{return t.split("/").map((t=>decodeURIComponent(t).replace(/\//g,"%2F"))).join("/")}catch(sO){return j(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+sO+")."),t}}function ot(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&"/"!==r?null:t.slice(n)||"/"}function at(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function st(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}function ct(t,e){let n=st(t);return e?n.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)):n.map((t=>t.pathnameBase))}function lt(t,e,n,r){let i;void 0===r&&(r=!1),"string"===typeof t?i=V(t):(i=D({},t),F(!i.pathname||!i.pathname.includes("?"),at("?","pathname","search",i)),F(!i.pathname||!i.pathname.includes("#"),at("#","pathname","hash",i)),F(!i.search||!i.search.includes("#"),at("#","search","hash",i)));let o,a=""===t||""===i.pathname,s=a?"/":i.pathname;if(null==s)o=n;else{let t=e.length-1;if(!r&&s.startsWith("..")){let e=s.split("/");for(;".."===e[0];)e.shift(),t-=1;i.pathname=e.join("/")}o=t>=0?e[t]:"/"}let c=function(t,e){void 0===e&&(e="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof t?V(t):t,o=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:o,search:dt(r),hash:pt(i)}}(i,o),l=s&&"/"!==s&&s.endsWith("/"),u=(a||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!l&&!u||(c.pathname+="/"),c}const ut=t=>t.join("/").replace(/\/\/+/g,"/"),ht=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dt=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",pt=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";Error;function ft(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}const mt=["post","put","patch","delete"],gt=(new Set(mt),["get",...mt]);new Set(gt),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function yt(){return yt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yt.apply(this,arguments)}const vt=k.createContext(null);const bt=k.createContext(null);const xt=k.createContext(null);const _t=k.createContext(null);const wt=k.createContext({outlet:null,matches:[],isDataRoute:!1});const St=k.createContext(null);function Tt(){return null!=k.useContext(_t)}function Et(){return Tt()||F(!1),k.useContext(_t).location}function At(t){k.useContext(xt).static||k.useLayoutEffect(t)}function Mt(){let{isDataRoute:t}=k.useContext(wt);return t?function(){let{router:t}=Ft(Dt.UseNavigateStable),e=Ut(Lt.UseNavigateStable),n=k.useRef(!1);At((()=>{n.current=!0}));let r=k.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?t.navigate(r):t.navigate(r,yt({fromRouteId:e},i)))}),[t,e]);return r}():function(){Tt()||F(!1);let t=k.useContext(vt),{basename:e,future:n,navigator:r}=k.useContext(xt),{matches:i}=k.useContext(wt),{pathname:o}=Et(),a=JSON.stringify(ct(i,n.v7_relativeSplatPath)),s=k.useRef(!1);At((()=>{s.current=!0}));let c=k.useCallback((function(n,i){if(void 0===i&&(i={}),!s.current)return;if("number"===typeof n)return void r.go(n);let c=lt(n,JSON.parse(a),o,"path"===i.relative);null==t&&"/"!==e&&(c.pathname="/"===c.pathname?e:ut([e,c.pathname])),(i.replace?r.replace:r.push)(c,i.state,i)}),[e,r,a,o,t]);return c}()}function Ot(t,e){let{relative:n}=void 0===e?{}:e,{future:r}=k.useContext(xt),{matches:i}=k.useContext(wt),{pathname:o}=Et(),a=JSON.stringify(ct(i,r.v7_relativeSplatPath));return k.useMemo((()=>lt(t,JSON.parse(a),o,"path"===n)),[t,a,o,n])}function Ct(t,e,n,r){Tt()||F(!1);let{navigator:i}=k.useContext(xt),{matches:o}=k.useContext(wt),a=o[o.length-1],s=a?a.params:{},c=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let l,u=Et();if(e){var h;let t="string"===typeof e?V(e):e;"/"===c||(null==(h=t.pathname)?void 0:h.startsWith(c))||F(!1),l=t}else l=u;let d=l.pathname||"/",p=d;if("/"!==c){let t=c.replace(/^\//,"").split("/");p="/"+d.replace(/^\//,"").split("/").slice(t.length).join("/")}let f=H(t,{pathname:p});let m=Rt(f&&f.map((t=>Object.assign({},t,{params:Object.assign({},s,t.params),pathname:ut([c,i.encodeLocation?i.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?c:ut([c,i.encodeLocation?i.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),o,n,r);return e&&m?k.createElement(_t.Provider,{value:{location:yt({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:C.Pop}},m):m}function kt(){let t=function(){var t;let e=k.useContext(St),n=jt(Lt.UseRouteError),r=Ut(Lt.UseRouteError);if(void 0!==e)return e;return null==(t=n.errors)?void 0:t[r]}(),e=ft(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:i},n):null,null)}const Pt=k.createElement(kt,null);class It extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return void 0!==this.state.error?k.createElement(wt.Provider,{value:this.props.routeContext},k.createElement(St.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Nt(t){let{routeContext:e,match:n,children:r}=t,i=k.useContext(vt);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(wt.Provider,{value:e},r)}function Rt(t,e,n,r){var i;if(void 0===e&&(e=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==t){var o;if(null==(o=n)||!o.errors)return null;t=n.matches}let a=t,s=null==(i=n)?void 0:i.errors;if(null!=s){let t=a.findIndex((t=>t.route.id&&void 0!==(null==s?void 0:s[t.route.id])));t>=0||F(!1),a=a.slice(0,Math.min(a.length,t+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let t=a[u];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=u),t.route.id){let{loaderData:e,errors:r}=n,i=t.route.loader&&void 0===e[t.route.id]&&(!r||void 0===r[t.route.id]);if(t.route.lazy||i){c=!0,a=l>=0?a.slice(0,l+1):[a[0]];break}}}return a.reduceRight(((t,r,i)=>{let o,u=!1,h=null,d=null;var p;n&&(o=s&&r.route.id?s[r.route.id]:void 0,h=r.route.errorElement||Pt,c&&(l<0&&0===i?(p="route-fallback",!1||Bt[p]||(Bt[p]=!0),u=!0,d=null):l===i&&(u=!0,d=r.route.hydrateFallbackElement||null)));let f=e.concat(a.slice(0,i+1)),m=()=>{let e;return e=o?h:u?d:r.route.Component?k.createElement(r.route.Component,null):r.route.element?r.route.element:t,k.createElement(Nt,{match:r,routeContext:{outlet:t,matches:f,isDataRoute:null!=n},children:e})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?k.createElement(It,{location:n.location,revalidation:n.revalidation,component:h,error:o,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()}),null)}var Dt=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Dt||{}),Lt=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Lt||{});function Ft(t){let e=k.useContext(vt);return e||F(!1),e}function jt(t){let e=k.useContext(bt);return e||F(!1),e}function Ut(t){let e=function(t){let e=k.useContext(wt);return e||F(!1),e}(),n=e.matches[e.matches.length-1];return n.route.id||F(!1),n.route.id}const Bt={};P.startTransition;function zt(t){F(!1)}function Vt(t){let{basename:e="/",children:n=null,location:r,navigationType:i=C.Pop,navigator:o,static:a=!1,future:s}=t;Tt()&&F(!1);let c=e.replace(/^\/*/,"/"),l=k.useMemo((()=>({basename:c,navigator:o,static:a,future:yt({v7_relativeSplatPath:!1},s)})),[c,s,o,a]);"string"===typeof r&&(r=V(r));let{pathname:u="/",search:h="",hash:d="",state:p=null,key:f="default"}=r,m=k.useMemo((()=>{let t=ot(u,c);return null==t?null:{location:{pathname:t,search:h,hash:d,state:p,key:f},navigationType:i}}),[c,u,h,d,p,f,i]);return null==m?null:k.createElement(xt.Provider,{value:l},k.createElement(_t.Provider,{children:n,value:m}))}function Gt(t){let{children:e,location:n}=t;return Ct(Wt(e),n)}new Promise((()=>{}));k.Component;function Wt(t,e){void 0===e&&(e=[]);let n=[];return k.Children.forEach(t,((t,r)=>{if(!k.isValidElement(t))return;let i=[...e,r];if(t.type===k.Fragment)return void n.push.apply(n,Wt(t.props.children,i));t.type!==zt&&F(!1),t.props.index&&t.props.children&&F(!1);let o={id:t.props.id||i.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(o.children=Wt(t.props.children,i)),n.push(o)})),n}function Ht(){return Ht=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ht.apply(this,arguments)}function qt(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Xt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(sCt){}new Map;const Yt=P.startTransition;R.flushSync,P.useId;function Kt(t){let{basename:e,children:n,future:r,window:i}=t,o=k.useRef();null==o.current&&(o.current=function(t){return void 0===t&&(t={}),G((function(t,e){let{pathname:n,search:r,hash:i}=t.location;return B("",{pathname:n,search:r,hash:i},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){return"string"===typeof e?e:z(e)}),null,t)}({window:i,v5Compat:!0}));let a=o.current,[s,c]=k.useState({action:a.action,location:a.location}),{v7_startTransition:l}=r||{},u=k.useCallback((t=>{l&&Yt?Yt((()=>c(t))):c(t)}),[c,l]);return k.useLayoutEffect((()=>a.listen(u)),[a,u]),k.createElement(Vt,{basename:e,children:n,location:s.location,navigationType:s.action,navigator:a,future:r})}const Zt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Jt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$t=k.forwardRef((function(t,e){let n,{onClick:r,relative:i,reloadDocument:o,replace:a,state:s,target:c,to:l,preventScrollReset:u,unstable_viewTransition:h}=t,d=qt(t,Xt),{basename:p}=k.useContext(xt),f=!1;if("string"===typeof l&&Jt.test(l)&&(n=l,Zt))try{let t=new URL(window.location.href),e=l.startsWith("//")?new URL(t.protocol+l):new URL(l),n=ot(e.pathname,p);e.origin===t.origin&&null!=n?l=n+e.search+e.hash:f=!0}catch(sCt){}let m=function(t,e){let{relative:n}=void 0===e?{}:e;Tt()||F(!1);let{basename:r,navigator:i}=k.useContext(xt),{hash:o,pathname:a,search:s}=Ot(t,{relative:n}),c=a;return"/"!==r&&(c="/"===a?r:ut([r,a])),i.createHref({pathname:c,search:s,hash:o})}(l,{relative:i}),g=function(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:s}=void 0===e?{}:e,c=Mt(),l=Et(),u=Ot(t,{relative:a});return k.useCallback((e=>{if(function(t,e){return 0===t.button&&(!e||"_self"===e)&&!function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)}(e,n)){e.preventDefault();let n=void 0!==r?r:z(l)===z(u);c(t,{replace:n,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:s})}}),[l,c,u,r,i,n,t,o,a,s])}(l,{replace:a,state:s,target:c,preventScrollReset:u,relative:i,unstable_viewTransition:h});return k.createElement("a",Ht({},d,{href:n||m,onClick:f||o?r:function(t){r&&r(t),t.defaultPrevented||g(t)},ref:e,target:c}))}));var Qt,te;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Qt||(Qt={})),function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(te||(te={}));const ee=Object.freeze({left:0,top:0,width:16,height:16}),ne=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),re=Object.freeze({...ee,...ne}),ie=Object.freeze({...re,body:"",hidden:!1});function oe(t,e){const n=function(t,e){const n={};!t.hFlip!==!e.hFlip&&(n.hFlip=!0),!t.vFlip!==!e.vFlip&&(n.vFlip=!0);const r=((t.rotate||0)+(e.rotate||0))%4;return r&&(n.rotate=r),n}(t,e);for(const r in ie)r in ne?r in t&&!(r in n)&&(n[r]=ne[r]):r in e?n[r]=e[r]:r in t&&(n[r]=t[r]);return n}function ae(t,e,n){const r=t.icons,i=t.aliases||Object.create(null);let o={};function a(t){o=oe(r[t]||i[t],o)}return a(e),n.forEach(a),oe(t,o)}function se(t,e){const n=[];if("object"!==typeof t||"object"!==typeof t.icons)return n;t.not_found instanceof Array&&t.not_found.forEach((t=>{e(t,null),n.push(t)}));const r=function(t,e){const n=t.icons,r=t.aliases||Object.create(null),i=Object.create(null);return(e||Object.keys(n).concat(Object.keys(r))).forEach((function t(e){if(n[e])return i[e]=[];if(!(e in i)){i[e]=null;const n=r[e]&&r[e].parent,o=n&&t(n);o&&(i[e]=[n].concat(o))}return i[e]})),i}(t);for(const i in r){const o=r[i];o&&(e(i,ae(t,i,o)),n.push(i))}return n}const ce=/^[a-z0-9]+(-[a-z0-9]+)*$/,le=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const i=t.split(":");if("@"===t.slice(0,1)){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const t=i.pop(),n=i.pop(),o={provider:i.length>0?i[0]:r,prefix:n,name:t};return e&&!ue(o)?null:o}const o=i[0],a=o.split("-");if(a.length>1){const t={provider:r,prefix:a.shift(),name:a.join("-")};return e&&!ue(t)?null:t}if(n&&""===r){const t={provider:r,prefix:"",name:o};return e&&!ue(t,n)?null:t}return null},ue=(t,e)=>!!t&&!(""!==t.provider&&!t.provider.match(ce)||!(e&&""===t.prefix||t.prefix.match(ce))||!t.name.match(ce)),he={provider:"",aliases:{},not_found:{},...ee};function de(t,e){for(const n in e)if(n in t&&typeof t[n]!==typeof e[n])return!1;return!0}function pe(t){if("object"!==typeof t||null===t)return null;const e=t;if("string"!==typeof e.prefix||!t.icons||"object"!==typeof t.icons)return null;if(!de(t,he))return null;const n=e.icons;for(const i in n){const t=n[i];if(!i.match(ce)||"string"!==typeof t.body||!de(t,ie))return null}const r=e.aliases||Object.create(null);for(const i in r){const t=r[i],e=t.parent;if(!i.match(ce)||"string"!==typeof e||!n[e]&&!r[e]||!de(t,ie))return null}return e}const fe=Object.create(null);function me(t,e){const n=fe[t]||(fe[t]=Object.create(null));return n[e]||(n[e]=function(t,e){return{provider:t,prefix:e,icons:Object.create(null),missing:new Set}}(t,e))}function ge(t,e){return pe(e)?se(e,((e,n)=>{n?t.icons[e]=n:t.missing.add(e)})):[]}let ye=!1;function ve(t){return"boolean"===typeof t&&(ye=t),ye}function be(t){const e="string"===typeof t?le(t,!0,ye):t;if(e){const t=me(e.provider,e.prefix),n=e.name;return t.icons[n]||(t.missing.has(n)?null:void 0)}}function xe(t,e){if("object"!==typeof t)return!1;if("string"!==typeof e&&(e=t.provider||""),ye&&!e&&!t.prefix){let e=!1;return pe(t)&&(t.prefix="",se(t,((t,n)=>{n&&function(t,e){const n=le(t,!0,ye);return!!n&&function(t,e,n){try{if("string"===typeof n.body)return t.icons[e]={...n},!0}catch(r){}return!1}(me(n.provider,n.prefix),n.name,e)}(t,n)&&(e=!0)}))),e}const n=t.prefix;if(!ue({provider:e,prefix:n,name:"a"}))return!1;return!!ge(me(e,n),t)}const _e=Object.freeze({width:null,height:null}),we=Object.freeze({..._e,...ne}),Se=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Te=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Ee(t,e,n){if(1===e)return t;if(n=n||100,"number"===typeof t)return Math.ceil(t*e*n)/n;if("string"!==typeof t)return t;const r=t.split(Se);if(null===r||!r.length)return t;const i=[];let o=r.shift(),a=Te.test(o);for(;;){if(a){const t=parseFloat(o);isNaN(t)?i.push(o):i.push(Math.ceil(t*e*n)/n)}else i.push(o);if(o=r.shift(),void 0===o)return i.join("");a=!a}}const Ae=/\sid="(\S+)"/g,Me="IconifyId"+Date.now().toString(16)+(16777216*Math.random()|0).toString(16);let Oe=0;function Ce(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Me;const n=[];let r;for(;r=Ae.exec(t);)n.push(r[1]);if(!n.length)return t;const i="suffix"+(16777216*Math.random()|Date.now()).toString(16);return n.forEach((n=>{const r="function"===typeof e?e(n):e+(Oe++).toString(),o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+o+')([")]|\\.[a-z])',"g"),"$1"+r+i+"$3")})),t=t.replace(new RegExp(i,"g"),"")}const ke=Object.create(null);function Pe(t,e){ke[t]=e}function Ie(t){return ke[t]||ke[""]}function Ne(t){let e;if("string"===typeof t.resources)e=[t.resources];else if(e=t.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:t.path||"/",maxURL:t.maxURL||500,rotate:t.rotate||750,timeout:t.timeout||5e3,random:!0===t.random,index:t.index||0,dataAfterTimeout:!1!==t.dataAfterTimeout}}const Re=Object.create(null),De=["https://api.simplesvg.com","https://api.unisvg.com"],Le=[];for(;De.length>0;)1===De.length||Math.random()>.5?Le.push(De.shift()):Le.push(De.pop());function Fe(t,e){const n=Ne(e);return null!==n&&(Re[t]=n,!0)}function je(t){return Re[t]}Re[""]=Ne({resources:["https://api.iconify.design"].concat(Le)});let Ue=(()=>{let t;try{if(t=fetch,"function"===typeof t)return t}catch(e){}})();const Be={prepare:(t,e,n)=>{const r=[],i=function(t,e){const n=je(t);if(!n)return 0;let r;if(n.maxURL){let t=0;n.resources.forEach((e=>{const n=e;t=Math.max(t,n.length)}));const i=e+".json?icons=";r=n.maxURL-t-n.path.length-i.length}else r=0;return r}(t,e),o="icons";let a={type:o,provider:t,prefix:e,icons:[]},s=0;return n.forEach(((n,c)=>{s+=n.length+1,s>=i&&c>0&&(r.push(a),a={type:o,provider:t,prefix:e,icons:[]},s=n.length),a.icons.push(n)})),r.push(a),r},send:(t,e,n)=>{if(!Ue)return void n("abort",424);let r=function(t){if("string"===typeof t){const e=je(t);if(e)return e.path}return"/"}(e.provider);switch(e.type){case"icons":{const t=e.prefix,n=e.icons.join(",");r+=t+".json?"+new URLSearchParams({icons:n}).toString();break}case"custom":{const t=e.uri;r+="/"===t.slice(0,1)?t.slice(1):t;break}default:return void n("abort",400)}let i=503;Ue(t+r).then((t=>{const e=t.status;if(200===e)return i=501,t.json();setTimeout((()=>{n(function(t){return 404===t}(e)?"abort":"next",e)}))})).then((t=>{"object"===typeof t&&null!==t?setTimeout((()=>{n("success",t)})):setTimeout((()=>{404===t?n("abort",t):n("next",i)}))})).catch((()=>{n("next",i)}))}};function ze(t,e){t.forEach((t=>{const n=t.loaderCallbacks;n&&(t.loaderCallbacks=n.filter((t=>t.id!==e)))}))}let Ve=0;var Ge={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function We(t,e,n,r){const i=t.resources.length,o=t.random?Math.floor(Math.random()*i):t.index;let a;if(t.random){let e=t.resources.slice(0);for(a=[];e.length>1;){const t=Math.floor(Math.random()*e.length);a.push(e[t]),e=e.slice(0,t).concat(e.slice(t+1))}a=a.concat(e)}else a=t.resources.slice(o).concat(t.resources.slice(0,o));const s=Date.now();let c,l="pending",u=0,h=null,d=[],p=[];function f(){h&&(clearTimeout(h),h=null)}function m(){"pending"===l&&(l="aborted"),f(),d.forEach((t=>{"pending"===t.status&&(t.status="aborted")})),d=[]}function g(t,e){e&&(p=[]),"function"===typeof t&&p.push(t)}function y(){l="failed",p.forEach((t=>{t(void 0,c)}))}function v(){d.forEach((t=>{"pending"===t.status&&(t.status="aborted")})),d=[]}function b(){if("pending"!==l)return;f();const r=a.shift();if(void 0===r)return d.length?void(h=setTimeout((()=>{f(),"pending"===l&&(v(),y())}),t.timeout)):void y();const i={status:"pending",resource:r,callback:(e,n)=>{!function(e,n,r){const i="success"!==n;switch(d=d.filter((t=>t!==e)),l){case"pending":break;case"failed":if(i||!t.dataAfterTimeout)return;break;default:return}if("abort"===n)return c=r,void y();if(i)return c=r,void(d.length||(a.length?b():y()));if(f(),v(),!t.random){const n=t.resources.indexOf(e.resource);-1!==n&&n!==t.index&&(t.index=n)}l="completed",p.forEach((t=>{t(r)}))}(i,e,n)}};d.push(i),u++,h=setTimeout(b,t.rotate),n(r,e,i.callback)}return"function"===typeof r&&p.push(r),setTimeout(b),function(){return{startTime:s,payload:e,status:l,queriesSent:u,queriesPending:d.length,subscribe:g,abort:m}}}function He(t){const e={...Ge,...t};let n=[];function r(){n=n.filter((t=>"pending"===t().status))}const i={query:function(t,i,o){const a=We(e,t,i,((t,e)=>{r(),o&&o(t,e)}));return n.push(a),a},find:function(t){return n.find((e=>t(e)))||null},setIndex:t=>{e.index=t},getIndex:()=>e.index,cleanup:r};return i}function qe(){}const Xe=Object.create(null);function Ye(t,e,n){let r,i;if("string"===typeof t){const e=Ie(t);if(!e)return n(void 0,424),qe;i=e.send;const o=function(t){if(!Xe[t]){const e=je(t);if(!e)return;const n={config:e,redundancy:He(e)};Xe[t]=n}return Xe[t]}(t);o&&(r=o.redundancy)}else{const e=Ne(t);if(e){r=He(e);const n=Ie(t.resources?t.resources[0]:"");n&&(i=n.send)}}return r&&i?r.query(e,i,n)().abort:(n(void 0,424),qe)}const Ke="iconify2",Ze="iconify",Je=Ze+"-count",$e=Ze+"-version",Qe=36e5,tn=168,en=50;function nn(t,e){try{return t.getItem(e)}catch(n){}}function rn(t,e,n){try{return t.setItem(e,n),!0}catch(r){}}function on(t,e){try{t.removeItem(e)}catch(n){}}function an(t,e){return rn(t,Je,e.toString())}function sn(t){return parseInt(nn(t,Je))||0}const cn={local:!0,session:!0},ln={local:new Set,session:new Set};let un=!1;let hn="undefined"===typeof window?{}:window;function dn(t){const e=t+"Storage";try{if(hn&&hn[e]&&"number"===typeof hn[e].length)return hn[e]}catch(n){}cn[t]=!1}function pn(t,e){const n=dn(t);if(!n)return;const r=nn(n,$e);if(r!==Ke){if(r){const t=sn(n);for(let e=0;e<t;e++)on(n,Ze+e.toString())}return rn(n,$e,Ke),void an(n,0)}const i=Math.floor(Date.now()/Qe)-tn,o=t=>{const r=Ze+t.toString(),o=nn(n,r);if("string"===typeof o){try{const n=JSON.parse(o);if("object"===typeof n&&"number"===typeof n.cached&&n.cached>i&&"string"===typeof n.provider&&"object"===typeof n.data&&"string"===typeof n.data.prefix&&e(n,t))return!0}catch(a){}on(n,r)}};let a=sn(n);for(let s=a-1;s>=0;s--)o(s)||(s===a-1?(a--,an(n,a)):ln[t].add(s))}function fn(){if(!un){un=!0;for(const t in cn)pn(t,(t=>{const e=t.data,n=me(t.provider,e.prefix);if(!ge(n,e).length)return!1;const r=e.lastModified||-1;return n.lastModifiedCached=n.lastModifiedCached?Math.min(n.lastModifiedCached,r):r,!0}))}}function mn(t,e){function n(n){let r;if(!cn[n]||!(r=dn(n)))return;const i=ln[n];let o;if(i.size)i.delete(o=Array.from(i).shift());else if(o=sn(r),o>=en||!an(r,o+1))return;const a={cached:Math.floor(Date.now()/Qe),provider:t.provider,data:e};return rn(r,Ze+o.toString(),JSON.stringify(a))}un||fn(),e.lastModified&&!function(t,e){const n=t.lastModifiedCached;if(n&&n>=e)return n===e;if(t.lastModifiedCached=e,n)for(const r in cn)pn(r,(n=>{const r=n.data;return n.provider!==t.provider||r.prefix!==t.prefix||r.lastModified===e}));return!0}(t,e.lastModified)||Object.keys(e.icons).length&&(e.not_found&&delete(e=Object.assign({},e)).not_found,n("local")||n("session"))}function gn(){}function yn(t){t.iconsLoaderFlag||(t.iconsLoaderFlag=!0,setTimeout((()=>{t.iconsLoaderFlag=!1,function(t){t.pendingCallbacksFlag||(t.pendingCallbacksFlag=!0,setTimeout((()=>{t.pendingCallbacksFlag=!1;const e=t.loaderCallbacks?t.loaderCallbacks.slice(0):[];if(!e.length)return;let n=!1;const r=t.provider,i=t.prefix;e.forEach((e=>{const o=e.icons,a=o.pending.length;o.pending=o.pending.filter((e=>{if(e.prefix!==i)return!0;const a=e.name;if(t.icons[a])o.loaded.push({provider:r,prefix:i,name:a});else{if(!t.missing.has(a))return n=!0,!0;o.missing.push({provider:r,prefix:i,name:a})}return!1})),o.pending.length!==a&&(n||ze([t],e.id),e.callback(o.loaded.slice(0),o.missing.slice(0),o.pending.slice(0),e.abort))}))})))}(t)})))}const vn=(t,e)=>{const n=function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=[];return t.forEach((t=>{const i="string"===typeof t?le(t,e,n):t;i&&r.push(i)})),r}(t,!0,ve()),r=function(t){const e={loaded:[],missing:[],pending:[]},n=Object.create(null);t.sort(((t,e)=>t.provider!==e.provider?t.provider.localeCompare(e.provider):t.prefix!==e.prefix?t.prefix.localeCompare(e.prefix):t.name.localeCompare(e.name)));let r={provider:"",prefix:"",name:""};return t.forEach((t=>{if(r.name===t.name&&r.prefix===t.prefix&&r.provider===t.provider)return;r=t;const i=t.provider,o=t.prefix,a=t.name,s=n[i]||(n[i]=Object.create(null)),c=s[o]||(s[o]=me(i,o));let l;l=a in c.icons?e.loaded:""===o||c.missing.has(a)?e.missing:e.pending;const u={provider:i,prefix:o,name:a};l.push(u)})),e}(n);if(!r.pending.length){let t=!0;return e&&setTimeout((()=>{t&&e(r.loaded,r.missing,r.pending,gn)})),()=>{t=!1}}const i=Object.create(null),o=[];let a,s;return r.pending.forEach((t=>{const{provider:e,prefix:n}=t;if(n===s&&e===a)return;a=e,s=n,o.push(me(e,n));const r=i[e]||(i[e]=Object.create(null));r[n]||(r[n]=[])})),r.pending.forEach((t=>{const{provider:e,prefix:n,name:r}=t,o=me(e,n),a=o.pendingIcons||(o.pendingIcons=new Set);a.has(r)||(a.add(r),i[e][n].push(r))})),o.forEach((t=>{const{provider:e,prefix:n}=t;i[e][n].length&&function(t,e){t.iconsToLoad?t.iconsToLoad=t.iconsToLoad.concat(e).sort():t.iconsToLoad=e,t.iconsQueueFlag||(t.iconsQueueFlag=!0,setTimeout((()=>{t.iconsQueueFlag=!1;const{provider:e,prefix:n}=t,r=t.iconsToLoad;let i;delete t.iconsToLoad,r&&(i=Ie(e))&&i.prepare(e,n,r).forEach((n=>{Ye(e,n,(e=>{if("object"!==typeof e)n.icons.forEach((e=>{t.missing.add(e)}));else try{const n=ge(t,e);if(!n.length)return;const r=t.pendingIcons;r&&n.forEach((t=>{r.delete(t)})),mn(t,e)}catch(r){console.error(r)}yn(t)}))}))})))}(t,i[e][n])})),e?function(t,e,n){const r=Ve++,i=ze.bind(null,n,r);if(!e.pending.length)return i;const o={id:r,icons:e,callback:t,abort:i};return n.forEach((t=>{(t.loaderCallbacks||(t.loaderCallbacks=[])).push(o)})),i}(e,r,o):gn};const bn=/[\s,]+/;function xn(t,e){e.split(bn).forEach((e=>{switch(e.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0}}))}function _n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=t.replace(/^-?[0-9.]*/,"");function r(t){for(;t<0;)t+=4;return t%4}if(""===n){const e=parseInt(t);return isNaN(e)?0:r(e)}if(n!==t){let e=0;switch(n){case"%":e=25;break;case"deg":e=90}if(e){let i=parseFloat(t.slice(0,t.length-n.length));return isNaN(i)?0:(i/=e,i%1===0?r(i):0)}}return e}let wn;function Sn(t){return void 0===wn&&function(){try{wn=window.trustedTypes.createPolicy("iconify",{createHTML:t=>t})}catch(t){wn=null}}(),wn?wn.createHTML(t):t}const Tn={...we,inline:!1},En={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},An={display:"inline-block"},Mn={backgroundColor:"currentColor"},On={backgroundColor:"transparent"},Cn={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},kn={WebkitMask:Mn,mask:Mn,background:On};for(const Set in kn){const t=kn[Set];for(const e in Cn)t[Set+e]=Cn[e]}const Pn={...Tn,inline:!0};function In(t){return t+(t.match(/^[-0-9.]+$/)?"px":"")}const Nn=(t,e,n)=>{const r=e.inline?Pn:Tn,i=function(t,e){const n={...t};for(const r in e){const t=e[r],i=typeof t;r in _e?(null===t||t&&("string"===i||"number"===i))&&(n[r]=t):i===typeof n[r]&&(n[r]="rotate"===r?t%4:t)}return n}(r,e),o=e.mode||"svg",a={},s=e.style||{},c={..."svg"===o?En:{}};if(n){const t=le(n,!1,!0);if(t){const e=["iconify"],n=["provider","prefix"];for(const r of n)t[r]&&e.push("iconify--"+t[r]);c.className=e.join(" ")}}for(let y in e){const t=e[y];if(void 0!==t)switch(y){case"icon":case"style":case"children":case"onLoad":case"mode":case"ssr":break;case"_ref":c.ref=t;break;case"className":c[y]=(c[y]?c[y]+" ":"")+t;break;case"inline":case"hFlip":case"vFlip":i[y]=!0===t||"true"===t||1===t;break;case"flip":"string"===typeof t&&xn(i,t);break;case"color":a.color=t;break;case"rotate":"string"===typeof t?i[y]=_n(t):"number"===typeof t&&(i[y]=t);break;case"ariaHidden":case"aria-hidden":!0!==t&&"true"!==t&&delete c["aria-hidden"];break;default:void 0===r[y]&&(c[y]=t)}}const l=function(t,e){const n={...re,...t},r={...we,...e},i={left:n.left,top:n.top,width:n.width,height:n.height};let o=n.body;[n,r].forEach((t=>{const e=[],n=t.hFlip,r=t.vFlip;let a,s=t.rotate;switch(n?r?s+=2:(e.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),e.push("scale(-1 1)"),i.top=i.left=0):r&&(e.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),e.push("scale(1 -1)"),i.top=i.left=0),s<0&&(s-=4*Math.floor(s/4)),s%=4,s){case 1:a=i.height/2+i.top,e.unshift("rotate(90 "+a.toString()+" "+a.toString()+")");break;case 2:e.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:a=i.width/2+i.left,e.unshift("rotate(-90 "+a.toString()+" "+a.toString()+")")}s%2===1&&(i.left!==i.top&&(a=i.left,i.left=i.top,i.top=a),i.width!==i.height&&(a=i.width,i.width=i.height,i.height=a)),e.length&&(o=function(t,e,n){const r=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"defs",n="";const r=t.indexOf("<"+e);for(;r>=0;){const i=t.indexOf(">",r),o=t.indexOf("</"+e);if(-1===i||-1===o)break;const a=t.indexOf(">",o);if(-1===a)break;n+=t.slice(i+1,o).trim(),t=t.slice(0,r).trim()+t.slice(a+1)}return{defs:n,content:t}}(t);return i=r.defs,o=e+r.content+n,i?"<defs>"+i+"</defs>"+o:o;var i,o}(o,'<g transform="'+e.join(" ")+'">',"</g>"))}));const a=r.width,s=r.height,c=i.width,l=i.height;let u,h;null===a?(h=null===s?"1em":"auto"===s?l:s,u=Ee(h,c/l)):(u="auto"===a?c:a,h=null===s?Ee(u,l/c):"auto"===s?l:s);const d={},p=(t,e)=>{(t=>"unset"===t||"undefined"===t||"none"===t)(e)||(d[t]=e.toString())};p("width",u),p("height",h);const f=[i.left,i.top,c,l];return d.viewBox=f.join(" "),{attributes:d,viewBox:f,body:o}}(t,i),u=l.attributes;if(i.inline&&(a.verticalAlign="-0.125em"),"svg"===o){c.style={...a,...s},Object.assign(c,u);let t=0,n=e.id;return"string"===typeof n&&(n=n.replace(/-/g,"_")),c.dangerouslySetInnerHTML={__html:Sn(Ce(l.body,n?()=>n+"ID"+t++:"iconifyReact"))},(0,k.createElement)("svg",c)}const{body:h,width:d,height:p}=t,f="mask"===o||"bg"!==o&&-1!==h.indexOf("currentColor"),m=function(t,e){let n=-1===t.indexOf("xlink:")?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in e)n+=" "+r+'="'+e[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+t+"</svg>"}(h,{...u,width:d+"",height:p+""});var g;return c.style={...a,"--svg":(g=m,'url("'+function(t){return"data:image/svg+xml,"+function(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}(t)}(g)+'")'),width:In(u.width),height:In(u.height),...An,...f?Mn:On,...s},(0,k.createElement)("span",c)};if(ve(!0),Pe("",Be),"undefined"!==typeof document&&"undefined"!==typeof window){fn();const t=window;if(void 0!==t.IconifyPreload){const e=t.IconifyPreload,n="Invalid IconifyPreload syntax.";"object"===typeof e&&null!==e&&(e instanceof Array?e:[e]).forEach((t=>{try{("object"!==typeof t||null===t||t instanceof Array||"object"!==typeof t.icons||"string"!==typeof t.prefix||!xe(t))&&console.error(n)}catch(sCt){console.error(n)}}))}if(void 0!==t.IconifyProviders){const e=t.IconifyProviders;if("object"===typeof e&&null!==e)for(let t in e){const n="IconifyProviders["+t+"] is invalid.";try{const r=e[t];if("object"!==typeof r||!r||void 0===r.resources)continue;Fe(t,r)||console.error(n)}catch(sCt){console.error(n)}}}}function Rn(t){const[e,n]=(0,k.useState)(!!t.ssr),[r,i]=(0,k.useState)({});const[o,a]=(0,k.useState)(function(e){if(e){const e=t.icon;if("object"===typeof e)return{name:"",data:e};const n=be(e);if(n)return{name:e,data:n}}return{name:""}}(!!t.ssr));function s(){const t=r.callback;t&&(t(),i({}))}function c(t){if(JSON.stringify(o)!==JSON.stringify(t))return s(),a(t),!0}function l(){var e;const n=t.icon;if("object"===typeof n)return void c({name:"",data:n});const r=be(n);if(c({name:n,data:r}))if(void 0===r){const t=vn([n],l);i({callback:t})}else r&&(null===(e=t.onLoad)||void 0===e||e.call(t,n))}(0,k.useEffect)((()=>(n(!0),s)),[]),(0,k.useEffect)((()=>{e&&l()}),[t.icon,e]);const{name:u,data:h}=o;return h?Nn({...re,...h},t,u):t.children?t.children:(0,k.createElement)("span",{})}const Dn=(0,k.forwardRef)(((t,e)=>Rn({...t,_ref:e})));(0,k.forwardRef)(((t,e)=>Rn({inline:!0,...t,_ref:e})));var Ln=__webpack_require__(579);const Fn=t=>{let{setNavBarHeight:e}=t;const[n,r]=(0,k.useState)(!1),[i,o]=(0,k.useState)(!1),a=(0,k.useRef)(null),s=()=>{r(!n)},c=()=>{o(!i)};return(0,k.useEffect)((()=>{a.current&&e(a.current.offsetHeight)}),[e]),(0,Ln.jsxs)("div",{ref:a,className:"navbar bg-base-100 fixed top-0 left-0 w-full z-50 sm:h-10",children:[(0,Ln.jsx)("div",{className:"navbar-start",children:(0,Ln.jsx)($t,{to:"/",children:(0,Ln.jsxs)("div",{className:"btn btn-ghost text-xl",children:[(0,Ln.jsx)(Dn,{icon:"gravity-ui:terminal"}),"Mahamadou"]})})}),(0,Ln.jsx)("div",{className:"navbar-center hidden lg:flex",children:(0,Ln.jsxs)("ul",{className:"menu menu-horizontal px-1",children:[(0,Ln.jsx)("li",{className:"text-xl mx-5 font-bold",children:(0,Ln.jsx)($t,{to:"/resume",children:"Resume"})}),(0,Ln.jsxs)("li",{className:"text-xl mx-5 font-bold relative",children:[(0,Ln.jsxs)("button",{onClick:s,className:"flex items-center space-x-1",children:[(0,Ln.jsx)("span",{children:"Projects"}),(0,Ln.jsx)(Dn,{icon:n?"mdi:chevron-up":"mdi:chevron-down"})]}),n&&(0,Ln.jsxs)("ul",{className:"absolute shadow-lg p-2 mt-10 space-y-2 rounded-lg z-10 bg-slate-700",children:[(0,Ln.jsx)("li",{className:"text-base",onClick:s,children:(0,Ln.jsx)($t,{to:"/projects/computervision",children:"Computer Vision"})}),(0,Ln.jsx)("li",{className:"text-base",onClick:s,children:(0,Ln.jsx)($t,{to:"/projects/nlp",children:"NLP"})}),(0,Ln.jsx)("li",{className:"text-base",onClick:s,children:(0,Ln.jsx)($t,{to:"/projects/dataviz",children:"Data Viz"})})]})]})]})}),(0,Ln.jsx)("div",{className:"navbar-end lg:hidden",children:(0,Ln.jsx)("button",{onClick:c,className:"btn btn-ghost",children:(0,Ln.jsx)(Dn,{icon:i?"mdi:close":"mdi:menu",className:"text-2xl"})})}),i&&(0,Ln.jsx)("div",{className:"fixed inset-x-0 top-0 z-50 bg-base-100 pt-16 overflow-y-auto w-2/3",children:(0,Ln.jsxs)("ul",{className:"menu p-4",children:[(0,Ln.jsx)("li",{className:"text-xl font-bold py-2",children:(0,Ln.jsx)($t,{to:"/resume",onClick:c,children:"Resume"})}),(0,Ln.jsxs)("li",{className:"text-xl font-bold py-2",children:[(0,Ln.jsxs)("button",{onClick:s,className:"flex items-center justify-between w-full",children:[(0,Ln.jsx)("span",{children:"Projects"}),(0,Ln.jsx)(Dn,{icon:n?"mdi:chevron-up":"mdi:chevron-down"})]}),n&&(0,Ln.jsxs)("ul",{className:"pl-4 mt-2 space-y-2",children:[(0,Ln.jsx)("li",{className:"text-base",onClick:()=>{s(),c()},children:(0,Ln.jsx)($t,{to:"/projects/computervision",children:"Computer Vision"})}),(0,Ln.jsx)("li",{className:"text-base",onClick:()=>{s(),c()},children:(0,Ln.jsx)($t,{to:"/projects/nlp",children:"NLP"})}),(0,Ln.jsx)("li",{className:"text-base",onClick:()=>{s(),c()},children:(0,Ln.jsx)($t,{to:"/projects/dataviz",children:"Data Viz"})})]})]})]})})]})};function jn(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))}function Un(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Bn(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zn(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Vn(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function Gn(t,e,n,r,i){for(var o=[],a=5;a<arguments.length;a++)o[a-5]=arguments[a];return jn(this,void 0,void 0,(function(){var a,s,c,l,u,h;return Un(this,(function(d){switch(d.label){case 0:d.trys.push([0,12,13,14]),a=Bn(o),s=a.next(),d.label=1;case 1:if(s.done)return[3,11];switch(typeof(c=s.value)){case"string":return[3,2];case"number":return[3,4];case"function":return[3,6]}return[3,8];case 2:return[4,Wn(t,e,c,n,r,i)];case 3:return d.sent(),[3,10];case 4:return[4,Hn(c)];case 5:return d.sent(),[3,10];case 6:return[4,c.apply(void 0,Vn([t,e,n,r,i],zn(o),!1))];case 7:return d.sent(),[3,10];case 8:return[4,c];case 9:d.sent(),d.label=10;case 10:return s=a.next(),[3,1];case 11:return[3,14];case 12:return l=d.sent(),u={error:l},[3,14];case 13:try{s&&!s.done&&(h=a.return)&&h.call(a)}finally{if(u)throw u.error}return[7];case 14:return[2]}}))}))}function Wn(t,e,n,r,i,o){return jn(this,void 0,void 0,(function(){var a,s;return Un(this,(function(c){switch(c.label){case 0:return a=t.textContent||"",s=function(t,e){var n=zn(e).slice(0);return Vn(Vn([],zn(t),!1),[NaN],!1).findIndex((function(t,e){return n[e]!==t}))}(a,n),[4,qn(t,Vn(Vn([],zn(Yn(a,e,s)),!1),zn(Xn(n,e,s)),!1),r,i,o)];case 1:return c.sent(),[2]}}))}))}function Hn(t){return jn(this,void 0,void 0,(function(){return Un(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e){return setTimeout(e,t)}))];case 1:return e.sent(),[2]}}))}))}function qn(t,e,n,r,i){return jn(this,void 0,void 0,(function(){var o,a,s,c,l,u,h,d,p,f,m,g,y;return Un(this,(function(v){switch(v.label){case 0:if(o=e,i){for(a=0,s=1;s<e.length;s++)if(c=zn([e[s-1],e[s]],2),l=c[0],(u=c[1]).length>l.length||""===u){a=s;break}o=e.slice(a,e.length)}v.label=1;case 1:v.trys.push([1,6,7,8]),h=Bn(function(t){var e,n,r,i,o,a,s;return Un(this,(function(c){switch(c.label){case 0:e=function(t){return Un(this,(function(e){switch(e.label){case 0:return[4,{op:function(e){return requestAnimationFrame((function(){return e.textContent=t}))},opCode:function(e){var n=e.textContent||"";return""===t||n.length>t.length?"DELETE":"WRITING"}}];case 1:return e.sent(),[2]}}))},c.label=1;case 1:c.trys.push([1,6,7,8]),n=Bn(t),r=n.next(),c.label=2;case 2:return r.done?[3,5]:(i=r.value,[5,e(i)]);case 3:c.sent(),c.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return o=c.sent(),a={error:o},[3,8];case 7:try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}return[7];case 8:return[2]}}))}(o)),d=h.next(),v.label=2;case 2:return d.done?[3,5]:(p=d.value,f="WRITING"===p.opCode(t)?n+n*(Math.random()-.5):r+r*(Math.random()-.5),p.op(t),[4,Hn(f)]);case 3:v.sent(),v.label=4;case 4:return d=h.next(),[3,2];case 5:return[3,8];case 6:return m=v.sent(),g={error:m},[3,8];case 7:try{d&&!d.done&&(y=h.return)&&y.call(h)}finally{if(g)throw g.error}return[7];case 8:return[2]}}))}))}function Xn(t,e,n){var r,i;return void 0===n&&(n=0),Un(this,(function(o){switch(o.label){case 0:r=e(t),i=r.length,o.label=1;case 1:return n<i?[4,r.slice(0,++n).join("")]:[3,3];case 2:return o.sent(),[3,1];case 3:return[2]}}))}function Yn(t,e,n){var r,i;return void 0===n&&(n=0),Un(this,(function(o){switch(o.label){case 0:r=e(t),i=r.length,o.label=1;case 1:return i>n?[4,r.slice(0,--i).join("")]:[3,3];case 2:return o.sent(),[3,1];case 3:return[2]}}))}!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}(".index-module_type__E-SaG::after {\n  content: '|';\n  animation: index-module_cursor__PQg0P 1.1s infinite step-start;\n}\n\n@keyframes index-module_cursor__PQg0P {\n  50% {\n    opacity: 0;\n  }\n}\n");var Kn=(0,k.memo)((0,k.forwardRef)((function(t,e){var n=t.sequence,r=t.repeat,i=t.className,o=t.speed,a=void 0===o?40:o,s=t.deletionSpeed,c=t.omitDeletionAnimation,l=void 0!==c&&c,u=t.preRenderFirstString,h=void 0!==u&&u,d=t.wrapper,p=void 0===d?"span":d,f=t.splitter,m=void 0===f?function(t){return Vn([],zn(t),!1)}:f,g=t.cursor,y=void 0===g||g,v=t.style,b=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["sequence","repeat","className","speed","deletionSpeed","omitDeletionAnimation","preRenderFirstString","wrapper","splitter","cursor","style"]),x=b["aria-label"],_=b["aria-hidden"],w=b.role;s||(s=a);var S=new Array(2).fill(40);[a,s].forEach((function(t,e){switch(typeof t){case"number":S[e]=Math.abs(t-100);break;case"object":var n=t.type,r=t.value;if("number"!=typeof r)break;"keyStrokeDelayInMs"===n&&(S[e]=r)}}));var T,E,A,M,O,C,P=S[0],I=S[1],N=function(t,e){void 0===e&&(e=null);var n=(0,k.useRef)(e);return(0,k.useEffect)((function(){t&&("function"==typeof t?t(n.current):t.current=n.current)}),[t]),n}(e),R="index-module_type__E-SaG";T=i?"".concat(y?R+" ":"").concat(i):y?R:"",E=(0,k.useRef)((function(){var t,e=n;r===1/0?t=Gn:"number"==typeof r&&(e=Array(1+r).fill(n).flat());var i=t?Vn(Vn([],zn(e),!1),[t],!1):Vn([],zn(e),!1);return Gn.apply(void 0,Vn([N.current,m,P,I,l],zn(i),!1)),function(){N.current}})),A=(0,k.useRef)(),M=(0,k.useRef)(!1),O=(0,k.useRef)(!1),C=zn((0,k.useState)(0),2)[1],M.current&&(O.current=!0),(0,k.useEffect)((function(){return M.current||(A.current=E.current(),M.current=!0),C((function(t){return t+1})),function(){O.current&&A.current&&A.current()}}),[]);var D=p,L=h?n.find((function(t){return"string"==typeof t}))||"":null;return k.createElement(D,{"aria-hidden":_,"aria-label":x,role:w,style:v,className:T,children:x?k.createElement("span",{"aria-hidden":"true",ref:N,children:L}):L,ref:x?void 0:N})})),(function(t,e){return!0}));const Zn=(0,k.createContext)({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Jn=(0,k.createContext)({}),$n=(0,k.createContext)(null),Qn="undefined"!==typeof document,tr=Qn?k.useLayoutEffect:k.useEffect,er=(0,k.createContext)({strict:!1}),nr=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),rr="data-"+nr("framerAppearId"),ir=!1,or=!1;class ar{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const e=this.order.indexOf(t);-1!==e&&(this.order.splice(e,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}const sr=["read","resolveKeyframes","update","preRender","render","postRender"];function cr(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=sr.reduce(((t,e)=>(t[e]=function(t){let e=new ar,n=new ar,r=0,i=!1,o=!1;const a=new WeakSet,s={schedule:function(t){const o=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,s=o?e:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(t),s.add(t)&&o&&i&&(r=e.order.length),t},cancel:t=>{n.remove(t),a.delete(t)},process:c=>{if(i)o=!0;else{if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let n=0;n<r;n++){const r=e.order[n];a.has(r)&&(s.schedule(r),t()),r(c)}i=!1,o&&(o=!1,s.process(c))}}};return s}((()=>n=!0)),t)),{}),a=t=>{o[t].process(i)},s=()=>{const o=or?i.timestamp:performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(o-i.timestamp,40),1),i.timestamp=o,i.isProcessing=!0,sr.forEach(a),i.isProcessing=!1,n&&e&&(r=!1,t(s))},c=sr.reduce(((e,a)=>{const c=o[a];return e[a]=function(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,i.isProcessing||t(s)),c.schedule(e,o,a)},e}),{});return{schedule:c,cancel:t=>sr.forEach((e=>o[e].cancel(t))),state:i,steps:o}}const{schedule:lr,cancel:ur}=cr(queueMicrotask,!1);function hr(t){return t&&"object"===typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}const dr=(0,k.createContext)({});let pr=!1;function fr(t,e,n,r,i){const{visualElement:o}=(0,k.useContext)(Jn),a=(0,k.useContext)(er),s=(0,k.useContext)($n),c=(0,k.useContext)(Zn).reducedMotion,l=(0,k.useRef)();r=r||a.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:o,props:n,presenceContext:s,blockInitialAnimation:!!s&&!1===s.initial,reducedMotionConfig:c}));const u=l.current,h=(0,k.useContext)(dr);!u||u.projection||!i||"html"!==u.type&&"svg"!==u.type||function(t,e,n,r){const{layoutId:i,layout:o,drag:a,dragConstraints:s,layoutScroll:c,layoutRoot:l}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:gr(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:Boolean(a)||s&&hr(s),visualElement:t,scheduleRender:()=>t.scheduleRender(),animationType:"string"===typeof o?o:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:l})}(l.current,n,i,h),(0,k.useInsertionEffect)((()=>{u&&u.update(n,s)}));const d=(0,k.useRef)(Boolean(n[rr]&&!window.HandoffComplete));return tr((()=>{u&&(u.updateFeatures(),lr.render(u.render),d.current&&u.animationState&&u.animationState.animateChanges())})),(0,k.useEffect)((()=>{u&&(!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,pr||(pr=!0,queueMicrotask(mr))))})),u}function mr(){window.HandoffComplete=!0}function gr(t){if(t)return!1!==t.options.allowProjection?t.projection:gr(t.parent)}function yr(t,e,n){return(0,k.useCallback)((r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&("function"===typeof n?n(r):hr(n)&&(n.current=r))}),[e])}function vr(t){return"string"===typeof t||Array.isArray(t)}function br(t){return null!==t&&"object"===typeof t&&"function"===typeof t.start}const xr=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_r=["initial",...xr];function wr(t){return br(t.animate)||_r.some((e=>vr(t[e])))}function Sr(t){return Boolean(wr(t)||t.variants)}function Tr(t){const{initial:e,animate:n}=function(t,e){if(wr(t)){const{initial:e,animate:n}=t;return{initial:!1===e||vr(e)?e:void 0,animate:vr(n)?n:void 0}}return!1!==t.inherit?e:{}}(t,(0,k.useContext)(Jn));return(0,k.useMemo)((()=>({initial:e,animate:n})),[Er(e),Er(n)])}function Er(t){return Array.isArray(t)?t.join(" "):t}const Ar={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Mr={};for(const Set in Ar)Mr[Set]={isEnabled:t=>Ar[Set].some((e=>!!t[e]))};const Or=(0,k.createContext)({}),Cr=Symbol.for("motionComponentSymbol");function kr(t){let{preloadedFeatures:e,createVisualElement:n,useRender:r,useVisualState:i,Component:o}=t;e&&function(t){for(const e in t)Mr[e]={...Mr[e],...t[e]}}(e);const a=(0,k.forwardRef)((function(t,e){let a;const s={...(0,k.useContext)(Zn),...t,layoutId:Pr(t)},{isStatic:c}=s,l=Tr(t),u=i(t,c);if(!c&&Qn){!function(t,e){(0,k.useContext)(er).strict;0}();const t=function(t){const{drag:e,layout:n}=Mr;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:(null===e||void 0===e?void 0:e.isEnabled(t))||(null===n||void 0===n?void 0:n.isEnabled(t))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(s);a=t.MeasureLayout,l.visualElement=fr(o,u,s,n,t.ProjectionNode)}return(0,Ln.jsxs)(Jn.Provider,{value:l,children:[a&&l.visualElement?(0,Ln.jsx)(a,{visualElement:l.visualElement,...s}):null,r(o,t,yr(u,l.visualElement,e),u,c,l.visualElement)]})}));return a[Cr]=o,a}function Pr(t){let{layoutId:e}=t;const n=(0,k.useContext)(Or).id;return n&&void 0!==e?n+"-"+e:e}function Ir(t){function e(e){return kr(t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return e;const n=new Map;return new Proxy(e,{get:(t,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const Nr=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Rr(t){return"string"===typeof t&&!t.includes("-")&&!!(Nr.indexOf(t)>-1||/[A-Z]/u.test(t))}const Dr={};const Lr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fr=new Set(Lr);function jr(t,e){let{layout:n,layoutId:r}=e;return Fr.has(t)||t.startsWith("origin")||(n||void 0!==r)&&(!!Dr[t]||"opacity"===t)}const Ur=t=>Boolean(t&&t.getVelocity),Br={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zr=Lr.length;const Vr=t=>e=>"string"===typeof e&&e.startsWith(t),Gr=Vr("--"),Wr=Vr("var(--"),Hr=t=>!!Wr(t)&&qr.test(t.split("/*")[0].trim()),qr=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Xr=(t,e)=>e&&"number"===typeof t?e.transform(t):t,Yr=(t,e,n)=>n>e?e:n<t?t:n,Kr={test:t=>"number"===typeof t,parse:parseFloat,transform:t=>t},Zr={...Kr,transform:t=>Yr(0,1,t)},Jr={...Kr,default:1},$r=t=>Math.round(1e5*t)/1e5,Qr=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,ti=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,ei=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function ni(t){return"string"===typeof t}const ri=t=>({test:e=>ni(e)&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>"".concat(e).concat(t)}),ii=ri("deg"),oi=ri("%"),ai=ri("px"),si=ri("vh"),ci=ri("vw"),li={...oi,parse:t=>oi.parse(t)/100,transform:t=>oi.transform(100*t)},ui={...Kr,transform:Math.round},hi={borderWidth:ai,borderTopWidth:ai,borderRightWidth:ai,borderBottomWidth:ai,borderLeftWidth:ai,borderRadius:ai,radius:ai,borderTopLeftRadius:ai,borderTopRightRadius:ai,borderBottomRightRadius:ai,borderBottomLeftRadius:ai,width:ai,maxWidth:ai,height:ai,maxHeight:ai,size:ai,top:ai,right:ai,bottom:ai,left:ai,padding:ai,paddingTop:ai,paddingRight:ai,paddingBottom:ai,paddingLeft:ai,margin:ai,marginTop:ai,marginRight:ai,marginBottom:ai,marginLeft:ai,rotate:ii,rotateX:ii,rotateY:ii,rotateZ:ii,scale:Jr,scaleX:Jr,scaleY:Jr,scaleZ:Jr,skew:ii,skewX:ii,skewY:ii,distance:ai,translateX:ai,translateY:ai,translateZ:ai,x:ai,y:ai,z:ai,perspective:ai,transformPerspective:ai,opacity:Zr,originX:li,originY:li,originZ:ai,zIndex:ui,backgroundPositionX:ai,backgroundPositionY:ai,fillOpacity:Zr,strokeOpacity:Zr,numOctaves:ui};function di(t,e,n,r){const{style:i,vars:o,transform:a,transformOrigin:s}=t;let c=!1,l=!1,u=!0;for(const h in e){const t=e[h];if(Gr(h)){o[h]=t;continue}const n=hi[h],r=Xr(t,n);if(Fr.has(h)){if(c=!0,a[h]=r,!u)continue;t!==(n.default||0)&&(u=!1)}else h.startsWith("origin")?(l=!0,s[h]=r):i[h]=r}if(e.transform||(c||r?i.transform=function(t,e,n,r){let{enableHardwareAcceleration:i=!0,allowTransformNone:o=!0}=e,a="";for(let s=0;s<zr;s++){const e=Lr[s];if(void 0!==t[e]){const n=Br[e]||e;a+="".concat(n,"(").concat(t[e],") ")}}return i&&!t.z&&(a+="translateZ(0)"),a=a.trim(),r?a=r(t,n?"":a):o&&n&&(a="none"),a}(t.transform,n,u,r):i.transform&&(i.transform="none")),l){const{originX:t="50%",originY:e="50%",originZ:n=0}=s;i.transformOrigin="".concat(t," ").concat(e," ").concat(n)}}const pi=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function fi(t,e,n){for(const r in e)Ur(e[r])||jr(r,n)||(t[r]=e[r])}function mi(t,e,n){const r={};return fi(r,t.style||{},t),Object.assign(r,function(t,e,n){let{transformTemplate:r}=t;return(0,k.useMemo)((()=>{const t=pi();return di(t,e,{enableHardwareAcceleration:!n},r),Object.assign({},t.vars,t.style)}),[e])}(t,e,n)),r}function gi(t,e,n){const r={},i=mi(t,e,n);return t.drag&&!1!==t.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===t.drag?"none":"pan-".concat("x"===t.drag?"y":"x")),void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const yi=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function vi(t){return t.startsWith("while")||t.startsWith("drag")&&"draggable"!==t||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||yi.has(t)}let bi=t=>!vi(t);try{(xi=require("@emotion/is-prop-valid").default)&&(bi=t=>t.startsWith("on")?!vi(t):xi(t))}catch(KM){}var xi;function _i(t,e,n){return"string"===typeof t?t:ai.transform(e+n*t)}const wi={offset:"stroke-dashoffset",array:"stroke-dasharray"},Si={offset:"strokeDashoffset",array:"strokeDasharray"};function Ti(t,e,n,r,i){let{attrX:o,attrY:a,attrScale:s,originX:c,originY:l,pathLength:u,pathSpacing:h=1,pathOffset:d=0,...p}=e;if(di(t,p,n,i),r)return void(t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox));t.attrs=t.style,t.style={};const{attrs:f,style:m,dimensions:g}=t;f.transform&&(g&&(m.transform=f.transform),delete f.transform),g&&(void 0!==c||void 0!==l||m.transform)&&(m.transformOrigin=function(t,e,n){const r=_i(e,t.x,t.width),i=_i(n,t.y,t.height);return"".concat(r," ").concat(i)}(g,void 0!==c?c:.5,void 0!==l?l:.5)),void 0!==o&&(f.x=o),void 0!==a&&(f.y=a),void 0!==s&&(f.scale=s),void 0!==u&&function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];t.pathLength=1;const o=i?wi:Si;t[o.offset]=ai.transform(-r);const a=ai.transform(e),s=ai.transform(n);t[o.array]="".concat(a," ").concat(s)}(f,u,h,d,!1)}const Ei=()=>({...pi(),attrs:{}}),Ai=t=>"string"===typeof t&&"svg"===t.toLowerCase();function Mi(t,e,n,r){const i=(0,k.useMemo)((()=>{const n=Ei();return Ti(n,e,{enableHardwareAcceleration:!1},Ai(r),t.transformTemplate),{...n.attrs,style:{...n.style}}}),[e]);if(t.style){const e={};fi(e,t.style,t),i.style={...e,...i.style}}return i}function Oi(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(e,n,r,i,o)=>{let{latestValues:a}=i;const s=(Rr(e)?Mi:gi)(n,a,o,e),c=function(t,e,n){const r={};for(const i in t)"values"===i&&"object"===typeof t.values||(bi(i)||!0===n&&vi(i)||!e&&!vi(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}(n,"string"===typeof e,t),l=e!==k.Fragment?{...c,...s,ref:r}:{},{children:u}=n,h=(0,k.useMemo)((()=>Ur(u)?u.get():u),[u]);return(0,k.createElement)(e,{...l,children:h})}}function Ci(t,e,n,r){let{style:i,vars:o}=e;Object.assign(t.style,i,r&&r.getProjectionStyles(n));for(const a in o)t.style.setProperty(a,o[a])}const ki=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Pi(t,e,n,r){Ci(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(ki.has(i)?i:nr(i),e.attrs[i])}function Ii(t,e,n){var r;const{style:i}=t,o={};for(const a in i)(Ur(i[a])||e.style&&Ur(e.style[a])||jr(a,t)||void 0!==(null===(r=null===n||void 0===n?void 0:n.getValue(a))||void 0===r?void 0:r.liveStyle))&&(o[a]=i[a]);return o}function Ni(t,e,n){const r=Ii(t,e,n);for(const i in t)if(Ur(t[i])||Ur(e[i])){r[-1!==Lr.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=t[i]}return r}function Ri(t){const e=[{},{}];return null===t||void 0===t||t.values.forEach(((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()})),e}function Di(t,e,n,r){if("function"===typeof e){const[i,o]=Ri(r);e=e(void 0!==n?n:t.custom,i,o)}if("string"===typeof e&&(e=t.variants&&t.variants[e]),"function"===typeof e){const[i,o]=Ri(r);e=e(void 0!==n?n:t.custom,i,o)}return e}const Li=t=>Array.isArray(t),Fi=t=>Boolean(t&&"object"===typeof t&&t.mix&&t.toValue),ji=t=>Li(t)?t[t.length-1]||0:t;function Ui(t){const e=Ur(t)?t.get():t;return Fi(e)?e.toValue():e}const Bi=t=>(e,n)=>{const r=(0,k.useContext)(Jn),i=(0,k.useContext)($n),o=()=>function(t,e,n,r){let{scrapeMotionValuesFromProps:i,createRenderState:o,onMount:a}=t;const s={latestValues:zi(e,n,r,i),renderState:o()};return a&&(s.mount=t=>a(e,t,s)),s}(t,e,r,i);return n?o():function(t){const e=(0,k.useRef)(null);return null===e.current&&(e.current=t()),e.current}(o)};function zi(t,e,n,r){const i={},o=r(t,{});for(const d in o)i[d]=Ui(o[d]);let{initial:a,animate:s}=t;const c=wr(t),l=Sr(t);e&&l&&!c&&!1!==t.inherit&&(void 0===a&&(a=e.initial),void 0===s&&(s=e.animate));let u=!!n&&!1===n.initial;u=u||!1===a;const h=u?s:a;if(h&&"boolean"!==typeof h&&!br(h)){(Array.isArray(h)?h:[h]).forEach((e=>{const n=Di(t,e);if(!n)return;const{transitionEnd:r,transition:o,...a}=n;for(const t in a){let e=a[t];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(i[t]=e)}for(const t in r)i[t]=r[t]}))}return i}const Vi=t=>t,{schedule:Gi,cancel:Wi,state:Hi,steps:qi}=cr("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Vi,!0),Xi={useVisualState:Bi({scrapeMotionValuesFromProps:Ni,createRenderState:Ei,onMount:(t,e,n)=>{let{renderState:r,latestValues:i}=n;Gi.read((()=>{try{r.dimensions="function"===typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(sCt){r.dimensions={x:0,y:0,width:0,height:0}}})),Gi.render((()=>{Ti(r,i,{enableHardwareAcceleration:!1},Ai(e.tagName),t.transformTemplate),Pi(e,r)}))}})},Yi={useVisualState:Bi({scrapeMotionValuesFromProps:Ii,createRenderState:pi})};function Ki(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const Zi=t=>"mouse"===t.pointerType?"number"!==typeof t.button||t.button<=0:!1!==t.isPrimary;function Ji(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:t["".concat(e,"X")],y:t["".concat(e,"Y")]}}}const $i=t=>e=>Zi(e)&&t(e,Ji(e));function Qi(t,e,n,r){return Ki(t,e,$i(n),r)}const to=(t,e)=>n=>e(t(n)),eo=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(to)};function no(t){let e=null;return()=>{const n=()=>{e=null};return null===e&&(e=t,n)}}const ro=no("dragHorizontal"),io=no("dragVertical");function oo(t){let e=!1;if("y"===t)e=io();else if("x"===t)e=ro();else{const t=ro(),n=io();t&&n?e=()=>{t(),n()}:(t&&t(),n&&n())}return e}function ao(){const t=oo(!0);return!t||(t(),!1)}class so{constructor(t){this.isMounted=!1,this.node=t}update(){}}function co(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd";return Qi(t.current,n,((n,i)=>{if("touch"===n.pointerType||ao())return;const o=t.getProps();t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",e);const a=o[r];a&&Gi.postRender((()=>a(n,i)))}),{passive:!t.getProps()[r]})}const lo=(t,e)=>!!e&&(t===e||lo(t,e.parentElement));function uo(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Ji(n))}const ho=new WeakMap,po=new WeakMap,fo=t=>{const e=ho.get(t.target);e&&e(t)},mo=t=>{t.forEach(fo)};function go(t,e,n){const r=function(t){let{root:e,...n}=t;const r=e||document;po.has(r)||po.set(r,{});const i=po.get(r),o=JSON.stringify(n);return i[o]||(i[o]=new IntersectionObserver(mo,{root:e,...n})),i[o]}(e);return ho.set(t,n),r.observe(t),()=>{ho.delete(t),r.unobserve(t)}}const yo={some:0,all:1};const vo={inView:{Feature:class extends so{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:r="some",once:i}=t,o={root:e?e.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:yo[r]};return go(this.node.current,o,(t=>{const{isIntersecting:e}=t;if(this.isInView===e)return;if(this.isInView=e,i&&!e&&this.hasEnteredView)return;e&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",e);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),o=e?n:r;o&&o(t)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:t,prevProps:e}=this.node,n=["amount","margin","root"].some(function(t){let{viewport:e={}}=t,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=>e[t]!==n[t]}(t,e));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends so{constructor(){super(...arguments),this.removeStartListeners=Vi,this.removeEndListeners=Vi,this.removeAccessibleListeners=Vi,this.startPointerPress=(t,e)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),r=Qi(window,"pointerup",((t,e)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:r,globalTapTarget:i}=this.node.getProps(),o=i||lo(this.node.current,t.target)?n:r;o&&Gi.update((()=>o(t,e)))}),{passive:!(n.onTap||n.onPointerUp)}),i=Qi(window,"pointercancel",((t,e)=>this.cancelPress(t,e)),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=eo(r,i),this.startPress(t,e)},this.startAccessiblePress=()=>{const t=Ki(this.node.current,"keydown",(t=>{if("Enter"!==t.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=Ki(this.node.current,"keyup",(t=>{"Enter"===t.key&&this.checkPressEnd()&&uo("up",((t,e)=>{const{onTap:n}=this.node.getProps();n&&Gi.postRender((()=>n(t,e)))}))})),uo("down",((t,e)=>{this.startPress(t,e)}))})),e=Ki(this.node.current,"blur",(()=>{this.isPressing&&uo("cancel",((t,e)=>this.cancelPress(t,e)))}));this.removeAccessibleListeners=eo(t,e)}}startPress(t,e){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Gi.postRender((()=>n(t,e)))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!ao()}cancelPress(t,e){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Gi.postRender((()=>n(t,e)))}mount(){const t=this.node.getProps(),e=Qi(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=Ki(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=eo(e,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends so{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(sCt){t=!0}t&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=eo(Ki(this.node.current,"focus",(()=>this.onFocus())),Ki(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends so{mount(){this.unmount=eo(co(this.node,!0),co(this.node,!1))}unmount(){}}}};function bo(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function xo(t,e,n){const r=t.getProps();return Di(r,e,void 0!==n?n:r.custom,t)}const _o=t=>1e3*t,wo=t=>t/1e3,So={type:"spring",stiffness:500,damping:25,restSpeed:10},To={type:"keyframes",duration:.8},Eo={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ao=(t,e)=>{let{keyframes:n}=e;return n.length>2?To:Fr.has(t)?t.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:So:Eo};function Mo(t,e){return t[e]||t.default||t}const Oo=!1,Co=t=>null!==t;function ko(t,e,n){let{repeat:r,repeatType:i="loop"}=e;const o=t.filter(Co),a=r&&"loop"!==i&&r%2===1?0:o.length-1;return a&&void 0!==n?n:o[a]}let Po;function Io(){Po=void 0}const No={now:()=>(void 0===Po&&No.set(Hi.isProcessing||or?Hi.timestamp:performance.now()),Po),set:t=>{Po=t,queueMicrotask(Io)}},Ro=t=>/^0[^.\s]+$/u.test(t);function Do(t){return"number"===typeof t?0===t:null===t||("none"===t||"0"===t||Ro(t))}let Lo=Vi,Fo=Vi;const jo=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Uo=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Bo(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Fo(n<=4,'Max CSS variable fallback depth detected in property "'.concat(t,'". This may indicate a circular fallback dependency.'));const[r,i]=function(t){const e=Uo.exec(t);if(!e)return[,];const[,n,r,i]=e;return["--".concat(null!==n&&void 0!==n?n:r),i]}(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const t=o.trim();return jo(t)?parseFloat(t):t}return Hr(i)?Bo(i,e,n+1):i}const zo=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Vo=t=>t===Kr||t===ai,Go=(t,e)=>parseFloat(t.split(", ")[e]),Wo=(t,e)=>(n,r)=>{let{transform:i}=r;if("none"===i||!i)return 0;const o=i.match(/^matrix3d\((.+)\)$/u);if(o)return Go(o[1],e);{const e=i.match(/^matrix\((.+)\)$/u);return e?Go(e[1],t):0}},Ho=new Set(["x","y","z"]),qo=Lr.filter((t=>!Ho.has(t)));const Xo={width:(t,e)=>{let{x:n}=t,{paddingLeft:r="0",paddingRight:i="0"}=e;return n.max-n.min-parseFloat(r)-parseFloat(i)},height:(t,e)=>{let{y:n}=t,{paddingTop:r="0",paddingBottom:i="0"}=e;return n.max-n.min-parseFloat(r)-parseFloat(i)},top:(t,e)=>{let{top:n}=e;return parseFloat(n)},left:(t,e)=>{let{left:n}=e;return parseFloat(n)},bottom:(t,e)=>{let{y:n}=t,{top:r}=e;return parseFloat(r)+(n.max-n.min)},right:(t,e)=>{let{x:n}=t,{left:r}=e;return parseFloat(r)+(n.max-n.min)},x:Wo(4,13),y:Wo(5,14)};Xo.translateX=Xo.x,Xo.translateY=Xo.y;const Yo=t=>e=>e.test(t),Ko=[Kr,ai,oi,ii,ci,si,{test:t=>"auto"===t,parse:t=>t}],Zo=t=>Ko.find(Yo(t)),Jo=new Set;let $o=!1,Qo=!1;function ta(){if(Qo){const t=Array.from(Jo).filter((t=>t.needsMeasurement)),e=new Set(t.map((t=>t.element))),n=new Map;e.forEach((t=>{const e=function(t){const e=[];return qo.forEach((n=>{const r=t.getValue(n);void 0!==r&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),e}(t);e.length&&(n.set(t,e),t.render())})),t.forEach((t=>t.measureInitialState())),e.forEach((t=>{t.render();const e=n.get(t);e&&e.forEach((e=>{let[n,r]=e;var i;null===(i=t.getValue(n))||void 0===i||i.set(r)}))})),t.forEach((t=>t.measureEndState())),t.forEach((t=>{void 0!==t.suspendedScrollY&&window.scrollTo(0,t.suspendedScrollY)}))}Qo=!1,$o=!1,Jo.forEach((t=>t.complete())),Jo.clear()}function ea(){Jo.forEach((t=>{t.readKeyframes(),t.needsMeasurement&&(Qo=!0)}))}class na{constructor(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=r,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Jo.add(this),$o||($o=!0,Gi.read(ea),Gi.resolveKeyframes(ta))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:r}=this;for(let i=0;i<t.length;i++)if(null===t[i])if(0===i){const i=null===r||void 0===r?void 0:r.get(),o=t[t.length-1];if(void 0!==i)t[0]=i;else if(n&&e){const r=n.readValue(e,o);void 0!==r&&null!==r&&(t[0]=r)}void 0===t[0]&&(t[0]=o),r&&void 0===i&&r.set(t[0])}else t[i]=t[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Jo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Jo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ra=(t,e)=>n=>Boolean(ni(n)&&ei.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),ia=(t,e,n)=>r=>{if(!ni(r))return r;const[i,o,a,s]=r.match(Qr);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(a),alpha:void 0!==s?parseFloat(s):1}},oa={...Kr,transform:t=>Math.round((t=>Yr(0,255,t))(t))},aa={test:ra("rgb","red"),parse:ia("red","green","blue"),transform:t=>{let{red:e,green:n,blue:r,alpha:i=1}=t;return"rgba("+oa.transform(e)+", "+oa.transform(n)+", "+oa.transform(r)+", "+$r(Zr.transform(i))+")"}};const sa={test:ra("#"),parse:function(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:aa.transform},ca={test:ra("hsl","hue"),parse:ia("hue","saturation","lightness"),transform:t=>{let{hue:e,saturation:n,lightness:r,alpha:i=1}=t;return"hsla("+Math.round(e)+", "+oi.transform($r(n))+", "+oi.transform($r(r))+", "+$r(Zr.transform(i))+")"}},la={test:t=>aa.test(t)||sa.test(t)||ca.test(t),parse:t=>aa.test(t)?aa.parse(t):ca.test(t)?ca.parse(t):sa.parse(t),transform:t=>ni(t)?t:t.hasOwnProperty("red")?aa.transform(t):ca.transform(t)};const ua="number",ha="color",da="var",pa="var(",fa="${}",ma=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ga(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const a=e.replace(ma,(t=>(la.test(t)?(r.color.push(o),i.push(ha),n.push(la.parse(t))):t.startsWith(pa)?(r.var.push(o),i.push(da),n.push(t)):(r.number.push(o),i.push(ua),n.push(parseFloat(t))),++o,fa))).split(fa);return{values:n,split:a,indexes:r,types:i}}function ya(t){return ga(t).values}function va(t){const{split:e,types:n}=ga(t),r=e.length;return t=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],void 0!==t[o]){const e=n[o];i+=e===ua?$r(t[o]):e===ha?la.transform(t[o]):t[o]}return i}}const ba=t=>"number"===typeof t?0:t;const xa={test:function(t){var e,n;return isNaN(t)&&ni(t)&&((null===(e=t.match(Qr))||void 0===e?void 0:e.length)||0)+((null===(n=t.match(ti))||void 0===n?void 0:n.length)||0)>0},parse:ya,createTransformer:va,getAnimatableNone:function(t){const e=ya(t);return va(t)(e.map(ba))}},_a=new Set(["brightness","contrast","saturate","opacity"]);function wa(t){const[e,n]=t.slice(0,-1).split("(");if("drop-shadow"===e)return t;const[r]=n.match(Qr)||[];if(!r)return t;const i=n.replace(r,"");let o=_a.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const Sa=/\b([a-z-]*)\(.*?\)/gu,Ta={...xa,getAnimatableNone:t=>{const e=t.match(Sa);return e?e.map(wa).join(" "):t}},Ea={...hi,color:la,backgroundColor:la,outlineColor:la,fill:la,stroke:la,borderColor:la,borderTopColor:la,borderRightColor:la,borderBottomColor:la,borderLeftColor:la,filter:Ta,WebkitFilter:Ta},Aa=t=>Ea[t];function Ma(t,e){let n=Aa(t);return n!==Ta&&(n=xa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Oa=new Set(["auto","none","0"]);class Ca extends na{constructor(t,e,n,r){super(t,e,n,r,null===r||void 0===r?void 0:r.owner,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e.current)return;super.readKeyframes();for(let s=0;s<t.length;s++){let n=t[s];if("string"===typeof n&&(n=n.trim(),Hr(n))){const r=Bo(n,e.current);void 0!==r&&(t[s]=r),s===t.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!zo.has(n)||2!==t.length)return;const[r,i]=t,o=Zo(r),a=Zo(i);if(o!==a)if(Vo(o)&&Vo(a))for(let s=0;s<t.length;s++){const e=t[s];"string"===typeof e&&(t[s]=parseFloat(e))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let r=0;r<t.length;r++)Do(t[r])&&n.push(r);n.length&&function(t,e,n){let r,i=0;for(;i<t.length&&!r;){const e=t[i];"string"===typeof e&&!Oa.has(e)&&ga(e).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=Ma(n,r)}(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Xo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const r=e[e.length-1];void 0!==r&&t.getValue(n,r).jump(r,!1)}measureEndState(){var t;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=Xo[n](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),(null===(t=this.removedTransforms)||void 0===t?void 0:t.length)&&this.removedTransforms.forEach((t=>{let[n,r]=t;e.getValue(n).set(r)})),this.resolveNoneKeyframes()}}function ka(t){let e;return()=>(void 0===e&&(e=t()),e)}const Pa=(t,e)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!xa.test(t)&&"0"!==t||t.startsWith("url(")));class Ia{constructor(t){let{autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",...s}=t;this.isStopped=!1,this.hasAttemptedResolve=!1,this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:a,...s},this.updateFinishedPromise()}get resolved(){return this._resolved||this.hasAttemptedResolve||(ea(),ta()),this._resolved}onKeyframesResolved(t,e){this.hasAttemptedResolve=!0;const{name:n,type:r,velocity:i,delay:o,onComplete:a,onUpdate:s,isGenerator:c}=this.options;if(!c&&!function(t,e,n,r){const i=t[0];if(null===i)return!1;if("display"===e||"visibility"===e)return!0;const o=t[t.length-1],a=Pa(i,e),s=Pa(o,e);return Lo(a===s,"You are trying to animate ".concat(e,' from "').concat(i,'" to "').concat(o,'". ').concat(i," is not an animatable value - to enable this animation set ").concat(i," to a value animatable to ").concat(o," via the `style` property.")),!(!a||!s)&&(function(t){const e=t[0];if(1===t.length)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}(t)||"spring"===n&&r)}(t,n,r,i)){if(Oo||!o)return null===s||void 0===s||s(ko(t,this.options,e)),null===a||void 0===a||a(),void this.resolveFinishedPromise();this.options.duration=0}const l=this.initPlayback(t,e);!1!==l&&(this._resolved={keyframes:t,finalKeyframe:e,...l},this.onPostResolved())}onPostResolved(){}then(t,e){return this.currentFinishedPromise.then(t,e)}updateFinishedPromise(){this.currentFinishedPromise=new Promise((t=>{this.resolveFinishedPromise=t}))}}function Na(t,e){return e?t*(1e3/e):0}const Ra=5;function Da(t,e,n){const r=Math.max(e-Ra,0);return Na(n-t(r),e-r)}const La=.001,Fa=.01,ja=10,Ua=.05,Ba=1;function za(t){let e,n,{duration:r=800,bounce:i=.25,velocity:o=0,mass:a=1}=t;Lo(r<=_o(ja),"Spring duration must be 10 seconds or less");let s=1-i;s=Yr(Ua,Ba,s),r=Yr(Fa,ja,wo(r)),s<1?(e=t=>{const e=t*s,n=e*r,i=e-o,a=Ga(t,s),c=Math.exp(-n);return La-i/a*c},n=t=>{const n=t*s*r,i=n*o+o,a=Math.pow(s,2)*Math.pow(t,2)*r,c=Math.exp(-n),l=Ga(Math.pow(t,2),s);return(-e(t)+La>0?-1:1)*((i-a)*c)/l}):(e=t=>Math.exp(-t*r)*((t-o)*r+1)-La,n=t=>Math.exp(-t*r)*(r*r*(o-t)));const c=function(t,e,n){let r=n;for(let i=1;i<Va;i++)r-=t(r)/e(r);return r}(e,n,5/r);if(r=_o(r),isNaN(c))return{stiffness:100,damping:10,duration:r};{const t=Math.pow(c,2)*a;return{stiffness:t,damping:2*s*Math.sqrt(a*t),duration:r}}}const Va=12;function Ga(t,e){return t*Math.sqrt(1-e*e)}const Wa=["duration","bounce"],Ha=["stiffness","damping","mass"];function qa(t,e){return e.some((e=>void 0!==t[e]))}function Xa(t){let{keyframes:e,restDelta:n,restSpeed:r,...i}=t;const o=e[0],a=e[e.length-1],s={done:!1,value:o},{stiffness:c,damping:l,mass:u,duration:h,velocity:d,isResolvedFromDuration:p}=function(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!qa(t,Ha)&&qa(t,Wa)){const n=za(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}({...i,velocity:-wo(i.velocity||0)}),f=d||0,m=l/(2*Math.sqrt(c*u)),g=a-o,y=wo(Math.sqrt(c/u)),v=Math.abs(g)<5;let b;if(r||(r=v?.01:2),n||(n=v?.005:.5),m<1){const t=Ga(y,m);b=e=>{const n=Math.exp(-m*y*e);return a-n*((f+m*y*g)/t*Math.sin(t*e)+g*Math.cos(t*e))}}else if(1===m)b=t=>a-Math.exp(-y*t)*(g+(f+y*g)*t);else{const t=y*Math.sqrt(m*m-1);b=e=>{const n=Math.exp(-m*y*e),r=Math.min(t*e,300);return a-n*((f+m*y*g)*Math.sinh(r)+t*g*Math.cosh(r))/t}}return{calculatedDuration:p&&h||null,next:t=>{const e=b(t);if(p)s.done=t>=h;else{let i=f;0!==t&&(i=m<1?Da(b,t,e):0);const o=Math.abs(i)<=r,c=Math.abs(a-e)<=n;s.done=o&&c}return s.value=s.done?a:e,s}}}function Ya(t){let{keyframes:e,velocity:n=0,power:r=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:s,min:c,max:l,restDelta:u=.5,restSpeed:h}=t;const d=e[0],p={done:!1,value:d},f=t=>void 0===c?l:void 0===l||Math.abs(c-t)<Math.abs(l-t)?c:l;let m=r*n;const g=d+m,y=void 0===s?g:s(g);y!==g&&(m=y-d);const v=t=>-m*Math.exp(-t/i),b=t=>y+v(t),x=t=>{const e=v(t),n=b(t);p.done=Math.abs(e)<=u,p.value=p.done?y:n};let _,w;const S=t=>{(t=>void 0!==c&&t<c||void 0!==l&&t>l)(p.value)&&(_=t,w=Xa({keyframes:[p.value,f(p.value)],velocity:Da(b,t,p.value),damping:o,stiffness:a,restDelta:u,restSpeed:h}))};return S(0),{calculatedDuration:null,next:t=>{let e=!1;return w||void 0!==_||(e=!0,x(t),S(t)),void 0!==_&&t>=_?w.next(t-_):(!e&&x(t),p)}}}const Ka=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Za=1e-7,Ja=12;function $a(t,e,n,r){if(t===e&&n===r)return Vi;const i=e=>function(t,e,n,r,i){let o,a,s=0;do{a=e+(n-e)/2,o=Ka(a,r,i)-t,o>0?n=a:e=a}while(Math.abs(o)>Za&&++s<Ja);return a}(e,0,1,t,n);return t=>0===t||1===t?t:Ka(i(t),e,r)}const Qa=$a(.42,0,1,1),ts=$a(0,0,.58,1),es=$a(.42,0,.58,1),ns=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,rs=t=>e=>1-t(1-e),is=t=>1-Math.sin(Math.acos(t)),os=rs(is),as=ns(is),ss=$a(.33,1.53,.69,.99),cs=rs(ss),ls=ns(cs),us={linear:Vi,easeIn:Qa,easeInOut:es,easeOut:ts,circIn:is,circInOut:as,circOut:os,backIn:cs,backInOut:ls,backOut:ss,anticipate:t=>(t*=2)<1?.5*cs(t):.5*(2-Math.pow(2,-10*(t-1)))},hs=t=>{if(Array.isArray(t)){Fo(4===t.length,"Cubic bezier arrays must contain four numerical values.");const[e,n,r,i]=t;return $a(e,n,r,i)}return"string"===typeof t?(Fo(void 0!==us[t],"Invalid easing type '".concat(t,"'")),us[t]):t},ds=(t,e,n)=>{const r=e-t;return 0===r?1:(n-t)/r},ps=(t,e,n)=>t+(e-t)*n;function fs(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function ms(t,e){return n=>n>0?e:t}const gs=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},ys=[sa,aa,ca];function vs(t){const e=(t=>ys.find((e=>e.test(t))))(t);if(Lo(Boolean(e),"'".concat(t,"' is not an animatable color. Use the equivalent color code instead.")),!Boolean(e))return!1;let n=e.parse(t);return e===ca&&(n=function(t){let{hue:e,saturation:n,lightness:r,alpha:i}=t;e/=360,n/=100,r/=100;let o=0,a=0,s=0;if(n){const t=r<.5?r*(1+n):r+n-r*n,i=2*r-t;o=fs(i,t,e+1/3),a=fs(i,t,e),s=fs(i,t,e-1/3)}else o=a=s=r;return{red:Math.round(255*o),green:Math.round(255*a),blue:Math.round(255*s),alpha:i}}(n)),n}const bs=(t,e)=>{const n=vs(t),r=vs(e);if(!n||!r)return ms(t,e);const i={...n};return t=>(i.red=gs(n.red,r.red,t),i.green=gs(n.green,r.green,t),i.blue=gs(n.blue,r.blue,t),i.alpha=ps(n.alpha,r.alpha,t),aa.transform(i))},xs=new Set(["none","hidden"]);function _s(t,e){return n=>ps(t,e,n)}function ws(t){return"number"===typeof t?_s:"string"===typeof t?Hr(t)?ms:la.test(t)?bs:Es:Array.isArray(t)?Ss:"object"===typeof t?la.test(t)?bs:Ts:ms}function Ss(t,e){const n=[...t],r=n.length,i=t.map(((t,n)=>ws(t)(t,e[n])));return t=>{for(let e=0;e<r;e++)n[e]=i[e](t);return n}}function Ts(t,e){const n={...t,...e},r={};for(const i in n)void 0!==t[i]&&void 0!==e[i]&&(r[i]=ws(t[i])(t[i],e[i]));return t=>{for(const e in r)n[e]=r[e](t);return n}}const Es=(t,e)=>{const n=xa.createTransformer(e),r=ga(t),i=ga(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?xs.has(t)&&!i.values.length||xs.has(e)&&!r.values.length?function(t,e){return xs.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}(t,e):eo(Ss(function(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const a=e.types[o],s=t.indexes[a][i[a]],c=null!==(n=t.values[s])&&void 0!==n?n:0;r[o]=c,i[a]++}return r}(r,i),i.values),n):(Lo(!0,"Complex values '".concat(t,"' and '").concat(e,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),ms(t,e))};function As(t,e,n){if("number"===typeof t&&"number"===typeof e&&"number"===typeof n)return ps(t,e,n);return ws(t)(t,e)}function Ms(t,e){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=t.length;if(Fo(o===e.length,"Both input and output ranges must be the same length"),1===o)return()=>e[0];if(2===o&&t[0]===t[1])return()=>e[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=function(t,e,n){const r=[],i=n||As,o=t.length-1;for(let a=0;a<o;a++){let n=i(t[a],t[a+1]);if(e){const t=Array.isArray(e)?e[a]||Vi:e;n=eo(t,n)}r.push(n)}return r}(e,r,i),s=a.length,c=e=>{let n=0;if(s>1)for(;n<t.length-2&&!(e<t[n+1]);n++);const r=ds(t[n],t[n+1],e);return a[n](r)};return n?e=>c(Yr(t[0],t[o-1],e)):c}function Os(t){const e=[0];return function(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=ds(0,e,r);t.push(ps(n,1,i))}}(e,t.length-1),e}function Cs(t,e){return t.map((()=>e||es)).splice(0,t.length-1)}function ks(t){let{duration:e=300,keyframes:n,times:r,ease:i="easeInOut"}=t;const o=(t=>Array.isArray(t)&&"number"!==typeof t[0])(i)?i.map(hs):hs(i),a={done:!1,value:n[0]},s=function(t,e){return t.map((t=>t*e))}(r&&r.length===n.length?r:Os(n),e),c=Ms(s,n,{ease:Array.isArray(o)?o:Cs(n,o)});return{calculatedDuration:e,next:t=>(a.value=c(t),a.done=t>=e,a)}}const Ps=t=>{const e=e=>{let{timestamp:n}=e;return t(n)};return{start:()=>Gi.update(e,!0),stop:()=>Wi(e),now:()=>Hi.isProcessing?Hi.timestamp:No.now()}},Is={decay:Ya,inertia:Ya,tween:ks,keyframes:ks,spring:Xa},Ns=t=>t/100;class Rs extends Ia{constructor(t){let{KeyframeResolver:e=na,...n}=t;super(n),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:t}=this.options;t&&t()};const{name:r,motionValue:i,keyframes:o}=this.options,a=(t,e)=>this.onKeyframesResolved(t,e);r&&i&&i.owner?this.resolver=i.owner.resolveKeyframes(o,a,r,i):this.resolver=new e(o,a,r,i),this.resolver.scheduleResolve()}initPlayback(t){const{type:e="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:o=0}=this.options,a=Is[e]||ks;let s,c;a!==ks&&"number"!==typeof t[0]&&(s=eo(Ns,As(t[0],t[1])),t=[0,100]);const l=a({...this.options,keyframes:t});"mirror"===i&&(c=a({...this.options,keyframes:[...t].reverse(),velocity:-o})),null===l.calculatedDuration&&(l.calculatedDuration=function(t){let e=0,n=t.next(e);for(;!n.done&&e<2e4;)e+=50,n=t.next(e);return e>=2e4?1/0:e}(l));const{calculatedDuration:u}=l,h=u+r;return{generator:l,mirroredGenerator:c,mapPercentToKeyframes:s,calculatedDuration:u,resolvedDuration:h,totalDuration:h*(n+1)-r}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&t?this.state=this.pendingPlayState:this.pause()}tick(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{resolved:n}=this;if(!n){const{keyframes:t}=this.options;return{done:!0,value:t[t.length-1]}}const{finalKeyframe:r,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:s,calculatedDuration:c,totalDuration:l,resolvedDuration:u}=n;if(null===this.startTime)return i.next(0);const{delay:h,repeat:d,repeatType:p,repeatDelay:f,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-l/this.speed,this.startTime)),e?this.currentTime=t:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const g=this.currentTime-h*(this.speed>=0?1:-1),y=this.speed>=0?g<0:g>l;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=l);let v=this.currentTime,b=i;if(d){const t=Math.min(this.currentTime,l)/u;let e=Math.floor(t),n=t%1;!n&&t>=1&&(n=1),1===n&&e--,e=Math.min(e,d+1);Boolean(e%2)&&("reverse"===p?(n=1-n,f&&(n-=f/u)):"mirror"===p&&(b=o)),v=Yr(0,1,n)*u}const x=y?{done:!1,value:s[0]}:b.next(v);a&&(x.value=a(x.value));let{done:_}=x;y||null===c||(_=this.speed>=0?this.currentTime>=l:this.currentTime<=0);const w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&_);return w&&void 0!==r&&(x.value=ko(s,this.options,r)),m&&m(x.value),w&&this.finish(),x}get duration(){const{resolved:t}=this;return t?wo(t.calculatedDuration):0}get time(){return wo(this.currentTime)}set time(t){t=_o(t),this.currentTime=t,null!==this.holdTime||0===this.speed?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=wo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:t=Ps,onPlay:e}=this.options;this.driver||(this.driver=t((t=>this.tick(t)))),e&&e();const n=this.driver.now();null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime&&"finished"!==this.state||(this.startTime=n),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;this._resolved?(this.state="paused",this.holdTime=null!==(t=this.currentTime)&&void 0!==t?t:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const Ds=t=>Array.isArray(t)&&"number"===typeof t[0];function Ls(t){return Boolean(!t||"string"===typeof t&&t in js||Ds(t)||Array.isArray(t)&&t.every(Ls))}const Fs=t=>{let[e,n,r,i]=t;return"cubic-bezier(".concat(e,", ").concat(n,", ").concat(r,", ").concat(i,")")},js={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fs([0,.65,.55,1]),circOut:Fs([.55,0,1,.45]),backIn:Fs([.31,.01,.66,-.59]),backOut:Fs([.33,1.53,.69,.99])};function Us(t){return Bs(t)||js.easeOut}function Bs(t){return t?Ds(t)?Fs(t):Array.isArray(t)?t.map(Us):js[t]:void 0}const zs=ka((()=>Object.hasOwnProperty.call(Element.prototype,"animate"))),Vs=new Set(["opacity","clipPath","filter","transform"]);class Gs extends Ia{constructor(t){super(t);const{name:e,motionValue:n,keyframes:r}=this.options;this.resolver=new Ca(r,((t,e)=>this.onKeyframesResolved(t,e)),e,n),this.resolver.scheduleResolve()}initPlayback(t,e){var n;let{duration:r=300,times:i,ease:o,type:a,motionValue:s,name:c}=this.options;if(!(null===(n=s.owner)||void 0===n?void 0:n.current))return!1;if(function(t){return"spring"===t.type||"backgroundColor"===t.name||!Ls(t.ease)}(this.options)){const{onComplete:e,onUpdate:n,motionValue:s,...c}=this.options,l=function(t,e){const n=new Rs({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let o=0;for(;!r.done&&o<2e4;)r=n.sample(o),i.push(r.value),o+=10;return{times:void 0,keyframes:i,duration:o-10,ease:"linear"}}(t,c);1===(t=l.keyframes).length&&(t[1]=t[0]),r=l.duration,i=l.times,o=l.ease,a="keyframes"}const l=function(t,e,n){let{delay:r=0,duration:i=300,repeat:o=0,repeatType:a="loop",ease:s,times:c}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const l={[e]:n};c&&(l.offset=c);const u=Bs(s);return Array.isArray(u)&&(l.easing=u),t.animate(l,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:"reverse"===a?"alternate":"normal"})}(s.owner.current,c,t,{...this.options,duration:r,times:i,ease:o});return l.startTime=No.now(),this.pendingTimeline?(l.timeline=this.pendingTimeline,this.pendingTimeline=void 0):l.onfinish=()=>{const{onComplete:n}=this.options;s.set(ko(t,this.options,e)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:l,duration:r,times:i,type:a,ease:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:e}=t;return wo(e)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:e}=t;return wo(e.currentTime||0)}set time(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.currentTime=_o(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:e}=t;return e.playbackRate}set speed(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:e}=t;return e.playState}attachTimeline(t){if(this._resolved){const{resolved:e}=this;if(!e)return Vi;const{animation:n}=e;n.timeline=t,n.onfinish=null}else this.pendingTimeline=t;return Vi}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:e}=t;"finished"===e.playState&&this.updateFinishedPromise(),e.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;const{resolved:t}=this;if(!t)return;const{animation:e,keyframes:n,duration:r,type:i,ease:o,times:a}=t;if("idle"!==e.playState&&"finished"!==e.playState){if(this.time){const{motionValue:t,onUpdate:e,onComplete:s,...c}=this.options,l=new Rs({...c,keyframes:n,duration:r,type:i,ease:o,times:a,isGenerator:!0}),u=_o(this.time);t.setWithVelocity(l.sample(u-10).value,l.sample(u).value,10)}this.cancel()}}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:o,type:a}=t;return zs()&&n&&Vs.has(n)&&e&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate&&!r&&"mirror"!==i&&0!==o&&"inertia"!==a}}const Ws=ka((()=>void 0!==window.ScrollTimeline));class Hs{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,e){return Promise.all(this.animations).then(t).catch(e)}getAll(t){return this.animations[0][t]}setAll(t,e){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=e}attachTimeline(t){const e=this.animations.map((e=>{if(!Ws()||!e.attachTimeline)return e.pause(),function(t,e){let n;const r=()=>{const{currentTime:r}=e,i=(null===r?0:r.value)/100;n!==i&&t(i),n=i};return Gi.update(r,!0),()=>Wi(r)}((t=>{e.time=e.duration*t}),t);e.attachTimeline(t)}));return()=>{e.forEach(((t,e)=>{t&&t(),this.animations[e].stop()}))}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach((e=>e[t]()))}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const qs=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return a=>{const s=Mo(r,t)||{},c=s.delay||r.delay||0;let{elapsed:l=0}=r;l-=_o(c);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...s,delay:-l,onUpdate:t=>{e.set(t),s.onUpdate&&s.onUpdate(t)},onComplete:()=>{a(),s.onComplete&&s.onComplete()},name:t,motionValue:e,element:o?void 0:i};(function(t){let{when:e,delay:n,delayChildren:r,staggerChildren:i,staggerDirection:o,repeat:a,repeatType:s,repeatDelay:c,from:l,elapsed:u,...h}=t;return!!Object.keys(h).length})(s)||(u={...u,...Ao(t,u)}),u.duration&&(u.duration=_o(u.duration)),u.repeatDelay&&(u.repeatDelay=_o(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let h=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(u.duration=0,0===u.delay&&(h=!0)),(Oo||ir)&&(h=!0,u.duration=0,u.delay=0),h&&!o&&void 0!==e.get()){const t=ko(u.keyframes,s);if(void 0!==t)return Gi.update((()=>{u.onUpdate(t),u.onComplete()})),new Hs([])}return!o&&Gs.supports(u)?new Gs(u):new Rs(u)}};function Xs(t){return Boolean(Ur(t)&&t.add)}function Ys(t,e){-1===t.indexOf(e)&&t.push(e)}function Ks(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Zs{constructor(){this.subscriptions=[]}add(t){return Ys(this.subscriptions,t),()=>Ks(this.subscriptions,t)}notify(t,e,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](t,e,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Js={current:void 0};class $s{constructor(t){var e=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="11.2.12",this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=No.now();e.updatedAt!==r&&e.setPrevFrameValue(),e.prev=e.current,e.setCurrent(t),e.current!==e.prev&&e.events.change&&e.events.change.notify(e.current),n&&e.events.renderRequest&&e.events.renderRequest.notify(e.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=No.now(),null===this.canTrackVelocity&&void 0!==t&&(this.canTrackVelocity=(t=>!isNaN(parseFloat(t)))(this.current))}setPrevFrameValue(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new Zs);const n=this.events[t].add(e);return"change"===t?()=>{n(),Gi.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Js.current&&Js.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=No.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,30);return Na(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise((e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Qs(t,e){return new $s(t,e)}function tc(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Qs(n))}function ec(t){return t.getProps()[rr]}function nc(t,e){let{protectedKeys:n,needsAnimating:r}=t;const i=n.hasOwnProperty(e)&&!0!==r[e];return r[e]=!1,i}function rc(t,e){let{delay:n=0,transitionOverride:r,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var o;let{transition:a=t.getDefaultTransition(),transitionEnd:s,...c}=e;const l=t.getValue("willChange");r&&(a=r);const u=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const d in c){const e=t.getValue(d,null!==(o=t.latestValues[d])&&void 0!==o?o:null),r=c[d];if(void 0===r||h&&nc(h,d))continue;const i={delay:n,elapsed:0,...Mo(a||{},d)};let s=!1;if(window.HandoffAppearAnimations){const n=ec(t);if(n){const t=window.HandoffAppearAnimations(n,d,e,Gi);null!==t&&(i.elapsed=t,s=!0)}}e.start(qs(d,e,r,t.shouldReduceMotion&&Fr.has(d)?{type:!1}:i,t,s));const p=e.animation;p&&(Xs(l)&&(l.add(d),p.then((()=>l.remove(d)))),u.push(p))}return s&&Promise.all(u).then((()=>{Gi.update((()=>{s&&function(t,e){const n=xo(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const a in o)tc(t,a,ji(o[a]))}(t,s)}))})),u}function ic(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r;const i=xo(t,e,"exit"===n.type?null===(r=t.presenceContext)||void 0===r?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const a=i?()=>Promise.all(rc(t,i,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:i=0,staggerChildren:a,staggerDirection:s}=o;return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5?arguments[5]:void 0;const a=[],s=(t.variantChildren.size-1)*r,c=1===i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return s-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(t.variantChildren).sort(oc).forEach(((t,r)=>{t.notify("AnimationStart",e),a.push(ic(t,e,{...o,delay:n+c(r)}).then((()=>t.notify("AnimationComplete",e))))})),Promise.all(a)}(t,e,i+r,a,s,n)}:()=>Promise.resolve(),{when:c}=o;if(c){const[t,e]="beforeChildren"===c?[a,s]:[s,a];return t().then((()=>e()))}return Promise.all([a(),s(n.delay)])}function oc(t,e){return t.sortNodePosition(e)}const ac=[...xr].reverse(),sc=xr.length;function cc(t){return e=>Promise.all(e.map((e=>{let{animation:n,options:r}=e;return function(t,e){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t.notify("AnimationStart",e),Array.isArray(e)){const i=e.map((e=>ic(t,e,r)));n=Promise.all(i)}else if("string"===typeof e)n=ic(t,e,r);else{const i="function"===typeof e?xo(t,e,r.custom):e;n=Promise.all(rc(t,i,r))}return n.then((()=>{Gi.postRender((()=>{t.notify("AnimationComplete",e)}))}))}(t,n,r)})))}function lc(t,e){return"string"===typeof e?e!==t:!!Array.isArray(e)&&!bo(e,t)}function uc(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function hc(){return{animate:uc(!0),whileInView:uc(),whileHover:uc(),whileTap:uc(),whileDrag:uc(),whileFocus:uc(),exit:uc()}}let dc=0;const pc={animation:{Feature:class extends so{constructor(t){super(t),t.animationState||(t.animationState=function(t){let e=cc(t),n=hc(),r=!0;const i=e=>(n,r)=>{var i;const o=xo(t,r,"exit"===e?null===(i=t.presenceContext)||void 0===i?void 0:i.custom:void 0);if(o){const{transition:t,transitionEnd:e,...r}=o;n={...n,...r,...e}}return n};function o(o){const a=t.getProps(),s=t.getVariantContext(!0)||{},c=[],l=new Set;let u={},h=1/0;for(let e=0;e<sc;e++){const d=ac[e],p=n[d],f=void 0!==a[d]?a[d]:s[d],m=vr(f),g=d===o?p.isActive:null;!1===g&&(h=e);let y=f===s[d]&&f!==a[d]&&m;if(y&&r&&t.manuallyAnimateOnMount&&(y=!1),p.protectedKeys={...u},!p.isActive&&null===g||!f&&!p.prevProp||br(f)||"boolean"===typeof f)continue;let v=lc(p.prevProp,f)||d===o&&p.isActive&&!y&&m||e>h&&m,b=!1;const x=Array.isArray(f)?f:[f];let _=x.reduce(i(d),{});!1===g&&(_={});const{prevResolvedValues:w={}}=p,S={...w,..._},T=e=>{v=!0,l.has(e)&&(b=!0,l.delete(e)),p.needsAnimating[e]=!0;const n=t.getValue(e);n&&(n.liveStyle=!1)};for(const t in S){const e=_[t],n=w[t];if(u.hasOwnProperty(t))continue;let r=!1;r=Li(e)&&Li(n)?!bo(e,n):e!==n,r?void 0!==e&&null!==e?T(t):l.add(t):void 0!==e&&l.has(t)?T(t):p.protectedKeys[t]=!0}p.prevProp=f,p.prevResolvedValues=_,p.isActive&&(u={...u,..._}),r&&t.blockInitialAnimation&&(v=!1),!v||y&&!b||c.push(...x.map((t=>({animation:t,options:{type:d}}))))}if(l.size){const e={};l.forEach((n=>{const r=t.getBaseTarget(n),i=t.getValue(n);i&&(i.liveStyle=!0),e[n]=null!==r&&void 0!==r?r:null})),c.push({animation:e})}let d=Boolean(c.length);return!r||!1!==a.initial&&a.initial!==a.animate||t.manuallyAnimateOnMount||(d=!1),r=!1,d?e(c):Promise.resolve()}return{animateChanges:o,setActive:function(e,r){var i;if(n[e].isActive===r)return Promise.resolve();null===(i=t.variantChildren)||void 0===i||i.forEach((t=>{var n;return null===(n=t.animationState)||void 0===n?void 0:n.setActive(e,r)})),n[e].isActive=r;const a=o(e);for(const t in n)n[t].protectedKeys={};return a},setAnimateFunction:function(n){e=n(t)},getState:()=>n,reset:()=>{n=hc(),r=!0}}}(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();br(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),null===(t=this.unmountControls)||void 0===t||t.call(this)}}},exit:{Feature:class extends so{constructor(){super(...arguments),this.id=dc++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const r=this.node.animationState.setActive("exit",!t);e&&!t&&r.then((()=>e(this.id)))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}}},fc=(t,e)=>Math.abs(t-e);class mc{constructor(t,e){let{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const t=vc(this.lastMoveEventInfo,this.history),e=null!==this.startEvent,n=function(t,e){const n=fc(t.x,e.x),r=fc(t.y,e.y);return Math.sqrt(n**2+r**2)}(t.offset,{x:0,y:0})>=3;if(!e&&!n)return;const{point:r}=t,{timestamp:i}=Hi;this.history.push({...r,timestamp:i});const{onStart:o,onMove:a}=this.handlers;e||(o&&o(this.lastMoveEvent,t),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,t)},this.handlePointerMove=(t,e)=>{this.lastMoveEvent=t,this.lastMoveEventInfo=gc(e,this.transformPagePoint),Gi.update(this.updatePoint,!0)},this.handlePointerUp=(t,e)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const o=vc("pointercancel"===t.type?this.lastMoveEventInfo:gc(e,this.transformPagePoint),this.history);this.startEvent&&n&&n(t,o),r&&r(t,o)},!Zi(t))return;this.dragSnapToOrigin=i,this.handlers=e,this.transformPagePoint=n,this.contextWindow=r||window;const o=gc(Ji(t),this.transformPagePoint),{point:a}=o,{timestamp:s}=Hi;this.history=[{...a,timestamp:s}];const{onSessionStart:c}=e;c&&c(t,vc(o,this.history)),this.removeListeners=eo(Qi(this.contextWindow,"pointermove",this.handlePointerMove),Qi(this.contextWindow,"pointerup",this.handlePointerUp),Qi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Wi(this.updatePoint)}}function gc(t,e){return e?{point:e(t.point)}:t}function yc(t,e){return{x:t.x-e.x,y:t.y-e.y}}function vc(t,e){let{point:n}=t;return{point:n,delta:yc(n,xc(e)),offset:yc(n,bc(e)),velocity:_c(e,.1)}}function bc(t){return t[0]}function xc(t){return t[t.length-1]}function _c(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=xc(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>_o(e)));)n--;if(!r)return{x:0,y:0};const o=wo(i.timestamp-r.timestamp);if(0===o)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function wc(t){return t.max-t.min}function Sc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(t-e)<=n}function Tc(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;t.origin=r,t.originPoint=ps(e.min,e.max,t.origin),t.scale=wc(n)/wc(e),(Sc(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=ps(n.min,n.max,t.origin)-t.originPoint,(Sc(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Ec(t,e,n,r){Tc(t.x,e.x,n.x,r?r.originX:void 0),Tc(t.y,e.y,n.y,r?r.originY:void 0)}function Ac(t,e,n){t.min=n.min+e.min,t.max=t.min+wc(e)}function Mc(t,e,n){t.min=e.min-n.min,t.max=t.min+wc(e)}function Oc(t,e,n){Mc(t.x,e.x,n.x),Mc(t.y,e.y,n.y)}function Cc(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function kc(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}const Pc=.35;function Ic(t,e,n){return{min:Nc(t,e),max:Nc(t,n)}}function Nc(t,e){return"number"===typeof t?t:t[e]||0}const Rc=()=>({x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}),Dc=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Lc(t){return[t("x"),t("y")]}function Fc(t){let{top:e,left:n,right:r,bottom:i}=t;return{x:{min:n,max:r},y:{min:e,max:i}}}function jc(t){return void 0===t||1===t}function Uc(t){let{scale:e,scaleX:n,scaleY:r}=t;return!jc(e)||!jc(n)||!jc(r)}function Bc(t){return Uc(t)||zc(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function zc(t){return Vc(t.x)||Vc(t.y)}function Vc(t){return t&&"0%"!==t}function Gc(t,e,n){return n+e*(t-n)}function Wc(t,e,n,r,i){return void 0!==i&&(t=Gc(t,i,r)),Gc(t,n,r)+e}function Hc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;t.min=Wc(t.min,e,n,r,i),t.max=Wc(t.max,e,n,r,i)}function qc(t,e){let{x:n,y:r}=e;Hc(t.x,n.translate,n.scale,n.originPoint),Hc(t.y,r.translate,r.scale,r.originPoint)}function Xc(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Yc(t,e){t.min=t.min+e,t.max=t.max+e}function Kc(t,e,n){let[r,i,o]=n;const a=void 0!==e[o]?e[o]:.5,s=ps(t.min,t.max,a);Hc(t,e[r],e[i],s,e.scale)}const Zc=["x","scaleX","originX"],Jc=["y","scaleY","originY"];function $c(t,e){Kc(t.x,e,Zc),Kc(t.y,e,Jc)}function Qc(t,e){return Fc(function(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(t.getBoundingClientRect(),e))}const tl=t=>{let{current:e}=t;return e?e.ownerDocument.defaultView:null},el=new WeakMap;class nl{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dc(),this.visualElement=t}start(t){let{snapToCursor:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new mc(t,{onSessionStart:t=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Ji(t,"page").point)},onStart:(t,e)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=oo(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Lc((t=>{let e=this.getAxisMotionValue(t).get()||0;if(oi.test(e)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[t];if(r){e=wc(r)*(parseFloat(e)/100)}}}this.originPoint[t]=e})),i&&Gi.postRender((()=>i(t,e)));const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(t,e)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:o}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:a}=e;if(r&&null===this.currentDirection)return this.currentDirection=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x");return n}(a),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",e.point,a),this.updateAxis("y",e.point,a),this.visualElement.render(),o&&o(t,e)},onSessionEnd:(t,e)=>this.stop(t,e),resumeAnimation:()=>Lc((t=>{var e;return"paused"===this.getAnimationState(t)&&(null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:tl(this.visualElement)})}stop(t,e){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=e;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&Gi.postRender((()=>i(t,e)))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:r}=this.getProps();if(!n||!rl(t,r,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=function(t,e,n){let{min:r,max:i}=e;return void 0!==r&&t<r?t=n?ps(r,t,n.min):Math.max(t,r):void 0!==i&&t>i&&(t=n?ps(i,t,n.max):Math.min(t,i)),t}(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(t=this.visualElement.projection)||void 0===t?void 0:t.layout,i=this.constraints;e&&hr(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!r)&&function(t,e){let{top:n,left:r,bottom:i,right:o}=e;return{x:Cc(t.x,r,o),y:Cc(t.y,n,i)}}(r.layoutBox,e),this.elastic=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pc;return!1===t?t=0:!0===t&&(t=Pc),{x:Ic(t,"left","right"),y:Ic(t,"top","bottom")}}(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Lc((t=>{!1!==this.constraints&&this.getAxisMotionValue(t)&&(this.constraints[t]=function(t,e){const n={};return void 0!==e.min&&(n.min=e.min-t.min),void 0!==e.max&&(n.max=e.max-t.min),n}(r.layoutBox[t],this.constraints[t]))}))}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!hr(t))return!1;const n=t.current;Fo(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(t,e,n){const r=Qc(t,n),{scroll:i}=e;return i&&(Yc(r.x,i.offset.x),Yc(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let o=function(t,e){return{x:kc(t.x,e.x),y:kc(t.y,e.y)}}(r.layout.layoutBox,i);if(e){const t=e(function(t){let{x:e,y:n}=t;return{top:n.min,right:e.max,bottom:n.max,left:e.min}}(o));this.hasMutatedConstraints=!!t,t&&(o=Fc(t))}return o}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),s=this.constraints||{},c=Lc((a=>{if(!rl(a,e,this.currentDirection))return;let c=s&&s[a]||{};o&&(c={min:0,max:0});const l=r?200:1e6,u=r?40:1e7,h={type:"inertia",velocity:n?t[a]:0,bounceStiffness:l,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...c};return this.startAxisValueAnimation(a,h)}));return Promise.all(c).then(a)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return n.start(qs(t,n,0,e,this.visualElement))}stopAnimation(){Lc((t=>this.getAxisMotionValue(t).stop()))}pauseAnimation(){Lc((t=>{var e;return null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.pause()}))}getAnimationState(t){var e;return null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.state}getAxisMotionValue(t){const e="_drag".concat(t.toUpperCase()),n=this.visualElement.getProps(),r=n[e];return r||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Lc((e=>{const{drag:n}=this.getProps();if(!rl(e,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(e);if(r&&r.layout){const{min:n,max:o}=r.layout.layoutBox[e];i.set(t[e]-ps(n,o,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!hr(e)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Lc((t=>{const e=this.getAxisMotionValue(t);if(e&&!1!==this.constraints){const n=e.get();r[t]=function(t,e){let n=.5;const r=wc(t),i=wc(e);return i>r?n=ds(e.min,e.max-r,t.min):r>i&&(n=ds(t.min,t.max-i,e.min)),Yr(0,1,n)}({min:n,max:n},this.constraints[t])}}));const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Lc((e=>{if(!rl(e,t,null))return;const n=this.getAxisMotionValue(e),{min:i,max:o}=this.constraints[e];n.set(ps(i,o,r[e]))}))}addListeners(){if(!this.visualElement.current)return;el.set(this.visualElement,this);const t=Qi(this.visualElement.current,"pointerdown",(t=>{const{drag:e,dragListener:n=!0}=this.getProps();e&&n&&this.start(t)})),e=()=>{const{dragConstraints:t}=this.getProps();hr(t)&&t.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",e);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),Gi.read(e);const i=Ki(window,"resize",(()=>this.scalePositionWithinConstraints())),o=n.addEventListener("didUpdate",(t=>{let{delta:e,hasLayoutChanged:n}=t;this.isDragging&&n&&(Lc((t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))})),this.visualElement.render())}));return()=>{i(),t(),r(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=Pc,dragMomentum:a=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function rl(t,e,n){return(!0===e||e===t)&&(null===n||n===t)}const il=t=>(e,n)=>{t&&Gi.postRender((()=>t(e,n)))};const ol={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function al(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const sl={correct:(t,e)=>{if(!e.target)return t;if("string"===typeof t){if(!ai.test(t))return t;t=parseFloat(t)}const n=al(t,e.target.x),r=al(t,e.target.y);return"".concat(n,"% ").concat(r,"%")}},cl={correct:(t,e)=>{let{treeScale:n,projectionDelta:r}=e;const i=t,o=xa.parse(t);if(o.length>5)return i;const a=xa.createTransformer(t),s="number"!==typeof o[0]?1:0,c=r.x.scale*n.x,l=r.y.scale*n.y;o[0+s]/=c,o[1+s]/=l;const u=ps(c,l,.5);return"number"===typeof o[2+s]&&(o[2+s]/=u),"number"===typeof o[3+s]&&(o[3+s]/=u),a(o)}};class ll extends k.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=t;var o;o=hl,Object.assign(Dr,o),i&&(e.group&&e.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",(()=>{this.safeToRemove()})),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ol.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:r,isPresent:i}=this.props,o=n.projection;return o?(o.isPresent=i,r||t.layoutDependency!==e||void 0===e?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Gi.postRender((()=>{const t=o.getStack();t&&t.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),lr.postRender((()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ul(t){const[e,n]=function(){const t=(0,k.useContext)($n);if(null===t)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=(0,k.useId)();return(0,k.useEffect)((()=>r(i)),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}(),r=(0,k.useContext)(Or);return(0,Ln.jsx)(ll,{...t,layoutGroup:r,switchLayoutGroup:(0,k.useContext)(dr),isPresent:e,safeToRemove:n})}const hl={borderRadius:{...sl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sl,borderTopRightRadius:sl,borderBottomLeftRadius:sl,borderBottomRightRadius:sl,boxShadow:cl},dl=["TopLeft","TopRight","BottomLeft","BottomRight"],pl=dl.length,fl=t=>"string"===typeof t?parseFloat(t):t,ml=t=>"number"===typeof t||ai.test(t);function gl(t,e){return void 0!==t[e]?t[e]:t.borderRadius}const yl=bl(0,.5,os),vl=bl(.5,.95,Vi);function bl(t,e,n){return r=>r<t?0:r>e?1:n(ds(t,e,r))}function xl(t,e){t.min=e.min,t.max=e.max}function _l(t,e){xl(t.x,e.x),xl(t.y,e.y)}function wl(t,e,n,r,i){return t=Gc(t-=e,1/n,r),void 0!==i&&(t=Gc(t,1/i,r)),t}function Sl(t,e,n,r,i){let[o,a,s]=n;!function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:t;oi.test(e)&&(e=parseFloat(e),e=ps(a.min,a.max,e/100)-a.min);if("number"!==typeof e)return;let s=ps(o.min,o.max,r);t===o&&(s-=e),t.min=wl(t.min,e,n,s,i),t.max=wl(t.max,e,n,s,i)}(t,e[o],e[a],e[s],e.scale,r,i)}const Tl=["x","scaleX","originX"],El=["y","scaleY","originY"];function Al(t,e,n,r){Sl(t.x,e,Tl,n?n.x:void 0,r?r.x:void 0),Sl(t.y,e,El,n?n.y:void 0,r?r.y:void 0)}function Ml(t){return 0===t.translate&&1===t.scale}function Ol(t){return Ml(t.x)&&Ml(t.y)}function Cl(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function kl(t){return wc(t.x)/wc(t.y)}class Pl{constructor(){this.members=[]}add(t){Ys(this.members,t),t.scheduleRender()}remove(t){if(Ks(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(t){const e=this.members.findIndex((e=>t===e));if(0===e)return!1;let n;for(let r=e;r>=0;r--){const t=this.members[r];if(!1!==t.isPresent){n=t;break}}return!!n&&(this.promote(n),!0)}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((t=>{t.instance&&t.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Il(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,a=(null===n||void 0===n?void 0:n.z)||0;if((i||o||a)&&(r="translate3d(".concat(i,"px, ").concat(o,"px, ").concat(a,"px) ")),1===e.x&&1===e.y||(r+="scale(".concat(1/e.x,", ").concat(1/e.y,") ")),n){const{transformPerspective:t,rotate:e,rotateX:i,rotateY:o,skewX:a,skewY:s}=n;t&&(r="perspective(".concat(t,"px) ").concat(r)),e&&(r+="rotate(".concat(e,"deg) ")),i&&(r+="rotateX(".concat(i,"deg) ")),o&&(r+="rotateY(".concat(o,"deg) ")),a&&(r+="skewX(".concat(a,"deg) ")),s&&(r+="skewY(".concat(s,"deg) "))}const s=t.x.scale*e.x,c=t.y.scale*e.y;return 1===s&&1===c||(r+="scale(".concat(s,", ").concat(c,")")),r||"none"}const Nl=(t,e)=>t.depth-e.depth;class Rl{constructor(){this.children=[],this.isDirty=!1}add(t){Ys(this.children,t),this.isDirty=!0}remove(t){Ks(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Nl),this.isDirty=!1,this.children.forEach(t)}}const Dl=["","X","Y","Z"],Ll={visibility:"hidden"};let Fl=0;const jl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Ul(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Bl(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return!1;const{visualElement:e}=t.options;return!!e&&(!!ec(e)||!(!t.parent||t.parent.hasCheckedOptimisedAppear)&&Bl(t.parent))}function zl(t){let{attachResizeListener:e,defaultParent:n,measureScroll:r,checkIsScrollRoot:i,resetTransform:o}=t;return class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=Fl++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,jl.totalNodes=jl.resolvedTargetDeltas=jl.recalculatedProjection=0,this.nodes.forEach(Wl),this.nodes.forEach(Jl),this.nodes.forEach($l),this.nodes.forEach(Hl),function(t){window.MotionDebug&&window.MotionDebug.record(t)}(jl)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=t,this.root=e?e.root||e:this,this.path=e?[...e.path,e]:[],this.parent=e,this.depth=e?e.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Rl)}addEventListener(t,e){return this.eventHandlers.has(t)||this.eventHandlers.set(t,new Zs),this.eventHandlers.get(t).add(e)}notifyListeners(t){const e=this.eventHandlers.get(t);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e&&e.notify(...r)}hasListeners(t){return this.eventHandlers.has(t)}mount(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var r;this.isSVG=(r=t)instanceof SVGElement&&"svg"!==r.tagName,this.instance=t;const{layoutId:i,layout:o,visualElement:a}=this.options;if(a&&!a.current&&a.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(o||i)&&(this.isLayoutDirty=!0),e){let n;const r=()=>this.root.updateBlockedByResize=!1;e(t,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(t,e){const n=No.now(),r=i=>{let{timestamp:o}=i;const a=o-n;a>=e&&(Wi(r),t(a-e))};return Gi.read(r,!0),()=>Wi(r)}(r,250),ol.hasAnimatedSinceResize&&(ol.hasAnimatedSinceResize=!1,this.nodes.forEach(Zl))}))}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&a&&(i||o)&&this.addEventListener("didUpdate",(t=>{let{delta:e,hasLayoutChanged:n,hasRelativeTargetChanged:r,layout:i}=t;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const o=this.options.transition||a.getDefaultTransition()||iu,{onLayoutAnimationStart:s,onLayoutAnimationComplete:c}=a.getProps(),l=!this.targetLayout||!Cl(this.targetLayout,i)||r,u=!n&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||n&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,u);const t={...Mo(o,"layout"),onPlay:s,onComplete:c};(a.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else n||Zl(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const t=this.getStack();t&&t.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Wi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ql),this.animationId++)}getTransformTemplate(){const{visualElement:t}=this.options;return t&&t.getProps().transformTemplate}willUpdate(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.HandoffCancelAllAnimations&&Bl(this)&&window.HandoffCancelAllAnimations(),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const t=this.path[i];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}const{layoutId:e,layout:n}=this.options;if(void 0===e&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),t&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Xl);this.isUpdating||this.nodes.forEach(Yl),this.isUpdating=!1,this.nodes.forEach(Kl),this.nodes.forEach(Vl),this.nodes.forEach(Gl),this.clearAllSnapshots();const t=No.now();Hi.delta=Yr(0,1e3/60,t-Hi.timestamp),Hi.timestamp=t,Hi.isProcessing=!0,qi.update.process(Hi),qi.preRender.process(Hi),qi.render.process(Hi),Hi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,lr.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ql),this.sharedNodes.forEach(tu)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gi.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const t=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dc(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:e}=this.options;e&&e.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}updateScroll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",e=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===t&&(e=!1),e&&(this.scroll={animationId:this.root.animationId,phase:t,isRoot:i(this.instance),offset:r(this.instance)})}resetTransform(){if(!o)return;const t=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,e=this.projectionDelta&&!Ol(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;t&&(e||Bc(this.latestValues)||i)&&(o(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.measurePageBox();let n=this.removeElementScroll(e);var r;return t&&(n=this.removeTransform(n)),su((r=n).x),su(r.y),{animationId:this.root.animationId,measuredBox:e,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:t}=this.options;if(!t)return Dc();const e=t.measureViewportBox(),{scroll:n}=this.root;return n&&(Yc(e.x,n.offset.x),Yc(e.y,n.offset.y)),e}removeElementScroll(t){const e=Dc();_l(e,t);for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:i,options:o}=r;if(r!==this.root&&i&&o.layoutScroll){if(i.isRoot){_l(e,t);const{scroll:n}=this.root;n&&(Yc(e.x,-n.offset.x),Yc(e.y,-n.offset.y))}Yc(e.x,i.offset.x),Yc(e.y,i.offset.y)}}return e}applyTransform(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Dc();_l(n,t);for(let r=0;r<this.path.length;r++){const t=this.path[r];!e&&t.options.layoutScroll&&t.scroll&&t!==t.root&&$c(n,{x:-t.scroll.offset.x,y:-t.scroll.offset.y}),Bc(t.latestValues)&&$c(n,t.latestValues)}return Bc(this.latestValues)&&$c(n,this.latestValues),n}removeTransform(t){const e=Dc();_l(e,t);for(let n=0;n<this.path.length;n++){const t=this.path[n];if(!t.instance)continue;if(!Bc(t.latestValues))continue;Uc(t.latestValues)&&t.updateSnapshot();const r=Dc();_l(r,t.measurePageBox()),Al(e,t.latestValues,t.snapshot?t.snapshot.layoutBox:void 0,r)}return Bc(this.latestValues)&&Al(e,this.latestValues),e}setTargetDelta(t){this.targetDelta=t,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(t){this.options={...this.options,...t,crossfade:void 0===t.crossfade||t.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Hi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:i,layoutId:o}=this.options;if(this.layout&&(i||o)){if(this.resolvedRelativeTargetAt=Hi.timestamp,!this.targetDelta&&!this.relativeTarget){const t=this.getClosestProjectingParent();t&&t.layout&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dc(),this.relativeTargetOrigin=Dc(),Oc(this.relativeTargetOrigin,this.layout.layoutBox,t.layout.layoutBox),_l(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var a,s,c;if(this.target||(this.target=Dc(),this.targetWithTransforms=Dc()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a=this.target,s=this.relativeTarget,c=this.relativeParent.target,Ac(a.x,s.x,c.x),Ac(a.y,s.y,c.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):_l(this.target,this.layout.layoutBox),qc(this.target,this.targetDelta)):_l(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const t=this.getClosestProjectingParent();t&&Boolean(t.resumingFrom)===Boolean(this.resumingFrom)&&!t.options.layoutScroll&&t.target&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dc(),this.relativeTargetOrigin=Dc(),Oc(this.relativeTargetOrigin,this.target,t.target),_l(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}jl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Uc(this.parent.latestValues)&&!zc(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var t;const e=this.getLead(),n=Boolean(this.resumingFrom)||this!==e;let r=!0;if((this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===Hi.timestamp&&(r=!1),r)return;const{layout:i,layoutId:o}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!o)return;_l(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,s=this.treeScale.y;!function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=n.length;if(!i)return;let o,a;e.x=e.y=1;for(let s=0;s<i;s++){o=n[s],a=o.projectionDelta;const i=o.instance;i&&i.style&&"contents"===i.style.display||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&$c(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,qc(t,a)),r&&Bc(o.latestValues)&&$c(t,o.latestValues))}e.x=Xc(e.x),e.y=Xc(e.y)}(this.layoutCorrected,this.treeScale,this.path,n),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox,e.targetWithTransforms=Dc());const{target:c}=e;if(!c)return void(this.projectionTransform&&(this.projectionDelta=Rc(),this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta=Rc(),this.projectionDeltaWithTransform=Rc());const l=this.projectionTransform;Ec(this.projectionDelta,this.layoutCorrected,c,this.latestValues),this.projectionTransform=Il(this.projectionDelta,this.treeScale),this.projectionTransform===l&&this.treeScale.x===a&&this.treeScale.y===s||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",c)),jl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),t){const t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},o=Rc();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!e;const a=Dc(),s=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),c=this.getStack(),l=!c||c.members.length<=1,u=Boolean(s&&!l&&!0===this.options.crossfade&&!this.path.some(ru));let h;this.animationProgress=0,this.mixTargetDelta=e=>{const n=e/1e3;eu(o.x,t.x,n),eu(o.y,t.y,n),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Oc(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(t,e,n,r){nu(t.x,e.x,n.x,r),nu(t.y,e.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,a,n),h&&function(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}(this.relativeTarget,h)&&(this.isProjectionDirty=!1),h||(h=Dc()),_l(h,this.relativeTarget)),s&&(this.animationValues=i,function(t,e,n,r,i,o){i?(t.opacity=ps(0,void 0!==n.opacity?n.opacity:1,yl(r)),t.opacityExit=ps(void 0!==e.opacity?e.opacity:1,0,vl(r))):o&&(t.opacity=ps(void 0!==e.opacity?e.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let a=0;a<pl;a++){const i="border".concat(dl[a],"Radius");let o=gl(e,i),s=gl(n,i);void 0===o&&void 0===s||(o||(o=0),s||(s=0),0===o||0===s||ml(o)===ml(s)?(t[i]=Math.max(ps(fl(o),fl(s),r),0),(oi.test(s)||oi.test(o))&&(t[i]+="%")):t[i]=s)}(e.rotate||n.rotate)&&(t.rotate=ps(e.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,u,l)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(t){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Wi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gi.update((()=>{ol.hasAnimatedSinceResize=!0,this.currentAnimation=function(t,e,n){const r=Ur(t)?t:Qs(t);return r.start(qs("",r,e,n)),r.animation}(0,1e3,{...t,onUpdate:e=>{this.mixTargetDelta(e),t.onUpdate&&t.onUpdate(e)},onComplete:()=>{t.onComplete&&t.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const t=this.getStack();t&&t.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const t=this.getLead();let{targetWithTransforms:e,target:n,layout:r,latestValues:i}=t;if(e&&n&&r){if(this!==t&&this.layout&&r&&cu(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||Dc();const e=wc(this.layout.layoutBox.x);n.x.min=t.target.x.min,n.x.max=n.x.min+e;const r=wc(this.layout.layoutBox.y);n.y.min=t.target.y.min,n.y.max=n.y.min+r}_l(e,n),$c(e,i),Ec(this.projectionDeltaWithTransform,this.layoutCorrected,e,i)}}registerSharedNode(t,e){this.sharedNodes.has(t)||this.sharedNodes.set(t,new Pl);this.sharedNodes.get(t).add(e);const n=e.options.initialPromotionConfig;e.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(e):void 0})}isLead(){const t=this.getStack();return!t||t.lead===this}getLead(){var t;const{layoutId:e}=this.options;return e&&(null===(t=this.getStack())||void 0===t?void 0:t.lead)||this}getPrevLead(){var t;const{layoutId:e}=this.options;return e?null===(t=this.getStack())||void 0===t?void 0:t.prevLead:void 0}getStack(){const{layoutId:t}=this.options;if(t)return this.root.sharedNodes.get(t)}promote(){let{needsReset:t,transition:e,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),t&&(this.projectionDelta=void 0,this.needsReset=!0),e&&this.setOptions({transition:e})}relegate(){const t=this.getStack();return!!t&&t.relegate(this)}resetSkewAndRotation(){const{visualElement:t}=this.options;if(!t)return;let e=!1;const{latestValues:n}=t;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(e=!0),!e)return;const r={};n.z&&Ul("z",t,r,this.animationValues);for(let i=0;i<Dl.length;i++)Ul("rotate".concat(Dl[i]),t,r,this.animationValues),Ul("skew".concat(Dl[i]),t,r,this.animationValues);t.render();for(const i in r)t.setStaticValue(i,r[i]),this.animationValues&&(this.animationValues[i]=r[i]);t.scheduleRender()}getProjectionStyles(t){var e,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ll;const r={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=Ui(null===t||void 0===t?void 0:t.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;const o=this.getLead();if(!this.projectionDelta||!this.layout||!o.target){const e={};return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=Ui(null===t||void 0===t?void 0:t.pointerEvents)||""),this.hasProjected&&!Bc(this.latestValues)&&(e.transform=i?i({},""):"none",this.hasProjected=!1),e}const a=o.animationValues||o.latestValues;this.applyTransformsToTarget(),r.transform=Il(this.projectionDeltaWithTransform,this.treeScale,a),i&&(r.transform=i(a,r.transform));const{x:s,y:c}=this.projectionDelta;r.transformOrigin="".concat(100*s.origin,"% ").concat(100*c.origin,"% 0"),o.animationValues?r.opacity=o===this?null!==(n=null!==(e=a.opacity)&&void 0!==e?e:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:r.opacity=o===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0;for(const l in Dr){if(void 0===a[l])continue;const{correct:t,applyTo:e}=Dr[l],n="none"===r.transform?a[l]:t(a[l],o);if(e){const t=e.length;for(let i=0;i<t;i++)r[e[i]]=n}else r[l]=n}return this.options.layoutId&&(r.pointerEvents=o===this?Ui(null===t||void 0===t?void 0:t.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((t=>{var e;return null===(e=t.currentAnimation)||void 0===e?void 0:e.stop()})),this.root.nodes.forEach(Xl),this.root.sharedNodes.clear()}}}function Vl(t){t.updateLayout()}function Gl(t){var e;const n=(null===(e=t.resumeFrom)||void 0===e?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:r}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;"size"===i?Lc((t=>{const r=o?n.measuredBox[t]:n.layoutBox[t],i=wc(r);r.min=e[t].min,r.max=r.min+i})):cu(i,n.layoutBox,e)&&Lc((r=>{const i=o?n.measuredBox[r]:n.layoutBox[r],a=wc(e[r]);i.max=i.min+a,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[r].max=t.relativeTarget[r].min+a)}));const a=Rc();Ec(a,e,n.layoutBox);const s=Rc();o?Ec(s,t.applyTransform(r,!0),n.measuredBox):Ec(s,e,n.layoutBox);const c=!Ol(a);let l=!1;if(!t.resumeFrom){const r=t.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:o}=r;if(i&&o){const a=Dc();Oc(a,n.layoutBox,i.layoutBox);const s=Dc();Oc(s,e,o.layoutBox),Cl(a,s)||(l=!0),r.options.layoutRoot&&(t.relativeTarget=s,t.relativeTargetOrigin=a,t.relativeParent=r)}}}t.notifyListeners("didUpdate",{layout:e,snapshot:n,delta:s,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:l})}else if(t.isLead()){const{onExitComplete:e}=t.options;e&&e()}t.options.transition=void 0}function Wl(t){jl.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=Boolean(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Hl(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function ql(t){t.clearSnapshot()}function Xl(t){t.clearMeasurements()}function Yl(t){t.isLayoutDirty=!1}function Kl(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Zl(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Jl(t){t.resolveTargetDelta()}function $l(t){t.calcProjection()}function Ql(t){t.resetSkewAndRotation()}function tu(t){t.removeLeadSnapshot()}function eu(t,e,n){t.translate=ps(e.translate,0,n),t.scale=ps(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function nu(t,e,n,r){t.min=ps(e.min,n.min,r),t.max=ps(e.max,n.max,r)}function ru(t){return t.animationValues&&void 0!==t.animationValues.opacityExit}const iu={duration:.45,ease:[.4,0,.1,1]},ou=t=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),au=ou("applewebkit/")&&!ou("chrome/")?Math.round:Vi;function su(t){t.min=au(t.min),t.max=au(t.max)}function cu(t,e,n){return"position"===t||"preserve-aspect"===t&&!Sc(kl(e),kl(n),.2)}const lu=zl({attachResizeListener:(t,e)=>Ki(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),uu={current:void 0},hu=zl({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!uu.current){const t=new lu({});t.mount(window),t.setOptions({layoutScroll:!0}),uu.current=t}return uu.current},resetTransform:(t,e)=>{t.style.transform=void 0!==e?e:"none"},checkIsScrollRoot:t=>Boolean("fixed"===window.getComputedStyle(t).position)}),du={pan:{Feature:class extends so{constructor(){super(...arguments),this.removePointerDownListener=Vi}onPointerDown(t){this.session=new mc(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tl(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:il(t),onStart:il(e),onMove:n,onEnd:(t,e)=>{delete this.session,r&&Gi.postRender((()=>r(t,e)))}}}mount(){this.removePointerDownListener=Qi(this.node.current,"pointerdown",(t=>this.onPointerDown(t)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends so{constructor(t){super(t),this.removeGroupControls=Vi,this.removeListeners=Vi,this.controls=new nl(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vi}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:hu,MeasureLayout:ul}},pu={current:null},fu={current:!1};const mu=new WeakMap,gu=[...Ko,la,xa],yu=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],vu=_r.length;class bu{scrapeMotionValuesFromProps(t,e,n){return{}}constructor(t){let{parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:a}=t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.resolveKeyframes=(t,e,n,r)=>new this.KeyframeResolver(t,e,n,r,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=na,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Gi.render(this.render,!1,!0);const{latestValues:c,renderState:l}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.blockInitialAnimation=Boolean(o),this.isControllingVariants=wr(n),this.isVariantNode=Sr(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const d in h){const t=h[d];void 0!==c[d]&&Ur(t)&&(t.set(c[d],!1),Xs(u)&&u.add(d))}}mount(t){this.current=t,mu.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((t,e)=>this.bindToMotionValue(e,t))),fu.current||function(){if(fu.current=!0,Qn)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>pu.current=t.matches;t.addListener(e),e()}else pu.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||pu.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){mu.delete(this.current),this.projection&&this.projection.unmount(),Wi(this.notifyUpdate),Wi(this.render),this.valueSubscriptions.forEach((t=>t())),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){const n=Fr.has(t),r=e.on("change",(e=>{this.latestValues[t]=e,this.props.onUpdate&&Gi.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),i=e.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,(()=>{r(),i(),e.owner&&e.stop()}))}sortNodePosition(t){return this.current&&this.sortInstanceNodePosition&&this.type===t.type?this.sortInstanceNodePosition(this.current,t.current):0}updateFeatures(){let t="animation";for(t in Mr){const e=Mr[t];if(!e)continue;const{isEnabled:n,Feature:r}=e;if(!this.features[t]&&r&&n(this.props)&&(this.features[t]=new r(this)),this.features[t]){const e=this.features[t];e.isMounted?e.update():(e.mount(),e.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dc()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<yu.length;n++){const e=yu[n];this.propEventSubscriptions[e]&&(this.propEventSubscriptions[e](),delete this.propEventSubscriptions[e]);const r=t["on"+e];r&&(this.propEventSubscriptions[e]=this.on(e,r))}this.prevMotionValues=function(t,e,n){const{willChange:r}=e;for(const i in e){const o=e[i],a=n[i];if(Ur(o))t.addValue(i,o),Xs(r)&&r.add(i);else if(Ur(a))t.addValue(i,Qs(o,{owner:t})),Xs(r)&&r.remove(i);else if(a!==o)if(t.hasValue(i)){const e=t.getValue(i);!0===e.liveStyle?e.jump(o):e.hasAnimated||e.set(o)}else{const e=t.getStaticValue(i);t.addValue(i,Qs(void 0!==e?e:o,{owner:t}))}}for(const i in n)void 0===e[i]&&t.removeValue(i);return e}(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const t=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(t.initial=this.props.initial),t}const t={};for(let e=0;e<vu;e++){const n=_r[e],r=this.props[n];(vr(r)||!1===r)&&(t[n]=r)}return t}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return void 0===n&&void 0!==e&&(n=Qs(null===e?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){var n;let r=void 0===this.latestValues[t]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,t))&&void 0!==n?n:this.readValueFromInstance(this.current,t,this.options):this.latestValues[t];return void 0!==r&&null!==r&&("string"===typeof r&&(jo(r)||Ro(r))?r=parseFloat(r):!(t=>gu.find(Yo(t)))(r)&&xa.test(e)&&(r=Ma(t,e)),this.setBaseTarget(t,Ur(r)?r.get():r)),Ur(r)?r.get():r}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:n}=this.props;let r;if("string"===typeof n||"object"===typeof n){const i=Di(this.props,n,null===(e=this.presenceContext)||void 0===e?void 0:e.custom);i&&(r=i[t])}if(n&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,t);return void 0===i||Ur(i)?void 0!==this.initialValues[t]&&void 0===r?void 0:this.baseTarget[t]:i}on(t,e){return this.events[t]||(this.events[t]=new Zs),this.events[t].add(e)}notify(t){if(this.events[t]){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.events[t].notify(...n)}}}class xu extends bu{constructor(){super(...arguments),this.KeyframeResolver=Ca}sortInstanceNodePosition(t,e){return 2&t.compareDocumentPosition(e)?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,e){let{vars:n,style:r}=e;delete n[t],delete r[t]}}class _u extends xu{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,e){if(Fr.has(e)){const t=Aa(e);return t&&t.default||0}{const r=(n=t,window.getComputedStyle(n)),i=(Gr(e)?r.getPropertyValue(e):r[e])||0;return"string"===typeof i?i.trim():i}var n}measureInstanceViewportBox(t,e){let{transformPagePoint:n}=e;return Qc(t,n)}build(t,e,n,r){di(t,e,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return Ii(t,e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ur(t)&&(this.childSubscription=t.on("change",(t=>{this.current&&(this.current.textContent="".concat(t))})))}renderInstance(t,e,n,r){Ci(t,e,n,r)}}class wu extends xu{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Fr.has(e)){const t=Aa(e);return t&&t.default||0}return e=ki.has(e)?e:nr(e),t.getAttribute(e)}measureInstanceViewportBox(){return Dc()}scrapeMotionValuesFromProps(t,e,n){return Ni(t,e,n)}build(t,e,n,r){Ti(t,e,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,e,n,r){Pi(t,e,0,r)}mount(t){this.isSVGTag=Ai(t.tagName),super.mount(t)}}const Su=(t,e)=>Rr(t)?new wu(e,{enableHardwareAcceleration:!1}):new _u(e,{allowProjection:t!==k.Fragment,enableHardwareAcceleration:!0}),Tu={...pc,...vo,...du,...{layout:{ProjectionNode:hu,MeasureLayout:ul}}},Eu=Ir(((t,e)=>function(t,e,n,r){let{forwardMotionProps:i=!1}=e;return{...Rr(t)?Xi:Yi,preloadedFeatures:n,useRender:Oi(i),createVisualElement:r,Component:t}}(t,e,Tu,Su)));const Au="165",Mu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ou={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Cu=0,ku=1,Pu=2,Iu=3,Nu=0,Ru=1,Du=2,Lu=3,Fu=0,ju=1,Uu=2,Bu=0,zu=1,Vu=2,Gu=3,Wu=4,Hu=5,qu=100,Xu=101,Yu=102,Ku=103,Zu=104,Ju=200,$u=201,Qu=202,th=203,eh=204,nh=205,rh=206,ih=207,oh=208,ah=209,sh=210,ch=211,lh=212,uh=213,hh=214,dh=0,ph=1,fh=2,mh=3,gh=4,yh=5,vh=6,bh=7,xh=0,_h=1,wh=2,Sh=0,Th=1,Eh=2,Ah=3,Mh=4,Oh=5,Ch=6,kh=7,Ph="attached",Ih="detached",Nh=300,Rh=301,Dh=302,Lh=303,Fh=304,jh=306,Uh=1e3,Bh=1001,zh=1002,Vh=1003,Gh=1004,Wh=1004,Hh=1005,qh=1005,Xh=1006,Yh=1007,Kh=1007,Zh=1008,Jh=1008,$h=1009,Qh=1010,td=1011,ed=1012,nd=1013,rd=1014,id=1015,od=1016,ad=1017,sd=1018,cd=1020,ld=35902,ud=1021,hd=1022,dd=1023,pd=1024,fd=1025,md=1026,gd=1027,yd=1028,vd=1029,bd=1030,xd=1031,_d=1033,wd=33776,Sd=33777,Td=33778,Ed=33779,Ad=35840,Md=35841,Od=35842,Cd=35843,kd=36196,Pd=37492,Id=37496,Nd=37808,Rd=37809,Dd=37810,Ld=37811,Fd=37812,jd=37813,Ud=37814,Bd=37815,zd=37816,Vd=37817,Gd=37818,Wd=37819,Hd=37820,qd=37821,Xd=36492,Yd=36494,Kd=36495,Zd=36283,Jd=36284,$d=36285,Qd=36286,tp=2200,ep=2201,np=2202,rp=2300,ip=2301,op=2302,ap=2400,sp=2401,cp=2402,lp=2500,up=2501,hp=0,dp=1,pp=2,fp=3200,mp=3201,gp=0,yp=1,vp="",bp="srgb",xp="srgb-linear",_p="display-p3",wp="display-p3-linear",Sp="linear",Tp="srgb",Ep="rec709",Ap="p3",Mp=0,Op=7680,Cp=7681,kp=7682,Pp=7683,Ip=34055,Np=34056,Rp=5386,Dp=512,Lp=513,Fp=514,jp=515,Up=516,Bp=517,zp=518,Vp=519,Gp=512,Wp=513,Hp=514,qp=515,Xp=516,Yp=517,Kp=518,Zp=519,Jp=35044,$p=35048,Qp=35040,tf=35045,ef=35049,nf=35041,rf=35046,of=35050,af=35042,sf="100",cf="300 es",lf=2e3,uf=2001;class hf{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,r=n.length;e<r;e++)n[e].call(this,t);t.target=null}}}const df=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let pf=1234567;const ff=Math.PI/180,mf=180/Math.PI;function gf(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(df[255&t]+df[t>>8&255]+df[t>>16&255]+df[t>>24&255]+"-"+df[255&e]+df[e>>8&255]+"-"+df[e>>16&15|64]+df[e>>24&255]+"-"+df[63&n|128]+df[n>>8&255]+"-"+df[n>>16&255]+df[n>>24&255]+df[255&r]+df[r>>8&255]+df[r>>16&255]+df[r>>24&255]).toLowerCase()}function yf(t,e,n){return Math.max(e,Math.min(n,t))}function vf(t,e){return(t%e+e)%e}function bf(t,e,n){return(1-n)*t+n*e}function xf(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function _f(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}const wf={DEG2RAD:ff,RAD2DEG:mf,generateUUID:gf,clamp:yf,euclideanModulo:vf,mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:bf,damp:function(t,e,n,r){return bf(t,e,1-Math.exp(-n*r))},pingpong:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e-Math.abs(vf(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(pf=t);let e=pf+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function(t){return t*ff},radToDeg:function(t){return t*mf},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),c=a(n/2),l=o((e+r)/2),u=a((e+r)/2),h=o((e-r)/2),d=a((e-r)/2),p=o((r-e)/2),f=a((r-e)/2);switch(i){case"XYX":t.set(s*u,c*h,c*d,s*l);break;case"YZY":t.set(c*d,s*u,c*h,s*l);break;case"ZXZ":t.set(c*h,c*d,s*u,s*l);break;case"XZX":t.set(s*u,c*f,c*p,s*l);break;case"YXY":t.set(c*p,s*u,c*f,s*l);break;case"ZYZ":t.set(c*f,c*p,s*u,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:_f,denormalize:xf};class Sf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Sf.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(yf(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Tf{constructor(t,e,n,r,i,o,a,s,c){Tf.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,r,i,o,a,s,c)}set(t,e,n,r,i,o,a,s,c){const l=this.elements;return l[0]=t,l[1]=r,l[2]=a,l[3]=e,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],c=n[1],l=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],y=r[1],v=r[4],b=r[7],x=r[2],_=r[5],w=r[8];return i[0]=o*f+a*y+s*x,i[3]=o*m+a*v+s*_,i[6]=o*g+a*b+s*w,i[1]=c*f+l*y+u*x,i[4]=c*m+l*v+u*_,i[7]=c*g+l*b+u*w,i[2]=h*f+d*y+p*x,i[5]=h*m+d*v+p*_,i[8]=h*g+d*b+p*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],c=t[7],l=t[8];return e*o*l-e*a*c-n*i*l+n*a*s+r*i*c-r*o*s}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],c=t[7],l=t[8],u=l*o-a*c,h=a*s-l*i,d=c*i-o*s,p=e*u+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return t[0]=u*f,t[1]=(r*c-l*n)*f,t[2]=(a*n-r*o)*f,t[3]=h*f,t[4]=(l*e-r*s)*f,t[5]=(r*i-a*e)*f,t[6]=d*f,t[7]=(n*s-c*e)*f,t[8]=(o*e-n*i)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,o,a){const s=Math.cos(i),c=Math.sin(i);return this.set(n*s,n*c,-n*(s*o+c*a)+o+t,-r*c,r*s,-r*(-c*o+s*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(Ef.makeScale(t,e)),this}rotate(t){return this.premultiply(Ef.makeRotation(-t)),this}translate(t,e){return this.premultiply(Ef.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const Ef=new Tf;function Af(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const Mf={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Of(t,e){return new Mf[t](e)}function Cf(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function kf(){const t=Cf("canvas");return t.style.display="block",t}const Pf={};function If(t){t in Pf||(Pf[t]=!0,console.warn(t))}const Nf=(new Tf).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Rf=(new Tf).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Df={[xp]:{transfer:Sp,primaries:Ep,toReference:t=>t,fromReference:t=>t},[bp]:{transfer:Tp,primaries:Ep,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[wp]:{transfer:Sp,primaries:Ap,toReference:t=>t.applyMatrix3(Rf),fromReference:t=>t.applyMatrix3(Nf)},[_p]:{transfer:Tp,primaries:Ap,toReference:t=>t.convertSRGBToLinear().applyMatrix3(Rf),fromReference:t=>t.applyMatrix3(Nf).convertLinearToSRGB()}},Lf=new Set([xp,wp]),Ff={enabled:!0,_workingColorSpace:xp,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!Lf.has(t))throw new Error('Unsupported working color space, "'.concat(t,'".'));this._workingColorSpace=t},convert:function(t,e,n){if(!1===this.enabled||e===n||!e||!n)return t;const r=Df[e].toReference;return(0,Df[n].fromReference)(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return Df[t].primaries},getTransfer:function(t){return t===vp?Sp:Df[t].transfer}};function jf(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Uf(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let Bf;class zf{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"===typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Bf&&(Bf=Cf("canvas")),Bf.width=t.width,Bf.height=t.height;const n=Bf.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Bf}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const e=Cf("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),i=r.data;for(let t=0;t<i.length;t++)i[t]=255*jf(i[t]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*jf(e[t]/255)):e[t]=jf(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Vf=0;class Gf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:Vf++}),this.uuid=gf(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(Wf(r[e].image)):t.push(Wf(r[e]))}else t=Wf(r);n.url=t}return e||(t.images[this.uuid]=n),n}}function Wf(t){return"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?zf.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Hf=0;class qf extends hf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qf.DEFAULT_IMAGE,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qf.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bh,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Bh,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Xh,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Zh,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:dd,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:$h,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:qf.DEFAULT_ANISOTROPY,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:vp;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Hf++}),this.uuid=gf(),this.name="",this.source=new Gf(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=s,this.offset=new Sf(0,0),this.repeat=new Sf(1,1),this.center=new Sf(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Tf,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=l,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t){void 0===t&&(t=null),this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Nh)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Uh:t.x=t.x-Math.floor(t.x);break;case Bh:t.x=t.x<0?0:1;break;case zh:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Uh:t.y=t.y-Math.floor(t.y);break;case Bh:t.y=t.y<0?0:1;break;case zh:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}qf.DEFAULT_IMAGE=null,qf.DEFAULT_MAPPING=Nh,qf.DEFAULT_ANISOTROPY=1;class Xf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Xf.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const o=.01,a=.1,s=t.elements,c=s[0],l=s[4],u=s[8],h=s[1],d=s[5],p=s[9],f=s[2],m=s[6],g=s[10];if(Math.abs(l-h)<o&&Math.abs(u-f)<o&&Math.abs(p-m)<o){if(Math.abs(l+h)<a&&Math.abs(u+f)<a&&Math.abs(p+m)<a&&Math.abs(c+d+g-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const t=(c+1)/2,s=(d+1)/2,y=(g+1)/2,v=(l+h)/4,b=(u+f)/4,x=(p+m)/4;return t>s&&t>y?t<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=v/n,i=b/n):s>y?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=v/r,i=x/r):y<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(y),n=b/i,r=x/i),this.set(n,r,i,e),this}let y=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-l)*(h-l));return Math.abs(y)<.001&&(y=1),this.x=(m-p)/y,this.y=(u-f)/y,this.z=(h-l)/y,this.w=Math.acos((c+d+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Yf extends hf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Xf(0,0,t,e),this.scissorTest=!1,this.viewport=new Xf(0,0,t,e);const r={width:t,height:e,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Xh,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const i=new qf(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);i.flipY=!1,i.generateMipmaps=n.generateMipmaps,i.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let a=0;a<o;a++)this.textures[a]=i.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let n=0,r=t.textures.length;n<r;n++)this.textures[n]=t.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new Gf(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Kf extends Yf{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class Zf extends qf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=Vh,this.minFilter=Vh,this.wrapR=Bh,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class Jf extends Kf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(t,e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Zf(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class $f extends qf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=Vh,this.minFilter=Vh,this.wrapR=Bh,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Qf extends Kf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(t,e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new $f(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class tm{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,i,o,a){let s=n[r+0],c=n[r+1],l=n[r+2],u=n[r+3];const h=i[o+0],d=i[o+1],p=i[o+2],f=i[o+3];if(0===a)return t[e+0]=s,t[e+1]=c,t[e+2]=l,void(t[e+3]=u);if(1===a)return t[e+0]=h,t[e+1]=d,t[e+2]=p,void(t[e+3]=f);if(u!==f||s!==h||c!==d||l!==p){let t=1-a;const e=s*h+c*d+l*p+u*f,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,e*n);t=Math.sin(t*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*t+h*i,c=c*t+d*i,l=l*t+p*i,u=u*t+f*i,t===1-a){const t=1/Math.sqrt(s*s+c*c+l*l+u*u);s*=t,c*=t,l*=t,u*=t}}t[e]=s,t[e+1]=c,t[e+2]=l,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,r,i,o){const a=n[r],s=n[r+1],c=n[r+2],l=n[r+3],u=i[o],h=i[o+1],d=i[o+2],p=i[o+3];return t[e]=a*p+l*u+s*d-c*h,t[e+1]=s*p+l*h+c*u-a*d,t[e+2]=c*p+l*d+a*h-s*u,t[e+3]=l*p-a*u-s*h-c*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=t._x,r=t._y,i=t._z,o=t._order,a=Math.cos,s=Math.sin,c=a(n/2),l=a(r/2),u=a(i/2),h=s(n/2),d=s(r/2),p=s(i/2);switch(o){case"XYZ":this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p;break;case"YXZ":this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p;break;case"ZXY":this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p;break;case"ZYX":this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p;break;case"YZX":this._x=h*l*u+c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u-h*d*p;break;case"XZY":this._x=h*l*u-c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],a=e[5],s=e[9],c=e[2],l=e[6],u=e[10],h=n+a+u;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(l-s)*t,this._y=(i-c)*t,this._z=(o-r)*t}else if(n>a&&n>u){const t=2*Math.sqrt(1+n-a-u);this._w=(l-s)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(i+c)/t}else if(a>u){const t=2*Math.sqrt(1+a-n-u);this._w=(i-c)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(s+l)/t}else{const t=2*Math.sqrt(1+u-n-a);this._w=(o-r)/t,this._x=(i+c)/t,this._y=(s+l)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(yf(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,c=e._z,l=e._w;return this._x=n*l+o*a+r*c-i*s,this._y=r*l+o*s+i*a-n*c,this._z=i*l+o*c+n*s-r*a,this._w=o*l-n*a-r*s-i*c,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this}const c=Math.sqrt(s),l=Math.atan2(c,a),u=Math.sin((1-e)*l)/c,h=Math.sin(e*l)/c;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(t),r*Math.cos(t),i*Math.sin(e),i*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class em{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;em.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(rm.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(rm.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,c=2*(o*r-a*n),l=2*(a*e-i*r),u=2*(i*n-o*e);return this.x=e+s*c+o*u-a*l,this.y=n+s*l+a*c-i*u,this.z=r+s*u+i*l-o*c,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return nm.copy(this).projectOnVector(t),this.sub(nm)}reflect(t){return this.sub(nm.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(yf(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=2*Math.random()-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const nm=new em,rm=new tm;class im{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new em(1/0,1/0,1/0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new em(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(am.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(am.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=am.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===e&&void 0!==r&&!0!==t.isInstancedMesh)for(let e=0,n=r.count;e<n;e++)!0===t.isMesh?t.getVertexPosition(e,am):am.fromBufferAttribute(r,e),am.applyMatrix4(t.matrixWorld),this.expandByPoint(am);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),sm.copy(t.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),sm.copy(n.boundingBox)),sm.applyMatrix4(t.matrixWorld),this.union(sm)}const r=t.children;for(let i=0,o=r.length;i<o;i++)this.expandByObject(r[i],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,am),am.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(fm),mm.subVectors(this.max,fm),cm.subVectors(t.a,fm),lm.subVectors(t.b,fm),um.subVectors(t.c,fm),hm.subVectors(lm,cm),dm.subVectors(um,lm),pm.subVectors(cm,um);let e=[0,-hm.z,hm.y,0,-dm.z,dm.y,0,-pm.z,pm.y,hm.z,0,-hm.x,dm.z,0,-dm.x,pm.z,0,-pm.x,-hm.y,hm.x,0,-dm.y,dm.x,0,-pm.y,pm.x,0];return!!vm(e,cm,lm,um,mm)&&(e=[1,0,0,0,1,0,0,0,1],!!vm(e,cm,lm,um,mm)&&(gm.crossVectors(hm,dm),e=[gm.x,gm.y,gm.z],vm(e,cm,lm,um,mm)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,am).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(am).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(om[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),om[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),om[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),om[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),om[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),om[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),om[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),om[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(om)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const om=[new em,new em,new em,new em,new em,new em,new em,new em],am=new em,sm=new im,cm=new em,lm=new em,um=new em,hm=new em,dm=new em,pm=new em,fm=new em,mm=new em,gm=new em,ym=new em;function vm(t,e,n,r,i){for(let o=0,a=t.length-3;o<=a;o+=3){ym.fromArray(t,o);const a=i.x*Math.abs(ym.x)+i.y*Math.abs(ym.y)+i.z*Math.abs(ym.z),s=e.dot(ym),c=n.dot(ym),l=r.dot(ym);if(Math.max(-Math.max(s,c,l),Math.min(s,c,l))>a)return!1}return!0}const bm=new im,xm=new em,_m=new em;class wm{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new em,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):bm.setFromPoints(t).getCenter(n);let r=0;for(let i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;xm.subVectors(t,this.center);const e=xm.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(xm,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(_m.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(xm.copy(t.center).add(_m)),this.expandByPoint(xm.copy(t.center).sub(_m))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Sm=new em,Tm=new em,Em=new em,Am=new em,Mm=new em,Om=new em,Cm=new em;class km{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new em,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new em(0,0,-1);this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Sm)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Sm.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Sm.copy(this.origin).addScaledVector(this.direction,e),Sm.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){Tm.copy(t).add(e).multiplyScalar(.5),Em.copy(e).sub(t).normalize(),Am.copy(this.origin).sub(Tm);const i=.5*t.distanceTo(e),o=-this.direction.dot(Em),a=Am.dot(this.direction),s=-Am.dot(Em),c=Am.lengthSq(),l=Math.abs(1-o*o);let u,h,d,p;if(l>0)if(u=o*s-a,h=o*a-s,p=i*l,u>=0)if(h>=-p)if(h<=p){const t=1/l;u*=t,h*=t,d=u*(u+o*h+2*a)+h*(o*u+h+2*s)+c}else h=i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+c;else h=-i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+c;else h<=-p?(u=Math.max(0,-(-o*i+a)),h=u>0?-i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+c):h<=p?(u=0,h=Math.min(Math.max(-i,-s),i),d=h*(h+2*s)+c):(u=Math.max(0,-(o*i+a)),h=u>0?i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+c);else h=o>0?-i:i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(Tm).addScaledVector(Em,h),d}intersectSphere(t,e){Sm.subVectors(t.center,this.origin);const n=Sm.dot(this.direction),r=Sm.dot(Sm)-n*n,i=t.radius*t.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return s<0?null:a<0?this.at(s,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,i,o,a,s;const c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(t.min.x-h.x)*c,r=(t.max.x-h.x)*c):(n=(t.max.x-h.x)*c,r=(t.min.x-h.x)*c),l>=0?(i=(t.min.y-h.y)*l,o=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,o=(t.min.y-h.y)*l),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),u>=0?(a=(t.min.z-h.z)*u,s=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,s=(t.min.z-h.z)*u),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,Sm)}intersectTriangle(t,e,n,r,i){Mm.subVectors(e,t),Om.subVectors(n,t),Cm.crossVectors(Mm,Om);let o,a=this.direction.dot(Cm);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Am.subVectors(this.origin,t);const s=o*this.direction.dot(Om.crossVectors(Am,Om));if(s<0)return null;const c=o*this.direction.dot(Mm.cross(Am));if(c<0)return null;if(s+c>a)return null;const l=-o*Am.dot(Cm);return l<0?null:this.at(l/a,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Pm{constructor(t,e,n,r,i,o,a,s,c,l,u,h,d,p,f,m){Pm.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,r,i,o,a,s,c,l,u,h,d,p,f,m)}set(t,e,n,r,i,o,a,s,c,l,u,h,d,p,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=c,g[6]=l,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Pm).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/Im.setFromMatrixColumn(t,0).length(),i=1/Im.setFromMatrixColumn(t,1).length(),o=1/Im.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),c=Math.sin(r),l=Math.cos(i),u=Math.sin(i);if("XYZ"===t.order){const t=o*l,n=o*u,r=a*l,i=a*u;e[0]=s*l,e[4]=-s*u,e[8]=c,e[1]=n+r*c,e[5]=t-i*c,e[9]=-a*s,e[2]=i-t*c,e[6]=r+n*c,e[10]=o*s}else if("YXZ"===t.order){const t=s*l,n=s*u,r=c*l,i=c*u;e[0]=t+i*a,e[4]=r*a-n,e[8]=o*c,e[1]=o*u,e[5]=o*l,e[9]=-a,e[2]=n*a-r,e[6]=i+t*a,e[10]=o*s}else if("ZXY"===t.order){const t=s*l,n=s*u,r=c*l,i=c*u;e[0]=t-i*a,e[4]=-o*u,e[8]=r+n*a,e[1]=n+r*a,e[5]=o*l,e[9]=i-t*a,e[2]=-o*c,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){const t=o*l,n=o*u,r=a*l,i=a*u;e[0]=s*l,e[4]=r*c-n,e[8]=t*c+i,e[1]=s*u,e[5]=i*c+t,e[9]=n*c-r,e[2]=-c,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){const t=o*s,n=o*c,r=a*s,i=a*c;e[0]=s*l,e[4]=i-t*u,e[8]=r*u+n,e[1]=u,e[5]=o*l,e[9]=-a*l,e[2]=-c*l,e[6]=n*u+r,e[10]=t-i*u}else if("XZY"===t.order){const t=o*s,n=o*c,r=a*s,i=a*c;e[0]=s*l,e[4]=-u,e[8]=c*l,e[1]=t*u+i,e[5]=o*l,e[9]=n*u-r,e[2]=r*u-n,e[6]=a*l,e[10]=i*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Rm,t,Dm)}lookAt(t,e,n){const r=this.elements;return jm.subVectors(t,e),0===jm.lengthSq()&&(jm.z=1),jm.normalize(),Lm.crossVectors(n,jm),0===Lm.lengthSq()&&(1===Math.abs(n.z)?jm.x+=1e-4:jm.z+=1e-4,jm.normalize(),Lm.crossVectors(n,jm)),Lm.normalize(),Fm.crossVectors(jm,Lm),r[0]=Lm.x,r[4]=Fm.x,r[8]=jm.x,r[1]=Lm.y,r[5]=Fm.y,r[9]=jm.y,r[2]=Lm.z,r[6]=Fm.z,r[10]=jm.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],c=n[12],l=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],y=n[3],v=n[7],b=n[11],x=n[15],_=r[0],w=r[4],S=r[8],T=r[12],E=r[1],A=r[5],M=r[9],O=r[13],C=r[2],k=r[6],P=r[10],I=r[14],N=r[3],R=r[7],D=r[11],L=r[15];return i[0]=o*_+a*E+s*C+c*N,i[4]=o*w+a*A+s*k+c*R,i[8]=o*S+a*M+s*P+c*D,i[12]=o*T+a*O+s*I+c*L,i[1]=l*_+u*E+h*C+d*N,i[5]=l*w+u*A+h*k+d*R,i[9]=l*S+u*M+h*P+d*D,i[13]=l*T+u*O+h*I+d*L,i[2]=p*_+f*E+m*C+g*N,i[6]=p*w+f*A+m*k+g*R,i[10]=p*S+f*M+m*P+g*D,i[14]=p*T+f*O+m*I+g*L,i[3]=y*_+v*E+b*C+x*N,i[7]=y*w+v*A+b*k+x*R,i[11]=y*S+v*M+b*P+x*D,i[15]=y*T+v*O+b*I+x*L,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],c=t[13],l=t[2],u=t[6],h=t[10],d=t[14];return t[3]*(+i*s*u-r*c*u-i*a*h+n*c*h+r*a*d-n*s*d)+t[7]*(+e*s*d-e*c*h+i*o*h-r*o*d+r*c*l-i*s*l)+t[11]*(+e*c*u-e*a*d-i*o*u+n*o*d+i*a*l-n*c*l)+t[15]*(-r*a*l-e*s*u+e*a*h+r*o*u-n*o*h+n*s*l)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],c=t[7],l=t[8],u=t[9],h=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15],y=u*m*c-f*h*c+f*s*d-a*m*d-u*s*g+a*h*g,v=p*h*c-l*m*c-p*s*d+o*m*d+l*s*g-o*h*g,b=l*f*c-p*u*c+p*a*d-o*f*d-l*a*g+o*u*g,x=p*u*s-l*f*s-p*a*h+o*f*h+l*a*m-o*u*m,_=e*y+n*v+r*b+i*x;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return t[0]=y*w,t[1]=(f*h*i-u*m*i-f*r*d+n*m*d+u*r*g-n*h*g)*w,t[2]=(a*m*i-f*s*i+f*r*c-n*m*c-a*r*g+n*s*g)*w,t[3]=(u*s*i-a*h*i-u*r*c+n*h*c+a*r*d-n*s*d)*w,t[4]=v*w,t[5]=(l*m*i-p*h*i+p*r*d-e*m*d-l*r*g+e*h*g)*w,t[6]=(p*s*i-o*m*i-p*r*c+e*m*c+o*r*g-e*s*g)*w,t[7]=(o*h*i-l*s*i+l*r*c-e*h*c-o*r*d+e*s*d)*w,t[8]=b*w,t[9]=(p*u*i-l*f*i-p*n*d+e*f*d+l*n*g-e*u*g)*w,t[10]=(o*f*i-p*a*i+p*n*c-e*f*c-o*n*g+e*a*g)*w,t[11]=(l*a*i-o*u*i-l*n*c+e*u*c+o*n*d-e*a*d)*w,t[12]=x*w,t[13]=(l*f*r-p*u*r+p*n*h-e*f*h-l*n*m+e*u*m)*w,t[14]=(p*a*r-o*f*r-p*n*s+e*f*s+o*n*m-e*a*m)*w,t[15]=(o*u*r-l*a*r+l*n*s-e*u*s-o*n*h+e*a*h)*w,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,c=i*o,l=i*a;return this.set(c*o+n,c*a-r*s,c*s+r*a,0,c*a+r*s,l*a+n,l*s-r*o,0,c*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,i,o){return this.set(1,n,i,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,c=i+i,l=o+o,u=a+a,h=i*c,d=i*l,p=i*u,f=o*l,m=o*u,g=a*u,y=s*c,v=s*l,b=s*u,x=n.x,_=n.y,w=n.z;return r[0]=(1-(f+g))*x,r[1]=(d+b)*x,r[2]=(p-v)*x,r[3]=0,r[4]=(d-b)*_,r[5]=(1-(h+g))*_,r[6]=(m+y)*_,r[7]=0,r[8]=(p+v)*w,r[9]=(m-y)*w,r[10]=(1-(h+f))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=Im.set(r[0],r[1],r[2]).length();const o=Im.set(r[4],r[5],r[6]).length(),a=Im.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],Nm.copy(this);const s=1/i,c=1/o,l=1/a;return Nm.elements[0]*=s,Nm.elements[1]*=s,Nm.elements[2]*=s,Nm.elements[4]*=c,Nm.elements[5]*=c,Nm.elements[6]*=c,Nm.elements[8]*=l,Nm.elements[9]*=l,Nm.elements[10]*=l,e.setFromRotationMatrix(Nm),n.x=i,n.y=o,n.z=a,this}makePerspective(t,e,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:lf;const s=this.elements,c=2*i/(e-t),l=2*i/(n-r),u=(e+t)/(e-t),h=(n+r)/(n-r);let d,p;if(a===lf)d=-(o+i)/(o-i),p=-2*o*i/(o-i);else{if(a!==uf)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);d=-o/(o-i),p=-o*i/(o-i)}return s[0]=c,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=l,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=p,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(t,e,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:lf;const s=this.elements,c=1/(e-t),l=1/(n-r),u=1/(o-i),h=(e+t)*c,d=(n+r)*l;let p,f;if(a===lf)p=(o+i)*u,f=-2*u;else{if(a!==uf)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=i*u,f=-1*u}return s[0]=2*c,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=f,s[14]=-p,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Im=new em,Nm=new Pm,Rm=new em(0,0,0),Dm=new em(1,1,1),Lm=new em,Fm=new em,jm=new em,Um=new Pm,Bm=new tm;class zm{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:zm.DEFAULT_ORDER;this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=t.elements,i=r[0],o=r[4],a=r[8],s=r[1],c=r[5],l=r[9],u=r[2],h=r[6],d=r[10];switch(e){case"XYZ":this._y=Math.asin(yf(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-yf(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(s,c)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(yf(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-yf(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(yf(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-yf(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-l,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Um.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Um,e,n)}setFromVector3(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(t.x,t.y,t.z,e)}reorder(t){return Bm.setFromEuler(this),this.setFromQuaternion(Bm,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}zm.DEFAULT_ORDER="XYZ";class Vm{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return 0!==(this.mask&t.mask)}isEnabled(t){return 0!==(this.mask&1<<t)}}let Gm=0;const Wm=new em,Hm=new tm,qm=new Pm,Xm=new em,Ym=new em,Km=new em,Zm=new tm,Jm=new em(1,0,0),$m=new em(0,1,0),Qm=new em(0,0,1),tg={type:"added"},eg={type:"removed"},ng={type:"childadded",child:null},rg={type:"childremoved",child:null};class ig extends hf{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Gm++}),this.uuid=gf(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ig.DEFAULT_UP.clone();const t=new em,e=new zm,n=new tm,r=new em(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Pm},normalMatrix:{value:new Tf}}),this.matrix=new Pm,this.matrixWorld=new Pm,this.matrixAutoUpdate=ig.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ig.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Vm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Hm.setFromAxisAngle(t,e),this.quaternion.multiply(Hm),this}rotateOnWorldAxis(t,e){return Hm.setFromAxisAngle(t,e),this.quaternion.premultiply(Hm),this}rotateX(t){return this.rotateOnAxis(Jm,t)}rotateY(t){return this.rotateOnAxis($m,t)}rotateZ(t){return this.rotateOnAxis(Qm,t)}translateOnAxis(t,e){return Wm.copy(t).applyQuaternion(this.quaternion),this.position.add(Wm.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Jm,t)}translateY(t){return this.translateOnAxis($m,t)}translateZ(t){return this.translateOnAxis(Qm,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(qm.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Xm.copy(t):Xm.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Ym.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?qm.lookAt(Ym,Xm,this.up):qm.lookAt(Xm,Ym,this.up),this.quaternion.setFromRotationMatrix(qm),r&&(qm.extractRotation(r.matrixWorld),Hm.setFromRotationMatrix(qm),this.quaternion.premultiply(Hm.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(tg),ng.child=t,this.dispatchEvent(ng),ng.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(eg),rg.child=t,this.dispatchEvent(rg),rg.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),qm.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),qm.multiply(t.parent.matrixWorld)),t.applyMatrix4(qm),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(tg),ng.child=t,this.dispatchEvent(ng),ng.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}}getObjectsByProperty(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[t]===e&&n.push(this);const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ym,t,Km),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ym,Zm,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++){const r=e[n];!0!==r.matrixWorldAutoUpdate&&!0!==t||r.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++){const n=t[e];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map((t=>({boxInitialized:t.boxInitialized,boxMin:t.box.min.toArray(),boxMax:t.box.max.toArray(),sphereInitialized:t.sphereInitialized,sphereRadius:t.sphere.radius,sphereCenter:t.sphere.center.toArray()}))),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(t),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=o(t.geometries),r=o(t.materials),i=o(t.textures),a=o(t.images),s=o(t.shapes),c=o(t.skeletons),l=o(t.animations),u=o(t.nodes);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),c.length>0&&(n.skeletons=c),l.length>0&&(n.animations=l),u.length>0&&(n.nodes=u)}return n.object=r,n;function o(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++){const e=t.children[n];this.add(e.clone())}return this}}ig.DEFAULT_UP=new em(0,1,0),ig.DEFAULT_MATRIX_AUTO_UPDATE=!0,ig.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const og=new em,ag=new em,sg=new em,cg=new em,lg=new em,ug=new em,hg=new em,dg=new em,pg=new em,fg=new em;class mg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new em,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new em,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new em;this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),og.subVectors(t,e),r.cross(og);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){og.subVectors(r,e),ag.subVectors(n,e),sg.subVectors(t,e);const o=og.dot(og),a=og.dot(ag),s=og.dot(sg),c=ag.dot(ag),l=ag.dot(sg),u=o*c-a*a;if(0===u)return i.set(0,0,0),null;const h=1/u,d=(c*s-a*l)*h,p=(o*l-a*s)*h;return i.set(1-d-p,p,d)}static containsPoint(t,e,n,r){return null!==this.getBarycoord(t,e,n,r,cg)&&(cg.x>=0&&cg.y>=0&&cg.x+cg.y<=1)}static getInterpolation(t,e,n,r,i,o,a,s){return null===this.getBarycoord(t,e,n,r,cg)?(s.x=0,s.y=0,"z"in s&&(s.z=0),"w"in s&&(s.w=0),null):(s.setScalar(0),s.addScaledVector(i,cg.x),s.addScaledVector(o,cg.y),s.addScaledVector(a,cg.z),s)}static isFrontFacing(t,e,n,r){return og.subVectors(n,e),ag.subVectors(t,e),og.cross(ag).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return og.subVectors(this.c,this.b),ag.subVectors(this.a,this.b),.5*og.cross(ag).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return mg.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return mg.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,r,i){return mg.getInterpolation(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return mg.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return mg.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,i=this.c;let o,a;lg.subVectors(r,n),ug.subVectors(i,n),dg.subVectors(t,n);const s=lg.dot(dg),c=ug.dot(dg);if(s<=0&&c<=0)return e.copy(n);pg.subVectors(t,r);const l=lg.dot(pg),u=ug.dot(pg);if(l>=0&&u<=l)return e.copy(r);const h=s*u-l*c;if(h<=0&&s>=0&&l<=0)return o=s/(s-l),e.copy(n).addScaledVector(lg,o);fg.subVectors(t,i);const d=lg.dot(fg),p=ug.dot(fg);if(p>=0&&d<=p)return e.copy(i);const f=d*c-s*p;if(f<=0&&c>=0&&p<=0)return a=c/(c-p),e.copy(n).addScaledVector(ug,a);const m=l*p-d*u;if(m<=0&&u-l>=0&&d-p>=0)return hg.subVectors(i,r),a=(u-l)/(u-l+(d-p)),e.copy(r).addScaledVector(hg,a);const g=1/(m+f+h);return o=f*g,a=h*g,e.copy(n).addScaledVector(lg,o).addScaledVector(ug,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const gg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},yg={h:0,s:0,l:0},vg={h:0,s:0,l:0};function bg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}class xg{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const e=t;e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bp;return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Ff.toWorkingColorSpace(this,e),this}setRGB(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ff.workingColorSpace;return this.r=t,this.g=e,this.b=n,Ff.toWorkingColorSpace(this,r),this}setHSL(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ff.workingColorSpace;if(t=vf(t,1),e=yf(e,0,1),n=yf(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=bg(i,r,t+1/3),this.g=bg(i,r,t),this.b=bg(i,r,t-1/3)}return Ff.toWorkingColorSpace(this,r),this}setStyle(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bp;function r(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}if(e=/^(\w+)\(([^\)]*)\)/.exec(t)){let i;const o=e[1],a=e[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,n);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,n);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(e=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=e[1],i=r.length;if(3===i)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,n);if(6===i)return this.setHex(parseInt(r,16),n);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,n);return this}setColorName(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bp;const n=gg[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=jf(t.r),this.g=jf(t.g),this.b=jf(t.b),this}copyLinearToSRGB(t){return this.r=Uf(t.r),this.g=Uf(t.g),this.b=Uf(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bp;return Ff.fromWorkingColorSpace(_g.copy(this),t),65536*Math.round(yf(255*_g.r,0,255))+256*Math.round(yf(255*_g.g,0,255))+Math.round(yf(255*_g.b,0,255))}getHexString(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bp;return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ff.workingColorSpace;Ff.fromWorkingColorSpace(_g.copy(this),e);const n=_g.r,r=_g.g,i=_g.b,o=Math.max(n,r,i),a=Math.min(n,r,i);let s,c;const l=(a+o)/2;if(a===o)s=0,c=0;else{const t=o-a;switch(c=l<=.5?t/(o+a):t/(2-o-a),o){case n:s=(r-i)/t+(r<i?6:0);break;case r:s=(i-n)/t+2;break;case i:s=(n-r)/t+4}s/=6}return t.h=s,t.s=c,t.l=l,t}getRGB(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ff.workingColorSpace;return Ff.fromWorkingColorSpace(_g.copy(this),e),t.r=_g.r,t.g=_g.g,t.b=_g.b,t}getStyle(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bp;Ff.fromWorkingColorSpace(_g.copy(this),t);const e=_g.r,n=_g.g,r=_g.b;return t!==bp?"color(".concat(t," ").concat(e.toFixed(3)," ").concat(n.toFixed(3)," ").concat(r.toFixed(3),")"):"rgb(".concat(Math.round(255*e),",").concat(Math.round(255*n),",").concat(Math.round(255*r),")")}offsetHSL(t,e,n){return this.getHSL(yg),this.setHSL(yg.h+t,yg.s+e,yg.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(yg),t.getHSL(vg);const n=bf(yg.h,vg.h,e),r=bf(yg.s,vg.s,e),i=bf(yg.l,vg.l,e);return this.setHSL(n,r,i),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,r=this.b,i=t.elements;return this.r=i[0]*e+i[3]*n+i[6]*r,this.g=i[1]*e+i[4]*n+i[7]*r,this.b=i[2]*e+i[5]*n+i[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _g=new xg;xg.NAMES=gg;let wg=0;class Sg extends hf{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:wg++}),this.uuid=gf(),this.name="",this.type="Material",this.blending=zu,this.side=Fu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=eh,this.blendDst=nh,this.blendEquation=qu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new xg(0,0,0),this.blendAlpha=0,this.depthFunc=mh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Vp,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Op,this.stencilZFail=Op,this.stencilZPass=Op,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!==t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: parameter '".concat(e,"' has value of undefined."));continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE.Material: '".concat(e,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(t){const e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==zu&&(n.blending=this.blending),this.side!==Fu&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==eh&&(n.blendSrc=this.blendSrc),this.blendDst!==nh&&(n.blendDst=this.blendDst),this.blendEquation!==qu&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==mh&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Vp&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Op&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Op&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Op&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class Tg extends Sg{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new xg(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zm,this.combine=xh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Eg=Ag();function Ag(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let c=0;c<256;++c){const t=c-127;t<-27?(r[c]=0,r[256|c]=32768,i[c]=24,i[256|c]=24):t<-14?(r[c]=1024>>-t-14,r[256|c]=1024>>-t-14|32768,i[c]=-t-1,i[256|c]=-t-1):t<=15?(r[c]=t+15<<10,r[256|c]=t+15<<10|32768,i[c]=13,i[256|c]=13):t<128?(r[c]=31744,r[256|c]=64512,i[c]=24,i[256|c]=24):(r[c]=31744,r[256|c]=64512,i[c]=13,i[256|c]=13)}const o=new Uint32Array(2048),a=new Uint32Array(64),s=new Uint32Array(64);for(let c=1;c<1024;++c){let t=c<<13,e=0;for(;0===(8388608&t);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,o[c]=t|e}for(let c=1024;c<2048;++c)o[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)a[c]=c<<23;a[31]=1199570944,a[32]=2147483648;for(let c=33;c<63;++c)a[c]=2147483648+(c-32<<23);a[63]=3347054592;for(let c=1;c<64;++c)32!==c&&(s[c]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:a,offsetTable:s}}function Mg(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=yf(t,-65504,65504),Eg.floatView[0]=t;const e=Eg.uint32View[0],n=e>>23&511;return Eg.baseTable[n]+((8388607&e)>>Eg.shiftTable[n])}function Og(t){const e=t>>10;return Eg.uint32View[0]=Eg.mantissaTable[Eg.offsetTable[e]+(1023&t)]+Eg.exponentTable[e],Eg.floatView[0]}const Cg={toHalfFloat:Mg,fromHalfFloat:Og},kg=new em,Pg=new Sf;class Ig{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=Jp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=id,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}get updateRange(){return If("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Pg.fromBufferAttribute(this,e),Pg.applyMatrix3(t),this.setXY(e,Pg.x,Pg.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)kg.fromBufferAttribute(this,e),kg.applyMatrix3(t),this.setXYZ(e,kg.x,kg.y,kg.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)kg.fromBufferAttribute(this,e),kg.applyMatrix4(t),this.setXYZ(e,kg.x,kg.y,kg.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)kg.fromBufferAttribute(this,e),kg.applyNormalMatrix(t),this.setXYZ(e,kg.x,kg.y,kg.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)kg.fromBufferAttribute(this,e),kg.transformDirection(t),this.setXYZ(e,kg.x,kg.y,kg.z);return this}set(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=xf(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=_f(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=xf(e,this.array)),e}setX(t,e){return this.normalized&&(e=_f(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=xf(e,this.array)),e}setY(t,e){return this.normalized&&(e=_f(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=xf(e,this.array)),e}setZ(t,e){return this.normalized&&(e=_f(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=xf(e,this.array)),e}setW(t,e){return this.normalized&&(e=_f(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=_f(e,this.array),n=_f(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=_f(e,this.array),n=_f(n,this.array),r=_f(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.normalized&&(e=_f(e,this.array),n=_f(n,this.array),r=_f(r,this.array),i=_f(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Jp&&(t.usage=this.usage),t}}class Ng extends Ig{constructor(t,e,n){super(new Int8Array(t),e,n)}}class Rg extends Ig{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class Dg extends Ig{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class Lg extends Ig{constructor(t,e,n){super(new Int16Array(t),e,n)}}class Fg extends Ig{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class jg extends Ig{constructor(t,e,n){super(new Int32Array(t),e,n)}}class Ug extends Ig{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class Bg extends Ig{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=Og(this.array[t*this.itemSize]);return this.normalized&&(e=xf(e,this.array)),e}setX(t,e){return this.normalized&&(e=_f(e,this.array)),this.array[t*this.itemSize]=Mg(e),this}getY(t){let e=Og(this.array[t*this.itemSize+1]);return this.normalized&&(e=xf(e,this.array)),e}setY(t,e){return this.normalized&&(e=_f(e,this.array)),this.array[t*this.itemSize+1]=Mg(e),this}getZ(t){let e=Og(this.array[t*this.itemSize+2]);return this.normalized&&(e=xf(e,this.array)),e}setZ(t,e){return this.normalized&&(e=_f(e,this.array)),this.array[t*this.itemSize+2]=Mg(e),this}getW(t){let e=Og(this.array[t*this.itemSize+3]);return this.normalized&&(e=xf(e,this.array)),e}setW(t,e){return this.normalized&&(e=_f(e,this.array)),this.array[t*this.itemSize+3]=Mg(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=_f(e,this.array),n=_f(n,this.array)),this.array[t+0]=Mg(e),this.array[t+1]=Mg(n),this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=_f(e,this.array),n=_f(n,this.array),r=_f(r,this.array)),this.array[t+0]=Mg(e),this.array[t+1]=Mg(n),this.array[t+2]=Mg(r),this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.normalized&&(e=_f(e,this.array),n=_f(n,this.array),r=_f(r,this.array),i=_f(i,this.array)),this.array[t+0]=Mg(e),this.array[t+1]=Mg(n),this.array[t+2]=Mg(r),this.array[t+3]=Mg(i),this}}class zg extends Ig{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Vg=0;const Gg=new Pm,Wg=new ig,Hg=new em,qg=new im,Xg=new im,Yg=new em;class Kg extends hf{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Vg++}),this.uuid=gf(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Af(t)?Ug:Fg)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Tf).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Gg.makeRotationFromQuaternion(t),this.applyMatrix4(Gg),this}rotateX(t){return Gg.makeRotationX(t),this.applyMatrix4(Gg),this}rotateY(t){return Gg.makeRotationY(t),this.applyMatrix4(Gg),this}rotateZ(t){return Gg.makeRotationZ(t),this.applyMatrix4(Gg),this}translate(t,e,n){return Gg.makeTranslation(t,e,n),this.applyMatrix4(Gg),this}scale(t,e,n){return Gg.makeScale(t,e,n),this.applyMatrix4(Gg),this}lookAt(t){return Wg.lookAt(t),Wg.updateMatrix(),this.applyMatrix4(Wg.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Hg).negate(),this.translate(Hg.x,Hg.y,Hg.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new zg(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new im);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new em(-1/0,-1/0,-1/0),new em(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++){const t=e[n];qg.setFromBufferAttribute(t),this.morphTargetsRelative?(Yg.addVectors(this.boundingBox.min,qg.min),this.boundingBox.expandByPoint(Yg),Yg.addVectors(this.boundingBox.max,qg.max),this.boundingBox.expandByPoint(Yg)):(this.boundingBox.expandByPoint(qg.min),this.boundingBox.expandByPoint(qg.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new wm);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new em,1/0);if(t){const n=this.boundingSphere.center;if(qg.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const n=e[t];Xg.setFromBufferAttribute(n),this.morphTargetsRelative?(Yg.addVectors(qg.min,Xg.min),qg.expandByPoint(Yg),Yg.addVectors(qg.max,Xg.max),qg.expandByPoint(Yg)):(qg.expandByPoint(Xg.min),qg.expandByPoint(Xg.max))}qg.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)Yg.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(Yg));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],a=this.morphTargetsRelative;for(let e=0,i=o.count;e<i;e++)Yg.fromBufferAttribute(o,e),a&&(Hg.fromBufferAttribute(t,e),Yg.add(Hg)),r=Math.max(r,n.distanceToSquared(Yg))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.position,r=e.normal,i=e.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ig(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),a=[],s=[];for(let S=0;S<n.count;S++)a[S]=new em,s[S]=new em;const c=new em,l=new em,u=new em,h=new Sf,d=new Sf,p=new Sf,f=new em,m=new em;function g(t,e,r){c.fromBufferAttribute(n,t),l.fromBufferAttribute(n,e),u.fromBufferAttribute(n,r),h.fromBufferAttribute(i,t),d.fromBufferAttribute(i,e),p.fromBufferAttribute(i,r),l.sub(c),u.sub(c),d.sub(h),p.sub(h);const o=1/(d.x*p.y-p.x*d.y);isFinite(o)&&(f.copy(l).multiplyScalar(p.y).addScaledVector(u,-d.y).multiplyScalar(o),m.copy(u).multiplyScalar(d.x).addScaledVector(l,-p.x).multiplyScalar(o),a[t].add(f),a[e].add(f),a[r].add(f),s[t].add(m),s[e].add(m),s[r].add(m))}let y=this.groups;0===y.length&&(y=[{start:0,count:t.count}]);for(let S=0,T=y.length;S<T;++S){const e=y[S],n=e.start;for(let r=n,i=n+e.count;r<i;r+=3)g(t.getX(r+0),t.getX(r+1),t.getX(r+2))}const v=new em,b=new em,x=new em,_=new em;function w(t){x.fromBufferAttribute(r,t),_.copy(x);const e=a[t];v.copy(e),v.sub(x.multiplyScalar(x.dot(e))).normalize(),b.crossVectors(_,e);const n=b.dot(s[t])<0?-1:1;o.setXYZW(t,v.x,v.y,v.z,n)}for(let S=0,T=y.length;S<T;++S){const e=y[S],n=e.start;for(let r=n,i=n+e.count;r<i;r+=3)w(t.getX(r+0)),w(t.getX(r+1)),w(t.getX(r+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Ig(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new em,i=new em,o=new em,a=new em,s=new em,c=new em,l=new em,u=new em;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),p=t.getX(h+1),f=t.getX(h+2);r.fromBufferAttribute(e,d),i.fromBufferAttribute(e,p),o.fromBufferAttribute(e,f),l.subVectors(o,i),u.subVectors(r,i),l.cross(u),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,p),c.fromBufferAttribute(n,f),a.add(l),s.add(l),c.add(l),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,c.x,c.y,c.z)}else for(let t=0,h=e.count;t<h;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),l.subVectors(o,i),u.subVectors(r,i),l.cross(u),n.setXYZ(t+0,l.x,l.y,l.z),n.setXYZ(t+1,l.x,l.y,l.z),n.setXYZ(t+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Yg.fromBufferAttribute(t,e),Yg.normalize(),t.setXYZ(e,Yg.x,Yg.y,Yg.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r);let a=0,s=0;for(let c=0,l=e.length;c<l;c++){a=t.isInterleavedBufferAttribute?e[c]*t.data.stride+t.offset:e[c]*r;for(let t=0;t<r;t++)o[s++]=n[a++]}return new Ig(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Kg,n=this.index.array,r=this.attributes;for(const a in r){const i=t(r[a],n);e.setAttribute(a,i)}const i=this.morphAttributes;for(const a in i){const r=[],o=i[a];for(let e=0,i=o.length;e<i;e++){const i=t(o[e],n);r.push(i)}e.morphAttributes[a]=r}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,s=o.length;a<s;a++){const t=o[a];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const s in n){const e=n[s];t.data.attributes[s]=e.toJSON(t.data)}const r={};let i=!1;for(const s in this.morphAttributes){const e=this.morphAttributes[s],n=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];n.push(i.toJSON(t.data))}n.length>0&&(r[s]=n,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const c in r){const t=r[c];this.setAttribute(c,t.clone(e))}const i=t.morphAttributes;for(const c in i){const t=[],n=i[c];for(let r=0,i=n.length;r<i;r++)t.push(n[r].clone(e));this.morphAttributes[c]=t}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let c=0,l=o.length;c<l;c++){const t=o[c];this.addGroup(t.start,t.count,t.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=t.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Zg=new Pm,Jg=new km,$g=new wm,Qg=new em,ty=new em,ey=new em,ny=new em,ry=new em,iy=new em,oy=new Sf,ay=new Sf,sy=new Sf,cy=new em,ly=new em,uy=new em,hy=new em,dy=new em;class py extends ig{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Kg,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tg;super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,o=n.morphTargetsRelative;e.fromBufferAttribute(r,t);const a=this.morphTargetInfluences;if(i&&a){iy.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=a[n],s=i[n];0!==r&&(ry.fromBufferAttribute(s,t),o?iy.addScaledVector(ry,r):iy.addScaledVector(ry.sub(e),r))}e.add(iy)}return e}raycast(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),$g.copy(n.boundingSphere),$g.applyMatrix4(i),Jg.copy(t.ray).recast(t.near),!1===$g.containsPoint(Jg.origin)){if(null===Jg.intersectSphere($g,Qg))return;if(Jg.origin.distanceToSquared(Qg)>(t.far-t.near)**2)return}Zg.copy(i).invert(),Jg.copy(t.ray).applyMatrix4(Zg),null!==n.boundingBox&&!1===Jg.intersectsBox(n.boundingBox)||this._computeIntersections(t,e,Jg)}}_computeIntersections(t,e,n){let r;const i=this.geometry,o=this.material,a=i.index,s=i.attributes.position,c=i.attributes.uv,l=i.attributes.uv1,u=i.attributes.normal,h=i.groups,d=i.drawRange;if(null!==a)if(Array.isArray(o))for(let p=0,f=h.length;p<f;p++){const i=h[p],s=o[i.materialIndex];for(let o=Math.max(i.start,d.start),h=Math.min(a.count,Math.min(i.start+i.count,d.start+d.count));o<h;o+=3){r=fy(this,s,t,n,c,l,u,a.getX(o),a.getX(o+1),a.getX(o+2)),r&&(r.faceIndex=Math.floor(o/3),r.face.materialIndex=i.materialIndex,e.push(r))}}else{for(let i=Math.max(0,d.start),s=Math.min(a.count,d.start+d.count);i<s;i+=3){r=fy(this,o,t,n,c,l,u,a.getX(i),a.getX(i+1),a.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),e.push(r))}}else if(void 0!==s)if(Array.isArray(o))for(let p=0,f=h.length;p<f;p++){const i=h[p],a=o[i.materialIndex];for(let o=Math.max(i.start,d.start),h=Math.min(s.count,Math.min(i.start+i.count,d.start+d.count));o<h;o+=3){r=fy(this,a,t,n,c,l,u,o,o+1,o+2),r&&(r.faceIndex=Math.floor(o/3),r.face.materialIndex=i.materialIndex,e.push(r))}}else{for(let i=Math.max(0,d.start),a=Math.min(s.count,d.start+d.count);i<a;i+=3){r=fy(this,o,t,n,c,l,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),e.push(r))}}}}function fy(t,e,n,r,i,o,a,s,c,l){t.getVertexPosition(s,ty),t.getVertexPosition(c,ey),t.getVertexPosition(l,ny);const u=function(t,e,n,r,i,o,a,s){let c;if(c=e.side===ju?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,e.side===Fu,s),null===c)return null;dy.copy(s),dy.applyMatrix4(t.matrixWorld);const l=n.ray.origin.distanceTo(dy);return l<n.near||l>n.far?null:{distance:l,point:dy.clone(),object:t}}(t,e,n,r,ty,ey,ny,hy);if(u){i&&(oy.fromBufferAttribute(i,s),ay.fromBufferAttribute(i,c),sy.fromBufferAttribute(i,l),u.uv=mg.getInterpolation(hy,ty,ey,ny,oy,ay,sy,new Sf)),o&&(oy.fromBufferAttribute(o,s),ay.fromBufferAttribute(o,c),sy.fromBufferAttribute(o,l),u.uv1=mg.getInterpolation(hy,ty,ey,ny,oy,ay,sy,new Sf)),a&&(cy.fromBufferAttribute(a,s),ly.fromBufferAttribute(a,c),uy.fromBufferAttribute(a,l),u.normal=mg.getInterpolation(hy,ty,ey,ny,cy,ly,uy,new em),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const t={a:s,b:c,c:l,normal:new em,materialIndex:0};mg.getNormal(ty,ey,ny,t.normal),u.face=t}return u}class my extends Kg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],c=[],l=[],u=[];let h=0,d=0;function p(t,e,n,r,i,o,p,f,m,g,y){const v=o/m,b=p/g,x=o/2,_=p/2,w=f/2,S=m+1,T=g+1;let E=0,A=0;const M=new em;for(let a=0;a<T;a++){const o=a*b-_;for(let s=0;s<S;s++){const h=s*v-x;M[t]=h*r,M[e]=o*i,M[n]=w,c.push(M.x,M.y,M.z),M[t]=0,M[e]=0,M[n]=f>0?1:-1,l.push(M.x,M.y,M.z),u.push(s/m),u.push(1-a/g),E+=1}}for(let a=0;a<g;a++)for(let t=0;t<m;t++){const e=h+t+S*a,n=h+t+S*(a+1),r=h+(t+1)+S*(a+1),i=h+(t+1)+S*a;s.push(e,n,i),s.push(n,r,i),A+=6}a.addGroup(d,A,y),d+=A,h+=E}p("z","y","x",-1,-1,n,e,t,o,i,0),p("z","y","x",1,-1,n,e,-t,o,i,1),p("x","z","y",1,1,t,n,e,r,o,2),p("x","z","y",1,-1,t,n,-e,r,o,3),p("x","y","z",1,-1,t,e,n,r,i,4),p("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new zg(c,3)),this.setAttribute("normal",new zg(l,3)),this.setAttribute("uv",new zg(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new my(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function gy(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function yy(t){const e={};for(let n=0;n<t.length;n++){const r=gy(t[n]);for(const t in r)e[t]=r[t]}return e}function vy(t){const e=t.getRenderTarget();return null===e?t.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:Ff.workingColorSpace}const by={clone:gy,merge:yy};class xy extends Sg{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=gy(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?e.uniforms[r]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[r]={type:"m4",value:n.toArray()}:e.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class _y extends ig{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Pm,this.projectionMatrix=new Pm,this.projectionMatrixInverse=new Pm,this.coordinateSystem=lf}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const wy=new em,Sy=new Sf,Ty=new Sf;class Ey extends _y{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*mf*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*ff*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*mf*Math.atan(Math.tan(.5*ff*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){wy.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(wy.x,wy.y).multiplyScalar(-t/wy.z),wy.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(wy.x,wy.y).multiplyScalar(-t/wy.z)}getViewSize(t,e){return this.getViewBounds(t,Sy,Ty),e.subVectors(Ty,Sy)}setViewOffset(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*ff*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/t,e-=o.offsetY*n/a,r*=o.width/t,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Ay=-90;class My extends ig{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Ey(Ay,1,t,e);r.layers=this.layers,this.add(r);const i=new Ey(Ay,1,t,e);i.layers=this.layers,this.add(i);const o=new Ey(Ay,1,t,e);o.layers=this.layers,this.add(o);const a=new Ey(Ay,1,t,e);a.layers=this.layers,this.add(a);const s=new Ey(Ay,1,t,e);s.layers=this.layers,this.add(s);const c=new Ey(Ay,1,t,e);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,r,i,o,a,s]=e;for(const c of e)this.remove(c);if(t===lf)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),s.up.set(0,1,0),s.lookAt(0,0,-1);else{if(t!==uf)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),s.up.set(0,-1,0),s.lookAt(0,0,-1)}for(const c of e)this.add(c),c.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[i,o,a,s,c,l]=this.children,u=t.getRenderTarget(),h=t.getActiveCubeFace(),d=t.getActiveMipmapLevel(),p=t.xr.enabled;t.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,r),t.render(e,i),t.setRenderTarget(n,1,r),t.render(e,o),t.setRenderTarget(n,2,r),t.render(e,a),t.setRenderTarget(n,3,r),t.render(e,s),t.setRenderTarget(n,4,r),t.render(e,c),n.texture.generateMipmaps=f,t.setRenderTarget(n,5,r),t.render(e,l),t.setRenderTarget(u,h,d),t.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class Oy extends qf{constructor(t,e,n,r,i,o,a,s,c,l){super(t=void 0!==t?t:[],e=void 0!==e?e:Rh,n,r,i,o,a,s,c,l),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Cy extends Kf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},r=[n,n,n,n,n,n];this.texture=new Oy(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:Xh}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new my(5,5,5),a=new xy({name:"CubemapFromEquirect",uniforms:gy(n),vertexShader:r,fragmentShader:i,side:ju,blending:Bu});a.uniforms.tEquirect.value=e;const s=new py(o,a),c=e.minFilter;e.minFilter===Zh&&(e.minFilter=Xh);return new My(1,10,this).update(t,s),e.minFilter=c,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,n,r){const i=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(i)}}const ky=new em,Py=new em,Iy=new Tf;class Ny{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new em(1,0,0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=ky.subVectors(n,e).cross(Py.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(ky),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(t.start).addScaledVector(n,i)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Iy.getNormalMatrix(t),r=this.coplanarPoint(ky).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Ry=new wm,Dy=new em;class Ly{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ny,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ny,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ny,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ny,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Ny,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Ny;this.planes=[t,e,n,r,i,o]}set(t,e,n,r,i,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lf;const n=this.planes,r=t.elements,i=r[0],o=r[1],a=r[2],s=r[3],c=r[4],l=r[5],u=r[6],h=r[7],d=r[8],p=r[9],f=r[10],m=r[11],g=r[12],y=r[13],v=r[14],b=r[15];if(n[0].setComponents(s-i,h-c,m-d,b-g).normalize(),n[1].setComponents(s+i,h+c,m+d,b+g).normalize(),n[2].setComponents(s+o,h+l,m+p,b+y).normalize(),n[3].setComponents(s-o,h-l,m-p,b-y).normalize(),n[4].setComponents(s-a,h-u,m-f,b-v).normalize(),e===lf)n[5].setComponents(s+a,h+u,m+f,b+v).normalize();else{if(e!==uf)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(a,u,f,v).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),Ry.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),Ry.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Ry)}intersectsSprite(t){return Ry.center.set(0,0,0),Ry.radius=.7071067811865476,Ry.applyMatrix4(t.matrixWorld),this.intersectsSphere(Ry)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let i=0;i<6;i++){if(e[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(Dy.x=r.normal.x>0?t.max.x:t.min.x,Dy.y=r.normal.y>0?t.max.y:t.min.y,Dy.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Dy)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Fy(){let t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function jy(t){const e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const r=e.get(n);r&&(t.deleteBuffer(r.buffer),e.delete(n))},update:function(n,r){if(n.isGLBufferAttribute){const t=e.get(n);return void((!t||t.version<n.version)&&e.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}n.isInterleavedBufferAttribute&&(n=n.data);const i=e.get(n);if(void 0===i)e.set(n,function(e,n){const r=e.array,i=e.usage,o=r.byteLength,a=t.createBuffer();let s;if(t.bindBuffer(n,a),t.bufferData(n,r,i),e.onUploadCallback(),r instanceof Float32Array)s=t.FLOAT;else if(r instanceof Uint16Array)s=e.isFloat16BufferAttribute?t.HALF_FLOAT:t.UNSIGNED_SHORT;else if(r instanceof Int16Array)s=t.SHORT;else if(r instanceof Uint32Array)s=t.UNSIGNED_INT;else if(r instanceof Int32Array)s=t.INT;else if(r instanceof Int8Array)s=t.BYTE;else if(r instanceof Uint8Array)s=t.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);s=t.UNSIGNED_BYTE}return{buffer:a,type:s,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version,size:o}}(n,r));else if(i.version<n.version){if(i.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(e,n,r){const i=n.array,o=n._updateRange,a=n.updateRanges;if(t.bindBuffer(r,e),-1===o.count&&0===a.length&&t.bufferSubData(r,0,i),0!==a.length){for(let e=0,n=a.length;e<n;e++){const n=a[e];t.bufferSubData(r,n.start*i.BYTES_PER_ELEMENT,i,n.start,n.count)}n.clearUpdateRanges()}-1!==o.count&&(t.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i,o.offset,o.count),o.count=-1),n.onUploadCallback()}(i.buffer,n,r),i.version=n.version}}}}class Uy extends Kg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,o=e/2,a=Math.floor(n),s=Math.floor(r),c=a+1,l=s+1,u=t/a,h=e/s,d=[],p=[],f=[],m=[];for(let g=0;g<l;g++){const t=g*h-o;for(let e=0;e<c;e++){const n=e*u-i;p.push(n,-t,0),f.push(0,0,1),m.push(e/a),m.push(1-g/s)}}for(let g=0;g<s;g++)for(let t=0;t<a;t++){const e=t+c*g,n=t+c*(g+1),r=t+1+c*(g+1),i=t+1+c*g;d.push(e,n,i),d.push(n,r,i)}this.setIndex(d),this.setAttribute("position",new zg(p,3)),this.setAttribute("normal",new zg(f,3)),this.setAttribute("uv",new zg(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Uy(t.width,t.height,t.widthSegments,t.heightSegments)}}const By={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( batchId );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},zy={common:{diffuse:{value:new xg(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Tf},alphaMap:{value:null},alphaMapTransform:{value:new Tf},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Tf}},envmap:{envMap:{value:null},envMapRotation:{value:new Tf},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Tf}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Tf}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Tf},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Tf},normalScale:{value:new Sf(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Tf},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Tf}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Tf}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Tf}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xg(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new xg(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Tf},alphaTest:{value:0},uvTransform:{value:new Tf}},sprite:{diffuse:{value:new xg(16777215)},opacity:{value:1},center:{value:new Sf(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Tf},alphaMap:{value:null},alphaMapTransform:{value:new Tf},alphaTest:{value:0}}},Vy={basic:{uniforms:yy([zy.common,zy.specularmap,zy.envmap,zy.aomap,zy.lightmap,zy.fog]),vertexShader:By.meshbasic_vert,fragmentShader:By.meshbasic_frag},lambert:{uniforms:yy([zy.common,zy.specularmap,zy.envmap,zy.aomap,zy.lightmap,zy.emissivemap,zy.bumpmap,zy.normalmap,zy.displacementmap,zy.fog,zy.lights,{emissive:{value:new xg(0)}}]),vertexShader:By.meshlambert_vert,fragmentShader:By.meshlambert_frag},phong:{uniforms:yy([zy.common,zy.specularmap,zy.envmap,zy.aomap,zy.lightmap,zy.emissivemap,zy.bumpmap,zy.normalmap,zy.displacementmap,zy.fog,zy.lights,{emissive:{value:new xg(0)},specular:{value:new xg(1118481)},shininess:{value:30}}]),vertexShader:By.meshphong_vert,fragmentShader:By.meshphong_frag},standard:{uniforms:yy([zy.common,zy.envmap,zy.aomap,zy.lightmap,zy.emissivemap,zy.bumpmap,zy.normalmap,zy.displacementmap,zy.roughnessmap,zy.metalnessmap,zy.fog,zy.lights,{emissive:{value:new xg(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:By.meshphysical_vert,fragmentShader:By.meshphysical_frag},toon:{uniforms:yy([zy.common,zy.aomap,zy.lightmap,zy.emissivemap,zy.bumpmap,zy.normalmap,zy.displacementmap,zy.gradientmap,zy.fog,zy.lights,{emissive:{value:new xg(0)}}]),vertexShader:By.meshtoon_vert,fragmentShader:By.meshtoon_frag},matcap:{uniforms:yy([zy.common,zy.bumpmap,zy.normalmap,zy.displacementmap,zy.fog,{matcap:{value:null}}]),vertexShader:By.meshmatcap_vert,fragmentShader:By.meshmatcap_frag},points:{uniforms:yy([zy.points,zy.fog]),vertexShader:By.points_vert,fragmentShader:By.points_frag},dashed:{uniforms:yy([zy.common,zy.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:By.linedashed_vert,fragmentShader:By.linedashed_frag},depth:{uniforms:yy([zy.common,zy.displacementmap]),vertexShader:By.depth_vert,fragmentShader:By.depth_frag},normal:{uniforms:yy([zy.common,zy.bumpmap,zy.normalmap,zy.displacementmap,{opacity:{value:1}}]),vertexShader:By.meshnormal_vert,fragmentShader:By.meshnormal_frag},sprite:{uniforms:yy([zy.sprite,zy.fog]),vertexShader:By.sprite_vert,fragmentShader:By.sprite_frag},background:{uniforms:{uvTransform:{value:new Tf},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:By.background_vert,fragmentShader:By.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Tf}},vertexShader:By.backgroundCube_vert,fragmentShader:By.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:By.cube_vert,fragmentShader:By.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:By.equirect_vert,fragmentShader:By.equirect_frag},distanceRGBA:{uniforms:yy([zy.common,zy.displacementmap,{referencePosition:{value:new em},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:By.distanceRGBA_vert,fragmentShader:By.distanceRGBA_frag},shadow:{uniforms:yy([zy.lights,zy.fog,{color:{value:new xg(0)},opacity:{value:1}}]),vertexShader:By.shadow_vert,fragmentShader:By.shadow_frag}};Vy.physical={uniforms:yy([Vy.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Tf},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Tf},clearcoatNormalScale:{value:new Sf(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Tf},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Tf},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Tf},sheen:{value:0},sheenColor:{value:new xg(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Tf},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Tf},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Tf},transmissionSamplerSize:{value:new Sf},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Tf},attenuationDistance:{value:0},attenuationColor:{value:new xg(0)},specularColor:{value:new xg(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Tf},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Tf},anisotropyVector:{value:new Sf},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Tf}}]),vertexShader:By.meshphysical_vert,fragmentShader:By.meshphysical_frag};const Gy={r:0,b:0,g:0},Wy=new zm,Hy=new Pm;function qy(t,e,n,r,i,o,a){const s=new xg(0);let c,l,u=!0===o?0:1,h=null,d=0,p=null;function f(t){let r=!0===t.isScene?t.background:null;if(r&&r.isTexture){r=(t.backgroundBlurriness>0?n:e).get(r)}return r}function m(e,n){e.getRGB(Gy,vy(t)),r.buffers.color.setClear(Gy.r,Gy.g,Gy.b,n,a)}return{getClearColor:function(){return s},setClearColor:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(t),u=e,m(s,u)},getClearAlpha:function(){return u},setClearAlpha:function(t){u=t,m(s,u)},render:function(e){let n=!1;const i=f(e);null===i?m(s,u):i&&i.isColor&&(m(i,1),n=!0);const o=t.xr.getEnvironmentBlendMode();"additive"===o?r.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===o&&r.buffers.color.setClear(0,0,0,0,a),(t.autoClear||n)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))},addToRenderList:function(e,n){const r=f(n);r&&(r.isCubeTexture||r.mapping===jh)?(void 0===l&&(l=new py(new my(1,1,1),new xy({name:"BackgroundCubeMaterial",uniforms:gy(Vy.backgroundCube.uniforms),vertexShader:Vy.backgroundCube.vertexShader,fragmentShader:Vy.backgroundCube.fragmentShader,side:ju,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),Wy.copy(n.backgroundRotation),Wy.x*=-1,Wy.y*=-1,Wy.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(Wy.y*=-1,Wy.z*=-1),l.material.uniforms.envMap.value=r,l.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.uniforms.backgroundRotation.value.setFromMatrix4(Hy.makeRotationFromEuler(Wy)),l.material.toneMapped=Ff.getTransfer(r.colorSpace)!==Tp,h===r&&d===r.version&&p===t.toneMapping||(l.material.needsUpdate=!0,h=r,d=r.version,p=t.toneMapping),l.layers.enableAll(),e.unshift(l,l.geometry,l.material,0,0,null)):r&&r.isTexture&&(void 0===c&&(c=new py(new Uy(2,2),new xy({name:"BackgroundMaterial",uniforms:gy(Vy.background.uniforms),vertexShader:Vy.background.vertexShader,fragmentShader:Vy.background.fragmentShader,side:Fu,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=r,c.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,c.material.toneMapped=Ff.getTransfer(r.colorSpace)!==Tp,!0===r.matrixAutoUpdate&&r.updateMatrix(),c.material.uniforms.uvTransform.value.copy(r.matrix),h===r&&d===r.version&&p===t.toneMapping||(c.material.needsUpdate=!0,h=r,d=r.version,p=t.toneMapping),c.layers.enableAll(),e.unshift(c,c.geometry,c.material,0,0,null))}}}function Xy(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=l(null);let o=i,a=!1;function s(e){return t.bindVertexArray(e)}function c(e){return t.deleteVertexArray(e)}function l(t){const e=[],r=[],i=[];for(let o=0;o<n;o++)e[o]=0,r[o]=0,i[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:r,attributeDivisors:i,object:t,attributes:{},index:null}}function u(){const t=o.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function h(t){d(t,0)}function d(e,n){const r=o.newAttributes,i=o.enabledAttributes,a=o.attributeDivisors;r[e]=1,0===i[e]&&(t.enableVertexAttribArray(e),i[e]=1),a[e]!==n&&(t.vertexAttribDivisor(e,n),a[e]=n)}function p(){const e=o.newAttributes,n=o.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function f(e,n,r,i,o,a,s){!0===s?t.vertexAttribIPointer(e,n,r,o,a):t.vertexAttribPointer(e,n,r,i,o,a)}function m(){g(),a=!0,o!==i&&(o=i,s(o.object))}function g(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:function(n,i,c,m,g){let y=!1;const v=function(e,n,i){const o=!0===i.wireframe;let a=r[e.id];void 0===a&&(a={},r[e.id]=a);let s=a[n.id];void 0===s&&(s={},a[n.id]=s);let c=s[o];void 0===c&&(c=l(t.createVertexArray()),s[o]=c);return c}(m,c,i);o!==v&&(o=v,s(o.object)),y=function(t,e,n,r){const i=o.attributes,a=e.attributes;let s=0;const c=n.getAttributes();for(const o in c){if(c[o].location>=0){const e=i[o];let n=a[o];if(void 0===n&&("instanceMatrix"===o&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===o&&t.instanceColor&&(n=t.instanceColor)),void 0===e)return!0;if(e.attribute!==n)return!0;if(n&&e.data!==n.data)return!0;s++}}return o.attributesNum!==s||o.index!==r}(n,m,c,g),y&&function(t,e,n,r){const i={},a=e.attributes;let s=0;const c=n.getAttributes();for(const o in c){if(c[o].location>=0){let e=a[o];void 0===e&&("instanceMatrix"===o&&t.instanceMatrix&&(e=t.instanceMatrix),"instanceColor"===o&&t.instanceColor&&(e=t.instanceColor));const n={};n.attribute=e,e&&e.data&&(n.data=e.data),i[o]=n,s++}}o.attributes=i,o.attributesNum=s,o.index=r}(n,m,c,g),null!==g&&e.update(g,t.ELEMENT_ARRAY_BUFFER),(y||a)&&(a=!1,function(n,r,i,o){u();const a=o.attributes,s=i.getAttributes(),c=r.defaultAttributeValues;for(const l in s){const r=s[l];if(r.location>=0){let i=a[l];if(void 0===i&&("instanceMatrix"===l&&n.instanceMatrix&&(i=n.instanceMatrix),"instanceColor"===l&&n.instanceColor&&(i=n.instanceColor)),void 0!==i){const a=i.normalized,s=i.itemSize,c=e.get(i);if(void 0===c)continue;const l=c.buffer,u=c.type,p=c.bytesPerElement,m=u===t.INT||u===t.UNSIGNED_INT||i.gpuType===nd;if(i.isInterleavedBufferAttribute){const e=i.data,c=e.stride,g=i.offset;if(e.isInstancedInterleavedBuffer){for(let t=0;t<r.locationSize;t++)d(r.location+t,e.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=e.meshPerAttribute*e.count)}else for(let t=0;t<r.locationSize;t++)h(r.location+t);t.bindBuffer(t.ARRAY_BUFFER,l);for(let t=0;t<r.locationSize;t++)f(r.location+t,s/r.locationSize,u,a,c*p,(g+s/r.locationSize*t)*p,m)}else{if(i.isInstancedBufferAttribute){for(let t=0;t<r.locationSize;t++)d(r.location+t,i.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let t=0;t<r.locationSize;t++)h(r.location+t);t.bindBuffer(t.ARRAY_BUFFER,l);for(let t=0;t<r.locationSize;t++)f(r.location+t,s/r.locationSize,u,a,s*p,s/r.locationSize*t*p,m)}}else if(void 0!==c){const e=c[l];if(void 0!==e)switch(e.length){case 2:t.vertexAttrib2fv(r.location,e);break;case 3:t.vertexAttrib3fv(r.location,e);break;case 4:t.vertexAttrib4fv(r.location,e);break;default:t.vertexAttrib1fv(r.location,e)}}}}p()}(n,i,c,m),null!==g&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(g).buffer))},reset:m,resetDefaultState:g,dispose:function(){m();for(const t in r){const e=r[t];for(const t in e){const n=e[t];for(const t in n)c(n[t].object),delete n[t];delete e[t]}delete r[t]}},releaseStatesOfGeometry:function(t){if(void 0===r[t.id])return;const e=r[t.id];for(const n in e){const t=e[n];for(const e in t)c(t[e].object),delete t[e];delete e[n]}delete r[t.id]},releaseStatesOfProgram:function(t){for(const e in r){const n=r[e];if(void 0===n[t.id])continue;const i=n[t.id];for(const t in i)c(i[t].object),delete i[t];delete n[t.id]}},initAttributes:u,enableAttribute:h,disableUnusedAttributes:p}}function Yy(t,e,n){let r;function i(e,i,o){0!==o&&(t.drawArraysInstanced(r,e,i,o),n.update(i,r,o))}this.setMode=function(t){r=t},this.render=function(e,i){t.drawArrays(r,e,i),n.update(i,r,1)},this.renderInstances=i,this.renderMultiDraw=function(t,i,o){if(0===o)return;const a=e.get("WEBGL_multi_draw");if(null===a)for(let e=0;e<o;e++)this.render(t[e],i[e]);else{a.multiDrawArraysWEBGL(r,t,0,i,0,o);let e=0;for(let t=0;t<o;t++)e+=i[t];n.update(e,r,1)}},this.renderMultiDrawInstances=function(t,o,a,s){if(0===a)return;const c=e.get("WEBGL_multi_draw");if(null===c)for(let e=0;e<t.length;e++)i(t[e],o[e],s[e]);else{c.multiDrawArraysInstancedWEBGL(r,t,0,o,0,s,0,a);let e=0;for(let t=0;t<a;t++)e+=o[t];for(let t=0;t<s.length;t++)n.update(e,r,s[t])}}}function Ky(t,e,n,r){let i;function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a=void 0!==n.precision?n.precision:"highp";const s=o(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const c=!0===n.logarithmicDepthBuffer,l=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:o,textureFormatReadable:function(e){return e===dd||r.convert(e)===t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const i=n===od&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(n!==$h&&r.convert(n)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==id&&!i)},precision:a,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:u,maxTextureSize:t.getParameter(t.MAX_TEXTURE_SIZE),maxCubemapSize:t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:t.getParameter(t.MAX_VERTEX_ATTRIBS),maxVertexUniforms:t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:t.getParameter(t.MAX_VARYING_VECTORS),maxFragmentUniforms:t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:u>0,maxSamples:t.getParameter(t.MAX_SAMPLES)}}function Zy(t){const e=this;let n=null,r=0,i=!1,o=!1;const a=new Ny,s=new Tf,c={value:null,needsUpdate:!1};function l(t,n,r,i){const o=null!==t?t.length:0;let l=null;if(0!==o){if(l=c.value,!0!==i||null===l){const e=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===l||l.length<e)&&(l=new Float32Array(e));for(let n=0,c=r;n!==o;++n,c+=4)a.copy(t[n]).applyMatrix4(i,s),a.normal.toArray(l,c),l[c+3]=a.constant}c.value=l,c.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,l}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==r||i;return i=e,r=t.length,n},this.beginShadows=function(){o=!0,l(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(t,e){n=l(t,e,0)},this.setState=function(a,s,u){const h=a.clippingPlanes,d=a.clipIntersection,p=a.clipShadows,f=t.get(a);if(!i||null===h||0===h.length||o&&!p)o?l(null):function(){c.value!==n&&(c.value=n,c.needsUpdate=r>0);e.numPlanes=r,e.numIntersection=0}();else{const t=o?0:r,e=4*t;let i=f.clippingState||null;c.value=i,i=l(h,s,e,u);for(let r=0;r!==e;++r)i[r]=n[r];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function Jy(t){let e=new WeakMap;function n(t,e){return e===Lh?t.mapping=Rh:e===Fh&&(t.mapping=Dh),t}function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping;if(o===Lh||o===Fh){if(e.has(i)){return n(e.get(i).texture,i.mapping)}{const o=i.image;if(o&&o.height>0){const a=new Cy(o.height);return a.fromEquirectangularTexture(t,i),e.set(i,a),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){e=new WeakMap}}}class $y extends _y{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,o=i+t*this.view.width,a-=e*this.view.offsetY,s=a-e*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const Qy=[.125,.215,.35,.446,.526,.582],tv=20,ev=new $y,nv=new xg;let rv=null,iv=0,ov=0,av=!1;const sv=(1+Math.sqrt(5))/2,cv=1/sv,lv=[new em(-sv,cv,0),new em(sv,cv,0),new em(-cv,0,sv),new em(cv,0,sv),new em(0,sv,-cv),new em(0,sv,cv),new em(-1,1,-1),new em(1,1,-1),new em(-1,1,1),new em(1,1,1)];class uv{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;rv=this._renderer.getRenderTarget(),iv=this._renderer.getActiveCubeFace(),ov=this._renderer.getActiveMipmapLevel(),av=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,e)}fromCubemap(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=fv(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=pv(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(rv,iv,ov),this._renderer.xr.enabled=av,t.scissorTest=!1,dv(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Rh||t.mapping===Dh?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),rv=this._renderer.getRenderTarget(),iv=this._renderer.getActiveCubeFace(),ov=this._renderer.getActiveMipmapLevel(),av=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Xh,minFilter:Xh,generateMipmaps:!1,type:od,format:dd,colorSpace:xp,depthBuffer:!1},r=hv(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=hv(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],r=[];let i=t;const o=t-4+1+Qy.length;for(let a=0;a<o;a++){const o=Math.pow(2,i);n.push(o);let s=1/o;a>t-4?s=Qy[a-t+4-1]:0===a&&(s=0),r.push(s);const c=1/(o-2),l=-c,u=1+c,h=[l,l,u,l,u,u,l,l,u,u,l,u],d=6,p=6,f=3,m=2,g=1,y=new Float32Array(f*p*d),v=new Float32Array(m*p*d),b=new Float32Array(g*p*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];y.set(r,f*p*t),v.set(h,m*p*t);const i=[t,t,t,t,t,t];b.set(i,g*p*t)}const x=new Kg;x.setAttribute("position",new Ig(y,f)),x.setAttribute("uv",new Ig(v,m)),x.setAttribute("faceIndex",new Ig(b,g)),e.push(x),i>4&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(t,e,n){const r=new Float32Array(tv),i=new em(0,1,0),o=new xy({name:"SphericalGaussianBlur",defines:{n:tv,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(t,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Bu,depthTest:!1,depthWrite:!1});return o}(r,t,e)}return r}_compileMaterial(t){const e=new py(this._lodPlanes[0],t);this._renderer.compile(e,ev)}_sceneToCubeUV(t,e,n,r){const i=new Ey(90,1,e,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,c=s.autoClear,l=s.toneMapping;s.getClearColor(nv),s.toneMapping=Sh,s.autoClear=!1;const u=new Tg({name:"PMREM.Background",side:ju,depthWrite:!1,depthTest:!1}),h=new py(new my,u);let d=!1;const p=t.background;p?p.isColor&&(u.color.copy(p),t.background=null,d=!0):(u.color.copy(nv),d=!0);for(let f=0;f<6;f++){const e=f%3;0===e?(i.up.set(0,o[f],0),i.lookAt(a[f],0,0)):1===e?(i.up.set(0,0,o[f]),i.lookAt(0,a[f],0)):(i.up.set(0,o[f],0),i.lookAt(0,0,a[f]));const n=this._cubeSize;dv(r,e*n,f>2?n:0,n,n),s.setRenderTarget(r),d&&s.render(h,i),s.render(t,i)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=l,s.autoClear=c,t.background=p}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===Rh||t.mapping===Dh;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=fv()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=pv());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new py(this._lodPlanes[0],i);i.uniforms.envMap.value=t;const a=this._cubeSize;dv(e,0,0,3*a,2*a),n.setRenderTarget(e),n.render(o,ev)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const r=this._lodPlanes.length;for(let i=1;i<r;i++){const e=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=lv[(r-i-1)%lv.length];this._blur(t,i-1,i,e,n)}e.autoClear=n}_blur(t,e,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",i),this._halfBlur(o,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,o,a){const s=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const l=new py(this._lodPlanes[r],c),u=c.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,p=i/d,f=isFinite(i)?1+Math.floor(3*p):tv;f>tv&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(tv));const m=[];let g=0;for(let b=0;b<tv;++b){const t=b/p,e=Math.exp(-t*t/2);m.push(e),0===b?g+=e:b<f&&(g+=2*e)}for(let b=0;b<m.length;b++)m[b]=m[b]/g;u.envMap.value=t.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a);const{_lodMax:y}=this;u.dTheta.value=d,u.mipInt.value=y-n;const v=this._sizeLods[r];dv(e,3*v*(r>y-4?r-y+4:0),4*(this._cubeSize-v),3*v,2*v),s.setRenderTarget(e),s.render(l,ev)}}function hv(t,e,n){const r=new Kf(t,e,n);return r.texture.mapping=jh,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function dv(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function pv(){return new xy({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Bu,depthTest:!1,depthWrite:!1})}function fv(){return new xy({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Bu,depthTest:!1,depthWrite:!1})}function mv(t){let e=new WeakMap,n=null;function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping,a=o===Lh||o===Fh,s=o===Rh||o===Dh;if(a||s){let o=e.get(i);const c=void 0!==o?o.texture.pmremVersion:0;if(i.isRenderTargetTexture&&i.pmremVersion!==c)return null===n&&(n=new uv(t)),o=a?n.fromEquirectangular(i,o):n.fromCubemap(i,o),o.texture.pmremVersion=i.pmremVersion,e.set(i,o),o.texture;if(void 0!==o)return o.texture;{const c=i.image;return a&&c&&c.height>0||s&&c&&function(t){let e=0;const n=6;for(let r=0;r<n;r++)void 0!==t[r]&&e++;return e===n}(c)?(null===n&&(n=new uv(t)),o=a?n.fromEquirectangular(i):n.fromCubemap(i),o.texture.pmremVersion=i.pmremVersion,e.set(i,o),i.addEventListener("dispose",r),o.texture):null}}}return i},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function gv(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(t){const e=n(t);return null===e&&If("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function yv(t,e,n,r){const i={},o=new WeakMap;function a(t){const s=t.target;null!==s.index&&e.remove(s.index);for(const n in s.attributes)e.remove(s.attributes[n]);for(const n in s.morphAttributes){const t=s.morphAttributes[n];for(let n=0,r=t.length;n<r;n++)e.remove(t[n])}s.removeEventListener("dispose",a),delete i[s.id];const c=o.get(s);c&&(e.remove(c),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t){const n=[],r=t.index,i=t.attributes.position;let a=0;if(null!==r){const t=r.array;a=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],o=t[e+2];n.push(r,i,i,o,o,r)}}else{if(void 0===i)return;{const t=i.array;a=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}}const s=new(Af(n)?Ug:Fg)(n,1);s.version=a;const c=o.get(t);c&&e.remove(c),o.set(t,s)}return{get:function(t,e){return!0===i[e.id]||(e.addEventListener("dispose",a),i[e.id]=!0,n.memory.geometries++),e},update:function(n){const r=n.attributes;for(const o in r)e.update(r[o],t.ARRAY_BUFFER);const i=n.morphAttributes;for(const o in i){const n=i[o];for(let r=0,i=n.length;r<i;r++)e.update(n[r],t.ARRAY_BUFFER)}},getWireframeAttribute:function(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return o.get(t)}}}function vv(t,e,n){let r,i,o;function a(e,a,s){0!==s&&(t.drawElementsInstanced(r,a,i,e*o,s),n.update(a,r,s))}this.setMode=function(t){r=t},this.setIndex=function(t){i=t.type,o=t.bytesPerElement},this.render=function(e,a){t.drawElements(r,a,i,e*o),n.update(a,r,1)},this.renderInstances=a,this.renderMultiDraw=function(t,a,s){if(0===s)return;const c=e.get("WEBGL_multi_draw");if(null===c)for(let e=0;e<s;e++)this.render(t[e]/o,a[e]);else{c.multiDrawElementsWEBGL(r,a,0,i,t,0,s);let e=0;for(let t=0;t<s;t++)e+=a[t];n.update(e,r,1)}},this.renderMultiDrawInstances=function(t,s,c,l){if(0===c)return;const u=e.get("WEBGL_multi_draw");if(null===u)for(let e=0;e<t.length;e++)a(t[e]/o,s[e],l[e]);else{u.multiDrawElementsInstancedWEBGL(r,s,0,i,t,0,l,0,c);let e=0;for(let t=0;t<c;t++)e+=s[t];for(let t=0;t<l.length;t++)n.update(e,r,l[t])}}}function bv(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(n,r,i){switch(e.calls++,r){case t.TRIANGLES:e.triangles+=i*(n/3);break;case t.LINES:e.lines+=i*(n/2);break;case t.LINE_STRIP:e.lines+=i*(n-1);break;case t.LINE_LOOP:e.lines+=i*n;break;case t.POINTS:e.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function xv(t,e,n){const r=new WeakMap,i=new Xf;return{update:function(o,a,s){const c=o.morphTargetInfluences,l=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=void 0!==l?l.length:0;let h=r.get(a);if(void 0===h||h.count!==u){void 0!==h&&h.texture.dispose();const d=void 0!==a.morphAttributes.position,p=void 0!==a.morphAttributes.normal,f=void 0!==a.morphAttributes.color,m=a.morphAttributes.position||[],g=a.morphAttributes.normal||[],y=a.morphAttributes.color||[];let v=0;!0===d&&(v=1),!0===p&&(v=2),!0===f&&(v=3);let b=a.attributes.position.count*v,x=1;b>e.maxTextureSize&&(x=Math.ceil(b/e.maxTextureSize),b=e.maxTextureSize);const _=new Float32Array(b*x*4*u),w=new Zf(_,b,x,u);w.type=id,w.needsUpdate=!0;const S=4*v;for(let E=0;E<u;E++){const A=m[E],M=g[E],O=y[E],C=b*x*4*E;for(let k=0;k<A.count;k++){const P=k*S;!0===d&&(i.fromBufferAttribute(A,k),_[C+P+0]=i.x,_[C+P+1]=i.y,_[C+P+2]=i.z,_[C+P+3]=0),!0===p&&(i.fromBufferAttribute(M,k),_[C+P+4]=i.x,_[C+P+5]=i.y,_[C+P+6]=i.z,_[C+P+7]=0),!0===f&&(i.fromBufferAttribute(O,k),_[C+P+8]=i.x,_[C+P+9]=i.y,_[C+P+10]=i.z,_[C+P+11]=4===O.itemSize?i.w:1)}}function T(){w.dispose(),r.delete(a),a.removeEventListener("dispose",T)}h={count:u,texture:w,size:new Sf(b,x)},r.set(a,h),a.addEventListener("dispose",T)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)s.getUniforms().setValue(t,"morphTexture",o.morphTexture,n);else{let I=0;for(let R=0;R<c.length;R++)I+=c[R];const N=a.morphTargetsRelative?1:1-I;s.getUniforms().setValue(t,"morphTargetBaseInfluence",N),s.getUniforms().setValue(t,"morphTargetInfluences",c)}s.getUniforms().setValue(t,"morphTargetsTexture",h.texture,n),s.getUniforms().setValue(t,"morphTargetsTextureSize",h.size)}}}function _v(t,e,n,r){let i=new WeakMap;function o(t){const e=t.target;e.removeEventListener("dispose",o),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(a){const s=r.render.frame,c=a.geometry,l=e.get(a,c);if(i.get(l)!==s&&(e.update(l),i.set(l,s)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",o)&&a.addEventListener("dispose",o),i.get(a)!==s&&(n.update(a.instanceMatrix,t.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,t.ARRAY_BUFFER),i.set(a,s))),a.isSkinnedMesh){const t=a.skeleton;i.get(t)!==s&&(t.update(),i.set(t,s))}return l},dispose:function(){i=new WeakMap}}}class wv extends qf{constructor(t,e,n,r,i,o,a,s,c){let l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:md;if(l!==md&&l!==gd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===md&&(n=rd),void 0===n&&l===gd&&(n=cd),super(null,r,i,o,a,s,l,n,c),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:Vh,this.minFilter=void 0!==s?s:Vh,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}const Sv=new qf,Tv=new wv(1,1);Tv.compareFunction=qp;const Ev=new Zf,Av=new $f,Mv=new Oy,Ov=[],Cv=[],kv=new Float32Array(16),Pv=new Float32Array(9),Iv=new Float32Array(4);function Nv(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=Ov[i];if(void 0===o&&(o=new Float32Array(i),Ov[i]=o),0!==e){r.toArray(o,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(o,i)}return o}function Rv(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Dv(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function Lv(t,e){let n=Cv[e];void 0===n&&(n=new Int32Array(e),Cv[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Fv(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function jv(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Rv(n,e))return;t.uniform2fv(this.addr,e),Dv(n,e)}}function Uv(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Rv(n,e))return;t.uniform3fv(this.addr,e),Dv(n,e)}}function Bv(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Rv(n,e))return;t.uniform4fv(this.addr,e),Dv(n,e)}}function zv(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Rv(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Dv(n,e)}else{if(Rv(n,r))return;Iv.set(r),t.uniformMatrix2fv(this.addr,!1,Iv),Dv(n,r)}}function Vv(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Rv(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Dv(n,e)}else{if(Rv(n,r))return;Pv.set(r),t.uniformMatrix3fv(this.addr,!1,Pv),Dv(n,r)}}function Gv(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Rv(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Dv(n,e)}else{if(Rv(n,r))return;kv.set(r),t.uniformMatrix4fv(this.addr,!1,kv),Dv(n,r)}}function Wv(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Hv(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Rv(n,e))return;t.uniform2iv(this.addr,e),Dv(n,e)}}function qv(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Rv(n,e))return;t.uniform3iv(this.addr,e),Dv(n,e)}}function Xv(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Rv(n,e))return;t.uniform4iv(this.addr,e),Dv(n,e)}}function Yv(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Kv(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Rv(n,e))return;t.uniform2uiv(this.addr,e),Dv(n,e)}}function Zv(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Rv(n,e))return;t.uniform3uiv(this.addr,e),Dv(n,e)}}function Jv(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Rv(n,e))return;t.uniform4uiv(this.addr,e),Dv(n,e)}}function $v(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const o=this.type===t.SAMPLER_2D_SHADOW?Tv:Sv;n.setTexture2D(e||o,i)}function Qv(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Av,i)}function tb(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Mv,i)}function eb(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Ev,i)}function nb(t,e){t.uniform1fv(this.addr,e)}function rb(t,e){const n=Nv(e,this.size,2);t.uniform2fv(this.addr,n)}function ib(t,e){const n=Nv(e,this.size,3);t.uniform3fv(this.addr,n)}function ob(t,e){const n=Nv(e,this.size,4);t.uniform4fv(this.addr,n)}function ab(t,e){const n=Nv(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function sb(t,e){const n=Nv(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function cb(t,e){const n=Nv(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function lb(t,e){t.uniform1iv(this.addr,e)}function ub(t,e){t.uniform2iv(this.addr,e)}function hb(t,e){t.uniform3iv(this.addr,e)}function db(t,e){t.uniform4iv(this.addr,e)}function pb(t,e){t.uniform1uiv(this.addr,e)}function fb(t,e){t.uniform2uiv(this.addr,e)}function mb(t,e){t.uniform3uiv(this.addr,e)}function gb(t,e){t.uniform4uiv(this.addr,e)}function yb(t,e,n){const r=this.cache,i=e.length,o=Lv(n,i);Rv(r,o)||(t.uniform1iv(this.addr,o),Dv(r,o));for(let a=0;a!==i;++a)n.setTexture2D(e[a]||Sv,o[a])}function vb(t,e,n){const r=this.cache,i=e.length,o=Lv(n,i);Rv(r,o)||(t.uniform1iv(this.addr,o),Dv(r,o));for(let a=0;a!==i;++a)n.setTexture3D(e[a]||Av,o[a])}function bb(t,e,n){const r=this.cache,i=e.length,o=Lv(n,i);Rv(r,o)||(t.uniform1iv(this.addr,o),Dv(r,o));for(let a=0;a!==i;++a)n.setTextureCube(e[a]||Mv,o[a])}function xb(t,e,n){const r=this.cache,i=e.length,o=Lv(n,i);Rv(r,o)||(t.uniform1iv(this.addr,o),Dv(r,o));for(let a=0;a!==i;++a)n.setTexture2DArray(e[a]||Ev,o[a])}class _b{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=function(t){switch(t){case 5126:return Fv;case 35664:return jv;case 35665:return Uv;case 35666:return Bv;case 35674:return zv;case 35675:return Vv;case 35676:return Gv;case 5124:case 35670:return Wv;case 35667:case 35671:return Hv;case 35668:case 35672:return qv;case 35669:case 35673:return Xv;case 5125:return Yv;case 36294:return Kv;case 36295:return Zv;case 36296:return Jv;case 35678:case 36198:case 36298:case 36306:case 35682:return $v;case 35679:case 36299:case 36307:return Qv;case 35680:case 36300:case 36308:case 36293:return tb;case 36289:case 36303:case 36311:case 36292:return eb}}(e.type)}}class wb{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=function(t){switch(t){case 5126:return nb;case 35664:return rb;case 35665:return ib;case 35666:return ob;case 35674:return ab;case 35675:return sb;case 35676:return cb;case 5124:case 35670:return lb;case 35667:case 35671:return ub;case 35668:case 35672:return hb;case 35669:case 35673:return db;case 5125:return pb;case 36294:return fb;case 36295:return mb;case 36296:return gb;case 35678:case 36198:case 36298:case 36306:case 35682:return yb;case 35679:case 36299:case 36307:return vb;case 35680:case 36300:case 36308:case 36293:return bb;case 36289:case 36303:case 36311:case 36292:return xb}}(e.type)}}class Sb{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(t,e[o.id],n)}}}const Tb=/(\w+)(\])?(\[|\.)?/g;function Eb(t,e){t.seq.push(e),t.map[e.id]=e}function Ab(t,e,n){const r=t.name,i=r.length;for(Tb.lastIndex=0;;){const o=Tb.exec(r),a=Tb.lastIndex;let s=o[1];const c="]"===o[2],l=o[3];if(c&&(s|=0),void 0===l||"["===l&&a+2===i){Eb(n,void 0===l?new _b(s,t,e):new wb(s,t,e));break}{let t=n.map[s];void 0===t&&(t=new Sb(s),Eb(n,t)),n=t}}}class Mb{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r);Ab(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const o=e[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(t,a.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n}}function Ob(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const Cb=37297;let kb=0;function Pb(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(t,e){const n=t.split("\n"),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let a=i;a<o;a++){const t=a+1;r.push("".concat(t===e?">":" "," ").concat(t,": ").concat(n[a]))}return r.join("\n")}(t.getShaderSource(e),r)}return i}function Ib(t,e){const n=function(t){const e=Ff.getPrimaries(Ff.workingColorSpace),n=Ff.getPrimaries(t);let r;switch(e===n?r="":e===Ap&&n===Ep?r="LinearDisplayP3ToLinearSRGB":e===Ep&&n===Ap&&(r="LinearSRGBToLinearDisplayP3"),t){case xp:case wp:return[r,"LinearTransferOETF"];case bp:case _p:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}(e);return"vec4 ".concat(t,"( vec4 value ) { return ").concat(n[0],"( ").concat(n[1],"( value ) ); }")}function Nb(t,e){let n;switch(e){case Th:n="Linear";break;case Eh:n="Reinhard";break;case Ah:n="OptimizedCineon";break;case Mh:n="ACESFilmic";break;case Ch:n="AgX";break;case kh:n="Neutral";break;case Oh:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Rb(t){return""!==t}function Db(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Lb(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Fb=/^[ \t]*#include +<([\w\d./]+)>/gm;function jb(t){return t.replace(Fb,Bb)}const Ub=new Map;function Bb(t,e){let n=By[e];if(void 0===n){const t=Ub.get(e);if(void 0===t)throw new Error("Can not resolve #include <"+e+">");n=By[t],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,t)}return jb(n)}const zb=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Vb(t){return t.replace(zb,Gb)}function Gb(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function Wb(t){let e="precision ".concat(t.precision," float;\n\tprecision ").concat(t.precision," int;\n\tprecision ").concat(t.precision," sampler2D;\n\tprecision ").concat(t.precision," samplerCube;\n\tprecision ").concat(t.precision," sampler3D;\n\tprecision ").concat(t.precision," sampler2DArray;\n\tprecision ").concat(t.precision," sampler2DShadow;\n\tprecision ").concat(t.precision," samplerCubeShadow;\n\tprecision ").concat(t.precision," sampler2DArrayShadow;\n\tprecision ").concat(t.precision," isampler2D;\n\tprecision ").concat(t.precision," isampler3D;\n\tprecision ").concat(t.precision," isamplerCube;\n\tprecision ").concat(t.precision," isampler2DArray;\n\tprecision ").concat(t.precision," usampler2D;\n\tprecision ").concat(t.precision," usampler3D;\n\tprecision ").concat(t.precision," usamplerCube;\n\tprecision ").concat(t.precision," usampler2DArray;\n\t");return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Hb(t,e,n,r){const i=t.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const c=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Ru?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Du?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Lu&&(e="SHADOWMAP_TYPE_VSM"),e}(n),l=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Rh:case Dh:e="ENVMAP_TYPE_CUBE";break;case jh:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),u=function(t){let e="ENVMAP_MODE_REFLECTION";t.envMap&&t.envMapMode===Dh&&(e="ENVMAP_MODE_REFRACTION");return e}(n),h=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case xh:e="ENVMAP_BLENDING_MULTIPLY";break;case _h:e="ENVMAP_BLENDING_MIX";break;case wh:e="ENVMAP_BLENDING_ADD"}return e}(n),d=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),p=function(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Rb).join("\n")}(n),f=function(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(o),m=i.createProgram();let g,y,v=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(Rb).join("\n"),g.length>0&&(g+="\n"),y=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(Rb).join("\n"),y.length>0&&(y+="\n")):(g=[Wb(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Rb).join("\n"),y=[Wb(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Sh?"#define TONE_MAPPING":"",n.toneMapping!==Sh?By.tonemapping_pars_fragment:"",n.toneMapping!==Sh?Nb("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",By.colorspace_pars_fragment,Ib("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Rb).join("\n")),a=jb(a),a=Db(a,n),a=Lb(a,n),s=jb(s),s=Db(s,n),s=Lb(s,n),a=Vb(a),s=Vb(s),!0!==n.isRawShaderMaterial&&(v="#version 300 es\n",g=[p,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,y=["#define varying in",n.glslVersion===cf?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===cf?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const b=v+g+a,x=v+y+s,_=Ob(i,i.VERTEX_SHADER,b),w=Ob(i,i.FRAGMENT_SHADER,x);function S(e){if(t.debug.checkShaderErrors){const n=i.getProgramInfoLog(m).trim(),r=i.getShaderInfoLog(_).trim(),o=i.getShaderInfoLog(w).trim();let a=!0,s=!0;if(!1===i.getProgramParameter(m,i.LINK_STATUS))if(a=!1,"function"===typeof t.debug.onShaderError)t.debug.onShaderError(i,m,_,w);else{const t=Pb(i,_,"vertex"),r=Pb(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+"\n\nMaterial Name: "+e.name+"\nMaterial Type: "+e.type+"\n\nProgram Info Log: "+n+"\n"+t+"\n"+r)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==o||(s=!1);s&&(e.diagnostics={runnable:a,programLog:n,vertexShader:{log:r,prefix:g},fragmentShader:{log:o,prefix:y}})}i.deleteShader(_),i.deleteShader(w),T=new Mb(i,m),E=function(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i),o=r.name;let a=1;r.type===t.FLOAT_MAT2&&(a=2),r.type===t.FLOAT_MAT3&&(a=3),r.type===t.FLOAT_MAT4&&(a=4),n[o]={type:r.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}(i,m)}let T,E;i.attachShader(m,_),i.attachShader(m,w),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),this.getUniforms=function(){return void 0===T&&S(this),T},this.getAttributes=function(){return void 0===E&&S(this),E};let A=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===A&&(A=i.getProgramParameter(m,Cb)),A},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=kb++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=w,this}let qb=0;class Xb{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new Yb(t),e.set(t,n)),n}}class Yb{constructor(t){this.id=qb++,this.code=t,this.usedTimes=0}}function Kb(t,e,n,r,i,o,a){const s=new Vm,c=new Xb,l=new Set,u=[],h=i.logarithmicDepthBuffer,d=i.vertexTextures;let p=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(t){return l.add(t),0===t?"uv":"uv".concat(t)}return{getParameters:function(o,s,u,g,y){const v=g.fog,b=y.geometry,x=o.isMeshStandardMaterial?g.environment:null,_=(o.isMeshStandardMaterial?n:e).get(o.envMap||x),w=_&&_.mapping===jh?_.image.height:null,S=f[o.type];null!==o.precision&&(p=i.getMaxPrecision(o.precision),p!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",p,"instead."));const T=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,E=void 0!==T?T.length:0;let A,M,O,C,k=0;if(void 0!==b.morphAttributes.position&&(k=1),void 0!==b.morphAttributes.normal&&(k=2),void 0!==b.morphAttributes.color&&(k=3),S){const t=Vy[S];A=t.vertexShader,M=t.fragmentShader}else A=o.vertexShader,M=o.fragmentShader,c.update(o),O=c.getVertexShaderID(o),C=c.getFragmentShaderID(o);const P=t.getRenderTarget(),I=!0===y.isInstancedMesh,N=!0===y.isBatchedMesh,R=!!o.map,D=!!o.matcap,L=!!_,F=!!o.aoMap,j=!!o.lightMap,U=!!o.bumpMap,B=!!o.normalMap,z=!!o.displacementMap,V=!!o.emissiveMap,G=!!o.metalnessMap,W=!!o.roughnessMap,H=o.anisotropy>0,q=o.clearcoat>0,X=o.dispersion>0,Y=o.iridescence>0,K=o.sheen>0,Z=o.transmission>0,J=H&&!!o.anisotropyMap,$=q&&!!o.clearcoatMap,Q=q&&!!o.clearcoatNormalMap,tt=q&&!!o.clearcoatRoughnessMap,et=Y&&!!o.iridescenceMap,nt=Y&&!!o.iridescenceThicknessMap,rt=K&&!!o.sheenColorMap,it=K&&!!o.sheenRoughnessMap,ot=!!o.specularMap,at=!!o.specularColorMap,st=!!o.specularIntensityMap,ct=Z&&!!o.transmissionMap,lt=Z&&!!o.thicknessMap,ut=!!o.gradientMap,ht=!!o.alphaMap,dt=o.alphaTest>0,pt=!!o.alphaHash,ft=!!o.extensions;let mt=Sh;o.toneMapped&&(null!==P&&!0!==P.isXRRenderTarget||(mt=t.toneMapping));const gt={shaderID:S,shaderType:o.type,shaderName:o.name,vertexShader:A,fragmentShader:M,defines:o.defines,customVertexShaderID:O,customFragmentShaderID:C,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:p,batching:N,batchingColor:N&&null!==y._colorsTexture,instancing:I,instancingColor:I&&null!==y.instanceColor,instancingMorph:I&&null!==y.morphTexture,supportsVertexTextures:d,outputColorSpace:null===P?t.outputColorSpace:!0===P.isXRRenderTarget?P.texture.colorSpace:xp,alphaToCoverage:!!o.alphaToCoverage,map:R,matcap:D,envMap:L,envMapMode:L&&_.mapping,envMapCubeUVHeight:w,aoMap:F,lightMap:j,bumpMap:U,normalMap:B,displacementMap:d&&z,emissiveMap:V,normalMapObjectSpace:B&&o.normalMapType===yp,normalMapTangentSpace:B&&o.normalMapType===gp,metalnessMap:G,roughnessMap:W,anisotropy:H,anisotropyMap:J,clearcoat:q,clearcoatMap:$,clearcoatNormalMap:Q,clearcoatRoughnessMap:tt,dispersion:X,iridescence:Y,iridescenceMap:et,iridescenceThicknessMap:nt,sheen:K,sheenColorMap:rt,sheenRoughnessMap:it,specularMap:ot,specularColorMap:at,specularIntensityMap:st,transmission:Z,transmissionMap:ct,thicknessMap:lt,gradientMap:ut,opaque:!1===o.transparent&&o.blending===zu&&!1===o.alphaToCoverage,alphaMap:ht,alphaTest:dt,alphaHash:pt,combine:o.combine,mapUv:R&&m(o.map.channel),aoMapUv:F&&m(o.aoMap.channel),lightMapUv:j&&m(o.lightMap.channel),bumpMapUv:U&&m(o.bumpMap.channel),normalMapUv:B&&m(o.normalMap.channel),displacementMapUv:z&&m(o.displacementMap.channel),emissiveMapUv:V&&m(o.emissiveMap.channel),metalnessMapUv:G&&m(o.metalnessMap.channel),roughnessMapUv:W&&m(o.roughnessMap.channel),anisotropyMapUv:J&&m(o.anisotropyMap.channel),clearcoatMapUv:$&&m(o.clearcoatMap.channel),clearcoatNormalMapUv:Q&&m(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:tt&&m(o.clearcoatRoughnessMap.channel),iridescenceMapUv:et&&m(o.iridescenceMap.channel),iridescenceThicknessMapUv:nt&&m(o.iridescenceThicknessMap.channel),sheenColorMapUv:rt&&m(o.sheenColorMap.channel),sheenRoughnessMapUv:it&&m(o.sheenRoughnessMap.channel),specularMapUv:ot&&m(o.specularMap.channel),specularColorMapUv:at&&m(o.specularColorMap.channel),specularIntensityMapUv:st&&m(o.specularIntensityMap.channel),transmissionMapUv:ct&&m(o.transmissionMap.channel),thicknessMapUv:lt&&m(o.thicknessMap.channel),alphaMapUv:ht&&m(o.alphaMap.channel),vertexTangents:!!b.attributes.tangent&&(B||H),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,pointsUvs:!0===y.isPoints&&!!b.attributes.uv&&(R||ht),fog:!!v,useFog:!0===o.fog,fogExp2:!!v&&v.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===y.isSkinnedMesh,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:E,morphTextureStride:k,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numLightProbes:s.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.length>0,shadowMapType:t.shadowMap.type,toneMapping:mt,decodeVideoTexture:R&&!0===o.map.isVideoTexture&&Ff.getTransfer(o.map.colorSpace)===Tp,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===Uu,flipSided:o.side===ju,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionClipCullDistance:ft&&!0===o.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:ft&&!0===o.extensions.multiDraw&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:o.customProgramCacheKey()};return gt.vertexUv1s=l.has(1),gt.vertexUv2s=l.has(2),gt.vertexUv3s=l.has(3),l.clear(),gt},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(!function(t,e){t.push(e.precision),t.push(e.outputColorSpace),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.anisotropyMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.numLightProbes),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){s.disableAll(),e.supportsVertexTextures&&s.enable(0);e.instancing&&s.enable(1);e.instancingColor&&s.enable(2);e.instancingMorph&&s.enable(3);e.matcap&&s.enable(4);e.envMap&&s.enable(5);e.normalMapObjectSpace&&s.enable(6);e.normalMapTangentSpace&&s.enable(7);e.clearcoat&&s.enable(8);e.iridescence&&s.enable(9);e.alphaTest&&s.enable(10);e.vertexColors&&s.enable(11);e.vertexAlphas&&s.enable(12);e.vertexUv1s&&s.enable(13);e.vertexUv2s&&s.enable(14);e.vertexUv3s&&s.enable(15);e.vertexTangents&&s.enable(16);e.anisotropy&&s.enable(17);e.alphaHash&&s.enable(18);e.batching&&s.enable(19);e.dispersion&&s.enable(20);e.batchingColor&&s.enable(21);t.push(s.mask),s.disableAll(),e.fog&&s.enable(0);e.useFog&&s.enable(1);e.flatShading&&s.enable(2);e.logarithmicDepthBuffer&&s.enable(3);e.skinning&&s.enable(4);e.morphTargets&&s.enable(5);e.morphNormals&&s.enable(6);e.morphColors&&s.enable(7);e.premultipliedAlpha&&s.enable(8);e.shadowMapEnabled&&s.enable(9);e.doubleSided&&s.enable(10);e.flipSided&&s.enable(11);e.useDepthPacking&&s.enable(12);e.dithering&&s.enable(13);e.transmission&&s.enable(14);e.sheen&&s.enable(15);e.opaque&&s.enable(16);e.pointsUvs&&s.enable(17);e.decodeVideoTexture&&s.enable(18);e.alphaToCoverage&&s.enable(19);t.push(s.mask)}(n,e),n.push(t.outputColorSpace)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=f[t.type];let n;if(e){const t=Vy[e];n=by.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let r;for(let t=0,i=u.length;t<i;t++){const e=u[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new Hb(t,n,e,o),u.push(r)),r},releaseProgram:function(t){if(0===--t.usedTimes){const e=u.indexOf(t);u[e]=u[u.length-1],u.pop(),t.destroy()}},releaseShaderCache:function(t){c.remove(t)},programs:u,dispose:function(){c.dispose()}}}function Zb(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function Jb(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function $b(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Qb(){const t=[];let e=0;const n=[],r=[],i=[];function o(n,r,i,o,a,s){let c=t[e];return void 0===c?(c={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},t[e]=c):(c.id=n.id,c.object=n,c.geometry=r,c.material=i,c.groupOrder=o,c.renderOrder=n.renderOrder,c.z=a,c.group=s),e++,c}return{opaque:n,transmissive:r,transparent:i,init:function(){e=0,n.length=0,r.length=0,i.length=0},push:function(t,e,a,s,c,l){const u=o(t,e,a,s,c,l);a.transmission>0?r.push(u):!0===a.transparent?i.push(u):n.push(u)},unshift:function(t,e,a,s,c,l){const u=o(t,e,a,s,c,l);a.transmission>0?r.unshift(u):!0===a.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=e,r=t.length;n<r;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||Jb),r.length>1&&r.sort(e||$b),i.length>1&&i.sort(e||$b)}}}function tx(){let t=new WeakMap;return{get:function(e,n){const r=t.get(e);let i;return void 0===r?(i=new Qb,t.set(e,[i])):n>=r.length?(i=new Qb,r.push(i)):i=r[n],i},dispose:function(){t=new WeakMap}}}function ex(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new em,color:new xg};break;case"SpotLight":n={position:new em,direction:new em,color:new xg,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new em,color:new xg,distance:0,decay:0};break;case"HemisphereLight":n={direction:new em,skyColor:new xg,groundColor:new xg};break;case"RectAreaLight":n={color:new xg,position:new em,halfWidth:new em,halfHeight:new em}}return t[e.id]=n,n}}}let nx=0;function rx(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function ix(t){const e=new ex,n=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Sf};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Sf,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let s=0;s<9;s++)r.probe.push(new em);const i=new em,o=new Pm,a=new Pm;return{setup:function(i){let o=0,a=0,s=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let c=0,l=0,u=0,h=0,d=0,p=0,f=0,m=0,g=0,y=0,v=0;i.sort(rx);for(let t=0,x=i.length;t<x;t++){const b=i[t],x=b.color,_=b.intensity,w=b.distance,S=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)o+=x.r*_,a+=x.g*_,s+=x.b*_;else if(b.isLightProbe){for(let t=0;t<9;t++)r.probe[t].addScaledVector(b.sh.coefficients[t],_);v++}else if(b.isDirectionalLight){const t=e.get(b);if(t.color.copy(b.color).multiplyScalar(b.intensity),b.castShadow){const t=b.shadow,e=n.get(b);e.shadowBias=t.bias,e.shadowNormalBias=t.normalBias,e.shadowRadius=t.radius,e.shadowMapSize=t.mapSize,r.directionalShadow[c]=e,r.directionalShadowMap[c]=S,r.directionalShadowMatrix[c]=b.shadow.matrix,p++}r.directional[c]=t,c++}else if(b.isSpotLight){const t=e.get(b);t.position.setFromMatrixPosition(b.matrixWorld),t.color.copy(x).multiplyScalar(_),t.distance=w,t.coneCos=Math.cos(b.angle),t.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),t.decay=b.decay,r.spot[u]=t;const i=b.shadow;if(b.map&&(r.spotLightMap[g]=b.map,g++,i.updateMatrices(b),b.castShadow&&y++),r.spotLightMatrix[u]=i.matrix,b.castShadow){const t=n.get(b);t.shadowBias=i.bias,t.shadowNormalBias=i.normalBias,t.shadowRadius=i.radius,t.shadowMapSize=i.mapSize,r.spotShadow[u]=t,r.spotShadowMap[u]=S,m++}u++}else if(b.isRectAreaLight){const t=e.get(b);t.color.copy(x).multiplyScalar(_),t.halfWidth.set(.5*b.width,0,0),t.halfHeight.set(0,.5*b.height,0),r.rectArea[h]=t,h++}else if(b.isPointLight){const t=e.get(b);if(t.color.copy(b.color).multiplyScalar(b.intensity),t.distance=b.distance,t.decay=b.decay,b.castShadow){const t=b.shadow,e=n.get(b);e.shadowBias=t.bias,e.shadowNormalBias=t.normalBias,e.shadowRadius=t.radius,e.shadowMapSize=t.mapSize,e.shadowCameraNear=t.camera.near,e.shadowCameraFar=t.camera.far,r.pointShadow[l]=e,r.pointShadowMap[l]=S,r.pointShadowMatrix[l]=b.shadow.matrix,f++}r.point[l]=t,l++}else if(b.isHemisphereLight){const t=e.get(b);t.skyColor.copy(b.color).multiplyScalar(_),t.groundColor.copy(b.groundColor).multiplyScalar(_),r.hemi[d]=t,d++}}h>0&&(!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=zy.LTC_FLOAT_1,r.rectAreaLTC2=zy.LTC_FLOAT_2):(r.rectAreaLTC1=zy.LTC_HALF_1,r.rectAreaLTC2=zy.LTC_HALF_2)),r.ambient[0]=o,r.ambient[1]=a,r.ambient[2]=s;const b=r.hash;b.directionalLength===c&&b.pointLength===l&&b.spotLength===u&&b.rectAreaLength===h&&b.hemiLength===d&&b.numDirectionalShadows===p&&b.numPointShadows===f&&b.numSpotShadows===m&&b.numSpotMaps===g&&b.numLightProbes===v||(r.directional.length=c,r.spot.length=u,r.rectArea.length=h,r.point.length=l,r.hemi.length=d,r.directionalShadow.length=p,r.directionalShadowMap.length=p,r.pointShadow.length=f,r.pointShadowMap.length=f,r.spotShadow.length=m,r.spotShadowMap.length=m,r.directionalShadowMatrix.length=p,r.pointShadowMatrix.length=f,r.spotLightMatrix.length=m+g-y,r.spotLightMap.length=g,r.numSpotLightShadowsWithMaps=y,r.numLightProbes=v,b.directionalLength=c,b.pointLength=l,b.spotLength=u,b.rectAreaLength=h,b.hemiLength=d,b.numDirectionalShadows=p,b.numPointShadows=f,b.numSpotShadows=m,b.numSpotMaps=g,b.numLightProbes=v,r.version=nx++)},setupView:function(t,e){let n=0,s=0,c=0,l=0,u=0;const h=e.matrixWorldInverse;for(let d=0,p=t.length;d<p;d++){const e=t[d];if(e.isDirectionalLight){const t=r.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),i.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(i),t.direction.transformDirection(h),n++}else if(e.isSpotLight){const t=r.spot[c];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(e.matrixWorld),i.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(i),t.direction.transformDirection(h),c++}else if(e.isRectAreaLight){const t=r.rectArea[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),a.identity(),o.copy(e.matrixWorld),o.premultiply(h),a.extractRotation(o),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(a),t.halfHeight.applyMatrix4(a),l++}else if(e.isPointLight){const t=r.point[s];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),s++}else if(e.isHemisphereLight){const t=r.hemi[u];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(h),u++}}},state:r}}function ox(t){const e=new ix(t),n=[],r=[];const i={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function(t){i.camera=t,n.length=0,r.length=0},state:i,setupLights:function(){e.setup(n)},setupLightsView:function(t){e.setupView(n,t)},pushLight:function(t){n.push(t)},pushShadow:function(t){r.push(t)}}}function ax(t){let e=new WeakMap;return{get:function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=e.get(n);let o;return void 0===i?(o=new ox(t),e.set(n,[o])):r>=i.length?(o=new ox(t),i.push(o)):o=i[r],o},dispose:function(){e=new WeakMap}}}class sx extends Sg{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=fp,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class cx extends Sg{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function lx(t,e,n){let r=new Ly;const i=new Sf,o=new Sf,a=new Xf,s=new sx({depthPacking:mp}),c=new cx,l={},u=n.maxTextureSize,h={[Fu]:ju,[ju]:Fu,[Uu]:Uu},d=new xy({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Sf},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new Kg;f.setAttribute("position",new Ig(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new py(f,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ru;let y=this.type;function v(n,r){const o=e.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Kf(i.x,i.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,o,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,o,p,m,null)}function b(e,n,r,i){let o=null;const a=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==a)o=a;else if(o=!0===r.isPointLight?c:s,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const t=o.uuid,e=n.uuid;let r=l[t];void 0===r&&(r={},l[t]=r);let i=r[e];void 0===i&&(i=o.clone(),r[e]=i,n.addEventListener("dispose",_)),o=i}if(o.visible=n.visible,o.wireframe=n.wireframe,o.side=i===Lu?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===r.isPointLight&&!0===o.isMeshDistanceMaterial){t.properties.get(o).light=r}return o}function x(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===Lu)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=e.update(n),c=n.material;if(Array.isArray(c)){const e=r.groups;for(let l=0,u=e.length;l<u;l++){const u=e[l],h=c[u.materialIndex];if(h&&h.visible){const e=b(n,h,a,s);n.onBeforeShadow(t,n,i,o,r,e,u),t.renderBufferDirect(o,null,r,e,n,u),n.onAfterShadow(t,n,i,o,r,e,u)}}}else if(c.visible){const e=b(n,c,a,s);n.onBeforeShadow(t,n,i,o,r,e,null),t.renderBufferDirect(o,null,r,e,n,null),n.onAfterShadow(t,n,i,o,r,e,null)}}const c=n.children;for(let t=0,e=c.length;t<e;t++)x(c[t],i,o,a,s)}function _(t){t.target.removeEventListener("dispose",_);for(const e in l){const n=l[e],r=t.target.uuid;if(r in n){n[r].dispose(),delete n[r]}}}this.render=function(e,n,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===e.length)return;const c=t.getRenderTarget(),l=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(Bu),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const p=y!==Lu&&this.type===Lu,f=y===Lu&&this.type!==Lu;for(let m=0,g=e.length;m<g;m++){const c=e[m],l=c.shadow;if(void 0===l){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===l.autoUpdate&&!1===l.needsUpdate)continue;i.copy(l.mapSize);const h=l.getFrameExtents();if(i.multiply(h),o.copy(l.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/h.x),i.x=o.x*h.x,l.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/h.y),i.y=o.y*h.y,l.mapSize.y=o.y)),null===l.map||!0===p||!0===f){const t=this.type!==Lu?{minFilter:Vh,magFilter:Vh}:{};null!==l.map&&l.map.dispose(),l.map=new Kf(i.x,i.y,t),l.map.texture.name=c.name+".shadowMap",l.camera.updateProjectionMatrix()}t.setRenderTarget(l.map),t.clear();const g=l.getViewportCount();for(let t=0;t<g;t++){const e=l.getViewport(t);a.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),d.viewport(a),l.updateMatrices(c,t),r=l.getFrustum(),x(n,s,l.camera,c,this.type)}!0!==l.isPointLightShadow&&this.type===Lu&&v(l,s),l.needsUpdate=!1}y=this.type,g.needsUpdate=!1,t.setRenderTarget(c,l,h)}}function ux(t){const e=new function(){let e=!1;const n=new Xf;let r=null;const i=new Xf(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},n=new function(){let e=!1,n=null,r=null,i=null;return{setTest:function(e){e?U(t.DEPTH_TEST):B(t.DEPTH_TEST)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){switch(e){case dh:t.depthFunc(t.NEVER);break;case ph:t.depthFunc(t.ALWAYS);break;case fh:t.depthFunc(t.LESS);break;case mh:t.depthFunc(t.LEQUAL);break;case gh:t.depthFunc(t.EQUAL);break;case yh:t.depthFunc(t.GEQUAL);break;case vh:t.depthFunc(t.GREATER);break;case bh:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},r=new function(){let e=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,l=null;return{setTest:function(n){e||(n?U(t.STENCIL_TEST):B(t.STENCIL_TEST))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&c===r||(t.stencilOp(e,n,r),a=e,s=n,c=r)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,l=null}}},i=new WeakMap,o=new WeakMap;let a={},s={},c=new WeakMap,l=[],u=null,h=!1,d=null,p=null,f=null,m=null,g=null,y=null,v=null,b=new xg(0,0,0),x=0,_=!1,w=null,S=null,T=null,E=null,A=null;const M=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let O=!1,C=0;const k=t.getParameter(t.VERSION);-1!==k.indexOf("WebGL")?(C=parseFloat(/^WebGL (\d)/.exec(k)[1]),O=C>=1):-1!==k.indexOf("OpenGL ES")&&(C=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),O=C>=2);let P=null,I={};const N=t.getParameter(t.SCISSOR_BOX),R=t.getParameter(t.VIEWPORT),D=(new Xf).fromArray(N),L=(new Xf).fromArray(R);function F(e,n,r,i){const o=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let s=0;s<r;s++)e===t.TEXTURE_3D||e===t.TEXTURE_2D_ARRAY?t.texImage3D(n,0,t.RGBA,1,1,i,0,t.RGBA,t.UNSIGNED_BYTE,o):t.texImage2D(n+s,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,o);return a}const j={};function U(e){!0!==a[e]&&(t.enable(e),a[e]=!0)}function B(e){!1!==a[e]&&(t.disable(e),a[e]=!1)}j[t.TEXTURE_2D]=F(t.TEXTURE_2D,t.TEXTURE_2D,1),j[t.TEXTURE_CUBE_MAP]=F(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),j[t.TEXTURE_2D_ARRAY]=F(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),j[t.TEXTURE_3D]=F(t.TEXTURE_3D,t.TEXTURE_3D,1,1),e.setClear(0,0,0,1),n.setClear(1),r.setClear(0),U(t.DEPTH_TEST),n.setFunc(mh),W(!1),H(ku),U(t.CULL_FACE),G(Bu);const z={[qu]:t.FUNC_ADD,[Xu]:t.FUNC_SUBTRACT,[Yu]:t.FUNC_REVERSE_SUBTRACT};z[Ku]=t.MIN,z[Zu]=t.MAX;const V={[Ju]:t.ZERO,[$u]:t.ONE,[Qu]:t.SRC_COLOR,[eh]:t.SRC_ALPHA,[sh]:t.SRC_ALPHA_SATURATE,[oh]:t.DST_COLOR,[rh]:t.DST_ALPHA,[th]:t.ONE_MINUS_SRC_COLOR,[nh]:t.ONE_MINUS_SRC_ALPHA,[ah]:t.ONE_MINUS_DST_COLOR,[ih]:t.ONE_MINUS_DST_ALPHA,[ch]:t.CONSTANT_COLOR,[lh]:t.ONE_MINUS_CONSTANT_COLOR,[uh]:t.CONSTANT_ALPHA,[hh]:t.ONE_MINUS_CONSTANT_ALPHA};function G(e,n,r,i,o,a,s,c,l,u){if(e!==Bu){if(!1===h&&(U(t.BLEND),h=!0),e===Hu)o=o||n,a=a||r,s=s||i,n===p&&o===g||(t.blendEquationSeparate(z[n],z[o]),p=n,g=o),r===f&&i===m&&a===y&&s===v||(t.blendFuncSeparate(V[r],V[i],V[a],V[s]),f=r,m=i,y=a,v=s),!1!==c.equals(b)&&l===x||(t.blendColor(c.r,c.g,c.b,l),b.copy(c),x=l),d=e,_=!1;else if(e!==d||u!==_){if(p===qu&&g===qu||(t.blendEquation(t.FUNC_ADD),p=qu,g=qu),u)switch(e){case zu:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Vu:t.blendFunc(t.ONE,t.ONE);break;case Gu:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Wu:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case zu:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Vu:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case Gu:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Wu:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}f=null,m=null,y=null,v=null,b.set(0,0,0),x=0,d=e,_=u}}else!0===h&&(B(t.BLEND),h=!1)}function W(e){w!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),w=e)}function H(e){e!==Cu?(U(t.CULL_FACE),e!==S&&(e===ku?t.cullFace(t.BACK):e===Pu?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):B(t.CULL_FACE),S=e}function q(e,n,r){e?(U(t.POLYGON_OFFSET_FILL),E===n&&A===r||(t.polygonOffset(n,r),E=n,A=r)):B(t.POLYGON_OFFSET_FILL)}return{buffers:{color:e,depth:n,stencil:r},enable:U,disable:B,bindFramebuffer:function(e,n){return s[e]!==n&&(t.bindFramebuffer(e,n),s[e]=n,e===t.DRAW_FRAMEBUFFER&&(s[t.FRAMEBUFFER]=n),e===t.FRAMEBUFFER&&(s[t.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(e,n){let r=l,i=!1;if(e){r=c.get(n),void 0===r&&(r=[],c.set(n,r));const o=e.textures;if(r.length!==o.length||r[0]!==t.COLOR_ATTACHMENT0){for(let e=0,n=o.length;e<n;e++)r[e]=t.COLOR_ATTACHMENT0+e;r.length=o.length,i=!0}}else r[0]!==t.BACK&&(r[0]=t.BACK,i=!0);i&&t.drawBuffers(r)},useProgram:function(e){return u!==e&&(t.useProgram(e),u=e,!0)},setBlending:G,setMaterial:function(i,o){i.side===Uu?B(t.CULL_FACE):U(t.CULL_FACE);let a=i.side===ju;o&&(a=!a),W(a),i.blending===zu&&!1===i.transparent?G(Bu):G(i.blending,i.blendEquation,i.blendSrc,i.blendDst,i.blendEquationAlpha,i.blendSrcAlpha,i.blendDstAlpha,i.blendColor,i.blendAlpha,i.premultipliedAlpha),n.setFunc(i.depthFunc),n.setTest(i.depthTest),n.setMask(i.depthWrite),e.setMask(i.colorWrite);const s=i.stencilWrite;r.setTest(s),s&&(r.setMask(i.stencilWriteMask),r.setFunc(i.stencilFunc,i.stencilRef,i.stencilFuncMask),r.setOp(i.stencilFail,i.stencilZFail,i.stencilZPass)),q(i.polygonOffset,i.polygonOffsetFactor,i.polygonOffsetUnits),!0===i.alphaToCoverage?U(t.SAMPLE_ALPHA_TO_COVERAGE):B(t.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:W,setCullFace:H,setLineWidth:function(e){e!==T&&(O&&t.lineWidth(e),T=e)},setPolygonOffset:q,setScissorTest:function(e){e?U(t.SCISSOR_TEST):B(t.SCISSOR_TEST)},activeTexture:function(e){void 0===e&&(e=t.TEXTURE0+M-1),P!==e&&(t.activeTexture(e),P=e)},bindTexture:function(e,n,r){void 0===r&&(r=null===P?t.TEXTURE0+M-1:P);let i=I[r];void 0===i&&(i={type:void 0,texture:void 0},I[r]=i),i.type===e&&i.texture===n||(P!==r&&(t.activeTexture(r),P=r),t.bindTexture(e,n||j[e]),i.type=e,i.texture=n)},unbindTexture:function(){const e=I[P];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(sO){console.error("THREE.WebGLState:",sO)}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(sO){console.error("THREE.WebGLState:",sO)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(sO){console.error("THREE.WebGLState:",sO)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(sO){console.error("THREE.WebGLState:",sO)}},updateUBOMapping:function(e,n){let r=o.get(n);void 0===r&&(r=new WeakMap,o.set(n,r));let i=r.get(e);void 0===i&&(i=t.getUniformBlockIndex(n,e.name),r.set(e,i))},uniformBlockBinding:function(e,n){const r=o.get(n).get(e);i.get(n)!==r&&(t.uniformBlockBinding(n,r,e.__bindingPointIndex),i.set(n,r))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(sO){console.error("THREE.WebGLState:",sO)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(sO){console.error("THREE.WebGLState:",sO)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(sO){console.error("THREE.WebGLState:",sO)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(sO){console.error("THREE.WebGLState:",sO)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(sO){console.error("THREE.WebGLState:",sO)}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(sO){console.error("THREE.WebGLState:",sO)}},scissor:function(e){!1===D.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),D.copy(e))},viewport:function(e){!1===L.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),L.copy(e))},reset:function(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),a={},P=null,I={},s={},c=new WeakMap,l=[],u=null,h=!1,d=null,p=null,f=null,m=null,g=null,y=null,v=null,b=new xg(0,0,0),x=0,_=!1,w=null,S=null,T=null,E=null,A=null,D.set(0,0,t.canvas.width,t.canvas.height),L.set(0,0,t.canvas.width,t.canvas.height),e.reset(),n.reset(),r.reset()}}}function hx(t,e,n,r,i,o,a){const s=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),l=new Sf,u=new WeakMap;let h;const d=new WeakMap;let p=!1;try{p="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(z){}function f(t,e){return p?new OffscreenCanvas(t,e):Cf("canvas")}function m(t,e,n){let r=1;const i=B(t);if((i.width>n||i.height>n)&&(r=n/Math.max(i.width,i.height)),r<1){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&t instanceof VideoFrame){const n=Math.floor(r*i.width),o=Math.floor(r*i.height);void 0===h&&(h=f(n,o));const a=e?f(n,o):h;a.width=n,a.height=o;return a.getContext("2d").drawImage(t,0,0,n,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+i.width+"x"+i.height+") to ("+n+"x"+o+")."),a}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+i.width+"x"+i.height+")."),t}return t}function g(t){return t.generateMipmaps&&t.minFilter!==Vh&&t.minFilter!==Xh}function y(e){t.generateMipmap(e)}function v(n,r,i,o){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let s=r;if(r===t.RED&&(i===t.FLOAT&&(s=t.R32F),i===t.HALF_FLOAT&&(s=t.R16F),i===t.UNSIGNED_BYTE&&(s=t.R8)),r===t.RED_INTEGER&&(i===t.UNSIGNED_BYTE&&(s=t.R8UI),i===t.UNSIGNED_SHORT&&(s=t.R16UI),i===t.UNSIGNED_INT&&(s=t.R32UI),i===t.BYTE&&(s=t.R8I),i===t.SHORT&&(s=t.R16I),i===t.INT&&(s=t.R32I)),r===t.RG&&(i===t.FLOAT&&(s=t.RG32F),i===t.HALF_FLOAT&&(s=t.RG16F),i===t.UNSIGNED_BYTE&&(s=t.RG8)),r===t.RG_INTEGER&&(i===t.UNSIGNED_BYTE&&(s=t.RG8UI),i===t.UNSIGNED_SHORT&&(s=t.RG16UI),i===t.UNSIGNED_INT&&(s=t.RG32UI),i===t.BYTE&&(s=t.RG8I),i===t.SHORT&&(s=t.RG16I),i===t.INT&&(s=t.RG32I)),r===t.RGB&&i===t.UNSIGNED_INT_5_9_9_9_REV&&(s=t.RGB9_E5),r===t.RGBA){const e=a?Sp:Ff.getTransfer(o);i===t.FLOAT&&(s=t.RGBA32F),i===t.HALF_FLOAT&&(s=t.RGBA16F),i===t.UNSIGNED_BYTE&&(s=e===Tp?t.SRGB8_ALPHA8:t.RGBA8),i===t.UNSIGNED_SHORT_4_4_4_4&&(s=t.RGBA4),i===t.UNSIGNED_SHORT_5_5_5_1&&(s=t.RGB5_A1)}return s!==t.R16F&&s!==t.R32F&&s!==t.RG16F&&s!==t.RG32F&&s!==t.RGBA16F&&s!==t.RGBA32F||e.get("EXT_color_buffer_float"),s}function b(e,n){let r;return e?null===n||n===rd||n===cd?r=t.DEPTH24_STENCIL8:n===id?r=t.DEPTH32F_STENCIL8:n===ed&&(r=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===rd||n===cd?r=t.DEPTH_COMPONENT24:n===id?r=t.DEPTH_COMPONENT32F:n===ed&&(r=t.DEPTH_COMPONENT16),r}function x(t,e){return!0===g(t)||t.isFramebufferTexture&&t.minFilter!==Vh&&t.minFilter!==Xh?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function _(t){const e=t.target;e.removeEventListener("dispose",_),function(t){const e=r.get(t);if(void 0===e.__webglInit)return;const n=t.source,i=d.get(n);if(i){const r=i[e.__cacheKey];r.usedTimes--,0===r.usedTimes&&S(t),0===Object.keys(i).length&&d.delete(n)}r.remove(t)}(e),e.isVideoTexture&&u.delete(e)}function w(e){const n=e.target;n.removeEventListener("dispose",w),function(e){const n=r.get(e);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let r=0;r<6;r++){if(Array.isArray(n.__webglFramebuffer[r]))for(let e=0;e<n.__webglFramebuffer[r].length;e++)t.deleteFramebuffer(n.__webglFramebuffer[r][e]);else t.deleteFramebuffer(n.__webglFramebuffer[r]);n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[r])}else{if(Array.isArray(n.__webglFramebuffer))for(let e=0;e<n.__webglFramebuffer.length;e++)t.deleteFramebuffer(n.__webglFramebuffer[e]);else t.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let e=0;e<n.__webglColorRenderbuffer.length;e++)n.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(n.__webglColorRenderbuffer[e]);n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const i=e.textures;for(let o=0,s=i.length;o<s;o++){const e=r.get(i[o]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),a.memory.textures--),r.remove(i[o])}r.remove(e)}(n)}function S(e){const n=r.get(e);t.deleteTexture(n.__webglTexture);const i=e.source;delete d.get(i)[n.__cacheKey],a.memory.textures--}let T=0;function E(e,i){const o=r.get(e);if(e.isVideoTexture&&function(t){const e=a.render.frame;u.get(t)!==e&&(u.set(t,e),t.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&o.__version!==e.version){const t=e.image;if(null===t)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==t.complete)return void P(o,e,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(t.TEXTURE_2D,o.__webglTexture,t.TEXTURE0+i)}const A={[Uh]:t.REPEAT,[Bh]:t.CLAMP_TO_EDGE,[zh]:t.MIRRORED_REPEAT},M={[Vh]:t.NEAREST,[Gh]:t.NEAREST_MIPMAP_NEAREST,[Hh]:t.NEAREST_MIPMAP_LINEAR,[Xh]:t.LINEAR,[Yh]:t.LINEAR_MIPMAP_NEAREST,[Zh]:t.LINEAR_MIPMAP_LINEAR},O={[Gp]:t.NEVER,[Zp]:t.ALWAYS,[Wp]:t.LESS,[qp]:t.LEQUAL,[Hp]:t.EQUAL,[Kp]:t.GEQUAL,[Xp]:t.GREATER,[Yp]:t.NOTEQUAL};function C(n,o){if(o.type!==id||!1!==e.has("OES_texture_float_linear")||o.magFilter!==Xh&&o.magFilter!==Yh&&o.magFilter!==Hh&&o.magFilter!==Zh&&o.minFilter!==Xh&&o.minFilter!==Yh&&o.minFilter!==Hh&&o.minFilter!==Zh||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(n,t.TEXTURE_WRAP_S,A[o.wrapS]),t.texParameteri(n,t.TEXTURE_WRAP_T,A[o.wrapT]),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,A[o.wrapR]),t.texParameteri(n,t.TEXTURE_MAG_FILTER,M[o.magFilter]),t.texParameteri(n,t.TEXTURE_MIN_FILTER,M[o.minFilter]),o.compareFunction&&(t.texParameteri(n,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(n,t.TEXTURE_COMPARE_FUNC,O[o.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(o.magFilter===Vh)return;if(o.minFilter!==Hh&&o.minFilter!==Zh)return;if(o.type===id&&!1===e.has("OES_texture_float_linear"))return;if(o.anisotropy>1||r.get(o).__currentAnisotropy){const a=e.get("EXT_texture_filter_anisotropic");t.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy}}}function k(e,n){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",_));const i=n.source;let o=d.get(i);void 0===o&&(o={},d.set(i,o));const s=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.colorSpace),e.join()}(n);if(s!==e.__cacheKey){void 0===o[s]&&(o[s]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,r=!0),o[s].usedTimes++;const i=o[e.__cacheKey];void 0!==i&&(o[e.__cacheKey].usedTimes--,0===i.usedTimes&&S(n)),e.__cacheKey=s,e.__webglTexture=o[s].texture}return r}function P(e,a,s){let c=t.TEXTURE_2D;(a.isDataArrayTexture||a.isCompressedArrayTexture)&&(c=t.TEXTURE_2D_ARRAY),a.isData3DTexture&&(c=t.TEXTURE_3D);const l=k(e,a),u=a.source;n.bindTexture(c,e.__webglTexture,t.TEXTURE0+s);const h=r.get(u);if(u.version!==h.__version||!0===l){n.activeTexture(t.TEXTURE0+s);const e=Ff.getPrimaries(Ff.workingColorSpace),r=a.colorSpace===vp?null:Ff.getPrimaries(a.colorSpace),d=a.colorSpace===vp||e===r?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,a.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,a.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);let p=m(a.image,!1,i.maxTextureSize);p=U(a,p);const f=o.convert(a.format,a.colorSpace),_=o.convert(a.type);let w,S=v(a.internalFormat,f,_,a.colorSpace,a.isVideoTexture);C(c,a);const T=a.mipmaps,E=!0!==a.isVideoTexture,A=void 0===h.__version||!0===l,M=u.dataReady,O=x(a,p);if(a.isDepthTexture)S=b(a.format===gd,a.type),A&&(E?n.texStorage2D(t.TEXTURE_2D,1,S,p.width,p.height):n.texImage2D(t.TEXTURE_2D,0,S,p.width,p.height,0,f,_,null));else if(a.isDataTexture)if(T.length>0){E&&A&&n.texStorage2D(t.TEXTURE_2D,O,S,T[0].width,T[0].height);for(let e=0,r=T.length;e<r;e++)w=T[e],E?M&&n.texSubImage2D(t.TEXTURE_2D,e,0,0,w.width,w.height,f,_,w.data):n.texImage2D(t.TEXTURE_2D,e,S,w.width,w.height,0,f,_,w.data);a.generateMipmaps=!1}else E?(A&&n.texStorage2D(t.TEXTURE_2D,O,S,p.width,p.height),M&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,p.width,p.height,f,_,p.data)):n.texImage2D(t.TEXTURE_2D,0,S,p.width,p.height,0,f,_,p.data);else if(a.isCompressedTexture)if(a.isCompressedArrayTexture){E&&A&&n.texStorage3D(t.TEXTURE_2D_ARRAY,O,S,T[0].width,T[0].height,p.depth);for(let e=0,r=T.length;e<r;e++)if(w=T[e],a.format!==dd)if(null!==f)if(E){if(M)if(a.layerUpdates.size>0){for(const r of a.layerUpdates){const i=w.width*w.height;n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,r,w.width,w.height,1,f,w.data.slice(i*r,i*(r+1)),0,0)}a.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,w.width,w.height,p.depth,f,w.data,0,0)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,e,S,w.width,w.height,p.depth,0,w.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else E?M&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,w.width,w.height,p.depth,f,_,w.data):n.texImage3D(t.TEXTURE_2D_ARRAY,e,S,w.width,w.height,p.depth,0,f,_,w.data)}else{E&&A&&n.texStorage2D(t.TEXTURE_2D,O,S,T[0].width,T[0].height);for(let e=0,r=T.length;e<r;e++)w=T[e],a.format!==dd?null!==f?E?M&&n.compressedTexSubImage2D(t.TEXTURE_2D,e,0,0,w.width,w.height,f,w.data):n.compressedTexImage2D(t.TEXTURE_2D,e,S,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?M&&n.texSubImage2D(t.TEXTURE_2D,e,0,0,w.width,w.height,f,_,w.data):n.texImage2D(t.TEXTURE_2D,e,S,w.width,w.height,0,f,_,w.data)}else if(a.isDataArrayTexture)if(E){if(A&&n.texStorage3D(t.TEXTURE_2D_ARRAY,O,S,p.width,p.height,p.depth),M)if(a.layerUpdates.size>0){let e;switch(_){case t.UNSIGNED_BYTE:switch(f){case t.ALPHA:case t.LUMINANCE:e=1;break;case t.LUMINANCE_ALPHA:e=2;break;case t.RGB:e=3;break;case t.RGBA:e=4;break;default:throw new Error("Unknown texel size for format ".concat(f,"."))}break;case t.UNSIGNED_SHORT_4_4_4_4:case t.UNSIGNED_SHORT_5_5_5_1:case t.UNSIGNED_SHORT_5_6_5:e=1;break;default:throw new Error("Unknown texel size for type ".concat(_,"."))}const r=p.width*p.height*e;for(const i of a.layerUpdates)n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,i,p.width,p.height,1,f,_,p.data.slice(r*i,r*(i+1)));a.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,f,_,p.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,S,p.width,p.height,p.depth,0,f,_,p.data);else if(a.isData3DTexture)E?(A&&n.texStorage3D(t.TEXTURE_3D,O,S,p.width,p.height,p.depth),M&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,f,_,p.data)):n.texImage3D(t.TEXTURE_3D,0,S,p.width,p.height,p.depth,0,f,_,p.data);else if(a.isFramebufferTexture){if(A)if(E)n.texStorage2D(t.TEXTURE_2D,O,S,p.width,p.height);else{let e=p.width,r=p.height;for(let i=0;i<O;i++)n.texImage2D(t.TEXTURE_2D,i,S,e,r,0,f,_,null),e>>=1,r>>=1}}else if(T.length>0){if(E&&A){const e=B(T[0]);n.texStorage2D(t.TEXTURE_2D,O,S,e.width,e.height)}for(let e=0,r=T.length;e<r;e++)w=T[e],E?M&&n.texSubImage2D(t.TEXTURE_2D,e,0,0,f,_,w):n.texImage2D(t.TEXTURE_2D,e,S,f,_,w);a.generateMipmaps=!1}else if(E){if(A){const e=B(p);n.texStorage2D(t.TEXTURE_2D,O,S,e.width,e.height)}M&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,f,_,p)}else n.texImage2D(t.TEXTURE_2D,0,S,f,_,p);g(a)&&y(c),h.__version=u.version,a.onUpdate&&a.onUpdate(a)}e.__version=a.version}function I(e,i,a,c,l,u){const h=o.convert(a.format,a.colorSpace),d=o.convert(a.type),p=v(a.internalFormat,h,d,a.colorSpace);if(!r.get(i).__hasExternalTextures){const e=Math.max(1,i.width>>u),r=Math.max(1,i.height>>u);l===t.TEXTURE_3D||l===t.TEXTURE_2D_ARRAY?n.texImage3D(l,u,p,e,r,i.depth,0,h,d,null):n.texImage2D(l,u,p,e,r,0,h,d,null)}n.bindFramebuffer(t.FRAMEBUFFER,e),j(i)?s.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,c,l,r.get(a).__webglTexture,0,F(i)):(l===t.TEXTURE_2D||l>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,c,l,r.get(a).__webglTexture,u),n.bindFramebuffer(t.FRAMEBUFFER,null)}function N(e,n,r){if(t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer){const i=n.depthTexture,o=i&&i.isDepthTexture?i.type:null,a=b(n.stencilBuffer,o),c=n.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,l=F(n);j(n)?s.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,l,a,n.width,n.height):r?t.renderbufferStorageMultisample(t.RENDERBUFFER,l,a,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,a,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,c,t.RENDERBUFFER,e)}else{const e=n.textures;for(let i=0;i<e.length;i++){const a=e[i],c=o.convert(a.format,a.colorSpace),l=o.convert(a.type),u=v(a.internalFormat,c,l,a.colorSpace),h=F(n);r&&!1===j(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,h,u,n.width,n.height):j(n)?s.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,h,u,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,u,n.width,n.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function R(e){const i=r.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),E(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture,a=F(i);if(i.depthTexture.format===md)j(i)?s.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,o,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,o,0);else{if(i.depthTexture.format!==gd)throw new Error("Unknown depthTexture format");j(i)?s.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,o,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,o,0)}}(i.__webglFramebuffer,e)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=t.createRenderbuffer(),N(i.__webglDepthbuffer[r],e,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),N(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}const D=[],L=[];function F(t){return Math.min(i.maxSamples,t.samples)}function j(t){const n=r.get(t);return t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function U(t,e){const n=t.colorSpace,r=t.format,i=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||n!==xp&&n!==vp&&(Ff.getTransfer(n)===Tp?r===dd&&i===$h||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),e}function B(t){return"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement?(l.width=t.naturalWidth||t.width,l.height=t.naturalHeight||t.height):"undefined"!==typeof VideoFrame&&t instanceof VideoFrame?(l.width=t.displayWidth,l.height=t.displayHeight):(l.width=t.width,l.height=t.height),l}this.allocateTextureUnit=function(){const t=T;return t>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+i.maxTextures),T+=1,t},this.resetTextureUnits=function(){T=0},this.setTexture2D=E,this.setTexture2DArray=function(e,i){const o=r.get(e);e.version>0&&o.__version!==e.version?P(o,e,i):n.bindTexture(t.TEXTURE_2D_ARRAY,o.__webglTexture,t.TEXTURE0+i)},this.setTexture3D=function(e,i){const o=r.get(e);e.version>0&&o.__version!==e.version?P(o,e,i):n.bindTexture(t.TEXTURE_3D,o.__webglTexture,t.TEXTURE0+i)},this.setTextureCube=function(e,a){const s=r.get(e);e.version>0&&s.__version!==e.version?function(e,a,s){if(6!==a.image.length)return;const c=k(e,a),l=a.source;n.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture,t.TEXTURE0+s);const u=r.get(l);if(l.version!==u.__version||!0===c){n.activeTexture(t.TEXTURE0+s);const e=Ff.getPrimaries(Ff.workingColorSpace),r=a.colorSpace===vp?null:Ff.getPrimaries(a.colorSpace),h=a.colorSpace===vp||e===r?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,a.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,a.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const d=a.isCompressedTexture||a.image[0].isCompressedTexture,p=a.image[0]&&a.image[0].isDataTexture,f=[];for(let t=0;t<6;t++)f[t]=d||p?p?a.image[t].image:a.image[t]:m(a.image[t],!0,i.maxCubemapSize),f[t]=U(a,f[t]);const b=f[0],_=o.convert(a.format,a.colorSpace),w=o.convert(a.type),S=v(a.internalFormat,_,w,a.colorSpace),T=!0!==a.isVideoTexture,E=void 0===u.__version||!0===c,A=l.dataReady;let M,O=x(a,b);if(C(t.TEXTURE_CUBE_MAP,a),d){T&&E&&n.texStorage2D(t.TEXTURE_CUBE_MAP,O,S,b.width,b.height);for(let e=0;e<6;e++){M=f[e].mipmaps;for(let r=0;r<M.length;r++){const i=M[r];a.format!==dd?null!==_?T?A&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,0,0,i.width,i.height,_,i.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,S,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):T?A&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,0,0,i.width,i.height,_,w,i.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,S,i.width,i.height,0,_,w,i.data)}}}else{if(M=a.mipmaps,T&&E){M.length>0&&O++;const e=B(f[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,O,S,e.width,e.height)}for(let e=0;e<6;e++)if(p){T?A&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,f[e].width,f[e].height,_,w,f[e].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,S,f[e].width,f[e].height,0,_,w,f[e].data);for(let r=0;r<M.length;r++){const i=M[r].image[e].image;T?A&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,0,0,i.width,i.height,_,w,i.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,S,i.width,i.height,0,_,w,i.data)}}else{T?A&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,_,w,f[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,S,_,w,f[e]);for(let r=0;r<M.length;r++){const i=M[r];T?A&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,0,0,_,w,i.image[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,S,_,w,i.image[e])}}}g(a)&&y(t.TEXTURE_CUBE_MAP),u.__version=l.version,a.onUpdate&&a.onUpdate(a)}e.__version=a.version}(s,e,a):n.bindTexture(t.TEXTURE_CUBE_MAP,s.__webglTexture,t.TEXTURE0+a)},this.rebindTextures=function(e,n,i){const o=r.get(e);void 0!==n&&I(o.__webglFramebuffer,e,e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),void 0!==i&&R(e)},this.setupRenderTarget=function(e){const i=e.texture,s=r.get(e),c=r.get(i);e.addEventListener("dispose",w);const l=e.textures,u=!0===e.isWebGLCubeRenderTarget,h=l.length>1;if(h||(void 0===c.__webglTexture&&(c.__webglTexture=t.createTexture()),c.__version=i.version,a.memory.textures++),u){s.__webglFramebuffer=[];for(let e=0;e<6;e++)if(i.mipmaps&&i.mipmaps.length>0){s.__webglFramebuffer[e]=[];for(let n=0;n<i.mipmaps.length;n++)s.__webglFramebuffer[e][n]=t.createFramebuffer()}else s.__webglFramebuffer[e]=t.createFramebuffer()}else{if(i.mipmaps&&i.mipmaps.length>0){s.__webglFramebuffer=[];for(let e=0;e<i.mipmaps.length;e++)s.__webglFramebuffer[e]=t.createFramebuffer()}else s.__webglFramebuffer=t.createFramebuffer();if(h)for(let e=0,n=l.length;e<n;e++){const n=r.get(l[e]);void 0===n.__webglTexture&&(n.__webglTexture=t.createTexture(),a.memory.textures++)}if(e.samples>0&&!1===j(e)){s.__webglMultisampledFramebuffer=t.createFramebuffer(),s.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,s.__webglMultisampledFramebuffer);for(let n=0;n<l.length;n++){const r=l[n];s.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,s.__webglColorRenderbuffer[n]);const i=o.convert(r.format,r.colorSpace),a=o.convert(r.type),c=v(r.internalFormat,i,a,r.colorSpace,!0===e.isXRRenderTarget),u=F(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,u,c,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+n,t.RENDERBUFFER,s.__webglColorRenderbuffer[n])}t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(s.__webglDepthRenderbuffer=t.createRenderbuffer(),N(s.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(u){n.bindTexture(t.TEXTURE_CUBE_MAP,c.__webglTexture),C(t.TEXTURE_CUBE_MAP,i);for(let n=0;n<6;n++)if(i.mipmaps&&i.mipmaps.length>0)for(let r=0;r<i.mipmaps.length;r++)I(s.__webglFramebuffer[n][r],e,i,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else I(s.__webglFramebuffer[n],e,i,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);g(i)&&y(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){for(let i=0,o=l.length;i<o;i++){const o=l[i],a=r.get(o);n.bindTexture(t.TEXTURE_2D,a.__webglTexture),C(t.TEXTURE_2D,o),I(s.__webglFramebuffer,e,o,t.COLOR_ATTACHMENT0+i,t.TEXTURE_2D,0),g(o)&&y(t.TEXTURE_2D)}n.unbindTexture()}else{let r=t.TEXTURE_2D;if((e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(r=e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(r,c.__webglTexture),C(r,i),i.mipmaps&&i.mipmaps.length>0)for(let n=0;n<i.mipmaps.length;n++)I(s.__webglFramebuffer[n],e,i,t.COLOR_ATTACHMENT0,r,n);else I(s.__webglFramebuffer,e,i,t.COLOR_ATTACHMENT0,r,0);g(i)&&y(r),n.unbindTexture()}e.depthBuffer&&R(e)},this.updateRenderTargetMipmap=function(e){const i=e.textures;for(let o=0,a=i.length;o<a;o++){const a=i[o];if(g(a)){const i=e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,o=r.get(a).__webglTexture;n.bindTexture(i,o),y(i),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(e.samples>0)if(!1===j(e)){const i=e.textures,o=e.width,a=e.height;let s=t.COLOR_BUFFER_BIT;const l=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,u=r.get(e),h=i.length>1;if(h)for(let e=0;e<i.length;e++)n.bindFramebuffer(t.FRAMEBUFFER,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,u.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<i.length;n++){if(e.resolveDepthBuffer&&(e.depthBuffer&&(s|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&e.resolveStencilBuffer&&(s|=t.STENCIL_BUFFER_BIT)),h){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,u.__webglColorRenderbuffer[n]);const e=r.get(i[n]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}t.blitFramebuffer(0,0,o,a,0,0,o,a,s,t.NEAREST),!0===c&&(D.length=0,L.length=0,D.push(t.COLOR_ATTACHMENT0+n),e.depthBuffer&&!1===e.resolveDepthBuffer&&(D.push(l),L.push(l),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,L)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,D))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),h)for(let e=0;e<i.length;e++){n.bindFramebuffer(t.FRAMEBUFFER,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,u.__webglColorRenderbuffer[e]);const o=r.get(i[e]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,u.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,o,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else if(e.depthBuffer&&!1===e.resolveDepthBuffer&&c){const n=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=R,this.setupFrameBufferTexture=I,this.useMultisampledRTT=j}function dx(t,e){return{convert:function(n){let r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vp;const o=Ff.getTransfer(i);if(n===$h)return t.UNSIGNED_BYTE;if(n===ad)return t.UNSIGNED_SHORT_4_4_4_4;if(n===sd)return t.UNSIGNED_SHORT_5_5_5_1;if(n===ld)return t.UNSIGNED_INT_5_9_9_9_REV;if(n===Qh)return t.BYTE;if(n===td)return t.SHORT;if(n===ed)return t.UNSIGNED_SHORT;if(n===nd)return t.INT;if(n===rd)return t.UNSIGNED_INT;if(n===id)return t.FLOAT;if(n===od)return t.HALF_FLOAT;if(n===ud)return t.ALPHA;if(n===hd)return t.RGB;if(n===dd)return t.RGBA;if(n===pd)return t.LUMINANCE;if(n===fd)return t.LUMINANCE_ALPHA;if(n===md)return t.DEPTH_COMPONENT;if(n===gd)return t.DEPTH_STENCIL;if(n===yd)return t.RED;if(n===vd)return t.RED_INTEGER;if(n===bd)return t.RG;if(n===xd)return t.RG_INTEGER;if(n===_d)return t.RGBA_INTEGER;if(n===wd||n===Sd||n===Td||n===Ed)if(o===Tp){if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===wd)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Sd)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Td)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Ed)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=e.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===wd)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Sd)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Td)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Ed)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Ad||n===Md||n===Od||n===Cd){if(r=e.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===Ad)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Md)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Od)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Cd)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===kd||n===Pd||n===Id){if(r=e.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===kd||n===Pd)return o===Tp?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===Id)return o===Tp?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===Nd||n===Rd||n===Dd||n===Ld||n===Fd||n===jd||n===Ud||n===Bd||n===zd||n===Vd||n===Gd||n===Wd||n===Hd||n===qd){if(r=e.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===Nd)return o===Tp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Rd)return o===Tp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Dd)return o===Tp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Ld)return o===Tp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Fd)return o===Tp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===jd)return o===Tp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Ud)return o===Tp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Bd)return o===Tp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===zd)return o===Tp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Vd)return o===Tp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Gd)return o===Tp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Wd)return o===Tp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Hd)return o===Tp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===qd)return o===Tp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Xd||n===Yd||n===Kd){if(r=e.get("EXT_texture_compression_bptc"),null===r)return null;if(n===Xd)return o===Tp?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Yd)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Kd)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===Zd||n===Jd||n===$d||n===Qd){if(r=e.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===Xd)return r.COMPRESSED_RED_RGTC1_EXT;if(n===Jd)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===$d)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Qd)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===cd?t.UNSIGNED_INT_24_8:void 0!==t[n]?t[n]:null}}}class px extends Ey{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=t}}class fx extends ig{constructor(){super(),this.isGroup=!0,this.type="Group"}}const mx={type:"move"};class gx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new fx,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new fx,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new em,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new em),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new fx,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new em,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new em),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,c=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(c&&t.hand){o=!0;for(const o of t.hand.values()){const t=e.getJointPose(o,n),r=this._getHandJoint(c,o);null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=t.radius),r.visible=null!==t}const r=c.joints["index-finger-tip"],i=c.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,l=.005;c.inputState.pinching&&a>s+l?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!c.inputState.pinching&&a<=s-l&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==s&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(mx)))}return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==c&&(c.visible=null!==o),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new fx;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class yx{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(null===this.texture){const r=new qf;t.properties.get(r).__webglTexture=e.texture,e.depthNear==n.depthNear&&e.depthFar==n.depthFar||(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(t){if(null!==this.texture&&null===this.mesh){const e=t.cameras[0].viewport,n=new xy({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new py(new Uy(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}}class vx extends hf{constructor(t,e){super();const n=this;let r=null,i=1,o=null,a="local-floor",s=1,c=null,l=null,u=null,h=null,d=null,p=null;const f=new yx,m=e.getContextAttributes();let g=null,y=null;const v=[],b=[],x=new Sf;let _=null;const w=new Ey;w.layers.enable(1),w.viewport=new Xf;const S=new Ey;S.layers.enable(2),S.viewport=new Xf;const T=[w,S],E=new px;E.layers.enable(1),E.layers.enable(2);let A=null,M=null;function O(t){const e=b.indexOf(t.inputSource);if(-1===e)return;const n=v[e];void 0!==n&&(n.update(t.inputSource,t.frame,c||o),n.dispatchEvent({type:t.type,data:t.inputSource}))}function C(){r.removeEventListener("select",O),r.removeEventListener("selectstart",O),r.removeEventListener("selectend",O),r.removeEventListener("squeeze",O),r.removeEventListener("squeezestart",O),r.removeEventListener("squeezeend",O),r.removeEventListener("end",C),r.removeEventListener("inputsourceschange",k);for(let t=0;t<v.length;t++){const e=b[t];null!==e&&(b[t]=null,v[t].disconnect(e))}A=null,M=null,f.reset(),t.setRenderTarget(g),d=null,h=null,u=null,r=null,y=null,D.stop(),n.isPresenting=!1,t.setPixelRatio(_),t.setSize(x.width,x.height,!1),n.dispatchEvent({type:"sessionend"})}function k(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],r=b.indexOf(n);r>=0&&(b[r]=null,v[r].disconnect(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let r=b.indexOf(n);if(-1===r){for(let t=0;t<v.length;t++){if(t>=b.length){b.push(n),r=t;break}if(null===b[t]){b[t]=n,r=t;break}}if(-1===r)break}const i=v[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=v[t];return void 0===e&&(e=new gx,v[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=v[t];return void 0===e&&(e=new gx,v[t]=e),e.getGripSpace()},this.getHand=function(t){let e=v[t];return void 0===e&&(e=new gx,v[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(t){c=t},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(g=t.getRenderTarget(),r.addEventListener("select",O),r.addEventListener("selectstart",O),r.addEventListener("selectend",O),r.addEventListener("squeeze",O),r.addEventListener("squeezestart",O),r.addEventListener("squeezeend",O),r.addEventListener("end",C),r.addEventListener("inputsourceschange",k),!0!==m.xrCompatible&&await e.makeXRCompatible(),_=t.getPixelRatio(),t.getSize(x),void 0===r.renderState.layers){const n={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,e,n),r.updateRenderState({baseLayer:d}),t.setPixelRatio(1),t.setSize(d.framebufferWidth,d.framebufferHeight,!1),y=new Kf(d.framebufferWidth,d.framebufferHeight,{format:dd,type:$h,colorSpace:t.outputColorSpace,stencilBuffer:m.stencil})}else{let n=null,o=null,a=null;m.depth&&(a=m.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,n=m.stencil?gd:md,o=m.stencil?cd:rd);const s={colorFormat:e.RGBA8,depthFormat:a,scaleFactor:i};u=new XRWebGLBinding(r,e),h=u.createProjectionLayer(s),r.updateRenderState({layers:[h]}),t.setPixelRatio(1),t.setSize(h.textureWidth,h.textureHeight,!1),y=new Kf(h.textureWidth,h.textureHeight,{format:dd,type:$h,depthTexture:new wv(h.textureWidth,h.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:m.stencil,colorSpace:t.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:!1===h.ignoreDepthValues})}y.isXRRenderTarget=!0,this.setFoveation(s),c=null,o=await r.requestReferenceSpace(a),D.setContext(r),D.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const P=new em,I=new em;function N(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===r)return;null!==f.texture&&(t.near=f.depthNear,t.far=f.depthFar),E.near=S.near=w.near=t.near,E.far=S.far=w.far=t.far,A===E.near&&M===E.far||(r.updateRenderState({depthNear:E.near,depthFar:E.far}),A=E.near,M=E.far,w.near=A,w.far=M,S.near=A,S.far=M,w.updateProjectionMatrix(),S.updateProjectionMatrix(),t.updateProjectionMatrix());const e=t.parent,n=E.cameras;N(E,e);for(let r=0;r<n.length;r++)N(n[r],e);2===n.length?function(t,e,n){P.setFromMatrixPosition(e.matrixWorld),I.setFromMatrixPosition(n.matrixWorld);const r=P.distanceTo(I),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),c=(i[9]+1)/i[5],l=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*u,p=a*h,f=r/(-u+h),m=f*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=a+f,y=s+f,v=d-m,b=p+(r-m),x=c*s/y*g,_=l*s/y*g;t.projectionMatrix.makePerspective(v,b,x,_,g,y),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}(E,w,S):E.projectionMatrix.copy(w.projectionMatrix),function(t,e,n){null===n?t.matrix.copy(e.matrixWorld):(t.matrix.copy(n.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld));t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*mf*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(t,E,e)},this.getCamera=function(){return E},this.getFoveation=function(){if(null!==h||null!==d)return s},this.setFoveation=function(t){s=t,null!==h&&(h.fixedFoveation=t),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=t)},this.hasDepthSensing=function(){return null!==f.texture},this.getDepthSensingMesh=function(){return f.getMesh(E)};let R=null;const D=new Fy;D.setAnimationLoop((function(e,i){if(l=i.getViewerPose(c||o),p=i,null!==l){const e=l.views;null!==d&&(t.setRenderTargetFramebuffer(y,d.framebuffer),t.setRenderTarget(y));let n=!1;e.length!==E.cameras.length&&(E.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const i=e[r];let o=null;if(null!==d)o=d.getViewport(i);else{const e=u.getViewSubImage(h,i);o=e.viewport,0===r&&(t.setRenderTargetTextures(y,e.colorTexture,h.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(y))}let a=T[r];void 0===a&&(a=new Ey,a.layers.enable(r),a.viewport=new Xf,T[r]=a),a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(i.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&(E.matrix.copy(a.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),!0===n&&E.cameras.push(a)}const i=r.enabledFeatures;if(i&&i.includes("depth-sensing")){const n=u.getDepthInformation(e[0]);n&&n.isValid&&n.texture&&f.init(t,n,r.renderState)}}for(let t=0;t<v.length;t++){const e=b[t],n=v[t];null!==e&&void 0!==n&&n.update(e,i,c||o)}R&&R(e,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),p=null})),this.setAnimationLoop=function(t){R=t},this.dispose=function(){}}}const bx=new zm,xx=new Pm;function _x(t,e){function n(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function r(t,r){t.opacity.value=r.opacity,r.color&&t.diffuse.value.copy(r.color),r.emissive&&t.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(t.map.value=r.map,n(r.map,t.mapTransform)),r.alphaMap&&(t.alphaMap.value=r.alphaMap,n(r.alphaMap,t.alphaMapTransform)),r.bumpMap&&(t.bumpMap.value=r.bumpMap,n(r.bumpMap,t.bumpMapTransform),t.bumpScale.value=r.bumpScale,r.side===ju&&(t.bumpScale.value*=-1)),r.normalMap&&(t.normalMap.value=r.normalMap,n(r.normalMap,t.normalMapTransform),t.normalScale.value.copy(r.normalScale),r.side===ju&&t.normalScale.value.negate()),r.displacementMap&&(t.displacementMap.value=r.displacementMap,n(r.displacementMap,t.displacementMapTransform),t.displacementScale.value=r.displacementScale,t.displacementBias.value=r.displacementBias),r.emissiveMap&&(t.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,t.emissiveMapTransform)),r.specularMap&&(t.specularMap.value=r.specularMap,n(r.specularMap,t.specularMapTransform)),r.alphaTest>0&&(t.alphaTest.value=r.alphaTest);const i=e.get(r),o=i.envMap,a=i.envMapRotation;o&&(t.envMap.value=o,bx.copy(a),bx.x*=-1,bx.y*=-1,bx.z*=-1,o.isCubeTexture&&!1===o.isRenderTargetTexture&&(bx.y*=-1,bx.z*=-1),t.envMapRotation.value.setFromMatrix4(xx.makeRotationFromEuler(bx)),t.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,t.reflectivity.value=r.reflectivity,t.ior.value=r.ior,t.refractionRatio.value=r.refractionRatio),r.lightMap&&(t.lightMap.value=r.lightMap,t.lightMapIntensity.value=r.lightMapIntensity,n(r.lightMap,t.lightMapTransform)),r.aoMap&&(t.aoMap.value=r.aoMap,t.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,t.aoMapTransform))}return{refreshFogUniforms:function(e,n){n.color.getRGB(e.fogColor.value,vy(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)},refreshMaterialUniforms:function(t,i,o,a,s){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(t,i):i.isMeshToonMaterial?(r(t,i),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,i)):i.isMeshPhongMaterial?(r(t,i),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,i)):i.isMeshStandardMaterial?(r(t,i),function(t,e){t.metalness.value=e.metalness,e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap,n(e.metalnessMap,t.metalnessMapTransform));t.roughness.value=e.roughness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap,n(e.roughnessMap,t.roughnessMapTransform));e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}(t,i),i.isMeshPhysicalMaterial&&function(t,e,r){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,n(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,n(e.sheenRoughnessMap,t.sheenRoughnessMapTransform)));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,n(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,n(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,n(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),e.side===ju&&t.clearcoatNormalScale.value.negate()));e.dispersion>0&&(t.dispersion.value=e.dispersion);e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,n(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,n(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform)));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=r.texture,t.transmissionSamplerSize.value.set(r.width,r.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,n(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,n(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));e.anisotropy>0&&(t.anisotropyVector.value.set(e.anisotropy*Math.cos(e.anisotropyRotation),e.anisotropy*Math.sin(e.anisotropyRotation)),e.anisotropyMap&&(t.anisotropyMap.value=e.anisotropyMap,n(e.anisotropyMap,t.anisotropyMapTransform)));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,n(e.specularColorMap,t.specularColorMapTransform));e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,n(e.specularIntensityMap,t.specularIntensityMapTransform))}(t,i,s)):i.isMeshMatcapMaterial?(r(t,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,i)):i.isMeshDepthMaterial?r(t,i):i.isMeshDistanceMaterial?(r(t,i),function(t,n){const r=e.get(n).light;t.referencePosition.value.setFromMatrixPosition(r.matrixWorld),t.nearDistance.value=r.shadow.camera.near,t.farDistance.value=r.shadow.camera.far}(t,i)):i.isMeshNormalMaterial?r(t,i):i.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform))}(t,i),i.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,i)):i.isPointsMaterial?function(t,e,r,i){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*r,t.scale.value=.5*i,e.map&&(t.map.value=e.map,n(e.map,t.uvTransform));e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform));e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,i,o,a):i.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform));e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform));e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,i):i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function wx(t,e,n,r){let i={},o={},a=[];const s=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function c(t,e,n,r){const i=t.value,o=e+"_"+n;if(void 0===r[o])return r[o]="number"===typeof i||"boolean"===typeof i?i:i.clone(),!0;{const t=r[o];if("number"===typeof i||"boolean"===typeof i){if(t!==i)return r[o]=i,!0}else if(!1===t.equals(i))return t.copy(i),!0}return!1}function l(t){const e={boundary:0,storage:0};return"number"===typeof t||"boolean"===typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function u(e){const n=e.target;n.removeEventListener("dispose",u);const r=a.indexOf(n.__bindingPointIndex);a.splice(r,1),t.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}return{bind:function(t,e){const n=e.program;r.uniformBlockBinding(t,n)},update:function(n,h){let d=i[n.id];void 0===d&&(!function(t){const e=t.uniforms;let n=0;const r=16;for(let o=0,a=e.length;o<a;o++){const t=Array.isArray(e[o])?e[o]:[e[o]];for(let e=0,i=t.length;e<i;e++){const i=t[e],o=Array.isArray(i.value)?i.value:[i.value];for(let t=0,e=o.length;t<e;t++){const e=l(o[t]),a=n%r;0!==a&&r-a<e.boundary&&(n+=r-a),i.__data=new Float32Array(e.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,n+=e.storage}}}const i=n%r;i>0&&(n+=r-i);t.__size=n,t.__cache={}}(n),d=function(e){const n=function(){for(let t=0;t<s;t++)if(-1===a.indexOf(t))return a.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=n;const r=t.createBuffer(),i=e.__size,o=e.usage;return t.bindBuffer(t.UNIFORM_BUFFER,r),t.bufferData(t.UNIFORM_BUFFER,i,o),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",u));const p=h.program;r.updateUBOMapping(n,p);const f=e.render.frame;o[n.id]!==f&&(!function(e){const n=i[e.id],r=e.uniforms,o=e.__cache;t.bindBuffer(t.UNIFORM_BUFFER,n);for(let i=0,a=r.length;i<a;i++){const e=Array.isArray(r[i])?r[i]:[r[i]];for(let n=0,r=e.length;n<r;n++){const r=e[n];if(!0===c(r,i,n,o)){const e=r.__offset,n=Array.isArray(r.value)?r.value:[r.value];let i=0;for(let o=0;o<n.length;o++){const a=n[o],s=l(a);"number"===typeof a||"boolean"===typeof a?(r.__data[0]=a,t.bufferSubData(t.UNIFORM_BUFFER,e+i,r.__data)):a.isMatrix3?(r.__data[0]=a.elements[0],r.__data[1]=a.elements[1],r.__data[2]=a.elements[2],r.__data[3]=0,r.__data[4]=a.elements[3],r.__data[5]=a.elements[4],r.__data[6]=a.elements[5],r.__data[7]=0,r.__data[8]=a.elements[6],r.__data[9]=a.elements[7],r.__data[10]=a.elements[8],r.__data[11]=0):(a.toArray(r.__data,i),i+=s.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,e,r.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}(n),o[n.id]=f)},dispose:function(){for(const e in i)t.deleteBuffer(i[e]);a=[],i={},o={}}}}class Sx{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:e=kf(),context:n=null,depth:r=!0,stencil:i=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:s=!0,preserveDrawingBuffer:c=!1,powerPreference:l="default",failIfMajorPerformanceCaveat:u=!1}=t;let h;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!==typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=n.getContextAttributes().alpha}else h=o;const d=new Uint32Array(4),p=new Int32Array(4);let f=null,m=null;const g=[],y=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=bp,this.toneMapping=Sh,this.toneMappingExposure=1;const v=this;let b=!1,x=0,_=0,w=null,S=-1,T=null;const E=new Xf,A=new Xf;let M=null;const O=new xg(0);let C=0,k=e.width,P=e.height,I=1,N=null,R=null;const D=new Xf(0,0,k,P),L=new Xf(0,0,k,P);let F=!1;const j=new Ly;let U=!1,B=!1;const z=new Pm,V=new em,G={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let W=!1;function H(){return null===w?I:1}let q,X,Y,K,Z,J,$,Q,tt,et,nt,rt,it,ot,at,st,ct,lt,ut,ht,dt,pt,ft,mt,gt=n;function yt(t,n){return e.getContext(t,n)}try{const t={alpha:!0,depth:r,stencil:i,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r".concat(Au)),e.addEventListener("webglcontextlost",xt,!1),e.addEventListener("webglcontextrestored",_t,!1),e.addEventListener("webglcontextcreationerror",wt,!1),null===gt){const e="webgl2";if(gt=yt(e,t),null===gt)throw yt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(sO){throw console.error("THREE.WebGLRenderer: "+sO.message),sO}function vt(){q=new gv(gt),q.init(),pt=new dx(gt,q),X=new Ky(gt,q,t,pt),Y=new ux(gt),K=new bv(gt),Z=new Zb,J=new hx(gt,q,Y,Z,X,pt,K),$=new Jy(v),Q=new mv(v),tt=new jy(gt),ft=new Xy(gt,tt),et=new yv(gt,tt,K,ft),nt=new _v(gt,et,tt,K),ut=new xv(gt,X,J),st=new Zy(Z),rt=new Kb(v,$,Q,q,X,ft,st),it=new _x(v,Z),ot=new tx,at=new ax(q),lt=new qy(v,$,Q,Y,nt,h,s),ct=new lx(v,nt,X),mt=new wx(gt,K,X,Y),ht=new Yy(gt,q,K),dt=new vv(gt,q,K),K.programs=rt.programs,v.capabilities=X,v.extensions=q,v.properties=Z,v.renderLists=ot,v.shadowMap=ct,v.state=Y,v.info=K}vt();const bt=new vx(v,gt);function xt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function _t(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const t=K.autoReset,e=ct.enabled,n=ct.autoUpdate,r=ct.needsUpdate,i=ct.type;vt(),K.autoReset=t,ct.enabled=e,ct.autoUpdate=n,ct.needsUpdate=r,ct.type=i}function wt(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function St(t){const e=t.target;e.removeEventListener("dispose",St),function(t){(function(t){const e=Z.get(t).programs;void 0!==e&&(e.forEach((function(t){rt.releaseProgram(t)})),t.isShaderMaterial&&rt.releaseShaderCache(t))})(t),Z.remove(t)}(e)}function Tt(t,e,n){!0===t.transparent&&t.side===Uu&&!1===t.forceSinglePass?(t.side=ju,t.needsUpdate=!0,Rt(t,e,n),t.side=Fu,t.needsUpdate=!0,Rt(t,e,n),t.side=Uu):Rt(t,e,n)}this.xr=bt,this.getContext=function(){return gt},this.getContextAttributes=function(){return gt.getContextAttributes()},this.forceContextLoss=function(){const t=q.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=q.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(t){void 0!==t&&(I=t,this.setSize(k,P,!1))},this.getSize=function(t){return t.set(k,P)},this.setSize=function(t,n){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];bt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(k=t,P=n,e.width=Math.floor(t*I),e.height=Math.floor(n*I),!0===r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(k*I,P*I).floor()},this.setDrawingBufferSize=function(t,n,r){k=t,P=n,I=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(E)},this.getViewport=function(t){return t.copy(D)},this.setViewport=function(t,e,n,r){t.isVector4?D.set(t.x,t.y,t.z,t.w):D.set(t,e,n,r),Y.viewport(E.copy(D).multiplyScalar(I).round())},this.getScissor=function(t){return t.copy(L)},this.setScissor=function(t,e,n,r){t.isVector4?L.set(t.x,t.y,t.z,t.w):L.set(t,e,n,r),Y.scissor(A.copy(L).multiplyScalar(I).round())},this.getScissorTest=function(){return F},this.setScissorTest=function(t){Y.setScissorTest(F=t)},this.setOpaqueSort=function(t){N=t},this.setTransparentSort=function(t){R=t},this.getClearColor=function(t){return t.copy(lt.getClearColor())},this.setClearColor=function(){lt.setClearColor.apply(lt,arguments)},this.getClearAlpha=function(){return lt.getClearAlpha()},this.setClearAlpha=function(){lt.setClearAlpha.apply(lt,arguments)},this.clear=function(){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let t=!1;if(null!==w){const e=w.texture.format;t=e===_d||e===xd||e===vd}if(t){const t=w.texture.type,e=t===$h||t===rd||t===ed||t===cd||t===ad||t===sd,n=lt.getClearColor(),r=lt.getClearAlpha(),i=n.r,o=n.g,a=n.b;e?(d[0]=i,d[1]=o,d[2]=a,d[3]=r,gt.clearBufferuiv(gt.COLOR,0,d)):(p[0]=i,p[1]=o,p[2]=a,p[3]=r,gt.clearBufferiv(gt.COLOR,0,p))}else n|=gt.COLOR_BUFFER_BIT}t&&(n|=gt.DEPTH_BUFFER_BIT),e&&(n|=gt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),gt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",xt,!1),e.removeEventListener("webglcontextrestored",_t,!1),e.removeEventListener("webglcontextcreationerror",wt,!1),ot.dispose(),at.dispose(),Z.dispose(),$.dispose(),Q.dispose(),nt.dispose(),ft.dispose(),mt.dispose(),rt.dispose(),bt.dispose(),bt.removeEventListener("sessionstart",At),bt.removeEventListener("sessionend",Mt),Ot.stop()},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=G);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=function(t,e,n,r,i){!0!==e.isScene&&(e=G);J.resetTextureUnits();const o=e.fog,a=r.isMeshStandardMaterial?e.environment:null,s=null===w?v.outputColorSpace:!0===w.isXRRenderTarget?w.texture.colorSpace:xp,c=(r.isMeshStandardMaterial?Q:$).get(r.envMap||a),l=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let f=Sh;r.toneMapped&&(null!==w&&!0!==w.isXRRenderTarget||(f=v.toneMapping));const g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==g?g.length:0,b=Z.get(r),x=m.state.lights;if(!0===U&&(!0===B||t!==T)){const e=t===T&&r.id===S;st.setState(r,t,e)}let _=!1;r.version===b.__version?b.needsLights&&b.lightsStateVersion!==x.state.version||b.outputColorSpace!==s||i.isBatchedMesh&&!1===b.batching?_=!0:i.isBatchedMesh||!0!==b.batching?i.isBatchedMesh&&!0===b.batchingColor&&null===i.colorTexture||i.isBatchedMesh&&!1===b.batchingColor&&null!==i.colorTexture||i.isInstancedMesh&&!1===b.instancing?_=!0:i.isInstancedMesh||!0!==b.instancing?i.isSkinnedMesh&&!1===b.skinning?_=!0:i.isSkinnedMesh||!0!==b.skinning?i.isInstancedMesh&&!0===b.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===b.instancingColor&&null!==i.instanceColor||i.isInstancedMesh&&!0===b.instancingMorph&&null===i.morphTexture||i.isInstancedMesh&&!1===b.instancingMorph&&null!==i.morphTexture||b.envMap!==c||!0===r.fog&&b.fog!==o?_=!0:void 0===b.numClippingPlanes||b.numClippingPlanes===st.numPlanes&&b.numIntersection===st.numIntersection?(b.vertexAlphas!==l||b.vertexTangents!==u||b.morphTargets!==h||b.morphNormals!==d||b.morphColors!==p||b.toneMapping!==f||b.morphTargetsCount!==y)&&(_=!0):_=!0:_=!0:_=!0:_=!0:(_=!0,b.__version=r.version);let E=b.currentProgram;!0===_&&(E=Rt(r,e,i));let A=!1,M=!1,O=!1;const C=E.getUniforms(),k=b.uniforms;Y.useProgram(E.program)&&(A=!0,M=!0,O=!0);r.id!==S&&(S=r.id,M=!0);if(A||T!==t){C.setValue(gt,"projectionMatrix",t.projectionMatrix),C.setValue(gt,"viewMatrix",t.matrixWorldInverse);const e=C.map.cameraPosition;void 0!==e&&e.setValue(gt,V.setFromMatrixPosition(t.matrixWorld)),X.logarithmicDepthBuffer&&C.setValue(gt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&C.setValue(gt,"isOrthographic",!0===t.isOrthographicCamera),T!==t&&(T=t,M=!0,O=!0)}if(i.isSkinnedMesh){C.setOptional(gt,i,"bindMatrix"),C.setOptional(gt,i,"bindMatrixInverse");const t=i.skeleton;t&&(null===t.boneTexture&&t.computeBoneTexture(),C.setValue(gt,"boneTexture",t.boneTexture,J))}i.isBatchedMesh&&(C.setOptional(gt,i,"batchingTexture"),C.setValue(gt,"batchingTexture",i._matricesTexture,J),C.setOptional(gt,i,"batchingColorTexture"),null!==i._colorsTexture&&C.setValue(gt,"batchingColorTexture",i._colorsTexture,J));const N=n.morphAttributes;void 0===N.position&&void 0===N.normal&&void 0===N.color||ut.update(i,n,E);(M||b.receiveShadow!==i.receiveShadow)&&(b.receiveShadow=i.receiveShadow,C.setValue(gt,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(k.envMap.value=c,k.flipEnvMap.value=c.isCubeTexture&&!1===c.isRenderTargetTexture?-1:1);r.isMeshStandardMaterial&&null===r.envMap&&null!==e.environment&&(k.envMapIntensity.value=e.environmentIntensity);M&&(C.setValue(gt,"toneMappingExposure",v.toneMappingExposure),b.needsLights&&function(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}(k,O),o&&!0===r.fog&&it.refreshFogUniforms(k,o),it.refreshMaterialUniforms(k,r,I,P,m.state.transmissionRenderTarget[t.id]),Mb.upload(gt,Dt(b),k,J));r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Mb.upload(gt,Dt(b),k,J),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&C.setValue(gt,"center",i.center);if(C.setValue(gt,"modelViewMatrix",i.modelViewMatrix),C.setValue(gt,"normalMatrix",i.normalMatrix),C.setValue(gt,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const t=r.uniformsGroups;for(let e=0,n=t.length;e<n;e++){const n=t[e];mt.update(n,E),mt.bind(n,E)}}return E}(t,e,n,r,i);Y.setMaterial(r,a);let c=n.index,l=1;if(!0===r.wireframe){if(c=et.getWireframeAttribute(n),void 0===c)return;l=2}const u=n.drawRange,h=n.attributes.position;let d=u.start*l,p=(u.start+u.count)*l;null!==o&&(d=Math.max(d,o.start*l),p=Math.min(p,(o.start+o.count)*l)),null!==c?(d=Math.max(d,0),p=Math.min(p,c.count)):void 0!==h&&null!==h&&(d=Math.max(d,0),p=Math.min(p,h.count));const f=p-d;if(f<0||f===1/0)return;let g;ft.setup(i,r,s,n,c);let y=ht;if(null!==c&&(g=tt.get(c),y=dt,y.setIndex(g)),i.isMesh)!0===r.wireframe?(Y.setLineWidth(r.wireframeLinewidth*H()),y.setMode(gt.LINES)):y.setMode(gt.TRIANGLES);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),Y.setLineWidth(t*H()),i.isLineSegments?y.setMode(gt.LINES):i.isLineLoop?y.setMode(gt.LINE_LOOP):y.setMode(gt.LINE_STRIP)}else i.isPoints?y.setMode(gt.POINTS):i.isSprite&&y.setMode(gt.TRIANGLES);if(i.isBatchedMesh)null!==i._multiDrawInstances?y.renderMultiDrawInstances(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount,i._multiDrawInstances):y.renderMultiDraw(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount);else if(i.isInstancedMesh)y.renderInstances(d,f,i.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);y.renderInstances(d,f,e)}else y.render(d,f)},this.compile=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=t),m=at.get(n),m.init(e),y.push(m),n.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(m.pushLight(t),t.castShadow&&m.pushShadow(t))})),t!==n&&t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(m.pushLight(t),t.castShadow&&m.pushShadow(t))})),m.setupLights();const r=new Set;return t.traverse((function(t){const e=t.material;if(e)if(Array.isArray(e))for(let i=0;i<e.length;i++){const o=e[i];Tt(o,n,t),r.add(o)}else Tt(e,n,t),r.add(e)})),y.pop(),m=null,r},this.compileAsync=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=this.compile(t,e,n);return new Promise((e=>{function n(){r.forEach((function(t){Z.get(t).currentProgram.isReady()&&r.delete(t)})),0!==r.size?setTimeout(n,10):e(t)}null!==q.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let Et=null;function At(){Ot.stop()}function Mt(){Ot.start()}const Ot=new Fy;function Ct(t,e,n,r){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)m.pushLight(t),t.castShadow&&m.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||j.intersectsSprite(t)){r&&V.setFromMatrixPosition(t.matrixWorld).applyMatrix4(z);const e=nt.update(t),i=t.material;i.visible&&f.push(t,e,i,n,V.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||j.intersectsObject(t))){const e=nt.update(t),i=t.material;if(r&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),V.copy(t.boundingSphere.center)):(null===e.boundingSphere&&e.computeBoundingSphere(),V.copy(e.boundingSphere.center)),V.applyMatrix4(t.matrixWorld).applyMatrix4(z)),Array.isArray(i)){const r=e.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&f.push(t,e,s,n,V.z,a)}}else i.visible&&f.push(t,e,i,n,V.z,null)}const i=t.children;for(let o=0,a=i.length;o<a;o++)Ct(i[o],e,n,r)}function kt(t,e,n,r){const i=t.opaque,o=t.transmissive,a=t.transparent;m.setupLightsView(n),!0===U&&st.setGlobalState(v.clippingPlanes,n),r&&Y.viewport(E.copy(r)),i.length>0&&It(i,e,n),o.length>0&&It(o,e,n),a.length>0&&It(a,e,n),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1)}function Pt(t,e,n,r){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===m.state.transmissionRenderTarget[r.id]&&(m.state.transmissionRenderTarget[r.id]=new Kf(1,1,{generateMipmaps:!0,type:q.has("EXT_color_buffer_half_float")||q.has("EXT_color_buffer_float")?od:$h,minFilter:Zh,samples:4,stencilBuffer:i,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ff.workingColorSpace}));const o=m.state.transmissionRenderTarget[r.id],a=r.viewport||E;o.setSize(a.z,a.w);const s=v.getRenderTarget();v.setRenderTarget(o),v.getClearColor(O),C=v.getClearAlpha(),C<1&&v.setClearColor(16777215,.5),W?lt.render(n):v.clear();const c=v.toneMapping;v.toneMapping=Sh;const l=r.viewport;if(void 0!==r.viewport&&(r.viewport=void 0),m.setupLightsView(r),!0===U&&st.setGlobalState(v.clippingPlanes,r),It(t,n,r),J.updateMultisampleRenderTarget(o),J.updateRenderTargetMipmap(o),!1===q.has("WEBGL_multisampled_render_to_texture")){let t=!1;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=o.object,s=o.geometry,c=o.material,l=o.group;if(c.side===Uu&&a.layers.test(r.layers)){const e=c.side;c.side=ju,c.needsUpdate=!0,Nt(a,n,r,s,c,l),c.side=e,c.needsUpdate=!0,t=!0}}!0===t&&(J.updateMultisampleRenderTarget(o),J.updateRenderTargetMipmap(o))}v.setRenderTarget(s),v.setClearColor(O,C),void 0!==l&&(r.viewport=l),v.toneMapping=c}function It(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=o.object,s=o.geometry,c=null===r?o.material:r,l=o.group;a.layers.test(n.layers)&&Nt(a,e,n,s,c,l)}}function Nt(t,e,n,r,i,o){t.onBeforeRender(v,e,n,r,i,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),i.onBeforeRender(v,e,n,r,t,o),!0===i.transparent&&i.side===Uu&&!1===i.forceSinglePass?(i.side=ju,i.needsUpdate=!0,v.renderBufferDirect(n,e,r,i,t,o),i.side=Fu,i.needsUpdate=!0,v.renderBufferDirect(n,e,r,i,t,o),i.side=Uu):v.renderBufferDirect(n,e,r,i,t,o),t.onAfterRender(v,e,n,r,i,o)}function Rt(t,e,n){!0!==e.isScene&&(e=G);const r=Z.get(t),i=m.state.lights,o=m.state.shadowsArray,a=i.state.version,s=rt.getParameters(t,i.state,o,e,n),c=rt.getProgramCacheKey(s);let l=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?Q:$).get(t.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===t.envMap?e.environmentRotation:t.envMapRotation,void 0===l&&(t.addEventListener("dispose",St),l=new Map,r.programs=l);let u=l.get(c);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===a)return Lt(t,s),u}else s.uniforms=rt.getUniforms(t),t.onBuild(n,s,v),t.onBeforeCompile(s,v),u=rt.acquireProgram(s,c),l.set(c,u),r.uniforms=s.uniforms;const h=r.uniforms;return(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=st.uniform),Lt(t,s),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=u,r.uniformsList=null,u}function Dt(t){if(null===t.uniformsList){const e=t.currentProgram.getUniforms();t.uniformsList=Mb.seqWithValue(e.seq,t.uniforms)}return t.uniformsList}function Lt(t,e){const n=Z.get(t);n.outputColorSpace=e.outputColorSpace,n.batching=e.batching,n.batchingColor=e.batchingColor,n.instancing=e.instancing,n.instancingColor=e.instancingColor,n.instancingMorph=e.instancingMorph,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}Ot.setAnimationLoop((function(t){Et&&Et(t)})),"undefined"!==typeof self&&Ot.setContext(self),this.setAnimationLoop=function(t){Et=t,bt.setAnimationLoop(t),null===t?Ot.stop():Ot.start()},bt.addEventListener("sessionstart",At),bt.addEventListener("sessionend",Mt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===b)return;if(!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===bt.enabled&&!0===bt.isPresenting&&(!0===bt.cameraAutoUpdate&&bt.updateCamera(e),e=bt.getCamera()),!0===t.isScene&&t.onBeforeRender(v,t,e,w),m=at.get(t,y.length),m.init(e),y.push(m),z.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),j.setFromProjectionMatrix(z),B=this.localClippingEnabled,U=st.init(this.clippingPlanes,B),f=ot.get(t,g.length),f.init(),g.push(f),!0===bt.enabled&&!0===bt.isPresenting){const t=v.xr.getDepthSensingMesh();null!==t&&Ct(t,e,-1/0,v.sortObjects)}Ct(t,e,0,v.sortObjects),f.finish(),!0===v.sortObjects&&f.sort(N,R),W=!1===bt.enabled||!1===bt.isPresenting||!1===bt.hasDepthSensing(),W&&lt.addToRenderList(f,t),this.info.render.frame++,!0===U&&st.beginShadows();const n=m.state.shadowsArray;ct.render(n,t,e),!0===U&&st.endShadows(),!0===this.info.autoReset&&this.info.reset();const r=f.opaque,i=f.transmissive;if(m.setupLights(),e.isArrayCamera){const n=e.cameras;if(i.length>0)for(let e=0,o=n.length;e<o;e++){Pt(r,i,t,n[e])}W&&lt.render(t);for(let e=0,r=n.length;e<r;e++){const r=n[e];kt(f,t,r,r.viewport)}}else i.length>0&&Pt(r,i,t,e),W&&lt.render(t),kt(f,t,e);null!==w&&(J.updateMultisampleRenderTarget(w),J.updateRenderTargetMipmap(w)),!0===t.isScene&&t.onAfterRender(v,t,e),ft.resetDefaultState(),S=-1,T=null,y.pop(),y.length>0?(m=y[y.length-1],!0===U&&st.setGlobalState(v.clippingPlanes,m.state.camera)):m=null,g.pop(),f=g.length>0?g[g.length-1]:null},this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(t,e,n){Z.get(t.texture).__webglTexture=e,Z.get(t.depthTexture).__webglTexture=n;const r=Z.get(t);r.__hasExternalTextures=!0,r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===q.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(t,e){const n=Z.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;w=t,x=e,_=n;let r=!0,i=null,o=!1,a=!1;if(t){const s=Z.get(t);void 0!==s.__useDefaultFramebuffer?(Y.bindFramebuffer(gt.FRAMEBUFFER,null),r=!1):void 0===s.__webglFramebuffer?J.setupRenderTarget(t):s.__hasExternalTextures&&J.rebindTextures(t,Z.get(t.texture).__webglTexture,Z.get(t.depthTexture).__webglTexture);const c=t.texture;(c.isData3DTexture||c.isDataArrayTexture||c.isCompressedArrayTexture)&&(a=!0);const l=Z.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=Array.isArray(l[e])?l[e][n]:l[e],o=!0):i=t.samples>0&&!1===J.useMultisampledRTT(t)?Z.get(t).__webglMultisampledFramebuffer:Array.isArray(l)?l[n]:l,E.copy(t.viewport),A.copy(t.scissor),M=t.scissorTest}else E.copy(D).multiplyScalar(I).floor(),A.copy(L).multiplyScalar(I).floor(),M=F;if(Y.bindFramebuffer(gt.FRAMEBUFFER,i)&&r&&Y.drawBuffers(t,i),Y.viewport(E),Y.scissor(A),Y.setScissorTest(M),o){const r=Z.get(t.texture);gt.framebufferTexture2D(gt.FRAMEBUFFER,gt.COLOR_ATTACHMENT0,gt.TEXTURE_CUBE_MAP_POSITIVE_X+e,r.__webglTexture,n)}else if(a){const r=Z.get(t.texture),i=e||0;gt.framebufferTextureLayer(gt.FRAMEBUFFER,gt.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}S=-1},this.readRenderTargetPixels=function(t,e,n,r,i,o,a){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=Z.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){Y.bindFramebuffer(gt.FRAMEBUFFER,s);try{const a=t.texture,s=a.format,c=a.type;if(!X.textureFormatReadable(s))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!X.textureTypeReadable(c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&gt.readPixels(e,n,r,i,pt.convert(s),pt.convert(c),o)}finally{const t=null!==w?Z.get(w).__webglFramebuffer:null;Y.bindFramebuffer(gt.FRAMEBUFFER,t)}}},this.readRenderTargetPixelsAsync=async function(t,e,n,r,i,o,a){if(!t||!t.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=Z.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){Y.bindFramebuffer(gt.FRAMEBUFFER,s);try{const a=t.texture,s=a.format,c=a.type;if(!X.textureFormatReadable(s))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!X.textureTypeReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i){const t=gt.createBuffer();gt.bindBuffer(gt.PIXEL_PACK_BUFFER,t),gt.bufferData(gt.PIXEL_PACK_BUFFER,o.byteLength,gt.STREAM_READ),gt.readPixels(e,n,r,i,pt.convert(s),pt.convert(c),0),gt.flush();const a=gt.fenceSync(gt.SYNC_GPU_COMMANDS_COMPLETE,0);await function(t,e,n){return new Promise((function(r,i){setTimeout((function o(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(o,n);break;default:r()}}),n)}))}(gt,a,4);try{gt.bindBuffer(gt.PIXEL_PACK_BUFFER,t),gt.getBufferSubData(gt.PIXEL_PACK_BUFFER,0,o)}finally{gt.deleteBuffer(t),gt.deleteSync(a)}return o}}finally{const t=null!==w?Z.get(w).__webglFramebuffer:null;Y.bindFramebuffer(gt.FRAMEBUFFER,t)}}},this.copyFramebufferToTexture=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!0!==t.isTexture&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),e=arguments[0]||null,t=arguments[1]);const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r),a=null!==e?e.x:0,s=null!==e?e.y:0;J.setTexture2D(t,0),gt.copyTexSubImage2D(gt.TEXTURE_2D,n,0,0,a,s,i,o),Y.unbindTexture()},this.copyTextureToTexture=function(t,e){let n,r,i,o,a,s,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;!0!==t.isTexture&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),l=arguments[0]||null,t=arguments[1],e=arguments[2],u=arguments[3]||0,c=null),null!==c?(n=c.max.x-c.min.x,r=c.max.y-c.min.y,i=c.min.x,o=c.min.y):(n=t.image.width,r=t.image.height,i=0,o=0),null!==l?(a=l.x,s=l.y):(a=0,s=0);const h=pt.convert(e.format),d=pt.convert(e.type);J.setTexture2D(e,0),gt.pixelStorei(gt.UNPACK_FLIP_Y_WEBGL,e.flipY),gt.pixelStorei(gt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),gt.pixelStorei(gt.UNPACK_ALIGNMENT,e.unpackAlignment);const p=gt.getParameter(gt.UNPACK_ROW_LENGTH),f=gt.getParameter(gt.UNPACK_IMAGE_HEIGHT),m=gt.getParameter(gt.UNPACK_SKIP_PIXELS),g=gt.getParameter(gt.UNPACK_SKIP_ROWS),y=gt.getParameter(gt.UNPACK_SKIP_IMAGES),v=t.isCompressedTexture?t.mipmaps[u]:t.image;gt.pixelStorei(gt.UNPACK_ROW_LENGTH,v.width),gt.pixelStorei(gt.UNPACK_IMAGE_HEIGHT,v.height),gt.pixelStorei(gt.UNPACK_SKIP_PIXELS,i),gt.pixelStorei(gt.UNPACK_SKIP_ROWS,o),t.isDataTexture?gt.texSubImage2D(gt.TEXTURE_2D,u,a,s,n,r,h,d,v.data):t.isCompressedTexture?gt.compressedTexSubImage2D(gt.TEXTURE_2D,u,a,s,v.width,v.height,h,v.data):gt.texSubImage2D(gt.TEXTURE_2D,u,a,s,h,d,v),gt.pixelStorei(gt.UNPACK_ROW_LENGTH,p),gt.pixelStorei(gt.UNPACK_IMAGE_HEIGHT,f),gt.pixelStorei(gt.UNPACK_SKIP_PIXELS,m),gt.pixelStorei(gt.UNPACK_SKIP_ROWS,g),gt.pixelStorei(gt.UNPACK_SKIP_IMAGES,y),0===u&&e.generateMipmaps&&gt.generateMipmap(gt.TEXTURE_2D),Y.unbindTexture()},this.copyTextureToTexture3D=function(t,e){let n,r,i,o,a,s,c,l,u,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;!0!==t.isTexture&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),h=arguments[0]||null,d=arguments[1]||null,t=arguments[2],e=arguments[3],p=arguments[4]||0);const f=t.isCompressedTexture?t.mipmaps[p]:t.image;null!==h?(n=h.max.x-h.min.x,r=h.max.y-h.min.y,i=h.max.z-h.min.z,o=h.min.x,a=h.min.y,s=h.min.z):(n=f.width,r=f.height,i=f.depth,o=0,a=0,s=0),null!==d?(c=d.x,l=d.y,u=d.z):(c=0,l=0,u=0);const m=pt.convert(e.format),g=pt.convert(e.type);let y;if(e.isData3DTexture)J.setTexture3D(e,0),y=gt.TEXTURE_3D;else{if(!e.isDataArrayTexture&&!e.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");J.setTexture2DArray(e,0),y=gt.TEXTURE_2D_ARRAY}gt.pixelStorei(gt.UNPACK_FLIP_Y_WEBGL,e.flipY),gt.pixelStorei(gt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),gt.pixelStorei(gt.UNPACK_ALIGNMENT,e.unpackAlignment);const v=gt.getParameter(gt.UNPACK_ROW_LENGTH),b=gt.getParameter(gt.UNPACK_IMAGE_HEIGHT),x=gt.getParameter(gt.UNPACK_SKIP_PIXELS),_=gt.getParameter(gt.UNPACK_SKIP_ROWS),w=gt.getParameter(gt.UNPACK_SKIP_IMAGES);gt.pixelStorei(gt.UNPACK_ROW_LENGTH,f.width),gt.pixelStorei(gt.UNPACK_IMAGE_HEIGHT,f.height),gt.pixelStorei(gt.UNPACK_SKIP_PIXELS,o),gt.pixelStorei(gt.UNPACK_SKIP_ROWS,a),gt.pixelStorei(gt.UNPACK_SKIP_IMAGES,s),t.isDataTexture||t.isData3DTexture?gt.texSubImage3D(y,p,c,l,u,n,r,i,m,g,f.data):e.isCompressedArrayTexture?gt.compressedTexSubImage3D(y,p,c,l,u,n,r,i,m,f.data):gt.texSubImage3D(y,p,c,l,u,n,r,i,m,g,f),gt.pixelStorei(gt.UNPACK_ROW_LENGTH,v),gt.pixelStorei(gt.UNPACK_IMAGE_HEIGHT,b),gt.pixelStorei(gt.UNPACK_SKIP_PIXELS,x),gt.pixelStorei(gt.UNPACK_SKIP_ROWS,_),gt.pixelStorei(gt.UNPACK_SKIP_IMAGES,w),0===p&&e.generateMipmaps&&gt.generateMipmap(y),Y.unbindTexture()},this.initRenderTarget=function(t){void 0===Z.get(t).__webglFramebuffer&&J.setupRenderTarget(t)},this.initTexture=function(t){t.isCubeTexture?J.setTextureCube(t,0):t.isData3DTexture?J.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?J.setTexture2DArray(t,0):J.setTexture2D(t,0),Y.unbindTexture()},this.resetState=function(){x=0,_=0,w=null,Y.reset(),ft.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return lf}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=t===_p?"display-p3":"srgb",e.unpackColorSpace=Ff.workingColorSpace===wp?"display-p3":"srgb"}}class Tx{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new xg(t),this.density=e}clone(){return new Tx(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Ex{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new xg(t),this.near=e,this.far=n}clone(){return new Ex(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Ax extends ig{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new zm,this.environmentIntensity=1,this.environmentRotation=new zm,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class Mx{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Jp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=gf()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}get updateRange(){return If("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this}set(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=gf()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=gf()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ox=new em;class Cx{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Ox.fromBufferAttribute(this,e),Ox.applyMatrix4(t),this.setXYZ(e,Ox.x,Ox.y,Ox.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ox.fromBufferAttribute(this,e),Ox.applyNormalMatrix(t),this.setXYZ(e,Ox.x,Ox.y,Ox.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ox.fromBufferAttribute(this,e),Ox.transformDirection(t),this.setXYZ(e,Ox.x,Ox.y,Ox.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=xf(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=_f(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=_f(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=_f(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=_f(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=_f(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=xf(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=xf(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=xf(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=xf(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=_f(e,this.array),n=_f(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=_f(e,this.array),n=_f(n,this.array),r=_f(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=_f(e,this.array),n=_f(n,this.array),r=_f(r,this.array),i=_f(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new Ig(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Cx(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class kx extends Sg{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new xg(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Px;const Ix=new em,Nx=new em,Rx=new em,Dx=new Sf,Lx=new Sf,Fx=new Pm,jx=new em,Ux=new em,Bx=new em,zx=new Sf,Vx=new Sf,Gx=new Sf;class Wx extends ig{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kx;if(super(),this.isSprite=!0,this.type="Sprite",void 0===Px){Px=new Kg;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new Mx(t,5);Px.setIndex([0,1,2,0,2,3]),Px.setAttribute("position",new Cx(e,3,0,!1)),Px.setAttribute("uv",new Cx(e,2,3,!1))}this.geometry=Px,this.material=t,this.center=new Sf(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Nx.setFromMatrixScale(this.matrixWorld),Fx.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Rx.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Nx.multiplyScalar(-Rx.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;Hx(jx.set(-.5,-.5,0),Rx,o,Nx,r,i),Hx(Ux.set(.5,-.5,0),Rx,o,Nx,r,i),Hx(Bx.set(.5,.5,0),Rx,o,Nx,r,i),zx.set(0,0),Vx.set(1,0),Gx.set(1,1);let a=t.ray.intersectTriangle(jx,Ux,Bx,!1,Ix);if(null===a&&(Hx(Ux.set(-.5,.5,0),Rx,o,Nx,r,i),Vx.set(0,1),a=t.ray.intersectTriangle(jx,Bx,Ux,!1,Ix),null===a))return;const s=t.ray.origin.distanceTo(Ix);s<t.near||s>t.far||e.push({distance:s,point:Ix.clone(),uv:mg.getInterpolation(Ix,jx,Ux,Bx,zx,Vx,Gx,new Sf),face:null,object:this})}copy(t,e){return super.copy(t,e),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function Hx(t,e,n,r,i,o){Dx.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(Lx.x=o*Dx.x-i*Dx.y,Lx.y=i*Dx.x+o*Dx.y):Lx.copy(Dx),t.copy(e),t.x+=Lx.x,t.y+=Lx.y,t.applyMatrix4(Fx)}const qx=new em,Xx=new em;class Yx extends ig{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,r=e.length;n<r;n++){const t=e[n];this.addLevel(t.object.clone(),t.distance,t.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e=Math.abs(e);const r=this.levels;let i;for(i=0;i<r.length&&!(e<r[i].distance);i++);return r.splice(i,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,r;for(n=1,r=e.length;n<r;n++){let r=e[n].distance;if(e[n].object.visible&&(r-=r*e[n].hysteresis),t<r)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){qx.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(qx);this.getObjectForDistance(n).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){qx.setFromMatrixPosition(t.matrixWorld),Xx.setFromMatrixPosition(this.matrixWorld);const n=qx.distanceTo(Xx)/t.zoom;let r,i;for(e[0].object.visible=!0,r=1,i=e.length;r<i;r++){let t=e[r].distance;if(e[r].object.visible&&(t-=t*e[r].hysteresis),!(n>=t))break;e[r-1].object.visible=!1,e[r].object.visible=!0}for(this._currentLevel=r-1;r<i;r++)e[r].object.visible=!1}}toJSON(t){const e=super.toJSON(t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const t=n[r];e.object.levels.push({object:t.object.uuid,distance:t.distance,hysteresis:t.hysteresis})}return e}}const Kx=new em,Zx=new Xf,Jx=new Xf,$x=new em,Qx=new Pm,t_=new em,e_=new wm,n_=new Pm,r_=new km;class i_ extends py{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Ph,this.bindMatrix=new Pm,this.bindMatrixInverse=new Pm,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new im),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,t_),this.boundingBox.expandByPoint(t_)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new wm),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,t_),this.boundingSphere.expandByPoint(t_)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,r=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),e_.copy(this.boundingSphere),e_.applyMatrix4(r),!1!==t.ray.intersectsSphere(e_)&&(n_.copy(r).invert(),r_.copy(t.ray).applyMatrix4(n_),null!==this.boundingBox&&!1===r_.intersectsBox(this.boundingBox)||this._computeIntersections(t,e,r_)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Xf,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.fromBufferAttribute(e,n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===Ph?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Ih?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,r=this.geometry;Zx.fromBufferAttribute(r.attributes.skinIndex,t),Jx.fromBufferAttribute(r.attributes.skinWeight,t),Kx.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let i=0;i<4;i++){const t=Jx.getComponent(i);if(0!==t){const r=Zx.getComponent(i);Qx.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),e.addScaledVector($x.copy(Kx).applyMatrix4(Qx),t)}}return e.applyMatrix4(this.bindMatrixInverse)}}class o_ extends ig{constructor(){super(),this.isBone=!0,this.type="Bone"}}class a_ extends qf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:Vh,arguments.length>9&&void 0!==arguments[9]?arguments[9]:Vh,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const s_=new Pm,c_=new Pm;class l_{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=gf(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Pm)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new Pm;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,o=t.length;i<o;i++){const r=t[i]?t[i].matrixWorld:c_;s_.multiplyMatrices(r,e[i]),s_.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new l_(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=4*Math.ceil(t/4),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new a_(e,t,t,dd,id);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const r=t.bones[n];let i=e[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new o_),this.bones.push(i),this.boneInverses.push((new Pm).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,i=e.length;r<i;r++){const i=e[r];t.bones.push(i.uuid);const o=n[r];t.boneInverses.push(o.toArray())}return t}}class u_ extends Ig{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const h_=new Pm,d_=new Pm,p_=[],f_=new im,m_=new Pm,g_=new py,y_=new wm;class v_ extends py{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new u_(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,m_)}computeBoundingBox(){const t=this.geometry,e=this.count;null===this.boundingBox&&(this.boundingBox=new im),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,h_),f_.copy(t.boundingBox).applyMatrix4(h_),this.boundingBox.union(f_)}computeBoundingSphere(){const t=this.geometry,e=this.count;null===this.boundingSphere&&(this.boundingSphere=new wm),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,h_),y_.copy(t.boundingSphere).applyMatrix4(h_),this.boundingSphere.union(y_)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.morphTexture&&(this.morphTexture=t.morphTexture.clone()),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}getMorphAt(t,e){const n=e.morphTargetInfluences,r=this.morphTexture.source.data.data,i=t*(n.length+1)+1;for(let o=0;o<n.length;o++)n[o]=r[i+o]}raycast(t,e){const n=this.matrixWorld,r=this.count;if(g_.geometry=this.geometry,g_.material=this.material,void 0!==g_.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),y_.copy(this.boundingSphere),y_.applyMatrix4(n),!1!==t.ray.intersectsSphere(y_)))for(let i=0;i<r;i++){this.getMatrixAt(i,h_),d_.multiplyMatrices(n,h_),g_.matrixWorld=d_,g_.raycast(t,p_);for(let t=0,n=p_.length;t<n;t++){const n=p_[t];n.instanceId=i,n.object=this,e.push(n)}p_.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new u_(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}setMorphAt(t,e){const n=e.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new a_(new Float32Array(r*this.count),r,this.count,yd,id));const i=this.morphTexture.source.data.data;let o=0;for(let c=0;c<n.length;c++)o+=n[c];const a=this.geometry.morphTargetsRelative?1:1-o,s=r*t;i[s]=a,i.set(n,s+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function b_(t,e){return t.z-e.z}function x_(t,e){return e.z-t.z}class __{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e){const n=this.pool,r=this.list;this.index>=n.length&&n.push({start:-1,count:-1,z:-1});const i=n[this.index];r.push(i),this.index++,i.start=t.start,i.count=t.count,i.z=e}reset(){this.list.length=0,this.index=0}}const w_="batchId",S_=new Pm,T_=new Pm,E_=new Pm,A_=new xg(1,1,1),M_=new Pm,O_=new Ly,C_=new im,k_=new wm,P_=new em,I_=new em,N_=new em,R_=new __,D_=new py,L_=[];function F_(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let o=0;o<i;o++)for(let i=0;i<r;i++)e.setComponent(o+n,i,t.getComponent(o,i))}else e.array.set(t.array,n*r);e.needsUpdate=!0}class j_ extends py{get maxGeometryCount(){return this._maxGeometryCount}constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*e,r=arguments.length>3?arguments[3]:void 0;super(new Kg,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=t,this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture(),this._colorsTexture=null}_initMatricesTexture(){let t=Math.sqrt(4*this._maxGeometryCount);t=4*Math.ceil(t/4),t=Math.max(t,4);const e=new Float32Array(t*t*4),n=new a_(e,t,t,dd,id);this._matricesTexture=n}_initColorsTexture(){let t=Math.sqrt(this._maxGeometryCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),n=new a_(e,t,t,dd,id);n.colorSpace=Ff.workingColorSpace,this._colorsTexture=n}_initializeGeometry(t){const e=this.geometry,n=this._maxVertexCount,r=this._maxGeometryCount,i=this._maxIndexCount;if(!1===this._geometryInitialized){for(const r in t.attributes){const i=t.getAttribute(r),{array:o,itemSize:a,normalized:s}=i,c=new o.constructor(n*a),l=new Ig(c,a,s);e.setAttribute(r,l)}if(null!==t.getIndex()){const t=n>65536?new Uint32Array(i):new Uint16Array(i);e.setIndex(new Ig(t,1))}const o=r>65536?new Uint32Array(n):new Uint16Array(n);e.setAttribute(w_,new Ig(o,1)),this._geometryInitialized=!0}}_validateGeometry(t){if(t.getAttribute(w_))throw new Error('BatchedMesh: Geometry cannot use attribute "'.concat(w_,'"'));const e=this.geometry;if(Boolean(t.getIndex())!==Boolean(e.getIndex()))throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in e.attributes){if(n===w_)continue;if(!t.hasAttribute(n))throw new Error('BatchedMesh: Added geometry missing "'.concat(n,'". All geometries must have consistent attributes.'));const r=t.getAttribute(n),i=e.getAttribute(n);if(r.itemSize!==i.itemSize||r.normalized!==i.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new im);const t=this._geometryCount,e=this.boundingBox,n=this._active;e.makeEmpty();for(let r=0;r<t;r++)!1!==n[r]&&(this.getMatrixAt(r,S_),this.getBoundingBoxAt(r,C_).applyMatrix4(S_),e.union(C_))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new wm);const t=this._geometryCount,e=this.boundingSphere,n=this._active;e.makeEmpty();for(let r=0;r<t;r++)!1!==n[r]&&(this.getMatrixAt(r,S_),this.getBoundingSphereAt(r,k_).applyMatrix4(S_),e.union(k_))}addGeometry(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(this._initializeGeometry(t),this._validateGeometry(t),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let i=null;const o=this._reservedRanges,a=this._drawRanges,s=this._bounds;0!==this._geometryCount&&(i=o[o.length-1]),r.vertexCount=-1===e?t.getAttribute("position").count:e,r.vertexStart=null===i?0:i.vertexStart+i.vertexCount;const c=t.getIndex(),l=null!==c;if(l&&(r.indexCount=-1===n?c.count:n,r.indexStart=null===i?0:i.indexStart+i.indexCount),-1!==r.indexStart&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const u=this._visibility,h=this._active,d=this._matricesTexture,p=this._matricesTexture.image.data,f=this._colorsTexture;u.push(!0),h.push(!0);const m=this._geometryCount;this._geometryCount++,E_.toArray(p,16*m),d.needsUpdate=!0,null!==f&&(A_.toArray(f.image.data,4*m),f.needsUpdate=!0),o.push(r),a.push({start:l?r.indexStart:r.vertexStart,count:-1}),s.push({boxInitialized:!1,box:new im,sphereInitialized:!1,sphere:new wm});const g=this.geometry.getAttribute(w_);for(let y=0;y<r.vertexCount;y++)g.setX(r.vertexStart+y,m);return g.needsUpdate=!0,this.setGeometryAt(m,t),m}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const n=this.geometry,r=null!==n.getIndex(),i=n.getIndex(),o=e.getIndex(),a=this._reservedRanges[t];if(r&&o.count>a.indexCount||e.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const s=a.vertexStart,c=a.vertexCount;for(const d in n.attributes){if(d===w_)continue;const t=e.getAttribute(d),r=n.getAttribute(d);F_(t,r,s);const i=t.itemSize;for(let e=t.count,n=c;e<n;e++){const t=s+e;for(let e=0;e<i;e++)r.setComponent(t,e,0)}r.needsUpdate=!0,r.addUpdateRange(s*i,c*i)}if(r){const t=a.indexStart;for(let e=0;e<o.count;e++)i.setX(t+e,s+o.getX(e));for(let e=o.count,n=a.indexCount;e<n;e++)i.setX(t+e,s);i.needsUpdate=!0,i.addUpdateRange(t,a.indexCount)}const l=this._bounds[t];null!==e.boundingBox?(l.box.copy(e.boundingBox),l.boxInitialized=!0):l.boxInitialized=!1,null!==e.boundingSphere?(l.sphere.copy(e.boundingSphere),l.sphereInitialized=!0):l.sphereInitialized=!1;const u=this._drawRanges[t],h=e.getAttribute("position");return u.count=r?o.count:h.count,this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._active;return t>=e.length||!1===e[t]||(e[t]=!1,this._visibilityChanged=!0),this}getInstanceCountAt(t){return null===this._multiDrawInstances?null:this._multiDrawInstances[t]}setInstanceCountAt(t,e){return null===this._multiDrawInstances&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[t]=e,t}getBoundingBoxAt(t,e){if(!1===this._active[t])return null;const n=this._bounds[t],r=n.box,i=this.geometry;if(!1===n.boxInitialized){r.makeEmpty();const e=i.index,o=i.attributes.position,a=this._drawRanges[t];for(let t=a.start,n=a.start+a.count;t<n;t++){let n=t;e&&(n=e.getX(n)),r.expandByPoint(P_.fromBufferAttribute(o,n))}n.boxInitialized=!0}return e.copy(r),e}getBoundingSphereAt(t,e){if(!1===this._active[t])return null;const n=this._bounds[t],r=n.sphere,i=this.geometry;if(!1===n.sphereInitialized){r.makeEmpty(),this.getBoundingBoxAt(t,C_),C_.getCenter(r.center);const e=i.index,o=i.attributes.position,a=this._drawRanges[t];let s=0;for(let t=a.start,n=a.start+a.count;t<n;t++){let n=t;e&&(n=e.getX(n)),P_.fromBufferAttribute(o,n),s=Math.max(s,r.center.distanceToSquared(P_))}r.radius=Math.sqrt(s),n.sphereInitialized=!0}return e.copy(r),e}setMatrixAt(t,e){const n=this._active,r=this._matricesTexture,i=this._matricesTexture.image.data;return t>=this._geometryCount||!1===n[t]||(e.toArray(i,16*t),r.needsUpdate=!0),this}getMatrixAt(t,e){const n=this._active,r=this._matricesTexture.image.data;return t>=this._geometryCount||!1===n[t]?null:e.fromArray(r,16*t)}setColorAt(t,e){null===this._colorsTexture&&this._initColorsTexture();const n=this._active,r=this._colorsTexture,i=this._colorsTexture.image.data;return t>=this._geometryCount||!1===n[t]||(e.toArray(i,4*t),r.needsUpdate=!0),this}getColorAt(t,e){const n=this._active,r=this._colorsTexture.image.data;return t>=this._geometryCount||!1===n[t]?null:e.fromArray(r,4*t)}setVisibleAt(t,e){const n=this._visibility,r=this._active;return t>=this._geometryCount||!1===r[t]||n[t]===e||(n[t]=e,this._visibilityChanged=!0),this}getVisibleAt(t){const e=this._visibility,n=this._active;return!(t>=this._geometryCount||!1===n[t])&&e[t]}raycast(t,e){const n=this._visibility,r=this._active,i=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,s=this.geometry;D_.material=this.material,D_.geometry.index=s.index,D_.geometry.attributes=s.attributes,null===D_.geometry.boundingBox&&(D_.geometry.boundingBox=new im),null===D_.geometry.boundingSphere&&(D_.geometry.boundingSphere=new wm);for(let c=0;c<o;c++){if(!n[c]||!r[c])continue;const o=i[c];D_.geometry.setDrawRange(o.start,o.count),this.getMatrixAt(c,D_.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,D_.geometry.boundingBox),this.getBoundingSphereAt(c,D_.geometry.boundingSphere),D_.raycast(t,L_);for(let t=0,n=L_.length;t<n;t++){const n=L_[t];n.object=this,n.batchId=c,e.push(n)}L_.length=0}D_.material=null,D_.geometry.index=null,D_.geometry.attributes={},D_.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=null!==t.boundingBox?t.boundingBox.clone():null,this.boundingSphere=null!==t.boundingSphere?t.boundingSphere.clone():null,this._drawRanges=t._drawRanges.map((t=>({...t}))),this._reservedRanges=t._reservedRanges.map((t=>({...t}))),this._visibility=t._visibility.slice(),this._active=t._active.slice(),this._bounds=t._bounds.map((t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()}))),this._maxGeometryCount=t._maxGeometryCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._geometryCount=t._geometryCount,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),null!==this._colorsTexture&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(t,e,n,r,i){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=null===o?1:o.array.BYTES_PER_ELEMENT,s=this._active,c=this._visibility,l=this._multiDrawStarts,u=this._multiDrawCounts,h=this._drawRanges,d=this.perObjectFrustumCulled;d&&(M_.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),O_.setFromProjectionMatrix(M_,t.coordinateSystem));let p=0;if(this.sortObjects){T_.copy(this.matrixWorld).invert(),P_.setFromMatrixPosition(n.matrixWorld).applyMatrix4(T_),I_.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(T_);for(let n=0,r=c.length;n<r;n++)if(c[n]&&s[n]){this.getMatrixAt(n,S_),this.getBoundingSphereAt(n,k_).applyMatrix4(S_);let t=!1;if(d&&(t=!O_.intersectsSphere(k_)),!t){const t=N_.subVectors(k_.center,P_).dot(I_);R_.push(h[n],t)}}const t=R_.list,e=this.customSort;null===e?t.sort(i.transparent?x_:b_):e.call(this,t,n);for(let n=0,r=t.length;n<r;n++){const e=t[n];l[p]=e.start*a,u[p]=e.count,p++}R_.reset()}else for(let f=0,m=c.length;f<m;f++)if(c[f]&&s[f]){let t=!1;if(d&&(this.getMatrixAt(f,S_),this.getBoundingSphereAt(f,k_).applyMatrix4(S_),t=!O_.intersectsSphere(k_)),!t){const t=h[f];l[p]=t.start*a,u[p]=t.count,p++}}this._multiDrawCount=p,this._visibilityChanged=!1}onBeforeShadow(t,e,n,r,i,o){this.onBeforeRender(t,null,r,i,o)}}class U_ extends Sg{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new xg(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const B_=new em,z_=new em,V_=new Pm,G_=new km,W_=new wm,H_=new em,q_=new em;class X_ extends ig{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Kg,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new U_;super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)B_.fromBufferAttribute(e,t-1),z_.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=B_.distanceTo(z_);t.setAttribute("lineDistance",new zg(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),W_.copy(n.boundingSphere),W_.applyMatrix4(r),W_.radius+=i,!1===t.ray.intersectsSphere(W_))return;V_.copy(r).invert(),G_.copy(t.ray).applyMatrix4(V_);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,c=this.isLineSegments?2:1,l=n.index,u=n.attributes.position;if(null!==l){const n=Math.max(0,o.start),r=Math.min(l.count,o.start+o.count);for(let i=n,o=r-1;i<o;i+=c){const n=l.getX(i),r=l.getX(i+1),o=Y_(this,t,G_,s,n,r);o&&e.push(o)}if(this.isLineLoop){const i=l.getX(r-1),o=l.getX(n),a=Y_(this,t,G_,s,i,o);a&&e.push(a)}}else{const n=Math.max(0,o.start),r=Math.min(u.count,o.start+o.count);for(let i=n,o=r-1;i<o;i+=c){const n=Y_(this,t,G_,s,i,i+1);n&&e.push(n)}if(this.isLineLoop){const i=Y_(this,t,G_,s,r-1,n);i&&e.push(i)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function Y_(t,e,n,r,i,o){const a=t.geometry.attributes.position;B_.fromBufferAttribute(a,i),z_.fromBufferAttribute(a,o);if(n.distanceSqToSegment(B_,z_,H_,q_)>r)return;H_.applyMatrix4(t.matrixWorld);const s=e.ray.origin.distanceTo(H_);return s<e.near||s>e.far?void 0:{distance:s,point:q_.clone().applyMatrix4(t.matrixWorld),index:i,face:null,faceIndex:null,object:t}}const K_=new em,Z_=new em;class J_ extends X_{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,r=e.count;t<r;t+=2)K_.fromBufferAttribute(e,t),Z_.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+K_.distanceTo(Z_);t.setAttribute("lineDistance",new zg(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class $_ extends X_{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class Q_ extends Sg{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new xg(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const tw=new Pm,ew=new km,nw=new wm,rw=new em;class iw extends ig{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Kg,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Q_;super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),nw.copy(n.boundingSphere),nw.applyMatrix4(r),nw.radius+=i,!1===t.ray.intersectsSphere(nw))return;tw.copy(r).invert(),ew.copy(t.ray).applyMatrix4(tw);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,c=n.index,l=n.attributes.position;if(null!==c){for(let n=Math.max(0,o.start),i=Math.min(c.count,o.start+o.count);n<i;n++){const i=c.getX(n);rw.fromBufferAttribute(l,i),ow(rw,i,s,r,t,e,this)}}else{for(let n=Math.max(0,o.start),i=Math.min(l.count,o.start+o.count);n<i;n++)rw.fromBufferAttribute(l,n),ow(rw,n,s,r,t,e,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function ow(t,e,n,r,i,o,a){const s=ew.distanceSqToPoint(t);if(s<n){const n=new em;ew.closestPointToPoint(t,n),n.applyMatrix4(r);const c=i.ray.origin.distanceTo(n);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:n,index:e,face:null,object:a})}}class aw extends qf{constructor(t,e,n,r,i,o,a,s,c){super(t,e,n,r,i,o,a,s,c),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:Xh,this.magFilter=void 0!==i?i:Xh,this.generateMipmaps=!1;const l=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){l.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class sw extends qf{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=Vh,this.minFilter=Vh,this.generateMipmaps=!1,this.needsUpdate=!0}}class cw extends qf{constructor(t,e,n,r,i,o,a,s,c,l,u,h){super(null,o,a,s,c,l,r,i,u,h),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class lw extends cw{constructor(t,e,n,r,i,o){super(t,e,n,i,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Bh,this.layerUpdates=new Set}addLayerUpdates(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class uw extends cw{constructor(t,e,n){super(void 0,t[0].width,t[0].height,e,n,Rh),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class hw extends qf{constructor(t,e,n,r,i,o,a,s,c){super(t,e,n,r,i,o,a,s,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class dw{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),i=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),i+=n.distanceTo(r),e.push(i),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const i=n.length;let o;o=e||t*n[i-1];let a,s=0,c=i-1;for(;s<=c;)if(r=Math.floor(s+(c-s)/2),a=n[r]-o,a<0)s=r+1;else{if(!(a>0)){c=r;break}c=r-1}if(r=c,n[r]===o)return r/(i-1);const l=n[r];return(r+(o-l)/(n[r+1]-l))/(i-1)}getTangent(t,e){const n=1e-4;let r=t-n,i=t+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),a=this.getPoint(i),s=e||(o.isVector2?new Sf:new em);return s.copy(a).sub(o).normalize(),s}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new em,r=[],i=[],o=[],a=new em,s=new Pm;for(let d=0;d<=t;d++){const e=d/t;r[d]=this.getTangentAt(e,new em)}i[0]=new em,o[0]=new em;let c=Number.MAX_VALUE;const l=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);l<=c&&(c=l,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),h<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let d=1;d<=t;d++){if(i[d]=i[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(r[d-1],r[d]),a.length()>Number.EPSILON){a.normalize();const t=Math.acos(yf(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(s.makeRotationAxis(a,t))}o[d].crossVectors(r[d],i[d])}if(!0===e){let e=Math.acos(yf(i[0].dot(i[t]),-1,1));e/=t,r[0].dot(a.crossVectors(i[0],i[t]))>0&&(e=-e);for(let n=1;n<=t;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],e*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class pw extends dw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Sf,n=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const i=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=i?0:n),!0!==this.aClockwise||i||(r===n?r=-n:r-=n);const o=this.aStartAngle+t*r;let a=this.aX+this.xRadius*Math.cos(o),s=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=a-this.aX,r=s-this.aY;a=n*t-r*e+this.aX,s=n*e+r*t+this.aY}return e.set(a,s)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class fw extends pw{constructor(t,e,n,r,i,o){super(t,e,n,n,r,i,o),this.isArcCurve=!0,this.type="ArcCurve"}}function mw(){let t=0,e=0,n=0,r=0;function i(i,o,a,s){t=i,e=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,a,s){let c=(e-t)/o-(n-t)/(o+a)+(n-e)/a,l=(n-e)/a-(r-e)/(a+s)+(r-n)/s;c*=a,l*=a,i(e,n,c,l)},calc:function(i){const o=i*i;return t+e*i+n*o+r*(o*i)}}}const gw=new em,yw=new mw,vw=new mw,bw=new mw;class xw extends dw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new em,n=this.points,r=n.length,i=(r-(this.closed?0:1))*t;let o,a,s=Math.floor(i),c=i-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/r)+1)*r:0===c&&s===r-1&&(s=r-2,c=1),this.closed||s>0?o=n[(s-1)%r]:(gw.subVectors(n[0],n[1]).add(n[0]),o=gw);const l=n[s%r],u=n[(s+1)%r];if(this.closed||s+2<r?a=n[(s+2)%r]:(gw.subVectors(n[r-1],n[r-2]).add(n[r-1]),a=gw),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(o.distanceToSquared(l),t),n=Math.pow(l.distanceToSquared(u),t),r=Math.pow(u.distanceToSquared(a),t);n<1e-4&&(n=1),e<1e-4&&(e=n),r<1e-4&&(r=n),yw.initNonuniformCatmullRom(o.x,l.x,u.x,a.x,e,n,r),vw.initNonuniformCatmullRom(o.y,l.y,u.y,a.y,e,n,r),bw.initNonuniformCatmullRom(o.z,l.z,u.z,a.z,e,n,r)}else"catmullrom"===this.curveType&&(yw.initCatmullRom(o.x,l.x,u.x,a.x,this.tension),vw.initCatmullRom(o.y,l.y,u.y,a.y,this.tension),bw.initCatmullRom(o.z,l.z,u.z,a.z,this.tension));return e.set(yw.calc(c),vw.calc(c),bw.calc(c)),e}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new em).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function _w(t,e,n,r,i){const o=.5*(r-e),a=.5*(i-n),s=t*t;return(2*n-2*r+o+a)*(t*s)+(-3*n+3*r-2*o-a)*s+o*t+n}function ww(t,e,n,r){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r)}function Sw(t,e,n,r,i){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i)}class Tw extends dw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Sf,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Sf,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Sf,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Sf;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Sf,n=this.v0,r=this.v1,i=this.v2,o=this.v3;return e.set(Sw(t,n.x,r.x,i.x,o.x),Sw(t,n.y,r.y,i.y,o.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Ew extends dw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new em,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new em,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new em,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new em;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new em,n=this.v0,r=this.v1,i=this.v2,o=this.v3;return e.set(Sw(t,n.x,r.x,i.x,o.x),Sw(t,n.y,r.y,i.y,o.y),Sw(t,n.z,r.z,i.z,o.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Aw extends dw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Sf,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Sf;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Sf;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Sf).subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Mw extends dw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new em,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new em;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new em;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new em).subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ow extends dw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Sf,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Sf,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Sf;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Sf,n=this.v0,r=this.v1,i=this.v2;return e.set(ww(t,n.x,r.x,i.x),ww(t,n.y,r.y,i.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Cw extends dw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new em,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new em,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new em;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new em,n=this.v0,r=this.v1,i=this.v2;return e.set(ww(t,n.x,r.x,i.x),ww(t,n.y,r.y,i.y),ww(t,n.z,r.z,i.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class kw extends dw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Sf,n=this.points,r=(n.length-1)*t,i=Math.floor(r),o=r-i,a=n[0===i?i:i-1],s=n[i],c=n[i>n.length-2?n.length-1:i+1],l=n[i>n.length-3?n.length-1:i+2];return e.set(_w(o,a.x,s.x,c.x,l.x),_w(o,a.y,s.y,c.y,l.y)),e}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Sf).fromArray(n))}return this}}var Pw=Object.freeze({__proto__:null,ArcCurve:fw,CatmullRomCurve3:xw,CubicBezierCurve:Tw,CubicBezierCurve3:Ew,EllipseCurve:pw,LineCurve:Aw,LineCurve3:Mw,QuadraticBezierCurve:Ow,QuadraticBezierCurve3:Cw,SplineCurve:kw});class Iw extends dw{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const n=!0===t.isVector2?"LineCurve":"LineCurve3";this.curves.push(new Pw[n](e,t))}return this}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const t=r[i]-n,o=this.curves[i],a=o.getLength(),s=0===a?0:1-t/a;return o.getPointAt(s,e)}i++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const e=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],a=o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a);for(let t=0;t<s.length;t++){const r=s[t];n&&n.equals(r)||(e.push(r),n=r)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new Pw[n.type]).fromJSON(n))}return this}}class Nw extends Iw{constructor(t){super(),this.type="Path",this.currentPoint=new Sf,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new Aw(this.currentPoint.clone(),new Sf(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const i=new Ow(this.currentPoint.clone(),new Sf(t,e),new Sf(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,i,o){const a=new Tw(this.currentPoint.clone(),new Sf(t,e),new Sf(n,r),new Sf(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new kw(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,i,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,r,i,o),this}absarc(t,e,n,r,i,o){return this.absellipse(t,e,n,n,r,i,o),this}ellipse(t,e,n,r,i,o,a,s){const c=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(t+c,e+l,n,r,i,o,a,s),this}absellipse(t,e,n,r,i,o,a,s){const c=new pw(t,e,n,r,i,o,a,s);if(this.curves.length>0){const t=c.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(c);const l=c.getPoint(1);return this.currentPoint.copy(l),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Rw extends Kg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Sf(0,-.5),new Sf(.5,0),new Sf(0,.5)],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e),r=yf(r,0,2*Math.PI);const i=[],o=[],a=[],s=[],c=[],l=1/e,u=new em,h=new Sf,d=new em,p=new em,f=new em;let m=0,g=0;for(let y=0;y<=t.length-1;y++)switch(y){case 0:m=t[y+1].x-t[y].x,g=t[y+1].y-t[y].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.normalize(),s.push(d.x,d.y,d.z);break;case t.length-1:s.push(f.x,f.y,f.z);break;default:m=t[y+1].x-t[y].x,g=t[y+1].y-t[y].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.x+=f.x,d.y+=f.y,d.z+=f.z,d.normalize(),s.push(d.x,d.y,d.z),f.copy(p)}for(let y=0;y<=e;y++){const i=n+y*l*r,d=Math.sin(i),p=Math.cos(i);for(let n=0;n<=t.length-1;n++){u.x=t[n].x*d,u.y=t[n].y,u.z=t[n].x*p,o.push(u.x,u.y,u.z),h.x=y/e,h.y=n/(t.length-1),a.push(h.x,h.y);const r=s[3*n+0]*d,i=s[3*n+1],l=s[3*n+0]*p;c.push(r,i,l)}}for(let y=0;y<e;y++)for(let e=0;e<t.length-1;e++){const n=e+y*t.length,r=n,o=n+t.length,a=n+t.length+1,s=n+1;i.push(r,o,s),i.push(a,s,o)}this.setIndex(i),this.setAttribute("position",new zg(o,3)),this.setAttribute("uv",new zg(a,2)),this.setAttribute("normal",new zg(c,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Rw(t.points,t.segments,t.phiStart,t.phiLength)}}class Dw extends Rw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;const i=new Nw;i.absarc(0,-e/2,t,1.5*Math.PI,0),i.absarc(0,e/2,t,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:t,length:e,capSegments:n,radialSegments:r}}static fromJSON(t){return new Dw(t.radius,t.length,t.capSegments,t.radialSegments)}}class Lw extends Kg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},e=Math.max(3,e);const i=[],o=[],a=[],s=[],c=new em,l=new Sf;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let u=0,h=3;u<=e;u++,h+=3){const i=n+u/e*r;c.x=t*Math.cos(i),c.y=t*Math.sin(i),o.push(c.x,c.y,c.z),a.push(0,0,1),l.x=(o[h]/t+1)/2,l.y=(o[h+1]/t+1)/2,s.push(l.x,l.y)}for(let u=1;u<=e;u++)i.push(u,u+1,0);this.setIndex(i),this.setAttribute("position",new zg(o,3)),this.setAttribute("normal",new zg(a,3)),this.setAttribute("uv",new zg(s,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Lw(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class Fw extends Kg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};const c=this;r=Math.floor(r),i=Math.floor(i);const l=[],u=[],h=[],d=[];let p=0;const f=[],m=n/2;let g=0;function y(n){const i=p,o=new Sf,f=new em;let y=0;const v=!0===n?t:e,b=!0===n?1:-1;for(let t=1;t<=r;t++)u.push(0,m*b,0),h.push(0,b,0),d.push(.5,.5),p++;const x=p;for(let t=0;t<=r;t++){const e=t/r*s+a,n=Math.cos(e),i=Math.sin(e);f.x=v*i,f.y=m*b,f.z=v*n,u.push(f.x,f.y,f.z),h.push(0,b,0),o.x=.5*n+.5,o.y=.5*i*b+.5,d.push(o.x,o.y),p++}for(let t=0;t<r;t++){const e=i+t,r=x+t;!0===n?l.push(r,r+1,e):l.push(r+1,r,e),y+=3}c.addGroup(g,y,!0===n?1:2),g+=y}!function(){const o=new em,y=new em;let v=0;const b=(e-t)/n;for(let c=0;c<=i;c++){const l=[],g=c/i,v=g*(e-t)+t;for(let t=0;t<=r;t++){const e=t/r,i=e*s+a,c=Math.sin(i),f=Math.cos(i);y.x=v*c,y.y=-g*n+m,y.z=v*f,u.push(y.x,y.y,y.z),o.set(c,b,f).normalize(),h.push(o.x,o.y,o.z),d.push(e,1-g),l.push(p++)}f.push(l)}for(let t=0;t<r;t++)for(let e=0;e<i;e++){const n=f[e][t],r=f[e+1][t],i=f[e+1][t+1],o=f[e][t+1];l.push(n,r,o),l.push(r,i,o),v+=6}c.addGroup(g,v,0),g+=v}(),!1===o&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(l),this.setAttribute("position",new zg(u,3)),this.setAttribute("normal",new zg(h,3)),this.setAttribute("uv",new zg(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Fw(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class jw extends Fw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,t,e,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}static fromJSON(t){return new jw(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Uw extends Kg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r};const i=[],o=[];function a(t,e,n,r){const i=r+1,o=[];for(let a=0;a<=i;a++){o[a]=[];const r=t.clone().lerp(n,a/i),s=e.clone().lerp(n,a/i),c=i-a;for(let t=0;t<=c;t++)o[a][t]=0===t&&a===i?r:r.clone().lerp(s,t/c)}for(let a=0;a<i;a++)for(let t=0;t<2*(i-a)-1;t++){const e=Math.floor(t/2);t%2===0?(s(o[a][e+1]),s(o[a+1][e]),s(o[a][e])):(s(o[a][e+1]),s(o[a+1][e+1]),s(o[a+1][e]))}}function s(t){i.push(t.x,t.y,t.z)}function c(e,n){const r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function l(t,e,n,r){r<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=r/2/Math.PI+.5)}function u(t){return Math.atan2(t.z,-t.x)}!function(t){const n=new em,r=new em,i=new em;for(let o=0;o<e.length;o+=3)c(e[o+0],n),c(e[o+1],r),c(e[o+2],i),a(n,r,i,t)}(r),function(t){const e=new em;for(let n=0;n<i.length;n+=3)e.x=i[n+0],e.y=i[n+1],e.z=i[n+2],e.normalize().multiplyScalar(t),i[n+0]=e.x,i[n+1]=e.y,i[n+2]=e.z}(n),function(){const t=new em;for(let n=0;n<i.length;n+=3){t.x=i[n+0],t.y=i[n+1],t.z=i[n+2];const r=u(t)/2/Math.PI+.5,a=(e=t,Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5);o.push(r,1-a)}var e;(function(){const t=new em,e=new em,n=new em,r=new em,a=new Sf,s=new Sf,c=new Sf;for(let h=0,d=0;h<i.length;h+=9,d+=6){t.set(i[h+0],i[h+1],i[h+2]),e.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),c.set(o[d+4],o[d+5]),r.copy(t).add(e).add(n).divideScalar(3);const p=u(r);l(a,d+0,t,p),l(s,d+2,e,p),l(c,d+4,n,p)}})(),function(){for(let t=0;t<o.length;t+=6){const e=o[t+0],n=o[t+2],r=o[t+4],i=Math.max(e,n,r),a=Math.min(e,n,r);i>.9&&a<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),r<.2&&(o[t+4]+=1))}}()}(),this.setAttribute("position",new zg(i,3)),this.setAttribute("normal",new zg(i.slice(),3)),this.setAttribute("uv",new zg(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Uw(t.vertices,t.indices,t.radius,t.details)}}class Bw extends Uw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Bw(t.radius,t.detail)}}const zw=new em,Vw=new em,Gw=new em,Ww=new mg;class Hw extends Kg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const n=4,r=Math.pow(10,n),i=Math.cos(ff*e),o=t.getIndex(),a=t.getAttribute("position"),s=o?o.count:a.count,c=[0,0,0],l=["a","b","c"],u=new Array(3),h={},d=[];for(let t=0;t<s;t+=3){o?(c[0]=o.getX(t),c[1]=o.getX(t+1),c[2]=o.getX(t+2)):(c[0]=t,c[1]=t+1,c[2]=t+2);const{a:e,b:n,c:s}=Ww;if(e.fromBufferAttribute(a,c[0]),n.fromBufferAttribute(a,c[1]),s.fromBufferAttribute(a,c[2]),Ww.getNormal(Gw),u[0]="".concat(Math.round(e.x*r),",").concat(Math.round(e.y*r),",").concat(Math.round(e.z*r)),u[1]="".concat(Math.round(n.x*r),",").concat(Math.round(n.y*r),",").concat(Math.round(n.z*r)),u[2]="".concat(Math.round(s.x*r),",").concat(Math.round(s.y*r),",").concat(Math.round(s.z*r)),u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let t=0;t<3;t++){const e=(t+1)%3,n=u[t],r=u[e],o=Ww[l[t]],a=Ww[l[e]],s="".concat(n,"_").concat(r),p="".concat(r,"_").concat(n);p in h&&h[p]?(Gw.dot(h[p].normal)<=i&&(d.push(o.x,o.y,o.z),d.push(a.x,a.y,a.z)),h[p]=null):s in h||(h[s]={index0:c[t],index1:c[e],normal:Gw.clone()})}}for(const t in h)if(h[t]){const{index0:e,index1:n}=h[t];zw.fromBufferAttribute(a,e),Vw.fromBufferAttribute(a,n),d.push(zw.x,zw.y,zw.z),d.push(Vw.x,Vw.y,Vw.z)}this.setAttribute("position",new zg(d,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class qw extends Nw{constructor(t){super(t),this.uuid=gf(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new Nw).fromJSON(n))}return this}}const Xw=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const r=e&&e.length,i=r?e[0]*n:t.length;let o=Yw(t,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,c,l,u,h,d,p;if(r&&(o=function(t,e,n,r){const i=[];let o,a,s,c,l;for(o=0,a=e.length;o<a;o++)s=e[o]*r,c=o<a-1?e[o+1]*r:t.length,l=Yw(t,s,c,r,!1),l===l.next&&(l.steiner=!0),i.push(oS(l));for(i.sort(eS),o=0;o<i.length;o++)n=nS(i[o],n);return n}(t,e,o,n)),t.length>80*n){s=l=t[0],c=u=t[1];for(let e=n;e<i;e+=n)h=t[e],d=t[e+1],h<s&&(s=h),d<c&&(c=d),h>l&&(l=h),d>u&&(u=d);p=Math.max(l-s,u-c),p=0!==p?32767/p:0}return Zw(o,a,n,s,c,p,0),a};function Yw(t,e,n,r,i){let o,a;if(i===function(t,e,n,r){let i=0;for(let o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}(t,e,n,r)>0)for(o=e;o<n;o+=r)a=mS(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=mS(o,t[o],t[o+1],a);return a&&lS(a,a.next)&&(gS(a),a=a.next),a}function Kw(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!lS(r,r.next)&&0!==cS(r.prev,r,r.next))r=r.next;else{if(gS(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function Zw(t,e,n,r,i,o,a){if(!t)return;!a&&o&&function(t,e,n,r){let i=t;do{0===i.z&&(i.z=iS(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){let e,n,r,i,o,a,s,c,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ,r);e++);for(c=l;s>0||c>0&&r;)0!==s&&(0===c||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,c--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);let s,c,l=t;for(;t.prev!==t.next;)if(s=t.prev,c=t.next,o?$w(t,r,i,o):Jw(t))e.push(s.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),gS(t),t=c.next,l=c.next;else if((t=c)===l){a?1===a?Zw(t=Qw(Kw(t),e,n),e,n,r,i,o,2):2===a&&tS(t,e,n,r,i,o):Zw(Kw(t),e,n,r,i,o,1);break}}function Jw(t){const e=t.prev,n=t,r=t.next;if(cS(e,n,r)>=0)return!1;const i=e.x,o=n.x,a=r.x,s=e.y,c=n.y,l=r.y,u=i<o?i<a?i:a:o<a?o:a,h=s<c?s<l?s:l:c<l?c:l,d=i>o?i>a?i:a:o>a?o:a,p=s>c?s>l?s:l:c>l?c:l;let f=r.next;for(;f!==e;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&aS(i,s,o,c,a,l,f.x,f.y)&&cS(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function $w(t,e,n,r){const i=t.prev,o=t,a=t.next;if(cS(i,o,a)>=0)return!1;const s=i.x,c=o.x,l=a.x,u=i.y,h=o.y,d=a.y,p=s<c?s<l?s:l:c<l?c:l,f=u<h?u<d?u:d:h<d?h:d,m=s>c?s>l?s:l:c>l?c:l,g=u>h?u>d?u:d:h>d?h:d,y=iS(p,f,e,n,r),v=iS(m,g,e,n,r);let b=t.prevZ,x=t.nextZ;for(;b&&b.z>=y&&x&&x.z<=v;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==a&&aS(s,u,c,h,l,d,b.x,b.y)&&cS(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==a&&aS(s,u,c,h,l,d,x.x,x.y)&&cS(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;b&&b.z>=y;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==a&&aS(s,u,c,h,l,d,b.x,b.y)&&cS(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=v;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==a&&aS(s,u,c,h,l,d,x.x,x.y)&&cS(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function Qw(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!lS(i,o)&&uS(i,r,r.next,o)&&pS(i,o)&&pS(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),gS(r),gS(r.next),r=t=o),r=r.next}while(r!==t);return Kw(r)}function tS(t,e,n,r,i,o){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.i!==t.i&&sS(a,t)){let s=fS(a,t);return a=Kw(a,a.next),s=Kw(s,s.next),Zw(a,e,n,r,i,o,0),void Zw(s,e,n,r,i,o,0)}t=t.next}a=a.next}while(a!==t)}function eS(t,e){return t.x-e.x}function nS(t,e){const n=function(t,e){let n,r=e,i=-1/0;const o=t.x,a=t.y;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){const t=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(t<=o&&t>i&&(i=t,n=r.x<r.next.x?r:r.next,t===o))return n}r=r.next}while(r!==e);if(!n)return null;const s=n,c=n.x,l=n.y;let u,h=1/0;r=n;do{o>=r.x&&r.x>=c&&o!==r.x&&aS(a<l?o:i,a,c,l,a<l?i:o,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(o-r.x),pS(r,t)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&rS(n,r)))&&(n=r,h=u)),r=r.next}while(r!==s);return n}(t,e);if(!n)return e;const r=fS(n,t);return Kw(r,r.next),Kw(n,n.next)}function rS(t,e){return cS(t.prev,t,e.prev)<0&&cS(e.next,t,t.next)<0}function iS(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function oS(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function aS(t,e,n,r,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function sS(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&uS(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(pS(t,e)&&pS(e,t)&&function(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(cS(t.prev,t,e.prev)||cS(t,e.prev,e))||lS(t,e)&&cS(t.prev,t,t.next)>0&&cS(e.prev,e,e.next)>0)}function cS(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function lS(t,e){return t.x===e.x&&t.y===e.y}function uS(t,e,n,r){const i=dS(cS(t,e,n)),o=dS(cS(t,e,r)),a=dS(cS(n,r,t)),s=dS(cS(n,r,e));return i!==o&&a!==s||(!(0!==i||!hS(t,n,e))||(!(0!==o||!hS(t,r,e))||(!(0!==a||!hS(n,t,r))||!(0!==s||!hS(n,e,r)))))}function hS(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function dS(t){return t>0?1:t<0?-1:0}function pS(t,e){return cS(t.prev,t,t.next)<0?cS(t,e,t.next)>=0&&cS(t,t.prev,e)>=0:cS(t,e,t.prev)<0||cS(t,t.next,e)<0}function fS(t,e){const n=new yS(t.i,t.x,t.y),r=new yS(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function mS(t,e,n,r){const i=new yS(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function gS(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function yS(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class vS{static area(t){const e=t.length;let n=0;for(let r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n}static isClockWise(t){return vS.area(t)<0}static triangulateShape(t,e){const n=[],r=[],i=[];bS(t),xS(n,t);let o=t.length;e.forEach(bS);for(let s=0;s<e.length;s++)r.push(o),o+=e[s].length,xS(n,e[s]);const a=Xw(n,r);for(let s=0;s<a.length;s+=3)i.push(a.slice(s,s+3));return i}}function bS(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function xS(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class _S extends Kg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qw([new Sf(.5,.5),new Sf(-.5,.5),new Sf(-.5,-.5),new Sf(.5,-.5)]),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],i=[];for(let a=0,s=t.length;a<s;a++){o(t[a])}function o(t){const o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1,c=void 0!==e.depth?e.depth:1;let l=void 0===e.bevelEnabled||e.bevelEnabled,u=void 0!==e.bevelThickness?e.bevelThickness:.2,h=void 0!==e.bevelSize?e.bevelSize:u-.1,d=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3;const f=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:wS;let g,y,v,b,x,_=!1;f&&(g=f.getSpacedPoints(s),_=!0,l=!1,y=f.computeFrenetFrames(s,!1),v=new em,b=new em,x=new em),l||(p=0,u=0,h=0,d=0);const w=t.extractPoints(a);let S=w.shape;const T=w.holes;if(!vS.isClockWise(S)){S=S.reverse();for(let t=0,e=T.length;t<e;t++){const e=T[t];vS.isClockWise(e)&&(T[t]=e.reverse())}}const E=vS.triangulateShape(S,T),A=S;for(let e=0,n=T.length;e<n;e++){const t=T[e];S=S.concat(t)}function M(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().addScaledVector(e,n)}const O=S.length,C=E.length;function k(t,e,n){let r,i,o;const a=t.x-e.x,s=t.y-e.y,c=n.x-t.x,l=n.y-t.y,u=a*a+s*s,h=a*l-s*c;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(c*c+l*l),p=e.x-s/h,f=e.y+a/h,m=((n.x-l/d-p)*l-(n.y+c/d-f)*c)/(a*l-s*c);r=p+a*m-t.x,i=f+s*m-t.y;const g=r*r+i*i;if(g<=2)return new Sf(r,i);o=Math.sqrt(g/2)}else{let t=!1;a>Number.EPSILON?c>Number.EPSILON&&(t=!0):a<-Number.EPSILON?c<-Number.EPSILON&&(t=!0):Math.sign(s)===Math.sign(l)&&(t=!0),t?(r=-s,i=a,o=Math.sqrt(u)):(r=a,i=s,o=Math.sqrt(u/2))}return new Sf(r/o,i/o)}const P=[];for(let e=0,n=A.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),P[e]=k(A[e],A[r],A[i]);const I=[];let N,R=P.concat();for(let e=0,n=T.length;e<n;e++){const t=T[e];N=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),N[e]=k(t[e],t[r],t[i]);I.push(N),R=R.concat(N)}for(let e=0;e<p;e++){const t=e/p,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,i=A.length;e<i;e++){const t=M(A[e],P[e],r);F(t.x,t.y,-n)}for(let e=0,i=T.length;e<i;e++){const t=T[e];N=I[e];for(let e=0,i=t.length;e<i;e++){const i=M(t[e],N[e],r);F(i.x,i.y,-n)}}}const D=h+d;for(let e=0;e<O;e++){const t=l?M(S[e],R[e],D):S[e];_?(b.copy(y.normals[0]).multiplyScalar(t.x),v.copy(y.binormals[0]).multiplyScalar(t.y),x.copy(g[0]).add(b).add(v),F(x.x,x.y,x.z)):F(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<O;t++){const n=l?M(S[t],R[t],D):S[t];_?(b.copy(y.normals[e]).multiplyScalar(n.x),v.copy(y.binormals[e]).multiplyScalar(n.y),x.copy(g[e]).add(b).add(v),F(x.x,x.y,x.z)):F(n.x,n.y,c/s*e)}for(let e=p-1;e>=0;e--){const t=e/p,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,i=A.length;e<i;e++){const t=M(A[e],P[e],r);F(t.x,t.y,c+n)}for(let e=0,i=T.length;e<i;e++){const t=T[e];N=I[e];for(let e=0,i=t.length;e<i;e++){const i=M(t[e],N[e],r);_?F(i.x,i.y+g[s-1].y,g[s-1].x+n):F(i.x,i.y,c+n)}}}function L(t,e){let n=t.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=t.length-1);for(let t=0,n=s+2*p;t<n;t++){const n=O*t,o=O*(t+1);U(e+r+n,e+i+n,e+i+o,e+r+o)}}}function F(t,e,n){o.push(t),o.push(e),o.push(n)}function j(t,e,i){B(t),B(e),B(i);const o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);z(a[0]),z(a[1]),z(a[2])}function U(t,e,i,o){B(t),B(e),B(o),B(e),B(i),B(o);const a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);z(s[0]),z(s[1]),z(s[3]),z(s[1]),z(s[2]),z(s[3])}function B(t){r.push(o[3*t+0]),r.push(o[3*t+1]),r.push(o[3*t+2])}function z(t){i.push(t.x),i.push(t.y)}!function(){const t=r.length/3;if(l){let t=0,e=O*t;for(let n=0;n<C;n++){const t=E[n];j(t[2]+e,t[1]+e,t[0]+e)}t=s+2*p,e=O*t;for(let n=0;n<C;n++){const t=E[n];j(t[0]+e,t[1]+e,t[2]+e)}}else{for(let t=0;t<C;t++){const e=E[t];j(e[2],e[1],e[0])}for(let t=0;t<C;t++){const e=E[t];j(e[0]+O*s,e[1]+O*s,e[2]+O*s)}}n.addGroup(t,r.length/3-t,0)}(),function(){const t=r.length/3;let e=0;L(A,e),e+=A.length;for(let n=0,r=T.length;n<r;n++){const t=T[n];L(t,e),e+=t.length}n.addGroup(t,r.length/3-t,1)}()}this.setAttribute("position",new zg(r,3)),this.setAttribute("uv",new zg(i,2)),this.computeVertexNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const e=t[r];n.shapes.push(e.uuid)}else n.shapes.push(t.uuid);n.options=Object.assign({},e),void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let i=0,o=t.shapes.length;i<o;i++){const r=e[t.shapes[i]];n.push(r)}const r=t.options.extrudePath;return void 0!==r&&(t.options.extrudePath=(new Pw[r.type]).fromJSON(r)),new _S(n,t.options)}}const wS={generateTopUV:function(t,e,n,r,i){const o=e[3*n],a=e[3*n+1],s=e[3*r],c=e[3*r+1],l=e[3*i],u=e[3*i+1];return[new Sf(o,a),new Sf(s,c),new Sf(l,u)]},generateSideWallUV:function(t,e,n,r,i,o){const a=e[3*n],s=e[3*n+1],c=e[3*n+2],l=e[3*r],u=e[3*r+1],h=e[3*r+2],d=e[3*i],p=e[3*i+1],f=e[3*i+2],m=e[3*o],g=e[3*o+1],y=e[3*o+2];return Math.abs(s-u)<Math.abs(a-l)?[new Sf(a,1-c),new Sf(l,1-h),new Sf(d,1-f),new Sf(m,1-y)]:[new Sf(s,1-c),new Sf(u,1-h),new Sf(p,1-f),new Sf(g,1-y)]}};class SS extends Uw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new SS(t.radius,t.detail)}}class TS extends Uw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new TS(t.radius,t.detail)}}class ES extends Kg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},n=Math.max(3,n),r=Math.max(1,r);const a=[],s=[],c=[],l=[];let u=t;const h=(e-t)/r,d=new em,p=new Sf;for(let f=0;f<=r;f++){for(let t=0;t<=n;t++){const r=i+t/n*o;d.x=u*Math.cos(r),d.y=u*Math.sin(r),s.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(d.x/e+1)/2,p.y=(d.y/e+1)/2,l.push(p.x,p.y)}u+=h}for(let f=0;f<r;f++){const t=f*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r,o=r+n+1,s=r+n+2,c=r+1;a.push(i,o,c),a.push(o,s,c)}}this.setIndex(a),this.setAttribute("position",new zg(s,3)),this.setAttribute("normal",new zg(c,3)),this.setAttribute("uv",new zg(l,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ES(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class AS extends Kg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qw([new Sf(0,.5),new Sf(-.5,-.5),new Sf(.5,-.5)]),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],r=[],i=[],o=[];let a=0,s=0;if(!1===Array.isArray(t))c(t);else for(let l=0;l<t.length;l++)c(t[l]),this.addGroup(a,s,l),a+=s,s=0;function c(t){const a=r.length/3,c=t.extractPoints(e);let l=c.shape;const u=c.holes;!1===vS.isClockWise(l)&&(l=l.reverse());for(let e=0,n=u.length;e<n;e++){const t=u[e];!0===vS.isClockWise(t)&&(u[e]=t.reverse())}const h=vS.triangulateShape(l,u);for(let e=0,n=u.length;e<n;e++){const t=u[e];l=l.concat(t)}for(let e=0,n=l.length;e<n;e++){const t=l[e];r.push(t.x,t.y,0),i.push(0,0,1),o.push(t.x,t.y)}for(let e=0,r=h.length;e<r;e++){const t=h[e],r=t[0]+a,i=t[1]+a,o=t[2]+a;n.push(r,i,o),s+=3}}this.setIndex(n),this.setAttribute("position",new zg(r,3)),this.setAttribute("normal",new zg(i,3)),this.setAttribute("uv",new zg(o,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let r=0,i=t.shapes.length;r<i;r++){const i=e[t.shapes[r]];n.push(i)}return new AS(n,t.curveSegments)}}class MS extends Kg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let c=0;const l=[],u=new em,h=new em,d=[],p=[],f=[],m=[];for(let g=0;g<=n;g++){const d=[],y=g/n;let v=0;0===g&&0===o?v=.5/e:g===n&&s===Math.PI&&(v=-.5/e);for(let n=0;n<=e;n++){const s=n/e;u.x=-t*Math.cos(r+s*i)*Math.sin(o+y*a),u.y=t*Math.cos(o+y*a),u.z=t*Math.sin(r+s*i)*Math.sin(o+y*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(s+v,1-y),d.push(c++)}l.push(d)}for(let g=0;g<n;g++)for(let t=0;t<e;t++){const e=l[g][t+1],r=l[g][t],i=l[g+1][t],a=l[g+1][t+1];(0!==g||o>0)&&d.push(e,r,a),(g!==n-1||s<Math.PI)&&d.push(r,i,a)}this.setIndex(d),this.setAttribute("position",new zg(p,3)),this.setAttribute("normal",new zg(f,3)),this.setAttribute("uv",new zg(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new MS(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class OS extends Uw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new OS(t.radius,t.detail)}}class CS extends Kg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],s=[],c=[],l=new em,u=new em,h=new em;for(let d=0;d<=n;d++)for(let o=0;o<=r;o++){const p=o/r*i,f=d/n*Math.PI*2;u.x=(t+e*Math.cos(f))*Math.cos(p),u.y=(t+e*Math.cos(f))*Math.sin(p),u.z=e*Math.sin(f),a.push(u.x,u.y,u.z),l.x=t*Math.cos(p),l.y=t*Math.sin(p),h.subVectors(u,l).normalize(),s.push(h.x,h.y,h.z),c.push(o/r),c.push(d/n)}for(let d=1;d<=n;d++)for(let t=1;t<=r;t++){const e=(r+1)*d+t-1,n=(r+1)*(d-1)+t-1,i=(r+1)*(d-1)+t,a=(r+1)*d+t;o.push(e,n,a),o.push(n,i,a)}this.setIndex(o),this.setAttribute("position",new zg(a,3)),this.setAttribute("normal",new zg(s,3)),this.setAttribute("uv",new zg(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new CS(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class kS extends Kg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],s=[],c=[],l=[],u=new em,h=new em,d=new em,p=new em,f=new em,m=new em,g=new em;for(let v=0;v<=n;++v){const a=v/n*i*Math.PI*2;y(a,i,o,t,d),y(a+.01,i,o,t,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let t=0;t<=r;++t){const i=t/r*Math.PI*2,o=-e*Math.cos(i),a=e*Math.sin(i);u.x=d.x+(o*g.x+a*f.x),u.y=d.y+(o*g.y+a*f.y),u.z=d.z+(o*g.z+a*f.z),s.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),c.push(h.x,h.y,h.z),l.push(v/n),l.push(t/r)}}for(let v=1;v<=n;v++)for(let t=1;t<=r;t++){const e=(r+1)*(v-1)+(t-1),n=(r+1)*v+(t-1),i=(r+1)*v+t,o=(r+1)*(v-1)+t;a.push(e,n,o),a.push(n,i,o)}function y(t,e,n,r,i){const o=Math.cos(t),a=Math.sin(t),s=n/e*t,c=Math.cos(s);i.x=r*(2+c)*.5*o,i.y=r*(2+c)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new zg(s,3)),this.setAttribute("normal",new zg(c,3)),this.setAttribute("uv",new zg(l,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new kS(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class PS extends Kg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Cw(new em(-1,-1,0),new em(-1,1,0),new em(1,1,0)),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i};const o=t.computeFrenetFrames(e,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new em,s=new em,c=new Sf;let l=new em;const u=[],h=[],d=[],p=[];function f(i){l=t.getPointAt(i/e,l);const c=o.normals[i],d=o.binormals[i];for(let t=0;t<=r;t++){const e=t/r*Math.PI*2,i=Math.sin(e),o=-Math.cos(e);s.x=o*c.x+i*d.x,s.y=o*c.y+i*d.y,s.z=o*c.z+i*d.z,s.normalize(),h.push(s.x,s.y,s.z),a.x=l.x+n*s.x,a.y=l.y+n*s.y,a.z=l.z+n*s.z,u.push(a.x,a.y,a.z)}}!function(){for(let t=0;t<e;t++)f(t);f(!1===i?e:0),function(){for(let t=0;t<=e;t++)for(let n=0;n<=r;n++)c.x=t/e,c.y=n/r,d.push(c.x,c.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=r;e++){const n=(r+1)*(t-1)+(e-1),i=(r+1)*t+(e-1),o=(r+1)*t+e,a=(r+1)*(t-1)+e;p.push(n,i,a),p.push(i,o,a)}}()}(),this.setIndex(p),this.setAttribute("position",new zg(u,3)),this.setAttribute("normal",new zg(h,3)),this.setAttribute("uv",new zg(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new PS((new Pw[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class IS extends Kg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){const e=[],n=new Set,r=new em,i=new em;if(null!==t.index){const o=t.attributes.position,a=t.index;let s=t.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let t=0,c=s.length;t<c;++t){const c=s[t],l=c.start;for(let t=l,s=l+c.count;t<s;t+=3)for(let c=0;c<3;c++){const s=a.getX(t+c),l=a.getX(t+(c+1)%3);r.fromBufferAttribute(o,s),i.fromBufferAttribute(o,l),!0===NS(r,i,n)&&(e.push(r.x,r.y,r.z),e.push(i.x,i.y,i.z))}}}else{const o=t.attributes.position;for(let t=0,a=o.count/3;t<a;t++)for(let s=0;s<3;s++){const a=3*t+s,c=3*t+(s+1)%3;r.fromBufferAttribute(o,a),i.fromBufferAttribute(o,c),!0===NS(r,i,n)&&(e.push(r.x,r.y,r.z),e.push(i.x,i.y,i.z))}}this.setAttribute("position",new zg(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function NS(t,e,n){const r="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z),i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z);return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var RS=Object.freeze({__proto__:null,BoxGeometry:my,CapsuleGeometry:Dw,CircleGeometry:Lw,ConeGeometry:jw,CylinderGeometry:Fw,DodecahedronGeometry:Bw,EdgesGeometry:Hw,ExtrudeGeometry:_S,IcosahedronGeometry:SS,LatheGeometry:Rw,OctahedronGeometry:TS,PlaneGeometry:Uy,PolyhedronGeometry:Uw,RingGeometry:ES,ShapeGeometry:AS,SphereGeometry:MS,TetrahedronGeometry:OS,TorusGeometry:CS,TorusKnotGeometry:kS,TubeGeometry:PS,WireframeGeometry:IS});class DS extends Sg{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new xg(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class LS extends xy{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class FS extends Sg{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new xg(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xg(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gp,this.normalScale=new Sf(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zm,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class jS extends FS{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Sf(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return yf(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new xg(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new xg(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new xg(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!==t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!==t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!==t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!==t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!==t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!==t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class US extends Sg{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new xg(16777215),this.specular=new xg(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xg(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gp,this.normalScale=new Sf(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zm,this.combine=xh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class BS extends Sg{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new xg(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xg(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gp,this.normalScale=new Sf(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class zS extends Sg{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gp,this.normalScale=new Sf(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class VS extends Sg{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new xg(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xg(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gp,this.normalScale=new Sf(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zm,this.combine=xh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class GS extends Sg{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new xg(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gp,this.normalScale=new Sf(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class WS extends U_{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function HS(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function qS(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function XS(t){const e=t.length,n=new Array(e);for(let r=0;r!==e;++r)n[r]=r;return n.sort((function(e,n){return t[e]-t[n]})),n}function YS(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*e;for(let n=0;n!==e;++n)i[a++]=t[r+n]}return i}function KS(t,e,n,r){let i=1,o=t[0];for(;void 0!==o&&void 0===o[r];)o=t[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)}const ZS={convertArray:HS,isTypedArray:qS,getKeyframeOrder:XS,sortedArray:YS,flattenJSON:KS,subclip:function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const o=t.clone();o.name=e;const a=[];for(let c=0;c<o.tracks.length;++c){const t=o.tracks[c],e=t.getValueSize(),s=[],l=[];for(let o=0;o<t.times.length;++o){const a=t.times[o]*i;if(!(a<n||a>=r)){s.push(t.times[o]);for(let n=0;n<e;++n)l.push(t.values[o*e+n])}}0!==s.length&&(t.times=HS(s,t.times.constructor),t.values=HS(l,t.values.constructor),a.push(t))}o.tracks=a;let s=1/0;for(let c=0;c<o.tracks.length;++c)s>o.tracks[c].times[0]&&(s=o.tracks[c].times[0]);for(let c=0;c<o.tracks.length;++c)o.tracks[c].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);const i=n.tracks.length,o=e/r;for(let a=0;a<i;++a){const e=n.tracks[a],r=e.ValueTypeName;if("bool"===r||"string"===r)continue;const i=t.tracks.find((function(t){return t.name===e.name&&t.ValueTypeName===r}));if(void 0===i)continue;let s=0;const c=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=c/3);let l=0;const u=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=u/3);const h=e.times.length-1;let d;if(o<=e.times[0]){const t=s,n=c-s;d=e.values.slice(t,n)}else if(o>=e.times[h]){const t=h*c+s,n=t+c-s;d=e.values.slice(t,n)}else{const t=e.createInterpolant(),n=s,r=c-s;t.evaluate(o),d=t.resultBuffer.slice(n,r)}if("quaternion"===r){(new tm).fromArray(d).normalize().conjugate().toArray(d)}const p=i.times.length;for(let t=0;t<p;++t){const e=t*u+l;if("quaternion"===r)tm.multiplyQuaternionsFlat(i.values,e,d,0,i.values,e);else{const t=u-2*l;for(let n=0;n<t;++n)i.values[e+n]-=d[n]}}}return t.blendMode=up,t}};class JS{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let o;n:{r:if(!(t<r)){for(let o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}if(t>=i)break t;{const a=e[1];t<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}for(;n<o;){const r=n+o>>>1;t<e[r]?o=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let o=0;o!==r;++o)e[o]=n[i+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class $S extends JS{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ap,endingEnd:ap}}intervalChanged_(t,e,n){const r=this.parameterPositions;let i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case sp:i=t,a=2*e-n;break;case cp:i=r.length-2,a=e+r[i]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case sp:o=t,s=2*n-e;break;case cp:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}const c=.5*(n-e),l=this.valueSize;this._weightPrev=c/(e-a),this._weightNext=c/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,c=s-a,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-e)/(r-e),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,y=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,v=(-1-d)*m+(1.5+d)*f+.5*p,b=d*m-d*f;for(let x=0;x!==a;++x)i[x]=g*o[l+x]+y*o[c+x]+v*o[s+x]+b*o[u+x];return i}}class QS extends JS{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,c=s-a,l=(n-e)/(r-e),u=1-l;for(let h=0;h!==a;++h)i[h]=o[c+h]*u+o[s+h]*l;return i}}class tT extends JS{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class eT{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=HS(e,this.TimeBufferType),this.values=HS(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:HS(t.times,Array),values:HS(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new tT(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new QS(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new $S(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case rp:e=this.InterpolantFactoryMethodDiscrete;break;case ip:e=this.InterpolantFactoryMethodLinear;break;case op:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return rp;case this.InterpolantFactoryMethodLinear:return ip;case this.InterpolantFactoryMethodSmooth:return op}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const t=this.getValueSize();this.times=n.slice(i,o),this.values=this.values.slice(i*t,o*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==i;a++){const e=n[a];if("number"===typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,e),t=!1;break}if(null!==o&&o>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,e,o),t=!1;break}o=e}if(void 0!==r&&qS(r))for(let a=0,s=r.length;a!==s;++a){const e=r[a];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,e),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===op,i=t.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=t[a];if(s!==t[a+1]&&(1!==a||s!==t[0]))if(r)i=!0;else{const t=a*n,r=t-n,o=t+n;for(let a=0;a!==n;++a){const n=e[t+a];if(n!==e[r+a]||n!==e[o+a]){i=!0;break}}}if(i){if(a!==o){t[o]=t[a];const r=a*n,i=o*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++o}}if(i>0){t[o]=t[i];for(let t=i*n,r=o*n,a=0;a!==n;++a)e[r+a]=e[t+a];++o}return o!==t.length?(this.times=t.slice(0,o),this.values=e.slice(0,o*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}eT.prototype.TimeBufferType=Float32Array,eT.prototype.ValueBufferType=Float32Array,eT.prototype.DefaultInterpolation=ip;class nT extends eT{constructor(t,e,n){super(t,e,n)}}nT.prototype.ValueTypeName="bool",nT.prototype.ValueBufferType=Array,nT.prototype.DefaultInterpolation=rp,nT.prototype.InterpolantFactoryMethodLinear=void 0,nT.prototype.InterpolantFactoryMethodSmooth=void 0;class rT extends eT{}rT.prototype.ValueTypeName="color";class iT extends eT{}iT.prototype.ValueTypeName="number";class oT extends JS{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-e)/(r-e);let c=t*a;for(let l=c+a;c!==l;c+=4)tm.slerpFlat(i,0,o,c-a,o,c,s);return i}}class aT extends eT{InterpolantFactoryMethodLinear(t){return new oT(this.times,this.values,this.getValueSize(),t)}}aT.prototype.ValueTypeName="quaternion",aT.prototype.InterpolantFactoryMethodSmooth=void 0;class sT extends eT{constructor(t,e,n){super(t,e,n)}}sT.prototype.ValueTypeName="string",sT.prototype.ValueBufferType=Array,sT.prototype.DefaultInterpolation=rp,sT.prototype.InterpolantFactoryMethodLinear=void 0,sT.prototype.InterpolantFactoryMethodSmooth=void 0;class cT extends eT{}cT.prototype.ValueTypeName="vector";class lT{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:lp;this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=gf(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let o=0,a=n.length;o!==a;++o)e.push(uT(n[o]).scale(r));const i=new this(t.name,t.duration,e,t.blendMode);return i.uuid=t.uuid,i}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let i=0,o=n.length;i!==o;++i)e.push(eT.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const i=e.length,o=[];for(let a=0;a<i;a++){let t=[],s=[];t.push((a+i-1)%i,a,(a+1)%i),s.push(0,1,0);const c=XS(t);t=YS(t,1,c),s=YS(s,1,c),r||0!==t[0]||(t.push(i),s.push(s[0])),o.push(new iT(".morphTargetInfluences["+e[a].name+"]",t,s).scale(1/n))}return new this(t,-1,o)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let a=0,s=t.length;a<s;a++){const e=t[a],n=e.name.match(i);if(n&&n.length>1){const t=n[1];let i=r[t];i||(r[t]=i=[]),i.push(e)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,r,i){if(0!==n.length){const o=[],a=[];KS(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.fps||30,a=t.blendMode;let s=t.length||-1;const c=t.hierarchy||[];for(let l=0;l<c.length;l++){const t=c[l].keys;if(t&&0!==t.length)if(t[0].morphTargets){const e={};let n;for(n=0;n<t.length;n++)if(t[n].morphTargets)for(let r=0;r<t[n].morphTargets.length;r++)e[t[n].morphTargets[r]]=-1;for(const i in e){const e=[],o=[];for(let r=0;r!==t[n].morphTargets.length;++r){const r=t[n];e.push(r.time),o.push(r.morphTarget===i?1:0)}r.push(new iT(".morphTargetInfluence["+i+"]",e,o))}s=e.length*o}else{const i=".bones["+e[l].name+"]";n(cT,i+".position",t,"pos",r),n(aT,i+".quaternion",t,"rot",r),n(cT,i+".scale",t,"scl",r)}}if(0===r.length)return null;return new this(i,s,r,a)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function uT(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return iT;case"vector":case"vector2":case"vector3":case"vector4":return cT;case"color":return rT;case"quaternion":return aT;case"bool":case"boolean":return nT;case"string":return sT}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];KS(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const hT={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class dT{constructor(t,e,n){const r=this;let i,o=!1,a=0,s=0;const c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){s++,!1===o&&void 0!==r.onStart&&r.onStart(t,a,s),o=!0},this.itemEnd=function(t){a++,void 0!==r.onProgress&&r.onProgress(t,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return c.push(t,e),this},this.removeHandler=function(t){const e=c.indexOf(t);return-1!==e&&c.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=c.length;e<n;e+=2){const n=c[e],r=c[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}}const pT=new dT;class fT{constructor(t){this.manager=void 0!==t?t:pT,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}fT.DEFAULT_MATERIAL_NAME="__DEFAULT";const mT={};class gT extends Error{constructor(t,e){super(t),this.response=e}}class yT extends fT{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=hT.get(t);if(void 0!==i)return this.manager.itemStart(t),setTimeout((()=>{e&&e(i),this.manager.itemEnd(t)}),0),i;if(void 0!==mT[t])return void mT[t].push({onLoad:e,onProgress:n,onError:r});mT[t]=[],mT[t].push({onLoad:e,onProgress:n,onError:r});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(o).then((e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const n=mT[t],r=e.body.getReader(),i=e.headers.get("X-File-Size")||e.headers.get("Content-Length"),o=i?parseInt(i):0,a=0!==o;let s=0;const c=new ReadableStream({start(t){!function e(){r.read().then((r=>{let{done:i,value:c}=r;if(i)t.close();else{s+=c.byteLength;const r=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(r)}t.enqueue(c),e()}}),(e=>{t.error(e)}))}()}});return new Response(c)}throw new gT('fetch for "'.concat(e.url,'" responded with ').concat(e.status,": ").concat(e.statusText),e)})).then((t=>{switch(s){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>(new DOMParser).parseFromString(t,a)));case"json":return t.json();default:if(void 0===a)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(a),n=e&&e[1]?e[1].toLowerCase():void 0,r=new TextDecoder(n);return t.arrayBuffer().then((t=>r.decode(t)))}}})).then((e=>{hT.add(t,e);const n=mT[t];delete mT[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onLoad&&r.onLoad(e)}})).catch((e=>{const n=mT[t];if(void 0===n)throw this.manager.itemError(t),e;delete mT[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class vT extends fT{constructor(t){super(t)}load(t,e,n,r){const i=this,o=new yT(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(sCt){r?r(sCt):console.error(sCt),i.manager.itemError(t)}}),n,r)}parse(t){const e=[];for(let n=0;n<t.length;n++){const r=lT.parse(t[n]);e.push(r)}return e}}class bT extends fT{constructor(t){super(t)}load(t,e,n,r){const i=this,o=[],a=new cw,s=new yT(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);let c=0;function l(l){s.load(t[l],(function(t){const n=i.parse(t,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},c+=1,6===c&&(1===n.mipmapCount&&(a.minFilter=Xh),a.image=o,a.format=n.format,a.needsUpdate=!0,e&&e(a))}),n,r)}if(Array.isArray(t))for(let u=0,h=t.length;u<h;++u)l(u);else s.load(t,(function(t){const n=i.parse(t,!0);if(n.isCubemap){const t=n.mipmaps.length/n.mipmapCount;for(let e=0;e<t;e++){o[e]={mipmaps:[]};for(let t=0;t<n.mipmapCount;t++)o[e].mipmaps.push(n.mipmaps[e*n.mipmapCount+t]),o[e].format=n.format,o[e].width=n.width,o[e].height=n.height}a.image=o}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Xh),a.format=n.format,a.needsUpdate=!0,e&&e(a)}),n,r);return a}}class xT extends fT{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=hT.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const a=Cf("img");function s(){l(),hT.add(t,this),e&&e(this),i.manager.itemEnd(t)}function c(e){l(),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}function l(){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",c,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a}}class _T extends fT{constructor(t){super(t)}load(t,e,n,r){const i=new Oy;i.colorSpace=bp;const o=new xT(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(t[n],(function(t){i.images[n]=t,a++,6===a&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}for(let c=0;c<t.length;++c)s(c);return i}}class wT extends fT{constructor(t){super(t)}load(t,e,n,r){const i=this,o=new a_,a=new yT(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(i.withCredentials),a.load(t,(function(t){let n;try{n=i.parse(t)}catch(sO){if(void 0===r)return void console.error(sO);r(sO)}void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Bh,o.wrapT=void 0!==n.wrapT?n.wrapT:Bh,o.magFilter=void 0!==n.magFilter?n.magFilter:Xh,o.minFilter=void 0!==n.minFilter?n.minFilter:Xh,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(o.colorSpace=n.colorSpace),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=Zh),1===n.mipmapCount&&(o.minFilter=Xh),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,e&&e(o,n)}),n,r),o}}class ST extends fT{constructor(t){super(t)}load(t,e,n,r){const i=new qf,o=new xT(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(t){i.image=t,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}class TT extends ig{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new xg(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}class ET extends TT{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ig.DEFAULT_UP),this.updateMatrix(),this.groundColor=new xg(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const AT=new Pm,MT=new em,OT=new em;class CT{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Sf(512,512),this.map=null,this.mapPass=null,this.matrix=new Pm,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ly,this._frameExtents=new Sf(1,1),this._viewportCount=1,this._viewports=[new Xf(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;MT.setFromMatrixPosition(t.matrixWorld),e.position.copy(MT),OT.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(OT),e.updateMatrixWorld(),AT.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(AT),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(AT)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class kT extends CT{constructor(){super(new Ey(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*mf*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class PT extends TT{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ig.DEFAULT_UP),this.updateMatrix(),this.target=new ig,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.map=null,this.shadow=new kT}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const IT=new Pm,NT=new em,RT=new em;class DT extends CT{constructor(){super(new Ey(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Sf(4,2),this._viewportCount=6,this._viewports=[new Xf(2,1,1,1),new Xf(0,1,1,1),new Xf(3,1,1,1),new Xf(1,1,1,1),new Xf(3,0,1,1),new Xf(1,0,1,1)],this._cubeDirections=[new em(1,0,0),new em(-1,0,0),new em(0,0,1),new em(0,0,-1),new em(0,1,0),new em(0,-1,0)],this._cubeUps=[new em(0,1,0),new em(0,1,0),new em(0,1,0),new em(0,1,0),new em(0,0,1),new em(0,0,-1)]}updateMatrices(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,r=this.matrix,i=t.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),NT.setFromMatrixPosition(t.matrixWorld),n.position.copy(NT),RT.copy(n.position),RT.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(RT),n.updateMatrixWorld(),r.makeTranslation(-NT.x,-NT.y,-NT.z),IT.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(IT)}}class LT extends TT{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new DT}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class FT extends CT{constructor(){super(new $y(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class jT extends TT{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ig.DEFAULT_UP),this.updateMatrix(),this.target=new ig,this.shadow=new FT}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class UT extends TT{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class BT extends TT{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class zT{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new em)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*r),e.addScaledVector(o[2],.488603*i),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*r*1.092548),e.addScaledVector(o[5],r*i*1.092548),e.addScaledVector(o[6],.315392*(3*i*i-1)),e.addScaledVector(o[7],n*i*1.092548),e.addScaledVector(o[8],.546274*(n*n-r*r)),e}getIrradianceAt(t,e){const n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*r),e.addScaledVector(o[2],1.023328*i),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*r),e.addScaledVector(o[5],.858086*r*i),e.addScaledVector(o[6],.743125*i*i-.247708),e.addScaledVector(o[7],.858086*n*i),e.addScaledVector(o[8],.429043*(n*n-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}static getBasisAt(t,e){const n=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*n*i,e[8]=.546274*(n*n-r*r)}}class VT extends TT{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zT;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class GT extends fT{constructor(t){super(t),this.textures={}}load(t,e,n,r){const i=this,o=new yT(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(sCt){r?r(sCt):console.error(sCt),i.manager.itemError(t)}}),n,r)}parse(t){const e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const r=GT.createMaterialFromType(t.type);if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&void 0!==r.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.sheen&&(r.sheen=t.sheen),void 0!==t.sheenColor&&(r.sheenColor=(new xg).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(r.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==r.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==r.specular&&r.specular.setHex(t.specular),void 0!==t.specularIntensity&&(r.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.dispersion&&(r.dispersion=t.dispersion),void 0!==t.iridescence&&(r.iridescence=t.iridescence),void 0!==t.iridescenceIOR&&(r.iridescenceIOR=t.iridescenceIOR),void 0!==t.iridescenceThicknessRange&&(r.iridescenceThicknessRange=t.iridescenceThicknessRange),void 0!==t.transmission&&(r.transmission=t.transmission),void 0!==t.thickness&&(r.thickness=t.thickness),void 0!==t.attenuationDistance&&(r.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(t.attenuationColor),void 0!==t.anisotropy&&(r.anisotropy=t.anisotropy),void 0!==t.anisotropyRotation&&(r.anisotropyRotation=t.anisotropyRotation),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.shadowSide&&(r.shadowSide=t.shadowSide),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.alphaHash&&(r.alphaHash=t.alphaHash),void 0!==t.depthFunc&&(r.depthFunc=t.depthFunc),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.blendSrc&&(r.blendSrc=t.blendSrc),void 0!==t.blendDst&&(r.blendDst=t.blendDst),void 0!==t.blendEquation&&(r.blendEquation=t.blendEquation),void 0!==t.blendSrcAlpha&&(r.blendSrcAlpha=t.blendSrcAlpha),void 0!==t.blendDstAlpha&&(r.blendDstAlpha=t.blendDstAlpha),void 0!==t.blendEquationAlpha&&(r.blendEquationAlpha=t.blendEquationAlpha),void 0!==t.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(t.blendColor),void 0!==t.blendAlpha&&(r.blendAlpha=t.blendAlpha),void 0!==t.stencilWriteMask&&(r.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(r.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(r.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(r.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(r.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(r.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(r.stencilZPass=t.stencilZPass),void 0!==t.stencilWrite&&(r.stencilWrite=t.stencilWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),void 0!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.alphaToCoverage&&(r.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(r.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.forceSinglePass&&(r.forceSinglePass=t.forceSinglePass),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.vertexColors&&("number"===typeof t.vertexColors?r.vertexColors=t.vertexColors>0:r.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const i in t.uniforms){const e=t.uniforms[i];switch(r.uniforms[i]={},e.type){case"t":r.uniforms[i].value=n(e.value);break;case"c":r.uniforms[i].value=(new xg).setHex(e.value);break;case"v2":r.uniforms[i].value=(new Sf).fromArray(e.value);break;case"v3":r.uniforms[i].value=(new em).fromArray(e.value);break;case"v4":r.uniforms[i].value=(new Xf).fromArray(e.value);break;case"m3":r.uniforms[i].value=(new Tf).fromArray(e.value);break;case"m4":r.uniforms[i].value=(new Pm).fromArray(e.value);break;default:r.uniforms[i].value=e.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.glslVersion&&(r.glslVersion=t.glslVersion),void 0!==t.extensions)for(const i in t.extensions)r.extensions[i]=t.extensions[i];if(void 0!==t.lights&&(r.lights=t.lights),void 0!==t.clipping&&(r.clipping=t.clipping),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),r.normalScale=(new Sf).fromArray(e)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.specularIntensityMap&&(r.specularIntensityMap=n(t.specularIntensityMap)),void 0!==t.specularColorMap&&(r.specularColorMap=n(t.specularColorMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapRotation&&r.envMapRotation.fromArray(t.envMapRotation),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(r.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Sf).fromArray(t.clearcoatNormalScale)),void 0!==t.iridescenceMap&&(r.iridescenceMap=n(t.iridescenceMap)),void 0!==t.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),void 0!==t.transmissionMap&&(r.transmissionMap=n(t.transmissionMap)),void 0!==t.thicknessMap&&(r.thicknessMap=n(t.thicknessMap)),void 0!==t.anisotropyMap&&(r.anisotropyMap=n(t.anisotropyMap)),void 0!==t.sheenColorMap&&(r.sheenColorMap=n(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(r.sheenRoughnessMap=n(t.sheenRoughnessMap)),r}setTextures(t){return this.textures=t,this}static createMaterialFromType(t){return new{ShadowMaterial:DS,SpriteMaterial:kx,RawShaderMaterial:LS,ShaderMaterial:xy,PointsMaterial:Q_,MeshPhysicalMaterial:jS,MeshStandardMaterial:FS,MeshPhongMaterial:US,MeshToonMaterial:BS,MeshNormalMaterial:zS,MeshLambertMaterial:VS,MeshDepthMaterial:sx,MeshDistanceMaterial:cx,MeshBasicMaterial:Tg,MeshMatcapMaterial:GS,LineDashedMaterial:WS,LineBasicMaterial:U_,Material:Sg}[t]}}class WT{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),"undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(sCt){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!==typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class HT extends Kg{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class qT extends fT{constructor(t){super(t)}load(t,e,n,r){const i=this,o=new yT(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(sCt){r?r(sCt):console.error(sCt),i.manager.itemError(t)}}),n,r)}parse(t){const e={},n={};function r(t,r){if(void 0!==e[r])return e[r];const i=t.interleavedBuffers[r],o=function(t,e){if(void 0!==n[e])return n[e];const r=t.arrayBuffers,i=r[e],o=new Uint32Array(i).buffer;return n[e]=o,o}(t,i.buffer),a=Of(i.type,o),s=new Mx(a,i.stride);return s.uuid=i.uuid,e[r]=s,s}const i=t.isInstancedBufferGeometry?new HT:new Kg,o=t.data.index;if(void 0!==o){const t=Of(o.type,o.array);i.setIndex(new Ig(t,1))}const a=t.data.attributes;for(const u in a){const e=a[u];let n;if(e.isInterleavedBufferAttribute){const i=r(t.data,e.data);n=new Cx(i,e.itemSize,e.offset,e.normalized)}else{const t=Of(e.type,e.array);n=new(e.isInstancedBufferAttribute?u_:Ig)(t,e.itemSize,e.normalized)}void 0!==e.name&&(n.name=e.name),void 0!==e.usage&&n.setUsage(e.usage),i.setAttribute(u,n)}const s=t.data.morphAttributes;if(s)for(const u in s){const e=s[u],n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];let a;if(o.isInterleavedBufferAttribute){const e=r(t.data,o.data);a=new Cx(e,o.itemSize,o.offset,o.normalized)}else{const t=Of(o.type,o.array);a=new Ig(t,o.itemSize,o.normalized)}void 0!==o.name&&(a.name=o.name),n.push(a)}i.morphAttributes[u]=n}t.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const c=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==c)for(let u=0,h=c.length;u!==h;++u){const t=c[u];i.addGroup(t.start,t.count,t.materialIndex)}const l=t.data.boundingSphere;if(void 0!==l){const t=new em;void 0!==l.center&&t.fromArray(l.center),i.boundingSphere=new wm(t,l.radius)}return t.name&&(i.name=t.name),t.userData&&(i.userData=t.userData),i}}class XT extends fT{constructor(t){super(t)}load(t,e,n,r){const i=this,o=""===this.path?WT.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;const a=new yT(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){let o=null;try{o=JSON.parse(n)}catch(sO){return void 0!==r&&r(sO),void console.error("THREE:ObjectLoader: Can't parse "+t+".",sO.message)}const a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+t)),void console.error("THREE.ObjectLoader: Can't load "+t);i.parse(o,e)}),n,r)}async loadAsync(t,e){const n=""===this.path?WT.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||n;const r=new yT(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(t,e),o=JSON.parse(i),a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+t);return await this.parseAsync(o)}parse(t,e){const n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,r),o=this.parseImages(t.images,(function(){void 0!==e&&e(c)})),a=this.parseTextures(t.textures,o),s=this.parseMaterials(t.materials,a),c=this.parseObject(t.object,i,s,a,n),l=this.parseSkeletons(t.skeletons,c);if(this.bindSkeletons(c,l),void 0!==e){let t=!1;for(const e in o)if(o[e].data instanceof HTMLImageElement){t=!0;break}!1===t&&e(c)}return c}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,n),i=await this.parseImagesAsync(t.images),o=this.parseTextures(t.textures,i),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,r,a,o,e),c=this.parseSkeletons(t.skeletons,s);return this.bindSkeletons(s,c),s}parseShapes(t){const e={};if(void 0!==t)for(let n=0,r=t.length;n<r;n++){const r=(new qw).fromJSON(t[n]);e[r.uuid]=r}return e}parseSkeletons(t,e){const n={},r={};if(e.traverse((function(t){t.isBone&&(r[t.uuid]=t)})),void 0!==t)for(let i=0,o=t.length;i<o;i++){const e=(new l_).fromJSON(t[i],r);n[e.uuid]=e}return n}parseGeometries(t,e){const n={};if(void 0!==t){const r=new qT;for(let i=0,o=t.length;i<o;i++){let o;const a=t[i];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(a);break;default:a.type in RS?o=RS[a.type].fromJSON(a,e):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(a.type,'"'))}o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),void 0!==a.userData&&(o.userData=a.userData),n[a.uuid]=o}}return n}parseMaterials(t,e){const n={},r={};if(void 0!==t){const i=new GT;i.setTextures(e);for(let e=0,o=t.length;e<o;e++){const o=t[e];void 0===n[o.uuid]&&(n[o.uuid]=i.parse(o)),r[o.uuid]=n[o.uuid]}}return r}parseAnimations(t){const e={};if(void 0!==t)for(let n=0;n<t.length;n++){const r=t[n],i=lT.parse(r);e[i.uuid]=i}return e}parseImages(t,e){const n=this,r={};let i;function o(t){if("string"===typeof t){const e=t;return function(t){return n.manager.itemStart(t),i.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e)}return t.data?{data:Of(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const n=new dT(e);i=new xT(n),i.setCrossOrigin(this.crossOrigin);for(let e=0,i=t.length;e<i;e++){const n=t[e],i=n.url;if(Array.isArray(i)){const t=[];for(let e=0,n=i.length;e<n;e++){const n=o(i[e]);null!==n&&(n instanceof HTMLImageElement?t.push(n):t.push(new a_(n.data,n.width,n.height)))}r[n.uuid]=new Gf(t)}else{const t=o(n.url);r[n.uuid]=new Gf(t)}}}return r}async parseImagesAsync(t){const e=this,n={};let r;async function i(t){if("string"===typeof t){const n=t,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:e.resourcePath+n;return await r.loadAsync(i)}return t.data?{data:Of(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){r=new xT(this.manager),r.setCrossOrigin(this.crossOrigin);for(let e=0,r=t.length;e<r;e++){const r=t[e],o=r.url;if(Array.isArray(o)){const t=[];for(let e=0,n=o.length;e<n;e++){const n=o[e],r=await i(n);null!==r&&(r instanceof HTMLImageElement?t.push(r):t.push(new a_(r.data,r.width,r.height)))}n[r.uuid]=new Gf(t)}else{const t=await i(r.url);n[r.uuid]=new Gf(t)}}}return n}parseTextures(t,e){function n(t,e){return"number"===typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const r={};if(void 0!==t)for(let i=0,o=t.length;i<o;i++){const o=t[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===e[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const a=e[o.image],s=a.data;let c;Array.isArray(s)?(c=new Oy,6===s.length&&(c.needsUpdate=!0)):(c=s&&s.data?new a_:new qf,s&&(c.needsUpdate=!0)),c.source=a,c.uuid=o.uuid,void 0!==o.name&&(c.name=o.name),void 0!==o.mapping&&(c.mapping=n(o.mapping,YT)),void 0!==o.channel&&(c.channel=o.channel),void 0!==o.offset&&c.offset.fromArray(o.offset),void 0!==o.repeat&&c.repeat.fromArray(o.repeat),void 0!==o.center&&c.center.fromArray(o.center),void 0!==o.rotation&&(c.rotation=o.rotation),void 0!==o.wrap&&(c.wrapS=n(o.wrap[0],KT),c.wrapT=n(o.wrap[1],KT)),void 0!==o.format&&(c.format=o.format),void 0!==o.internalFormat&&(c.internalFormat=o.internalFormat),void 0!==o.type&&(c.type=o.type),void 0!==o.colorSpace&&(c.colorSpace=o.colorSpace),void 0!==o.minFilter&&(c.minFilter=n(o.minFilter,ZT)),void 0!==o.magFilter&&(c.magFilter=n(o.magFilter,ZT)),void 0!==o.anisotropy&&(c.anisotropy=o.anisotropy),void 0!==o.flipY&&(c.flipY=o.flipY),void 0!==o.generateMipmaps&&(c.generateMipmaps=o.generateMipmaps),void 0!==o.premultiplyAlpha&&(c.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(c.unpackAlignment=o.unpackAlignment),void 0!==o.compareFunction&&(c.compareFunction=o.compareFunction),void 0!==o.userData&&(c.userData=o.userData),r[o.uuid]=c}return r}parseObject(t,e,n,r,i){let o,a,s;function c(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function l(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),e.push(n[i])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}function u(t){return void 0===r[t]&&console.warn("THREE.ObjectLoader: Undefined texture",t),r[t]}switch(t.type){case"Scene":o=new Ax,void 0!==t.background&&(Number.isInteger(t.background)?o.background=new xg(t.background):o.background=u(t.background)),void 0!==t.environment&&(o.environment=u(t.environment)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new Ex(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new Tx(t.fog.color,t.fog.density)),""!==t.fog.name&&(o.fog.name=t.fog.name)),void 0!==t.backgroundBlurriness&&(o.backgroundBlurriness=t.backgroundBlurriness),void 0!==t.backgroundIntensity&&(o.backgroundIntensity=t.backgroundIntensity),void 0!==t.backgroundRotation&&o.backgroundRotation.fromArray(t.backgroundRotation),void 0!==t.environmentIntensity&&(o.environmentIntensity=t.environmentIntensity),void 0!==t.environmentRotation&&o.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":o=new Ey(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new $y(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"AmbientLight":o=new UT(t.color,t.intensity);break;case"DirectionalLight":o=new jT(t.color,t.intensity);break;case"PointLight":o=new LT(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new BT(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new PT(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new ET(t.color,t.groundColor,t.intensity);break;case"LightProbe":o=(new VT).fromJSON(t);break;case"SkinnedMesh":a=c(t.geometry),s=l(t.material),o=new i_(a,s),void 0!==t.bindMode&&(o.bindMode=t.bindMode),void 0!==t.bindMatrix&&o.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(o.skeleton=t.skeleton);break;case"Mesh":a=c(t.geometry),s=l(t.material),o=new py(a,s);break;case"InstancedMesh":a=c(t.geometry),s=l(t.material);const e=t.count,n=t.instanceMatrix,r=t.instanceColor;o=new v_(a,s,e),o.instanceMatrix=new u_(new Float32Array(n.array),16),void 0!==r&&(o.instanceColor=new u_(new Float32Array(r.array),r.itemSize));break;case"BatchedMesh":a=c(t.geometry),s=l(t.material),o=new j_(t.maxGeometryCount,t.maxVertexCount,t.maxIndexCount,s),o.geometry=a,o.perObjectFrustumCulled=t.perObjectFrustumCulled,o.sortObjects=t.sortObjects,o._drawRanges=t.drawRanges,o._reservedRanges=t.reservedRanges,o._visibility=t.visibility,o._active=t.active,o._bounds=t.bounds.map((t=>{const e=new im;e.min.fromArray(t.boxMin),e.max.fromArray(t.boxMax);const n=new wm;return n.radius=t.sphereRadius,n.center.fromArray(t.sphereCenter),{boxInitialized:t.boxInitialized,box:e,sphereInitialized:t.sphereInitialized,sphere:n}})),o._maxGeometryCount=t.maxGeometryCount,o._maxVertexCount=t.maxVertexCount,o._maxIndexCount=t.maxIndexCount,o._geometryInitialized=t.geometryInitialized,o._geometryCount=t.geometryCount,o._matricesTexture=u(t.matricesTexture.uuid),void 0!==t.colorsTexture&&(o._colorsTexture=u(t.colorsTexture.uuid));break;case"LOD":o=new Yx;break;case"Line":o=new X_(c(t.geometry),l(t.material));break;case"LineLoop":o=new $_(c(t.geometry),l(t.material));break;case"LineSegments":o=new J_(c(t.geometry),l(t.material));break;case"PointCloud":case"Points":o=new iw(c(t.geometry),l(t.material));break;case"Sprite":o=new Wx(l(t.material));break;case"Group":o=new fx;break;case"Bone":o=new o_;break;default:o=new ig}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(o.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(o.matrixAutoUpdate=t.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.up&&o.up.fromArray(t.up),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(o.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.frustumCulled&&(o.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(o.renderOrder=t.renderOrder),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.layers&&(o.layers.mask=t.layers),void 0!==t.children){const a=t.children;for(let t=0;t<a.length;t++)o.add(this.parseObject(a[t],e,n,r,i))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++){const n=e[t];o.animations.push(i[n])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(o.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const n=e[t],r=o.getObjectByProperty("uuid",n.object);void 0!==r&&o.addLevel(r,n.distance,n.hysteresis)}}return o}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const n=e[t.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(n,t.bindMatrix)}}))}}const YT={UVMapping:Nh,CubeReflectionMapping:Rh,CubeRefractionMapping:Dh,EquirectangularReflectionMapping:Lh,EquirectangularRefractionMapping:Fh,CubeUVReflectionMapping:jh},KT={RepeatWrapping:Uh,ClampToEdgeWrapping:Bh,MirroredRepeatWrapping:zh},ZT={NearestFilter:Vh,NearestMipmapNearestFilter:Gh,NearestMipmapLinearFilter:Hh,LinearFilter:Xh,LinearMipmapNearestFilter:Yh,LinearMipmapLinearFilter:Zh};class JT extends fT{constructor(t){super(t),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=hT.get(t);if(void 0!==o)return i.manager.itemStart(t),o.then?void o.then((n=>{e&&e(n),i.manager.itemEnd(t)})).catch((t=>{r&&r(t)})):(setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const s=fetch(t,a).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){return hT.add(t,n),e&&e(n),i.manager.itemEnd(t),n})).catch((function(e){r&&r(e),hT.remove(t),i.manager.itemError(t),i.manager.itemEnd(t)}));hT.add(t,s),i.manager.itemStart(t)}}let $T;class QT{static getContext(){return void 0===$T&&($T=new(window.AudioContext||window.webkitAudioContext)),$T}static setContext(t){$T=t}}class tE extends fT{constructor(t){super(t)}load(t,e,n,r){const i=this,o=new yT(this.manager);function a(e){r?r(e):console.error(e),i.manager.itemError(t)}o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(t){try{const n=t.slice(0);QT.getContext().decodeAudioData(n,(function(t){e(t)})).catch(a)}catch(sCt){a(sCt)}}),n,r)}}const eE=new Pm,nE=new Pm,rE=new Pm;class iE{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ey,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ey,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,rE.copy(t.projectionMatrix);const n=e.eyeSep/2,r=n*e.near/e.focus,i=e.near*Math.tan(ff*e.fov*.5)/e.zoom;let o,a;nE.elements[12]=-n,eE.elements[12]=n,o=-i*e.aspect+r,a=i*e.aspect+r,rE.elements[0]=2*e.near/(a-o),rE.elements[8]=(a+o)/(a-o),this.cameraL.projectionMatrix.copy(rE),o=-i*e.aspect-r,a=i*e.aspect-r,rE.elements[0]=2*e.near/(a-o),rE.elements[8]=(a+o)/(a-o),this.cameraR.projectionMatrix.copy(rE)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(nE),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(eE)}}class oE{constructor(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=aE(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=aE();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function aE(){return("undefined"===typeof performance?Date:performance).now()}const sE=new em,cE=new tm,lE=new em,uE=new em;class hE extends ig{constructor(){super(),this.type="AudioListener",this.context=QT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new oE}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(sE,cE,lE),uE.set(0,0,-1).applyQuaternion(cE),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(sE.x,t),e.positionY.linearRampToValueAtTime(sE.y,t),e.positionZ.linearRampToValueAtTime(sE.z,t),e.forwardX.linearRampToValueAtTime(uE.x,t),e.forwardY.linearRampToValueAtTime(uE.y,t),e.forwardZ.linearRampToValueAtTime(uE.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(sE.x,sE.y,sE.z),e.setOrientation(uE.x,uE.y,uE.z,n.x,n.y,n.z)}}class dE extends ig{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const pE=new em,fE=new tm,mE=new em,gE=new em;class yE extends dE{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(pE,fE,mE),gE.set(0,0,1).applyQuaternion(fE);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(pE.x,t),e.positionY.linearRampToValueAtTime(pE.y,t),e.positionZ.linearRampToValueAtTime(pE.z,t),e.orientationX.linearRampToValueAtTime(gE.x,t),e.orientationY.linearRampToValueAtTime(gE.y,t),e.orientationZ.linearRampToValueAtTime(gE.z,t)}else e.setPosition(pE.x,pE.y,pE.z),e.setOrientation(gE.x,gE.y,gE.z)}}class vE{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}class bE{constructor(t,e,n){let r,i,o;switch(this.binding=t,this.valueSize=n,e){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,r=this.valueSize,i=t*r+r;let o=this.cumulativeWeight;if(0===o){for(let t=0;t!==r;++t)n[i+t]=n[t];o=e}else{o+=e;const t=e/o;this._mixBufferRegion(n,i,0,t,r)}this.cumulativeWeight=o}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const t=e*this._origIndex;this._mixBufferRegion(n,r,t,1-i,e)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(let s=e,c=e+e;s!==c;++s)if(n[s]!==n[s+e]){a.setValue(n,r);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(let i=n,o=r;i!==o;++i)e[i]=e[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,r,i){if(r>=.5)for(let o=0;o!==i;++o)t[e+o]=t[n+o]}_slerp(t,e,n,r){tm.slerpFlat(t,e,t,e,t,n,r)}_slerpAdditive(t,e,n,r,i){const o=this._workIndex*i;tm.multiplyQuaternionsFlat(t,o,t,e,t,n),tm.slerpFlat(t,e,t,e,t,o,r)}_lerp(t,e,n,r,i){const o=1-r;for(let a=0;a!==i;++a){const i=e+a;t[i]=t[i]*o+t[n+a]*r}}_lerpAdditive(t,e,n,r,i){for(let o=0;o!==i;++o){const i=e+o;t[i]=t[i]+t[n+o]*r}}}const xE="\\[\\]\\.:\\/",_E=new RegExp("["+xE+"]","g"),wE="[^"+xE+"]",SE="[^"+xE.replace("\\.","")+"]",TE=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",wE)+/(WCOD+)?/.source.replace("WCOD",SE)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",wE)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",wE)+"$"),EE=["material","materials","bones","map"];class AE{constructor(t,e,n){this.path=e,this.parsedPath=n||AE.parseTrackName(e),this.node=AE.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new AE.Composite(t,e,n):new AE(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(_E,"")}static parseTrackName(t){const e=TE.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==EE.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const o=n(i.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=AE.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const o=t[r];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}AE.Composite=class{constructor(t,e,n){const r=n||AE.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},AE.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},AE.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},AE.prototype.GetterByBindingType=[AE.prototype._getValue_direct,AE.prototype._getValue_array,AE.prototype._getValue_arrayElement,AE.prototype._getValue_toArray],AE.prototype.SetterByBindingTypeAndVersioning=[[AE.prototype._setValue_direct,AE.prototype._setValue_direct_setNeedsUpdate,AE.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[AE.prototype._setValue_array,AE.prototype._setValue_array_setNeedsUpdate,AE.prototype._setValue_array_setMatrixWorldNeedsUpdate],[AE.prototype._setValue_arrayElement,AE.prototype._setValue_arrayElement_setNeedsUpdate,AE.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[AE.prototype._setValue_fromArray,AE.prototype._setValue_fromArray_setNeedsUpdate,AE.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class ME{constructor(){this.isAnimationObjectGroup=!0,this.uuid=gf(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let a,s=t.length,c=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const u=arguments[l],h=u.uuid;let d=e[h];if(void 0===d){d=s++,e[h]=d,t.push(u);for(let t=0,e=o;t!==e;++t)i[t].push(new AE(u,n[t],r[t]))}else if(d<c){a=t[d];const s=--c,l=t[s];e[l.uuid]=d,t[d]=l,e[h]=s,t[s]=u;for(let t=0,e=o;t!==e;++t){const e=i[t],o=e[s];let a=e[d];e[d]=o,void 0===a&&(a=new AE(u,n[t],r[t])),e[s]=a}}else t[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,c=e[s];if(void 0!==c&&c>=i){const o=i++,l=t[o];e[l.uuid]=c,t[c]=l,e[s]=o,t[o]=a;for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[o],i=e[c];e[c]=r,e[o]=i}}}this.nCachedObjects_=i}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=t.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,c=e[s];if(void 0!==c)if(delete e[s],c<i){const a=--i,s=t[a],l=--o,u=t[l];e[s.uuid]=c,t[c]=s,e[u.uuid]=a,t[a]=u,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[a],i=e[l];e[c]=r,e[a]=i,e.pop()}}else{const i=--o,a=t[i];i>0&&(e[a.uuid]=c),t[c]=a,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t];e[c]=e[i],e.pop()}}}this.nCachedObjects_=i}subscribe_(t,e){const n=this._bindingsIndicesByPath;let r=n[t];const i=this._bindings;if(void 0!==r)return i[r];const o=this._paths,a=this._parsedPaths,s=this._objects,c=s.length,l=this.nCachedObjects_,u=new Array(c);r=i.length,n[t]=r,o.push(t),a.push(e),i.push(u);for(let h=l,d=s.length;h!==d;++h){const n=s[h];u[h]=new AE(n,t,e)}return u}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){const r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}class OE{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.blendMode;this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=r;const i=e.tracks,o=i.length,a=new Array(o),s={endingStart:ap,endingEnd:ap};for(let c=0;c!==o;++c){const t=i[c].createInterpolant(null);a[c]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ep,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,r=t._clip.duration,i=r/n,o=n/r;t.warp(1,i,e),this.warp(o,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,c=a.sampleValues;return s[0]=i,s[1]=i+n,c[0]=t/o,c[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,r){if(!this.enabled)return void this._updateWeight(t);const i=this._startTime;if(null!==i){const r=(t-i)*n;r<0||0===n?e=0:(this._startTime=null,e=n*r)}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const t=this._interpolants,e=this._propertyBindings;if(this.blendMode===up)for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(o),e[n].accumulateAdditive(a);else for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(o),e[n].accumulate(r,a)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let r=this.time+t,i=this._loopCount;const o=n===np;if(0===t)return-1===i?r:o&&1===(1&i)?e-r:r;if(n===tp){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=e||r<0){const n=Math.floor(r/e);r-=e*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){const e=t<0;this._setEndings(e,!e,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1===(1&i))return e-r}return r}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=sp,r.endingEnd=sp):(r.endingStart=t?this.zeroSlopeAtStart?sp:ap:cp,r.endingEnd=e?this.zeroSlopeAtEnd?sp:ap:cp)}_scheduleFading(t,e,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}const CE=new Float32Array(1);class kE extends hf{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,c=this._bindingsByRootAndName;let l=c[s];void 0===l&&(l={},c[s]=l);for(let u=0;u!==i;++u){const t=r[u],i=t.name;let c=l[i];if(void 0!==c)++c.referenceCount,o[u]=c;else{if(c=o[u],void 0!==c){null===c._cacheIndex&&(++c.referenceCount,this._addInactiveBinding(c,s,i));continue}const r=e&&e._propertyBindings[u].binding.parsedPath;c=new bE(AE.create(n,i,r),t.ValueTypeName,t.getValueSize()),++c.referenceCount,this._addInactiveBinding(c,s,i),o[u]=c}a[u].resultBuffer=c.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const r=this._actions,i=this._actionsByClip;let o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{const e=o.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;const i=t._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,c=s[s.length-1],l=t._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),t._byClipCacheIndex=null;delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,r=e.length;n!==r;++n){const t=e[n];0===--t.referenceCount&&this._removeInactiveBinding(t)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_addInactiveBinding(t,e,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[e];void 0===o&&(o={},r[e]=o),o[n]=t,t._cacheIndex=i.length,i.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],c=t._cacheIndex;s._cacheIndex=c,e[c]=s,e.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new QS(new Float32Array(2),new Float32Array(2),1,CE),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i}clipAction(t,e,n){const r=e||this._root,i=r.uuid;let o="string"===typeof t?lT.findByName(r,t):t;const a=null!==o?o.uuid:t,s=this._actionsByClip[a];let c=null;if(void 0===n&&(n=null!==o?o.blendMode:lp),void 0!==s){const t=s.actionByRoot[i];if(void 0!==t&&t.blendMode===n)return t;c=s.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const l=new OE(this,o,e,n);return this._bindAction(l,c),this._addInactiveAction(l,a,i),l}existingAction(t,e){const n=e||this._root,r=n.uuid,i="string"===typeof t?lT.findByName(n,t):t,o=i?i.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1;for(let c=0;c!==n;++c){e[c]._update(r,t,i,o)}const a=this._bindings,s=this._nActiveBindings;for(let c=0;c!==s;++c)a[c].apply(o);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const t=i.knownActions;for(let n=0,r=t.length;n!==r;++n){const r=t[n];this._deactivateAction(r);const i=r._cacheIndex,o=e[e.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,e[i]=o,e.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const i in n){const t=n[i].actionByRoot[e];void 0!==t&&(this._deactivateAction(t),this._removeInactiveAction(t))}const r=this._bindingsByRootAndName[e];if(void 0!==r)for(const i in r){const t=r[i];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class PE{constructor(t){this.value=t}clone(){return new PE(void 0===this.value.clone?this.value:this.value.clone())}}let IE=0;class NE extends hf{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:IE++}),this.name="",this.usage=Jp,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return-1!==e&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,r=e.length;n<r;n++){const t=Array.isArray(e[n])?e[n]:[e[n]];for(let e=0;e<t.length;e++)this.uniforms.push(t[e].clone())}return this}clone(){return(new this.constructor).copy(this)}}class RE extends Mx{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class DE{constructor(t,e,n,r,i){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const LE=new Pm;class FE{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new km(t,e),this.near=n,this.far=r,this.camera=null,this.layers=new Vm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return LE.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(LE),this}intersectObject(t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return UE(t,this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),e.sort(jE),e}intersectObjects(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let r=0,i=t.length;r<i;r++)UE(t[r],this,n,e);return n.sort(jE),n}}function jE(t,e){return t.distance-e.distance}function UE(t,e,n,r){let i=!0;if(t.layers.test(e.layers)){!1===t.raycast(e,n)&&(i=!1)}if(!0===i&&!0===r){const r=t.children;for(let t=0,i=r.length;t<i;t++)UE(r[t],e,n,!0)}}class BE{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(yf(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class zE{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=t,this.theta=e,this.y=n,this}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return(new this.constructor).copy(this)}}const VE=new Sf;class GE{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Sf(1/0,1/0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Sf(-1/0,-1/0);this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=VE.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,VE).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const WE=new em,HE=new em;class qE{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new em,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new em;this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){WE.subVectors(t,this.start),HE.subVectors(this.end,this.start);const n=HE.dot(HE);let r=HE.dot(WE)/n;return e&&(r=yf(r,0,1)),r}closestPointToPoint(t,e,n){const r=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const XE=new em;class YE extends ig{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new Kg,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,s=32;o<s;o++,a++){const t=o/s*Math.PI*2,e=a/s*Math.PI*2;r.push(Math.cos(t),Math.sin(t),1,Math.cos(e),Math.sin(e),1)}n.setAttribute("position",new zg(r,3));const i=new U_({fog:!1,toneMapped:!1});this.cone=new J_(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),XE.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(XE),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const KE=new em,ZE=new Pm,JE=new Pm;class $E extends J_{constructor(t){const e=QE(t),n=new Kg,r=[],i=[],o=new xg(0,0,1),a=new xg(0,1,0);for(let s=0;s<e.length;s++){const t=e[s];t.parent&&t.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new zg(r,3)),n.setAttribute("color",new zg(i,3));super(n,new U_({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,r=n.getAttribute("position");JE.copy(this.root.matrixWorld).invert();for(let i=0,o=0;i<e.length;i++){const t=e[i];t.parent&&t.parent.isBone&&(ZE.multiplyMatrices(JE,t.matrixWorld),KE.setFromMatrixPosition(ZE),r.setXYZ(o,KE.x,KE.y,KE.z),ZE.multiplyMatrices(JE,t.parent.matrixWorld),KE.setFromMatrixPosition(ZE),r.setXYZ(o+1,KE.x,KE.y,KE.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function QE(t){const e=[];!0===t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,QE(t.children[n]));return e}class tA extends py{constructor(t,e,n){super(new MS(e,4,2),new Tg({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const eA=new em,nA=new xg,rA=new xg;class iA extends ig{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new TS(e);r.rotateY(.5*Math.PI),this.material=new Tg({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new Ig(o,3)),this.add(new py(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");nA.copy(this.light.color),rA.copy(this.light.groundColor);for(let t=0,n=e.count;t<n;t++){const r=t<n/2?nA:rA;e.setXYZ(t,r.r,r.g,r.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(eA.setFromMatrixPosition(this.light.matrixWorld).negate())}}class oA extends J_{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new xg(n),r=new xg(r);const i=e/2,o=t/e,a=t/2,s=[],c=[];for(let u=0,h=0,d=-a;u<=e;u++,d+=o){s.push(-a,0,d,a,0,d),s.push(d,0,-a,d,0,a);const t=u===i?n:r;t.toArray(c,h),h+=3,t.toArray(c,h),h+=3,t.toArray(c,h),h+=3,t.toArray(c,h),h+=3}const l=new Kg;l.setAttribute("position",new zg(s,3)),l.setAttribute("color",new zg(c,3));super(l,new U_({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class aA extends J_{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;i=new xg(i),o=new xg(o);const a=[],s=[];if(e>1)for(let l=0;l<e;l++){const n=l/e*(2*Math.PI),r=Math.sin(n)*t,c=Math.cos(n)*t;a.push(0,0,0),a.push(r,0,c);const u=1&l?i:o;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let l=0;l<n;l++){const e=1&l?i:o,c=t-t/n*l;for(let t=0;t<r;t++){let n=t/r*(2*Math.PI),i=Math.sin(n)*c,o=Math.cos(n)*c;a.push(i,0,o),s.push(e.r,e.g,e.b),n=(t+1)/r*(2*Math.PI),i=Math.sin(n)*c,o=Math.cos(n)*c,a.push(i,0,o),s.push(e.r,e.g,e.b)}}const c=new Kg;c.setAttribute("position",new zg(a,3)),c.setAttribute("color",new zg(s,3));super(c,new U_({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const sA=new em,cA=new em,lA=new em;class uA extends ig{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===e&&(e=1);let r=new Kg;r.setAttribute("position",new zg([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const i=new U_({fog:!1,toneMapped:!1});this.lightPlane=new X_(r,i),this.add(this.lightPlane),r=new Kg,r.setAttribute("position",new zg([0,0,0,0,0,1],3)),this.targetLine=new X_(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),sA.setFromMatrixPosition(this.light.matrixWorld),cA.setFromMatrixPosition(this.light.target.matrixWorld),lA.subVectors(cA,sA),this.lightPlane.lookAt(cA),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(cA),this.targetLine.scale.z=lA.length()}}const hA=new em,dA=new _y;class pA extends J_{constructor(t){const e=new Kg,n=new U_({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={};function a(t,e){s(t),s(e)}function s(t){r.push(0,0,0),i.push(0,0,0),void 0===o[t]&&(o[t]=[]),o[t].push(r.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),e.setAttribute("position",new zg(r,3)),e.setAttribute("color",new zg(i,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new xg(16755200),l=new xg(16711680),u=new xg(43775),h=new xg(16777215),d=new xg(3355443);this.setColors(c,l,u,h,d)}setColors(t,e,n,r,i){const o=this.geometry.getAttribute("color");o.setXYZ(0,t.r,t.g,t.b),o.setXYZ(1,t.r,t.g,t.b),o.setXYZ(2,t.r,t.g,t.b),o.setXYZ(3,t.r,t.g,t.b),o.setXYZ(4,t.r,t.g,t.b),o.setXYZ(5,t.r,t.g,t.b),o.setXYZ(6,t.r,t.g,t.b),o.setXYZ(7,t.r,t.g,t.b),o.setXYZ(8,t.r,t.g,t.b),o.setXYZ(9,t.r,t.g,t.b),o.setXYZ(10,t.r,t.g,t.b),o.setXYZ(11,t.r,t.g,t.b),o.setXYZ(12,t.r,t.g,t.b),o.setXYZ(13,t.r,t.g,t.b),o.setXYZ(14,t.r,t.g,t.b),o.setXYZ(15,t.r,t.g,t.b),o.setXYZ(16,t.r,t.g,t.b),o.setXYZ(17,t.r,t.g,t.b),o.setXYZ(18,t.r,t.g,t.b),o.setXYZ(19,t.r,t.g,t.b),o.setXYZ(20,t.r,t.g,t.b),o.setXYZ(21,t.r,t.g,t.b),o.setXYZ(22,t.r,t.g,t.b),o.setXYZ(23,t.r,t.g,t.b),o.setXYZ(24,e.r,e.g,e.b),o.setXYZ(25,e.r,e.g,e.b),o.setXYZ(26,e.r,e.g,e.b),o.setXYZ(27,e.r,e.g,e.b),o.setXYZ(28,e.r,e.g,e.b),o.setXYZ(29,e.r,e.g,e.b),o.setXYZ(30,e.r,e.g,e.b),o.setXYZ(31,e.r,e.g,e.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,i.r,i.g,i.b),o.setXYZ(41,i.r,i.g,i.b),o.setXYZ(42,i.r,i.g,i.b),o.setXYZ(43,i.r,i.g,i.b),o.setXYZ(44,i.r,i.g,i.b),o.setXYZ(45,i.r,i.g,i.b),o.setXYZ(46,i.r,i.g,i.b),o.setXYZ(47,i.r,i.g,i.b),o.setXYZ(48,i.r,i.g,i.b),o.setXYZ(49,i.r,i.g,i.b),o.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap;dA.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),fA("c",e,t,dA,0,0,-1),fA("t",e,t,dA,0,0,1),fA("n1",e,t,dA,-1,-1,-1),fA("n2",e,t,dA,1,-1,-1),fA("n3",e,t,dA,-1,1,-1),fA("n4",e,t,dA,1,1,-1),fA("f1",e,t,dA,-1,-1,1),fA("f2",e,t,dA,1,-1,1),fA("f3",e,t,dA,-1,1,1),fA("f4",e,t,dA,1,1,1),fA("u1",e,t,dA,.7,1.1,-1),fA("u2",e,t,dA,-.7,1.1,-1),fA("u3",e,t,dA,0,2,-1),fA("cf1",e,t,dA,-1,0,1),fA("cf2",e,t,dA,1,0,1),fA("cf3",e,t,dA,0,-1,1),fA("cf4",e,t,dA,0,1,1),fA("cn1",e,t,dA,-1,0,-1),fA("cn2",e,t,dA,1,0,-1),fA("cn3",e,t,dA,0,-1,-1),fA("cn4",e,t,dA,0,1,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function fA(t,e,n,r,i,o,a){hA.set(i,o,a).unproject(r);const s=e[t];if(void 0!==s){const t=n.getAttribute("position");for(let e=0,n=s.length;e<n;e++)t.setXYZ(s[e],hA.x,hA.y,hA.z)}}const mA=new im;class gA extends J_{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Kg;i.setIndex(new Ig(n,1)),i.setAttribute("position",new Ig(r,3)),super(i,new U_({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&mA.setFromObject(this.object),mA.isEmpty())return;const e=mA.min,n=mA.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=e.x,i[4]=n.y,i[5]=n.z,i[6]=e.x,i[7]=e.y,i[8]=n.z,i[9]=n.x,i[10]=e.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=e.z,i[15]=e.x,i[16]=n.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=n.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class yA extends J_{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Kg;r.setIndex(new Ig(n,1)),r.setAttribute("position",new zg([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new U_({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class vA extends X_{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,r=new Kg;r.setAttribute("position",new zg([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere(),super(r,new U_({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const i=new Kg;i.setAttribute("position",new zg([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new py(i,new Tg({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const bA=new em;let xA,_A;class wA extends ig{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new em(0,0,1),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new em(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*i;super(),this.type="ArrowHelper",void 0===xA&&(xA=new Kg,xA.setAttribute("position",new zg([0,0,0,0,1,0],3)),_A=new Fw(0,.5,1,5,1),_A.translate(0,-.5,0)),this.position.copy(e),this.line=new X_(xA,new U_({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new py(_A,new Tg({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,o)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{bA.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(bA,e)}}setLength(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*e;this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class SA extends J_{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new Kg;n.setAttribute("position",new zg(e,3)),n.setAttribute("color",new zg([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new U_({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,e,n){const r=new xg,i=this.geometry.attributes.color.array;return r.set(t),r.toArray(i,0),r.toArray(i,3),r.set(e),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class TA{constructor(){this.type="ShapePath",this.color=new xg,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new Nw,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this}bezierCurveTo(t,e,n,r,i,o){return this.currentPath.bezierCurveTo(t,e,n,r,i,o),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(t,e){const n=e.length;let r=!1;for(let i=n-1,o=0;o<n;i=o++){let n=e[i],a=e[o],s=a.x-n.x,c=a.y-n.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(n=e[o],s=-s,a=e[i],c=-c),t.y<n.y||t.y>a.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=c*(t.x-n.x)-s*(t.y-n.y);if(0===e)return!0;if(e<0)continue;r=!r}}else{if(t.y!==n.y)continue;if(a.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=a.x)return!0}}return r}const n=vS.isClockWise,r=this.subPaths;if(0===r.length)return[];let i,o,a;const s=[];if(1===r.length)return o=r[0],a=new qw,a.curves=o.curves,s.push(a),s;let c=!n(r[0].getPoints());c=t?!c:c;const l=[],u=[];let h,d,p=[],f=0;u[f]=void 0,p[f]=[];for(let m=0,g=r.length;m<g;m++)o=r[m],h=o.getPoints(),i=n(h),i=t?!i:i,i?(!c&&u[f]&&f++,u[f]={s:new qw,p:h},u[f].s.curves=o.curves,c&&f++,p[f]=[]):p[f].push({h:o,p:h[0]});if(!u[0])return function(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n],i=new qw;i.curves=r.curves,e.push(i)}return e}(r);if(u.length>1){let t=!1,n=0;for(let e=0,r=u.length;e<r;e++)l[e]=[];for(let r=0,i=u.length;r<i;r++){const i=p[r];for(let o=0;o<i.length;o++){const a=i[o];let s=!0;for(let i=0;i<u.length;i++)e(a.p,u[i].p)&&(r!==i&&n++,s?(s=!1,l[i].push(a)):t=!0);s&&l[r].push(a)}}n>0&&!1===t&&(p=l)}for(let m=0,g=u.length;m<g;m++){a=u[m].s,s.push(a),d=p[m];for(let t=0,e=d.length;t<e;t++)a.holes.push(d[t].h)}return s}}class EA extends Kf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(t,e,{...r,count:n}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Au}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Au);var AA=__webpack_require__(7205);function MA(t){let e;const n=new Set,r=(t,r)=>{const i="function"===typeof t?t(e):t;if(i!==e){const t=e;e=r?i:Object.assign({},e,i),n.forEach((n=>n(e,t)))}},i=()=>e,o={setState:r,getState:i,subscribe:(t,r,o)=>r||o?function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let a=r(e);function s(){const n=r(e);if(!o(a,n)){const e=a;t(a=n,e)}}return n.add(s),()=>n.delete(s)}(t,r,o):(n.add(t),()=>n.delete(t)),destroy:()=>n.clear()};return e=t(r,i,o),o}const OA="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?k.useEffect:k.useLayoutEffect;function CA(t){const e="function"===typeof t?MA(t):t,n=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.getState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is;const[,r]=(0,k.useReducer)((t=>t+1),0),i=e.getState(),o=(0,k.useRef)(i),a=(0,k.useRef)(t),s=(0,k.useRef)(n),c=(0,k.useRef)(!1),l=(0,k.useRef)();let u;void 0===l.current&&(l.current=t(i));let h=!1;(o.current!==i||a.current!==t||s.current!==n||c.current)&&(u=t(i),h=!n(l.current,u)),OA((()=>{h&&(l.current=u),o.current=i,a.current=t,s.current=n,c.current=!1}));const d=(0,k.useRef)(i);OA((()=>{const t=()=>{try{const t=e.getState(),n=a.current(t);s.current(l.current,n)||(o.current=t,l.current=n,r())}catch(sO){c.current=!0,r()}},n=e.subscribe(t);return e.getState()!==d.current&&t(),n}),[]);const p=h?u:l.current;return(0,k.useDebugValue)(p),p};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const t=[n,e];return{next(){const e=t.length<=0;return{value:t.shift(),done:e}}}},n}var kA=__webpack_require__(2016),PA=__webpack_require__.n(kA),IA=__webpack_require__(8853);const NA=[];function RA(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(t,e)=>t===e;if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}function DA(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===e&&(e=[t]);for(const a of NA)if(RA(e,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return r.lifespan&&r.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,r.lifespan)),a.response;if(!n)throw a.promise}const i={keys:e,equal:r.equal,remove:()=>{const t=NA.indexOf(i);-1!==t&&NA.splice(t,1)},promise:(o=t,"object"===typeof o&&"function"===typeof o.then?t:t(...e)).then((t=>{i.response=t,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))})).catch((t=>i.error=t))};var o;if(NA.push(i),!n)throw i.promise}const LA=(t,e,n)=>DA(t,e,!1,n);const FA={};var jA,UA;const BA=t=>"colorSpace"in t||"outputColorSpace"in t,zA=()=>{var t;return null!=(t=FA.ColorManagement)?t:null},VA=t=>t&&t.isOrthographicCamera,GA="undefined"!==typeof window&&(null!=(jA=window.document)&&jA.createElement||"ReactNative"===(null==(UA=window.navigator)?void 0:UA.product))?k.useLayoutEffect:k.useEffect;function WA(t){const e=k.useRef(t);return GA((()=>{e.current=t}),[t]),e}function HA(t){let{set:e}=t;return GA((()=>(e(new Promise((()=>null))),()=>e(!1))),[e]),null}class qA extends k.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}qA.getDerivedStateFromError=()=>({error:!0});const XA="__default",YA=new Map,KA=t=>t&&!!t.memoized&&!!t.changes;function ZA(t){var e;const n="undefined"!==typeof window?null!=(e=window.devicePixelRatio)?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const JA=t=>{var e;return null==(e=t.__r3f)?void 0:e.root.getState()};function $A(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const QA={obj:t=>t===Object(t)&&!QA.arr(t)&&"function"!==typeof t,fun:t=>"function"===typeof t,str:t=>"string"===typeof t,num:t=>"number"===typeof t,boo:t=>"boolean"===typeof t,und:t=>void 0===t,arr:t=>Array.isArray(t),equ(t,e){let{arrays:n="shallow",objects:r="reference",strict:i=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(typeof t!==typeof e||!!t!==!!e)return!1;if(QA.str(t)||QA.num(t)||QA.boo(t))return t===e;const o=QA.obj(t);if(o&&"reference"===r)return t===e;const a=QA.arr(t);if(a&&"reference"===n)return t===e;if((a||o)&&t===e)return!0;let s;for(s in t)if(!(s in e))return!1;if(o&&"shallow"===n&&"shallow"===r){for(s in i?e:t)if(!QA.equ(t[s],e[s],{strict:i,objects:"reference"}))return!1}else for(s in i?e:t)if(t[s]!==e[s])return!1;if(QA.und(s)){if(a&&0===t.length&&0===e.length)return!0;if(o&&0===Object.keys(t).length&&0===Object.keys(e).length)return!0;if(t!==e)return!1}return!0}};function tM(t){const e={nodes:{},materials:{}};return t&&t.traverse((t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)})),e}function eM(t,e){return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function nM(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce(((t,e)=>t[e]),t),{target:n,key:i}}return{target:n,key:e}}const rM=/-\d+$/;function iM(t,e,n){if(QA.str(n)){if(rM.test(n)){const e=n.replace(rM,""),{target:r,key:i}=nM(t,e);Array.isArray(r[i])||(r[i]=[])}const{target:r,key:i}=nM(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function oM(t,e,n){var r,i;if(QA.str(n)){const{target:r,key:i}=nM(t,n),o=e.__r3f.previousAttach;void 0===o?delete r[i]:r[i]=o}else null==(r=e.__r3f)||null==r.previousAttach||r.previousAttach(t,e);null==(i=e.__r3f)||delete i.previousAttach}function aM(t,e){let{children:n,key:r,ref:i,...o}=e,{children:a,key:s,ref:c,...l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const h=t.__r3f,d=Object.entries(o),p=[];if(u){const t=Object.keys(l);for(let e=0;e<t.length;e++)o.hasOwnProperty(t[e])||d.unshift([t[e],XA+"remove"])}d.forEach((e=>{let[n,r]=e;var i;if(null!=(i=t.__r3f)&&i.primitive&&"object"===n)return;if(QA.equ(r,l[n]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(n))return p.push([n,r,!0,[]]);let a=[];n.includes("-")&&(a=n.split("-")),p.push([n,r,!1,a]);for(const t in o){const e=o[t];t.startsWith("".concat(n,"-"))&&p.push([t,e,!1,t.split("-")])}}));const f={...o};return null!=h&&h.memoizedProps&&null!=h&&h.memoizedProps.args&&(f.args=h.memoizedProps.args),null!=h&&h.memoizedProps&&null!=h&&h.memoizedProps.attach&&(f.attach=h.memoizedProps.attach),{memoized:f,changes:p}}const sM="undefined"!==typeof process&&!1;function cM(t,e){var n;const r=t.__r3f,i=null==r?void 0:r.root,o=null==i||null==i.getState?void 0:i.getState(),{memoized:a,changes:s}=KA(e)?e:aM(t,e),c=null==r?void 0:r.eventCount;t.__r3f&&(t.__r3f.memoizedProps=a);for(let l=0;l<s.length;l++){let[e,n,i,a]=s[l];if(BA(t)){const t=3001,r="srgb",i="srgb-linear";"encoding"===e?(e="colorSpace",n=n===t?r:i):"outputEncoding"===e&&(e="outputColorSpace",n=n===t?r:i)}let c=t,u=c[e];if(a.length&&(u=a.reduce(((t,e)=>t[e]),t),!u||!u.set)){const[n,...r]=a.reverse();c=r.reverse().reduce(((t,e)=>t[e]),t),e=n}if(n===XA+"remove")if(c.constructor){let t=YA.get(c.constructor);t||(t=new c.constructor,YA.set(c.constructor,t)),n=t[e]}else n=0;if(i&&r)n?r.handlers[e]=n:delete r.handlers[e],r.eventCount=Object.keys(r.handlers).length;else if(u&&u.set&&(u.copy||u instanceof Vm)){if(Array.isArray(n))u.fromArray?u.fromArray(n):u.set(...n);else if(u.copy&&n&&n.constructor&&(sM?u.constructor.name===n.constructor.name:u.constructor===n.constructor))u.copy(n);else if(void 0!==n){const t=u instanceof xg;!t&&u.setScalar?u.setScalar(n):u instanceof Vm&&n instanceof Vm?u.mask=n.mask:u.set(n),!zA()&&o&&!o.linear&&t&&u.convertSRGBToLinear()}}else if(c[e]=n,c[e]instanceof qf&&c[e].format===dd&&c[e].type===$h&&o){const t=c[e];BA(t)&&BA(o.gl)?t.colorSpace=o.gl.outputColorSpace:t.encoding=o.gl.outputEncoding}lM(t)}if(r&&r.parent&&t.raycast&&c!==r.eventCount){const e=$A(t).getState().internal,n=e.interaction.indexOf(t);n>-1&&e.interaction.splice(n,1),r.eventCount&&e.interaction.push(t)}return!(1===s.length&&"onUpdate"===s[0][0])&&s.length&&null!=(n=t.__r3f)&&n.parent&&uM(t),t}function lM(t){var e,n;const r=null==(e=t.__r3f)||null==(n=e.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function uM(t){null==t.onUpdate||t.onUpdate(t)}function hM(t,e){t.manual||(VA(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function dM(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function pM(t,e,n,r){const i=n.get(e);i&&(n.delete(e),0===n.size&&(t.delete(r),i.target.releasePointerCapture(r)))}function fM(t){function e(t){return t.filter((t=>["Move","Over","Enter","Out","Leave"].some((e=>{var n;return null==(n=t.__r3f)?void 0:n.handlers["onPointer"+e]}))))}function n(e){const{internal:n}=t.getState();for(const t of n.hovered.values())if(!e.length||!e.find((e=>e.object===t.object&&e.index===t.index&&e.instanceId===t.instanceId))){const r=t.eventObject.__r3f,i=null==r?void 0:r.handlers;if(n.hovered.delete(dM(t)),null!=r&&r.eventCount){const n={...t,intersections:e};null==i.onPointerOut||i.onPointerOut(n),null==i.onPointerLeave||i.onPointerLeave(n)}}}function r(t,e){for(let n=0;n<e.length;n++){const r=e[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(t)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return e=>{const{internal:r}=t.getState();"pointerId"in e&&r.capturedMap.has(e.pointerId)&&requestAnimationFrame((()=>{r.capturedMap.has(e.pointerId)&&(r.capturedMap.delete(e.pointerId),n([]))}))}}return function(o){const{onPointerMissed:a,internal:s}=t.getState();s.lastEvent.current=o;const c="onPointerMove"===i,l="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,u=function(e,n){const r=t.getState(),i=new Set,o=[],a=n?n(r.internal.interaction):r.internal.interaction;for(let t=0;t<a.length;t++){const e=JA(a[t]);e&&(e.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(e,r);let s=a.flatMap((function(t){const n=JA(t);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(e,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(t,!0):[]):[];var r})).sort(((t,e)=>{const n=JA(t.object),r=JA(e.object);return n&&r&&r.events.priority-n.events.priority||t.distance-e.distance})).filter((t=>{const e=dM(t);return!i.has(e)&&(i.add(e),!0)}));r.events.filter&&(s=r.events.filter(s,r));for(const t of s){let e=t.object;for(;e;){var c;null!=(c=e.__r3f)&&c.eventCount&&o.push({...t,eventObject:e}),e=e.parent}}if("pointerId"in e&&r.internal.capturedMap.has(e.pointerId))for(let t of r.internal.capturedMap.get(e.pointerId).values())i.has(dM(t.intersection))||o.push(t.intersection);return o}(o,c?e:void 0),h=l?function(e){const{internal:n}=t.getState(),r=e.offsetX-n.initialClick[0],i=e.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(o):0;"onPointerDown"===i&&(s.initialClick=[o.offsetX,o.offsetY],s.initialHits=u.map((t=>t.eventObject))),l&&!u.length&&h<=2&&(r(o,s.interaction),a&&a(o)),c&&n(u),function(e,r,i,o){const a=t.getState();if(e.length){const t={stopped:!1};for(const s of e){const c=JA(s.object)||a,{raycaster:l,pointer:u,camera:h,internal:d}=c,p=new em(u.x,u.y,0).unproject(h),f=t=>{var e,n;return null!=(e=null==(n=d.capturedMap.get(t))?void 0:n.has(s.eventObject))&&e},m=t=>{const e={intersection:s,target:r.target};d.capturedMap.has(t)?d.capturedMap.get(t).set(s.eventObject,e):d.capturedMap.set(t,new Map([[s.eventObject,e]])),r.target.setPointerCapture(t)},g=t=>{const e=d.capturedMap.get(t);e&&pM(d.capturedMap,s.eventObject,e,t)};let y={};for(let t in r){let e=r[t];"function"!==typeof e&&(y[t]=e)}let v={...s,...y,pointer:u,intersections:e,stopped:t.stopped,delta:i,unprojectedPoint:p,ray:l.ray,camera:h,stopPropagation(){const i="pointerId"in r&&d.capturedMap.get(r.pointerId);(!i||i.has(s.eventObject))&&(v.stopped=t.stopped=!0,d.hovered.size&&Array.from(d.hovered.values()).find((t=>t.eventObject===s.eventObject)))&&n([...e.slice(0,e.indexOf(s)),s])},target:{hasPointerCapture:f,setPointerCapture:m,releasePointerCapture:g},currentTarget:{hasPointerCapture:f,setPointerCapture:m,releasePointerCapture:g},nativeEvent:r};if(o(v),!0===t.stopped)break}}}(u,o,h,(function(t){const e=t.eventObject,n=e.__r3f,a=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(c){if(a.onPointerOver||a.onPointerEnter||a.onPointerOut||a.onPointerLeave){const e=dM(t),n=s.hovered.get(e);n?n.stopped&&t.stopPropagation():(s.hovered.set(e,t),null==a.onPointerOver||a.onPointerOver(t),null==a.onPointerEnter||a.onPointerEnter(t))}null==a.onPointerMove||a.onPointerMove(t)}else{const n=a[i];n?l&&!s.initialHits.includes(e)||(r(o,s.interaction.filter((t=>!s.initialHits.includes(t)))),n(t)):l&&s.initialHits.includes(e)&&r(o,s.interaction.filter((t=>!s.initialHits.includes(t))))}}))}}}}const mM=t=>!(null==t||!t.render),gM=k.createContext(null),yM=(t,e)=>{const n=CA(((n,r)=>{const i=new em,o=new em,a=new em;function s(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r().camera,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r().size;const{width:s,height:c,top:l,left:u}=n,h=s/c;e instanceof em?a.copy(e):a.set(...e);const d=t.getWorldPosition(i).distanceTo(a);if(VA(t))return{width:s/t.zoom,height:c/t.zoom,top:l,left:u,factor:1,distance:d,aspect:h};{const e=t.fov*Math.PI/180,n=2*Math.tan(e/2)*d,r=n*(s/c);return{width:r,height:n,top:l,left:u,factor:s/r,distance:d,aspect:h}}}let c;const l=t=>n((e=>({performance:{...e.performance,current:t}}))),u=new Sf,h={set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return t(r(),e)},advance:(t,n)=>e(t,n,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new oE,pointer:u,mouse:u,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const t=r();c&&clearTimeout(c),t.performance.current!==t.performance.min&&l(t.performance.min),c=setTimeout((()=>l(r().performance.max)),t.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:s},setEvents:t=>n((e=>({...e,events:{...e.events,...t}}))),setSize:(t,e,i,a,c)=>{const l=r().camera,u={width:t,height:e,top:a||0,left:c||0,updateStyle:i};n((t=>({size:u,viewport:{...t.viewport,...s(l,o,u)}})))},setDpr:t=>n((e=>{const n=ZA(t);return{viewport:{...e.viewport,dpr:n,initialDpr:e.viewport.initialDpr||n}}})),setFrameloop:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";const e=r().clock;e.stop(),e.elapsedTime=0,"never"!==t&&(e.start(),e.elapsedTime=0),n((()=>({frameloop:t})))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:k.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(t,e,n)=>{const i=r().internal;return i.priority=i.priority+(e>0?1:0),i.subscribers.push({ref:t,priority:e,store:n}),i.subscribers=i.subscribers.sort(((t,e)=>t.priority-e.priority)),()=>{const n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(e>0?1:0),n.subscribers=n.subscribers.filter((e=>e.ref!==t)))}}}};return h})),r=n.getState();let i=r.size,o=r.viewport.dpr,a=r.camera;return n.subscribe((()=>{const{camera:t,size:e,viewport:r,gl:s,set:c}=n.getState();if(e.width!==i.width||e.height!==i.height||r.dpr!==o){var l;i=e,o=r.dpr,hM(t,e),s.setPixelRatio(r.dpr);const n=null!=(l=e.updateStyle)?l:"undefined"!==typeof HTMLCanvasElement&&s.domElement instanceof HTMLCanvasElement;s.setSize(e.width,e.height,n)}t!==a&&(a=t,c((e=>({viewport:{...e.viewport,...e.viewport.getCurrentViewport(t)}}))))})),n.subscribe((e=>t(e))),n};let vM,bM=new Set,xM=new Set,_M=new Set;function wM(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function SM(t,e){switch(t){case"before":return wM(bM,e);case"after":return wM(xM,e);case"tail":return wM(_M,e)}}let TM,EM;function AM(t,e,n){let r=e.clock.getDelta();for("never"===e.frameloop&&"number"===typeof t&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),TM=e.internal.subscribers,vM=0;vM<TM.length;vM++)EM=TM[vM],EM.ref.current(EM.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),"always"===e.frameloop?1:e.internal.frames}function MM(){const t=k.useContext(gM);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function OM(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t=>t,e=arguments.length>1?arguments[1]:void 0;return MM()(t,e)}function CM(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=MM(),r=n.getState().internal.subscribe,i=WA(t);return GA((()=>r(i,e,n)),[e,r,n]),null}const kM=new WeakMap;function PM(t,e){return function(n){let r=kM.get(n);r||(r=new n,kM.set(n,r)),t&&t(r);for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return Promise.all(o.map((t=>new Promise(((n,i)=>r.load(t,(t=>{t.scene&&Object.assign(t,tM(t.scene)),n(t)}),e,(e=>i(new Error("Could not load ".concat(t,": ").concat(null==e?void 0:e.message))))))))))}}function IM(t,e,n,r){const i=Array.isArray(e)?e:[e],o=LA(PM(n,r),[t,...i],{equal:QA.equ});return Array.isArray(e)?o:o[0]}IM.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return((t,e,n)=>{DA(t,e,!0,n)})(PM(n),[t,...r])},IM.clear=function(t,e){return(t=>{if(void 0===t||0===t.length)NA.splice(0,NA.length);else{const e=NA.find((e=>RA(t,e.keys,e.equal)));e&&e.remove()}})([t,...Array.isArray(e)?e:[e]])};const NM=new Map,{invalidate:RM,advance:DM}=function(t){let e,n,r,i=!1,o=!1;function a(s){n=requestAnimationFrame(a),i=!0,e=0,SM("before",s),o=!0;for(const n of t.values()){var c;r=n.store.getState(),!r.internal.active||!("always"===r.frameloop||r.internal.frames>0)||null!=(c=r.gl.xr)&&c.isPresenting||(e+=AM(s,r))}if(o=!1,SM("after",s),0===e)return SM("tail",s),i=!1,cancelAnimationFrame(n)}return{loop:a,invalidate:function e(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var s;if(!n)return t.forEach((t=>e(t.store.getState(),r)));null!=(s=n.gl.xr)&&s.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=r>1?Math.min(60,n.internal.frames+r):o?2:1,i||(i=!0,requestAnimationFrame(a)))},advance:function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(n&&SM("before",e),r)AM(e,r,i);else for(const o of t.values())AM(e,o.store.getState());n&&SM("after",e)}}}(NM),{reconciler:LM,applyProps:FM}=function(t,e){function n(t,e,n){let r,{args:i=[],attach:o,...a}=e,s="".concat(t[0].toUpperCase()).concat(t.slice(1));if("primitive"===t){if(void 0===a.object)throw new Error("R3F: Primitives without 'object' are invalid!");r=eM(a.object,{type:t,root:n,attach:o,primitive:!0})}else{const e=FA[s];if(!e)throw new Error("R3F: ".concat(s," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if(!Array.isArray(i))throw new Error("R3F: The args prop must be an array!");r=eM(new e(...i),{type:t,root:n,attach:o,memoizedProps:{args:i}})}return void 0===r.__r3f.attach&&(r instanceof Kg?r.__r3f.attach="geometry":r instanceof Sg&&(r.__r3f.attach="material")),"inject"!==s&&cM(r,a),r}function r(t,e){let n=!1;var r,i;e&&(null!=(r=e.__r3f)&&r.attach?iM(t,e,e.__r3f.attach):e.isObject3D&&t.isObject3D&&(t.add(e),n=!0),n||null==(i=t.__r3f)||i.objects.push(e),e.__r3f||eM(e,{}),e.__r3f.parent=t,uM(e),lM(e))}function i(t,e,n){let r=!1;if(e){var i,o;if(null!=(i=e.__r3f)&&i.attach)iM(t,e,e.__r3f.attach);else if(e.isObject3D&&t.isObject3D){e.parent=t,e.dispatchEvent({type:"added"}),t.dispatchEvent({type:"childadded",child:e});const i=t.children.filter((t=>t!==e)),o=i.indexOf(n);t.children=[...i.slice(0,o),e,...i.slice(o)],r=!0}r||null==(o=t.__r3f)||o.objects.push(e),e.__r3f||eM(e,{}),e.__r3f.parent=t,uM(e),lM(e)}}function o(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&[...t].forEach((t=>a(e,t,n)))}function a(t,e,n){if(e){var r,i,a;if(e.__r3f&&(e.__r3f.parent=null),null!=(r=t.__r3f)&&r.objects&&(t.__r3f.objects=t.__r3f.objects.filter((t=>t!==e))),null!=(i=e.__r3f)&&i.attach)oM(t,e,e.__r3f.attach);else if(e.isObject3D&&t.isObject3D){var s;t.remove(e),null!=(s=e.__r3f)&&s.root&&function(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter((t=>t!==e)),n.initialHits=n.initialHits.filter((t=>t!==e)),n.hovered.forEach(((t,r)=>{t.eventObject!==e&&t.object!==e||n.hovered.delete(r)})),n.capturedMap.forEach(((t,r)=>{pM(n.capturedMap,e,t,r)}))}($A(e),e)}const l=null==(a=e.__r3f)?void 0:a.primitive,u=!l&&(void 0===n?null!==e.dispose:n);var c;if(!l)o(null==(c=e.__r3f)?void 0:c.objects,e,u),o(e.children,e,u);if(delete e.__r3f,u&&e.dispose&&"Scene"!==e.type){const t=()=>{try{e.dispose()}catch(sCt){}};"undefined"===typeof IS_REACT_ACT_ENVIRONMENT?(0,IA.unstable_scheduleCallback)(IA.unstable_IdlePriority,t):t()}lM(t)}}const s=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters."),c=PA()({createInstance:n,removeChild:a,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(t,e)=>{if(!e)return;const n=t.getState().scene;n.__r3f&&(n.__r3f.root=t,r(n,e))},removeChildFromContainer:(t,e)=>{e&&a(t.getState().scene,e)},insertInContainerBefore:(t,e,n)=>{if(!e||!n)return;const r=t.getState().scene;r.__r3f&&i(r,e,n)},getRootHostContext:()=>null,getChildHostContext:t=>t,finalizeInitialChildren(t){var e;const n=null!=(e=null==t?void 0:t.__r3f)?e:{};return Boolean(n.handlers)},prepareUpdate(t,e,n,r){var i;if((null!=(i=null==t?void 0:t.__r3f)?i:{}).primitive&&r.object&&r.object!==t)return[!0];{const{args:e=[],children:i,...o}=r,{args:a=[],children:s,...c}=n;if(!Array.isArray(e))throw new Error("R3F: the args prop must be an array!");if(e.some(((t,e)=>t!==a[e])))return[!0];const l=aM(t,o,c,!0);return l.changes.length?[!1,l]:null}},commitUpdate(t,e,i,o,s,c){let[l,u]=e;l?function(t,e,i,o){var s;const c=null==(s=t.__r3f)?void 0:s.parent;if(!c)return;const l=n(e,i,t.__r3f.root);if(t.children){for(const e of t.children)e.__r3f&&r(l,e);t.children=t.children.filter((t=>!t.__r3f))}t.__r3f.objects.forEach((t=>r(l,t))),t.__r3f.objects=[],t.__r3f.autoRemovedBeforeAppend||a(c,t),l.parent&&(l.__r3f.autoRemovedBeforeAppend=!0),r(c,l),l.raycast&&l.__r3f.eventCount&&$A(l).getState().internal.interaction.push(l);[o,o.alternate].forEach((t=>{null!==t&&(t.stateNode=l,t.ref&&("function"===typeof t.ref?t.ref(l):t.ref.current=l))}))}(t,i,s,c):cM(t,u)},commitMount(t,e,n,r){var i;const o=null!=(i=t.__r3f)?i:{};t.raycast&&o.handlers&&o.eventCount&&$A(t).getState().internal.interaction.push(t)},getPublicInstance:t=>t,prepareForCommit:()=>null,preparePortalMount:t=>eM(t.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(t){var e;const{attach:n,parent:r}=null!=(e=t.__r3f)?e:{};n&&r&&oM(r,t,n),t.isObject3D&&(t.visible=!1),lM(t)},unhideInstance(t,e){var n;const{attach:r,parent:i}=null!=(n=t.__r3f)?n:{};r&&i&&iM(i,t,r),(t.isObject3D&&null==e.visible||e.visible)&&(t.visible=!0),lM(t)},createTextInstance:s,hideTextInstance:s,unhideTextInstance:s,getCurrentEventPriority:()=>e?e():AA.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!==typeof performance&&QA.fun(performance.now)?performance.now:QA.fun(Date.now)?Date.now:()=>0,scheduleTimeout:QA.fun(setTimeout)?setTimeout:void 0,cancelTimeout:QA.fun(clearTimeout)?clearTimeout:void 0});return{reconciler:c,applyProps:cM}}(0,(function(){var t;const e="undefined"!==typeof self&&self||"undefined"!==typeof window&&window;if(!e)return AA.DefaultEventPriority;switch(null==(t=e.event)?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return AA.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return AA.ContinuousEventPriority;default:return AA.DefaultEventPriority}})),jM={objects:"shallow",strict:!1},UM=(t,e)=>{const n="function"===typeof t?t(e):t;return mM(n)?n:new Sx({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function BM(t){const e=NM.get(t),n=null==e?void 0:e.fiber,r=null==e?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i="function"===typeof reportError?reportError:console.error,o=r||yM(RM,DM),a=n||LM.createContainer(o,AA.ConcurrentRoot,null,!1,null,"",i,null);let s;e||NM.set(t,{fiber:a,store:o});let c,l=!1;return{configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{gl:n,size:r,scene:i,events:a,onCreated:u,shadows:h=!1,linear:d=!1,flat:p=!1,legacy:f=!1,orthographic:m=!1,frameloop:g="always",dpr:y=[1,2],performance:v,raycaster:b,camera:x,onPointerMissed:_}=e,w=o.getState(),S=w.gl;w.gl||w.set({gl:S=UM(n,t)});let T=w.raycaster;T||w.set({raycaster:T=new FE});const{params:E,...A}=b||{};if(QA.equ(A,T,jM)||FM(T,{...A}),QA.equ(E,T.params,jM)||FM(T,{params:{...T.params,...E}}),!w.camera||w.camera===c&&!QA.equ(c,x,jM)){c=x;const t=x instanceof _y,e=t?x:m?new $y(0,0,0,0,.1,1e3):new Ey(75,0,.1,1e3);t||(e.position.z=5,x&&(FM(e,x),("aspect"in x||"left"in x||"right"in x||"bottom"in x||"top"in x)&&(e.manual=!0,e.updateProjectionMatrix())),w.camera||null!=x&&x.rotation||e.lookAt(0,0,0)),w.set({camera:e}),T.camera=e}if(!w.scene){let t;i instanceof Ax?t=i:(t=new Ax,i&&FM(t,i)),w.set({scene:eM(t)})}if(!w.xr){var M;const t=(t,e)=>{const n=o.getState();"never"!==n.frameloop&&DM(t,!0,n,e)},e=()=>{const e=o.getState();e.gl.xr.enabled=e.gl.xr.isPresenting,e.gl.xr.setAnimationLoop(e.gl.xr.isPresenting?t:null),e.gl.xr.isPresenting||RM(e)},n={connect(){const t=o.getState().gl;t.xr.addEventListener("sessionstart",e),t.xr.addEventListener("sessionend",e)},disconnect(){const t=o.getState().gl;t.xr.removeEventListener("sessionstart",e),t.xr.removeEventListener("sessionend",e)}};"function"===typeof(null==(M=S.xr)?void 0:M.addEventListener)&&n.connect(),w.set({xr:n})}if(S.shadowMap){const t=S.shadowMap.enabled,e=S.shadowMap.type;if(S.shadowMap.enabled=!!h,QA.boo(h))S.shadowMap.type=Du;else if(QA.str(h)){var O;const t={basic:Nu,percentage:Ru,soft:Du,variance:Lu};S.shadowMap.type=null!=(O=t[h])?O:Du}else QA.obj(h)&&Object.assign(S.shadowMap,h);t===S.shadowMap.enabled&&e===S.shadowMap.type||(S.shadowMap.needsUpdate=!0)}const C=zA();if(C&&("enabled"in C?C.enabled=!f:"legacyMode"in C&&(C.legacyMode=f)),!l){FM(S,{outputEncoding:d?3e3:3001,toneMapping:p?Sh:Mh})}w.legacy!==f&&w.set((()=>({legacy:f}))),w.linear!==d&&w.set((()=>({linear:d}))),w.flat!==p&&w.set((()=>({flat:p}))),!n||QA.fun(n)||mM(n)||QA.equ(n,S,jM)||FM(S,n),a&&!w.events.handlers&&w.set({events:a(o)});const k=function(t,e){const n="undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement;if(e){const{width:t,height:r,top:i,left:o,updateStyle:a=n}=e;return{width:t,height:r,top:i,left:o,updateStyle:a}}if("undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:e,height:r,top:i,left:o}=t.parentElement.getBoundingClientRect();return{width:e,height:r,top:i,left:o,updateStyle:n}}return"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?{width:t.width,height:t.height,top:0,left:0,updateStyle:n}:{width:0,height:0,top:0,left:0}}(t,r);return QA.equ(k,w.size,jM)||w.setSize(k.width,k.height,k.updateStyle,k.top,k.left),y&&w.viewport.dpr!==ZA(y)&&w.setDpr(y),w.frameloop!==g&&w.setFrameloop(g),w.onPointerMissed||w.set({onPointerMissed:_}),v&&!QA.equ(v,w.performance,jM)&&w.set((t=>({performance:{...t.performance,...v}}))),s=u,l=!0,this},render(e){return l||this.configure(),LM.updateContainer((0,Ln.jsx)(zM,{store:o,children:e,onCreated:s,rootElement:t}),a,null,(()=>{})),o},unmount(){VM(t)}}}function zM(t){let{store:e,children:n,onCreated:r,rootElement:i}=t;return GA((()=>{const t=e.getState();t.set((t=>({internal:{...t.internal,active:!0}}))),r&&r(t),e.getState().events.connected||null==t.events.connect||t.events.connect(i)}),[]),(0,Ln.jsx)(gM.Provider,{value:e,children:n})}function VM(t,e){const n=NM.get(t),r=null==n?void 0:n.fiber;if(r){const i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),LM.updateContainer(null,r,null,(()=>{i&&setTimeout((()=>{try{var n,r,o,a;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(o=i.gl)||null==o.forceContextLoss||o.forceContextLoss(),null!=(a=i.gl)&&a.xr&&i.xr.disconnect(),function(t){t.dispose&&"Scene"!==t.type&&t.dispose();for(const e in t)null==e.dispose||e.dispose(),delete t[e]}(i),NM.delete(t),e&&e(t)}catch(sCt){}}),500)}))}}LM.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:k.version});k.unstable_act;var GM=__webpack_require__(4695),WM=__webpack_require__.n(GM);function HM(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=void 0===t?{debounce:0,scroll:!1,offsetSize:!1}:t;const o=r||("undefined"===typeof window?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=(0,k.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=(0,k.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a}),l=e?"number"===typeof e?e:e.scroll:null,u=e?"number"===typeof e?e:e.resize:null,h=(0,k.useRef)(!1);(0,k.useEffect)((()=>(h.current=!0,()=>{h.current=!1})));const[d,p,f]=(0,k.useMemo)((()=>{const t=()=>{if(!c.current.element)return;const{left:t,top:e,width:n,height:r,bottom:o,right:a,x:l,y:u}=c.current.element.getBoundingClientRect(),d={left:t,top:e,width:n,height:r,bottom:o,right:a,x:l,y:u};c.current.element instanceof HTMLElement&&i&&(d.height=c.current.element.offsetHeight,d.width=c.current.element.offsetWidth),Object.freeze(d),h.current&&!YM(c.current.lastBounds,d)&&s(c.current.lastBounds=d)};return[t,u?WM()(t,u):t,l?WM()(t,l):t]}),[s,i,l,u]);function m(){c.current.scrollContainers&&(c.current.scrollContainers.forEach((t=>t.removeEventListener("scroll",f,!0))),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null)}function g(){c.current.element&&(c.current.resizeObserver=new o(f),c.current.resizeObserver.observe(c.current.element),n&&c.current.scrollContainers&&c.current.scrollContainers.forEach((t=>t.addEventListener("scroll",f,{capture:!0,passive:!0}))))}var y,v,b;return y=f,v=Boolean(n),(0,k.useEffect)((()=>{if(v){const t=y;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}}),[y,v]),b=p,(0,k.useEffect)((()=>{const t=b;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[b]),(0,k.useEffect)((()=>{m(),g()}),[n,f,p]),(0,k.useEffect)((()=>m),[]),[t=>{t&&t!==c.current.element&&(m(),c.current.element=t,c.current.scrollContainers=qM(t),g())},a,d]}function qM(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some((t=>"auto"===t||"scroll"===t))&&e.push(t),[...e,...qM(t.parentElement)]}const XM=["x","y","top","bottom","left","right","width","height"],YM=(t,e)=>XM.every((n=>t[n]===e[n]));var KM,ZM,JM=Object.defineProperty,$M=Object.defineProperties,QM=Object.getOwnPropertyDescriptors,tO=Object.getOwnPropertySymbols,eO=Object.prototype.hasOwnProperty,nO=Object.prototype.propertyIsEnumerable,rO=(t,e,n)=>e in t?JM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iO=(t,e)=>{for(var n in e||(e={}))eO.call(e,n)&&rO(t,n,e[n]);if(tO)for(var n of tO(e))nO.call(e,n)&&rO(t,n,e[n]);return t};"undefined"===typeof window||!(null==(KM=window.document)?void 0:KM.createElement)&&"ReactNative"!==(null==(ZM=window.navigator)?void 0:ZM.product)?k.useEffect:k.useLayoutEffect;function oO(t,e,n){if(!t)return;if(!0===n(t))return t;let r=e?t.return:t.child;for(;r;){const t=oO(r,e,n);if(t)return t;r=e?null:r.sibling}}function aO(t){try{return Object.defineProperties(t,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(ZQ){return t}}const sO=console.error;console.error=function(){const t=[...arguments].join("");if(!(null==t?void 0:t.startsWith("Warning:"))||!t.includes("useContext"))return sO.apply(this,arguments);console.error=sO};const cO=aO(k.createContext(null));class lO extends k.Component{render(){return k.createElement(cO.Provider,{value:this._reactInternals},this.props.children)}}function uO(){const t=k.useContext(cO);if(null===t)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=k.useId(),n=k.useMemo((()=>{for(const n of[t,null==t?void 0:t.alternate]){if(!n)continue;const t=oO(n,!1,(t=>{let n=t.memoizedState;for(;n;){if(n.memoizedState===e)return!0;n=n.next}}));if(t)return t}}),[t,e]);return n}function hO(){const t=function(){const t=uO(),[e]=k.useState((()=>new Map));e.clear();let n=t;for(;n;){if(n.type&&"object"===typeof n.type){const t=void 0===n.type._context&&n.type.Provider===n.type?n.type:n.type._context;t&&t!==cO&&!e.has(t)&&e.set(t,k.useContext(aO(t)))}n=n.return}return e}();return k.useMemo((()=>Array.from(t.keys()).reduce(((e,n)=>r=>k.createElement(e,null,k.createElement(n.Provider,((t,e)=>$M(t,QM(e)))(iO({},r),{value:t.get(n)})))),(t=>k.createElement(lO,iO({},t))))),[t])}const dO={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function pO(t){const{handlePointer:e}=fM(t);return{priority:1,enabled:!0,compute(t,e,n){e.pointer.set(t.offsetX/e.size.width*2-1,-t.offsetY/e.size.height*2+1),e.raycaster.setFromCamera(e.pointer,e.camera)},connected:void 0,handlers:Object.keys(dO).reduce(((t,n)=>({...t,[n]:e(n)})),{}),update:()=>{var e;const{events:n,internal:r}=t.getState();null!=(e=r.lastEvent)&&e.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:e=>{var n;const{set:r,events:i}=t.getState();null==i.disconnect||i.disconnect(),r((t=>({events:{...t.events,connected:e}}))),Object.entries(null!=(n=i.handlers)?n:[]).forEach((t=>{let[n,r]=t;const[i,o]=dO[n];e.addEventListener(i,r,{passive:o})}))},disconnect:()=>{const{set:e,events:n}=t.getState();var r;n.connected&&(Object.entries(null!=(r=n.handlers)?r:[]).forEach((t=>{let[e,r]=t;if(n&&n.connected instanceof HTMLElement){const[t]=dO[e];n.connected.removeEventListener(t,r)}})),e((t=>({events:{...t.events,connected:void 0}}))))}}}const fO=k.forwardRef((function(e,n){let{children:r,fallback:i,resize:o,style:a,gl:s,events:c=pO,eventSource:l,eventPrefix:u,shadows:h,linear:d,flat:p,legacy:f,orthographic:m,frameloop:g,dpr:y,performance:v,raycaster:b,camera:x,scene:_,onPointerMissed:w,onCreated:S,...T}=e;k.useMemo((()=>{return e=t,void Object.assign(FA,e);var e}),[]);const E=hO(),[A,M]=HM({scroll:!0,debounce:{scroll:50,resize:0},...o}),O=k.useRef(null),C=k.useRef(null);k.useImperativeHandle(n,(()=>O.current));const P=WA(w),[I,N]=k.useState(!1),[R,D]=k.useState(!1);if(I)throw I;if(R)throw R;const L=k.useRef(null);GA((()=>{const t=O.current;M.width>0&&M.height>0&&t&&(L.current||(L.current=BM(t)),L.current.configure({gl:s,events:c,shadows:h,linear:d,flat:p,legacy:f,orthographic:m,frameloop:g,dpr:y,performance:v,raycaster:b,camera:x,scene:_,size:M,onPointerMissed:function(){return null==P.current?void 0:P.current(...arguments)},onCreated:t=>{var e;null==t.events.connect||t.events.connect(l?(e=l)&&e.hasOwnProperty("current")?l.current:l:C.current),u&&t.setEvents({compute:(t,e)=>{const n=t[u+"X"],r=t[u+"Y"];e.pointer.set(n/e.size.width*2-1,-r/e.size.height*2+1),e.raycaster.setFromCamera(e.pointer,e.camera)}}),null==S||S(t)}}),L.current.render((0,Ln.jsx)(E,{children:(0,Ln.jsx)(qA,{set:D,children:(0,Ln.jsx)(k.Suspense,{fallback:(0,Ln.jsx)(HA,{set:N}),children:r})})})))})),k.useEffect((()=>{const t=O.current;if(t)return()=>VM(t)}),[]);const F=l?"none":"auto";return(0,Ln.jsx)("div",{ref:C,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:F,...a},...T,children:(0,Ln.jsx)("div",{ref:A,style:{width:"100%",height:"100%"},children:(0,Ln.jsx)("canvas",{ref:O,style:{display:"block"},children:i})})})})),mO=k.forwardRef((function(t,e){return(0,Ln.jsx)(lO,{children:(0,Ln.jsx)(fO,{...t,ref:e})})})),gO=t=>t===Object(t)&&!Array.isArray(t)&&"function"!==typeof t;function yO(t,e){const n=OM((t=>t.gl)),r=IM(ST,gO(t)?Object.values(t):t);(0,k.useLayoutEffect)((()=>{null==e||e(r)}),[e]),(0,k.useEffect)((()=>{if("initTexture"in n){let t=[];Array.isArray(r)?t=r:r instanceof qf?t=[r]:gO(r)&&(t=Object.values(r)),t.forEach((t=>{t instanceof qf&&n.initTexture(t)}))}}),[n,r]);const i=(0,k.useMemo)((()=>{if(gO(t)){const e={};let n=0;for(const i in t)e[i]=r[n++];return e}return r}),[t,r]);return i}yO.preload=t=>IM.preload(ST,t),yO.clear=t=>IM.clear(ST,t);const vO=k.forwardRef(((t,e)=>{let{children:n,enabled:r=!0,speed:i=1,rotationIntensity:o=1,floatIntensity:a=1,floatingRange:s=[-.1,.1],...c}=t;const l=k.useRef(null);k.useImperativeHandle(e,(()=>l.current),[]);const u=k.useRef(1e4*Math.random());return CM((t=>{var e,n;if(!r||0===i)return;const c=u.current+t.clock.getElapsedTime();l.current.rotation.x=Math.cos(c/4*i)/8*o,l.current.rotation.y=Math.sin(c/4*i)/8*o,l.current.rotation.z=Math.sin(c/4*i)/20*o;let h=Math.sin(c/4*i)/10;h=wf.mapLinear(h,-.1,.1,null!==(e=null==s?void 0:s[0])&&void 0!==e?e:-.1,null!==(n=null==s?void 0:s[1])&&void 0!==n?n:.1),l.current.position.y=h*a,l.current.updateMatrix()})),k.createElement("group",c,k.createElement("group",{ref:l,matrixAutoUpdate:!1},n))}));function bO(){return bO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bO.apply(null,arguments)}class xO extends Kg{constructor(t,e,n,r){super();const i=[],o=[],a=[],s=new em,c=new Pm;c.makeRotationFromEuler(n),c.setPosition(e);const l=new Pm;function u(e,n,r){n.applyMatrix4(t.matrixWorld),n.applyMatrix4(l),r.transformDirection(t.matrixWorld),e.push(new _O(n.clone(),r.clone()))}function h(t,e){const n=[],i=.5*Math.abs(r.dot(e));for(let r=0;r<t.length;r+=3){let o,a,s,c,l,u,h,p=0;switch(o=t[r+0].position.dot(e)-i>0,a=t[r+1].position.dot(e)-i>0,s=t[r+2].position.dot(e)-i>0,p=(o?1:0)+(a?1:0)+(s?1:0),p){case 0:n.push(t[r]),n.push(t[r+1]),n.push(t[r+2]);break;case 1:if(o&&(c=t[r+1],l=t[r+2],u=d(t[r],c,e,i),h=d(t[r],l,e,i)),a){c=t[r],l=t[r+2],u=d(t[r+1],c,e,i),h=d(t[r+1],l,e,i),n.push(u),n.push(l.clone()),n.push(c.clone()),n.push(l.clone()),n.push(u.clone()),n.push(h);break}s&&(c=t[r],l=t[r+1],u=d(t[r+2],c,e,i),h=d(t[r+2],l,e,i)),n.push(c.clone()),n.push(l.clone()),n.push(u),n.push(h),n.push(u.clone()),n.push(l.clone());break;case 2:o||(c=t[r].clone(),l=d(c,t[r+1],e,i),u=d(c,t[r+2],e,i),n.push(c),n.push(l),n.push(u)),a||(c=t[r+1].clone(),l=d(c,t[r+2],e,i),u=d(c,t[r],e,i),n.push(c),n.push(l),n.push(u)),s||(c=t[r+2].clone(),l=d(c,t[r],e,i),u=d(c,t[r+1],e,i),n.push(c),n.push(l),n.push(u))}}return n}function d(t,e,n,r){const i=t.position.dot(n)-r,o=i/(i-(e.position.dot(n)-r));return new _O(new em(t.position.x+o*(e.position.x-t.position.x),t.position.y+o*(e.position.y-t.position.y),t.position.z+o*(e.position.z-t.position.z)),new em(t.normal.x+o*(e.normal.x-t.normal.x),t.normal.y+o*(e.normal.y-t.normal.y),t.normal.z+o*(e.normal.z-t.normal.z)))}l.copy(c).invert(),function(){let e,n=[];const l=new em,d=new em;if(!0===t.geometry.isGeometry)return void console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");const p=t.geometry,f=p.attributes.position,m=p.attributes.normal;if(null!==p.index){const t=p.index;for(e=0;e<t.count;e++)l.fromBufferAttribute(f,t.getX(e)),d.fromBufferAttribute(m,t.getX(e)),u(n,l,d)}else for(e=0;e<f.count;e++)l.fromBufferAttribute(f,e),d.fromBufferAttribute(m,e),u(n,l,d);for(n=h(n,s.set(1,0,0)),n=h(n,s.set(-1,0,0)),n=h(n,s.set(0,1,0)),n=h(n,s.set(0,-1,0)),n=h(n,s.set(0,0,1)),n=h(n,s.set(0,0,-1)),e=0;e<n.length;e++){const t=n[e];a.push(.5+t.position.x/r.x,.5+t.position.y/r.y),t.position.applyMatrix4(c),i.push(t.position.x,t.position.y,t.position.z),o.push(t.normal.x,t.normal.y,t.normal.z)}}(),this.setAttribute("position",new zg(i,3)),this.setAttribute("normal",new zg(o,3)),this.setAttribute("uv",new zg(a,2))}}class _O{constructor(t,e){this.position=t,this.normal=e}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}function wO(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0];return function(t){return Array.isArray(t)}(t)?t:t instanceof em||t instanceof zm?[t.x,t.y,t.z]:[t,t,t]}const SO=k.forwardRef((function(t,e){let{debug:n,depthTest:r=!1,polygonOffsetFactor:i=-10,map:o,mesh:a,children:s,position:c,rotation:l,scale:u,...h}=t;const d=k.useRef(null);k.useImperativeHandle(e,(()=>d.current));const p=k.useRef(null);return k.useLayoutEffect((()=>{const t=(null==a?void 0:a.current)||d.current.parent,e=d.current;if(!(t instanceof py))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const n={position:new em,rotation:new zm,scale:new em(1,1,1)};if(t){FM(n,{position:c,scale:u});const r=t.matrixWorld.clone();if(t.matrixWorld.identity(),l&&"number"!==typeof l)FM(n,{rotation:l});else{const e=new ig;e.position.copy(n.position),e.lookAt(t.position),"number"===typeof l&&e.rotateZ(l),FM(n,{rotation:e.rotation})}return e.geometry=new xO(t,n.position,n.rotation,n.scale),p.current&&(FM(p.current,n),p.current.traverse((t=>t.raycast=()=>null))),t.matrixWorld=r,()=>{e.geometry.dispose()}}}),[a,...wO(c),...wO(u),...wO(l)]),k.createElement("mesh",bO({ref:d,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":i,"material-depthTest":r,"material-map":o},h),s,n&&k.createElement("mesh",{ref:p},k.createElement("boxGeometry",null),k.createElement("meshNormalMaterial",{wireframe:!0}),k.createElement("axesHelper",null)))}));var TO=Object.defineProperty,EO=(t,e,n)=>(((t,e,n)=>{e in t?TO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!==typeof e?e+"":e,n),n);const AO=new km,MO=new Ny,OO=Math.cos(Math.PI/180*70),CO=(t,e)=>(t%e+e)%e;class kO extends hf{constructor(t,e){super(),EO(this,"object"),EO(this,"domElement"),EO(this,"enabled",!0),EO(this,"target",new em),EO(this,"minDistance",0),EO(this,"maxDistance",1/0),EO(this,"minZoom",0),EO(this,"maxZoom",1/0),EO(this,"minPolarAngle",0),EO(this,"maxPolarAngle",Math.PI),EO(this,"minAzimuthAngle",-1/0),EO(this,"maxAzimuthAngle",1/0),EO(this,"enableDamping",!1),EO(this,"dampingFactor",.05),EO(this,"enableZoom",!0),EO(this,"zoomSpeed",1),EO(this,"enableRotate",!0),EO(this,"rotateSpeed",1),EO(this,"enablePan",!0),EO(this,"panSpeed",1),EO(this,"screenSpacePanning",!0),EO(this,"keyPanSpeed",7),EO(this,"zoomToCursor",!1),EO(this,"autoRotate",!1),EO(this,"autoRotateSpeed",2),EO(this,"reverseOrbit",!1),EO(this,"reverseHorizontalOrbit",!1),EO(this,"reverseVerticalOrbit",!1),EO(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),EO(this,"mouseButtons",{LEFT:Mu.ROTATE,MIDDLE:Mu.DOLLY,RIGHT:Mu.PAN}),EO(this,"touches",{ONE:Ou.ROTATE,TWO:Ou.DOLLY_PAN}),EO(this,"target0"),EO(this,"position0"),EO(this,"zoom0"),EO(this,"_domElementKeyEvents",null),EO(this,"getPolarAngle"),EO(this,"getAzimuthalAngle"),EO(this,"setPolarAngle"),EO(this,"setAzimuthalAngle"),EO(this,"getDistance"),EO(this,"listenToKeyEvents"),EO(this,"stopListenToKeyEvents"),EO(this,"saveState"),EO(this,"reset"),EO(this,"update"),EO(this,"connect"),EO(this,"dispose"),this.object=t,this.domElement=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>l.phi,this.getAzimuthalAngle=()=>l.theta,this.setPolarAngle=t=>{let e=CO(t,2*Math.PI),r=l.phi;r<0&&(r+=2*Math.PI),e<0&&(e+=2*Math.PI);let i=Math.abs(e-r);2*Math.PI-i<i&&(e<r?e+=2*Math.PI:r+=2*Math.PI),u.phi=e-r,n.update()},this.setAzimuthalAngle=t=>{let e=CO(t,2*Math.PI),r=l.theta;r<0&&(r+=2*Math.PI),e<0&&(e+=2*Math.PI);let i=Math.abs(e-r);2*Math.PI-i<i&&(e<r?e+=2*Math.PI:r+=2*Math.PI),u.theta=e-r,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=t=>{t.addEventListener("keydown",K),this._domElementKeyEvents=t},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",K),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),s=a.NONE},this.update=(()=>{const e=new em,i=new em(0,1,0),o=(new tm).setFromUnitVectors(t.up,i),p=o.clone().invert(),f=new em,m=new tm,g=2*Math.PI;return function(){const y=n.object.position;o.setFromUnitVectors(t.up,i),p.copy(o).invert(),e.copy(y).sub(n.target),e.applyQuaternion(o),l.setFromVector3(e),n.autoRotate&&s===a.NONE&&O(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(l.theta+=u.theta*n.dampingFactor,l.phi+=u.phi*n.dampingFactor):(l.theta+=u.theta,l.phi+=u.phi);let v=n.minAzimuthAngle,b=n.maxAzimuthAngle;isFinite(v)&&isFinite(b)&&(v<-Math.PI?v+=g:v>Math.PI&&(v-=g),b<-Math.PI?b+=g:b>Math.PI&&(b-=g),l.theta=v<=b?Math.max(v,Math.min(b,l.theta)):l.theta>(v+b)/2?Math.max(v,l.theta):Math.min(b,l.theta)),l.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,l.phi)),l.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),n.zoomToCursor&&T||n.object.isOrthographicCamera?l.radius=L(l.radius):l.radius=L(l.radius*h),e.setFromSpherical(l),e.applyQuaternion(p),y.copy(n.target).add(e),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),d.set(0,0,0));let x=!1;if(n.zoomToCursor&&T){let r=null;if(n.object instanceof Ey&&n.object.isPerspectiveCamera){const t=e.length();r=L(t*h);const i=t-r;n.object.position.addScaledVector(w,i),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const t=new em(S.x,S.y,0);t.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix(),x=!0;const i=new em(S.x,S.y,0);i.unproject(n.object),n.object.position.sub(i).add(t),n.object.updateMatrixWorld(),r=e.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==r&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(r).add(n.object.position):(AO.origin.copy(n.object.position),AO.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(AO.direction))<OO?t.lookAt(n.target):(MO.setFromNormalAndCoplanarPoint(n.object.up,n.target),AO.intersectPlane(MO,n.target))))}else n.object instanceof $y&&n.object.isOrthographicCamera&&(x=1!==h,x&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix()));return h=1,T=!1,!!(x||f.distanceToSquared(n.object.position)>c||8*(1-m.dot(n.object.quaternion))>c)&&(n.dispatchEvent(r),f.copy(n.object.position),m.copy(n.object.quaternion),x=!1,!0)}})(),this.connect=t=>{t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),n.domElement=t,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Z),n.domElement.addEventListener("pointerdown",H),n.domElement.addEventListener("pointercancel",X),n.domElement.addEventListener("wheel",Y)},this.dispose=()=>{var t,e,r,i,o,a;n.domElement&&(n.domElement.style.touchAction="auto"),null==(t=n.domElement)||t.removeEventListener("contextmenu",Z),null==(e=n.domElement)||e.removeEventListener("pointerdown",H),null==(r=n.domElement)||r.removeEventListener("pointercancel",X),null==(i=n.domElement)||i.removeEventListener("wheel",Y),null==(o=n.domElement)||o.ownerDocument.removeEventListener("pointermove",q),null==(a=n.domElement)||a.ownerDocument.removeEventListener("pointerup",X),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",K)};const n=this,r={type:"change"},i={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=a.NONE;const c=1e-6,l=new BE,u=new BE;let h=1;const d=new em,p=new Sf,f=new Sf,m=new Sf,g=new Sf,y=new Sf,v=new Sf,b=new Sf,x=new Sf,_=new Sf,w=new em,S=new Sf;let T=!1;const E=[],A={};function M(){return Math.pow(.95,n.zoomSpeed)}function O(t){n.reverseOrbit||n.reverseHorizontalOrbit?u.theta+=t:u.theta-=t}function C(t){n.reverseOrbit||n.reverseVerticalOrbit?u.phi+=t:u.phi-=t}const k=(()=>{const t=new em;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),d.add(t)}})(),P=(()=>{const t=new em;return function(e,r){!0===n.screenSpacePanning?t.setFromMatrixColumn(r,1):(t.setFromMatrixColumn(r,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),d.add(t)}})(),I=(()=>{const t=new em;return function(e,r){const i=n.domElement;if(i&&n.object instanceof Ey&&n.object.isPerspectiveCamera){const o=n.object.position;t.copy(o).sub(n.target);let a=t.length();a*=Math.tan(n.object.fov/2*Math.PI/180),k(2*e*a/i.clientHeight,n.object.matrix),P(2*r*a/i.clientHeight,n.object.matrix)}else i&&n.object instanceof $y&&n.object.isOrthographicCamera?(k(e*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),P(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function N(t){n.object instanceof Ey&&n.object.isPerspectiveCamera||n.object instanceof $y&&n.object.isOrthographicCamera?h/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function R(t){n.object instanceof Ey&&n.object.isPerspectiveCamera||n.object instanceof $y&&n.object.isOrthographicCamera?h*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function D(t){if(!n.zoomToCursor||!n.domElement)return;T=!0;const e=n.domElement.getBoundingClientRect(),r=t.clientX-e.left,i=t.clientY-e.top,o=e.width,a=e.height;S.x=r/o*2-1,S.y=-i/a*2+1,w.set(S.x,S.y,1).unproject(n.object).sub(n.object.position).normalize()}function L(t){return Math.max(n.minDistance,Math.min(n.maxDistance,t))}function F(t){p.set(t.clientX,t.clientY)}function j(t){g.set(t.clientX,t.clientY)}function U(){if(1==E.length)p.set(E[0].pageX,E[0].pageY);else{const t=.5*(E[0].pageX+E[1].pageX),e=.5*(E[0].pageY+E[1].pageY);p.set(t,e)}}function B(){if(1==E.length)g.set(E[0].pageX,E[0].pageY);else{const t=.5*(E[0].pageX+E[1].pageX),e=.5*(E[0].pageY+E[1].pageY);g.set(t,e)}}function z(){const t=E[0].pageX-E[1].pageX,e=E[0].pageY-E[1].pageY,n=Math.sqrt(t*t+e*e);b.set(0,n)}function V(t){if(1==E.length)f.set(t.pageX,t.pageY);else{const e=$(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);f.set(n,r)}m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const e=n.domElement;e&&(O(2*Math.PI*m.x/e.clientHeight),C(2*Math.PI*m.y/e.clientHeight)),p.copy(f)}function G(t){if(1==E.length)y.set(t.pageX,t.pageY);else{const e=$(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);y.set(n,r)}v.subVectors(y,g).multiplyScalar(n.panSpeed),I(v.x,v.y),g.copy(y)}function W(t){const e=$(t),r=t.pageX-e.x,i=t.pageY-e.y,o=Math.sqrt(r*r+i*i);x.set(0,o),_.set(0,Math.pow(x.y/b.y,n.zoomSpeed)),N(_.y),b.copy(x)}function H(t){var e,r;!1!==n.enabled&&(0===E.length&&(null==(e=n.domElement)||e.ownerDocument.addEventListener("pointermove",q),null==(r=n.domElement)||r.ownerDocument.addEventListener("pointerup",X)),function(t){E.push(t)}(t),"touch"===t.pointerType?function(t){switch(J(t),E.length){case 1:switch(n.touches.ONE){case Ou.ROTATE:if(!1===n.enableRotate)return;U(),s=a.TOUCH_ROTATE;break;case Ou.PAN:if(!1===n.enablePan)return;B(),s=a.TOUCH_PAN;break;default:s=a.NONE}break;case 2:switch(n.touches.TWO){case Ou.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&z(),n.enablePan&&B(),s=a.TOUCH_DOLLY_PAN;break;case Ou.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&z(),n.enableRotate&&U(),s=a.TOUCH_DOLLY_ROTATE;break;default:s=a.NONE}break;default:s=a.NONE}s!==a.NONE&&n.dispatchEvent(i)}(t):function(t){let e;switch(t.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Mu.DOLLY:if(!1===n.enableZoom)return;!function(t){D(t),b.set(t.clientX,t.clientY)}(t),s=a.DOLLY;break;case Mu.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;j(t),s=a.PAN}else{if(!1===n.enableRotate)return;F(t),s=a.ROTATE}break;case Mu.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;F(t),s=a.ROTATE}else{if(!1===n.enablePan)return;j(t),s=a.PAN}break;default:s=a.NONE}s!==a.NONE&&n.dispatchEvent(i)}(t))}function q(t){!1!==n.enabled&&("touch"===t.pointerType?function(t){switch(J(t),s){case a.TOUCH_ROTATE:if(!1===n.enableRotate)return;V(t),n.update();break;case a.TOUCH_PAN:if(!1===n.enablePan)return;G(t),n.update();break;case a.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(t){n.enableZoom&&W(t),n.enablePan&&G(t)}(t),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(t){n.enableZoom&&W(t),n.enableRotate&&V(t)}(t),n.update();break;default:s=a.NONE}}(t):function(t){if(!1===n.enabled)return;switch(s){case a.ROTATE:if(!1===n.enableRotate)return;!function(t){f.set(t.clientX,t.clientY),m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const e=n.domElement;e&&(O(2*Math.PI*m.x/e.clientHeight),C(2*Math.PI*m.y/e.clientHeight)),p.copy(f),n.update()}(t);break;case a.DOLLY:if(!1===n.enableZoom)return;!function(t){x.set(t.clientX,t.clientY),_.subVectors(x,b),_.y>0?N(M()):_.y<0&&R(M()),b.copy(x),n.update()}(t);break;case a.PAN:if(!1===n.enablePan)return;!function(t){y.set(t.clientX,t.clientY),v.subVectors(y,g).multiplyScalar(n.panSpeed),I(v.x,v.y),g.copy(y),n.update()}(t)}}(t))}function X(t){var e,r,i;!function(t){delete A[t.pointerId];for(let e=0;e<E.length;e++)if(E[e].pointerId==t.pointerId)return void E.splice(e,1)}(t),0===E.length&&(null==(e=n.domElement)||e.releasePointerCapture(t.pointerId),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointermove",q),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointerup",X)),n.dispatchEvent(o),s=a.NONE}function Y(t){!1===n.enabled||!1===n.enableZoom||s!==a.NONE&&s!==a.ROTATE||(t.preventDefault(),n.dispatchEvent(i),function(t){D(t),t.deltaY<0?R(M()):t.deltaY>0&&N(M()),n.update()}(t),n.dispatchEvent(o))}function K(t){!1!==n.enabled&&!1!==n.enablePan&&function(t){let e=!1;switch(t.code){case n.keys.UP:I(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:I(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:I(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:I(-n.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),n.update())}(t)}function Z(t){!1!==n.enabled&&t.preventDefault()}function J(t){let e=A[t.pointerId];void 0===e&&(e=new Sf,A[t.pointerId]=e),e.set(t.pageX,t.pageY)}function $(t){const e=t.pointerId===E[0].pointerId?E[1]:E[0];return A[e.pointerId]}void 0!==e&&this.connect(e),this.update()}}const PO=k.forwardRef(((t,e)=>{let{makeDefault:n,camera:r,regress:i,domElement:o,enableDamping:a=!0,keyEvents:s=!1,onChange:c,onStart:l,onEnd:u,...h}=t;const d=OM((t=>t.invalidate)),p=OM((t=>t.camera)),f=OM((t=>t.gl)),m=OM((t=>t.events)),g=OM((t=>t.setEvents)),y=OM((t=>t.set)),v=OM((t=>t.get)),b=OM((t=>t.performance)),x=r||p,_=o||m.connected||f.domElement,w=k.useMemo((()=>new kO(x)),[x]);return CM((()=>{w.enabled&&w.update()}),-1),k.useEffect((()=>(s&&w.connect(!0===s?_:s),w.connect(_),()=>{w.dispose()})),[s,_,i,w,d]),k.useEffect((()=>{const t=t=>{d(),i&&b.regress(),c&&c(t)},e=t=>{l&&l(t)},n=t=>{u&&u(t)};return w.addEventListener("change",t),w.addEventListener("start",e),w.addEventListener("end",n),()=>{w.removeEventListener("start",e),w.removeEventListener("end",n),w.removeEventListener("change",t)}}),[c,l,u,w,d,g]),k.useEffect((()=>{if(n){const t=v().controls;return y({controls:w}),()=>y({controls:t})}}),[n,w]),k.createElement("primitive",bO({ref:e,object:w,enableDamping:a},h))}));function IO(t){let{all:e,scene:n,camera:r}=t;const i=OM((t=>{let{gl:e}=t;return e})),o=OM((t=>{let{camera:e}=t;return e})),a=OM((t=>{let{scene:e}=t;return e}));return k.useLayoutEffect((()=>{const t=[];e&&(n||a).traverse((e=>{!1===e.visible&&(t.push(e),e.visible=!0)})),i.compile(n||a,r||o);const s=new Cy(128);new My(.01,1e5,s).update(i,n||a),s.dispose(),t.forEach((t=>t.visible=!1))}),[]),null}let NO=0;const RO=CA((t=>(pT.onStart=(e,n,r)=>{t({active:!0,item:e,loaded:n,total:r,progress:(n-NO)/(r-NO)*100})},pT.onLoad=()=>{t({active:!1})},pT.onError=e=>t((t=>({errors:[...t.errors,e]}))),pT.onProgress=(e,n,r)=>{n===r&&(NO=r),t({active:!0,item:e,loaded:n,total:r,progress:(n-NO)/(r-NO)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})));const DO=new em,LO=new em,FO=new em,jO=new Sf;function UO(t,e,n){const r=DO.setFromMatrixPosition(t.matrixWorld);r.project(e);const i=n.width/2,o=n.height/2;return[r.x*i+i,-r.y*o+o]}const BO=t=>Math.abs(t)<1e-10?0:t;function zO(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="matrix3d(";for(let i=0;16!==i;i++)r+=BO(e[i]*t.elements[i])+(15!==i?",":")");return n+r}const VO=(GO=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],t=>zO(t,GO));var GO;const WO=(t,e)=>zO(t,(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1])(e),"translate(-50%,-50%)");const HO=k.forwardRef(((t,e)=>{let{children:n,eps:r=.001,style:i,className:o,prepend:a,center:s,fullscreen:c,portal:l,distanceFactor:u,sprite:h=!1,transform:d=!1,occlude:p,onOcclude:f,castShadow:m,receiveShadow:g,material:y,geometry:v,zIndexRange:b=[16777271,0],calculatePosition:x=UO,as:_="div",wrapperClass:w,pointerEvents:S="auto",...T}=t;const{gl:E,camera:A,scene:M,size:O,raycaster:C,events:P,viewport:N}=OM(),[R]=k.useState((()=>document.createElement(_))),D=k.useRef(),L=k.useRef(null),F=k.useRef(0),j=k.useRef([0,0]),U=k.useRef(null),B=k.useRef(null),z=(null==l?void 0:l.current)||P.connected||E.domElement.parentNode,V=k.useRef(null),G=k.useRef(!1),W=k.useMemo((()=>p&&"blending"!==p||Array.isArray(p)&&p.length&&function(t){return t&&"object"===typeof t&&"current"in t}(p[0])),[p]);k.useLayoutEffect((()=>{const t=E.domElement;p&&"blending"===p?(t.style.zIndex="".concat(Math.floor(b[0]/2)),t.style.position="absolute",t.style.pointerEvents="none"):(t.style.zIndex=null,t.style.position=null,t.style.pointerEvents=null)}),[p]),k.useLayoutEffect((()=>{if(L.current){const t=D.current=I.createRoot(R);if(M.updateMatrixWorld(),d)R.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const t=x(L.current,A,O);R.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(t[0],"px,").concat(t[1],"px,0);transform-origin:0 0;")}return z&&(a?z.prepend(R):z.appendChild(R)),()=>{z&&z.removeChild(R),t.unmount()}}}),[z,d]),k.useLayoutEffect((()=>{w&&(R.className=w)}),[w]);const H=k.useMemo((()=>d?{position:"absolute",top:0,left:0,width:O.width,height:O.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...c&&{top:-O.height/2,left:-O.width/2,width:O.width,height:O.height},...i}),[i,s,c,O,d]),q=k.useMemo((()=>({position:"absolute",pointerEvents:S})),[S]);k.useLayoutEffect((()=>{var t,r;(G.current=!1,d)?null==(t=D.current)||t.render(k.createElement("div",{ref:U,style:H},k.createElement("div",{ref:B,style:q},k.createElement("div",{ref:e,className:o,style:i,children:n})))):null==(r=D.current)||r.render(k.createElement("div",{ref:e,style:H,className:o,children:n}))}));const X=k.useRef(!0);CM((t=>{if(L.current){A.updateMatrixWorld(),L.current.updateWorldMatrix(!0,!1);const t=d?j.current:x(L.current,A,O);if(d||Math.abs(F.current-A.zoom)>r||Math.abs(j.current[0]-t[0])>r||Math.abs(j.current[1]-t[1])>r){const e=function(t,e){const n=DO.setFromMatrixPosition(t.matrixWorld),r=LO.setFromMatrixPosition(e.matrixWorld),i=n.sub(r),o=e.getWorldDirection(FO);return i.angleTo(o)>Math.PI/2}(L.current,A);let n=!1;W&&(Array.isArray(p)?n=p.map((t=>t.current)):"blending"!==p&&(n=[M]));const r=X.current;if(n){const t=function(t,e,n,r){const i=DO.setFromMatrixPosition(t.matrixWorld),o=i.clone();o.project(e),jO.set(o.x,o.y),n.setFromCamera(jO,e);const a=n.intersectObjects(r,!0);if(a.length){const t=a[0].distance;return i.distanceTo(n.ray.origin)<t}return!0}(L.current,A,C,n);X.current=t&&!e}else X.current=!e;r!==X.current&&(f?f(!X.current):R.style.display=X.current?"block":"none");const i=Math.floor(b[0]/2),o=p?W?[b[0],i]:[i-1,0]:b;if(R.style.zIndex="".concat(function(t,e,n){if(e instanceof Ey||e instanceof $y){const r=DO.setFromMatrixPosition(t.matrixWorld),i=LO.setFromMatrixPosition(e.matrixWorld),o=r.distanceTo(i),a=(n[1]-n[0])/(e.far-e.near),s=n[1]-a*e.far;return Math.round(a*o+s)}}(L.current,A,o)),d){const[t,e]=[O.width/2,O.height/2],n=A.projectionMatrix.elements[5]*e,{isOrthographicCamera:r,top:i,left:o,bottom:a,right:s}=A,c=VO(A.matrixWorldInverse),l=r?"scale(".concat(n,")translate(").concat(BO(-(s+o)/2),"px,").concat(BO((i+a)/2),"px)"):"translateZ(".concat(n,"px)");let d=L.current.matrixWorld;h&&(d=A.matrixWorldInverse.clone().transpose().copyPosition(d).scale(L.current.scale),d.elements[3]=d.elements[7]=d.elements[11]=0,d.elements[15]=1),R.style.width=O.width+"px",R.style.height=O.height+"px",R.style.perspective=r?"":"".concat(n,"px"),U.current&&B.current&&(U.current.style.transform="".concat(l).concat(c,"translate(").concat(t,"px,").concat(e,"px)"),B.current.style.transform=WO(d,1/((u||10)/400)))}else{const e=void 0===u?1:function(t,e){if(e instanceof $y)return e.zoom;if(e instanceof Ey){const n=DO.setFromMatrixPosition(t.matrixWorld),r=LO.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,o=n.distanceTo(r);return 1/(2*Math.tan(i/2)*o)}return 1}(L.current,A)*u;R.style.transform="translate3d(".concat(t[0],"px,").concat(t[1],"px,0) scale(").concat(e,")")}j.current=t,F.current=A.zoom}}if(!W&&V.current&&!G.current)if(d){if(U.current){const t=U.current.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){const{isOrthographicCamera:e}=A;if(e||v)T.scale&&(Array.isArray(T.scale)?T.scale instanceof em?V.current.scale.copy(T.scale.clone().divideScalar(1)):V.current.scale.set(1/T.scale[0],1/T.scale[1],1/T.scale[2]):V.current.scale.setScalar(1/T.scale));else{const e=(u||10)/400,n=t.clientWidth*e,r=t.clientHeight*e;V.current.scale.set(n,r,1)}G.current=!0}}}else{const e=R.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){const t=1/N.factor,n=e.clientWidth*t,r=e.clientHeight*t;V.current.scale.set(n,r,1),G.current=!0}V.current.lookAt(t.camera.position)}}));const Y=k.useMemo((()=>({vertexShader:d?void 0:'\n          /*\n            This shader is from the THREE\'s SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if "transfrom"\n            is false.\n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n\n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ',fragmentShader:"\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      "})),[d]);return k.createElement("group",bO({},T,{ref:L}),p&&!W&&k.createElement("mesh",{castShadow:m,receiveShadow:g,ref:V},v||k.createElement("planeGeometry",null),y||k.createElement("shaderMaterial",{side:Uu,vertexShader:Y.vertexShader,fragmentShader:Y.fragmentShader})))})),qO=()=>{const{progress:t}=RO();return(0,Ln.jsxs)(HO,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,Ln.jsx)("span",{className:"canvas-loader"}),(0,Ln.jsxs)("p",{style:{fontSize:14,color:"#F1F1F1",fontWeight:800,marginTop:40},children:[t.toFixed(2),"%"]})]})},XO=t=>{const[e]=yO([t.imgUrl]);return(0,Ln.jsxs)(vO,{speed:2.5,rotationIntensity:1,floatIntensity:2,children:[(0,Ln.jsx)("ambientLight",{intensity:.25}),(0,Ln.jsx)("directionalLight",{position:[0,0,.05]}),(0,Ln.jsxs)("mesh",{castShadow:!0,receiveShadow:!0,scale:2.75,children:[(0,Ln.jsx)("icosahedronGeometry",{args:[1,2]}),(0,Ln.jsx)("meshStandardMaterial",{color:"#3d3d3d",polygonOffset:!0,polygonOffsetFactor:-5,flatShading:!0}),(0,Ln.jsx)(SO,{position:[0,0,1],rotation:[2*Math.PI,0,6.25],flatShading:!0,map:e})]})]})},YO=t=>{let{icon:e}=t;return(0,Ln.jsxs)(mO,{frameloop:"always",gl:{preserveDrawingBuffer:!0},children:[(0,Ln.jsxs)(k.Suspense,{fallback:(0,Ln.jsx)(qO,{}),children:[(0,Ln.jsx)(PO,{enableZoom:!1,position0:0}),(0,Ln.jsx)(XO,{imgUrl:e})]}),(0,Ln.jsx)(IO,{all:!0})]})},KO=[{name:"python",icon:"/static/images/technos/python.png"},{name:"linux",icon:"/static/images/technos/linux.png"},{name:"git",icon:"/static/images/technos/git.png"},{name:"sql",icon:"/static/images/technos/sql.png"},{name:"aws",icon:"/static/images/technos/aws.png"},{name:"docker",icon:"/static/images/technos/docker.png"},{name:"scikitlearn",icon:"/static/images/technos/scikitlearn.png"},{name:"pytorch",icon:"/static/images/technos/pytorch.png"}],ZO=[{name:"cpp",icon:"/static/images/technos/cpp.png"},{name:"rust",icon:"/static/images/technos/rust.png"},{name:"html_css",icon:"/static/images/technos/html_css.png"},{name:"react",icon:"/static/images/technos/react.png"},{name:"reactnative",icon:"/static/images/technos/reactnative.png"},{name:"kotlin",icon:"/static/images/technos/kotlin.png"},{name:"onnx",icon:"/static/images/technos/onnx.png"},{name:"opencv",icon:"/static/images/technos/opencv.png"}],JO={hidden:{y:"100vh",opacity:0}},$O={hidden:{y:"-100vh",opacity:0}},QO={visible:{y:0,opacity:1,transition:{duration:1.5,ease:"easeInOut"}}},tC=t=>{let{text:e,onComplete:n}=t;return(0,Ln.jsx)("h2",{className:"card-title justify-center text-center",children:(0,Ln.jsx)(Kn,{sequence:[e,1e3,n],speed:85,style:{fontSize:"1.10em"},cursor:!1})})},eC=()=>(0,Ln.jsxs)("div",{className:"flex flex-wrap justify-center pb-5 gap-4",children:[(0,Ln.jsx)(nC,{href:"https://github.com/AlkaSaliss",icon:"mdi:github"}),(0,Ln.jsx)(nC,{href:"https://www.linkedin.com/in/alkai",icon:"mdi:linkedin"}),(0,Ln.jsx)(nC,{href:"https://stackoverflow.com/users/7437524/alka",icon:"devicon-plain:stackoverflow-wordmark"})]}),nC=t=>{let{href:e,icon:n}=t;return(0,Ln.jsx)("a",{href:e,rel:"noopener noreferrer",target:"_blank",children:(0,Ln.jsx)("div",{className:"grid w-16 h-16 md:w-24 md:h-24 card bg-base-300 rounded-box place-items-center",children:(0,Ln.jsx)(Dn,{icon:n,style:{fontSize:"2em",md:"fontSize: 3.5em"}})})})},rC=t=>{let{technologies:e,title:n,variants:r}=t;return(0,Ln.jsx)("div",{className:"w-full md:w-2/5 mt-8 md:mt-0 px-4",children:(0,Ln.jsxs)(Eu.div,{variants:{...r,...QO},initial:"hidden",animate:"visible",children:[(0,Ln.jsx)("div",{className:"card-title justify-center my-6 text-base text-center",children:n}),(0,Ln.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-4 gap-4 place-items-center",children:e.map(((t,e)=>(0,Ln.jsx)("div",{className:"w-16 h-16 md:w-28 md:h-28",children:(0,Ln.jsx)(YO,{icon:t.icon})},"".concat(t.name,"-").concat(e))))})]})})},iC=()=>{const[t,e]=(0,k.useState)(!1),[n,r]=(0,k.useState)(!1),[i,o]=(0,k.useState)(!1),[a,s]=(0,k.useState)(!1);return(0,k.useEffect)((()=>{const t=()=>{s(window.innerWidth<768)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),(0,Ln.jsxs)("div",{className:"homepage min-h-screen",children:[(0,Ln.jsx)("div",{className:"fixed inset-0 bg-cover bg-center opacity-25 z-[-1]",style:{backgroundImage:"url(/static/images/alka7.png)"}}),(0,Ln.jsxs)("div",{className:"flex flex-col md:flex-row justify-center items-center min-h-screen p-4",children:[i&&!a&&(0,Ln.jsx)(rC,{technologies:KO,title:"I work mainly with following Technos / Tools :",variants:JO}),(0,Ln.jsxs)("div",{className:"card w-full md:w-1/2 bg-base-100 shadow-xl opacity-75 mt-16 md:mt-0 mx-4 md:mx-20",children:[(0,Ln.jsxs)("div",{className:"card-body",children:[(0,Ln.jsx)(tC,{text:"Mahamadou ABOUBACAR",onComplete:()=>r(!0)}),n&&(0,Ln.jsx)(tC,{text:"Senior Freelance",onComplete:()=>e(!0)}),t&&(0,Ln.jsx)(tC,{text:"Data Engineering | Data Science",onComplete:()=>o(!0)})]}),(0,Ln.jsx)(eC,{})]}),i&&!a&&(0,Ln.jsx)(rC,{technologies:ZO,title:"I'm also interested a lot in on device machine learning, and that's why I've worked on some side projects to familiarize with high performance languages and web/mobile technologies:",variants:$O}),i&&a&&(0,Ln.jsxs)(Ln.Fragment,{children:[(0,Ln.jsx)(rC,{technologies:KO,title:"I work mainly with following Technos / Tools :",variants:JO}),(0,Ln.jsx)(rC,{technologies:ZO,title:"I'm also interested a lot in on device machine learning, and that's why I've worked on some side projects to familiarize with high performance languages and web/mobile technologies:",variants:$O})]})]})]})},oC=t=>(0,Ln.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[(0,Ln.jsx)("div",{className:"md:col-span-2 font-bold text-base md:text-lg mb-2 md:mb-0",children:t.blockName}),(0,Ln.jsx)("div",{className:"md:col-span-10",children:t.children})]}),aC=t=>(0,Ln.jsx)("div",{className:"skill mb-4",children:(0,Ln.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-12 gap-2 md:gap-4 items-center",children:[(0,Ln.jsx)("div",{className:"md:col-span-4 text-left md:text-right",children:(0,Ln.jsx)("span",{className:"text-sm md:text-base",children:t.skill})}),(0,Ln.jsx)("div",{className:"md:col-span-8 flex items-center",children:(0,Ln.jsx)("span",{className:"skill-label text-sm md:text-base",children:(t=>t>=75?"Expert":t>=50?"Advanced":t>=25?"Intermediate":"Beginner")(t.progress)})})]})}),sC=t=>(0,Ln.jsx)("div",{className:"education p-2 md:p-4",children:(0,Ln.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[(0,Ln.jsx)("div",{className:"md:col-span-4",children:(0,Ln.jsxs)("p",{className:"text-base md:text-lg",children:[t.startYear," - ",t.endYear]})}),(0,Ln.jsxs)("div",{className:"md:col-span-8",children:[(0,Ln.jsx)("h4",{className:"text-lg md:text-xl mt-0 underline italic",children:t.degree}),(0,Ln.jsxs)("p",{className:"text-sm md:text-base",children:[(0,Ln.jsx)("strong",{className:"underline",children:"School: "}),t.schoolName]}),(0,Ln.jsxs)("p",{className:"text-sm md:text-base",children:[(0,Ln.jsx)("strong",{className:"underline",children:"Major: "}),t.major]})]})]})}),cC=t=>(0,Ln.jsx)("div",{className:"experience mb-8",children:(0,Ln.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[(0,Ln.jsx)("div",{className:"md:col-span-4",children:(0,Ln.jsxs)("p",{className:"text-base md:text-lg",children:[t.startYear," - ",t.endYear]})}),(0,Ln.jsxs)("div",{className:"md:col-span-8",children:[(0,Ln.jsx)("h4",{className:"text-lg md:text-xl mt-0 underline italic",children:t.jobName}),(0,Ln.jsxs)("p",{className:"text-sm md:text-base",children:[(0,Ln.jsx)("strong",{className:"underline",children:"Company: "}),t.company," | ",(0,Ln.jsx)("strong",{className:"underline",children:"Team: "}),t.team]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("strong",{className:"underline",children:"Subject: "}),t.showSubjectList?(0,Ln.jsx)("ul",{className:"custom-list text-sm md:text-base",children:t.subject.map(((t,e)=>(0,Ln.jsx)("li",{children:t},e)))}):(0,Ln.jsx)("span",{className:"text-sm md:text-base",children:t.subject})]}),(0,Ln.jsxs)("p",{className:"text-sm md:text-base",children:[(0,Ln.jsx)("strong",{className:"underline",children:"Methods: "}),t.methods]}),(0,Ln.jsxs)("p",{className:"text-sm md:text-base",children:[(0,Ln.jsx)("strong",{className:"underline",children:"Tools: "}),t.tools]}),(0,Ln.jsx)("p",{className:"text-sm md:text-base",children:t.jobDescription})]})]})}),lC=t=>{let{navBarHeight:e}=t;return(0,Ln.jsxs)("div",{className:"flex flex-col md:flex-row min-h-screen",style:{paddingTop:e},children:[(0,Ln.jsx)("div",{className:"w-full md:w-2/5 bg-gray-800 p-4 md:overflow-y-auto",children:(0,Ln.jsxs)("div",{className:"flex flex-col items-center mt-5",children:[(0,Ln.jsx)("img",{alt:"Profile",src:"/static/images/alka3.jpg",className:"rounded-full w-32 h-32 md:w-52 md:h-52"}),(0,Ln.jsx)("h2",{className:"text-lg md:text-xl mt-2",children:"Mahamadou S. ABOUBACAR A."}),(0,Ln.jsx)("h4",{className:"text-lg md:text-xl",children:"Senior Consultant"}),(0,Ln.jsx)("h5",{className:"text-lg md:text-xl",children:"Data Science | Data Engineering"}),(0,Ln.jsx)("hr",{className:"border-t-2 border-slate-400 w-1/2 my-5"}),(0,Ln.jsx)("p",{className:"text-sm md:text-base mb-4",children:"Currently working as Freelance Data Engineer consultant"}),(0,Ln.jsxs)("p",{className:"text-sm md:text-base text-justify",children:["I've worked for ",(new Date).getFullYear()-2018,"+ years across various data science and data engineering roles. I started my career as a Research Engineer in machine learning for cyber security, then switched to computer vision applied to video surveillance images analysis.",(0,Ln.jsx)("br",{}),"I later joined Quantmetry (a cutting edge AI consulting company, later acquired by Capgemini) as a senior data scientist consultant and worked for various customers ranging from public, defense, transportation, energy sectors on various subjects such as tweets analysis app, web scraping app for supply chain, Reliable AI training content creation, building data processing pipelines for Renewable energy datalake ...",(0,Ln.jsx)("br",{}),"In my free time, I am mostly interested in subjects related to Computer Vision, NLP, on-device machine learning and data visualization. That's why I explore high performant languages (C/C++, Rust) and web/mobile development (React/react-native, Kotlin) You can find some of my side projects on this website and also",(0,Ln.jsxs)("a",{href:"https://github.com/AlkaSaliss?tab=repositories",rel:"noopener noreferrer",target:"_blank",className:"text-blue-500",children:[" ","on github."]})]})]})}),(0,Ln.jsx)("div",{className:"w-full md:w-3/5 p-4 md:overflow-y-auto flex-grow",children:(0,Ln.jsxs)("div",{className:"space-y-8",children:[(0,Ln.jsx)("h2",{className:"text-lg md:text-xl mb-4",children:"Experience"}),(0,Ln.jsx)(cC,{startYear:"July 2024",endYear:"Now",jobName:"Senior Freelance Data Engineer",company:"Customer in Energy Sector",team:"DataLab",showSubjectList:!1,subject:"I work as an admin/tech lead on an Analytics platform, based on AWS services. I create data ingestion pipelines to bring data from multiple sources (api, s3, databases, ...) on this platform for end users to conduct their use cases. I also lead training sessions to onboard new users on the platform. Finally, I serve as intermediary the product company and end users to report bugs, issues and feature requests.",methods:"Data Ingestion, ETL pipelines, Platform Engineering",tools:"Python, AWS S3/Athena/Redshift/Sagemaker/Glue/Quicksight, Pandas/Polars , Jupyter, Terraform/Terragrunt"}),(0,Ln.jsx)(cC,{startYear:"October 2021",endYear:"June 2024",jobName:"Senior Consultant Data Scientist | Data Engineer",company:"Quantmetry (acquired by Capgemini), Paris, France",team:"Computer Vision",showSubjectList:!0,subject:["Worked 2 years at EDF Renouvelables, as tech lead data engineer of a team that builds AWS data pipelines (Lambda/SQS, S3, Athena, Redshift, RDS, EventBridge, Grafana) to ingest and process data coming from solar power sites around the world. The curated data is then used by sites and assets managers to calculate some KPI to assess solar energy production performance","Built a Streamlit web app for a customer in Transport sector, to allow them to analyze multiple data sources and produce a formatted Excel report. The app cut the analysis time from 1-2 weeks to less than 10mins, allow users to focus on analysis interpretation and ","Worked with various customer on different subjects, such as POC on uncertainty estimation for satellite images segmentation, tweets scrapping and analysis (topic modelling, sentiment analysis), web scraping for supply chain, training content creation on reliable AI topics, ..."],methods:"Data ingestion | Data processing | Machine learning | Deep learning | Data analysis/visualization | Software engineering",tools:"Python | AWS | Pytorch | Scikit-learn | Docker | Linux | Spark"}),(0,Ln.jsx)(cC,{startYear:"Nov 2018",endYear:"Oct 2021",jobName:"Research Engineer - Machine Learning",company:"Atos, Paris region, France",team:"Machine Intelligence for Cyber Security",showSubjectList:!0,subject:["Developed computer vision segmentation models for video surveillance analysis","Worked on machine learning based frameworks for anomaly detection in cyber security"],methods:"Machine learning | Deep learning | Data analysis/visualization | Software engineering",tools:"Python | Pytorch | Tensorflow/Keras | Scikit-learn | Docker | Linux | Spark"}),(0,Ln.jsx)(cC,{startYear:"Apr 2018",endYear:"Sep 2018",jobName:"Deep learning intern",company:"Equancy, Paris, France",team:"Data Intelligence",showSubjectList:!1,subject:"Deep learning based approaches for 'translating natural language questions to SQL queries'",methods:"Sequence-to-sequence Deep Learning models",tools:"Python | Tensorflow/Keras | Spacy | Scikit-learn | AWS"}),(0,Ln.jsx)(cC,{startYear:"June 2017",endYear:"Aug 2017",jobName:"Statistician intern",company:"Le Cr\xe9dit Lyonnais (LCL), Paris region, France",team:"Quantitative Models Validation",showSubjectList:!1,subject:"Anomaly analysis on credit risk data",methods:"Regression models | Exploratory data analysis",tools:"SAS"}),(0,Ln.jsx)(cC,{startYear:"Feb 2016",endYear:"June 2016",jobName:"Statistician/Economist intern",company:"Laboratoire de Recherches Economiques et Mon\xe9taires (LAREM), Dakar, S\xe9n\xe9gal",team:"LAREM",showSubjectList:!1,subject:"Determinant of innovation in small & medium enterprises in Ivory-Coast",methods:"Multivariate Probit models | Exploratory data analysis",tools:"R | Stata"}),(0,Ln.jsx)("hr",{className:"border-t-2 border-blue-500 my-4"}),(0,Ln.jsx)("h2",{className:"text-lg md:text-xl mb-4",children:"Education"}),(0,Ln.jsx)(sC,{startYear:2020,endYear:2020,degree:"Data Engineering Nanodegree",schoolName:"UDACITY -Online",major:"ETL pipelines with PostgreSQL | ETL with AWS RedShift/S3 | Big Data with Pyspark and AWS EMR | Data pipelines with Airflow"}),(0,Ln.jsx)(sC,{startYear:2016,endYear:2018,degree:"Engineering degree in Data Science / Statistics / Data Engineering",schoolName:"ENSAI - Rennes, France",major:"Machine Learning Modeling | Statistics/Econometrics | Big Data technologies | Software & Web Development"}),(0,Ln.jsx)(sC,{startYear:2012,endYear:2016,degree:"Engineering degree in Statistics / Economics",schoolName:"ENSAE - Dakar, Senegal",major:"Statistical modelling | Econometrics | Survey Data collection and analysis | Economics"}),(0,Ln.jsx)("hr",{className:"border-t-2 border-blue-500 my-4"}),(0,Ln.jsx)("h2",{className:"text-lg md:text-xl mb-4",children:"Skills"}),(0,Ln.jsxs)(oC,{blockName:"Data Engineering",children:[(0,Ln.jsx)(aC,{skill:"Data ingestion pipelines on AWS (Lambda, SQS, SNS, S3, Glue, SageMaker)",progress:74}),(0,Ln.jsx)(aC,{skill:"Data warehouse (Redshift, RDS)",progress:74}),(0,Ln.jsx)(aC,{skill:"Data processing (Pandas, Polars, PySpark)",progress:90}),(0,Ln.jsx)(aC,{skill:"Monitoring/Alerting (CloudWatch metrics, and alarms, SNS, Grafana)",progress:74}),(0,Ln.jsx)(aC,{skill:"CI/CD (Codecommit, Codebuild, CodePipeline, Codeartifact)",progress:74})]}),(0,Ln.jsx)("hr",{className:"border-t border-gray-300 my-4 mx-20"}),(0,Ln.jsxs)(oC,{blockName:"Data Science",children:[(0,Ln.jsx)(aC,{skill:"Linear models | Tree-based models | Clustering techniques (Scikit-learn)",progress:90}),(0,Ln.jsx)(aC,{skill:"Deep Learning (Pytorch, Tensorflow/Keras)",progress:90}),(0,Ln.jsx)(aC,{skill:"Data Analysis (Pandas, Numpy, Jupyter)",progress:90}),(0,Ln.jsx)(aC,{skill:"Data Viz (d3.js, Matplotlib, Bokeh, Plotly)",progress:80})]}),(0,Ln.jsx)("hr",{className:"border-t border-gray-300 my-4 mx-20"}),(0,Ln.jsxs)(oC,{blockName:"Software | Web | Mobile Dev",children:[(0,Ln.jsx)(aC,{skill:"Python",progress:95}),(0,Ln.jsx)(aC,{skill:"Linux | Bash | Docker",progress:70}),(0,Ln.jsx)(aC,{skill:"Git",progress:80}),(0,Ln.jsx)(aC,{skill:"Javascript | React | React-Native",progress:49}),(0,Ln.jsx)(aC,{skill:"C++ | Rust",progress:49}),(0,Ln.jsx)(aC,{skill:"Kotlin | Android studio",progress:49}),(0,Ln.jsx)(aC,{skill:"HTML | CSS",progress:49})]})]})})]})};function uC(t,e){let n,r;if(void 0===e)for(const i of t)null!=i&&(void 0===n?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}function hC(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function dC(){}function pC(t){return null==t?dC:function(){return this.querySelector(t)}}function fC(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function mC(){return[]}function gC(t){return null==t?mC:function(){return this.querySelectorAll(t)}}function yC(t){return function(){return this.matches(t)}}function vC(t){return function(e){return e.matches(t)}}var bC=Array.prototype.find;function xC(){return this.firstElementChild}var _C=Array.prototype.filter;function wC(){return Array.from(this.children)}function SC(t){return new Array(t.length)}function TC(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function EC(t,e,n,r,i,o){for(var a,s=0,c=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new TC(t,o[s]);for(;s<c;++s)(a=e[s])&&(i[s]=a)}function AC(t,e,n,r,i,o,a){var s,c,l,u=new Map,h=e.length,d=o.length,p=new Array(h);for(s=0;s<h;++s)(c=e[s])&&(p[s]=l=a.call(c,c.__data__,s,e)+"",u.has(l)?i[s]=c:u.set(l,c));for(s=0;s<d;++s)l=a.call(t,o[s],s,o)+"",(c=u.get(l))?(r[s]=c,c.__data__=o[s],u.delete(l)):n[s]=new TC(t,o[s]);for(s=0;s<h;++s)(c=e[s])&&u.get(p[s])===c&&(i[s]=c)}function MC(t){return t.__data__}function OC(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function CC(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}TC.prototype={constructor:TC,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var kC="http://www.w3.org/1999/xhtml";const PC={svg:"http://www.w3.org/2000/svg",xhtml:kC,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function IC(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),PC.hasOwnProperty(e)?{space:PC[e],local:t}:t}function NC(t){return function(){this.removeAttribute(t)}}function RC(t){return function(){this.removeAttributeNS(t.space,t.local)}}function DC(t,e){return function(){this.setAttribute(t,e)}}function LC(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function FC(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function jC(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function UC(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function BC(t){return function(){this.style.removeProperty(t)}}function zC(t,e,n){return function(){this.style.setProperty(t,e,n)}}function VC(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function GC(t,e){return t.style.getPropertyValue(e)||UC(t).getComputedStyle(t,null).getPropertyValue(e)}function WC(t){return function(){delete this[t]}}function HC(t,e){return function(){this[t]=e}}function qC(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function XC(t){return t.trim().split(/^|\s+/)}function YC(t){return t.classList||new KC(t)}function KC(t){this._node=t,this._names=XC(t.getAttribute("class")||"")}function ZC(t,e){for(var n=YC(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function JC(t,e){for(var n=YC(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function $C(t){return function(){ZC(this,t)}}function QC(t){return function(){JC(this,t)}}function tk(t,e){return function(){(e.apply(this,arguments)?ZC:JC)(this,t)}}function ek(){this.textContent=""}function nk(t){return function(){this.textContent=t}}function rk(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ik(){this.innerHTML=""}function ok(t){return function(){this.innerHTML=t}}function ak(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function sk(){this.nextSibling&&this.parentNode.appendChild(this)}function ck(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lk(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===kC&&e.documentElement.namespaceURI===kC?e.createElement(t):e.createElementNS(n,t)}}function uk(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function hk(t){var e=IC(t);return(e.local?uk:lk)(e)}function dk(){return null}function pk(){var t=this.parentNode;t&&t.removeChild(this)}function fk(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function mk(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function gk(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function yk(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function vk(t,e,n){var r=UC(t),i=r.CustomEvent;"function"===typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function bk(t,e){return function(){return vk(this,t,e)}}function xk(t,e){return function(){return vk(this,t,e.apply(this,arguments))}}KC.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var _k=[null];function wk(t,e){this._groups=t,this._parents=e}function Sk(){return new wk([[document.documentElement]],_k)}wk.prototype=Sk.prototype={constructor:wk,select:function(t){"function"!==typeof t&&(t=pC(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],c=s.length,l=r[i]=new Array(c),u=0;u<c;++u)(o=s[u])&&(a=t.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),l[u]=a);return new wk(r,this._parents)},selectAll:function(t){t="function"===typeof t?function(t){return function(){return fC(t.apply(this,arguments))}}(t):gC(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],c=s.length,l=0;l<c;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),i.push(a));return new wk(r,i)},selectChild:function(t){return this.select(null==t?xC:function(t){return function(){return bC.call(this.children,t)}}("function"===typeof t?t:vC(t)))},selectChildren:function(t){return this.selectAll(null==t?wC:function(t){return function(){return _C.call(this.children,t)}}("function"===typeof t?t:vC(t)))},filter:function(t){"function"!==typeof t&&(t=yC(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,c=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&c.push(o);return new wk(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,MC);var n,r=e?AC:EC,i=this._parents,o=this._groups;"function"!==typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),c=new Array(a),l=new Array(a),u=0;u<a;++u){var h=i[u],d=o[u],p=d.length,f=OC(t.call(h,h&&h.__data__,u,i)),m=f.length,g=c[u]=new Array(m),y=s[u]=new Array(m);r(h,d,g,y,l[u]=new Array(p),f,e);for(var v,b,x=0,_=0;x<m;++x)if(v=g[x]){for(x>=_&&(_=x+1);!(b=y[_])&&++_<m;);v._next=b||null}}return(s=new wk(s,i))._enter=c,s._exit=l,s},enter:function(){return new wk(this._enter||this._groups.map(SC),this._parents)},exit:function(){return new wk(this._exit||this._groups.map(SC),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"===typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),c=0;c<a;++c)for(var l,u=n[c],h=r[c],d=u.length,p=s[c]=new Array(d),f=0;f<d;++f)(l=u[f]||h[f])&&(p[f]=l);for(;c<i;++c)s[c]=n[c];return new wk(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=CC);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],c=s.length,l=i[o]=new Array(c),u=0;u<c;++u)(a=s[u])&&(l[u]=a);l.sort(e)}return new wk(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=IC(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?RC:NC:"function"===typeof e?n.local?jC:FC:n.local?LC:DC)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?BC:"function"===typeof e?VC:zC)(t,e,null==n?"":n)):GC(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?WC:"function"===typeof e?qC:HC)(t,e)):this.node()[t]},classed:function(t,e){var n=XC(t+"");if(arguments.length<2){for(var r=YC(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof e?tk:e?$C:QC)(n,e))},text:function(t){return arguments.length?this.each(null==t?ek:("function"===typeof t?rk:nk)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ik:("function"===typeof t?ak:ok)(t)):this.node().innerHTML},raise:function(){return this.each(sk)},lower:function(){return this.each(ck)},append:function(t){var e="function"===typeof t?t:hk(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"===typeof t?t:hk(t),r=null==e?dk:"function"===typeof e?e:pC(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(pk)},clone:function(t){return this.select(t?mk:fk)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?yk:gk,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var c,l=0,u=s.length;l<u;++l)for(r=0,c=s[l];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"===typeof e?xk:bk)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};const Tk=Sk;var Ek={value:()=>{}};function Ak(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Mk(r)}function Mk(t){this._=t}function Ok(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Ck(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ek,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Mk.prototype=Ak.prototype={constructor:Mk,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=Ck(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Ck(i[n],t.name,null);return this}for(;++a<s;)if((n=(t=o[a]).type)&&(n=Ok(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Mk(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const kk=Ak;var Pk,Ik,Nk=0,Rk=0,Dk=0,Lk=1e3,Fk=0,jk=0,Uk=0,Bk="object"===typeof performance&&performance.now?performance:Date,zk="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Vk(){return jk||(zk(Gk),jk=Bk.now()+Uk)}function Gk(){jk=0}function Wk(){this._call=this._time=this._next=null}function Hk(t,e,n){var r=new Wk;return r.restart(t,e,n),r}function qk(){jk=(Fk=Bk.now())+Uk,Nk=Rk=0;try{!function(){Vk(),++Nk;for(var t,e=Pk;e;)(t=jk-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Nk}()}finally{Nk=0,function(){var t,e,n=Pk,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Pk=e);Ik=t,Yk(r)}(),jk=0}}function Xk(){var t=Bk.now(),e=t-Fk;e>Lk&&(Uk-=e,Fk=t)}function Yk(t){Nk||(Rk&&(Rk=clearTimeout(Rk)),t-jk>24?(t<1/0&&(Rk=setTimeout(qk,t-Bk.now()-Uk)),Dk&&(Dk=clearInterval(Dk))):(Dk||(Fk=Bk.now(),Dk=setInterval(Xk,Lk)),Nk=1,zk(qk)))}function Kk(t,e,n){var r=new Wk;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}Wk.prototype=Hk.prototype={constructor:Wk,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?Vk():+n)+(null==e?0:+e),this._next||Ik===this||(Ik?Ik._next=this:Pk=this,Ik=this),this._call=t,this._time=n,Yk()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yk())}};var Zk=kk("start","end","cancel","interrupt"),Jk=[],$k=0,Qk=1,tP=2,eP=3,nP=4,rP=5,iP=6;function oP(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(t){n.state=Qk,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var l,u,h,d;if(n.state!==Qk)return c();for(l in i)if((d=i[l]).name===n.name){if(d.state===eP)return Kk(a);d.state===nP?(d.state=iP,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[l]):+l<e&&(d.state=iP,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[l])}if(Kk((function(){n.state===eP&&(n.state=nP,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=tP,n.on.call("start",t,t.__data__,n.index,n.group),n.state===tP){for(n.state=eP,r=new Array(h=n.tween.length),l=0,u=-1;l<h;++l)(d=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=d);r.length=u+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(c),n.state=rP,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);n.state===rP&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){for(var r in n.state=iP,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Hk(o,0,n.time)}(t,n,{name:e,index:r,group:i,on:Zk,tween:Jk,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:$k})}function aP(t,e){var n=cP(t,e);if(n.state>$k)throw new Error("too late; already scheduled");return n}function sP(t,e){var n=cP(t,e);if(n.state>eP)throw new Error("too late; already running");return n}function cP(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function lP(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>tP&&n.state<rP,n.state=iP,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}function uP(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var hP,dP=180/Math.PI,pP={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fP(t,e,n,r,i,o){var a,s,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*dP,skewX:Math.atan(c)*dP,scaleX:a,scaleY:s}}function mP(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],c=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var c=a.push("translate(",null,e,null,n);s.push({i:c-4,x:uP(t,i)},{i:c-2,x:uP(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,c),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:uP(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,c),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:uP(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,c),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:uP(t,n)},{i:s-2,x:uP(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,c),o=a=null,function(t){for(var e,n=-1,r=c.length;++n<r;)s[(e=c[n]).i]=e.x(t);return s.join("")}}}var gP=mP((function(t){const e=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?pP:fP(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),yP=mP((function(t){return null==t?pP:(hP||(hP=document.createElementNS("http://www.w3.org/2000/svg","g")),hP.setAttribute("transform",t),(t=hP.transform.baseVal.consolidate())?fP((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):pP)}),", ",")",")");function vP(t,e){var n,r;return function(){var i=sP(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function bP(t,e,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=sP(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=s;break}c===l&&i.push(s)}o.tween=i}}function xP(t,e,n){var r=t._id;return t.each((function(){var t=sP(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return cP(t,r).value[e]}}function _P(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function wP(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function SP(){}var TP=.7,EP=1/TP,AP="\\s*([+-]?\\d+)\\s*",MP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",OP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",CP=/^#([0-9a-f]{3,8})$/,kP=new RegExp("^rgb\\(".concat(AP,",").concat(AP,",").concat(AP,"\\)$")),PP=new RegExp("^rgb\\(".concat(OP,",").concat(OP,",").concat(OP,"\\)$")),IP=new RegExp("^rgba\\(".concat(AP,",").concat(AP,",").concat(AP,",").concat(MP,"\\)$")),NP=new RegExp("^rgba\\(".concat(OP,",").concat(OP,",").concat(OP,",").concat(MP,"\\)$")),RP=new RegExp("^hsl\\(".concat(MP,",").concat(OP,",").concat(OP,"\\)$")),DP=new RegExp("^hsla\\(".concat(MP,",").concat(OP,",").concat(OP,",").concat(MP,"\\)$")),LP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function FP(){return this.rgb().formatHex()}function jP(){return this.rgb().formatRgb()}function UP(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=CP.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?BP(e):3===n?new GP(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?zP(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?zP(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=kP.exec(t))?new GP(e[1],e[2],e[3],1):(e=PP.exec(t))?new GP(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=IP.exec(t))?zP(e[1],e[2],e[3],e[4]):(e=NP.exec(t))?zP(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=RP.exec(t))?KP(e[1],e[2]/100,e[3]/100,1):(e=DP.exec(t))?KP(e[1],e[2]/100,e[3]/100,e[4]):LP.hasOwnProperty(t)?BP(LP[t]):"transparent"===t?new GP(NaN,NaN,NaN,0):null}function BP(t){return new GP(t>>16&255,t>>8&255,255&t,1)}function zP(t,e,n,r){return r<=0&&(t=e=n=NaN),new GP(t,e,n,r)}function VP(t,e,n,r){return 1===arguments.length?((i=t)instanceof SP||(i=UP(i)),i?new GP((i=i.rgb()).r,i.g,i.b,i.opacity):new GP):new GP(t,e,n,null==r?1:r);var i}function GP(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function WP(){return"#".concat(YP(this.r)).concat(YP(this.g)).concat(YP(this.b))}function HP(){const t=qP(this.opacity);return"".concat(1===t?"rgb(":"rgba(").concat(XP(this.r),", ").concat(XP(this.g),", ").concat(XP(this.b)).concat(1===t?")":", ".concat(t,")"))}function qP(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function XP(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function YP(t){return((t=XP(t))<16?"0":"")+t.toString(16)}function KP(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new JP(t,e,n,r)}function ZP(t){if(t instanceof JP)return new JP(t.h,t.s,t.l,t.opacity);if(t instanceof SP||(t=UP(t)),!t)return new JP;if(t instanceof JP)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new JP(a,s,c,t.opacity)}function JP(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function $P(t){return(t=(t||0)%360)<0?t+360:t}function QP(t){return Math.max(0,Math.min(1,t||0))}function tI(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function eI(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}_P(SP,UP,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:FP,formatHex:FP,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return ZP(this).formatHsl()},formatRgb:jP,toString:jP}),_P(GP,VP,wP(SP,{brighter(t){return t=null==t?EP:Math.pow(EP,t),new GP(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?TP:Math.pow(TP,t),new GP(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new GP(XP(this.r),XP(this.g),XP(this.b),qP(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:WP,formatHex:WP,formatHex8:function(){return"#".concat(YP(this.r)).concat(YP(this.g)).concat(YP(this.b)).concat(YP(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:HP,toString:HP})),_P(JP,(function(t,e,n,r){return 1===arguments.length?ZP(t):new JP(t,e,n,null==r?1:r)}),wP(SP,{brighter(t){return t=null==t?EP:Math.pow(EP,t),new JP(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?TP:Math.pow(TP,t),new JP(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new GP(tI(t>=240?t-240:t+120,i,r),tI(t,i,r),tI(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new JP($P(this.h),QP(this.s),QP(this.l),qP(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=qP(this.opacity);return"".concat(1===t?"hsl(":"hsla(").concat($P(this.h),", ").concat(100*QP(this.s),"%, ").concat(100*QP(this.l),"%").concat(1===t?")":", ".concat(t,")"))}}));const nI=t=>()=>t;function rI(t,e){return function(n){return t+n*e}}function iI(t){return 1===(t=+t)?oI:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):nI(isNaN(e)?n:e)}}function oI(t,e){var n=e-t;return n?rI(t,n):nI(isNaN(t)?e:t)}const aI=function t(e){var n=iI(e);function r(t,e){var r=n((t=VP(t)).r,(e=VP(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=oI(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function sI(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=VP(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}sI((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return eI((n-r/e)*e,a,i,o,s)}})),sI((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return eI((n-r/e)*e,i,o,a,s)}}));var cI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lI=new RegExp(cI.source,"g");function uI(t,e){var n,r,i,o=cI.lastIndex=lI.lastIndex=0,a=-1,s=[],c=[];for(t+="",e+="";(n=cI.exec(t))&&(r=lI.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,c.push({i:a,x:uP(n,r)})),o=lI.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,r=0;r<e;++r)s[(n=c[r]).i]=n.x(t);return s.join("")})}function hI(t,e){var n;return("number"===typeof e?uP:e instanceof UP?aI:(n=UP(e))?(e=n,aI):uI)(t,e)}function dI(t){return function(){this.removeAttribute(t)}}function pI(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fI(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function mI(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function gI(t,e,n){var r,i,o;return function(){var a,s,c=n(this);if(null!=c)return(a=this.getAttribute(t))===(s=c+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,c));this.removeAttribute(t)}}function yI(t,e,n){var r,i,o;return function(){var a,s,c=n(this);if(null!=c)return(a=this.getAttributeNS(t.space,t.local))===(s=c+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,c));this.removeAttributeNS(t.space,t.local)}}function vI(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function bI(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function xI(t,e){return function(){aP(this,t).delay=+e.apply(this,arguments)}}function _I(t,e){return e=+e,function(){aP(this,t).delay=e}}function wI(t,e){return function(){sP(this,t).duration=+e.apply(this,arguments)}}function SI(t,e){return e=+e,function(){sP(this,t).duration=e}}var TI=Tk.prototype.constructor;function EI(t){return function(){this.style.removeProperty(t)}}var AI=0;function MI(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function OI(){return++AI}var CI=Tk.prototype;MI.prototype=function(t){return Tk().transition(t)}.prototype={constructor:MI,select:function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=pC(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,c,l=r[a],u=l.length,h=o[a]=new Array(u),d=0;d<u;++d)(s=l[d])&&(c=t.call(s,s.__data__,d,l))&&("__data__"in s&&(c.__data__=s.__data__),h[d]=c,oP(h[d],e,n,d,h,cP(s,n)));return new MI(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=gC(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c,l=r[s],u=l.length,h=0;h<u;++h)if(c=l[h]){for(var d,p=t.call(c,c.__data__,h,l),f=cP(c,n),m=0,g=p.length;m<g;++m)(d=p[m])&&oP(d,e,n,m,p,f);o.push(p),a.push(c)}return new MI(o,a,e,n)},selectChild:CI.selectChild,selectChildren:CI.selectChildren,filter:function(t){"function"!==typeof t&&(t=yC(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,c=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&c.push(o);return new MI(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c,l=e[s],u=n[s],h=l.length,d=a[s]=new Array(h),p=0;p<h;++p)(c=l[p]||u[p])&&(d[p]=c);for(;s<r;++s)a[s]=e[s];return new MI(a,this._parents,this._name,this._id)},selection:function(){return new TI(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=OI(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],c=s.length,l=0;l<c;++l)if(a=s[l]){var u=cP(a,e);oP(a,t,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new MI(r,this._parents,t,n)},call:CI.call,nodes:CI.nodes,node:CI.node,size:CI.size,empty:CI.empty,each:CI.each,on:function(t,e){var n=this._id;return arguments.length<2?cP(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?aP:sP;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=IC(t),r="transform"===n?yP:hI;return this.attrTween(t,"function"===typeof e?(n.local?yI:gI)(n,r,xP(this,"attr."+t,e)):null==e?(n.local?pI:dI)(n):(n.local?mI:fI)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!==typeof e)throw new Error;var r=IC(t);return this.tween(n,(r.local?vI:bI)(r,e))},style:function(t,e,n){var r="transform"===(t+="")?gP:hI;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=GC(this,t),a=(this.style.removeProperty(t),GC(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,EI(t)):"function"===typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=GC(this,t),s=n(this),c=s+"";return null==s&&(this.style.removeProperty(t),c=s=GC(this,t)),a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s))}}(t,r,xP(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var c=sP(this,t),l=c.on,u=null==c.value[a]?o||(o=EI(e)):void 0;l===n&&i===u||(r=(n=l).copy()).on(s,i=u),c.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=GC(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!==typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"===typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(xP(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!==typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=cP(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?vP:bP)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?xI:_I)(e,t)):cP(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?wI:SI)(e,t)):cP(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!==typeof e)throw new Error;return function(){sP(this,t).ease=e}}(e,t)):cP(this.node(),e).ease},easeVarying:function(t){if("function"!==typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!==typeof n)throw new Error;sP(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},c={value:function(){0===--i&&o()}};n.each((function(){var n=sP(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),n.on=e})),0===i&&o()}))},[Symbol.iterator]:CI[Symbol.iterator]};var kI={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function PI(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error("transition ".concat(e," not found"));return n}Tk.prototype.interrupt=function(t){return this.each((function(){lP(this,t)}))},Tk.prototype.transition=function(t){var e,n;t instanceof MI?(e=t._id,t=t._name):(e=OI(),(n=kI).time=Vk(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],c=s.length,l=0;l<c;++l)(a=s[l])&&oP(a,t,e,l,s,n||PI(a,e));return new MI(r,this._parents,t,e)};const{abs:II,max:NI,min:RI}=Math;function DI(t){return[+t[0],+t[1]]}function LI(t){return[DI(t[0]),DI(t[1])]}["w","e"].map(FI),["n","s"].map(FI),["n","w","e","s","nw","ne","sw","se"].map(FI);function FI(t){return{type:t}}var jI={},UI={};function BI(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function zI(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function VI(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function GI(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+VI(-e,6):e>9999?"+"+VI(e,6):VI(e,4))+"-"+VI(t.getUTCMonth()+1,2)+"-"+VI(t.getUTCDate(),2)+(o?"T"+VI(n,2)+":"+VI(r,2)+":"+VI(i,2)+"."+VI(o,3)+"Z":i?"T"+VI(n,2)+":"+VI(r,2)+":"+VI(i,2)+"Z":r||n?"T"+VI(n,2)+":"+VI(r,2)+"Z":"")}function WI(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,c=o<=0,l=!1;function u(){if(c)return UI;if(l)return l=!1,jI;var e,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=o?c=!0:10===(r=t.charCodeAt(a++))?l=!0:13===r&&(l=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(e=a++)))l=!0;else if(13===r)l=!0,10===t.charCodeAt(a)&&++a;else if(r!==n)continue;return t.slice(i,e)}return c=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=u())!==UI;){for(var h=[];r!==jI&&r!==UI;)h.push(r),r=u();e&&null==(h=e(h,s++))||i.push(h)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?GI(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=BI(t);return function(r,i){return e(n(r),i,t)}}(t,e):BI(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=zI(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=zI(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}var HI=WI(","),qI=HI.parse,XI=(HI.parseRows,HI.format,HI.formatBody,HI.formatRows,HI.formatRow,HI.formatValue,WI("\t")),YI=XI.parse;XI.parseRows,XI.format,XI.formatBody,XI.formatRows,XI.formatRow,XI.formatValue;function KI(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function ZI(t){return function(e,n,r){return 2===arguments.length&&"function"===typeof n&&(r=n,n=void 0),function(t,e){return fetch(t,e).then(KI)}(e,n).then((function(e){return t(e,r)}))}}var JI=ZI(qI);ZI(YI);function $I(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function QI(t,e){switch(arguments.length){case 0:break;case 1:"function"===typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"===typeof e?this.interpolator(e):this.range(e)}return this}class tN extends Map{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iN;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(eN(this,t))}has(t){return super.has(eN(this,t))}set(t,e){return super.set(nN(this,t),e)}delete(t){return super.delete(rN(this,t))}}Set;function eN(t,e){let{_intern:n,_key:r}=t;const i=r(e);return n.has(i)?n.get(i):e}function nN(t,e){let{_intern:n,_key:r}=t;const i=r(e);return n.has(i)?n.get(i):(n.set(i,e),e)}function rN(t,e){let{_intern:n,_key:r}=t;const i=r(e);return n.has(i)&&(e=n.get(i),n.delete(i)),e}function iN(t){return null!==t&&"object"===typeof t?t.valueOf():t}const oN=Symbol("implicit");function aN(){var t=new tN,e=[],n=[],r=oN;function i(i){let o=t.get(i);if(void 0===o){if(r!==oN)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new tN;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return aN(e,n).unknown(r)},$I.apply(i,arguments),i}function sN(){var t,e,n=aN().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,c=0,l=0,u=.5;function h(){var n=r().length,h=a<o,d=h?a:o,p=h?o:a;t=(p-d)/Math.max(1,n-c+2*l),s&&(t=Math.floor(t)),d+=(p-d-t*(n-c))*u,e=t*(1-c),s&&(d=Math.round(d),e=Math.round(e));var f=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}(n).map((function(e){return d+t*e}));return i(h?f.reverse():f)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),h()):r()},n.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,h()):[o,a]},n.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,s=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,h()):s},n.padding=function(t){return arguments.length?(c=Math.min(1,l=+t),h()):c},n.paddingInner=function(t){return arguments.length?(c=Math.min(1,t),h()):c},n.paddingOuter=function(t){return arguments.length?(l=+t,h()):l},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u},n.copy=function(){return sN(r(),[o,a]).round(s).paddingInner(c).paddingOuter(l).align(u)},$I.apply(h(),arguments)}function cN(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return cN(e())},t}function lN(){return cN(sN.apply(null,arguments).paddingInner(1))}const uN=Math.sqrt(50),hN=Math.sqrt(10),dN=Math.sqrt(2);function pN(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=uN?10:o>=hN?5:o>=dN?2:1;let s,c,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(t*l),c=Math.round(e*l),s/l<t&&++s,c/l>e&&--c,l=-l):(l=Math.pow(10,i)*a,s=Math.round(t/l),c=Math.round(e/l),s*l<t&&++s,c*l>e&&--c),c<s&&.5<=n&&n<2?pN(t,e,2*n):[s,c,l]}function fN(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const r=e<t,[i,o,a]=r?pN(e,t,n):pN(t,e,n);if(!(o>=i))return[];const s=o-i+1,c=new Array(s);if(r)if(a<0)for(let l=0;l<s;++l)c[l]=(o-l)/-a;else for(let l=0;l<s;++l)c[l]=(o-l)*a;else if(a<0)for(let l=0;l<s;++l)c[l]=(i+l)/-a;else for(let l=0;l<s;++l)c[l]=(i+l)*a;return c}function mN(t,e,n){return pN(t=+t,e=+e,n=+n)[2]}function gN(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?mN(e,t,n):mN(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function yN(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function vN(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bN(t){let e,n,r;function i(t,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=yN,n=(e,n)=>yN(t(e),n),r=(e,n)=>t(e)-n):(e=t===yN||t===vN?t:xN,n=t,r=t),{left:i,center:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=i(t,e,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length)-1);return o>n&&r(t[o-1],e)>-r(t[o],e)?o-1:o},right:function(t,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function xN(){return 0}function _N(t){return null===t?NaN:+t}const wN=bN(yN),SN=wN.right,TN=(wN.left,bN(_N).center,SN);function EN(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=CN(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function AN(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function MN(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=CN(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}function ON(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function CN(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?nI(e):("number"===i?uP:"string"===i?(n=UP(e))?(e=n,aI):uI:e instanceof UP?aI:e instanceof Date?AN:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?EN:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?MN:uP:ON))(t,e)}function kN(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function PN(t){return+t}var IN=[0,1];function NN(t){return t}function RN(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function DN(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=RN(i,r),o=n(a,o)):(r=RN(r,i),o=n(o,a)),function(t){return o(r(t))}}function LN(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=RN(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=TN(t,e,1,r)-1;return o[n](i[n](e))}}function FN(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function jN(){var t,e,n,r,i,o,a=IN,s=IN,c=CN,l=NN;function u(){var t=Math.min(a.length,s.length);return l!==NN&&(l=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),r=t>2?LN:DN,i=o=null,h}function h(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),s,c)))(t(l(e)))}return h.invert=function(n){return l(e((o||(o=r(s,a.map(t),uP)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,PN),u()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),c=kN,u()},h.clamp=function(t){return arguments.length?(l=!!t||NN,u()):l!==NN},h.interpolate=function(t){return arguments.length?(c=t,u()):c},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,u()}}function UN(){return jN()(NN,NN)}var BN,zN=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function VN(t){if(!(e=zN.exec(t)))throw new Error("invalid format: "+t);var e;return new GN({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function GN(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function WN(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function HN(t){return(t=WN(Math.abs(t)))?t[1]:NaN}function qN(t,e){var n=WN(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}VN.prototype=GN.prototype,GN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const XN={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>qN(100*t,e),r:qN,s:function(t,e){var n=WN(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(BN=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+WN(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function YN(t){return t}var KN,ZN,JN,$N=Array.prototype.map,QN=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function tR(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?YN:(e=$N.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),o.push(t.substring(i-=s,i+s)),!((c+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?YN:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}($N.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"\u2212":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=VN(t)).fill,n=t.align,h=t.sign,d=t.symbol,p=t.zero,f=t.width,m=t.comma,g=t.precision,y=t.trim,v=t.type;"n"===v?(m=!0,v="g"):XN[v]||(void 0===g&&(g=12),y=!0,v="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var b="$"===d?i:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===d?o:/[%p]/.test(v)?c:"",_=XN[v],w=/[defgprs%]/.test(v);function S(t){var i,o,c,d=b,S=x;if("c"===v)S=_(t)+S,t="";else{var T=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:_(Math.abs(t),g),y&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),T&&0===+t&&"+"!==h&&(T=!1),d=(T?"("===h?h:l:"-"===h||"("===h?"":h)+d,S=("s"===v?QN[8+BN/3]:"")+S+(T&&"("===h?")":""),w)for(i=-1,o=t.length;++i<o;)if(48>(c=t.charCodeAt(i))||c>57){S=(46===c?a+t.slice(i+1):t.slice(i))+S,t=t.slice(0,i);break}}m&&!p&&(t=r(t,1/0));var E=d.length+t.length+S.length,A=E<f?new Array(f-E+1).join(e):"";switch(m&&p&&(t=r(A+t,A.length?f-S.length:1/0),A=""),n){case"<":t=d+t+S+A;break;case"=":t=d+A+t+S;break;case"^":t=A.slice(0,E=A.length>>1)+d+t+S+A.slice(E);break;default:t=A+d+t+S}return s(t)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return t+""},S}return{format:h,formatPrefix:function(t,e){var n=h(((t=VN(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(HN(e)/3))),i=Math.pow(10,-r),o=QN[8+r/3];return function(t){return n(i*t)+o}}}}function eR(t,e,n,r){var i,o=gN(t,e,n);switch((r=VN(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(HN(e)/3)))-HN(Math.abs(t)))}(o,a))||(r.precision=i),JN(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,HN(e)-HN(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-HN(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return ZN(r)}function nR(t){var e=t.domain;return t.ticks=function(t){var n=e();return fN(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return eR(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,c=o[a],l=o[s],u=10;for(l<c&&(i=c,c=l,l=i,i=a,a=s,s=i);u-- >0;){if((i=mN(c,l,n))===r)return o[a]=c,o[s]=l,e(o);if(i>0)c=Math.floor(c/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;c=Math.ceil(c*i)/i,l=Math.floor(l*i)/i}r=i}return t},t}function rR(){var t=UN();return t.copy=function(){return FN(t,rR())},$I.apply(t,arguments),nR(t)}function iR(t){var e;function n(t){return null==t||isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,PN),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return iR(t).unknown(e)},t=arguments.length?Array.from(t,PN):[0,1],nR(n)}function oR(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function aR(t){return Math.log(t)}function sR(t){return Math.exp(t)}function cR(t){return-Math.log(-t)}function lR(t){return-Math.exp(-t)}function uR(t){return isFinite(t)?+("1e"+t):t<0?0:t}function hR(t){return(e,n)=>-t(-e,n)}function dR(t){const e=t(aR,sR),n=e.domain;let r,i,o=10;function a(){return r=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(o),i=function(t){return 10===t?uR:t===Math.E?Math.exp:e=>Math.pow(t,e)}(o),n()[0]<0?(r=hR(r),i=hR(i),t(cR,lR)):t(aR,sR),e}return e.base=function(t){return arguments.length?(o=+t,a()):o},e.domain=function(t){return arguments.length?(n(t),a()):n()},e.ticks=t=>{const e=n();let a=e[0],s=e[e.length-1];const c=s<a;c&&([a,s]=[s,a]);let l,u,h=r(a),d=r(s);const p=null==t?10:+t;let f=[];if(!(o%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),a>0){for(;h<=d;++h)for(l=1;l<o;++l)if(u=h<0?l/i(-h):l*i(h),!(u<a)){if(u>s)break;f.push(u)}}else for(;h<=d;++h)for(l=o-1;l>=1;--l)if(u=h>0?l/i(-h):l*i(h),!(u<a)){if(u>s)break;f.push(u)}2*f.length<p&&(f=fN(a,s,p))}else f=fN(h,d,Math.min(d-h,p)).map(i);return c?f.reverse():f},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===o?"s":","),"function"!==typeof n&&(o%1||null!=(n=VN(n)).precision||(n.trim=!0),n=ZN(n)),t===1/0)return n;const a=Math.max(1,o*t/e.ticks().length);return t=>{let e=t/i(Math.round(r(t)));return e*o<o-.5&&(e*=o),e<=a?n(t):""}},e.nice=()=>n(oR(n(),{floor:t=>i(Math.floor(r(t))),ceil:t=>i(Math.ceil(r(t)))})),e}function pR(){const t=dR(jN()).domain([1,10]);return t.copy=()=>FN(t,pR()).base(t.base()),$I.apply(t,arguments),t}function fR(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function mR(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function gR(t){var e=1,n=t(fR(e),mR(e));return n.constant=function(n){return arguments.length?t(fR(e=+n),mR(e)):e},nR(n)}function yR(){var t=gR(jN());return t.copy=function(){return FN(t,yR()).constant(t.constant())},$I.apply(t,arguments)}function vR(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function bR(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function xR(t){return t<0?-t*t:t*t}function _R(t){var e=t(NN,NN),n=1;return e.exponent=function(e){return arguments.length?1===(n=+e)?t(NN,NN):.5===n?t(bR,xR):t(vR(n),vR(1/n)):n},nR(e)}function wR(){var t=_R(jN());return t.copy=function(){return FN(t,wR()).exponent(t.exponent())},$I.apply(t,arguments),t}function SR(){return wR.apply(null,arguments).exponent(.5)}function TR(t){return Math.sign(t)*t*t}function ER(){var t,e=UN(),n=[0,1],r=!1;function i(n){var i=function(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}(e(n));return isNaN(i)?t:r?Math.round(i):i}return i.invert=function(t){return e.invert(TR(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain()},i.range=function(t){return arguments.length?(e.range((n=Array.from(t,PN)).map(TR)),i):n.slice()},i.rangeRound=function(t){return i.range(t).round(!0)},i.round=function(t){return arguments.length?(r=!!t,i):r},i.clamp=function(t){return arguments.length?(e.clamp(t),i):e.clamp()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return ER(e.domain(),n).round(r).clamp(e.clamp()).unknown(t)},$I.apply(i,arguments),nR(i)}function AR(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function MR(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yN;if(t===yN)return OR;if("function"!==typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}function OR(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}function CR(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4?arguments[4]:void 0;if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=void 0===i?OR:MR(i);r>n;){if(r-n>600){const o=r-n+1,a=e-n+1,s=Math.log(o),c=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*c*(o-c)/o)*(a-o/2<0?-1:1);CR(t,e,Math.max(n,Math.floor(e-a*c/o+l)),Math.min(r,Math.floor(e+(o-a)*c/o+l)),i)}const o=t[e];let a=n,s=r;for(kR(t,n,e),i(t[r],o)>0&&kR(t,n,r);a<s;){for(kR(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}0===i(t[n],o)?kR(t,n,s):(++s,kR(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function kR(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function PR(t,e,n){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n)),(r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return AR(t);if(e>=1)return hC(t);var r,i=(r-1)*e,o=Math.floor(i),a=hC(CR(t,o).subarray(0,o+1));return a+(AR(t.subarray(o+1))-a)*(i-o)}}function IR(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_N;if((r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}}function NR(){var t,e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=IR(e,t/i);return o}function o(e){return null==e||isNaN(e=+e)?t:n[TN(r,e)]}return o.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(yN),i()},o.range=function(t){return arguments.length?(n=Array.from(t),i()):n.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return r.slice()},o.copy=function(){return NR().domain(e).range(n).unknown(t)},$I.apply(o,arguments)}function RR(){var t,e=0,n=1,r=1,i=[.5],o=[0,1];function a(e){return null!=e&&e<=e?o[TN(i,e,0,r)]:t}function s(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return a}return a.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,s()):[e,n]},a.range=function(t){return arguments.length?(r=(o=Array.from(t)).length-1,s()):o.slice()},a.invertExtent=function(t){var a=o.indexOf(t);return a<0?[NaN,NaN]:a<1?[e,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(e){return arguments.length?(t=e,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return RR().domain([e,n]).range(o).unknown(t)},$I.apply(nR(a),arguments)}function DR(){var t,e=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[TN(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return DR().domain(e).range(n).unknown(t)},$I.apply(i,arguments)}KN=tR({thousands:",",grouping:[3],currency:["$",""]}),ZN=KN.format,JN=KN.formatPrefix;const LR=1e3,FR=6e4,jR=36e5,UR=864e5,BR=6048e5,zR=2592e6,VR=31536e6,GR=new Date,WR=new Date;function HR(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=e=>(t(e=new Date(+e)),e),i.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),i.round=t=>{const e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),i.range=(n,r,o)=>{const a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return a;let s;do{a.push(s=new Date(+n)),e(n,o),t(n)}while(s<n&&n<r);return a},i.filter=n=>HR((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,r)=>{if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})),n&&(i.count=(e,r)=>(GR.setTime(+e),WR.setTime(+r),t(GR),t(WR),Math.floor(n(GR,WR))),i.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?e=>r(e)%t===0:e=>i.count(0,e)%t===0):i:null)),i}const qR=HR((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));qR.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?HR((e=>{e.setTime(Math.floor(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):qR:null);qR.range;const XR=HR((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*LR)}),((t,e)=>(e-t)/LR),(t=>t.getUTCSeconds())),YR=(XR.range,HR((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*LR)}),((t,e)=>{t.setTime(+t+e*FR)}),((t,e)=>(e-t)/FR),(t=>t.getMinutes()))),KR=(YR.range,HR((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*FR)}),((t,e)=>(e-t)/FR),(t=>t.getUTCMinutes()))),ZR=(KR.range,HR((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*LR-t.getMinutes()*FR)}),((t,e)=>{t.setTime(+t+e*jR)}),((t,e)=>(e-t)/jR),(t=>t.getHours()))),JR=(ZR.range,HR((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*jR)}),((t,e)=>(e-t)/jR),(t=>t.getUTCHours()))),$R=(JR.range,HR((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*FR)/UR),(t=>t.getDate()-1))),QR=($R.range,HR((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/UR),(t=>t.getUTCDate()-1))),tD=(QR.range,HR((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/UR),(t=>Math.floor(t/UR))));tD.range;function eD(t){return HR((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*FR)/BR))}const nD=eD(0),rD=eD(1),iD=eD(2),oD=eD(3),aD=eD(4),sD=eD(5),cD=eD(6);nD.range,rD.range,iD.range,oD.range,aD.range,sD.range,cD.range;function lD(t){return HR((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/BR))}const uD=lD(0),hD=lD(1),dD=lD(2),pD=lD(3),fD=lD(4),mD=lD(5),gD=lD(6),yD=(uD.range,hD.range,dD.range,pD.range,fD.range,mD.range,gD.range,HR((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth()))),vD=(yD.range,HR((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth()))),bD=(vD.range,HR((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear())));bD.every=t=>isFinite(t=Math.floor(t))&&t>0?HR((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null;bD.range;const xD=HR((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));xD.every=t=>isFinite(t=Math.floor(t))&&t>0?HR((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null;xD.range;function _D(t,e,n,r,i,o){const a=[[XR,1,LR],[XR,5,5e3],[XR,15,15e3],[XR,30,3e4],[o,1,FR],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,jR],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,UR],[r,2,1728e5],[n,1,BR],[e,1,zR],[e,3,7776e6],[t,1,VR]];function s(e,n,r){const i=Math.abs(n-e)/r,o=bN((t=>{let[,,e]=t;return e})).right(a,i);if(o===a.length)return t.every(gN(e/VR,n/VR,r));if(0===o)return qR.every(Math.max(gN(e,n,r),1));const[s,c]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(c)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"===typeof n.range?n:s(t,e,n),o=i?i.range(t,+e+1):[];return r?o.reverse():o},s]}const[wD,SD]=_D(xD,vD,uD,tD,JR,KR),[TD,ED]=_D(bD,yD,nD,$R,ZR,YR);function AD(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function MD(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function OD(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var CD,kD,PD,ID={"-":"",_:" ",0:"0"},ND=/^\s*\d+/,RD=/^%/,DD=/[\\^$*+?|[\]().{}]/g;function LD(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function FD(t){return t.replace(DD,"\\$&")}function jD(t){return new RegExp("^(?:"+t.map(FD).join("|")+")","i")}function UD(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function BD(t,e,n){var r=ND.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function zD(t,e,n){var r=ND.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function VD(t,e,n){var r=ND.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function GD(t,e,n){var r=ND.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function WD(t,e,n){var r=ND.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function HD(t,e,n){var r=ND.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function qD(t,e,n){var r=ND.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function XD(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function YD(t,e,n){var r=ND.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function KD(t,e,n){var r=ND.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ZD(t,e,n){var r=ND.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function JD(t,e,n){var r=ND.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function $D(t,e,n){var r=ND.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function QD(t,e,n){var r=ND.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function tL(t,e,n){var r=ND.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function eL(t,e,n){var r=ND.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function nL(t,e,n){var r=ND.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function rL(t,e,n){var r=RD.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function iL(t,e,n){var r=ND.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function oL(t,e,n){var r=ND.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function aL(t,e){return LD(t.getDate(),e,2)}function sL(t,e){return LD(t.getHours(),e,2)}function cL(t,e){return LD(t.getHours()%12||12,e,2)}function lL(t,e){return LD(1+$R.count(bD(t),t),e,3)}function uL(t,e){return LD(t.getMilliseconds(),e,3)}function hL(t,e){return uL(t,e)+"000"}function dL(t,e){return LD(t.getMonth()+1,e,2)}function pL(t,e){return LD(t.getMinutes(),e,2)}function fL(t,e){return LD(t.getSeconds(),e,2)}function mL(t){var e=t.getDay();return 0===e?7:e}function gL(t,e){return LD(nD.count(bD(t)-1,t),e,2)}function yL(t){var e=t.getDay();return e>=4||0===e?aD(t):aD.ceil(t)}function vL(t,e){return t=yL(t),LD(aD.count(bD(t),t)+(4===bD(t).getDay()),e,2)}function bL(t){return t.getDay()}function xL(t,e){return LD(rD.count(bD(t)-1,t),e,2)}function _L(t,e){return LD(t.getFullYear()%100,e,2)}function wL(t,e){return LD((t=yL(t)).getFullYear()%100,e,2)}function SL(t,e){return LD(t.getFullYear()%1e4,e,4)}function TL(t,e){var n=t.getDay();return LD((t=n>=4||0===n?aD(t):aD.ceil(t)).getFullYear()%1e4,e,4)}function EL(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+LD(e/60|0,"0",2)+LD(e%60,"0",2)}function AL(t,e){return LD(t.getUTCDate(),e,2)}function ML(t,e){return LD(t.getUTCHours(),e,2)}function OL(t,e){return LD(t.getUTCHours()%12||12,e,2)}function CL(t,e){return LD(1+QR.count(xD(t),t),e,3)}function kL(t,e){return LD(t.getUTCMilliseconds(),e,3)}function PL(t,e){return kL(t,e)+"000"}function IL(t,e){return LD(t.getUTCMonth()+1,e,2)}function NL(t,e){return LD(t.getUTCMinutes(),e,2)}function RL(t,e){return LD(t.getUTCSeconds(),e,2)}function DL(t){var e=t.getUTCDay();return 0===e?7:e}function LL(t,e){return LD(uD.count(xD(t)-1,t),e,2)}function FL(t){var e=t.getUTCDay();return e>=4||0===e?fD(t):fD.ceil(t)}function jL(t,e){return t=FL(t),LD(fD.count(xD(t),t)+(4===xD(t).getUTCDay()),e,2)}function UL(t){return t.getUTCDay()}function BL(t,e){return LD(hD.count(xD(t)-1,t),e,2)}function zL(t,e){return LD(t.getUTCFullYear()%100,e,2)}function VL(t,e){return LD((t=FL(t)).getUTCFullYear()%100,e,2)}function GL(t,e){return LD(t.getUTCFullYear()%1e4,e,4)}function WL(t,e){var n=t.getUTCDay();return LD((t=n>=4||0===n?fD(t):fD.ceil(t)).getUTCFullYear()%1e4,e,4)}function HL(){return"+0000"}function qL(){return"%"}function XL(t){return+t}function YL(t){return Math.floor(+t/1e3)}function KL(t){return new Date(t)}function ZL(t){return t instanceof Date?+t:+new Date(+t)}function JL(t,e,n,r,i,o,a,s,c,l){var u=UN(),h=u.invert,d=u.domain,p=l(".%L"),f=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),x=l("%Y");function _(t){return(c(t)<t?p:s(t)<t?f:a(t)<t?m:o(t)<t?g:r(t)<t?i(t)<t?y:v:n(t)<t?b:x)(t)}return u.invert=function(t){return new Date(h(t))},u.domain=function(t){return arguments.length?d(Array.from(t,ZL)):d().map(KL)},u.ticks=function(e){var n=d();return t(n[0],n[n.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?_:l(e)},u.nice=function(t){var n=d();return t&&"function"===typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?d(oR(n,t)):u},u.copy=function(){return FN(u,JL(t,e,n,r,i,o,a,s,c,l))},u}function $L(){return $I.apply(JL(TD,ED,bD,yD,nD,$R,ZR,YR,XR,kD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function QL(){return $I.apply(JL(wD,SD,xD,vD,uD,QR,JR,KR,XR,PD).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function tF(){var t,e,n,r,i,o=0,a=1,s=NN,c=!1;function l(e){return null==e||isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,c?Math.max(0,Math.min(1,e)):e))}function u(t){return function(e){var n,r;return arguments.length?([n,r]=e,s=t(n,r),l):[s(0),s(1)]}}return l.domain=function(i){return arguments.length?([o,a]=i,t=r(o=+o),e=r(a=+a),n=t===e?0:1/(e-t),l):[o,a]},l.clamp=function(t){return arguments.length?(c=!!t,l):c},l.interpolator=function(t){return arguments.length?(s=t,l):s},l.range=u(CN),l.rangeRound=u(kN),l.unknown=function(t){return arguments.length?(i=t,l):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),l}}function eF(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function nF(){var t=nR(tF()(NN));return t.copy=function(){return eF(t,nF())},QI.apply(t,arguments)}function rF(){var t=dR(tF()).domain([1,10]);return t.copy=function(){return eF(t,rF()).base(t.base())},QI.apply(t,arguments)}function iF(){var t=gR(tF());return t.copy=function(){return eF(t,iF()).constant(t.constant())},QI.apply(t,arguments)}function oF(){var t=_R(tF());return t.copy=function(){return eF(t,oF()).exponent(t.exponent())},QI.apply(t,arguments)}function aF(){return oF.apply(null,arguments).exponent(.5)}function sF(){var t=[],e=NN;function n(n){if(null!=n&&!isNaN(n=+n))return e((TN(t,n,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(yN),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.range=function(){return t.map(((n,r)=>e(r/(t.length-1))))},n.quantiles=function(e){return Array.from({length:e+1},((n,r)=>PR(t,r/e)))},n.copy=function(){return sF(e).domain(t)},QI.apply(n,arguments)}function cF(){var t,e,n,r,i,o,a,s=0,c=.5,l=1,u=1,h=NN,d=!1;function p(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(u*t<u*e?r:i),h(d?Math.max(0,Math.min(1,t)):t))}function f(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,h=function(t,e){void 0===e&&(e=t,t=CN);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}(t,[n,r,i]),p):[h(0),h(.5),h(1)]}}return p.domain=function(a){return arguments.length?([s,c,l]=a,t=o(s=+s),e=o(c=+c),n=o(l=+l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,p):[s,c,l]},p.clamp=function(t){return arguments.length?(d=!!t,p):d},p.interpolator=function(t){return arguments.length?(h=t,p):h},p.range=f(CN),p.rangeRound=f(kN),p.unknown=function(t){return arguments.length?(a=t,p):a},function(a){return o=a,t=a(s),e=a(c),n=a(l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,p}}function lF(){var t=nR(cF()(NN));return t.copy=function(){return eF(t,lF())},QI.apply(t,arguments)}function uF(){var t=dR(cF()).domain([.1,1,10]);return t.copy=function(){return eF(t,uF()).base(t.base())},QI.apply(t,arguments)}function hF(){var t=gR(cF());return t.copy=function(){return eF(t,hF()).constant(t.constant())},QI.apply(t,arguments)}function dF(){var t=_R(cF());return t.copy=function(){return eF(t,dF()).exponent(t.exponent())},QI.apply(t,arguments)}function pF(){return dF.apply(null,arguments).exponent(.5)}function fF(t){return"string"===typeof t?new wk([[document.querySelector(t)]],[document.documentElement]):new wk([[t]],_k)}function mF(t){return"string"===typeof t?new wk([document.querySelectorAll(t)],[document.documentElement]):new wk([fC(t)],_k)}!function(t){CD=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,c=t.shortMonths,l=jD(i),u=UD(i),h=jD(o),d=UD(o),p=jD(a),f=UD(a),m=jD(s),g=UD(s),y=jD(c),v=UD(c),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:aL,e:aL,f:hL,g:wL,G:TL,H:sL,I:cL,j:lL,L:uL,m:dL,M:pL,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:XL,s:YL,S:fL,u:mL,U:gL,V:vL,w:bL,W:xL,x:null,X:null,y:_L,Y:SL,Z:EL,"%":qL},x={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:AL,e:AL,f:PL,g:VL,G:WL,H:ML,I:OL,j:CL,L:kL,m:IL,M:NL,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:XL,s:YL,S:RL,u:DL,U:LL,V:jL,w:UL,W:BL,x:null,X:null,y:zL,Y:GL,Z:HL,"%":qL},_={a:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return T(t,e,n,r)},d:ZD,e:ZD,f:nL,g:qD,G:HD,H:$D,I:$D,j:JD,L:eL,m:KD,M:QD,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:YD,Q:iL,s:oL,S:tL,u:zD,U:VD,V:GD,w:BD,W:WD,x:function(t,e,r){return T(t,n,e,r)},X:function(t,e,n){return T(t,r,e,n)},y:qD,Y:HD,Z:XD,"%":rL};function w(t,e){return function(n){var r,i,o,a=[],s=-1,c=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(a.push(t.slice(c,s)),null!=(i=ID[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),c=s+1);return a.push(t.slice(c,s)),a.join("")}}function S(t,e){return function(n){var r,i,o=OD(1900,void 0,1);if(T(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=MD(OD(o.y,0,1))).getUTCDay(),r=i>4||0===i?hD.ceil(r):hD(r),r=QR.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=AD(OD(o.y,0,1))).getDay(),r=i>4||0===i?rD.ceil(r):rD(r),r=$R.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?MD(OD(o.y,0,1)).getUTCDay():AD(OD(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,MD(o)):AD(o)}}function T(t,e,n,r){for(var i,o,a=0,s=e.length,c=n.length;a<s;){if(r>=c)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=_[i in ID?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),x.x=w(n,x),x.X=w(r,x),x.c=w(e,x),{format:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=S(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=S(t+="",!0);return e.toString=function(){return t},e}}}(t),kD=CD.format,CD.parse,PD=CD.utcFormat,CD.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const gF={capture:!0,passive:!1};function yF(t){t.preventDefault(),t.stopImmediatePropagation()}function vF(t){return((t=Math.exp(t))+1/t)/2}const bF=function t(e,n,r){function i(t,i){var o,a,s=t[0],c=t[1],l=t[2],u=i[0],h=i[1],d=i[2],p=u-s,f=h-c,m=p*p+f*f;if(m<1e-12)a=Math.log(d/l)/e,o=function(t){return[s+t*p,c+t*f,l*Math.exp(e*t*a)]};else{var g=Math.sqrt(m),y=(d*d-l*l+r*m)/(2*l*n*g),v=(d*d-l*l-r*m)/(2*d*n*g),b=Math.log(Math.sqrt(y*y+1)-y),x=Math.log(Math.sqrt(v*v+1)-v);a=(x-b)/e,o=function(t){var r,i=t*a,o=vF(b),u=l/(n*g)*(o*(r=e*i+b,((r=Math.exp(2*r))-1)/(r+1))-function(t){return((t=Math.exp(t))-1/t)/2}(b));return[s+u*p,c+u*f,l*o/vF(e*i+b)]}}return o.duration=1e3*a*e/Math.SQRT2,o}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4);function xF(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const _F=t=>()=>t;function wF(t,e){let{sourceEvent:n,target:r,transform:i,dispatch:o}=e;Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function SF(t,e,n){this.k=t,this.x=e,this.y=n}SF.prototype={constructor:SF,scale:function(t){return 1===t?this:new SF(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new SF(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var TF=new SF(1,0,0);function EF(t){t.stopImmediatePropagation()}function AF(t){t.preventDefault(),t.stopImmediatePropagation()}function MF(t){return(!t.ctrlKey||"wheel"===t.type)&&!t.button}function OF(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function CF(){return this.__zoom||TF}function kF(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function PF(){return navigator.maxTouchPoints||"ontouchstart"in this}function IF(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function NF(){var t,e,n,r=MF,i=OF,o=IF,a=kF,s=PF,c=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,h=bF,d=kk("start","zoom","end"),p=500,f=150,m=0,g=10;function y(t){t.property("__zoom",CF).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",A).filter(s).on("touchstart.zoom",M).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(t,e){return(e=Math.max(c[0],Math.min(c[1],e)))===t.k?t:new SF(e,t.x,t.y)}function b(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new SF(t.k,r,i)}function x(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function _(t,e,n,r){t.on("start.zoom",(function(){w(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){w(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,o=arguments,a=w(t,o).event(r),s=i.apply(t,o),c=null==n?x(s):"function"===typeof n?n.apply(t,o):n,l=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=t.__zoom,d="function"===typeof e?e.apply(t,o):e,p=h(u.invert(c).concat(l/u.k),d.invert(c).concat(l/d.k));return function(t){if(1===t)t=d;else{var e=p(t),n=l/e[2];t=new SF(n,c[0]-e[0]*n,c[1]-e[1]*n)}a.zoom(null,t)}}))}function w(t,e,n){return!n&&t.__zooming||new S(t,e)}function S(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,e),this.taps=0}function T(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(r.apply(this,arguments)){var s=w(this,n).event(t),u=this.__zoom,h=Math.max(c[0],Math.min(c[1],u.k*Math.pow(2,a.apply(this,arguments)))),d=xF(t);if(s.wheel)s.mouse[0][0]===d[0]&&s.mouse[0][1]===d[1]||(s.mouse[1]=u.invert(s.mouse[0]=d)),clearTimeout(s.wheel);else{if(u.k===h)return;s.mouse=[d,u.invert(d)],lP(this),s.start()}AF(t),s.wheel=setTimeout((function(){s.wheel=null,s.end()}),f),s.zoom("mouse",o(b(v(u,h),s.mouse[0],s.mouse[1]),s.extent,l))}}function E(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];if(!n&&r.apply(this,arguments)){var s=t.currentTarget,c=w(this,i,!0).event(t),u=fF(t.view).on("mousemove.zoom",(function(t){if(AF(t),!c.moved){var e=t.clientX-d,n=t.clientY-p;c.moved=e*e+n*n>m}c.event(t).zoom("mouse",o(b(c.that.__zoom,c.mouse[0]=xF(t,s),c.mouse[1]),c.extent,l))}),!0).on("mouseup.zoom",(function(t){u.on("mousemove.zoom mouseup.zoom",null),function(t,e){var n=t.document.documentElement,r=fF(t).on("dragstart.drag",null);e&&(r.on("click.drag",yF,gF),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(t.view,c.moved),AF(t),c.event(t).end()}),!0),h=xF(t,s),d=t.clientX,p=t.clientY;!function(t){var e=t.document.documentElement,n=fF(t).on("dragstart.drag",yF,gF);"onselectstart"in e?n.on("selectstart.drag",yF,gF):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(t.view),EF(t),c.mouse=[h,this.__zoom.invert(h)],lP(this),c.start()}}function A(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];if(r.apply(this,arguments)){var s=this.__zoom,c=xF(t.changedTouches?t.changedTouches[0]:t,this),h=s.invert(c),d=s.k*(t.shiftKey?.5:2),p=o(b(v(s,d),c,h),i.apply(this,n),l);AF(t),u>0?fF(this).transition().duration(u).call(_,p,c,t):fF(this).call(y.transform,p,c,t)}}function M(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(r.apply(this,arguments)){var s,c,l,u,h=n.touches,d=h.length,f=w(this,o,n.changedTouches.length===d).event(n);for(EF(n),c=0;c<d;++c)u=[u=xF(l=h[c],this),this.__zoom.invert(u),l.identifier],f.touch0?f.touch1||f.touch0[2]===u[2]||(f.touch1=u,f.taps=0):(f.touch0=u,s=!0,f.taps=1+!!t);t&&(t=clearTimeout(t)),s&&(f.taps<2&&(e=u[0],t=setTimeout((function(){t=null}),p)),lP(this),f.start())}}function O(t){if(this.__zooming){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i,a,s,c,u=w(this,n).event(t),h=t.changedTouches,d=h.length;for(AF(t),i=0;i<d;++i)s=xF(a=h[i],this),u.touch0&&u.touch0[2]===a.identifier?u.touch0[0]=s:u.touch1&&u.touch1[2]===a.identifier&&(u.touch1[0]=s);if(a=u.that.__zoom,u.touch1){var p=u.touch0[0],f=u.touch0[1],m=u.touch1[0],g=u.touch1[1],y=(y=m[0]-p[0])*y+(y=m[1]-p[1])*y,x=(x=g[0]-f[0])*x+(x=g[1]-f[1])*x;a=v(a,Math.sqrt(y/x)),s=[(p[0]+m[0])/2,(p[1]+m[1])/2],c=[(f[0]+g[0])/2,(f[1]+g[1])/2]}else{if(!u.touch0)return;s=u.touch0[0],c=u.touch0[1]}u.zoom("touch",o(b(a,s,c),u.extent,l))}}function C(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(this.__zooming){var a,s,c=w(this,i).event(t),l=t.changedTouches,u=l.length;for(EF(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),p),a=0;a<u;++a)s=l[a],c.touch0&&c.touch0[2]===s.identifier?delete c.touch0:c.touch1&&c.touch1[2]===s.identifier&&delete c.touch1;if(c.touch1&&!c.touch0&&(c.touch0=c.touch1,delete c.touch1),c.touch0)c.touch0[1]=this.__zoom.invert(c.touch0[0]);else if(c.end(),2===c.taps&&(s=xF(s,this),Math.hypot(e[0]-s[0],e[1]-s[1])<g)){var h=fF(this).on("dblclick.zoom");h&&h.apply(this,arguments)}}}return y.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",CF),t!==i?_(t,e,n,r):i.interrupt().each((function(){w(this,arguments).event(r).start().zoom(null,"function"===typeof e?e.apply(this,arguments):e).end()}))},y.scaleBy=function(t,e,n,r){y.scaleTo(t,(function(){return this.__zoom.k*("function"===typeof e?e.apply(this,arguments):e)}),n,r)},y.scaleTo=function(t,e,n,r){y.transform(t,(function(){var t=i.apply(this,arguments),r=this.__zoom,a=null==n?x(t):"function"===typeof n?n.apply(this,arguments):n,s=r.invert(a),c="function"===typeof e?e.apply(this,arguments):e;return o(b(v(r,c),a,s),t,l)}),n,r)},y.translateBy=function(t,e,n,r){y.transform(t,(function(){return o(this.__zoom.translate("function"===typeof e?e.apply(this,arguments):e,"function"===typeof n?n.apply(this,arguments):n),i.apply(this,arguments),l)}),null,r)},y.translateTo=function(t,e,n,r,a){y.transform(t,(function(){var t=i.apply(this,arguments),a=this.__zoom,s=null==r?x(t):"function"===typeof r?r.apply(this,arguments):r;return o(TF.translate(s[0],s[1]).scale(a.k).translate("function"===typeof e?-e.apply(this,arguments):-e,"function"===typeof n?-n.apply(this,arguments):-n),t,l)}),r,a)},S.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=fF(this.that).datum();d.call(t,this.that,new wF(t,{sourceEvent:this.sourceEvent,target:y,type:t,transform:this.that.__zoom,dispatch:d}),e)}},y.wheelDelta=function(t){return arguments.length?(a="function"===typeof t?t:_F(+t),y):a},y.filter=function(t){return arguments.length?(r="function"===typeof t?t:_F(!!t),y):r},y.touchable=function(t){return arguments.length?(s="function"===typeof t?t:_F(!!t),y):s},y.extent=function(t){return arguments.length?(i="function"===typeof t?t:_F([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),y):i},y.scaleExtent=function(t){return arguments.length?(c[0]=+t[0],c[1]=+t[1],y):[c[0],c[1]]},y.translateExtent=function(t){return arguments.length?(l[0][0]=+t[0][0],l[1][0]=+t[1][0],l[0][1]=+t[0][1],l[1][1]=+t[1][1],y):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},y.constrain=function(t){return arguments.length?(o=t,y):o},y.duration=function(t){return arguments.length?(u=+t,y):u},y.interpolate=function(t){return arguments.length?(h=t,y):h},y.on=function(){var t=d.on.apply(d,arguments);return t===d?y:t},y.clickDistance=function(t){return arguments.length?(m=(t=+t)*t,y):Math.sqrt(m)},y.tapDistance=function(t){return arguments.length?(g=+t,y):g},y}function RF(t){return t}SF.prototype;var DF=1,LF=2,FF=3,jF=4,UF=1e-6;function BF(t){return"translate("+t+",0)"}function zF(t){return"translate(0,"+t+")"}function VF(t){return e=>+t(e)}function GF(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function WF(){return!this.__axis}function HF(t,e){var n=[],r=null,i=null,o=6,a=6,s=3,c="undefined"!==typeof window&&window.devicePixelRatio>1?0:.5,l=t===DF||t===jF?-1:1,u=t===jF||t===LF?"x":"y",h=t===DF||t===FF?BF:zF;function d(d){var p=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,f=null==i?e.tickFormat?e.tickFormat.apply(e,n):RF:i,m=Math.max(o,0)+s,g=e.range(),y=+g[0]+c,v=+g[g.length-1]+c,b=(e.bandwidth?GF:VF)(e.copy(),c),x=d.selection?d.selection():d,_=x.selectAll(".domain").data([null]),w=x.selectAll(".tick").data(p,e).order(),S=w.exit(),T=w.enter().append("g").attr("class","tick"),E=w.select("line"),A=w.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(T),E=E.merge(T.append("line").attr("stroke","currentColor").attr(u+"2",l*o)),A=A.merge(T.append("text").attr("fill","currentColor").attr(u,l*m).attr("dy",t===DF?"0em":t===FF?"0.71em":"0.32em")),d!==x&&(_=_.transition(d),w=w.transition(d),E=E.transition(d),A=A.transition(d),S=S.transition(d).attr("opacity",UF).attr("transform",(function(t){return isFinite(t=b(t))?h(t+c):this.getAttribute("transform")})),T.attr("opacity",UF).attr("transform",(function(t){var e=this.parentNode.__axis;return h((e&&isFinite(e=e(t))?e:b(t))+c)}))),S.remove(),_.attr("d",t===jF||t===LF?a?"M"+l*a+","+y+"H"+c+"V"+v+"H"+l*a:"M"+c+","+y+"V"+v:a?"M"+y+","+l*a+"V"+c+"H"+v+"V"+l*a:"M"+y+","+c+"H"+v),w.attr("opacity",1).attr("transform",(function(t){return h(b(t)+c)})),E.attr(u+"2",l*o),A.attr(u,l*m).text(f),x.filter(WF).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===LF?"start":t===jF?"end":"middle"),x.each((function(){this.__axis=b}))}return d.scale=function(t){return arguments.length?(e=t,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),d):n.slice()},d.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),d):r&&r.slice()},d.tickFormat=function(t){return arguments.length?(i=t,d):i},d.tickSize=function(t){return arguments.length?(o=a=+t,d):o},d.tickSizeInner=function(t){return arguments.length?(o=+t,d):o},d.tickSizeOuter=function(t){return arguments.length?(a=+t,d):a},d.tickPadding=function(t){return arguments.length?(s=+t,d):s},d.offset=function(t){return arguments.length?(c=+t,d):c},d}function qF(t){return HF(DF,t)}function XF(t){return HF(LF,t)}function YF(t){return HF(FF,t)}function KF(t){return HF(jF,t)}const ZF=t=>{const n=(0,k.useRef)(null);return(0,k.useEffect)((()=>((r=>{const{orient:i,scale:o,axisLabel:a,axisLabelText:s}=t,c="Left"===i?"y":"x";if(r&&r.axisLabel&&mF("text.".concat(c,"axis-label-").concat(r.axisLabel)).remove(),!["Left","Bottom"].includes(i))throw new Error("axisType must be 'Left' or 'Bottom'");const l="axis".concat(i),u=e[l]().scale(o).tickPadding([5]),h=fF(n.current).call(u);if(a){let{axisLabelPositionX:e,axisLabelPositionY:n}=t.axisLabelPositions;e="Left"===i?-e:e,n="Left"===i?-n:n,h.append("text").attr("class","".concat(c,"axis-label-").concat(a," text-lg"));let r=mF("text.".concat(c,"axis-label-").concat(a)).data([null]);const o="Left"===i?"rotate(-90)":"rotate(0)";if(r.enter().merge(r).attr("y",n).attr("x",e).attr("fill","black").text(s).attr("font-family","sans-serif").attr("fill","currentColor").attr("transform",o).exit().remove(),"Bottom"===i){const{innerHeight:e}=t;h.selectAll("g.tick line").attr("y2",-e).attr("opacity",.2)}else{const{innerWidth:e}=t;h.selectAll("g.tick line").attr("x2",e).attr("opacity",.2)}}const{removeTickLine:d}=t;d&&h.selectAll(d).remove()})(),()=>{})),[t]),(0,Ln.jsx)("g",{transform:t.translate,ref:n})},JF=t=>{let{axisProps:e}=t;const{xProps:n,yProps:r}=e;return(0,Ln.jsxs)("g",{children:[(0,Ln.jsx)(ZF,{...n}),(0,Ln.jsx)(ZF,{...r})]})},$F=t=>{let{data:e,columns:n,id:r,scales:i,innerWidth:o,innerHeight:a,clickedCategory:s,setClickedCategory:c}=t;const l=(0,k.useRef)(null),{xColumn:u,yColumn:h,catColumn:d}=n,{xScale:p,yScale:f,colorScale:m}=i;return(0,k.useEffect)((()=>{if(l.current){let t=fF(l.current).selectAll(".unique-group").data(e,(t=>t[r]));t.exit().remove();let n=t.enter().append("g").attr("class","unique-group");t=t.merge(n),n.append("circle").attr("class","circle-class hover:cursor-pointer").attr("cx",o/2).attr("cy",a/2).attr("r",0).on("click",((t,e)=>c(e[d]))).on("mouseover",(function(t){fF(this).transition().duration(250).attr("r","0.75em")})).on("mouseout",(function(t){fF(this).transition().duration(250).attr("r","0.5em")})),n.append("title").attr("class","title-class").text((t=>"(".concat(t[u],", ").concat(t[h],")"))),t.select(".circle-class").transition().duration(750).delay(((t,e)=>10*e)).attr("cx",(t=>p(t[u]))).attr("cy",(t=>f(t[h]))).attr("r","0.5em").attr("fill",(t=>m(t[d]))).attr("fill-opacity",(t=>s?t[d]===s?.7:.05:.7)),t.select(".title-class").text((t=>"(".concat(t[u],", ").concat(t[h],")")));const i=33,g=30,y=m.domain().length,v=fF(l.current).selectAll("rect").data([null]);v.enter().append("rect").merge(v).attr("x",2*-i).attr("y",2*-i).attr("rx",10).attr("width",.15*o).attr("height",g*y+1.25*i).attr("fill","black").attr("opacity",.1).attr("transform","translate(".concat(1.06*o,", ").concat(.11*a,")"));let b=fF(l.current).selectAll(".circle-tick").data(m.domain());b.exit().remove();let x=b.enter().append("g").attr("class","circle-tick").attr("transform",((t,e)=>"translate(".concat(1.02*o,", ").concat(e*g+.06*a,")")));b=b.merge(x),b.select(".circle-tick").merge(b).transition().attr("transform",((t,e)=>"translate(".concat(1.02*o,", ").concat(e*g+.06*a,")"))),x.append("circle").attr("class","circle-legend hover:cursor-pointer").attr("r",10).attr("fill",m).attr("opacity",.8).on("click",((t,e)=>c(e))),b.select(".circle-legend").transition().duration(750).attr("opacity",(t=>s?s===t?.8:.05:.8)),x.append("text").attr("class","text-legend text-sm hover:cursor-pointer").attr("fill","currentColor").text((t=>t)).attr("dy","0.32em").attr("x",20).on("click",((t,e)=>c(e))),b.select(".text-legend").transition().duration(750).attr("opacity",(t=>s?s===t?1:.2:1))}}),[l,d,e,o,a,r,p,u,f,h,m,c,s]),(0,Ln.jsx)("g",{ref:l})},QF=(t,e,n)=>(t.PetalLengthCm=+t.PetalLengthCm,t.PetalWidthCm=+t.PetalWidthCm,t.SepalLengthCm=+t.SepalLengthCm,t.SepalWidthCm=+t.SepalWidthCm,t),tj=()=>{const t=.9*window.innerWidth,e=.55*window.innerHeight,n={left:.07*t,right:.12*t,top:.084*e,bottom:.084*e};return{width:t,height:e,margins:n,innerWidth:t-n.left-n.right,innerHeight:e-n.top-n.bottom}};class ej extends k.Component{constructor(t){super(t),this.handleResize=()=>{this.setState({dimensions:tj()})},this.handleXColumnChange=t=>{this.setState({xColumn:t.target.value})},this.handleYColumnChange=t=>{this.setState({yColumn:t.target.value})},this.setClickedCategory=t=>{this.setState((e=>({clickedCategory:e.clickedCategory===t?null:t})))},this.state={data:null,xColumn:"PetalLengthCm",yColumn:"PetalWidthCm",clickedCategory:null,dimensions:tj()}}componentDidMount(){window.addEventListener("resize",this.handleResize),JI("/static/data/Iris.csv",QF).then((t=>{this.setState({data:t})}))}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}render(){const t=["PetalLengthCm","PetalWidthCm","SepalLengthCm","SepalWidthCm"],{data:e,dimensions:n,xColumn:r,yColumn:i,clickedCategory:o}=this.state;if(e){const a=uC(e.map((t=>t[r]))),s=uC(e.map((t=>t[i]))),c=[...new Set(e.map((t=>t.Species)))],l=rR().domain(a).range([0,n.innerWidth]).nice(),u=rR().domain(s).range([n.innerHeight,0]).nice(),h=aN().domain(c).range(["red","steelblue","green"]),d={orient:"Bottom",scale:l,axisLabel:r,axisLabelText:r,axisLabelPositions:{axisLabelPositionX:n.innerWidth/2,axisLabelPositionY:n.innerHeight/11},innerHeight:n.innerHeight,removeTickLine:".domain",translate:"translate(0, ".concat(n.innerHeight,")")},p={orient:"Left",scale:u,axisLabel:i,axisLabelText:i,axisLabelPositions:{axisLabelPositionX:n.innerWidth/6,axisLabelPositionY:n.innerHeight/11},innerWidth:n.innerWidth,removeTickLine:".domain",translate:"translate(0, 0)"};return(0,Ln.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Ln.jsx)("div",{className:"text-center mb-2",children:(0,Ln.jsx)("p",{className:"text-base",children:"Change interactively X or Y axis using dropdown Menus. Hover on a given point to display (x, y) values. Click on any point from plot or legend to highlight all points from the same color. Click again to unselect."})}),(0,Ln.jsxs)("div",{className:"flex justify-center mb-4",children:[(0,Ln.jsxs)("div",{className:"form-control w-full max-w-xs mx-4",children:[(0,Ln.jsx)("label",{className:"label",htmlFor:"x-axis-select",children:"X"}),(0,Ln.jsx)("select",{className:"select select-bordered",id:"x-axis-select",value:r,onChange:this.handleXColumnChange,children:t.map((t=>(0,Ln.jsx)("option",{value:t,children:t},t)))})]}),(0,Ln.jsxs)("div",{className:"form-control w-full max-w-xs mx-4",children:[(0,Ln.jsx)("label",{className:"label",htmlFor:"y-axis-select",children:"Y"}),(0,Ln.jsx)("select",{className:"select select-bordered",id:"y-axis-select",value:i,onChange:this.handleYColumnChange,children:t.map((t=>(0,Ln.jsx)("option",{value:t,children:t},t)))})]})]}),(0,Ln.jsx)("div",{className:"w-full",children:e&&(0,Ln.jsx)("svg",{width:n.width,height:n.height,children:(0,Ln.jsxs)("g",{transform:"translate(".concat(n.margins.left,", ").concat(n.margins.top,")"),children:[(0,Ln.jsx)(JF,{axisProps:{xProps:d,yProps:p}}),(0,Ln.jsx)("text",{x:.25*n.width,y:-n.height/27,className:"text-2xl",fill:"currentColor",children:"Iris Flower Data Visualizer"}),(0,Ln.jsx)($F,{data:e,columns:{xColumn:r,yColumn:i,catColumn:"Species"},scales:{xScale:l,yScale:u,colorScale:h},id:"Id",innerWidth:n.innerWidth,innerHeight:n.innerHeight,setClickedCategory:this.setClickedCategory,clickedCategory:o})]})})})]})}return(0,Ln.jsxs)("div",{className:"flex items-center justify-center min-h-screen",children:[(0,Ln.jsx)("div",{className:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12"}),(0,Ln.jsx)("p",{className:"text-lg",children:"Loading..."})]})}}const nj=t=>{let{data:e,xScale:n,yScale:r,zScale:i,colorScale:o,xColumn:a,yColumn:s,zColumn:c}=t;const l=(0,k.useRef)(null);return(0,k.useEffect)((()=>{if(l.current){(t=>{for(var e=t.lastElementChild;e;)t.removeChild(e),e=t.lastElementChild})(document.getElementById("iris-3d-div"));const t=.75*window.innerWidth,u=.6*window.innerHeight,h=.1,d=.9,p=.7,f=2.5,m=.009,g=-.2,y=t=>{const e=document.createElement("canvas");e.width=64,e.height=64;const n=e.getContext("2d");return n.beginPath(),n.arc(32,32,28,0,2*Math.PI,!1),n.globalAlpha=d,n.fillStyle=t,n.fill(),n.lineWidth=p,n.strokeStyle="black",n.stroke(),e},v={},b=t=>(v[t]||(v[t]=new kx({map:new hw(y(t))})),v[t]),x=new Ax,_=new Ey(75,t/u,.1,1e3),w=new Sx({alpha:!0});w.setSize(t,u),l.current.appendChild(w.domElement);const S=new ig;x.add(S),_.position.z=f;const T=NF();T.scaleExtent([1,1]),T.translateExtent([[-1/0,-Math.PI/2/m],[1/0,u+Math.PI/2/m]]),T.on("zoom",(t=>{S.rotation.y=t.transform.x*m,S.rotation.x=t.transform.y*m}));const E=fF(w.domElement).call(T);T.translateBy(E,0,0);const A=()=>{requestAnimationFrame(A),T.translateBy(E,g,0),w.render(x,_)};A();const M=t=>{let{x:e,y:n,z:r,color:i}=t;const o=new Wx(b(i));o.position.x=e,o.position.y=n,o.position.z=r,o.scale.set(h,h,1),S.add(o)};e.map((t=>({x:n(t[a]),y:r(t[s]),z:i(t[c]),color:o(t.Species)}))).forEach(M)}}),[e,n,r,i,o,a,s,c]),(0,Ln.jsx)("div",{ref:l,id:"iris-3d-div",className:"iris-3d-div"})},rj=()=>{const[t,e]=(0,k.useState)(null),[n,r]=(0,k.useState)("PetalLengthCm"),[i,o]=(0,k.useState)("PetalWidthCm"),[a,s]=(0,k.useState)("SepalLengthCm"),[c,l]=(0,k.useState)(null),[u,h]=(0,k.useState)(null),[d,p]=(0,k.useState)(null),[f,m]=(0,k.useState)(null);(0,k.useEffect)((()=>{JI("/static/data/Iris.csv",QF).then((t=>{const r=uC(t.map((t=>t[n]))),o=uC(t.map((t=>t[i]))),s=uC(t.map((t=>t[a]))),c=[...new Set(t.map((t=>t.Species)))],u=rR().domain(r).range([-1,1]),d=rR().domain(o).range([-1,1]),f=rR().domain(s).range([-1,1]),g=aN().domain(c).range(["red","steelblue","green"]);e((e=>t)),l((t=>u)),h((t=>d)),p((t=>f)),m((t=>g))}))}),[n,i,a]),(0,k.useEffect)((()=>{f&&g(f)}),[f]);const g=t=>{if(!t)return;const e=t.domain().length,n=fF(".legend-group-3d").selectAll("rect").data([null]);n.enter().append("rect").merge(n).attr("x",-60).attr("y",-60).attr("rx",10).attr("width",135).attr("height",30*e+21).attr("fill","black").attr("opacity",.1).attr("transform","translate(60, ".concat(70,")"));let r=fF(".legend-group-3d").selectAll(".circle-tick-3d").data(t.domain());r.exit().remove();let i=r.enter().append("g").attr("class","circle-tick-3d").attr("transform",((t,e)=>"translate(12, ".concat(30*e+50-17,")")));r=r.merge(i),i.append("circle").attr("r",10).attr("fill",t).attr("opacity",.8),i.append("text").attr("class","text-legend text-sm").attr("fill","currentColor").text((t=>t)).attr("dy","0.32em").attr("x",20)},y=(0,k.useCallback)((t=>{r(t.target.value)}),[]),v=(0,k.useCallback)((t=>{o(t.target.value)}),[]),b=(0,k.useCallback)((t=>{s(t.target.value)}),[]),x=["PetalLengthCm","PetalWidthCm","SepalLengthCm","SepalWidthCm"];return(0,Ln.jsxs)("div",{className:"container mx-auto p-4",children:[(0,Ln.jsxs)("div",{className:"flex flex-wrap justify-around mb-4",children:[(0,Ln.jsxs)("div",{className:"form-control w-56",children:[(0,Ln.jsx)("label",{className:"label",children:(0,Ln.jsx)("span",{className:"label-text",children:"X"})}),(0,Ln.jsx)("select",{className:"select select-bordered",value:n,onChange:y,children:x.map((t=>(0,Ln.jsx)("option",{value:t,children:t},t)))})]}),(0,Ln.jsxs)("div",{className:"form-control w-56",children:[(0,Ln.jsx)("label",{className:"label",children:(0,Ln.jsx)("span",{className:"label-text",children:"Y"})}),(0,Ln.jsx)("select",{className:"select select-bordered",value:i,onChange:v,children:x.map((t=>(0,Ln.jsx)("option",{value:t,children:t},t)))})]}),(0,Ln.jsxs)("div",{className:"form-control w-56",children:[(0,Ln.jsx)("label",{className:"label",children:(0,Ln.jsx)("span",{className:"label-text",children:"Z"})}),(0,Ln.jsx)("select",{className:"select select-bordered",value:a,onChange:b,children:x.map((t=>(0,Ln.jsx)("option",{value:t,children:t},t)))})]})]}),(0,Ln.jsxs)("div",{className:"flex",children:[(0,Ln.jsx)("div",{className:"w-3/4",children:t&&(0,Ln.jsx)(nj,{data:t,xScale:c,yScale:u,zScale:d,colorScale:f,xColumn:n,yColumn:i,zColumn:a})}),(0,Ln.jsx)("div",{className:"w-1/4",children:(0,Ln.jsx)("svg",{height:150,width:300,children:(0,Ln.jsx)("g",{className:"legend-group-3d"})})})]})]})},ij=__webpack_require__(2388);function oj(t){return new Promise((e=>setTimeout(e,t)))}function aj(){const[t,e]=(0,k.useState)(null),[n,r]=(0,k.useState)(null),[i,o]=(0,k.useState)(!1),[a,s]=(0,k.useState)(null),[c,l]=(0,k.useState)(null),[u,h]=(0,k.useState)(10),[d,p]=(0,k.useState)(10),f={epsilon:p,perplexity:h},m=(0,k.useRef)(null),g=(0,k.useRef)(i);(0,k.useEffect)((()=>{g.current=i}),[i]);const y=()=>{const t=.65*window.innerWidth,e=.6*window.innerHeight,n={left:70,right:150,top:50,bottom:50};return{width:t,height:e,margins:n,innerWidth:t-n.left-n.right,innerHeight:e-n.top-n.bottom}},v=(t,e)=>{const n=a;n[t]=e,o(!1),s(n),f[t](e)},b=t=>{const e=y(),n=uC(t.map((t=>t[0]))),r=uC(t.map((t=>t[1])));return{xScale:rR().domain(n).range([5,e.innerWidth-5]),yScale:rR().domain(r).range([e.innerHeight-5,5])}};(0,k.useEffect)((()=>{const t=y();JI("/static/data/Iris.csv",QF).then((n=>{const i=n.map((t=>({id:t.Id,x:Math.random(),y:Math.random(),Species:t.Species}))),o=[...new Set(i.map((t=>t.Species)))],a=aN().domain(o).range(["red","steelblue","green"]),c=new ij.tSNE({epsilon:10,perplexity:10,dim:2});c.initDataRaw(n.map((t=>[t.PetalLengthCm,t.PetalWidthCm,t.SepalLengthCm,t.SepalWidthCm])));var u=fF(m.current).select(".iris-tsne-plot-container").selectAll(".circle-tsne-group").data(i,(t=>t.id));u.exit().remove();var h=u.enter().append("g").attr("class","circle-tsne-group");u=u.merge(h),h.append("circle").attr("class","circle-tsne-point").attr("cx",t.innerWidth/2).attr("cy",t.innerHeight/2).attr("r",0);const d=c.getSolution(),{xScale:p,yScale:f}=b(d);u.select(".circle-tsne-point").transition().duration(1e3).delay(((t,e)=>10*e)).attr("cx",((t,e)=>p(d[e][0]))).attr("cy",((t,e)=>f(d[e][1]))).attr("r",10).attr("fill",(t=>a(t.Species))).attr("fill-opacity",.8),e(n),r((()=>a)),s(c),l(u)}))}),[]),(0,k.useEffect)((()=>{x()}),[i,a,c,n]);const x=async()=>{for(;g.current;){a.step();const t=a.getSolution(),{xScale:e,yScale:r}=b(t);c.select(".circle-tsne-point").transition().duration(1e3).delay(((t,e)=>10*e)).attr("cx",((n,r)=>e(t[r][0]))).attr("cy",((e,n)=>r(t[n][1]))).attr("r",10).attr("fill",(t=>n(t.Species))).attr("fill-opacity",.8),await oj(1020)}},_=y();return(0,Ln.jsxs)("div",{className:"container mx-auto p-4",children:[(0,Ln.jsxs)("div",{className:"text-center mb-8",children:[(0,Ln.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Interactive t-SNE Visualization"}),(0,Ln.jsx)("p",{className:"text-lg",children:"This program runs interactively t-SNE to reduce iris 4-dimensional data to 2 dimensions."})]}),(0,Ln.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,Ln.jsxs)("div",{className:"w-full md:w-1/3 mb-8 md:mb-0",children:[(0,Ln.jsxs)("div",{className:"flex justify-center space-x-4 mb-8",children:[(0,Ln.jsx)("button",{className:"btn mr-20 w-20 ".concat(i?"":"btn-success"),onClick:()=>{o((t=>!t))},children:i?"Pause":"Play"}),(0,Ln.jsx)("button",{className:"btn w-20 btn-secondary",onClick:()=>{const e=new ij.tSNE({epsilon:10,perplexity:10,dim:2});e.initDataRaw(t.map((t=>[t.PetalLengthCm,t.PetalWidthCm,t.SepalLengthCm,t.SepalWidthCm])));const r=e.getSolution(),{xScale:i,yScale:a}=b(r);c.select(".circle-tsne-point").transition().duration(1e3).delay(((t,e)=>10*e)).attr("cx",((t,e)=>i(r[e][0]))).attr("cy",((t,e)=>a(r[e][1]))).attr("r",10).attr("fill",(t=>n(t.Species))).attr("fill-opacity",.8),o(!1),h(10),p(10),s(e)},children:"Reset"})]}),(0,Ln.jsxs)("div",{className:"mb-8",children:[(0,Ln.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Learning Rate"}),(0,Ln.jsx)("input",{type:"range",min:"1",max:"20",value:d,className:"range h-3",step:"1",onChange:t=>v("epsilon",parseInt(t.target.value))})]}),(0,Ln.jsxs)("div",{children:[(0,Ln.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Perplexity"}),(0,Ln.jsx)("input",{type:"range",min:"5",max:"100",value:u,className:"range h-3",step:"5",onChange:t=>v("perplexity",parseInt(t.target.value))})]})]}),(0,Ln.jsx)("div",{className:"w-full md:w-2/3",children:(0,Ln.jsx)("svg",{ref:m,width:_.width,height:_.height,children:(0,Ln.jsx)("g",{className:"iris-tsne-plot-container"})})})]})]})}const sj=t=>{let{children:e,value:n,index:r}=t;return(0,Ln.jsx)("div",{role:"tabpanel",hidden:n!==r,id:"scrollable-auto-tabpanel-".concat(r),"aria-labelledby":"scrollable-auto-tab-".concat(r),children:n===r&&(0,Ln.jsx)("div",{className:"p-3",children:e})})},cj=t=>{let{navBarHeight:e}=t;const[n,r]=(0,k.useState)(0),i=t=>{r(t)};return(0,Ln.jsxs)("div",{className:"w-full h-full bg-gray-800",style:{paddingTop:e},children:[(0,Ln.jsx)("div",{className:"w-full",children:(0,Ln.jsxs)("nav",{className:"flex justify-center",children:[(0,Ln.jsx)("button",{className:"px-4 py-2 focus:outline-none ".concat(0===n?"border-b":"border-b border-slate-500"),onClick:()=>i(0),children:"Iris 2D Interactive"}),(0,Ln.jsx)("button",{className:"px-4 py-2 focus:outline-none ".concat(1===n?"border-b":"border-b border-slate-500"),onClick:()=>i(1),children:"Iris 3D plot"}),(0,Ln.jsx)("button",{className:"px-4 py-2 focus:outline-none ".concat(2===n?"border-b":"border-b border-slate-500"),onClick:()=>i(2),children:"IRIS t-SNE visualization"})]})}),(0,Ln.jsxs)("div",{className:"p-4",children:[(0,Ln.jsx)(sj,{value:n,index:0,children:(0,Ln.jsx)(ej,{})}),(0,Ln.jsx)(sj,{value:n,index:1,children:(0,Ln.jsx)(rj,{})}),(0,Ln.jsx)(sj,{value:n,index:2,children:(0,Ln.jsx)(aj,{})})]})]})};var lj=__webpack_require__(1020),uj=__webpack_require__(516),hj=__webpack_require__.n(uj),dj=__webpack_require__(6676),pj=__webpack_require__.n(dj);const fj=t=>{const n=(0,k.useRef)(null);(0,k.useEffect)((()=>{r()}));const r=()=>{const r=t.orient,i=t.scale,o=t.axisLabel,a=t.axisLabelText;if(!["Left","Bottom"].includes(r))throw new Error("axisType must be 'Left' or 'Bottom'");const s="axis".concat(r),c=e[s]().scale(i).tickPadding([12]).ticks([5]);"Bottom"===r&&mF(".tick text").each((function(t,e){fF(this).style("font-size","2em")}));const l=fF(n.current).call(c);if(o){let{axisLabelPositionX:e,axisLabelPositionY:n}=t.axisLabelPositions;e="Left"===r?-e:e,n="Left"===r?-n:n,l.append("text").attr("class","yaxis-label-".concat(o));let i=mF("text.yaxis-label-".concat(o)).data([null]);const s="Left"===r?"rotate(-90)":"rotate(0)";if(i.enter().merge(i).attr("y",n).attr("x",e).attr("fill","black").text(a).attr("transform",s),"Bottom"===r){const e=t.innerHeight;l.selectAll("g.tick line").attr("y2",-e)}else{const e=t.innerWidth;l.selectAll("g.tick line").attr("x2",e)}}"Bottom"===r&&l.selectAll(".tick line").remove()},i=t.translate;return(0,Ln.jsx)("g",{transform:i,ref:n})},mj=t=>{let{axisProps:e}=t;const{xProps:n,yProps:r}=e;return(0,Ln.jsxs)("g",{children:[(0,Ln.jsx)(fj,{...n}),(0,Ln.jsx)(fj,{...r})]})},gj=t=>{let{data:e,columns:n,scales:r,id:i}=t;const o=(0,k.useRef)(null),{xColumn:a,yColumn:s}=n,{xScale:c,yScale:l}=r;return(0,k.useEffect)((()=>{const t=fF(o.current).selectAll("rect").data(e);t.enter().append("rect").attr("class","rect-prob-class color-").attr("y",(t=>l(t[s]))).attr("height",l.bandwidth()).attr("width",0).attr("key",(t=>t[i])).style("fill","currentColor").merge(t).transition().duration(1e3).delay(((t,e)=>10*e)).attr("y",(t=>l(t[s]))).attr("height",l.bandwidth()).attr("width",(t=>c(t[a]))).attr("key",(t=>t[i])).style("fill","currentColor")})),(0,Ln.jsx)("g",{ref:o})},yj=t=>{const e=t.data,{xColumn:n,yColumn:r}=t.columns,{width:i,height:o}=t.dimensions,a=t.title,s={width:i-t.dimensions.marginLeft-t.dimensions.marginRight,height:o-t.dimensions.marginTop-t.dimensions.marginBottom},c=rR().domain([0,hC(e,(t=>t[n]))]).range([0,s.width]),l=sN().domain(e.map((t=>t[r]))).range([0,s.height]).padding(.1),u={orient:"Bottom",scale:c,axisLabel:n,axisLabelPositions:{axisLabelPositionX:i/2,axisLabelPositionY:60},innerHeight:s.height,axisLabelText:"Number of ".concat(n),translate:"translate(".concat(0,",",o,")")},h={orient:"Left",scale:l,translate:"translate(".concat(0,",",0,")")};return(0,Ln.jsx)("svg",{width:i,height:o,children:(0,Ln.jsxs)("g",{transform:"translate(".concat(30,", ",50,")"),children:[(0,Ln.jsx)(mj,{axisProps:{xProps:u,yProps:h}}),(0,Ln.jsx)("text",{x:s.width/2-70,y:-20,className:"text-xl",fill:"currentColor",children:a}),(0,Ln.jsx)(gj,{data:e,columns:t.columns,scales:{xScale:c,yScale:l},id:t.id})]})})};var vj=new lj.InferenceSession({backendHint:"webgl"});const bj=t=>{const e=t.map((t=>Math.exp(t))).reduce(((t,e)=>t+e));return t.map((t=>Math.exp(t)/e))},xj=()=>{const t=(0,k.useRef)(null),e=(0,k.useRef)(null),n=(0,k.useRef)(null),[r,i]=(0,k.useState)(!1),o=Array.from({length:10},((t,e)=>({pred:.1,category:e.toString(),key:e}))),[a,s]=(0,k.useState)(o);(0,k.useEffect)((()=>{const e=340-20-20,r=340-20-20,i=t.current;i.width=3*e,i.height=3*r,i.style.width="".concat(e,"px"),i.style.height="".concat(r,"px");const o=i.getContext("2d");return o.scale(3,3),o.lineCap="round",o.strokeStyle="black",o.lineWidth=20,n.current=o,(async()=>{await vj.loadModel("/static/models/mnist.onnx")})(),()=>{vj=new lj.InferenceSession({backendHint:"webgl"})}}),[]);return(0,Ln.jsxs)("div",{className:"flex flex-col items-center p-4 space-y-8",children:[(0,Ln.jsx)("div",{className:"text-center mb-4",children:(0,Ln.jsx)("h2",{className:"text-lg font-semibold",children:"Digit Recognition: Draw a digit (from 0 to 9) and an embedded AI model will predict the drawn digit"})}),(0,Ln.jsxs)("div",{className:"flex justify-center space-x-8",children:[(0,Ln.jsxs)("div",{className:"flex flex-col items-center  mx-36 mt-10",children:[(0,Ln.jsx)("canvas",{id:"input-img-canvas",className:"border border-gray-300 rounded-lg",onMouseDown:t=>{let{nativeEvent:e}=t;const{offsetX:r,offsetY:o}=e;n.current.beginPath(),n.current.moveTo(r,o),i(!0)},onMouseUp:()=>{n.current.closePath(),i(!1),(async()=>{const t=e.current.getContext("2d");t.clearRect(0,0,n.current.canvas.width,n.current.canvas.height),t.drawImage(document.getElementById("input-img-canvas"),0,0,n.current.canvas.width,n.current.canvas.height,0,0,28,28);const r=t.getImageData(0,0,t.canvas.width,t.canvas.height),{data:i,width:o,height:a}=r,c=hj()(new Float32Array(i),[o,a,4]),l=hj()(new Float32Array(o*a*1),[1,1,o,a]);pj().assign(l.pick(0,0,null,null),c.pick(null,null,3)),pj().divseq(l,255),pj().subseq(l,.1307),pj().divseq(l,.3081);const u=[new lj.Tensor(l.data,"float32",[1,1,o,a])],h=(await vj.run(u)).values().next().value,d=[...bj(h.data)].map(((t,e)=>({pred:t,category:e.toString(),key:e})));s(d)})()},onMouseMove:t=>{let{nativeEvent:e}=t;if(!r)return;const{offsetX:i,offsetY:o}=e;n.current.lineTo(i,o),n.current.stroke()},ref:t}),(0,Ln.jsx)("canvas",{height:"28",width:"28",style:{display:"none"},ref:e}),(0,Ln.jsx)("div",{className:"flex justify-center mt-6",children:(0,Ln.jsx)("button",{className:"btn",onClick:()=>{n.current&&n.current.clearRect(0,0,n.current.canvas.width,n.current.canvas.height),s(o)},children:"Clear Drawing"})})]}),(0,Ln.jsx)("div",{className:"flex flex-col items-center",children:(0,Ln.jsx)(yj,{data:a,columns:{xColumn:"pred",yColumn:"category"},dimensions:{width:500,height:400,marginBottom:20,marginTop:20,marginRight:20,marginLeft:20},title:"Predicted Digit",id:"key"})})]})]})};var _j=__webpack_require__(7029),wj=__webpack_require__.n(_j),Sj=__webpack_require__(7087);class Tj{constructor(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,e){this.dataIdsCount++,this.data.set(t,e)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class Ej{refCount(t){return Aj("refCount")}incRef(t){return Aj("incRef")}timerAvailable(){return!0}time(t){return Aj("time")}read(t){return Aj("read")}readSync(t){return Aj("readSync")}readToGPU(t,e){return Aj("readToGPU")}numDataIds(){return Aj("numDataIds")}disposeData(t,e){return Aj("disposeData")}write(t,e,n){return Aj("write")}move(t,e,n,r,i){return Aj("move")}createTensorFromGPUData(t,e,n){return Aj("createTensorFromGPUData")}memory(){return Aj("memory")}floatPrecision(){return Aj("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return Aj("dispose")}}function Aj(t){throw new Error("'".concat(t,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function Mj(t,e,n){return Math.max(t,Math.min(e,n))}function Oj(t){return t%2===0?t:t+1}function Cj(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function kj(t,e){if(!t)throw new Error("string"===typeof e?e:e())}function Pj(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";kj(Rj(t,e),(()=>n+" Shapes ".concat(t," and ").concat(e," must match")))}function Ij(t){kj(null!=t,(()=>"The input to the tensor constructor must be a non-null value."))}function Nj(t){if(0===t.length)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Rj(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Dj(t){return t%1===0}function Lj(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Fj(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function jj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t=>0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise(((i,o)=>{let a=0;const s=()=>{if(t())return void i();a++;const c=e(a);null!=n&&a>=n?o():null!=r?r(s,c):setTimeout(s,c)};s()}))}function Uj(t,e){const n=e.length;return t=null==t?e.map(((t,e)=>e)):[].concat(t),kj(t.every((t=>t>=-n&&t<n)),(()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(t))),kj(t.every((t=>Dj(t))),(()=>"All values in axis param must be integers but "+"got axis ".concat(t))),t.map((t=>t<0?n+t:t))}function Bj(t,e){const n=[],r=[],i=null!=e&&Array.isArray(e)&&0===e.length,o=null==e||i?null:Uj(e,t).sort();let a=0;for(let s=0;s<t.length;++s){if(null!=o){if(o[a]===s&&1!==t[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(t[s],"' is not 1"));(null==o[a]||o[a]>s)&&1===t[s]&&(n.push(t[s]),r.push(s)),o[a]<=s&&a++}1!==t[s]&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function zj(t,e){return Vj(t,e)}function Vj(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else{if("string"!==t)throw new Error("Unknown data type ".concat(t));n=new Array(e)}return n}function Gj(t,e){return"complex64"!==e&&(("float32"!==e||"complex64"===t)&&(("int32"!==e||"float32"===t||"complex64"===t)&&("bool"!==e||"bool"!==t)))}function Wj(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error("Unknown dtype ".concat(t))}function Hj(t){return"string"===typeof t||t instanceof String}function qj(t){return Array.isArray(t)?qj(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":function(t){return"number"===typeof t}(t)?"float32":Hj(t)?"string":function(t){return"boolean"===typeof t}(t)?"bool":"float32"}function Xj(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Yj(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Kj(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function Zj(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Array;if(1===e.length){const o=e[0]*(r?2:1);for(let e=0;e<o;e++)i[e]=n[t+e]}else{const o=e[0],a=e.slice(1),s=a.reduce(((t,e)=>t*e))*(r?2:1);for(let e=0;e<o;e++)i[e]=Zj(t+e*s,a,n,r)}return i}function Jj(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===t.length)return e[0];const r=t.reduce(((t,e)=>t*e))*(n?2:1);if(0===r)return[];if(r!==e.length)throw new Error("[".concat(t,"] does not match the input size ").concat(e.length).concat(n?" for a complex tensor":"","."));return Zj(0,t,e,n)}function $j(t,e){const n=Qj(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Qj(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type ".concat(e))}function tU(t){t.forEach((e=>{kj(Number.isInteger(e)&&e>=0,(()=>"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(t,"].")))}))}function eU(t,e,n){if(0===e)return 0;if(1===e)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function nU(t,e,n){if(0===e)return[];if(1===e)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}function rU(t){return t&&t.then&&"function"===typeof t.then}const iU="tfjsflags";class oU{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=aU,this.populateURLFlags()}setPlatform(t,e){null!=this.platform&&(sU().getBool("IS_TEST")||sU().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(t,"."))),this.platformName=t,this.platform=e}registerFlag(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){const e=this.urlFlags[t];sU().getBool("IS_TEST")||sU().getBool("PROD")||console.warn("Setting feature override from URL ".concat(t,": ").concat(e,".")),this.set(t,e)}}async getAsync(t){return t in this.flags||(this.flags[t]=await this.evaluateFlag(t)),this.flags[t]}get(t){if(t in this.flags)return this.flags[t];const e=this.evaluateFlag(t);if(rU(e))throw new Error("Flag ".concat(t," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[t]=e,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(null==this.flagRegistry[t])throw new Error("Cannot set flag ".concat(t," as it has not been registered."));this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(null==this.flagRegistry[t])throw new Error("Cannot evaluate flag '".concat(t,"': no evaluation function found."));return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const t=this.getQueryParams(this.global.location.search);if(iU in t){t[iU].split(",").forEach((t=>{const[e,n]=t.split(":");this.urlFlags[e]=function(t,e){const n=e.toLowerCase();return"true"===n||"false"===n?"true"===n:"".concat(+n)===n?+n:e}(0,n)}))}}}function aU(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return function(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}(e,r[0],r[1]),r.join("=")})),e}function sU(){return lU}let cU,lU=null;function uU(){if(null==cU){let t;if("undefined"!==typeof window)t=window;else if("undefined"!==typeof __webpack_require__.g)t=__webpack_require__.g;else if("undefined"!==typeof process)t=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");t=self}cU=t}return cU}function hU(t,e){const n=function(){const t=uU();return null==t._tfGlobals&&(t._tfGlobals=new Map),t._tfGlobals}();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const dU="Abs",pU="Acos",fU="Acosh",mU="Add",gU="AddN",yU="ArgMax",vU="ArgMin",bU="Asin",xU="Asinh",_U="Atan",wU="Atanh",SU="Atan2",TU="AvgPool",EU="AvgPool3D",AU="BatchMatMul",MU="BatchToSpaceND",OU="Bincount",CU="BitwiseAnd",kU="BroadcastArgs",PU="Cast",IU="Ceil",NU="ClipByValue",RU="Complex",DU="ComplexAbs",LU="Concat",FU="Conv2D",jU="Conv2DBackpropFilter",UU="Conv2DBackpropInput",BU="Conv3D",zU="Conv3DBackpropInputV2",VU="Cosh",GU="Cumprod",WU="Cumsum",HU="CropAndResize",qU="DenseBincount",XU="DepthToSpace",YU="DepthwiseConv2dNative",KU="DepthwiseConv2dNativeBackpropFilter",ZU="DepthwiseConv2dNativeBackpropInput",JU="Diag",$U="Dilation2D",QU="Draw",tB="RealDiv",eB="Einsum",nB="Equal",rB="Exp",iB="ExpandDims",oB="Expm1",aB="Fill",sB="FlipLeftRight",cB="Floor",lB="FloorDiv",uB="FusedBatchNorm",hB="GatherV2",dB="GatherNd",pB="Greater",fB="GreaterEqual",mB="Identity",gB="IFFT",yB="Imag",vB="IsFinite",bB="IsInf",xB="IsNan",_B="LeakyRelu",wB="Less",SB="LessEqual",TB="LinSpace",EB="Log",AB="Log1p",MB="LogicalAnd",OB="LogicalNot",CB="LogicalOr",kB="Maximum",PB="MaxPool",IB="MaxPool3D",NB="MaxPoolWithArgmax",RB="Mean",DB="Minimum",LB="MirrorPad",FB="Multinomial",jB="Multiply",UB="Neg",BB="NotEqual",zB="NonMaxSuppressionV3",VB="NonMaxSuppressionV4",GB="NonMaxSuppressionV5",WB="OnesLike",HB="OneHot",qB="Pack",XB="PadV2",YB="Prelu",KB="Prod",ZB="RaggedGather",JB="RaggedRange",$B="RaggedTensorToTensor",QB="Range",tz="Real",ez="Reciprocal",nz="Relu",rz="Reshape",iz="ResizeNearestNeighbor",oz="ResizeBilinear",az="Relu6",sz="Reverse",cz="Round",lz="Rsqrt",uz="ScatterNd",hz="TensorScatterUpdate",dz="SearchSorted",pz="Select",fz="Selu",mz="Slice",gz="Sinh",yz="Sign",vz="Sigmoid",bz="Softplus",xz="Sqrt",_z="SpaceToBatchND",wz="SplitV",Sz="Softmax",Tz="SparseFillEmptyRows",Ez="SparseReshape",Az="SparseSegmentMean",Mz="SparseSegmentSum",Oz="SparseToDense",Cz="SquaredDifference",kz="StaticRegexReplace",Pz="StridedSlice",Iz="StringNGrams",Nz="StringSplit",Rz="StringToHashBucketFast",Dz="Sub",Lz="Tanh",Fz="Tile",jz="TopK",Uz="Transform",Bz="Transpose",zz="Unique",Vz="Unpack",Gz="UnsortedSegmentSum",Wz="ZerosLike",Hz="Step",qz="FromPixels",Xz="RotateWithOffset",Yz="_FusedMatMul",Kz="FusedConv2D",Zz="FusedDepthwiseConv2D";function Jz(){sU().getBool("IS_TEST")||sU().getBool("PROD")||console.warn(...arguments)}function $z(){sU().getBool("IS_TEST")||sU().getBool("PROD")||console.log(...arguments)}const Qz=hU("kernelRegistry",(()=>new Map)),tV=hU("gradRegistry",(()=>new Map));function eV(t,e){const n=oV(t,e);return Qz.get(n)}function nV(t){return tV.get(t)}function rV(t){const e=Qz.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[o,a]=i,[s]=o.split("_");s===t&&n.push(a)}return n}function iV(t){const{kernelName:e,backendName:n}=t,r=oV(e,n);Qz.has(r)&&Jz("The kernel '".concat(e,"' for backend ")+"'".concat(n,"' is already registered")),Qz.set(r,t)}function oV(t,e){return"".concat(e,"_").concat(t)}function aV(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var sV=__webpack_require__(7353);const cV=__webpack_require__.n(sV)()||sV;function lV(t){return cV.fromString(t,!0,16)}const uV=lV("c3a5c85c97cb3127"),hV=lV("b492b66fbe98f273"),dV=lV("9ae16a3b2f90404f");function pV(t){return t.xor(t.shru(47))}function fV(t,e,n){const r=t.slice(e,e+n);return cV.fromBytes(Array.from(r),!0,!0)}function mV(t,e){return fV(t,e,8)}function gV(t,e){return fV(t,e,4)}function yV(t,e){return 0===e?t:t.shru(e).or(t.shl(64-e))}function vV(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lV("9ddfea08eb382d69"),r=t.xor(e).mul(n);r=r.xor(r.shru(47));let i=e.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function bV(t,e,n,r){return function(t,e,n,r,i,o){i=i.add(t),o=yV(o.add(i).add(r),21);const a=i;return i=(i=i.add(e)).add(n),o=o.add(yV(i,44)),[i.add(r),o.add(a)]}(mV(t,e),mV(t,e+8),mV(t,e+16),mV(t,e+24),n,r)}function xV(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length;const n=cV.fromNumber(81,!0);if(e<=32)return e<=16?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length;if(e>=8){const n=dV.add(2*e),r=mV(t,0).add(dV),i=mV(t,e-8);return vV(yV(i,37).mul(n).add(r),yV(r,25).add(i).mul(n),n)}if(e>=4){const n=dV.add(2*e);return vV(gV(t,0).shl(3).add(e),gV(t,e-4),n)}if(e>0){const n=t[0]+(t[e>>1]<<8),r=e+(t[e-1]<<2);return pV(dV.mul(n).xor(uV.mul(r))).mul(dV)}return dV}(t,e):function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length;const n=dV.add(2*e),r=mV(t,0).mul(hV),i=mV(t,8),o=mV(t,e-8).mul(n),a=mV(t,e-16).mul(dV);return vV(yV(r.add(i),43).add(yV(o,30)).add(a),r.add(yV(i.add(dV),18)).add(o),n)}(t,e);if(e<=64)return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length;const n=dV.add(2*e),r=mV(t,0).mul(dV),i=mV(t,8),o=mV(t,e-8).mul(n),a=mV(t,e-16).mul(dV),s=yV(r.add(i),43).add(yV(o,30)).add(a),c=vV(s,r.add(yV(i.add(dV),18)).add(o),n),l=mV(t,16).mul(n),u=mV(t,24),h=s.add(mV(t,e-32)).mul(n),d=c.add(mV(t,e-24)).mul(n);return vV(yV(l.add(u),43).add(yV(h,30)).add(d),l.add(yV(u.add(r),18)).add(h),n)}(t,e);let r=n,i=n.mul(hV).add(113),o=pV(i.mul(dV).add(113)).mul(dV),a=[cV.UZERO,cV.UZERO],s=[cV.UZERO,cV.UZERO];r=r.mul(dV).add(mV(t,0));let c=0;const l=64*(e-1>>6),u=l+(e-1&63)-63;do{r=yV(r.add(i).add(a[0]).add(mV(t,c+8)),37).mul(hV),i=yV(i.add(a[1]).add(mV(t,c+48)),42).mul(hV),r=r.xor(s[1]),i=i.add(a[0]).add(mV(t,c+40)),o=yV(o.add(s[0]),33).mul(hV),a=bV(t,c,a[1].mul(hV),r.add(s[0])),s=bV(t,c+32,o.add(s[1]),i.add(mV(t,c+16))),[o,r]=[r,o],c+=64}while(c!==l);const h=hV.add(o.and(255).shl(1));return c=u,s[0]=s[0].add(e-1&63),a[0]=a[0].add(s[0]),s[0]=s[0].add(a[0]),r=yV(r.add(i).add(a[0]).add(mV(t,c+8)),37).mul(h),i=yV(i.add(a[1]).add(mV(t,c+48)),42).mul(h),r=r.xor(s[1].mul(9)),i=i.add(a[0].mul(9).add(mV(t,c+40))),o=yV(o.add(s[0]),33).mul(h),a=bV(t,c,a[1].mul(h),r.add(s[0])),s=bV(t,c+32,o.add(s[1]),i.add(mV(t,c+16))),[o,r]=[r,o],vV(vV(a[0],s[0],h).add(pV(i).mul(uV)).add(o),vV(a[1],s[1],h).add(r),h)}function _V(t,e){return"string"===e?TV(t):wV([t],e)}function wV(t,e){if("string"===e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=MV(t)),sU().getBool("DEBUG")&&function(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(e," being uploaded contains ").concat(r,"."))}}(t,e),function(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e))return t;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){const e=new Uint8Array(t.length);for(let n=0;n<e.length;++n)0!==Math.round(t[n])&&(e[n]=1);return e}throw new Error("Unknown data type ".concat(e))}function SV(){return sU().platform.now()}function TV(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return e=e||"utf-8",sU().platform.encode(t,e)}function EV(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return e=e||"utf-8",sU().platform.decode(t,e)}function AV(t){return null!=sU().platform.isTypedArray?sU().platform.isTypedArray(t):aV(t)}function MV(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e&&(e=[]),"boolean"===typeof t||"number"===typeof t||"string"===typeof t||rU(t)||null==t||AV(t)&&n)e.push(t);else if(Array.isArray(t)||AV(t))for(let r=0;r<t.length;++r)MV(t[r],e,n);else{let r=-1;for(const e of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(e)&&(r=Math.max(r,Number(e)));for(let i=0;i<=r;i++)MV(t[i],e,n)}return e}class OV{constructor(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new kV)}profileKernel(t,e,n){let r;const i=()=>{r=n()};let o;const a=SV();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const t of r)t.dataSync();o=Promise.resolve({kernelMs:SV()-a})}if(sU().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let s=0;s<r.length;s++){const e=r[s];e.data().then((n=>{CV(n,e.dtype,t)}))}return{kernelName:t,outputs:r,inputs:e,timeMs:o.then((t=>t.kernelMs)),extraInfo:o.then((t=>null!=t.getExtraProfileInfo?t.getExtraProfileInfo():""))}}logKernelProfile(t){const{kernelName:e,outputs:n,timeMs:r,inputs:i,extraInfo:o}=t;n.forEach((t=>{Promise.all([t.data(),r,o]).then((n=>{this.logger.logKernelProfile(e,t,n[0],n[1],i,n[2])}))}))}}function CV(t,e,n){if("float32"!==e)return!1;for(let r=0;r<t.length;r++){const e=t[r];if(isNaN(e)||!isFinite(e))return console.warn("Found ".concat(e," in the result of '").concat(n,"'")),!0}return!1}class kV{logKernelProfile(t,e,n,r,i,o){const a="number"===typeof r?Fj("".concat(r,"ms"),9):r.error,s=Fj(t,25),c=e.rank,l=e.size,u=Fj(e.shape.toString(),14);let h="";for(const d in i){const t=i[d];if(null!=t){const n=t.shape||e.shape,r=n.length;h+="".concat(d,": ").concat(r,"D ").concat(r>0?n:""," ")}}console.log("%c".concat(s,"\t%c").concat(a,"\t%c").concat(c,"D ").concat(u,"\t%c").concat(l,"\t%c").concat(h,"\t%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}const PV=20,IV=3,NV=7;function RV(t,e,n,r){const i=Kj(e),o=function(t,e,n,r){const i=Nj(e),o=r[r.length-1],a=new Array(o).fill(0),s=e.length,c="complex64"===n?jV(t):t;if(s>1)for(let l=0;l<i/o;l++){const t=l*o;for(let e=0;e<o;e++)a[e]=Math.max(a[e],DV(c[t+e],0,n).length)}return a}(t,e,n,i),a=e.length,s=FV(t,e,n,i,o),c=["Tensor"];return r&&(c.push("  dtype: ".concat(n)),c.push("  rank: ".concat(a)),c.push("  shape: [".concat(e,"]")),c.push("  values:")),c.push(s.map((t=>"    "+t)).join("\n")),c.join("\n")}function DV(t,e,n){let r;return r=Array.isArray(t)?"".concat(parseFloat(t[0].toFixed(NV))," + ")+"".concat(parseFloat(t[1].toFixed(NV)),"j"):Hj(t)?"'".concat(t,"'"):"bool"===n?LV(t):parseFloat(t.toFixed(NV)).toString(),Fj(r,e)}function LV(t){return 0===t?"false":"true"}function FV(t,e,n,r,i){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const a="complex64"===n?2:1,s=e[0],c=e.length;if(0===c){if("complex64"===n){return[DV(jV(t)[0],0,n)]}return"bool"===n?[LV(t[0])]:[t[0].toString()]}if(1===c){if(s>PV){const e=IV*a;let r=Array.from(t.slice(0,e)),o=Array.from(t.slice((s-IV)*a,s*a));return"complex64"===n&&(r=jV(r),o=jV(o)),["["+r.map(((t,e)=>DV(t,i[e],n))).join(", ")+", ..., "+o.map(((t,e)=>DV(t,i[s-IV+e],n))).join(", ")+"]"]}return["["+("complex64"===n?jV(t):Array.from(t)).map(((t,e)=>DV(t,i[e],n))).join(", ")+"]"]}const l=e.slice(1),u=r.slice(1),h=r[0]*a,d=[];if(s>PV){for(let e=0;e<IV;e++){const r=e*h,o=r+h;d.push(...FV(t.slice(r,o),l,n,u,i,!1))}d.push("...");for(let e=s-IV;e<s;e++){const r=e*h,o=r+h;d.push(...FV(t.slice(r,o),l,n,u,i,e===s-1))}}else for(let m=0;m<s;m++){const e=m*h,r=e+h;d.push(...FV(t.slice(e,r),l,n,u,i,m===s-1))}const p=2===c?",":"";d[0]="["+(s>0?d[0]+p:"");for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+p;let f=",\n";for(let m=2;m<c;m++)f+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(o?"":f),d}function jV(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}class UV{constructor(t,e,n){if(this.dtype=e,this.shape=t.slice(),this.size=Nj(t),null!=n){const t=n.length;kj(t===this.size,(()=>"Length of values '".concat(t,"' does not match the size ")+"inferred by the shape '".concat(this.size,"'.")))}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||Vj(e,this.size),this.strides=Kj(t)}set(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),kj(n.length===this.rank,(()=>"The number of provided coordinates (".concat(n.length,") must ")+"match the rank (".concat(this.rank,")")));const i=this.locToIndex(n);this.values[i]=t}get(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];0===e.length&&(e=[0]);let r=0;for(const o of e){if(o<0||o>=this.shape[r]){const t="Requested out of range element at ".concat(e,". ")+"  Buffer shape=".concat(this.shape);throw new Error(t)}r++}let i=e[e.length-1];for(let o=0;o<e.length-1;++o)i+=this.strides[o]*e[o];return this.values[i]}locToIndex(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];let e=t[t.length-1];for(let n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e}indexToLoc(t){if(0===this.rank)return[];if(1===this.rank)return[t];const e=new Array(this.shape.length);for(let n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e}get rank(){return this.shape.length}toTensor(){return BV().makeTensor(this.values,this.shape,this.dtype)}}let BV=null,zV=null,VV=null;class GV{constructor(t,e,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=Nj(t),this.strides=Kj(t),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return zV.buffer(this.shape,this.dtype,t)}bufferSync(){return zV.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return Jj(this.shape,t,"complex64"===this.dtype)}arraySync(){return Jj(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const t=BV().read(this.dataId);if("string"===this.dtype){const e=await t;try{return e.map((t=>EV(t)))}catch(KM){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),BV().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();const t=BV().readSync(this.dataId);if("string"===this.dtype)try{return t.map((t=>EV(t)))}catch(KM){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await BV().read(this.dataId);return"string"===this.dtype?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),BV().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return zV.print(this,t)}clone(){return this.throwIfDisposed(),zV.clone(this)}toString(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return RV(this.dataSync(),this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),zV.cast(this,t)}variable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),BV().makeVariable(this,t,e,n)}}function WV(){return hU("Tensor",(()=>GV))}Object.defineProperty(GV,Symbol.hasInstance,{value:t=>!!t&&null!=t.data&&null!=t.dataSync&&null!=t.throwIfDisposed}),WV();class HV extends GV{constructor(t,e,n,r){super(t.shape,t.dtype,t.dataId,r),this.trainable=e,this.name=n}assign(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(t.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!Rj(t.shape,this.shape))throw new Error("shape of the new value (".concat(t.shape,") and ")+"previous value (".concat(this.shape,") must match"));BV().disposeTensor(this),this.dataId=t.dataId,BV().incRef(this,null)}dispose(){BV().disposeVariable(this),this.isDisposedInternal=!0}}var qV,XV,YV,KV,ZV;Object.defineProperty(HV,Symbol.hasInstance,{value:t=>t instanceof GV&&null!=t.assign&&t.assign instanceof Function}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(qV||(qV={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(XV||(XV={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(YV||(YV={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(KV||(KV={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(ZV||(ZV={}));const JV={float32:KV,int32:XV,bool:YV,complex64:ZV};function $V(t,e){if("string"===t||"string"===e){if("string"===t&&"string"===e)return"string";throw new Error("Can not upcast ".concat(t," with ").concat(e))}return JV[t][e]}function QV(t){return $V(t,"int32")}function tG(t){return null!=t&&"object"===typeof t&&"texture"in t&&t.texture instanceof WebGLTexture}function eG(t){return"undefined"!==typeof GPUBuffer&&null!=t&&"object"===typeof t&&"buffer"in t&&t.buffer instanceof GPUBuffer}function nG(t,e){if(t.dtype===e.dtype)return[t,e];const n=$V(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function rG(t){const e=[];return iG(t,e,new Set),e}function iG(t,e,n){if(null==t)return;if(t instanceof GV)return void e.push(t);if(r=t,!Array.isArray(r)&&"object"!==typeof r)return;var r;const i=t;for(const o in i){const t=i[o];n.has(t)||(n.add(t),iG(t,e,n))}}function oG(t){return null!=t.kernelName}class aG{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((t=>t.name))))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class sG{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new aG}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:t,asyncInit:e}=this.initializeBackendsAndReturnBest();if(e)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;{const{asyncInit:e}=this.initializeBackend(t);if(e)return null}}return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t in this.registryFactory?(Jz("".concat(t," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:e,priority:n},!0)}async setBackend(t){if(null==this.registryFactory[t])throw new Error("Backend name '".concat(t,"' not found in registry"));if(this.backendName=t,null==this.registry[t]){this.backendInstance=null;const{success:e,asyncInit:n}=this.initializeBackend(t);if(!(n?await e:e))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new OV(this.backendInstance),!0}setupRegisteredKernels(){rV(this.backendName).forEach((t=>{null!=t.setupFunc&&t.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(t){rV(t).forEach((e=>{null!=e.disposeFunc&&e.disposeFunc(this.registry[t])}))}initializeBackend(t){const e=this.registryFactory[t];if(null==e)throw new Error("Cannot initialize backend ".concat(t,", no registration found."));try{const n=e.factory();if(!n||n instanceof Ej||"function"!==typeof n.then)return this.registry[t]=n,{success:!0,asyncInit:!1};{const e=++this.pendingBackendInitId,r=n.then((n=>!(e<this.pendingBackendInitId)&&(this.registry[t]=n,this.pendingBackendInit=null,!0))).catch((n=>(e<this.pendingBackendInitId||(this.pendingBackendInit=null,Jz("Initialization of backend ".concat(t," failed")),Jz(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return Jz("Initialization of backend ".concat(t," failed")),Jz(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error("".concat(t," backend not found in registry"));this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((t,e)=>this.registryFactory[e].priority-this.registryFactory[t].priority))}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e],{success:r,asyncInit:i}=this.initializeBackend(n);if(i||r)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,e){const n=this.state.tensorInfo.get(e),r=n.backend,i=this.readSync(e),o=r.refCount(e);r.disposeData(e,!0),n.backend=t,t.move(e,i,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,e){let n,r=null;if(null==e){if("function"!==typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!==typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=e(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(t,e,n){t();try{const t=n();return e(),t}catch(r){throw e(),r}}nextTensorId(){return sG.nextTensorId++}nextVariableId(){return sG.nextVariableId++}clone(t){const e=lG.runKernel(mB,{x:t}),n={x:t};return this.addTapeNode(this.state.activeScope.name,n,[e],(t=>({x:()=>{const e={x:t},n={dtype:"float32"};return lG.runKernel(PU,e,n)}})),[],{}),e}runKernel(t,e,n){null==this.backendName&&this.backend;if(!(null!=eV(t,this.backendName)))throw new Error("Kernel '".concat(t,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:t,inputs:e,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,e,n){const r=this.backend.numDataIds();let i=0;n.forEach((t=>{i+="complex64"===t.dtype?3:1}));const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=r-e-i-o;if(a>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(a," data ids) after running '").concat(t,"'"))}runKernelFunc(t){let e,n=[];const r=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;let a,s;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const c=oG(t)?t.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(oG(t)){const{kernelName:e,inputs:i,attrs:o}=t;null==this.backendName&&this.backend;const c=eV(e,this.backendName);kj(null!=c,(()=>"Cannot find registered kernel '".concat(e,"' for backend '").concat(this.backendName,"'"))),a=()=>{const t=this.backend.numDataIds();s=c.kernelFunc({inputs:i,attrs:o,backend:this.backend});const a=Array.isArray(s)?s:[s];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(e,t,a);const l=a.map((t=>null!=t.rank?t:this.makeTensorFromTensorInfo(t)));if(r){const t=this.getTensorsForGradient(e,i,l);n=this.saveTensorsForBackwardMode(t)}return l}}else{const{forwardFunc:e}=t,i=t=>{r&&(n=t.map((t=>this.keep(this.clone(t)))))};a=()=>{const t=this.backend.numDataIds();s=this.tidy((()=>e(this.backend,i)));const n=Array.isArray(s)?s:[s];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,t,n),n}}const{inputs:l,attrs:u}=t,h=oG(t)?null:t.backwardsFunc;let d;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(d=this.profiler.profileKernel(c,l,(()=>a())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),e=d.outputs):e=a()})),r&&this.addTapeNode(c,l,e,h,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(l).map((t=>null!=l[t]?l[t].shape:null)),outputShapes:e.map((t=>t.shape)),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(s)?e:e[0]}saveTensorsForBackwardMode(t){const e=t.map((t=>this.keep(this.clone(t))));return e}getTensorsForGradient(t,e,n){const r=nV(t);if(null!=r){const t=r.inputsToSave||[],i=r.outputsToSave||[];let o;r.saveAllInputs?(kj(Array.isArray(e),(()=>"saveAllInputs is true, expected inputs to be an array.")),o=Object.keys(e).map((t=>e[t]))):o=t.map((t=>e[t]));const a=n.filter(((t,e)=>i[e]));return o.concat(a)}return[]}makeTensor(t,e,n,r){if(null==t)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let i=t;"string"===n&&Hj(t[0])&&(i=t.map((t=>TV(t))));const o=r.write(i,e,n),a=new GV(e,n,o,this.nextTensorId());if(this.trackTensor(a,r),"string"===n){const t=this.state.tensorInfo.get(o),e=function(t){if(null==t)return 0;let e=0;return t.forEach((t=>e+=t.length)),e}(i);this.state.numBytes+=e-t.bytes,t.bytes=e}return a}makeTensorFromDataId(t,e,n,r){const i={dataId:t,shape:e,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(i,r)}makeTensorFromTensorInfo(t,e){const{dataId:n,shape:r,dtype:i}=t,o=new GV(r,i,n,this.nextTensorId());return this.trackTensor(o,e),o}makeVariable(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==t.dtype&&(t=t.cast(r));const i=new HV(t,e,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error("Variable with name ".concat(i.name," was already registered"));return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(t,e){this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(n=t.size*Wj(t.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:n})),t instanceof HV||this.track(t)}incRef(t,e){this.trackTensor(t,e),this.backend.incRef(t.dataId)}removeDataId(t,e){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===e&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const e=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,"string"===t.dtype&&(this.state.numStringTensors--,this.state.numBytes-=e.bytes),"complex64"!==t.dtype&&"string"!==t.dtype){const e=t.size*Wj(t.dtype);this.state.numBytes-=e}e.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,e.backend)}disposeVariables(){for(const t in this.state.registeredVariables){const e=this.state.registeredVariables[t];this.disposeVariable(e)}}disposeVariable(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const e=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((t=>t.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(t,e,n,r,i,o){const a={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:n,saved:i},s=nV(t);null!=s&&(r=s.gradFunc),null!=r&&(a.gradient=t=>(t=t.map(((t,e)=>{if(null==t){const t=n[e],r=Qj(t.size,t.dtype);return this.makeTensor(r,t.shape,t.dtype)}return t})),r(t.length>1?t:t[0],i,o))),this.state.activeTape.push(a)}keep(t){return t.kept=!0,t}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e}endScope(t){const e=rG(t),n=new Set(e.map((t=>t.id)));for(let i=0;i<this.state.activeScope.track.length;i++){const t=this.state.activeScope.track[i];t.kept||n.has(t.id)||t.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],e.forEach((t=>{t.kept||t.scopeId!==r.id||this.track(t)}))}gradients(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(kj(e.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));const i=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",t)));kj(i instanceof GV,(()=>"The result y returned by f() must be a tensor."));const o=function(t,e,n){const r={},i={};for(let c=0;c<e.length;c++)r[e[c].id]=!0;for(let c=0;c<t.length;c++){const n=t[c],o=n.inputs;for(const t in o){const a=o[t];let s=!1;for(let t=0;t<e.length;t++)if(r[a.id]){n.outputs.forEach((t=>r[t.id]=!0)),s=!0,i[n.id]=!0;break}if(s)break}}const o={};o[n.id]=!0;const a={};for(let c=t.length-1;c>=0;c--){const e=t[c],n=e.inputs;for(let t=0;t<e.outputs.length;t++)if(o[e.outputs[t].id]){for(const t in n)o[n[t].id]=!0,a[e.id]=!0;break}}const s=[];for(let c=0;c<t.length;c++){const e=t[c];if(i[e.id]&&a[e.id]){const t={};for(const i in e.inputs){const n=e.inputs[i];r[n.id]&&(t[i]=n)}const n=Object.assign({},e);n.inputs=t,n.outputs=e.outputs,s.push(n)}}return s}(this.state.activeTape,e,i);if(!r&&0===o.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const t={};t[i.id]=null==n?function(t){const e=$j(Nj(t),"float32");return lG.makeTensor(e,t,"float32")}(i.shape):n,function(t,e,n,r){for(let i=e.length-1;i>=0;i--){const o=e[i],a=[];if(o.outputs.forEach((e=>{const n=t[e.id];null!=n?a.push(n):a.push(null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(o.kernelName,"."));const s=o.gradient(a);for(const e in o.inputs){if(!(e in s))throw new Error("Cannot backprop through input ".concat(e,". ")+"Available gradients found: ".concat(Object.keys(s),"."));const i=n((()=>s[e]()));if("float32"!==i.dtype)throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"".concat(e," must have 'float32' dtype, but has '").concat(i.dtype,"'"));const a=o.inputs[e];if(!Rj(i.shape,a.shape))throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"'".concat(e,"' has shape '").concat(i.shape,"', which does not match ")+"the shape of the input '".concat(a.shape,"'"));if(null==t[a.id])t[a.id]=i;else{const e=t[a.id];t[a.id]=r(e,i),e.dispose()}}}}(t,o,(t=>this.tidy(t)),uG);const r=e.map((e=>t[e.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((t=>{for(const e of t.saved)e.dispose()})),this.state.activeTape=null),{value:i,grads:r}}))}customGrad(t){var e=this;return kj(Xj(t),(()=>"The f passed in customGrad(f) must be a function.")),function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];let o;kj(r.every((t=>t instanceof GV)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const a={};r.forEach(((t,e)=>{a[e]=t}));return e.runKernelFunc({forwardFunc:(e,n)=>(o=t(...r,n),kj(o.value instanceof GV,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),kj(Xj(o.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),o.value),backwardsFunc:(t,e)=>{const n=o.gradFunc(t,e),i=Array.isArray(n)?n:[n];kj(i.length===r.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),kj(i.every((t=>t instanceof GV)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const a={};return i.forEach(((t,e)=>{a[e]=()=>t})),a},inputs:a})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,e){return this.state.tensorInfo.get(t).backend.readToGPU(t,e)}async time(t){const e=SV(),n=await this.backend.time(t);return n.wallMs=SV()-e,n}track(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new aG;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function cG(){const t=uU();if(null==t._tfengine){const e=new oU(t);t._tfengine=new sG(e)}var e;return e=t._tfengine.ENV,lU=e,BV=()=>t._tfengine,t._tfengine}sG.nextTensorId=0,sG.nextVariableId=0;const lG=cG();function uG(t,e){const n={a:t,b:e};return lG.runKernel(mU,n)}let hG;function dG(t){if(void 0!==hG)return hG;if(t||"undefined"!==typeof navigator&&null!=navigator){if(t||(t=navigator),"ReactNative"===t.product)return!0;const e=t.userAgent||t.vendor||("undefined"!==typeof window?window.opera:"");if(!e){const e=t;return e.userAgentData&&e.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function pG(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}const fG=sU();function mG(t,e){let n=t;if(AV(t))return"string"===e?[]:[t.length];if(tG(t)){const e=t.channels||"RGBA";return[t.height,t.width*e.length]}if(eG(t))return[t.buffer.size/(null==e?4:Wj(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||AV(n)&&"string"!==e;)r.push(n.length),n=n[0];return Array.isArray(t)&&sU().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&gG(t,r,[]),r}function gG(t,e,n){if(n=n||[],!Array.isArray(t)&&!AV(t))return void kj(0===e.length,(()=>"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(e[0]," elements")));kj(e.length>0,(()=>"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(t.length," elements"))),kj(t.length===e[0],(()=>"Element arr[".concat(n.join("]["),"] should have ").concat(e[0]," ")+"elements, but has ".concat(t.length," elements")));const r=e.slice(1);for(let i=0;i<t.length;++i)gG(t[i],r,n.concat(i))}function yG(t,e,n,r){if("string_or_numeric"!==t){if(null==t)throw new Error("Expected dtype cannot be null.");if("numeric"!==t&&t!==e||"numeric"===t&&"string"===e)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(t," tensor, but got ").concat(e," tensor"))}}function vG(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(t instanceof WV())return yG(r,t.dtype,e,n),t;let i=qj(t);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),yG(r,i,e,n),null==t||!AV(t)&&!Array.isArray(t)&&"number"!==typeof t&&"boolean"!==typeof t&&"string"!==typeof t){const r=null==t?"null":t.constructor.name;throw new Error("Argument '".concat(e,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(r,"'"))}const o=mG(t,i);AV(t)||Array.isArray(t)||(t=[t]);const a="string"!==i?wV(t,i):MV(t,[],!0);return lG.makeTensor(a,o,i)}function bG(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(t))throw new Error("Argument ".concat(e," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return t.map(((t,i)=>vG(t,"".concat(e,"[").concat(i,"]"),n,r)))}fG.registerFlag("DEBUG",(()=>!1),(t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),fG.registerFlag("IS_BROWSER",(()=>pG())),fG.registerFlag("IS_NODE",(()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node)),fG.registerFlag("IS_CHROME",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),fG.registerFlag("IS_SAFARI",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor))),fG.registerFlag("PROD",(()=>!1)),fG.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>fG.getBool("DEBUG"))),fG.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),fG.registerFlag("IS_TEST",(()=>!1)),fG.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>fG.getBool("DEBUG"))),fG.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),fG.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(()=>!1)),fG.registerFlag("USE_SETTIMEOUTCUSTOM",(()=>!1));const xG="__op";function _G(t){const e=Object.keys(t);if(1!==e.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(e.length," keys."));let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=xG;const i=function(){lG.startScope(n);try{const t=r(...arguments);return rU(t)&&console.error("Cannot return a Promise inside of tidy."),lG.endScope(t),t}catch(t){throw lG.endScope(null),t}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}const wG=_G({complex_:function(t,e){const n=vG(t,"real","complex"),r=vG(e,"imag","complex");Pj(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");const i={real:n,imag:r};return lG.runKernel(RU,i)}});function SG(t,e,n,r){if(null==r)r=qj(t);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(eG(t)||tG(t)){if("float32"!==r&&"int32"!==r)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return lG.backend.createTensorFromGPUData(t,e||n,r)}if(!AV(t)&&!Array.isArray(t)&&"number"!==typeof t&&"boolean"!==typeof t&&"string"!==typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=e){tU(e);const t=Nj(e),r=Nj(n);kj(t===r,(()=>"Based on the provided shape, [".concat(e,"], the tensor should have ")+"".concat(t," values but has ").concat(r)));for(let i=0;i<n.length;++i){const t=n[i],r=i!==n.length-1||t!==Nj(e.slice(i));kj(n[i]===e[i]||!r,(()=>"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(e,"). ")))}}return AV(t)||Array.isArray(t)||(t=[t]),e=e||n,t="string"!==r?wV(t,r):MV(t,[],!0),lG.makeTensor(t,e,r)}function TG(t,e,n){return SG(t,e,mG(t,n),n)}const EG={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class AG{static join(t){return new AG(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,null==t)return;if(t instanceof Array||(t=[t]),0===(t=t.map((t=>AV(t)?t.buffer:t))).length)return;this.bufferUniformSize=t[0].byteLength;let e=0;for(let n=0;n<t.length;n++){const r=t[n];n!==t.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=e+r.byteLength;this.shards.push({buffer:r,start:e,end:i}),e=i}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,e=isNaN(Number(e))?0:e,t=Math.max(0,t),e=Math.min(this.byteLength,e),e<=t)return new ArrayBuffer(0);const n=this.findShardForByte(t);if(-1===n)throw new Error("Could not find start shard for byte ".concat(t));const r=new ArrayBuffer(e-t),i=new Uint8Array(r);let o=0;for(let a=n;a<this.shards.length;a++){const n=this.shards[a],r=t+o-n.start,s=o,c=Math.min(e,n.end)-n.start,l=new Uint8Array(n.buffer,r,c-r);if(i.set(l,s),o+=l.length,e<n.end)break}return r}findShardForByte(t){if(0===this.shards.length||t<0||t>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function e(e){return t<e.start?-1:t>=e.end?1:0}if(0===e(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(t,e){let n=0,r=t.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,o=e(t[i]);if(0===o)return i;o<0?r=i:n=i+1}return-1}(this.shards,e);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}function MG(){return lG}function OG(t,e){return lG.tidy(t,e)}function CG(t){rG(t).forEach((t=>t.dispose()))}function kG(t){return lG.keep(t)}VV=function(t){sU().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")};const PG=4;async function IG(t,e){const n=[],r=[],i=Array.isArray(t)?t.map((t=>t.name)):Object.keys(t);for(let o=0;o<i.length;++o){const a=i[o],s=Array.isArray(t)?t[o].tensor:t[a];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(a,"': ").concat(s.dtype));const c={name:a,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){const t=new Promise((async t=>{const e=await s.bytes(),n=e.reduce(((t,e)=>t+e.length),0)+PG*e.length,r=new Uint8Array(n);let i=0;for(let o=0;o<e.length;o++){const t=e[o],n=new Uint8Array(new Uint32Array([t.length]).buffer);r.set(n,i),i+=PG,r.set(t,i),i+=t.length}t(r)}));r.push(t)}else r.push(s.data());null!=e&&(c.group=e),n.push(c)}return{data:UG(await Promise.all(r)),specs:n}}function NG(t,e){const n=new AG(t),r={};let i=0;for(const o of e){const t=RG(o,((t,e)=>n.slice(i+t,i+e)));r[o.name]=LG(o,n.slice(i,i+t)),i+=t}return r}function RG(t,e){const n=Nj(t.shape);let r;if("quantization"in t){const e=t.quantization;r=EG[e.dtype]}else{if("string"===t.dtype){let t=0;for(let r=0;r<n;r++)t+=PG+new Uint32Array(e(t,t+PG))[0];return t}r=EG[t.dtype]}return n*r}async function DG(t,e){const n=Nj(t.shape);let r;if("quantization"in t){const e=t.quantization;r=EG[e.dtype]}else{if("string"===t.dtype){let t=0;for(let r=0;r<n;r++)t+=PG+new Uint32Array(await e(t,t+PG))[0];return t}r=EG[t.dtype]}return n*r}function LG(t,e){const n=t.name,r=t.dtype,i=t.shape,o=Nj(i);let a,s=0;if("quantization"in t){const i=t.quantization;if("uint8"===i.dtype||"uint16"===i.dtype){if(!("min"in i)||!("scale"in i))throw new Error("Weight ".concat(t.name," with quantization ").concat(i.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==i.dtype)throw new Error("Weight ".concat(t.name," has unknown ")+"quantization dtype ".concat(i.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==r)throw new Error("Weight ".concat(t.name," is quantized with ").concat(i.dtype," ")+"which only supports weights of type float32 not ".concat(r,"."))}const c=EG[i.dtype],l="uint8"===i.dtype?new Uint8Array(e):new Uint16Array(e);if("float32"===r)if("uint8"===i.dtype||"uint16"===i.dtype){a=new Float32Array(l.length);for(let t=0;t<l.length;t++){const e=l[t];a[t]=e*i.scale+i.min}}else{if("float16"!==i.dtype)throw new Error("Unsupported quantization type ".concat(i.dtype," ")+"for weight type float32.");{const t=function(){const t=function(){const t=t=>{let e=t<<13,n=0;for(;0===(8388608&e);)n-=8388608,e<<=1;return e&=-8388609,n+=947912704,e|n},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}(),e=function(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}(),n=function(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}();return r=>{const i=new ArrayBuffer(4*r.length),o=new Uint32Array(i);for(let a=0;a<r.length;a++){const i=r[a],s=t[n[i>>10]+(1023&i)]+e[i>>10];o[a]=s}return new Float32Array(i)}}();a=t(l)}}else{if("int32"!==r)throw new Error("Unsupported dtype in weight '".concat(n,"': ").concat(r));if("uint8"!==i.dtype&&"uint16"!==i.dtype)throw new Error("Unsupported quantization type ".concat(i.dtype," ")+"for weight type int32.");a=new Int32Array(l.length);for(let t=0;t<l.length;t++){const e=l[t];a[t]=Math.round(e*i.scale+i.min)}}s+=o*c}else if("string"===r){const n=Nj(t.shape);a=[];for(let t=0;t<n;t++){const t=new Uint32Array(e.slice(s,s+PG))[0];s+=PG;const n=new Uint8Array(e.slice(s,s+t));a.push(n),s+=t}}else{const t=EG[r];if("float32"===r)a=new Float32Array(e);else if("int32"===r)a=new Int32Array(e);else{if("bool"!==r){if("complex64"===r){a=new Float32Array(e);const t=new Float32Array(a.length/2),n=new Float32Array(a.length/2);for(let e=0;e<t.length;e++)t[e]=a[2*e],n[e]=a[2*e+1];const r=TG(t,i,"float32"),o=TG(n,i,"float32"),s=wG(r,o);return r.dispose(),o.dispose(),s}throw new Error("Unsupported dtype in weight '".concat(n,"': ").concat(r))}a=new Uint8Array(e)}s+=o*t}return TG(a,i,r)}async function FG(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:e,value:i}=await t.read();if(e&&null==i){const t=n-r.byteLength;throw new Error("Reader is done but ".concat(t," bytes are still expected"))}const o=new Uint8Array(r.length+i.byteLength);o.set(r,0),o.set(new Uint8Array(i),r.length),r=o}return r.buffer}async function jG(t,e){const n={},r=t.getReader();let i=new ArrayBuffer(0);for(const o of e){const t=await DG(o,(async(t,e)=>(i=await FG(r,i,e),i.slice(t,e))));i=await FG(r,i,t);const e=i.slice(0,t);i=i.slice(t);const a=LG(o,e);if(n[o.name]=a,"webgpu"===lG.backendName){const t=lG.backend;"uploadToGPU"in t&&Nj(a.shape)>=sU().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&t.uploadToGPU(a.dataId)}}return n}function UG(t){if(null===t)throw new Error("Invalid input value: ".concat(JSON.stringify(t)));let e=0;const n=[];t.forEach((t=>{if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(t.constructor.name))}));const r=new Uint8Array(e);let i=0;return n.forEach((t=>{r.set(new Uint8Array(t.buffer),i),i+=t.byteLength})),r.buffer}const BG="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function zG(t){return BG?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function VG(t){return AG.join(t)}function GG(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);const e=t.split("/");return e[e.length-1]}function WG(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return null!=t.signature&&(n.signature=t.signature),null!=t.userDefinedMetadata&&(n.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(n.modelInitializer=t.modelInitializer),null!=t.initializerSignature&&(n.initializerSignature=t.initializerSignature),null!=t.trainingConfig&&(n.trainingConfig=t.trainingConfig),n}function HG(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null!=t.weightsManifest){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),null!=t.initializerSignature&&(r.initializerSignature=t.initializerSignature),r}async function qG(t,e){let n,r;return null!=t.weightsManifest&&([n,r]=await e(t.weightsManifest)),HG(t,n,r)}function XG(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:zG(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:zG(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:new AG(t.weightData).byteLength}}function YG(t){const e=[];for(const n of t)e.push(...n.weights);return e}class KG{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==KG.instance&&(KG.instance=new KG),KG.instance}static registerSaveRouter(t){KG.getInstance().saveRouters.push(t)}static registerLoadRouter(t){KG.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return KG.getHandlers(t,"save")}static getLoadHandlers(t,e){return KG.getHandlers(t,"load",e)}static getHandlers(t,e,n){const r=[];return("load"===e?KG.getInstance().loadRouters:KG.getInstance().saveRouters).forEach((e=>{const i=e(t,n);null!==i&&r.push(i)})),r}}const ZG=t=>KG.registerSaveRouter(t),JG=t=>KG.registerLoadRouter(t),$G=t=>KG.getSaveHandlers(t),QG=(t,e)=>KG.getLoadHandlers(t,e),tW="tensorflowjs",eW="models_store",nW="model_info_store";function rW(){if(!sU().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t="undefined"===typeof window?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function iW(t){const e=t.result;e.createObjectStore(eW,{keyPath:"modelPath"}),e.createObjectStore(nW,{keyPath:"modelPath"})}class oW{constructor(t){if(this.indexedDB=rW(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,e){return new Promise(((t,n)=>{const r=this.indexedDB.open(tW,1);r.onupgradeneeded=()=>iW(r),r.onsuccess=()=>{const i=r.result;if(null==e){const e=i.transaction(eW,"readonly"),r=e.objectStore(eW).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return i.close(),n(new Error("Cannot find model with path '".concat(this.modelPath,"' ")+"in IndexedDB."));t(r.result.modelArtifacts)},r.onerror=t=>(i.close(),n(r.error)),e.oncomplete=()=>i.close()}else{e.weightData=AG.join(e.weightData);const r=XG(e),o=i.transaction(nW,"readwrite");let a,s,c=o.objectStore(nW);try{a=c.put({modelPath:this.modelPath,modelArtifactsInfo:r})}catch(sO){return n(sO)}a.onsuccess=()=>{s=i.transaction(eW,"readwrite");const a=s.objectStore(eW);let l;try{l=a.put({modelPath:this.modelPath,modelArtifacts:e,modelArtifactsInfo:r})}catch(sO){return n(sO)}l.onsuccess=()=>t({modelArtifactsInfo:r}),l.onerror=t=>{c=o.objectStore(nW);const e=c.delete(this.modelPath);e.onsuccess=()=>(i.close(),n(l.error)),e.onerror=t=>(i.close(),n(l.error))}},a.onerror=t=>(i.close(),n(a.error)),o.oncomplete=()=>{null==s?i.close():s.oncomplete=()=>i.close()}}},r.onerror=t=>n(r.error)}))}}oW.URL_SCHEME="indexeddb://";const aW=t=>{return sU().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(oW.URL_SCHEME)?(e=t.slice(oW.URL_SCHEME.length),new oW(e)):null;var e};KG.registerSaveRouter(aW),KG.registerLoadRouter(aW);class sW{constructor(){this.indexedDB=rW()}async listModels(){return new Promise(((t,e)=>{const n=this.indexedDB.open(tW,1);n.onupgradeneeded=()=>iW(n),n.onsuccess=()=>{const r=n.result,i=r.transaction(nW,"readonly"),o=i.objectStore(nW).getAll();o.onsuccess=()=>{const e={};for(const t of o.result)e[t.modelPath]=t.modelArtifactsInfo;t(e)},o.onerror=t=>(r.close(),e(o.error)),i.oncomplete=()=>r.close()},n.onerror=t=>e(n.error)}))}async removeModel(t){var e;return t=(e=t).startsWith(oW.URL_SCHEME)?e.slice(oW.URL_SCHEME.length):e,new Promise(((e,n)=>{const r=this.indexedDB.open(tW,1);r.onupgradeneeded=()=>iW(r),r.onsuccess=()=>{const i=r.result,o=i.transaction(nW,"readwrite"),a=o.objectStore(nW),s=a.get(t);let c;s.onsuccess=()=>{if(null==s.result)return i.close(),n(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));{const r=a.delete(t),o=()=>{c=i.transaction(eW,"readwrite");const r=c.objectStore(eW).delete(t);r.onsuccess=()=>e(s.result.modelArtifactsInfo),r.onerror=t=>n(s.error)};r.onsuccess=o,r.onerror=t=>(o(),i.close(),n(s.error))}},s.onerror=t=>(i.close(),n(s.error)),o.oncomplete=()=>{null==c?i.close():c.oncomplete=()=>i.close()}},r.onerror=t=>n(r.error)}))}}const cW="/",lW="tensorflowjs_models",uW="info",hW="model_topology",dW="weight_specs",pW="weight_data",fW="model_metadata";function mW(t){return{info:[lW,t,uW].join(cW),topology:[lW,t,hW].join(cW),weightSpecs:[lW,t,dW].join(cW),weightData:[lW,t,pW].join(cW),modelMetadata:[lW,t,fW].join(cW)}}function gW(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function yW(t){const e=t.split(cW);if(e.length<3)throw new Error("Invalid key format: ".concat(t));return e.slice(1,e.length-1).join(cW)}class vW{constructor(t){if(!sU().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=mW(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),i=XG(t),o=AG.join(t.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(t){if(BG)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}(o));const e={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,initializerSignature:null!=t.initializerSignature?t.initializerSignature:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(e)),{modelArtifactsInfo:i}}catch(e){throw gW(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(i.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(i.weightSpecsBytes,", ")+"weightDataBytes=".concat(i.weightDataBytes,"."))}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(null==t)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const e={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");e.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");e.weightSpecs=r;const i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){const t=JSON.parse(i);e.format=t.format,e.generatedBy=t.generatedBy,e.convertedBy=t.convertedBy,null!=t.signature&&(e.signature=t.signature),null!=t.userDefinedMetadata&&(e.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(e.modelInitializer=t.modelInitializer),null!=t.initializerSignature&&(e.initializerSignature=t.initializerSignature),null!=t.trainingConfig&&(e.trainingConfig=t.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(null==o)throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));return e.weightData=function(t){if(BG){const e=Buffer.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}(o),e}}vW.URL_SCHEME="localstorage://";const bW=t=>{return sU().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(vW.URL_SCHEME)?(e=t.slice(vW.URL_SCHEME.length),new vW(e)):null;var e};KG.registerSaveRouter(bW),KG.registerLoadRouter(bW);class xW{constructor(){kj(sU().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),kj("undefined"===typeof window||"undefined"!==typeof window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const t={},e=lW+cW,n=cW+uW;for(let r=0;r<this.LS.length;++r){const i=this.LS.key(r);if(i.startsWith(e)&&i.endsWith(n)){t[yW(i)]=JSON.parse(this.LS.getItem(i))}}return t}async removeModel(t){var e;const n=mW(t=(e=t).startsWith(vW.URL_SCHEME)?e.slice(vW.URL_SCHEME.length):e);if(null==this.LS.getItem(n.info))throw new Error("Cannot find model at path '".concat(t,"'"));const r=JSON.parse(this.LS.getItem(n.info));return gW(n),r}}const _W="://";class wW{constructor(){this.managers={}}static getInstance(){return null==wW.instance&&(wW.instance=new wW),wW.instance}static registerManager(t,e){kj(null!=t,(()=>"scheme must not be undefined or null.")),t.endsWith(_W)&&(t=t.slice(0,t.indexOf(_W))),kj(t.length>0,(()=>"scheme must not be an empty string."));const n=wW.getInstance();kj(null==n.managers[t],(()=>"A model store manager is already registered for scheme '".concat(t,"'."))),n.managers[t]=e}static getManager(t){const e=wW.getInstance().managers[t];if(null==e)throw new Error("Cannot find model manager for scheme '".concat(t,"'"));return e}static getSchemes(){return Object.keys(wW.getInstance().managers)}}function SW(t){if(-1===t.indexOf(_W))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(wW.getSchemes().join(",")));return{scheme:t.split(_W)[0],path:t.split(_W)[1]}}async function TW(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];kj(t!==e,(()=>"Old path and new path are the same: '".concat(t,"'")));const r=KG.getLoadHandlers(t);kj(r.length>0,(()=>"Copying failed because no load handler is found for source URL ".concat(t,"."))),kj(r.length<2,(()=>"Copying failed because more than one (".concat(r.length,") ")+"load handlers for source URL ".concat(t,".")));const i=r[0],o=KG.getSaveHandlers(e);kj(o.length>0,(()=>"Copying failed because no save handler is found for destination "+"URL ".concat(e,"."))),kj(o.length<2,(()=>"Copying failed because more than one (".concat(r.length,") ")+"save handlers for destination URL ".concat(e,".")));const a=o[0],s=SW(t).scheme,c=SW(t).path,l=s===SW(t).scheme,u=await i.load();n&&l&&await wW.getManager(s).removeModel(c);const h=await a.save(u);return n&&!l&&await wW.getManager(s).removeModel(c),h.modelArtifactsInfo}async function EW(){const t=wW.getSchemes(),e={};for(const n of t){const t=await wW.getManager(n).listModels();for(const r in t){e[n+_W+r]=t[r]}}return e}async function AW(t){const e=SW(t);return wW.getManager(e.scheme).removeModel(e.path)}async function MW(t,e){return TW(t,e,!1)}async function OW(t,e){return TW(t,e,!0)}class CW{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,e){return fetch(t,e)}now(){return performance.now()}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Browser's encoder only supports utf-8, but got ".concat(e));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,e){return new TextDecoder(e).decode(t)}setTimeoutCustom(t,e){"undefined"!==typeof window&&sU().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(t),setTimeout((()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")}),e),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(t=>{if(t.source===window&&t.data.name===this.messageName){t.stopPropagation();(0,this.functionRefs[t.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}}),!0))):setTimeout(t,e)}isTypedArray(t){return aV(t)}}if(sU().get("IS_BROWSER")){sU().setPlatform("browser",new CW);try{wW.registerManager(vW.URL_SCHEME,new xW)}catch(cCt){}try{wW.registerManager(oW.URL_SCHEME,new sW)}catch(cCt){}}const kW=()=>__webpack_require__(5817);let PW;class IW{constructor(){this.util=__webpack_require__(8590),this.textEncoder=new this.util.TextEncoder}fetch(t,e){return null!=sU().global.fetch?sU().global.fetch(t,e):(null==PW&&(PW=kW()),PW(t,e))}now(){const t=process.hrtime();return 1e3*t[0]+t[1]/1e6}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(e));return this.textEncoder.encode(t)}decode(t,e){return 0===t.length?"":new this.util.TextDecoder(e).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}}function NW(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return e=e||"float32",tU(t),new UV(t,e,n)}sU().get("IS_NODE")&&!sU().get("IS_BROWSER")&&sU().setPlatform("node",new IW);const RW=_G({cast_:function(t,e){const n=vG(t,"x","cast");if(!function(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}(e))throw new Error("Failed to cast to unknown dtype ".concat(e));if("string"===e&&"string"!==n.dtype||"string"!==e&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:e};return lG.runKernel(PU,r,i)}});const DW=_G({clone_:function(t){const e={x:vG(t,"x","clone","string_or_numeric")};return lG.runKernel(mB,e)}});function LW(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(t.toString(e))}cG();zV={buffer:NW,cast:RW,clone:DW,print:LW};const FW=_G({add_:function(t,e){let n=vG(t,"a","add"),r=vG(e,"b","add");[n,r]=nG(n,r);const i={a:n,b:r};return lG.runKernel(mU,i)}});const jW=_G({floorDiv_:function(t,e){let n=vG(t,"a","floorDiv"),r=vG(e,"b","floorDiv");[n,r]=nG(n,r);const i={a:n,b:r};return lG.runKernel(lB,i)}});const UW=_G({div_:function(t,e){let n=vG(t,"a","div"),r=vG(e,"b","div");if([n,r]=nG(n,r),"int32"===n.dtype&&"int32"===r.dtype)return jW(n,r);const i={a:n,b:r};return lG.runKernel(tB,i,{})}});const BW=_G({mul_:function(t,e){let n=vG(t,"a","mul"),r=vG(e,"b","mul");[n,r]=nG(n,r);const i={a:n,b:r};return lG.runKernel(jB,i)}});const zW=_G({sqrt_:function(t){const e={x:vG(t,"x","sqrt","float32")};return lG.runKernel(xz,e)}});const VW=_G({square_:function(t){const e=vG(t,"x","square");return lG.runKernel("Square",{x:e},{})}});const GW=_G({zerosLike_:function(t){const e={x:vG(t,"x","zerosLike")};return lG.runKernel(Wz,e)}});function WW(t){return lG.customGrad(t)}function HW(t,e){if((AV(t)&&"string"!==e||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===e&&AV(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return SG(t,[],[],e)}const qW=new Map,XW=new Map;class YW{getClassName(){return this.constructor.className}static fromConfig(t,e){return new t(e)}}class KW{constructor(){this.classNameMap={}}static getMap(){return null==KW.instance&&(KW.instance=new KW),KW.instance}static register(t){KW.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function ZW(t,e,n){kj(null!=t.className,(()=>"Class being registered does not have the static className property defined.")),kj("string"===typeof t.className,(()=>"className is required to be a string, but got type "+typeof t.className)),kj(t.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),"undefined"===typeof e&&(e="Custom"),"undefined"===typeof n&&(n=t.className);const r=e+">"+n;return KW.register(t),qW.set(r,t),XW.set(t,r),t}class JW extends YW{minimize(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{value:r,grads:i}=this.computeGradients(t,n);if(null!=n){const t=n.map((t=>({name:t.name,tensor:i[t.name]})));this.applyGradients(t)}else this.applyGradients(i);return CG(i),e?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,e){return function(t,e){kj(Xj(t),(()=>"The f passed in variableGrads(f) must be a function")),kj(null==e||Array.isArray(e)&&e.every((t=>t instanceof HV)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=e;if(!n){e=[];for(const t in lG.registeredVariables)e.push(lG.registeredVariables[t])}const r=n?e.filter((t=>!t.trainable)):null,i=e.length;e=e.filter((t=>t.trainable)),kj(e.length>0,(()=>"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(i," variables is ")+"trainable."));const{value:o,grads:a}=lG.gradients(t,e,null,!0);kj(a.some((t=>null!=t)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),kj(0===o.rank,(()=>"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(o.rank," tensor")));const s={};return e.forEach(((t,e)=>{null!=a[e]&&(s[t.name]=a[e])})),null!=r&&r.forEach((t=>s[t.name]=null)),{value:o,grads:s}}(t,e)}dispose(){null!=this.iterations_&&CG(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:HW(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()))}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(JW,Symbol.hasInstance,{value:t=>null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients});function $W(t,e,n){tU(t);const r={shape:t,value:e,dtype:n=n||qj(e)};return lG.runKernel(aB,{},r)}const QW=_G({pow_:function(t,e){let n=vG(t,"base","pow"),r=vG(e,"exp","pow");[n,r]=nG(n,r);const i={a:n,b:r};return lG.runKernel("Pow",i)}});const tH=_G({sub_:function(t,e){let n=vG(t,"a","sub"),r=vG(e,"b","sub");[n,r]=nG(n,r);const i={a:n,b:r};return lG.runKernel(Dz,i)}});const eH=_G({abs_:function(t){const e=vG(t,"x","abs");if("complex64"===e.dtype){const t={x:e};return lG.runKernel(DU,t)}{const t={x:e};return lG.runKernel(dU,t)}}});function nH(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const o=n-1-i,a=t[o]||1;(e[e.length-1-i]||1)>1&&1===a&&r.unshift(o)}return r}function rH(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],o=e.length-r-1,a=e[o];(null==i||1===i&&a>1)&&n.unshift(o)}return n}function iH(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let i=0;i<n;i++){let o=t[t.length-i-1];null==o&&(o=1);let a=e[e.length-i-1];if(null==a&&(a=1),1===o)r[n-i-1]=a;else if(1===a)r[n-i-1]=o;else{if(o!==a){const n="Operands could not be broadcast together with shapes "+"".concat(t," and ").concat(e,".");throw Error(n)}r[n-i-1]=o}}return r}const oH=_G({maximum_:function(t,e){let n=vG(t,"a","maximum"),r=vG(e,"b","maximum");[n,r]=nG(n,r),"bool"===n.dtype&&(n=RW(n,"int32"),r=RW(r,"int32")),iH(n.shape,r.shape);const i={a:n,b:r};return lG.runKernel(kB,i)}});class aH extends JW{static get className(){return"SGD"}constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){const e=Array.isArray(t)?t.map((t=>t.name)):Object.keys(t);e.forEach(((e,n)=>{const r=Array.isArray(t)?t[n].tensor:t[e];if(null==r)return;const i=lG.registeredVariables[e];OG((()=>{const t=FW(BW(this.c,r),i);i.assign(t)}))})),this.incrementIterations()}setLearningRate(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=kG(HW(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(0!==(t=await this.extractIterations(t)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,e){return new t(e.learningRate)}}const sH=[class extends JW{static get className(){return"Adadelta"}constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.learningRate=t,this.rho=e,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=lG.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map((t=>t.name)):Object.keys(t)).forEach(((e,n)=>{const r=lG.registeredVariables[e],i=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:"".concat(e,"/accum_grad"),variable:OG((()=>GW(r).variable(i)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:"".concat(e,"/accum_var"),variable:OG((()=>GW(r).variable(i)))});const o=Array.isArray(t)?t[n].tensor:t[e];if(null==o)return;const a=this.accumulatedGrads[n].variable,s=this.accumulatedUpdates[n].variable;OG((()=>{const t=FW(BW(a,this.rho),BW(VW(o),1-this.rho)),e=BW(UW(zW(FW(s,this.epsilon)),zW(FW(a,this.epsilon))),o),n=FW(BW(s,this.rho),BW(VW(e),1-this.rho));a.assign(t),s.assign(n);const i=FW(BW(e,-this.learningRate),r);r.assign(i)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(CG(this.accumulatedGrads.map((t=>t.variable))),CG(this.accumulatedUpdates.map((t=>t.variable))))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map((t=>({name:t.originalName,tensor:t.variable}))))}async setWeights(t){const e=(t=await this.extractIterations(t)).length/2,n=!1;this.accumulatedGrads=t.slice(0,e).map((t=>({originalName:t.name,variable:t.tensor.variable(n)}))),this.accumulatedUpdates=t.slice(e,2*e).map((t=>({originalName:t.name,variable:t.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.rho,e.epsilon)}},class extends JW{static get className(){return"Adagrad"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;super(),this.learningRate=t,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map((t=>t.name)):Object.keys(t)).forEach(((e,n)=>{const r=lG.registeredVariables[e];if(null==this.accumulatedGrads[n]){const t=!1;this.accumulatedGrads[n]={originalName:"".concat(e,"/accumulator"),variable:OG((()=>$W(r.shape,this.initialAccumulatorValue).variable(t)))}}const i=Array.isArray(t)?t[n].tensor:t[e];if(null==i)return;const o=this.accumulatedGrads[n].variable;OG((()=>{const t=FW(o,VW(i));o.assign(t);const e=FW(BW(UW(i,zW(FW(t,lG.backend.epsilon()))),-this.learningRate),r);r.assign(e)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&CG(this.accumulatedGrads.map((t=>t.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((t=>({name:t.originalName,tensor:t.variable}))))}async setWeights(t){t=await this.extractIterations(t);this.accumulatedGrads=t.map((t=>({originalName:t.name,variable:t.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,e){return new t(e.learningRate,e.initialAccumulatorValue)}},class extends JW{static get className(){return"Adam"}constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],OG((()=>{this.accBeta1=HW(e).variable(),this.accBeta2=HW(n).variable()})),null==r&&(this.epsilon=lG.backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map((t=>t.name)):Object.keys(t);OG((()=>{const n=tH(1,this.accBeta1),r=tH(1,this.accBeta2);e.forEach(((e,i)=>{const o=lG.registeredVariables[e],a=!1;null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:"".concat(e,"/m"),variable:OG((()=>GW(o).variable(a)))}),null==this.accumulatedSecondMoment[i]&&(this.accumulatedSecondMoment[i]={originalName:"".concat(e,"/v"),variable:OG((()=>GW(o).variable(a)))});const s=Array.isArray(t)?t[i].tensor:t[e];if(null==s)return;const c=this.accumulatedFirstMoment[i].variable,l=this.accumulatedSecondMoment[i].variable,u=FW(BW(c,this.beta1),BW(s,1-this.beta1)),h=FW(BW(l,this.beta2),BW(VW(s),1-this.beta2)),d=UW(u,n),p=UW(h,r);c.assign(u),l.assign(h);const f=FW(BW(UW(d,FW(zW(p),this.epsilon)),-this.learningRate),o);o.assign(f)})),this.accBeta1.assign(BW(this.accBeta1,this.beta1)),this.accBeta2.assign(BW(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&CG(this.accumulatedFirstMoment.map((t=>t.variable))),null!=this.accumulatedSecondMoment&&CG(this.accumulatedSecondMoment.map((t=>t.variable)))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map((t=>({name:t.originalName,tensor:t.variable}))))}async setWeights(t){t=await this.extractIterations(t),OG((()=>{this.accBeta1.assign(QW(this.beta1,this.iterations_+1)),this.accBeta2.assign(QW(this.beta2,this.iterations_+1))}));const e=t.length/2,n=!1;this.accumulatedFirstMoment=t.slice(0,e).map((t=>({originalName:t.name,variable:t.tensor.variable(n)}))),this.accumulatedSecondMoment=t.slice(e,2*e).map((t=>({originalName:t.name,variable:t.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)}},class extends JW{static get className(){return"Adamax"}constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=r,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],OG((()=>{this.iteration=HW(0).variable(),this.accBeta1=HW(e).variable()})),null==r&&(this.epsilon=lG.backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map((t=>t.name)):Object.keys(t);OG((()=>{const n=tH(1,this.accBeta1),r=UW(-this.learningRate,FW(BW(this.iteration,this.decay),1));e.forEach(((e,i)=>{const o=lG.registeredVariables[e],a=!1;null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:"".concat(e,"/m"),variable:GW(o).variable(a)}),null==this.accumulatedWeightedInfNorm[i]&&(this.accumulatedWeightedInfNorm[i]={originalName:"".concat(e,"/v"),variable:GW(o).variable(a)});const s=Array.isArray(t)?t[i].tensor:t[e];if(null==s)return;const c=this.accumulatedFirstMoment[i].variable,l=this.accumulatedWeightedInfNorm[i].variable,u=FW(BW(c,this.beta1),BW(s,1-this.beta1)),h=BW(l,this.beta2),d=eH(s),p=oH(h,d);c.assign(u),l.assign(p);const f=FW(BW(UW(r,n),UW(u,FW(p,this.epsilon))),o);o.assign(f)})),this.iteration.assign(FW(this.iteration,1)),this.accBeta1.assign(BW(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&CG(this.accumulatedFirstMoment.map((t=>t.variable))),null!=this.accumulatedWeightedInfNorm&&CG(this.accumulatedWeightedInfNorm.map((t=>t.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)}},class extends aH{static get className(){return"Momentum"}constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(t),this.learningRate=t,this.momentum=e,this.useNesterov=n,this.accumulations=[],this.m=HW(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map((t=>t.name)):Object.keys(t)).forEach(((e,n)=>{const r=lG.registeredVariables[e];if(null==this.accumulations[n]){const t=!1;this.accumulations[n]={originalName:"".concat(e,"/momentum"),variable:OG((()=>GW(r).variable(t)))}}const i=this.accumulations[n].variable,o=Array.isArray(t)?t[n].tensor:t[e];null!=o&&OG((()=>{let t;const e=FW(BW(this.m,i),o);t=this.useNesterov?FW(BW(this.c,FW(o,BW(e,this.m))),r):FW(BW(this.c,e),r),i.assign(e),r.assign(t)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&CG(this.accumulations.map((t=>t.variable)))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((t=>({name:t.originalName,tensor:t.variable}))))}async setWeights(t){t=await this.extractIterations(t);this.accumulations=t.map((t=>({originalName:t.name,variable:t.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)}},class extends JW{static get className(){return"RMSProp"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(super(),this.learningRate=t,this.decay=e,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,null==r&&(this.epsilon=lG.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map((t=>t.name)):Object.keys(t)).forEach(((e,n)=>{const r=lG.registeredVariables[e],i=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:"".concat(e,"/rms"),variable:OG((()=>GW(r).variable(i)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:"".concat(e,"/momentum"),variable:OG((()=>GW(r).variable(i)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:"".concat(e,"/mg"),variable:OG((()=>GW(r).variable(i)))});const o=Array.isArray(t)?t[n].tensor:t[e];if(null==o)return;const a=this.accumulatedMeanSquares[n].variable,s=this.accumulatedMoments[n].variable;OG((()=>{const t=FW(BW(a,this.decay),BW(VW(o),1-this.decay));if(this.centered){const e=this.accumulatedMeanGrads[n].variable,i=FW(BW(e,this.decay),BW(o,1-this.decay)),c=UW(BW(o,this.learningRate),zW(tH(t,FW(VW(i),this.epsilon)))),l=FW(BW(s,this.momentum),c);a.assign(t),e.assign(i),s.assign(l);const u=tH(r,l);r.assign(u)}else{const t=FW(BW(a,this.decay),BW(VW(o),1-this.decay)),e=FW(BW(s,this.momentum),UW(BW(o,this.learningRate),zW(FW(t,this.epsilon))));a.assign(t),s.assign(e);const n=tH(r,e);r.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&CG(this.accumulatedMeanSquares.map((t=>t.variable))),null!=this.accumulatedMeanGrads&&this.centered&&CG(this.accumulatedMeanGrads.map((t=>t.variable))),null!=this.accumulatedMoments&&CG(this.accumulatedMoments.map((t=>t.variable)))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map((t=>({name:t.originalName,tensor:t.variable}))))}async setWeights(t){t=await this.extractIterations(t);const e=this.centered?t.length/3:t.length/2,n=!1;this.accumulatedMeanSquares=t.slice(0,e).map((t=>({originalName:t.name,variable:t.tensor.variable(n)}))),this.accumulatedMoments=t.slice(e,2*e).map((t=>({originalName:t.name,variable:t.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=t.slice(2*e,3*e).map((t=>({originalName:t.name,variable:t.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)}},aH];function cH(t){return new Promise((t=>setTimeout(t))).then(t)}class lH{constructor(t){if(!sU().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(lH.URL_SCHEME)&&(t=t.slice(lH.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}async save(t){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const e=AG.join(t.weightData),n=window.URL.createObjectURL(new Blob([e],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const e=WG(t,[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(e)],{type:"application/json"})),i=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(i.download=this.modelJsonFileName,i.href=r,await cH((()=>i.dispatchEvent(new MouseEvent("click")))),null!=t.weightData){const t=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;t.download=this.weightDataFileName,t.href=n,await cH((()=>t.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:XG(t)}}}}lH.URL_SCHEME="downloads://";class uH{constructor(t){if(null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}async load(){return new Promise(((t,e)=>{const n=new FileReader;n.onload=n=>{const r=JSON.parse(n.target.result),i=r.modelTopology;if(null==i)return void e(new Error("modelTopology field is missing from file ".concat(this.jsonFile.name)));if(null==r.weightsManifest)return void e(new Error("weightManifest field is missing from file ".concat(this.jsonFile.name)));if(0===this.weightsFiles.length)return void t({modelTopology:i});const o=qG(r,(t=>this.loadWeights(t)));t(o)},n.onerror=t=>e("Failed to read model topology and weights manifest JSON "+"from file '".concat(this.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only."),n.readAsText(this.jsonFile)}))}loadWeights(t){const e=[],n=[];for(const o of t)e.push(...o.weights),n.push(...o.paths);const r=this.checkManifestAndWeightFiles(t),i=n.map((t=>this.loadWeightsFile(t,r[t])));return Promise.all(i).then((t=>[e,t]))}loadWeightsFile(t,e){return new Promise(((n,r)=>{const i=new FileReader;i.onload=t=>{const e=t.target.result;n(e)},i.onerror=e=>r("Failed to weights data from file of path '".concat(t,"'.")),i.readAsArrayBuffer(e)}))}checkManifestAndWeightFiles(t){const e=[],n=this.weightsFiles.map((t=>GG(t.name))),r={};for(const i of t)i.paths.forEach((t=>{const i=GG(t);if(-1!==e.indexOf(i))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(i,"'"));if(e.push(i),-1===n.indexOf(i))throw new Error("Weight file with basename '".concat(i,"' is not provided."));r[t]=this.weightsFiles[n.indexOf(i)]}));if(e.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(e.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return r}}function hH(t){return new uH(t)}function dH(t,e,n,r){!function(t){kj(null!=t&&Array.isArray(t)&&t.length>0,(()=>"promises must be a none empty array"))}(t),function(t,e){kj(t>=0&&t<=1,(()=>"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(t))),kj(e>=0&&e<=1,(()=>"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(e))),kj(e>=t,(()=>"startFraction must be no more than endFraction, but "+"got startFraction ".concat(t," and endFraction ")+"".concat(e)))}(n=null==n?0:n,r=null==r?1:r);let i=0;return Promise.all(t.map((o=>(o.then((o=>{const a=n+ ++i/t.length*(r-n);return e(a),o})),o))))}async function pH(t,e){null==e&&(e={});const n=null==e.fetchFunc?sU().platform.fetch:e.fetchFunc,r=t.map((t=>n(t,e.requestInit,{isBinary:!0}))),i=(null==e.onProgress?await Promise.all(r):await dH(r,e.onProgress,0,.5)).map((t=>t.arrayBuffer()));return null==e.onProgress?await Promise.all(i):await dH(i,e.onProgress,.5,1)}async function fH(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return mH((t=>pH(t,{requestInit:r})))(t,e,n)}function mH(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;const i=e.map((()=>!1)),o={},a=null!=r?r.map((()=>!1)):[],s=[];if(e.forEach(((t,e)=>{let n=0;t.weights.forEach((t=>{const c="quantization"in t?t.quantization.dtype:t.dtype,l=EG[c]*Nj(t.shape),u=()=>{i[e]=!0,null==o[e]&&(o[e]=[]),o[e].push({manifestEntry:t,groupOffset:n,sizeBytes:l})};null!=r?r.forEach(((e,n)=>{e===t.name&&(u(),a[n]=!0)})):u(),s.push(t.name),n+=l}))})),!a.every((t=>t))){const t=r.filter(((t,e)=>!a[e]));throw new Error("Could not find weights in manifest with names: "+"".concat(t.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(s.join(", "),"."))}const c=i.reduce(((t,e,n)=>(e&&t.push(n),t)),[]),l=[];c.forEach((t=>{e[t].paths.forEach((t=>{const e=n+(n.endsWith("/")?"":"/")+t;l.push(e)}))}));const u=await t(l),h={};let d=0;return c.forEach((t=>{const n=e[t].paths.length,r=new AG(u.slice(d,d+n));o[t].forEach((t=>{const e=NG(r.slice(t.groupOffset,t.groupOffset+t.sizeBytes),[t.manifestEntry]);for(const n in e)h[n]=e[n]})),d+=n})),h}}KG.registerSaveRouter((t=>sU().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(lH.URL_SCHEME)?function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new lH(t)}(t.slice(lH.URL_SCHEME.length)):null));class gH{constructor(t,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.weightUrlConverter=e.weightUrlConverter,null!=e.fetchFunc?(kj("function"===typeof e.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=e.fetchFunc):this.fetch=sU().platform.fetch,kj(null!=t&&t.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(t)&&kj(2===t.length,(()=>"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,")."))),this.path=t,null!=e.requestInit&&null!=e.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{},this.loadOptions=e}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);e.body=new FormData;const n=WG(t,[{paths:["./model.weights.bin"],weights:t.weightSpecs}]);if(e.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=t.weightData){const n=AG.join(t.weightData);e.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const r=await this.fetch(this.path,e);if(r.ok)return{modelArtifactsInfo:XG(t),responses:[r]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(r.status,"."))}async loadModelJSON(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");let e;try{e=await t.json()}catch(sCt){let e="Failed to parse model JSON of response from ".concat(this.path,".");throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const n=e.modelTopology,r=e.weightsManifest;if(null==n&&null==r)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");return e}async load(){if(this.loadOptions.streamWeights)return this.loadStream();return qG(await this.loadModelJSON(),(t=>this.loadWeights(t)))}async loadStream(){const t=await this.loadModelJSON(),e=await this.getWeightUrls(t.weightsManifest),n=YG(t.weightsManifest);return Object.assign(Object.assign({},t),{weightSpecs:n,getWeightStream:()=>function(t,e){var n;const r=null==e.fetchFunc?sU().platform.fetch:e.fetchFunc;let i,o=0;return null===(n=e.onProgress)||void 0===n||n.call(e,0),new ReadableStream({pull:async n=>{for(var a;o<t.length;){if(!i){const n=(await r(t[o],e.requestInit,{isBinary:!0})).body;i=n.getReader()}const{done:s,value:c}=await i.read();if(!s)return void n.enqueue(c);o++,i=void 0,null===(a=e.onProgress)||void 0===a||a.call(e,o/t.length)}n.close()}})}(e,this.loadOptions)})}async getWeightUrls(t){const e=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),i=n>e?t.substring(n):"";return[r+"/",i]}(e),i=this.weightPathPrefix||n,o=[],a=[];for(const s of t)for(const t of s.paths)null!=this.weightUrlConverter?a.push(this.weightUrlConverter(t)):o.push(i+t+r);return this.weightUrlConverter&&o.push(...await Promise.all(a)),o}async loadWeights(t){const e=await this.getWeightUrls(t);return[YG(t),await pH(e,this.loadOptions)]}}function yH(t){return null!=t.match(gH.URL_SCHEME_REGEX)}gH.URL_SCHEME_REGEX=/^https?:\/\//;const vH=(t,e)=>{if("undefined"===typeof fetch&&(null==e||null==e.fetchFunc))return null;{let n=!0;if(n=Array.isArray(t)?t.every((t=>yH(t))):yH(t),n)return bH(t,e)}return null};function bH(t,e){return new gH(t,e)}function xH(t,e){return bH(t,e)}KG.registerSaveRouter(vH),KG.registerLoadRouter(vH);class _H{constructor(t){this.modelArtifacts=t}load(){return this.modelArtifacts}}class wH{constructor(t){this.saveHandler=t}save(t){return this.saveHandler(t)}}class SH{constructor(t){t.load&&(this.load=()=>Promise.resolve(t.load())),t.save&&(this.save=e=>Promise.resolve(t.save(e)))}}function TH(t,e,n,r){return new SH(EH(...arguments))}function EH(t,e,n,r){if(1===arguments.length){return null!=t.modelTopology||null!=t.weightSpecs?new _H(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new _H({modelTopology:t}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new _H({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r})}function AH(t){return new wH(t)}function MH(t){return new wH(t)}function OH(t,e,n){if(Ij(t),null!=e&&3!==e.length)throw new Error("tensor3d() requires shape to have three numbers");const r=mG(t,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return SG(t,e,r,n)}let CH,kH=!1;function PH(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,i=!1,o=!1,a=!1,s=!1;if(t.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&t instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement)i=!0;else if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement)o=!0;else if(null!=t.getContext)a=!0;else{if(!("undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(t.constructor.name));s=!0}if(null!=eV(qz,lG.backendName)){const n={pixels:t},r={numChannels:e};return lG.runKernel(qz,n,r)}const[c,l]=i?[t.videoWidth,t.videoHeight]:[t.width,t.height];let u,h;if(a)u=t.getContext("2d").getImageData(0,0,c,l).data;else if(r||n)u=t.data;else if(o||i||s){if(null==CH)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");CH=new OffscreenCanvas(1,1).getContext("2d")}else CH=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});CH.canvas.width=c,CH.canvas.height=l,CH.drawImage(t,0,0,c,l),u=CH.getImageData(0,0,c,l).data}if(4===e)h=new Int32Array(u);else{const t=c*l;h=new Int32Array(t*e);for(let n=0;n<t;n++)for(let t=0;t<e;++t)h[n*e+t]=u[4*n+t]}return OH(h,[l,c,e],"int32")}function IH(t){if(2!==t.rank&&3!==t.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(t.rank,"."));const e=2===t.rank?1:t.shape[2];if(e>4||2===e)throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(e));if("float32"!==t.dtype&&"int32"!==t.dtype)throw new Error("Unsupported type for toPixels: ".concat(t.dtype,".")+" Please use float32 or int32 tensors.")}async function NH(t,e){let n=vG(t,"img","toPixels");if(!(t instanceof GV)){const t=n;n=RW(t,"int32"),t.dispose()}IH(n);const[r,i]=n.shape.slice(0,2),o=2===n.rank?1:n.shape[2],a=await n.data(),s="float32"===n.dtype?255:1,c=new Uint8ClampedArray(i*r*4);for(let l=0;l<r*i;++l){const t=[0,0,0,255];for(let r=0;r<o;r++){const e=a[l*o+r];if("float32"===n.dtype){if(e<0||e>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(e,"."))}else if("int32"===n.dtype&&(e<0||e>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(e,"."));1===o?(t[0]=e*s,t[1]=e*s,t[2]=e*s):t[r]=e*s}const e=4*l;c[e+0]=Math.round(t[0]),c[e+1]=Math.round(t[1]),c[e+2]=Math.round(t[2]),c[e+3]=Math.round(t[3])}if(null!=e){if(!kH){null!=eV(QU,lG.backendName)&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),kH=!0)}e.width=i,e.height=r;const t=e.getContext("2d"),n=new ImageData(c,i,r);t.putImageData(n,0,0)}return n!==t&&n.dispose(),c}const RH=_G({fromPixels_:PH}),DH=-2,LH=-1;function FH(t,e,n){const r=t.shape.length;kj(r===e.length,(()=>"Error in slice".concat(r,"D: Length of begin ").concat(e," must ")+"match the rank of the array (".concat(r,")."))),kj(r===n.length,(()=>"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")));for(let i=0;i<r;++i)kj(e[i]+n[i]<=t.shape[i],(()=>"Error in slice".concat(r,"D: begin[").concat(i,"] + size[").concat(i,"] ")+"(".concat(e[i]+n[i],") would overflow input.shape[").concat(i,"] (").concat(t.shape[i],")")))}function jH(t){const e=[];let n=0;for(;t>0;)1&t&&e.push(n),t/=2,n++;return e}function UH(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function BH(t,e,n,r){const i=[...t];for(let o=i.length;o<r.length;o++)i.push(1);for(let o=0;o<n;o++)0===o?i[e]=1:(i.splice(e,0,1),i.pop());return i}function zH(t,e,n){return n<=t?n:n-(e-1)}function VH(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function GH(t,e,n,r,i,o,a,s,c){const l=t.length;let u=new Array(l),h=new Array(l),d=new Array(l);if(e.length&&n>0){const c=e[0],l=n+1;u=WH(a,c,l,r,t),h=HH(s,c,l,i,t),d=BH(o,c,l,t)}else for(let p=0;p<l;p++)u[p]=XH(a,r,o,t,p,c),h[p]=YH(s,i,o,t,p,c),d[p]=qH(o,p,c);return{begin:u,end:h,strides:d}}function WH(t,e,n,r,i){const o=[...i],a=VH(n,e);for(let s=0;s<o.length;s++)if(a.indexOf(s)>-1)o[s]=0;else{const i=zH(e,n,s);let a=r[i];t&1<<i&&(a=0),o[s]=a}return o}function HH(t,e,n,r,i){const o=[...i],a=VH(n,e);for(let s=0;s<o.length;s++)if(a.indexOf(s)>-1)o[s]=Number.MAX_SAFE_INTEGER;else{const i=zH(e,n,s);let a=r[i];t&1<<i&&(a=Number.MAX_SAFE_INTEGER),o[s]=a}for(let s=0;s<o.length;s++){const t=i[s];o[s]<0&&(o[s]+=t),o[s]=Mj(0,o[s],i[s])}return o}function qH(t,e,n){let r=t[e];return(n&1<<e||null==r)&&(r=1),r}function XH(t,e,n,r,i,o){let a=e[i];const s=n[i]||1;(t&1<<i||o&1<<i||null==a)&&(a=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const c=r[i];return a<0&&(a+=c),a=Mj(0,a,c-1),a}function YH(t,e,n,r,i,o){let a=e[i];const s=n[i]||1;(t&1<<i||o&1<<i||null==a)&&(a=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const c=r[i];return a<0&&(a+=c),a=s>0?Mj(0,a,c):Mj(-1,a,c-1),a}function KH(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function ZH(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function JH(t,e,n){let r;const i=t.shape.length;let o;return r="number"===typeof e?[e,...new Array(i-1).fill(0)]:e.length<i?e.concat(new Array(i-e.length).fill(0)):e.slice(),r.forEach((t=>{kj(-1!==t,(()=>"slice() does not support negative begin indexing."))})),o=null==n?new Array(i).fill(-1):"number"===typeof n?[n,...new Array(i-1).fill(-1)]:n.length<i?n.concat(new Array(i-n.length).fill(-1)):n,o=o.map(((e,n)=>e>=0?e:(kj(-1===e,(()=>"Negative size values should be exactly -1 but got "+"".concat(e," for the slice() size at index ").concat(n,"."))),t.shape[n]-r[n]))),[r,o]}function $H(t,e,n,r,i,o,a,s,c){let l;if(null==r?(l=new Array(e.length),l.fill(1)):l=r,null!=a&&0!==(a&a-1))throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const h={dims:l.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:l.slice(),beginMask:i,endMask:o,ellipsisMask:a,newAxisMask:s,shrinkAxisMask:c};for(let b=0;b<h.dims;b++)u&&0!==(1<<b&s)&&h.numAddAxisAfterEllipsis++,1<<b&a&&(u=!0);u||(h.ellipsisMask|=1<<h.dims,h.dims++);const d={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=null!=t.begin,e.endValid=null!=t.end,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(DH),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(e.dims," dims, ").concat(e.begin.length,"."));null!=t.begin&&(e.begin[n]=t.begin[r]),null!=t.end&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(LH),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}(h,d);let p=!0,f=!0,m=!0;const g=[],y=[];for(let b=0;b<t.length;++b){if(0===d.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));const e=!!(d.shrinkAxisMask&1<<b),n=t[b];if(-1===n){g.push(e?1:-1);continue}const r=[d.beginMask&1<<b,d.endMask&1<<b],i=[d.strides[b]>0?0:-1,d.strides[b]>0?n:n-1];if(e&&d.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===d.strides[b];const o=!!(d.beginMask&1<<b&&d.endMask&1<<b);if(d.beginValid&&d.endValid){if(e){const t=d.begin[b]<0?n+d.begin[b]:d.begin[b];if(d.begin[b]=t,d.end[b]=d.begin[b]+1,t<0||t>=n)throw Error("slice index ".concat(d.begin[b]," of dimension ").concat(b," out of bounds."))}else d.begin[b]=QH(d.begin[b],0,d.strides[b],n,r,i),d.end[b]=QH(d.end[b],1,d.strides[b],n,r,i);const t=1===d.strides[b]&&0===d.begin[b]&&d.end[b]===n;p=p&&t,f=f&&(0===b&&1===d.strides[b]||t)}else p=p&&1===d.strides[b]&&o,f=f&&(0===b&&1===d.strides[b]||o);let a,s=!1;if(d.beginValid&&d.endValid?(a=d.end[b]-d.begin[b],s=!0):e?(a=1,s=!0):o&&n>=0&&(a=d.strides[b]<0?-n:n,s=!0),s){let t;t=0===a||a<0!==d.strides[b]<0?0:Math.trunc(a/d.strides[b])+(a%d.strides[b]!==0?1:0),g.push(t)}else g.push(-1)}for(let b=0;b<d.finalShapeGatherIndices.length;++b){const t=d.finalShapeGatherIndices[b];t>=0?y.push(g[t]):t===DH&&y.push(1)}const v=y.filter(((t,e)=>d.finalShapeGatherIndices[e]!==DH));return{finalShapeSparse:v,finalShape:y,isIdentity:p,sliceDim0:f,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function QH(t,e,n,r,i,o){if(i[e])return n>0?o[e]:o[e+1&1];{const e=t<0?r+t:t;return e<o[0]?o[0]:e>o[1]?o[1]:e}}const tq=_G({acos_:function(t){const e={x:vG(t,"x","acos")};return lG.runKernel(pU,e)}});const eq=_G({acosh_:function(t){const e={x:vG(t,"x","acosh")};return lG.runKernel(fU,e)}});const nq=_G({addN_:function(t){kj(Array.isArray(t),(()=>"The argument passed to tf.addN() must be a list of tensors")),kj(t.length>=1,(()=>"Must pass at least one tensor to tf.addN(), but got "+"".concat(t.length)));const e=t.map(((t,e)=>vG(t,"tensors".concat(e),"addN"))),n=e[0];e.forEach((t=>{if(t.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),e.forEach((t=>{if(!Rj(t.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));const r=e;return lG.runKernel(gU,r)}});const rq=_G({all_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:vG(t,"x","all","bool")},i={axis:e,keepDims:n};return lG.runKernel("All",r,i)}});const iq=_G({any_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:vG(t,"x","any","bool")},i={axis:e,keepDims:n};return lG.runKernel("Any",r,i)}});const oq=_G({argMax_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:vG(t,"x","argMax")},r={axis:e};return lG.runKernel(yU,n,r)}});const aq=_G({argMin_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:vG(t,"x","argMin")},r={axis:e};return lG.runKernel(vU,n,r)}});const sq=_G({asin_:function(t){const e={x:vG(t,"x","asin")};return lG.runKernel(bU,e)}});const cq=_G({asinh_:function(t){const e={x:vG(t,"x","asinh")};return lG.runKernel(xU,e)}});const lq=_G({atan_:function(t){const e={x:vG(t,"x","atan")};return lG.runKernel(_U,e)}});const uq=_G({atan2_:function(t,e){let n=vG(t,"a","atan2"),r=vG(e,"b","atan2");[n,r]=nG(n,r);const i={a:n,b:r};return lG.runKernel(SU,i)}});const hq=_G({atanh_:function(t){const e={x:vG(t,"x","atanh")};return lG.runKernel(wU,e)}});function dq(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0;return mq(t,[...e,t[3]],n,o,r,null,null,Eq(i))}function pq(t,e,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[s,c]=vq(e);let l;if("channelsLast"===a)l=[s,c,t[3],t[3]];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat ".concat(a));l=[s,c,t[1],t[1]]}return mq(t,l,n,r,i,o,!1,a)}function fq(t,e,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC";const[s,c,l]=bq(e);let u,h;if("NDHWC"===a)h="channelsLast",u=[s,c,l,t[4],t[4]];else{if("NCDHW"!==a)throw new Error("Unknown dataFormat ".concat(a));h="channelsFirst",u=[s,c,l,t[1],t[1]]}return gq(t,u,n,r,i,!1,h,o)}function mq(t,e,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[c,l,u,h]=[-1,-1,-1,-1];if("channelsLast"===s)[c,l,u,h]=t;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));[c,h,l,u]=t}const[d,p,,f]=e,[m,g]=vq(n),[y,v]=vq(r),b=xq(d,y),x=xq(p,v),{padInfo:_,outHeight:w,outWidth:S}=function(t,e,n,r,i,o,a,s,c){let l,u,h;if("number"===typeof t){l={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};const i=function(t,e,n,r,i){null==r&&(r=yq(t,e,n));const o=t[0],a=t[1],s=_q((o-e+2*r)/n+1,i),c=_q((a-e+2*r)/n+1,i);return[s,c]}([e,n],o,r,t,s);u=i[0],h=i[1]}else if("same"===t){u=Math.ceil(e/r),h=Math.ceil(n/i);const t=Math.max(0,(u-1)*r+o-e),s=Math.max(0,(h-1)*i+a-n),c=Math.floor(t/2),d=t-c,p=Math.floor(s/2);l={top:c,bottom:d,left:p,right:s-p,type:"SAME"}}else if("valid"===t)l={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-o+1)/r),h=Math.ceil((n-a+1)/i);else{if("object"!==typeof t)throw Error("Unknown padding parameter: ".concat(t));{const d="channelsLast"===c?t[1][0]:t[2][0],p="channelsLast"===c?t[1][1]:t[2][1],f="channelsLast"===c?t[2][0]:t[3][0],m="channelsLast"===c?t[2][1]:t[3][1];l={top:d,bottom:p,left:f,right:m,type:0===d&&0===p&&0===f&&0===m?"VALID":"EXPLICIT"},u=_q((e-o+d+p)/r+1,s),h=_q((n-a+f+m)/i+1,s)}}return{padInfo:l,outHeight:u,outWidth:h}}(i,l,u,m,g,b,x,o,s),T=a?f*h:f;let E;return"channelsFirst"===s?E=[c,T,w,S]:"channelsLast"===s&&(E=[c,w,S,T]),{batchSize:c,dataFormat:s,inHeight:l,inWidth:u,inChannels:h,outHeight:w,outWidth:S,outChannels:T,padInfo:_,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:p,effectiveFilterHeight:b,effectiveFilterWidth:x,dilationHeight:y,dilationWidth:v,inShape:t,outShape:E,filterShape:e}}function gq(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,[c,l,u,h,d]=[-1,-1,-1,-1,-1];if("channelsLast"===a)[c,l,u,h,d]=t;else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat ".concat(a));[c,d,l,u,h]=t}const[p,f,m,,g]=e,[y,v,b]=bq(n),[x,_,w]=bq(r),S=xq(p,x),T=xq(f,_),E=xq(m,w),{padInfo:A,outDepth:M,outHeight:O,outWidth:C}=function(t,e,n,r,i,o,a,s,c,l,u){let h,d,p,f;"valid"===t&&(t=0);if("number"===typeof t){h={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};const m=function(t,e,n,r,i,o){null==i&&(i=yq(t,e[0],r[0]));const a=[0,0,0,n];for(let s=0;s<3;s++)t[s]+2*i>=e[s]&&(a[s]=_q((t[s]-e[s]+2*i)/r[s]+1,o));return a}([e,n,r,1],[s,c,l],1,[i,o,a],t,u);d=m[0],p=m[1],f=m[2]}else{if("same"!==t)throw Error("Unknown padding parameter: ".concat(t));{d=Math.ceil(e/i),p=Math.ceil(n/o),f=Math.ceil(r/a);const t=(d-1)*i+s-e,u=(p-1)*o+c-n,m=(f-1)*a+l-r,g=Math.floor(t/2),y=t-g,v=Math.floor(u/2),b=u-v,x=Math.floor(m/2);h={top:v,bottom:b,left:x,right:m-x,front:g,back:y,type:"SAME"}}}return{padInfo:h,outDepth:d,outHeight:p,outWidth:f}}(i,l,u,h,y,v,b,S,T,E,s),k=o?g*d:g;let P;return"channelsFirst"===a?P=[c,k,M,O,C]:"channelsLast"===a&&(P=[c,M,O,C,k]),{batchSize:c,dataFormat:a,inDepth:l,inHeight:u,inWidth:h,inChannels:d,outDepth:M,outHeight:O,outWidth:C,outChannels:k,padInfo:A,strideDepth:y,strideHeight:v,strideWidth:b,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:S,effectiveFilterHeight:T,effectiveFilterWidth:E,dilationDepth:x,dilationHeight:_,dilationWidth:w,inShape:t,outShape:P,filterShape:e}}function yq(t,e,n){const r=xq(e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((t[0]*(n-1)-n+r)/2)}function vq(t){return"number"===typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function bq(t){return"number"===typeof t?[t,t,t]:t}function xq(t,e){return e<=1?t:t+(t-1)*(e-1)}function _q(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode ".concat(e))}}function wq(t){const[e,n,r]=vq(t);return 1===e&&1===n&&1===r}function Sq(t,e){return wq(t)||wq(e)}function Tq(t){return vq(t).every((t=>t>0))}function Eq(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(t))}function Aq(t,e,n){if(null!=n){if("string"===typeof e)throw Error("Error in ".concat(t,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(e,"."));if("number"===typeof e)kj(Dj(e),(()=>"Error in ".concat(t,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(e,".")));else{if("object"!==typeof e)throw Error("Error in ".concat(t,": Unknown padding parameter: ").concat(e));e.forEach((e=>{e.forEach((e=>{kj(Dj(e),(()=>"Error in ".concat(t,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(e,".")))}))}))}}}const Mq=_G({reshape_:function(t,e){const n={x:vG(t,"x","reshape","string_or_numeric")},r={shape:e};return lG.runKernel(rz,n,r)}});const Oq=_G({avgPool_:function(t,e,n,r,i){const o=vG(t,"x","avgPool","float32");kj(Sq(n,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")));let a=o,s=!1;3===o.rank&&(s=!0,a=Mq(o,[1,o.shape[0],o.shape[1],o.shape[2]])),kj(4===a.rank,(()=>"Error in avgPool: x must be rank 4 but got rank ".concat(a.rank,"."))),Aq("avgPool",r,i);const c={x:a},l={filterSize:e,strides:n,pad:r,dimRoundingMode:i};let u=lG.runKernel(TU,c,l);return u=RW(u,o.dtype),s?Mq(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const Cq=_G({avgPool3d_:function(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const a=vG(t,"x","avgPool3d","float32");let s=a,c=!1;4===a.rank&&(c=!0,s=Mq(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),kj(5===s.rank,(()=>"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,"."))),kj("NDHWC"===o,(()=>"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o))),kj("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(()=>"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'"))),Aq("avgPool3d",r,i);const l={x:s},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:o};let h=lG.runKernel(EU,l,u);return h=RW(h,s.dtype),c?Mq(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const kq=_G({concat_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;kj(t.length>=1,(()=>"Pass at least one tensor to concat"));const n=bG(t,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((t=>{if("complex64"!==t.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(t.dtype,". "))})),1===n.length)return DW(n[0]);const r=n,i={axis:e};return lG.runKernel(LU,r,i)}});const Pq=_G({matMul_:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=vG(t,"a","matMul"),o=vG(e,"b","matMul");[i,o]=nG(i,o);const a={a:i,b:o},s={transposeA:n,transposeB:r};return lG.runKernel(AU,a,s)}});const Iq=_G({sigmoid_:function(t){const e={x:vG(t,"x","sigmoid","float32")};return lG.runKernel(vz,e)}});const Nq=_G({slice_:function(t,e,n){const r=vG(t,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");const i={x:r},o={begin:e,size:n};return lG.runKernel(mz,i,o)}});const Rq=_G({tanh_:function(t){const e={x:vG(t,"x","tanh","float32")};return lG.runKernel(Lz,e)}});const Dq=_G({basicLSTMCell_:function(t,e,n,r,i,o){const a=vG(t,"forgetBias","basicLSTMCell"),s=vG(e,"lstmKernel","basicLSTMCell"),c=vG(n,"lstmBias","basicLSTMCell"),l=vG(r,"data","basicLSTMCell"),u=vG(i,"c","basicLSTMCell"),h=vG(o,"h","basicLSTMCell"),d=kq([l,h],1),p=Pq(d,s),f=FW(p,c),m=f.shape[0],g=f.shape[1]/4,y=[m,g],v=Nq(f,[0,0],y),b=Nq(f,[0,g],y),x=Nq(f,[0,2*g],y),_=Nq(f,[0,3*g],y),w=FW(BW(Iq(v),Rq(b)),BW(u,Iq(FW(a,x))));return[w,BW(Rq(w),Iq(_))]}});const Lq=_G({batchToSpaceND_:function(t,e,n){const r=vG(t,"x","batchToSpaceND"),i=e.reduce(((t,e)=>t*e));kj(r.rank>=1+e.length,(()=>"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(e.length))),kj(n.length===e.length,(()=>"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(e.length))),kj(r.shape[0]%i===0,(()=>"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(e.join(" * ")," === ").concat(i)));const o={x:r},a={blockShape:e,crops:n};return lG.runKernel(MU,o,a)}});const Fq=_G({batchNorm_:function(t,e,n,r,i,o){null==o&&(o=.001);const a=vG(t,"x","batchNorm"),s=vG(e,"mean","batchNorm"),c=vG(n,"variance","batchNorm");let l,u;null!=i&&(l=vG(i,"scale","batchNorm")),null!=r&&(u=vG(r,"offset","batchNorm")),kj(s.rank===c.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),kj(null==u||s.rank===u.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),kj(null==l||s.rank===l.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const h={x:function(t){let e;return e=0===t.rank||1===t.rank?Mq(t,[1,1,1,t.size]):2===t.rank?Mq(t,[1,1,t.shape[0],t.shape[1]]):3===t.rank?Mq(t,[1,t.shape[0],t.shape[1],t.shape[2]]):t,e}(a),scale:l,offset:u,mean:s,variance:c},d={varianceEpsilon:o},p=lG.runKernel(uB,h,d);return Mq(p,a.shape)}});const jq=_G({batchNorm2d_:function(t,e,n,r,i,o){const a=vG(t,"x","batchNorm"),s=vG(e,"mean","batchNorm"),c=vG(n,"variance","batchNorm");let l,u;return null!=i&&(l=vG(i,"scale","batchNorm")),null!=r&&(u=vG(r,"offset","batchNorm")),kj(2===a.rank,(()=>"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(a.rank,"."))),kj(2===s.rank||1===s.rank,(()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(s.rank,"."))),kj(2===c.rank||1===c.rank,(()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=l&&kj(2===l.rank||1===l.rank,(()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=u&&kj(2===u.rank||1===u.rank,(()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,"."))),Fq(a,s,c,u,l,o)}});const Uq=_G({batchNorm3d_:function(t,e,n,r,i,o){const a=vG(t,"x","batchNorm"),s=vG(e,"mean","batchNorm"),c=vG(n,"variance","batchNorm");let l,u;return null!=i&&(l=vG(i,"scale","batchNorm")),null!=r&&(u=vG(r,"offset","batchNorm")),kj(3===a.rank,(()=>"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(a.rank,"."))),kj(3===s.rank||1===s.rank,(()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(s.rank,"."))),kj(3===c.rank||1===c.rank,(()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=l&&kj(3===l.rank||1===l.rank,(()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=u&&kj(3===u.rank||1===u.rank,(()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,"."))),Fq(a,s,c,u,l,o)}});const Bq=_G({batchNorm4d_:function(t,e,n,r,i,o){const a=vG(t,"x","batchNorm"),s=vG(e,"mean","batchNorm"),c=vG(n,"variance","batchNorm");let l,u;return null!=i&&(l=vG(i,"scale","batchNorm")),null!=r&&(u=vG(r,"offset","batchNorm")),kj(4===a.rank,(()=>"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(a.rank,"."))),kj(4===s.rank||1===s.rank,(()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(s.rank,"."))),kj(4===c.rank||1===c.rank,(()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=l&&kj(4===l.rank||1===l.rank,(()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=u&&kj(4===u.rank||1===u.rank,(()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,"."))),Fq(a,s,c,u,l,o)}});const zq=_G({bincount_:function(t,e,n){const r=vG(t,"x","bincount"),i=vG(e,"weights","bincount");kj("int32"===r.dtype,(()=>"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype))),kj(n>=0,(()=>"size must be non-negative, but got ".concat(n,"."))),kj(i.size===r.size||0===i.size,(()=>"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(i.shape,".")));const o={x:r,weights:i},a={size:n};return lG.runKernel(OU,o,a)}});const Vq=_G({bitwiseAnd_:function(t,e){const n=vG(t,"x","bitwiseAnd"),r=vG(e,"y","bitwiseAnd");if(!Rj(n.shape,r.shape))throw new Error("BitwiseAnd: Tensors must have the same shape. x: ".concat(n.shape,", y: ").concat(r.shape));if("int32"!==n.dtype||"int32"!==r.dtype)throw new Error("BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ".concat(n.dtype," and type of y: ").concat(r.dtype));const i={a:n,b:r};return lG.runKernel(CU,i)}});const Gq=_G({broadcastArgs_:function(t,e){const n=vG(t,"s0","broadcastArgs","int32"),r=vG(e,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));const i={s0:n,s1:r};return lG.runKernel(kU,i)}});const Wq=_G({broadcastTo_:function(t,e){let n=vG(t,"broadcastTo","x");const r=n.shape;if(tU(e),e.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(e.length," < input.rank=").concat(n.rank,"."));if(e.length>n.rank){const t=n.shape.slice();for(;t.length<e.length;)t.unshift(1);n=Mq(n,t)}const i=n.shape,o=Array.from(e);for(let l=e.length-1;l>=0;l--)if(i[l]===e[l])o[l]=1;else if(1!==n.shape[l])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(e,"]."));const a=o.map(((t,e)=>t>1?e:-1)).filter((t=>t>=0));if(0===a.length)return DW(n);const s={x:n},c={reps:o};return lG.runKernel(Fz,s,c)}});const Hq=_G({ceil_:function(t){const e={x:vG(t,"x","ceil","float32")};return lG.runKernel(IU,e)}});const qq=_G({clipByValue_:function(t,e,n){const r=vG(t,"x","clipByValue");if(kj(e<=n,(()=>"Error in clip: min (".concat(e,") must be ")+"less than or equal to max (".concat(n,")."))),e===n)return $W(r.shape,e,r.dtype);const i={x:r},o={clipValueMin:e,clipValueMax:n};return lG.runKernel(NU,i,o)}});const Xq=_G({concat1d_:function(t){return kq(t,0)}});const Yq=_G({concat2d_:function(t,e){return kq(t,e)}});const Kq=_G({concat3d_:function(t,e){return kq(t,e)}});const Zq=_G({concat4d_:function(t,e){return kq(t,e)}});const Jq=_G({conv2d_:function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6?arguments[6]:void 0;const s=vG(t,"x","conv2d","float32"),c=vG(e,"filter","conv2d","float32");let l=s,u=!1;3===s.rank&&(u=!0,l=Mq(s,[1,s.shape[0],s.shape[1],s.shape[2]])),kj(4===l.rank,(()=>"Error in conv2d: input must be rank 4, but got rank ".concat(l.rank,"."))),kj(4===c.rank,(()=>"Error in conv2d: filter must be rank 4, but got rank "+"".concat(c.rank,"."))),Aq("conv2d",r,a);const h="NHWC"===i?l.shape[3]:l.shape[1];kj(h===c.shape[2],(()=>"Error in conv2d: depth of input (".concat(h,") must match ")+"input depth for filter ".concat(c.shape[2],"."))),kj(Sq(n,o),(()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'"))),kj(Tq(o),(()=>"Error in conv2D: Dilated rates should be larger than 0.")),kj(Tq(n),(()=>"Error in conv2D: Strides should be larger than 0."));const d={x:l,filter:c},p={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a},f=lG.runKernel(FU,d,p);return u?Mq(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const $q=_G({conv1d_:function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6?arguments[6]:void 0;const s=vG(t,"x","conv1d"),c=vG(e,"filter","conv1d");let l=s,u=!1;2===s.rank&&(u=!0,l=Mq(s,[1,s.shape[0],s.shape[1]])),kj(3===l.rank,(()=>"Error in conv1d: input must be rank 3, but got rank ".concat(l.rank,"."))),kj(3===c.rank,(()=>"Error in conv1d: filter must be rank 3, but got rank "+"".concat(c.rank,"."))),Aq("conv1d",r,a),kj(l.shape[2]===c.shape[1],(()=>"Error in conv1d: depth of input (".concat(l.shape[2],") must match ")+"input depth for filter ".concat(c.shape[1],"."))),kj(Sq(n,o),(()=>"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(o,"'"))),kj(Tq(o),(()=>"Error in conv1D: Dilated rates should be larger than 0.")),kj(Tq(n),(()=>"Error in conv1D: Stride should be larger than 0.")),kj("NWC"===i,(()=>"Error in conv1d: got dataFormat of ".concat(i," but only NWC is currently supported.")));const h=Mq(c,[1,c.shape[0],c.shape[1],c.shape[2]]),d=Mq(l,[l.shape[0],1,l.shape[1],l.shape[2]]),p=Jq(d,h,[1,n],r,"NHWC",[1,o],a);return Mq(p,u?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});const Qq=_G({conv2DBackpropInput_:function(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",a=arguments.length>6?arguments[6]:void 0;kj(t.length===e.rank,(()=>"Length of inShape "+"(".concat(t.length,") and rank of dy (").concat(e.rank,") must match")));let s=t,c=e,l=!1;3===e.rank&&(l=!0,c=Mq(e,[1,e.shape[0],e.shape[1],e.shape[2]]),s=[1,t[0],t[1],t[2]]),kj(4===s.length,(()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,"."))),kj(4===c.rank,(()=>"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(c.rank))),kj(4===n.rank,(()=>"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)));const u="NHWC"===o?s[3]:s[1],h="NHWC"===o?c.shape[3]:c.shape[1];kj(u===n.shape[2],(()=>"Error in conv2dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[2],"."))),kj(h===n.shape[3],(()=>"Error in conv2dDerInput: depth of output (".concat(h,") must ")+"match output depth for filter ".concat(n.shape[3],"."))),Aq("conv2dDerInput",i,a);const d={dy:c,filter:n},p={strides:r,pad:i,dataFormat:o,dimRoundingMode:a,inputShape:s},f=lG.runKernel(UU,d,p);return l?Mq(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const tX=_G({conv2dTranspose_:function(t,e,n,r,i,o){const a=vG(t,"x","conv2dTranspose"),s=vG(e,"filter","conv2dTranspose");return Qq(n,a,s,r,i,"NHWC",o)}});const eX=_G({conv3d_:function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1];const a=vG(t,"x","conv3d"),s=vG(e,"filter","conv3d");let c=a,l=!1;4===a.rank&&(l=!0,c=Mq(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),kj(5===c.rank,(()=>"Error in conv3d: input must be rank 5, but got rank ".concat(c.rank,"."))),kj(5===s.rank,(()=>"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,"."))),kj(c.shape[4]===s.shape[3],(()=>"Error in conv3d: depth of input (".concat(c.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],"."))),kj(Sq(n,o),(()=>"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'"))),kj("NDHWC"===i,(()=>"Error in conv3d: got dataFormat of ".concat(i," but only NDHWC is currently supported."))),kj(Tq(o),(()=>"Error in conv3D: Dilated rates should be larger than 0.")),kj(Tq(n),(()=>"Error in conv3D: Strides should be larger than 0."));const u={x:c,filter:s},h={strides:n,pad:r,dataFormat:i,dilations:o},d=lG.runKernel(BU,u,h);return l?Mq(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const nX=_G({conv3DBackpropInput_:function(t,e,n,r,i){kj(t.length===e.rank,(()=>"Length of inShape "+"(".concat(t.length,") and rank of dy (").concat(e.rank,") must match")));let o=t,a=e,s=!1;4===e.rank&&(s=!0,a=Mq(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),o=[1,t[0],t[1],t[2],t[3]]);const c=o[4],l=a.shape[4];kj(5===o.length,(()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(o.length,"."))),kj(5===a.rank,(()=>"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(a.rank))),kj(5===n.rank,(()=>"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank))),kj(c===n.shape[3],(()=>"Error in conv3dDerInput: depth of input (".concat(c,") must ")+"match input depth for filter ".concat(n.shape[3],"."))),kj(l===n.shape[4],(()=>"Error in conv3dDerInput: depth of output (".concat(l,") must ")+"match output depth for filter ".concat(n.shape[4],".")));const u={dy:a,filter:n},h={pad:i,strides:r,inputShape:o},d=lG.runKernel(zU,u,h);return s?Mq(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const rX=_G({conv3dTranspose_:function(t,e,n,r,i){const o=vG(t,"x","conv3dTranspose"),a=vG(e,"filter","conv3dTranspose");return nX(n,o,a,r,i)}});const iX=_G({cos_:function(t){const e={x:vG(t,"x","cos","float32")};return lG.runKernel("Cos",e)}});const oX=_G({cosh_:function(t){const e={x:vG(t,"x","cosh","float32")};return lG.runKernel(VU,e)}});const aX=_G({cumprod_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i={x:vG(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return lG.runKernel(GU,i,o)}});const sX=_G({cumsum_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i={x:vG(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return lG.runKernel(WU,i,o)}});const cX=_G({denseBincount_:function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=vG(t,"x","denseBincount"),o=vG(e,"weights","denseBincount");kj("int32"===i.dtype,(()=>"Error in denseBincount: input "+"dtype must be int32, but got ".concat(i.dtype))),kj(i.rank<=2,(()=>"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(i.rank,"."))),kj(n>=0,(()=>"size must be non-negative, but got ".concat(n,"."))),kj(o.size===i.size||0===o.size,(()=>"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(i.shape,", weights shape: ")+"".concat(o.shape,".")));const a={x:i,weights:o},s={size:n,binaryOutput:r};return lG.runKernel(qU,a,s)}});const lX=_G({depthToSpace_:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC";const r=vG(t,"x","depthToSpace","float32"),i="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],a="NHWC"===n?r.shape[3]:r.shape[1];kj(e>1,(()=>"blockSize should be > 1 for depthToSpace, but was: ".concat(e))),kj(i*e>=0,(()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(e,"  for depthToSpace with input shape\n    ").concat(r.shape))),kj(o*e>=0,(()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(o," and ").concat(e," for depthToSpace with input shape\n        ").concat(r.shape))),kj(a%(e*e)===0,(()=>"Dimension size must be evenly divisible by ".concat(e*e," but is ").concat(a," for depthToSpace with input shape ").concat(r.shape)));const s={x:r},c={blockSize:e,dataFormat:n};return lG.runKernel(XU,s,c)}});const uX=_G({depthwiseConv2d_:function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6?arguments[6]:void 0;const s=vG(t,"x","depthwiseConv2d","float32"),c=vG(e,"filter","depthwiseConv2d","float32");let l=s,u=!1;3===s.rank&&(u=!0,l=Mq(s,[1,s.shape[0],s.shape[1],s.shape[2]])),kj(4===l.rank,(()=>"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,"."))),kj(4===c.rank,(()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(c.rank,".")));const h="NHWC"===i?l.shape[3]:l.shape[1];kj(h===c.shape[2],(()=>"Error in depthwiseConv2d: number of input channels "+"(".concat(h,") must match the inChannels dimension in ")+"filter ".concat(c.shape[2],"."))),Aq("depthwiseConv2d",r,a);const d={x:l,filter:c},p={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a},f=lG.runKernel(YU,d,p);return u?Mq(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const hX=_G({diag_:function(t){const e={x:vG(t,"x","diag")};return lG.runKernel(JU,e)}});const dX=_G({dilation2d_:function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC";const a=vG(t,"x","dilation2d"),s=vG(e,"filter","dilation2d");kj(3===a.rank||4===a.rank,(()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(a.rank,"."))),kj(3===s.rank,(()=>"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,"."))),kj("NHWC"===o,(()=>"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(o)));let c=a,l=!1;3===a.rank&&(c=Mq(a,[1,a.shape[0],a.shape[1],a.shape[2]]),l=!0),kj(c.shape[3]===s.shape[2],(()=>"Error in dilation2d:  input and filter must have the same depth: ".concat(c.shape[3]," vs ").concat(s.shape[2])));const u={x:c,filter:s},h={strides:n,pad:r,dilations:i},d=lG.runKernel($U,u,h);return l?Mq(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});const pX=_G({equal_:function(t,e){let n=vG(t,"a","equal","string_or_numeric"),r=vG(e,"b","equal","string_or_numeric");[n,r]=nG(n,r),iH(n.shape,r.shape);const i={a:n,b:r};return lG.runKernel(nB,i)}});const fX=_G({where_:function(t,e,n){const r=vG(e,"a","where"),i=vG(n,"b","where"),o=vG(t,"condition","where","bool"),a=iH(iH(o.shape,r.shape),i.shape),s={condition:Wq(o,a),t:Wq(r,a),e:Wq(i,a)};return lG.runKernel(pz,s)}});const mX=_G({divNoNan_:function(t,e){let n=vG(t,"a","div"),r=vG(e,"b","div");[n,r]=nG(n,r);const i=UW(n,r),o=GW(i),a=pX(r,o);return fX(a,o,i)}});const gX=_G({dot_:function(t,e){const n=vG(t,"t1","dot"),r=vG(e,"t2","dot");kj((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")));const i=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];if(kj(i===o,(()=>"Error in dot: inner dimensions of inputs must match, but got "+"".concat(i," and ").concat(o,"."))),1===n.rank&&1===r.rank){const t=Mq(n,[1,-1]),e=Mq(r,[-1,1]),i=Pq(t,e);return Mq(i,[])}if(1===n.rank&&2===r.rank){const t=Mq(n,[1,-1]),e=Mq(r,[r.shape[0],r.shape[1]]),i=Pq(t,e);return Mq(i,[i.size])}if(2===n.rank&&1===r.rank){const t=Mq(r,[-1,1]),e=Pq(n,t);return Mq(e,[e.size])}{const t=Mq(r,[r.shape[0],r.shape[1]]);return Pq(n,t)}}});const yX=_G({einsum_:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i=n.map(((t,e)=>vG(t,"tensors".concat(e),"einsum"))),o={equation:t};return lG.runKernel(eB,i,o)}});const vX=_G({elu_:function(t){const e={x:vG(t,"x","elu","float32")};return lG.runKernel("Elu",e)}});const bX=_G({ensureShape_:function(t,e){const n=vG(t,"x","ensureShape","string_or_numeric");if(!function(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(null!==t[n]&&null!==e[n]&&t[n]!==e[n])return!1;return!0}(n.shape,e))throw new Error("EnsureShape: Shape of tensor ".concat(n.shape," is not compatible with expected shape ").concat(e));return t}});const xX=_G({erf_:function(t){let e=vG(t,"x","erf");kj("int32"===e.dtype||"float32"===e.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===e.dtype&&(e=RW(e,"float32"));const n={x:e};return lG.runKernel("Erf",n)}});function _X(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function wX(t,e,n){const r=t.length+e.length,i=[];let o=0,a=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?i.push(t[o++]):i.push(e[a++]);return i}function SX(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)-1===e.indexOf(i)&&n.push(t[i]);return[n,e.map((e=>t[e]))]}function TX(t,e){return wX(t,e.map((t=>1)),e)}function EX(t,e,n){kj(_X(e,n),(()=>"".concat(t," supports only inner-most axes for now. ")+"Got axes ".concat(e," and rank-").concat(n," input.")))}function AX(t,e){if(_X(t,e))return null;const n=[];for(let r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach((t=>n.push(t))),n}function MX(t){return t.map(((t,e)=>[e,t])).sort(((t,e)=>t[1]-e[1])).map((t=>t[0]))}function OX(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}const CX=_G({max_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:vG(t,"x","max")},i={reductionIndices:e,keepDims:n};return lG.runKernel("Max",r,i)}});const kX=_G({min_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:vG(t,"x","min")},i={axis:e,keepDims:n};return lG.runKernel("Min",r,i)}});const PX=_G({sum_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=vG(t,"x","sum");"bool"===r.dtype&&(r=RW(r,"int32"));const i={x:r},o={axis:e,keepDims:n};return lG.runKernel("Sum",i,o)}});function IX(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===t.rank)return eH(t);if(1!==t.rank&&null===n)return IX(Mq(t,[-1]),e,n);if(1===t.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===e)return PX(eH(t),n);if(e===1/0)return CX(eH(t),n);if(e===-1/0)return kX(eH(t),n);if("euclidean"===e||2===e)return zW(PX(QW(eH(t),HW(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(e))}if(Array.isArray(n)&&2===n.length){if(1===e)return CX(PX(eH(t),n[0]),n[1]-1);if(e===1/0)return CX(PX(eH(t),n[1]),n[0]);if(e===-1/0)return kX(PX(eH(t),n[1]),n[0]);if("fro"===e||"euclidean"===e)return zW(PX(VW(t),n));throw new Error("Error in norm: invalid ord value: ".concat(e))}throw new Error("Error in norm: invalid axis: ".concat(n))}const NX=_G({norm_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=IX(t=vG(t,"x","norm"),e,n);let o=i.shape;if(r){const e=Uj(n,t.shape);o=TX(i.shape,e)}return Mq(i,o)}});const RX=_G({euclideanNorm_:function(t){return NX(t,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});const DX=_G({exp_:function(t){const e={x:vG(t,"x","exp")};return lG.runKernel(rB,e)}});const LX=_G({expandDims_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=vG(t,"x","expandDims","string_or_numeric");kj(e<=n.rank,(()=>"Axis must be <= rank of the tensor"));const r={input:n},i={dim:e};return lG.runKernel(iB,r,i)}});const FX=_G({expm1_:function(t){const e={x:vG(t,"x","expm1")};return lG.runKernel(oB,e)}});const jX=_G({tile_:function(t,e){const n=vG(t,"x","tile","string_or_numeric");kj(n.rank===e.length,(()=>"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(e,".")));const r={x:n},i={reps:e};return lG.runKernel(Fz,r,i)}});const UX=_G({eye_:function(t,e,n){null==e&&(e=t);const r=NW([t,e],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),i=t<=e?t:e;for(let a=0;a<i;++a)r.set(1,a,a);const o=Mq(r.toTensor(),[t,e]);if(null==n)return o;if(1===n.length)return jX(LX(o,0),[n[0],1,1]);if(2===n.length)return jX(LX(LX(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return jX(LX(LX(LX(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});const BX=_G({floor_:function(t){const e={x:vG(t,"x","floor","float32")};return lG.runKernel(cB,e)}});const zX=_G({gather_:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i={x:vG(t,"x","gather"),indices:vG(e,"indices","gather","int32")},o={axis:n,batchDims:r};return lG.runKernel(hB,i,o)}});const VX=_G({greater_:function(t,e){let n=vG(t,"a","greater","string_or_numeric"),r=vG(e,"b","greater","string_or_numeric");[n,r]=nG(n,r),iH(n.shape,r.shape);const i={a:n,b:r};return lG.runKernel(pB,i)}});const GX=_G({greaterEqual_:function(t,e){let n=vG(t,"a","greaterEqual","string_or_numeric"),r=vG(e,"b","greaterEqual","string_or_numeric");[n,r]=nG(n,r),iH(n.shape,r.shape);const i={a:n,b:r};return lG.runKernel(fB,i)}});const WX=_G({imag_:function(t){const e={input:vG(t,"input","imag")};return lG.runKernel(yB,e)}});const HX=_G({isFinite_:function(t){const e={x:vG(t,"x","isFinite")};return lG.runKernel(vB,e)}});const qX=_G({isInf_:function(t){const e={x:vG(t,"x","isInf")};return lG.runKernel(bB,e)}});const XX=_G({isNaN_:function(t){const e={x:vG(t,"x","isNaN")};return lG.runKernel(xB,e)}});const YX=_G({leakyRelu_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;const n={x:vG(t,"x","leakyRelu")},r={alpha:e};return lG.runKernel(_B,n,r)}});const KX=_G({less_:function(t,e){let n=vG(t,"a","less","string_or_numeric"),r=vG(e,"b","less","string_or_numeric");[n,r]=nG(n,r),iH(n.shape,r.shape);const i={a:n,b:r};return lG.runKernel(wB,i)}});const ZX=_G({lessEqual_:function(t,e){let n=vG(t,"a","lessEqual","string_or_numeric"),r=vG(e,"b","lessEqual","string_or_numeric");[n,r]=nG(n,r),iH(n.shape,r.shape);const i={a:n,b:r};return lG.runKernel(SB,i)}});function JX(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return lG.runKernel(TB,{},r)}const $X=_G({localResponseNormalization_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const o=vG(t,"x","localResponseNormalization");kj(4===o.rank||3===o.rank,(()=>"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(o.rank,"."))),kj(Dj(e),(()=>"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(e,".")));let a=o,s=!1;3===o.rank&&(s=!0,a=Mq(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const c={x:a},l={depthRadius:e,bias:n,alpha:r,beta:i},u=lG.runKernel("LRN",c,l);return s?Mq(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const QX=_G({log_:function(t){const e={x:vG(t,"x","log","float32")};return lG.runKernel(EB,e)}});const tY=_G({log1p_:function(t){const e={x:vG(t,"x","log1p")};return lG.runKernel(AB,e)}});const eY=_G({neg_:function(t){const e={x:vG(t,"x","neg")};return lG.runKernel(UB,e)}});const nY=_G({softplus_:function(t){const e={x:vG(t,"x","softplus")};return lG.runKernel(bz,e)}});const rY=_G({logSigmoid_:function(t){const e=vG(t,"x","logSigmoid");return WW((t=>({value:eY(nY(eY(t))),gradFunc:e=>BW(e,Iq(eY(t)))})))(e)}});const iY=_G({logSoftmax_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=vG(t,"logits","logSoftmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(e));const r=WW(((t,n)=>{const r=CX(t,e,!0),i=tH(t,r),o=tH(RW(i,"float32"),QX(PX(DX(i),e,!0)));n([o]);return{value:o,gradFunc:(t,n)=>{const[r]=n,i=DX(r);return tH(t,BW(PX(t,e,!0),i))}}}));return r(n)}});const oY=_G({logSumExp_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=vG(t,"x","logSumExp"),i=Uj(e,r.shape),o=CX(r,i,!0),a=tH(r,o),s=DX(a),c=PX(s,i),l=QX(c),u=FW(Mq(o,l.shape),l);if(n){const t=TX(u.shape,i);return Mq(u,t)}return u}});const aY=_G({logicalAnd_:function(t,e){const n=vG(t,"a","logicalAnd","bool"),r=vG(e,"b","logicalAnd","bool");iH(n.shape,r.shape);const i={a:n,b:r};return lG.runKernel(MB,i)}});const sY=_G({logicalNot_:function(t){const e={x:vG(t,"x","logicalNot","bool")};return lG.runKernel(OB,e)}});const cY=_G({logicalOr_:function(t,e){const n=vG(t,"a","logicalOr","bool"),r=vG(e,"b","logicalOr","bool");iH(n.shape,r.shape);const i={a:n,b:r};return lG.runKernel(CB,i)}});const lY=_G({logicalXor_:function(t,e){const n=vG(t,"a","logicalXor","bool"),r=vG(e,"b","logicalXor","bool");return iH(n.shape,r.shape),aY(cY(t,e),sY(aY(t,e)))}}),uY=2147483648;const hY=_G({searchSorted_:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left";const r=vG(t,"sortedSequence","searchSorted"),i=vG(e,"values","searchSorted"),o=r.shape[r.shape.length-1],a=i.shape[i.shape.length-1],s=Mq(r,[-1,o]),c=Mq(i,[-1,a]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==c.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Nj(c.shape)>=uY)throw new Error("values tensor size must less than ".concat(uY));if(s.shape[1]>=uY)throw new Error("trailing dim_size must less than ".concat(uY," for int32 output type, was ").concat(s.shape[1]));const l={sortedSequence:s,values:c},u={side:n};return lG.runKernel(dz,l,u)}});function dY(t,e){return hY(t,e,"left")}const pY=_G({maxPool_:function(t,e,n,r,i){const o=vG(t,"x","maxPool");let a=o,s=!1;3===o.rank&&(s=!0,a=Mq(o,[1,o.shape[0],o.shape[1],o.shape[2]])),kj(4===a.rank,(()=>"Error in maxPool: input must be rank 4 but got rank ".concat(a.rank,"."))),kj(Sq(n,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'"))),Aq("maxPool",r,i);const c={x:a},l={filterSize:e,strides:n,pad:r,dimRoundingMode:i},u=lG.runKernel(PB,c,l);return s?Mq(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const fY=_G({maxPool3d_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const a=vG(t,"x","maxPool3d");let s=a,c=!1;4===a.rank&&(c=!0,s=Mq(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),kj(5===s.rank,(()=>"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,"."))),kj("NDHWC"===o,(()=>"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o))),Aq("maxPool3d",r,i);const l={x:s},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:o},h=lG.runKernel(IB,l,u);return c?Mq(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const mY=_G({maxPoolWithArgmax_:function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o={x:vG(t,"x","maxPoolWithArgmax")},a={filterSize:e,strides:n,pad:r,includeBatchInIndex:i},s=lG.runKernel(NB,o,a);return{result:s[0],indexes:s[1]}}});const gY=_G({mean_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:vG(t,"x","mean")},i={axis:e,keepDims:n};return lG.runKernel(RB,r,i)}});function yY(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(tU(t),"complex64"===e){const e=yY(t,"float32"),n=yY(t,"float32");return wG(e,n)}const n=Qj(Nj(t),e);return lG.makeTensor(n,t,e)}function vY(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(tU(t),"complex64"===e){const e=vY(t,"float32"),n=yY(t,"float32");return wG(e,n)}const n=$j(Nj(t),e);return lG.makeTensor(n,t,e)}function bY(t,e){let{indexing:n="xy"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("xy"!==n&&"ij"!==n)throw new TypeError("".concat(n," is not a valid third argument to meshgrid"));if(void 0===t)return[];let r=vG(t,"x","meshgrid",t instanceof GV?t.dtype:"float32");if(void 0===e)return[r];let i=vG(e,"y","meshgrid",e instanceof GV?e.dtype:"float32");const o=Nj(r.shape),a=Nj(i.shape);return"xy"===n?(r=Mq(r,[1,-1]),i=Mq(i,[-1,1]),[Pq(vY([a,1],r.dtype),r),Pq(i,vY([1,o],i.dtype))]):(r=Mq(r,[-1,1]),i=Mq(i,[1,-1]),[Pq(r,vY([1,a],r.dtype)),Pq(vY([o,1],i.dtype),i)])}const xY=_G({minimum_:function(t,e){let n=vG(t,"a","minimum"),r=vG(e,"b","minimum");[n,r]=nG(n,r),"bool"===n.dtype&&(n=RW(n,"int32"),r=RW(r,"int32")),iH(n.shape,r.shape);const i={a:n,b:r};return lG.runKernel(DB,i)}});const _Y=_G({mirrorPad_:function(t,e,n){kj("reflect"===n||"symmetric"===n,(()=>"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")));const r=vG(t,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");kj(e.length===r.rank,(()=>"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(e.length,".")));const i="reflect"===n?1:0;for(let s=0;s<r.rank;s++)kj(2===e[s].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),kj(e[s][0]>=0&&e[s][0]<=r.shape[s]-i&&e[s][1]>=0&&e[s][1]<=r.shape[s]-i,(()=>"Padding in dimension ".concat(s," cannot be greater than or equal ")+"to ".concat(r.shape[s]-i," or less than 0 for input of ")+"shape ".concat(r.shape)));const o={paddings:e,mode:n},a={x:r};return lG.runKernel(LB,a,o)}});const wY=_G({mod_:function(t,e){let n=vG(t,"a","mod"),r=vG(e,"b","mod");[n,r]=nG(n,r);const i={a:n,b:r};return lG.runKernel("Mod",i)}});const SY=_G({moments_:function(t){let e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=Uj(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(t=vG(t,"x","moments")).shape),r=gY(t,n,e);let i=r.shape;e||(i=TX(r.shape,n));const o=VW(tH(RW(t,"float32"),Mq(r,i)));return{mean:r,variance:gY(o,n,e)}}});const TY=_G({multiRNNCell_:function(t,e,n,r){const i=vG(e,"data","multiRNNCell"),o=bG(n,"c","multiRNNCell"),a=bG(r,"h","multiRNNCell");let s=i;const c=[];for(let h=0;h<t.length;h++){const e=t[h](s,o[h],a[h]);c.push(e[0]),c.push(e[1]),s=e[1]}const l=[],u=[];for(let h=0;h<c.length;h+=2)l.push(c[h]),u.push(c[h+1]);return[l,u]}});const EY=_G({multinomial_:function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=vG(t,"logits","multinomial"),o=i.size,a=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(o,"."));if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(a));n=n||Math.random();const s={logits:1===a?Mq(i,[1,-1]):i},c={numSamples:e,seed:n,normalized:r},l=lG.runKernel(FB,s,c);return 1===a?Mq(l,[l.size]):l}});const AY=_G({notEqual_:function(t,e){let n=vG(t,"a","notEqual","string_or_numeric"),r=vG(e,"b","notEqual","string_or_numeric");[n,r]=nG(n,r),iH(n.shape,r.shape);const i={a:n,b:r};return lG.runKernel(BB,i)}});const MY=_G({oneHot_:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(e<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(e));const o={indices:vG(t,"indices","oneHot","int32")},a={dtype:i,depth:e,onValue:n,offValue:r};return lG.runKernel(HB,o,a)}});const OY=_G({onesLike_:function(t){const e={x:vG(t,"x","onesLike")};return lG.runKernel(WB,e)}});const CY=_G({outerProduct_:function(t,e){const n=vG(t,"v1","outerProduct"),r=vG(e,"v2","outerProduct");kj(1===n.rank&&1===r.rank,(()=>"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")));const i=Mq(n,[-1,1]),o=Mq(r,[1,-1]);return Pq(i,o)}});const kY=_G({pad_:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=vG(t,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:n},o={x:r};return lG.runKernel(XB,o,i)}});const PY=_G({pad1d_:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return kj(2===e.length,(()=>"Invalid number of paddings. Must be length of 2.")),kY(t,[e],n)}});const IY=_G({pad2d_:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return kj(2===e.length&&2===e[0].length&&2===e[1].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),kY(t,e,n)}});const NY=_G({pad3d_:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return kj(3===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),kY(t,e,n)}});const RY=_G({pad4d_:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return kj(4===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length&&2===e[3].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),kY(t,e,n)}});const DY=_G({spaceToBatchND_:function(t,e,n){const r=vG(t,"x","spaceToBatchND");kj(r.rank>=1+e.length,(()=>"input rank ".concat(r.rank," should be > than [blockShape] ").concat(e.length))),kj(n.length===e.length,(()=>"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(e.length))),kj(r.shape.reduce(((t,r,i)=>i>0&&i<=e.length?t&&(r+n[i-1][0]+n[i-1][1])%e[i-1]===0:t),!0),(()=>"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(e.toString())));const i={x:r},o={blockShape:e,paddings:n};return lG.runKernel(_z,i,o)}});const LY=_G({pool_:function(t,e,n,r,i,o,a){null==i&&(i=[1,1]),null==o&&(o=1),0===r&&(r="valid");const s=vG(t,"x","maxPool");let c=s,l=!1;3===s.rank&&(l=!0,c=Mq(s,[1,s.shape[0],s.shape[1],s.shape[2]])),kj(Sq(o,i),(()=>"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(i,"'")));const u=pq(c.shape,e,o,i,r),h=[u.dilationHeight,u.dilationWidth];let d;d="same"===r?function(t,e){const n=t.map(((t,n)=>t+(t-1)*(e[n]-1))),r=n.map((t=>t-1)),i=r.map((t=>Math.floor(t/2))),o=r.map(((t,e)=>t-i[e]));return r.map(((t,e)=>[i[e],o[e]]))}([u.filterHeight,u.filterWidth],h):[[0,0],[0,0]];const p=1===h[0]&&1===h[1],[f,m]=function(t,e,n){const r=n.map((t=>t[0])),i=n.map((t=>t[1])),o=t.concat(r,i),a=e.map(((t,e)=>(t-o[e]%t)%t)),s=i.map(((t,e)=>t+a[e])),c=e.map(((t,e)=>[r[e],s[e]])),l=e.map(((t,e)=>[0,a[e]]));return[c,l]}([u.inHeight,u.inWidth],h,d),g=p?r:"valid",y=p?c:DY(c,h,f),v=("avg"===n?()=>Oq(y,e,o,g,a):()=>pY(y,e,o,g,a))(),b=p?v:Lq(v,h,m);return l?Mq(b,[b.shape[1],b.shape[2],b.shape[3]]):b}});const FY=_G({prelu_:function(t,e){const n={x:vG(t,"x","prelu"),alpha:vG(e,"alpha","prelu")};return lG.runKernel(YB,n)}});const jY=_G({prod_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=vG(t,"x","prod");"bool"===r.dtype&&(r=RW(r,"int32"));const i={x:r},o={axis:e,keepDims:n};return lG.runKernel(KB,i,o)}});const UY=_G({raggedGather_:function(t,e,n,r){const i=t.map(((t,e)=>vG(t,"tensors".concat(e),"raggedGather","int32"))),o={paramsNestedSplits:i,paramsDenseValues:vG(e,"paramsDenseValues","raggedGather"),indices:vG(n,"indices","raggedGather","int32")},a={outputRaggedRank:r},s=lG.runKernel(ZB,o,a);return{outputNestedSplits:s.slice(0,s.length-1),outputDenseValues:s[s.length-1]}}});const BY=_G({raggedRange_:function(t,e,n){const r=vG(t,"starts","raggedRange"),i={starts:r,limits:vG(e,"limits","raggedRange",r.dtype),deltas:vG(n,"deltas","raggedRange",r.dtype)},o=lG.runKernel(JB,i);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}});const zY=_G({raggedTensorToTensor_:function(t,e,n,r,i){const o=vG(t,"shape","raggedTensorToTensor","int32"),a=vG(e,"values","raggedTensorToTensor"),s=vG(n,"defaultValue","raggedTensorToTensor",a.dtype),c=r.map(((t,e)=>vG(t,"tensors".concat(e),"raggedTensorToTensor","int32"))),l={shape:o,values:a,defaultValue:s,rowPartitionTensors:c},u={rowPartitionTypes:i};return lG.runKernel($B,l,u)}});const VY=_G({rand_:function(t,e,n){tU(t);const r=Nj(t);let i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));i=new Uint8Array(r)}for(let o=0;o<r;o++)i[o]=e();return lG.makeTensor(i,t,n)}});var GY=__webpack_require__(4334);class WY{constructor(t,e,n,r,i){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=i||Math.random();this.random=GY.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const t=this.nextVal;return this.nextVal=NaN,t}let t,e,n=!1;for(;!n;){let r,i,o;do{r=2*this.random()-1,i=2*this.random()-1,o=r*r+i*i}while(o>=1||0===o);const a=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*r*a,e=this.mean+this.stdDev*i*a,this.truncated&&!this.isValidTruncated(t)||(n=!0)}return this.truncated&&!this.isValidTruncated(e)||(this.nextVal=this.convertValue(e)),this.convertValue(t)}convertValue(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class HY{constructor(t,e,n,r){this.alpha=t,this.beta=1/e,this.dtype=n;const i=r||Math.random();this.randu=GY.alea(i.toString()),this.randn=new WY(0,1,n,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,e,n,r,i,o;for(;;){do{r=this.randn.nextValue(),o=1+this.c*r}while(o<=0);if(o*=o*o,t=r*r,e=1-.331*t*t,n=.5*t+this.d*(1-o+Math.log(o)),i=this.randu(),i<e||Math.log(i)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(t){return"float32"===this.dtype?t:Math.round(t)}}class qY{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=t,this.range=e-t,this.dtype=n,null==r&&(r=Math.random()),"number"===typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(t," - ").concat(e," <= 1 and dtype is not float"));this.random=GY.alea(r)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const XY=_G({randomGamma_:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",i=arguments.length>4?arguments[4]:void 0;if(tU(t),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));const o=new HY(e,n,r,i),a=NW(t,r);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}});const YY=_G({randomNormal_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(tU(t),null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));const o=new WY(e,n,r,!1,i),a=NW(t,r);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}});const KY=_G({randomStandardNormal_:function(t,e,n){if(null!=e&&"bool"===e)throw new Error("Unsupported data type ".concat(e));return YY(t,0,1,e,n)}});const ZY=_G({randomUniform_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",i=arguments.length>4?arguments[4]:void 0;tU(t);const o=NW(t,r),a=new qY(e,n,null,i);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}});const JY=_G({randomUniformInt_:function(t,e,n,r){return ZY(t,e,n,"int32",r)}});function $Y(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");const i={start:t,stop:e,step:n,dtype:r};return lG.runKernel(QB,{},i)}const QY=_G({real_:function(t){const e={input:vG(t,"input","real")};return lG.runKernel(tz,e)}});const tK=_G({reciprocal_:function(t){const e={x:vG(t,"x","reciprocal")};return lG.runKernel(ez,e)}});const eK=_G({relu_:function(t){const e={x:vG(t,"x","relu")};return lG.runKernel(nz,e)}});const nK=_G({relu6_:function(t){const e={x:vG(t,"x","relu6")};return lG.runKernel(az,e)}});const rK=_G({reverse_:function(t,e){const n={x:vG(t,"x","reverse")},r={dims:e};return lG.runKernel(sz,n,r)}});const iK=_G({reverse1d_:function(t){const e=vG(t,"x","reverse");return kj(1===e.rank,(()=>"Error in reverse1D: x must be rank 1 but got rank ".concat(e.rank,"."))),rK(e,0)}});const oK=_G({reverse2d_:function(t,e){const n=vG(t,"x","reverse");return kj(2===n.rank,(()=>"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,"."))),rK(n,e)}});const aK=_G({reverse3d_:function(t,e){const n=vG(t,"x","reverse");return kj(3===n.rank,(()=>"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,"."))),rK(n,e)}});const sK=_G({reverse4d_:function(t,e){const n=vG(t,"x","reverse");return kj(4===n.rank,(()=>"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,"."))),rK(n,e)}});const cK=_G({round_:function(t){const e={x:vG(t,"x","round")};return lG.runKernel(cz,e)}});const lK=_G({rsqrt_:function(t){const e={x:vG(t,"x","rsqrt","float32")};return lG.runKernel(lz,e)}});const uK=_G({selu_:function(t){const e={x:vG(t,"x","selu")};return lG.runKernel(fz,e)}});const hK=_G({separableConv2d_:function(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC";const s=vG(t,"x","separableConv2d"),c=vG(e,"depthwiseFilter","separableConv2d"),l=vG(n,"pointwiseFilter","separableConv2d");let u=s,h=!1;if(3===s.rank&&(h=!0,u=Mq(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===a)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");kj(4===u.rank,(()=>"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(u.rank,"."))),kj(4===c.rank,(()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(c.rank,"."))),kj(4===l.rank,(()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(c.rank,"."))),kj(1===l.shape[0],(()=>"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(l.shape[0],"."))),kj(1===l.shape[1],(()=>"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(l.shape[1],".")));const d=c.shape[2],p=c.shape[3];kj(l.shape[2]===d*p,(()=>"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(d*p,", ")+"but got ".concat(l.shape[2],".")));const f=uX(u,c,r,i,a,o),m=Jq(f,l,1,"valid",a);return h?Mq(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});const dK=async function(t,e){const n=vG(t,"x","setdiff1d"),r=vG(e,"y","setdiff1d");kj(n.dtype===r.dtype,(()=>"x and y should have the same dtype, but got x (".concat(n.dtype,") and y (").concat(r.dtype,")."))),kj(1===n.rank,(()=>"x should be 1D tensor, but got x (".concat(n.shape,")."))),kj(1===r.rank,(()=>"y should be 1D tensor, but got y (".concat(r.shape,").")));const i=await n.data(),o=await r.data(),a=new Set(o);let s=0;for(let u=0;u<i.length;u++)a.has(i[u])||s++;const c=new UV([s],n.dtype),l=new UV([s],"int32");for(let u=0,h=0;u<i.length;u++)a.has(i[u])||(c.values[h]=i[u],l.values[h]=u,h++);return[c.toTensor(),l.toTensor()]};const pK=_G({sign_:function(t){const e={x:vG(t,"x","sign")};return lG.runKernel(yz,e)}});const fK=_G({sin_:function(t){const e={x:vG(t,"x","sin","float32")};return lG.runKernel("Sin",e)}});const mK=_G({sinh_:function(t){const e={x:vG(t,"x","sinh")};return lG.runKernel(gz,e)}});const gK=_G({slice1d_:function(t,e,n){const r=vG(t,"x","slice1d");return kj(1===r.rank,(()=>"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor"))),Nq(r,[e],[n])}});const yK=_G({slice2d_:function(t,e,n){const r=vG(t,"x","slice2d");return kj(2===r.rank,(()=>"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor"))),Nq(r,e,n)}});const vK=_G({slice3d_:function(t,e,n){const r=vG(t,"x","slice3d");return kj(3===r.rank,(()=>"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor"))),Nq(r,e,n)}});const bK=_G({slice4d_:function(t,e,n){const r=vG(t,"x","slice4d");return kj(4===r.rank,(()=>"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor"))),Nq(r,e,n)}});const xK=_G({softmax_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=vG(t,"logits","softmax","float32");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(e));const r={logits:n},i={dim:e};return lG.runKernel(Sz,r,i)}});const _K=_G({fft_:function(t){kj("complex64"===t.dtype,(()=>"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(t.dtype,".")));const e={input:t};return lG.runKernel("FFT",e)}});const wK=_G({ifft_:function(t){kj("complex64"===t.dtype,(()=>"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(t.dtype,".")));const e={input:t};return lG.runKernel(gB,e)}});const SK=_G({irfft_:function(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=Mq(t,[n,e]);r=wK(i)}else{const i=[n,2*(e-1)],o=Mq(QY(t),[n,e]),a=Mq(WX(t),[n,e]),s=rK(Nq(o,[0,1],[n,e-2]),1),c=BW(rK(Nq(a,[0,1],[n,e-2]),1),HW(-1)),l=kq([o,s],1),u=kq([a,c],1),h=Mq(wG(l,u),[i[0],i[1]]);r=wK(h)}if(r=QY(r),3===t.rank&&0!==t.shape[0]){const e=r,n=t.shape[0];r=Mq(r,[n,r.shape[0]/n,r.shape[1]]),e.dispose()}return r}});const TK=_G({split_:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={x:vG(t,"x","split")},i={numOrSizeSplits:e,axis:n};return lG.runKernel(wz,r,i)}});const EK=_G({rfft_:function(t,e){kj("float32"===t.dtype,(()=>"The dtype for rfft() must be real value but got ".concat(t.dtype)));let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(null!=e&&e<n){const r=t.shape.map((t=>0)),o=t.shape.map((t=>t));o[t.shape.length-1]=e,i=Nq(t,r,o),n=e}else if(null!=e&&e>n){const r=t.shape.map((t=>t));r[t.shape.length-1]=e-n,i=kq([t,yY(r)],t.shape.length-1),n=e}else i=t;const o=GW(i),a=Mq(wG(i,o),[r,n]),s=_K(a),c=Math.floor(n/2)+1,l=QY(s),u=WX(s),h=TK(l,[c,n-c],l.shape.length-1),d=TK(u,[c,n-c],u.shape.length-1),p=i.shape.slice();return p[i.shape.length-1]=c,Mq(wG(h[0],d[0]),p)}});const AK=_G({squaredDifference_:function(t,e){let n=vG(t,"a","squaredDifference"),r=vG(e,"b","squaredDifference");[n,r]=nG(n,r),iH(n.shape,r.shape);const i={a:n,b:r};return lG.runKernel(Cz,i,{})}});const MK=_G({squeeze_:function(t,e){const n=vG(t,"x","squeeze","string_or_numeric");return Mq(n,Bj(n.shape,e).newShape)}});const OK=_G({stack_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=bG(t,"tensors","stack","string_or_numeric");kj(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&kj(e<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const r=n,i={axis:e};return lG.runKernel(qB,r,i)}});const CK=_G({step_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:vG(t,"x","step")},r={alpha:e};return lG.runKernel(Hz,n,r)}});const kK=_G({stridedSlice_:function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;const l={x:vG(t,"x","stridedSlice","string_or_numeric")},u={begin:e,end:n,strides:r,beginMask:i,endMask:o,ellipsisMask:a,newAxisMask:s,shrinkAxisMask:c};return lG.runKernel(Pz,l,u)}});const PK=_G({tan_:function(t){const e={x:vG(t,"x","tan","float32")};return lG.runKernel("Tan",e)}});function IK(t,e){Ij(t);const n=mG(t,e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return SG(t,null,n,e)}function NK(t,e,n){if(Ij(t),null!=e&&2!==e.length)throw new Error("tensor2d() requires shape to have two numbers");const r=mG(t,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return SG(t,e,r,n)}function RK(t,e,n){if(Ij(t),null!=e&&4!==e.length)throw new Error("tensor4d() requires shape to have four numbers");const r=mG(t,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return SG(t,e,r,n)}function DK(t,e,n){if(Ij(t),null!=e&&5!==e.length)throw new Error("tensor5d() requires shape to have five numbers");const r=mG(t,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return SG(t,e,r,n)}function LK(t,e,n){if(Ij(t),null!=e&&6!==e.length)throw new Error("tensor6d() requires shape to have six numbers");const r=mG(t,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return SG(t,e=e||r,r,n)}function FK(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(e.shape,", shape: ").concat(t)+", sliceDim: ".concat(r,", and batchDim: ").concat(i,".");if(n.rank<i)throw new Error(o+" update.rank < ".concat(i,". "));if(t.length<r+(n.rank-i))throw new Error(o+" Output shape length < ".concat(r+(n.rank-i)));if(n.rank!==i+t.length-r)throw new Error(o+" update.rank != ".concat(i+t.length-r));for(let a=0;a<i;++a)if(n.shape[a]!==e.shape[a])throw new Error(o+" updates.shape[".concat(a,"] (").concat(n.shape[a],") != indices.shape[").concat(a,"] (").concat(e.shape[a],")."));for(let a=0;a<n.rank-i;++a)if(n.shape[a+i]!==t[a+r])throw new Error(o+" updates.shape[".concat(a+i,"] (").concat(n.shape[a+i],") != shape[").concat(a+i,"] (").concat(t[a+i],")"))}function jK(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if("int32"!==e.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(e.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===e.size)throw new Error("Indices specified for empty output. indices shape: ".concat(e.shape));if(0===t.size)throw new Error("Updates specified for empty output. updates shape: ".concat(t.shape))}FK(n,e,t)}function UK(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,o=n.length;let a=1;for(let c=i;c<o;++c)a*=n[c];const s=i<1?1:i;return{sliceRank:i,numUpdates:Nj(e.shape)/s,sliceSize:a,strides:[...Kj(n.slice(0,i)),1],outputSize:Nj(n)}}const BK=_G({tensorScatterUpdate_:function(t,e,n){const r=vG(t,"tensor","tensorScatterupdate"),i=vG(e,"indices","tensorScatterupdate","int32"),o=vG(n,"updates","tensorScatterupdate");if(jK(o,i,r.shape),r.dtype!==o.dtype)throw new Error("tensor and updates must have the same dtype, instead they are ".concat(r.dtype," and ").concat(o.dtype,"."));const a={tensor:r,indices:i,updates:o};return lG.runKernel(hz,a,{})}});const zK=_G({topk_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=vG(t,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(e));if(e>i)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(i,") ")+"but got ".concat(e));const o={x:r},a={k:e,sorted:n},[s,c]=lG.runKernel(jz,o,a);return{values:s,indices:c}}});const VK=_G({truncatedNormal_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(tU(t),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const o=new WY(e,n,r,!0,i),a=NW(t,r);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}});const GK=_G({unique_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=vG(t,"x","unique","string_or_numeric");kj(n.rank>0,(()=>"The input tensor must be at least 1D"));const r={x:n},i={axis:e},[o,a]=lG.runKernel(zz,r,i);return{values:o,indices:a}}});const WK=_G({unsortedSegmentSum_:function(t,e,n){const r=vG(t,"x","unsortedSegmentSum"),i=vG(e,"segmentIds","unsortedSegmentSum","int32");kj(Dj(n),(()=>"numSegments must be of dtype int"));const o={x:r,segmentIds:i},a={numSegments:n};return lG.runKernel(Gz,o,a)}});const HK=_G({unstack_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=vG(t,"x","unstack","string_or_numeric");kj(e>=-n.shape.length&&e<n.shape.length,(()=>"Axis = ".concat(e," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")));const r={value:n},i={axis:e};return lG.runKernel(Vz,r,i)}});function qK(t,e){return hY(t,e,"right")}function XK(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return lG.makeVariable(t,e,n,r)}function YK(t,e){const n=[];for(let o=0;o<e.length;o++)e[o]&&n.push(o);const r=NW(t,"int32"),i=NW([n.length,t.length],"int32");for(let o=0;o<n.length;o++){const e=r.indexToLoc(n[o]),a=o*t.length;i.values.set(e,a)}return i.toTensor()}const KK=async function(t){const e=vG(t,"condition","whereAsync","bool"),n=await e.data(),r=YK(e.shape,n);return t!==e&&e.dispose(),r};const ZK=async function(t,e,n){const r=vG(t,"tensor","boolMask"),i=vG(e,"mask","boolMask","bool"),o=null==n?0:n,a=i.rank,s=r.shape;kj(a>0,(()=>"mask cannot be scalar")),Pj(s.slice(o,o+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let c=1;for(let m=o;m<o+a;m++)c*=s[m];const l=s.slice(0,o).concat([c],s.slice(o+a)),u=Mq(r,l),h=Mq(i,[-1]),d=await KK(h),p=MK(d,[1]),f=zX(u,p,o);return t!==r&&r.dispose(),e!==i&&i.dispose(),p.dispose(),u.dispose(),h.dispose(),d.dispose(),f};const JK=_G({transpose_:function(t,e,n){const r=vG(t,"x","transpose");if(null==e&&(e=r.shape.map(((t,e)=>e)).reverse()),kj(r.rank===e.length,(()=>"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(e,"."))),e.forEach((t=>{kj(t>=0&&t<r.rank,(()=>"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(e)))})),r.rank<=1)return r.clone();const i={x:r},o={perm:e};return"complex64"===r.dtype?OG((()=>{let t=QY(r),e=WX(r);return t=lG.runKernel(Bz,{x:t},o),e=lG.runKernel(Bz,{x:e},o),n&&(e=eY(e)),wG(t,e)})):lG.runKernel(Bz,i,o)}});const $K=_G({movingAverage_:function(t,e,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const o=vG(t,"v","movingAverage"),a=vG(e,"x","movingAverage"),s=vG(n,"decay","movingAverage");!function(t,e){kj(t.dtype===e.dtype,(()=>"The dtypes of the first(".concat(t.dtype,") and")+" second(".concat(e.dtype,") input must match")))}(o,a),kj(Rj(o.shape,a.shape),(()=>"Shape mismatch in v and x"));const c=HW(1),l=tH(c,s);let u=BW(tH(a,o),l);if(i){kj(null!=r,(()=>"When using zeroDebias: true, step is required."));const t=vG(r,"step","movingAverage");u=UW(u,tH(c,QW(s,t)))}return FW(o,u)}});const QK=_G({scatterND_:function(t,e,n){tU(n);const r=vG(t,"indices","scatterND","int32"),i=vG(e,"updates","scatterND");jK(i,r,n);const o={indices:r,updates:i},a={shape:n};return lG.runKernel(uz,o,a)}});const tZ=_G({sparseToDense_:function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;tU(n);const i=vG(t,"sparseIndices","sparseToDense","int32"),o=vG(e,"sparseValues","sparseToDense","string_or_numeric"),a=vG(r,"defaultValue","sparseToDense",o.dtype);!function(t,e,n,r){if("int32"!==t.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(t.shape,"."));const i=t.rank>0?t.shape[0]:1,o=t.rank>1?t.shape[1]:1;if(n.length!==o)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(o,"."));const a=e.size;if(0!==e.rank&&(1!==e.rank||a!==i))throw new Error("sparseValues has incorrect shape "+"".concat(e.shape,", should be [] or [").concat(i,"]"));if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,n,a);const s={sparseIndices:i,sparseValues:o,defaultValue:a},c={outputShape:n};return lG.runKernel(Oz,s,c)}});const eZ=_G({gatherND_:function(t,e){const n=vG(e,"indices","gatherND","int32"),r={params:vG(t,"x","gatherND","string_or_numeric"),indices:n};return lG.runKernel(dB,r)}});const nZ=_G({dropout_:function(t,e,n,r){const i=vG(t,"x","dropout");if(kj("float32"===i.dtype,(()=>"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(i.dtype," tensor instead."))),kj(e>=0&&e<1,(()=>"rate must be a float in the range [0, 1), but got ".concat(e,"."))),0===e)return t instanceof GV?i.clone():i;const o=function(t,e){if(null==e)return t.shape.slice();if(Rj(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)null==e[r]&&null!=t.shape[r]?n.push(t.shape[r]):n.push(e[r]);return n}return e}(i,n),a=1-e,s=UW(BX(FW(ZY(o,0,1,"float32",r),a)),a);return BW(i,s)}});function rZ(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function iZ(t,e,n){const r=1-t%2,i=new Float32Array(t);for(let o=0;o<t;++o){const a=2*Math.PI*o/(t+r-1);i[o]=e-n*Math.cos(a)}return IK(i,"float32")}const oZ=async function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=vG(t,"predictions","inTopK"),i=vG(e,"targets","inTopK");kj(r.rank>1,(()=>"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(r.rank))),kj(r.rank-1===i.rank,(()=>"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(r.rank," and targets rank ").concat(i.rank))),Pj(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const o=r.shape[r.shape.length-1];kj(n>0&&n<=o,(()=>"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(n)));const a=await r.data(),s=await i.data(),[c,l]=[a.length/o,o],u=zj("bool",c);for(let h=0;h<c;h++){const t=h*l,e=a.subarray(t,t+l),r=[];for(let n=0;n<e.length;n++)r.push({value:e[n],index:n});r.sort(((t,e)=>e.value-t.value)),u[h]=0;for(let i=0;i<n;i++)if(r[i].index===s[h]){u[h]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),TG(u,i.shape,"bool")};const aZ=_G({conv2DBackpropFilter_:function(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",a=arguments.length>6?arguments[6]:void 0,s=t;3===t.rank&&(s=Mq(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c=e;3===c.rank&&(c=Mq(e,[1,e.shape[0],e.shape[1],e.shape[2]])),kj(4===s.rank,(()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,"."))),kj(4===c.rank,(()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(c.shape,"."))),kj(4===n.length,(()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")));const l="NHWC"===o?s.shape[3]:s.shape[1],u="NHWC"===o?c.shape[3]:c.shape[1];kj(l===n[2],(()=>"Error in conv2dDerFilter: depth of input ".concat(l,") must ")+"match input depth in filter (".concat(n[2],"."))),kj(u===n[3],(()=>"Error in conv2dDerFilter: depth of dy (".concat(u,") must ")+"match output depth for filter (".concat(n[3],")."))),Aq("conv2dDerFilter",i,a);const h={x:s,dy:c},d={strides:r,pad:i,dataFormat:o,dimRoundingMode:a,filterShape:n};return lG.runKernel(jU,h,d)}});function sZ(t,e,n){if(null==n||"linear"===n)return t;if("relu"===n)return BW(t,CK(e));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function cZ(t,e){let n=e;const r=rH(t.shape,e.shape);return r.length>0&&(n=PX(n,r)),Mq(n,t.shape)}function lZ(t,e,n,r){if("linear"===e)return t;if("relu"===e)return eK(t);if("elu"===e)return vX(t);if("relu6"===e)return nK(t);if("prelu"===e)return FY(t,n);if("leakyrelu"===e)return YX(t,r);if("sigmoid"===e)return Iq(t);throw new Error("Unknown fused activation ".concat(e,"."))}const uZ=(t,e)=>!(t>0)||"linear"===e;const hZ=_G({fusedConv2d_:function(t){let{x:e,filter:n,strides:r,pad:i,dataFormat:o="NHWC",dilations:a=[1,1],dimRoundingMode:s,bias:c,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:h}=t;if(l=l||"linear",!1===uZ(lG.state.gradientDepth,l)){kj("NHWC"===o,(()=>"Error in fused conv2d: got dataFormat of ".concat(o," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."));let t=Jq(e,n,r,i,o,a,s);return null!=c&&(t=FW(t,c)),lZ(t,l,u,h)}const d=vG(e,"x","conv2d","float32"),p=vG(n,"filter","conv2d","float32");let f=d,m=!1;3===d.rank&&(m=!0,f=Mq(d,[1,d.shape[0],d.shape[1],d.shape[2]])),kj(4===f.rank,(()=>"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(f.rank,"."))),kj(4===p.rank,(()=>"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(p.rank,"."))),Aq("fused conv2d",i,s);const g="NHWC"===o?f.shape[3]:f.shape[1];kj(p.shape[2]===g,(()=>"Error in conv2d: depth of input (".concat(g,") must match ")+"input depth for filter ".concat(p.shape[2],"."))),kj(Sq(r,a),(()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(a,"'")));const y=mq(f.shape,p.shape,r,a,i,s);let v,b;if(null!=c&&(v=vG(c,"bias","fused conv2d"),[v]=nG(v,d),"NHWC"===o?iH(y.outShape,v.shape):(kj(v.shape.length<=1,(()=>"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(v.shape.length,"."))),kj(0===v.shape.length||v.shape[0]===y.outChannels||1===v.shape[0],(()=>"Error in fused conv2d: bias shape (".concat(v.shape,") is not ")+"compatible with the number of output channels "+"(".concat(y.outChannels,")"))))),null!=u){const t=u.shape;if(kj(t.length<=1||3===t.length,(()=>"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(t.length,"."))),1===t.length)kj(1===t[0]||t[0]===y.outChannels,(()=>"Error in fused conv2d: PReLU activation weights "+"(".concat(t,") is not compatible with the number of output ")+"channels (".concat(y.outChannels,").")));else if(3===t.length)try{iH(t,y.outShape)}catch(sCt){const n="Error in fused conv2d: PReLU activation weights (".concat(t,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(y.outShape,").");throw Error(n)}b=vG(u,"prelu weights","fused conv2d")}const x=(t,e)=>{kj("NHWC"===o,(()=>"Error in gradient of fused conv2D: got dataFormat of ".concat(o," but only NHWC is currently supported.")));const[n,s,c,u]=e,h=sZ(t,c,l);kj(wq(a),(()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(a,"'")));const d=[Qq(s.shape,h,n,r,i),aZ(s,h,n.shape,r,i)];if(null!=u){const t=cZ(u,h);d.push(t)}return d},_={x:f,filter:p,bias:v,preluActivationWeights:b},w={strides:r,pad:i,dataFormat:o,dilations:a,dimRoundingMode:s,activation:l,leakyreluAlpha:h};if(null==c){const t=WW(((t,e,n)=>{let r=lG.runKernel(Kz,_,w);return n([e,t,r]),m&&(r=Mq(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:x}}));return t(f,p)}{const t=WW(((t,e,n,r)=>{let i=lG.runKernel(Kz,_,w);return r([e,t,i,n]),m&&(i=Mq(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:x}}));return t(f,p,v)}}});const dZ=_G({depthwiseConv2dNativeBackpropFilter_:function(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6?arguments[6]:void 0,s=t;3===t.rank&&(s=Mq(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c=e;3===c.rank&&(c=Mq(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={x:s,dy:c},u={strides:r,pad:i,dimRoundingMode:a,dilations:o,filterShape:n};return lG.runKernel(KU,l,u)}});const pZ=_G({depthwiseConv2dNativeBackpropInput_:function(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6?arguments[6]:void 0,s=e,c=!1;3===e.rank&&(c=!0,s=Mq(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={dy:s,filter:n},u={strides:r,pad:i,dimRoundingMode:a,dilations:o,inputShape:t},h=lG.runKernel(ZU,l,u);return c?Mq(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});const fZ=_G({fusedDepthwiseConv2d_:function(t){let{x:e,filter:n,strides:r,pad:i,dataFormat:o="NHWC",dilations:a=[1,1],dimRoundingMode:s,bias:c,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:h}=t;if(!1===uZ(lG.state.gradientDepth,l)){let t=uX(e,n,r,i,o,a,s);return null!=c&&(t=FW(t,c)),lZ(t,l,u,h)}const d=vG(e,"x","depthwiseConv2d","float32"),p=vG(n,"filter","depthwiseConv2d","float32");let f=d,m=!1;3===d.rank&&(m=!0,f=Mq(d,[1,d.shape[0],d.shape[1],d.shape[2]])),kj(4===f.rank,(()=>"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(f.rank,"."))),kj(4===p.rank,(()=>"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(p.rank,"."))),kj(f.shape[3]===p.shape[2],(()=>"Error in fused depthwiseConv2d: number of input channels "+"(".concat(f.shape[3],") must match the inChannels dimension in ")+"filter ".concat(p.shape[2],"."))),null==a&&(a=[1,1]),kj(Sq(r,a),(()=>"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(a,"'"))),Aq("fused depthwiseConv2d",i,s);const g=mq(f.shape,p.shape,r,a,i,s,!0);let y,v;null!=c&&(y=vG(c,"bias","fused conv2d"),[y]=nG(y,d),iH(g.outShape,y.shape)),null!=u&&(v=vG(u,"prelu weights","fused depthwiseConv2d"));const b=(t,e)=>{kj(wq(a),(()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(a,"'")));const[n,o,c,u]=e,h=sZ(t,c,l),d=pZ(o.shape,h,n,r,i,a,s),p=dZ(o,h,n.shape,r,i,a,s);if(null!=u){return[d,p,cZ(y,h)]}return[d,p]},x={x:f,filter:p,bias:y,preluActivationWeights:v},_={strides:r,pad:i,dataFormat:o,dilations:a,dimRoundingMode:s,activation:l,leakyreluAlpha:h};if(null==c){const t=WW(((t,e,n)=>{let r=lG.runKernel(Zz,x,_);return n([e,t,r]),m&&(r=Mq(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}}));return t(f,p)}{const t=WW(((t,e,n,r)=>{let i=lG.runKernel(Zz,x,_);return r([e,t,i,n]),m&&(i=Mq(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:b}}));return t(f,p,y)}}});const mZ=_G({fusedMatMul_:function(t){let{a:e,b:n,transposeA:r=!1,transposeB:i=!1,bias:o,activation:a="linear",preluActivationWeights:s,leakyreluAlpha:c=.2}=t;if(!1===uZ(lG.state.gradientDepth,a)){let t=Pq(e,n,r,i);return null!=o&&(t=FW(t,o)),lZ(t,a,s,c)}let l=vG(e,"a","fused matMul"),u=vG(n,"b","fused matMul");[l,u]=nG(l,u);const h=r?l.shape[l.rank-2]:l.shape[l.rank-1],d=i?u.shape[u.rank-1]:u.shape[u.rank-2],p=r?l.shape[l.rank-1]:l.shape[l.rank-2],f=i?u.shape[u.rank-2]:u.shape[u.rank-1],m=l.shape.slice(0,-2),g=u.shape.slice(0,-2),y=Nj(m),v=Nj(g);kj(h===d,(()=>"Error in fused matMul: inner shapes (".concat(h,") and (")+"".concat(d,") of Tensors with shapes ").concat(l.shape," and ")+"".concat(u.shape," and transposeA=").concat(r)+" and transposeB=".concat(i," must match.")));const b=iH(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,f]),x=Mq(l,r?[y,h,p]:[y,p,h]),_=Mq(u,i?[v,f,d]:[v,d,f]);let w,S;null!=o&&(w=vG(o,"bias","fused matMul"),[w]=nG(w,l),iH(b,w.shape)),null!=s&&(S=vG(s,"prelu weights","fused matMul"));const T=(t,e)=>{const[n,s,c,l]=e,u=sZ(Mq(t,c.shape),c,a);let h,d;if(r||i?!r&&i?(h=Pq(u,s,!1,!1),d=Pq(u,n,!0,!1)):r&&!i?(h=Pq(s,u,!1,!0),d=Pq(n,u,!1,!1)):(h=Pq(s,u,!0,!0),d=Pq(u,n,!0,!0)):(h=Pq(u,s,!1,!0),d=Pq(n,u,!0,!1)),null!=o){return[h,d,cZ(l,u)]}return[h,d]},E={a:x,b:_,bias:w,preluActivationWeights:S},A={transposeA:r,transposeB:i,activation:a,leakyreluAlpha:c};if(null==o){const t=WW(((t,e,n)=>{const r=lG.runKernel(Yz,E,A);return n([t,e,r]),{value:Mq(r,b),gradFunc:T}}));return t(x,_)}{const t=WW(((t,e,n,r)=>{const i=lG.runKernel(Yz,E,A);return r([t,e,i,n]),{value:Mq(i,b),gradFunc:T}}));return t(x,_,w)}}});const gZ=_G({hammingWindow_:function(t){return iZ(t,.54,.46)}});const yZ=_G({hannWindow_:function(t){return iZ(t,.5,.5)}});const vZ=_G({frame_:function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=0;const a=[];for(;o+e<=t.size;)a.push(Nq(t,o,e)),o+=n;if(r)for(;o<t.size;){const r=o+e-t.size,s=kq([Nq(t,o,e-r),$W([r],i)]);a.push(s),o+=n}return 0===a.length?NK([],[0,e]):Mq(kq(a),[a.length,e])}});const bZ=_G({stft_:function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:yZ;null==r&&(r=rZ(e));const o=vZ(t,e,n),a=BW(o,i(e));return EK(a,r)}});const xZ=_G({cropAndResize_:function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=vG(t,"image","cropAndResize"),s=vG(e,"boxes","cropAndResize","float32"),c=vG(n,"boxInd","cropAndResize","int32"),l=s.shape[0];kj(4===a.rank,(()=>"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(a.rank,"."))),kj(2===s.rank&&4===s.shape[1],(()=>"Error in cropAndResize: boxes must be have size [".concat(l,",4] ")+"but had shape ".concat(s.shape,"."))),kj(1===c.rank&&c.shape[0]===l,(()=>"Error in cropAndResize: boxInd must be have size [".concat(l,"] ")+"but had shape ".concat(s.shape,"."))),kj(2===r.length,(()=>"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,"."))),kj(r[0]>=1&&r[1]>=1,(()=>"cropSize must be atleast [1,1], but was ".concat(r))),kj("bilinear"===i||"nearest"===i,(()=>"method must be bilinear or nearest, but was ".concat(i)));const u={image:a,boxes:s,boxInd:c},h={method:i,extrapolationValue:o,cropSize:r};return lG.runKernel(HU,u,h)}});const _Z=_G({flipLeftRight_:function(t){const e=vG(t,"image","flipLeftRight","float32");kj(4===e.rank,(()=>"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(e.rank,".")));const n={image:e};return lG.runKernel(sB,n,{})}});const wZ=_G({grayscaleToRGB_:function(t){const e=vG(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];kj(e.rank>=2,(()=>"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(e.rank,"."))),kj(1===r,(()=>"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")));const i=new Array(e.rank);return i.fill(1,0,n),i[n]=3,jX(e,i)}});const SZ=_G({rgbToGrayscale_:function(t){const e=vG(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];kj(e.rank>=2,(()=>"Error in RGBToGrayscale: images must be at least rank 2, "+"but got rank ".concat(e.rank,"."))),kj(3===r,(()=>"Error in RGBToGrayscale: last dimension of an RGB image "+"should be size 3, but got size ".concat(r,".")));const i=e.dtype,o=RW(e,"float32"),a=IK([.2989,.587,.114]);let s;switch(e.rank){case 2:s=yX("ij,j->i",o,a);break;case 3:s=yX("ijk,k->ij",o,a);break;case 4:s=yX("ijkl,l->ijk",o,a);break;case 5:s=yX("ijklm,m->ijkl",o,a);break;case 6:s=yX("ijklmn,n->ijklm",o,a);break;default:throw new Error("Not a valid tensor rank.")}return s=LX(s,-1),RW(s,i)}});const TZ=_G({rotateWithOffset_:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const i=vG(t,"image","rotateWithOffset","float32");kj(4===i.rank,(()=>"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(i.rank,".")));const o={image:i},a={radians:e,fillValue:n,center:r};return lG.runKernel(Xz,o,a)}});function EZ(t,e,n,r,i,o){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==o&&(o=0);const a=t.shape[0];return n=Math.min(n,a),kj(0<=r&&r<=1,(()=>"iouThreshold must be in [0, 1], but was '".concat(r,"'"))),kj(2===t.rank,(()=>"boxes must be a 2D tensor, but was of rank '".concat(t.rank,"'"))),kj(4===t.shape[1],(()=>"boxes must have 4 columns, but 2nd dimension was ".concat(t.shape[1]))),kj(1===e.rank,(()=>"scores must be a 1D tensor")),kj(e.shape[0]===a,(()=>"scores has incompatible shape with boxes. Expected ".concat(a,", ")+"but was ".concat(e.shape[0]))),kj(0<=o&&o<=1,(()=>"softNmsSigma must be in [0, 1], but was '".concat(o,"'"))),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}const AZ=_G({nonMaxSuppression_:function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const o=vG(t,"boxes","nonMaxSuppression","float32"),a=vG(e,"scores","nonMaxSuppression","float32"),s=EZ(o,a,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const c={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return lG.runKernel(zB,{boxes:o,scores:a},c)}});function MZ(t,e,n){const r=function(t,e,n){return function(t,e,n){let r=0,i=t.length,o=0,a=!1;for(;r<i;){o=r+(i-r>>>1);const s=n(e,t[o]);s>0?r=o+1:(i=o,a=!s)}return a?r:-r-1}(t,e,n||OZ)}(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function OZ(t,e){return t>e?1:t<e?-1:0}function CZ(t,e,n,r,i){return IZ(t,e,n,r,i,0)}function kZ(t,e,n,r,i,o){return IZ(t,e,n,r,i,0,!1,o,!0)}function PZ(t,e,n,r,i,o){return IZ(t,e,n,r,i,o,!0)}function IZ(t,e,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const l=[];for(let g=0;g<e.length;g++)e[g]>i&&l.push({score:e[g],boxIndex:g,suppressBeginIndex:0});l.sort(DZ);const u=o>0?-.5/o:0,h=[],d=[];for(;h.length<n&&l.length>0;){const e=l.pop(),{score:n,boxIndex:o,suppressBeginIndex:a}=e;if(n<i)break;let s=!1;for(let c=h.length-1;c>=a;--c){const n=NZ(t,o,h[c]);if(n>=r){s=!0;break}if(e.score=e.score*RZ(r,u,n),e.score<=i)break}e.suppressBeginIndex=h.length,s||(e.score===n?(h.push(o),d.push(e.score)):e.score>i&&MZ(l,e,DZ))}const p=h.length,f=n-p;s&&f>0&&(h.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));const m={selectedIndices:h};return a&&(m.selectedScores=d),c&&(m.validOutputs=p),m}function NZ(t,e,n){const r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),u=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),p=(s-o)*(c-a),f=(h-l)*(d-u);if(p<=0||f<=0)return 0;const m=Math.max(o,l),g=Math.max(a,u),y=Math.min(s,h),v=Math.min(c,d),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(p+f-b)}function RZ(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function DZ(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}const LZ=async function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const o=vG(t,"boxes","nonMaxSuppressionAsync"),a=vG(e,"scores","nonMaxSuppressionAsync"),s=EZ(o,a,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const c=await Promise.all([o.data(),a.data()]),l=c[0],u=c[1],{selectedIndices:h}=CZ(l,u,n,r,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),IK(h,"int32")};const FZ=_G({nonMaxSuppressionWithScore_:function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=vG(t,"boxes","nonMaxSuppression"),s=vG(e,"scores","nonMaxSuppression"),c=EZ(a,s,n,r,i,o);n=c.maxOutputSize,r=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma;const l={boxes:a,scores:s},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o},h=lG.runKernel(GB,l,u);return{selectedIndices:h[0],selectedScores:h[1]}}});const jZ=async function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=vG(t,"boxes","nonMaxSuppressionAsync"),s=vG(e,"scores","nonMaxSuppressionAsync"),c=EZ(a,s,n,r,i,o);n=c.maxOutputSize,r=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma;const l=await Promise.all([a.data(),s.data()]),u=l[0],h=l[1],{selectedIndices:d,selectedScores:p}=PZ(u,h,n,r,i,o);return a!==t&&a.dispose(),s!==e&&s.dispose(),{selectedIndices:IK(d,"int32"),selectedScores:IK(p)}};const UZ=_G({nonMaxSuppressionPadded_:function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=vG(t,"boxes","nonMaxSuppression"),s=vG(e,"scores","nonMaxSuppression"),c=EZ(a,s,n,r,i,null),l={boxes:a,scores:s},u={maxOutputSize:c.maxOutputSize,iouThreshold:c.iouThreshold,scoreThreshold:c.scoreThreshold,padToMaxOutputSize:o},h=lG.runKernel(VB,l,u);return{selectedIndices:h[0],validOutputs:h[1]}}});const BZ=async function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=vG(t,"boxes","nonMaxSuppressionAsync"),s=vG(e,"scores","nonMaxSuppressionAsync"),c=EZ(a,s,n,r,i,null),l=c.maxOutputSize,u=c.iouThreshold,h=c.scoreThreshold,[d,p]=await Promise.all([a.data(),s.data()]),{selectedIndices:f,validOutputs:m}=kZ(d,p,l,u,h,o);return a!==t&&a.dispose(),s!==e&&s.dispose(),{selectedIndices:IK(f,"int32"),validOutputs:HW(m,"int32")}};const zZ=_G({resizeBilinear_:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=vG(t,"images","resizeBilinear");kj(3===i.rank||4===i.rank,(()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(i.rank,"."))),kj(2===e.length,(()=>"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(e,"."))),kj(!1===r||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let o=i,a=!1;3===i.rank&&(a=!0,o=Mq(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const[]=e,s={images:o},c={alignCorners:n,halfPixelCenters:r,size:e},l=lG.runKernel(oz,s,c);return a?Mq(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});const VZ=_G({resizeNearestNeighbor_:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=vG(t,"images","resizeNearestNeighbor");kj(3===i.rank||4===i.rank,(()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(i.rank,"."))),kj(2===e.length,(()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(e,"."))),kj("float32"===i.dtype||"int32"===i.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),kj(!1===r||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let o=i,a=!1;3===i.rank&&(a=!0,o=Mq(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const[]=e,s={images:o},c={alignCorners:n,halfPixelCenters:r,size:e},l=lG.runKernel(iz,s,c);return a?Mq(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});const GZ=_G({threshold_:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const i=vG(t,"image","threshold"),o=i.shape[0]*i.shape[1];let a,s,c,l,u=BW(IK([r]),255);if(kj(3===i.rank,(()=>"Error in threshold: image must be rank 3,"+"but got rank ".concat(i.rank,"."))),kj(3===i.shape[2]||1===i.shape[2],(()=>"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(i.shape[2],"."))),kj("int32"===i.dtype||"float32"===i.dtype,(()=>"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(i.dtype,"."))),kj("otsu"===e||"binary"===e,(()=>"Method must be binary or otsu, but was ".concat(e))),3===i.shape[2]){[a,s,c]=TK(i,[1,1,1],-1);const t=BW(a,.2989),e=BW(s,.587),n=BW(c,.114);l=FW(FW(t,e),n)}else l=t;if("otsu"===e){u=function(t,e){let n,r,i,o,a,s,c=IK([-1]),l=IK([0]),u=IK([0]);for(let h=0;h<t.size-1;h++){n=Nq(t,0,h+1),r=Nq(t,h+1),a=UW(PX(n),e),s=UW(PX(r),e);const d=PX(BW(n,$Y(0,n.size)));i=UW(d,PX(n));const p=$W(r.shape,n.size),f=FW($Y(0,r.size),p),m=BW(r,f);o=UW(PX(m),PX(r));const g=tH(i,o),y=tH(i,o),v=BW(a,s);u=BW(BW(v,g),y);const b=VX(u,l);l=fX(b,u,l),c=fX(b,IK([h]),c)}return c}(zq(RW(cK(l),"int32"),TG([]),256),o)}const h=n?ZX(l,u):VX(l,u);return RW(BW(h,255),"int32")}});const WZ=_G({transform_:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;const a=vG(t,"image","transform","float32"),s=vG(e,"transforms","transform","float32");kj(4===a.rank,(()=>"Error in transform: image must be rank 4,"+"but got rank ".concat(a.rank,"."))),kj(2===s.rank&&(s.shape[0]===a.shape[0]||1===s.shape[0])&&8===s.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),kj(null==o||2===o.length,(()=>"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(o,".")));const c={image:a,transforms:s},l={interpolation:n,fillMode:r,fillValue:i,outputShape:o};return lG.runKernel(Uz,c,l)}});const HZ=_G({bandPart_:function(t,e,n){const r=vG(t,"a","bandPart");kj(r.rank>=2,(()=>"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")));const i=r.shape,[o,a]=r.shape.slice(-2);let s,c;"number"===typeof e?(kj(e%1===0,(()=>"bandPart(): numLower must be an integer, got ".concat(e,"."))),kj(e<=o,(()=>"bandPart(): numLower (".concat(e,")")+" must not be greater than the number of rows (".concat(o,")."))),s=vG(e<0?o:e,"numLower","bandPart")):(kj("int32"===e.dtype,(()=>"bandPart(): numLower's dtype must be an int32.")),s=fX(KX(e,0),o,xY(e,o))),"number"===typeof n?(kj(n%1===0,(()=>"bandPart(): numUpper must be an integer, got ".concat(n,"."))),kj(n<=a,(()=>"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(a,")."))),c=vG(n<0?a:n,"numUpper","bandPart")):(kj("int32"===n.dtype,(()=>"bandPart(): numUpper's dtype must be an int32.")),c=fX(KX(n,0),a,xY(n,a)));const l=Mq($Y(0,o,1,"int32"),[-1,1]),u=$Y(0,a,1,"int32"),h=tH(l,u),d=aY(ZX(h,s),GX(h,eY(c))),p=yY([o,a],r.dtype);return Mq(OK(HK(Mq(r,[-1,o,a])).map((t=>fX(d,t,p)))),i)}});const qZ=_G({gramSchmidt_:function(t){let e;if(Array.isArray(t)){e=!1,kj(null!=t&&t.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=t[0].shape[0];for(let e=1;e<t.length;++e)kj(t[e].shape[0]===n,(()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(t[e].shape[0]," vs. ").concat(n,")")))}else e=!0,t=TK(t,t.shape[0],0).map((t=>MK(t,[0])));kj(t.length<=t[0].shape[0],(()=>"Gram-Schmidt: Number of vectors (".concat(t.length,") exceeds ")+"number of dimensions (".concat(t[0].shape[0],").")));const n=[],r=t;for(let i=0;i<t.length;++i)n.push(lG.tidy((()=>{let t=r[i];if(i>0)for(let e=0;e<i;++e){const r=BW(PX(BW(n[e],t)),n[e]);t=tH(t,r)}return UW(t,NX(t,"euclidean"))})));return e?OK(n,0):n}});function XZ(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return lG.tidy((()=>{kj(2===t.shape.length,(()=>"qr2d() requires a 2D Tensor, but got a ".concat(t.shape.length,"D Tensor.")));const n=t.shape[0],r=t.shape[1];let i=UX(n),o=DW(t);const a=NK([[1]],[1,1]);let s=DW(a);const c=n>=r?r:n;for(let t=0;t<c;++t){const e=o,c=s,l=i;[s,o,i]=lG.tidy((()=>{const e=Nq(o,[t,t],[n-t,1]),c=NX(e),l=Nq(o,[t,t],[1,1]),u=fX(VX(l,0),NK([[-1]]),NK([[1]])),h=tH(l,BW(u,c)),d=UW(e,h);s=1===d.shape[0]?DW(a):kq([a,Nq(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);const p=eY(UW(Pq(u,h),c)),f=Nq(o,[t,0],[n-t,r]),m=BW(p,s),g=JK(s);if(0===t)o=tH(f,Pq(m,Pq(g,f)));else{const e=tH(f,Pq(m,Pq(g,f)));o=kq([Nq(o,[0,0],[t,r]),e],0)}const y=JK(m),v=Nq(i,[0,t],[n,i.shape[1]-t]);if(0===t)i=tH(v,Pq(Pq(v,s),y));else{const e=tH(v,Pq(Pq(v,s),y));i=kq([Nq(i,[0,0],[n,t]),e],1)}return[s,o,i]})),CG([e,c,l])}return!e&&n>r&&(i=Nq(i,[0,0],[n,r]),o=Nq(o,[0,0],[r,r])),[i,o]}))}const YZ=_G({qr_:function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(kj(t.rank>=2,(()=>"qr() requires input tensor to have a rank >= 2, but got rank ".concat(t.rank))),2===t.rank)return XZ(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce(((t,e)=>t*e)),r=HK(Mq(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],o=[];r.forEach((t=>{const[n,r]=XZ(t,e);i.push(n),o.push(r)}));return[Mq(OK(i,0),t.shape),Mq(OK(o,0),t.shape)]}}});var KZ;!function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(KZ||(KZ={}));const ZZ=_G({computeWeightedLoss_:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:KZ.SUM_BY_NONZERO_WEIGHTS;const r=vG(t,"losses","computeWeightedLoss");let i=null;null!=e&&(i=vG(e,"weights","computeWeightedLoss"));const o=null==i?r:BW(r,i);if(n===KZ.NONE)return o;if(n===KZ.SUM)return PX(o);if(n===KZ.MEAN){if(null==i)return gY(o);{const t=r.size/i.size,e=UW(PX(o),PX(i));return t>1?UW(e,HW(t)):e}}if(n===KZ.SUM_BY_NONZERO_WEIGHTS){if(null==i)return UW(PX(o),HW(r.size));{const t=BW(i,vY(r.shape)),e=RW(PX(AY(t,HW(0))),"float32");return UW(PX(o),e)}}throw Error("Unknown reduction: ".concat(n))}});const JZ=_G({absoluteDifference_:function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:KZ.SUM_BY_NONZERO_WEIGHTS;const i=vG(t,"labels","absoluteDifference"),o=vG(e,"predictions","absoluteDifference");let a=null;null!=n&&(a=vG(n,"weights","absoluteDifference")),Pj(i.shape,o.shape,"Error in absoluteDifference: ");const s=eH(tH(i,o));return ZZ(s,a,r)}});const $Z=_G({cosineDistance_:function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:KZ.SUM_BY_NONZERO_WEIGHTS;const o=vG(t,"labels","cosineDistance"),a=vG(e,"predictions","cosineDistance");let s=null;null!=r&&(s=vG(r,"weights","cosineDistance")),Pj(o.shape,a.shape,"Error in cosineDistance: ");const c=HW(1),l=tH(c,PX(BW(o,a),n,!0));return ZZ(l,s,i)}});const QZ=_G({hingeLoss_:function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:KZ.SUM_BY_NONZERO_WEIGHTS,i=vG(t,"labels","hingeLoss");const o=vG(e,"predictions","hingeLoss");let a=null;null!=n&&(a=vG(n,"weights","hingeLoss")),Pj(i.shape,o.shape,"Error in hingeLoss: ");const s=HW(1);i=tH(BW(HW(2),i),s);const c=eK(tH(s,BW(i,o)));return ZZ(c,a,r)}});const tJ=_G({huberLoss_:function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:KZ.SUM_BY_NONZERO_WEIGHTS;const o=vG(t,"labels","huberLoss"),a=vG(e,"predictions","huberLoss");let s=null;null!=n&&(s=vG(n,"weights","huberLoss")),Pj(o.shape,a.shape,"Error in huberLoss: ");const c=HW(r),l=eH(tH(a,o)),u=xY(l,c),h=tH(l,u),d=FW(BW(HW(.5),VW(u)),BW(c,h));return ZZ(d,s,i)}});const eJ=_G({logLoss_:function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:KZ.SUM_BY_NONZERO_WEIGHTS;const o=vG(t,"labels","logLoss"),a=vG(e,"predictions","logLoss");let s=null;null!=n&&(s=vG(n,"weights","logLoss")),Pj(o.shape,a.shape,"Error in logLoss: ");const c=HW(1),l=HW(r),u=eY(BW(o,QX(FW(a,l)))),h=BW(tH(c,o),QX(FW(tH(c,a),l))),d=tH(u,h);return ZZ(d,s,i)}});const nJ=_G({meanSquaredError_:function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:KZ.SUM_BY_NONZERO_WEIGHTS;const i=vG(t,"labels","meanSquaredError"),o=vG(e,"predictions","meanSquaredError");let a=null;null!=n&&(a=vG(n,"weights","meanSquaredError")),Pj(i.shape,o.shape,"Error in meanSquaredError: ");const s=AK(i,o);return ZZ(s,a,r)}});const rJ=_G({sigmoidCrossEntropy_:function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:KZ.SUM_BY_NONZERO_WEIGHTS,o=vG(t,"multiClassLabels","sigmoidCrossEntropy");const a=vG(e,"logits","sigmoidCrossEntropy");let s=null;if(null!=n&&(s=vG(n,"weights","sigmoidCrossEntropy")),Pj(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){const t=HW(r),e=HW(1),n=HW(.5);o=FW(BW(o,tH(e,t)),BW(n,t))}const c=function(t,e){const n=vG(t,"labels","sigmoidCrossEntropyWithLogits"),r=vG(e,"logits","sigmoidCrossEntropyWithLogits");Pj(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=eK(r),o=BW(r,n),a=tY(DX(eY(eH(r))));return FW(tH(i,o),a)}(o,a);return ZZ(c,s,i)}});const iJ=_G({softmaxCrossEntropy_:function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:KZ.SUM_BY_NONZERO_WEIGHTS,o=vG(t,"onehotLabels","softmaxCrossEntropy");const a=vG(e,"logits","softmaxCrossEntropy");let s=null;if(null!=n&&(s=vG(n,"weights","softmaxCrossEntropy")),Pj(o.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){const t=HW(r),e=HW(1),n=HW(o.shape[1]);o=FW(BW(o,tH(e,t)),UW(t,n))}const c=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(e.rank," ")+"and dim was ".concat(n));const r=WW(((t,e,r)=>{const i=oY(e,[n],!0),o=tH(RW(e,"float32"),i);r([t,o]);const a=eY(BW(o,t));return{value:PX(a,[n]),gradFunc:(t,e)=>{const[r,i]=e,o=TX(t.shape,[n]);return[BW(Mq(t,o),tH(RW(r,"float32"),DX(i))),BW(Mq(t,o),tH(DX(i),RW(r,"float32")))]}}}));return r(t,e)}(o,a);return ZZ(c,s,i)}});const oJ=_G({sparseFillEmptyRows_:function(t,e,n,r){const i=vG(t,"indices","sparseFillEmptyRows","int32"),o=vG(e,"values","sparseFillEmptyRows"),a=vG(n,"denseShape","sparseFillEmptyRows","int32"),s=vG(r,"defaultValue","sparseFillEmptyRows",o.dtype);if(2!==i.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(i.shape));if(1!==o.rank)throw new Error("Values should be Tensor1D but received shape ".concat(o.shape));if(1!==a.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(a.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));const c={indices:i,values:o,denseShape:a,defaultValue:s},l=lG.runKernel(Tz,c);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}});const aJ=_G({sparseReshape_:function(t,e,n){const r=vG(t,"inputIndices","sparseReshape","int32"),i=vG(e,"inputShape","sparseReshape","int32"),o=vG(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==i.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(o.shape));const a={inputIndices:r,inputShape:i,newShape:o},s=lG.runKernel(Ez,a);return{outputIndices:s[0],outputShape:s[1]}}});const sJ=_G({sparseSegmentMean_:function(t,e,n){const r=vG(t,"data","sparseSegmentMean"),i=vG(e,"indices","sparseSegmentMean","int32"),o=vG(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(i.shape));if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(o.shape));const a={data:r,indices:i,segmentIds:o};return lG.runKernel(Az,a)}});const cJ=_G({sparseSegmentSum_:function(t,e,n){const r=vG(t,"data","sparseSegmentSum"),i=vG(e,"indices","sparseSegmentSum","int32"),o=vG(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(i.shape));if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(o.shape));const a={data:r,indices:i,segmentIds:o};return lG.runKernel(Mz,a)}});const lJ=_G({stringNGrams_:function(t,e,n,r,i,o,a,s){const c=vG(t,"data","stringNGrams","string");if("string"!==c.dtype)throw new Error("Data must be of datatype string");if(1!==c.shape.length)throw new Error("Data must be a vector, saw: ".concat(c.shape));const l=vG(e,"dataSplits","stringNGrams");if("int32"!==l.dtype)throw new Error("Data splits must be of datatype int32");const u={separator:n,nGramWidths:r,leftPad:i,rightPad:o,padWidth:a,preserveShortSequences:s},h={data:c,dataSplits:l},d=lG.runKernel(Iz,h,u);return{nGrams:d[0],nGramsSplits:d[1]}}});const uJ=_G({stringSplit_:function(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=vG(t,"input","stringSplit","string"),i=vG(e,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==i.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(i.shape));const o={skipEmpty:n},a={input:r,delimiter:i},s=lG.runKernel(Nz,a,o);return{indices:s[0],values:s[1],shape:s[2]}}});const hJ={fft:_K,ifft:wK,rfft:EK,irfft:SK},dJ={hammingWindow:gZ,hannWindow:yZ,frame:vZ,stft:bZ},pJ={flipLeftRight:_Z,grayscaleToRGB:wZ,resizeNearestNeighbor:VZ,resizeBilinear:zZ,rgbToGrayscale:SZ,rotateWithOffset:TZ,cropAndResize:xZ,nonMaxSuppression:AZ,nonMaxSuppressionAsync:LZ,nonMaxSuppressionWithScore:FZ,nonMaxSuppressionWithScoreAsync:jZ,nonMaxSuppressionPadded:UZ,nonMaxSuppressionPaddedAsync:BZ,threshold:GZ,transform:WZ},fJ={bandPart:HZ,gramSchmidt:qZ,qr:YZ},mJ={absoluteDifference:JZ,computeWeightedLoss:ZZ,cosineDistance:$Z,hingeLoss:QZ,huberLoss:tJ,logLoss:eJ,meanSquaredError:nJ,sigmoidCrossEntropy:rJ,softmaxCrossEntropy:iJ},gJ={sparseFillEmptyRows:oJ,sparseReshape:aJ,sparseSegmentMean:sJ,sparseSegmentSum:cJ},yJ={stringNGrams:lJ,stringSplit:uJ,stringToHashBucketFast:_G({stringToHashBucketFast_:function(t,e){const n=vG(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const i={input:n};return lG.runKernel(Rz,i,r)}}),staticRegexReplace:_G({staticRegexReplace_:function(t,e,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=vG(t,"input","staticRegexReplace","string"),o={pattern:e,rewrite:n,replaceGlobal:r};return lG.runKernel(kz,{x:i},o)}})},vJ="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:t=>t();function bJ(t,e){const n=t[0].length;t.forEach(((t,e)=>{kj(t.length===n,(()=>"Error in concat".concat(n,"D: rank of tensors[").concat(e,"] must be the same ")+"as the rank of the rest (".concat(n,")")))})),kj(e>=0&&e<n,(()=>"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")));const r=t[0];t.forEach(((t,i)=>{for(let o=0;o<n;o++)kj(o===e||t[o]===r[o],(()=>"Error in concat".concat(n,"D: Shape of tensors[").concat(i,"] (").concat(t,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(i,".")))}))}function xJ(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}var _J;function wJ(t,e,n){let r=new Array;if(null==n&&null==e)return r;if(null==e)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(null==n)return r;if(t+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(e," are incompatible: rt input.rank = ").concat(t+n.length,", but shape.rank = ").concat(r.length));for(let i=1;i<n.length;++i){const o=n[i],a=r[r.length-n.length+i],s=r[a];if(o>=0)if(s>=0){if(s!==o)throw new Error("rt input.shape and shape=".concat(e," are incompatible: rt input.shape[").concat(i+t,"] = ").concat(o," but shape[").concat(i+t,"] = ").concat(s))}else r[a]=o}return r}function SJ(t){const e={FIRST_DIM_SIZE:_J.FIRST_DIM_SIZE,VALUE_ROWIDS:_J.VALUE_ROWIDS,ROW_LENGTHS:_J.ROW_LENGTHS,ROW_SPLITS:_J.ROW_SPLITS,ROW_LIMITS:_J.ROW_LIMITS,ROW_STARTS:_J.ROW_STARTS},n=[];for(const r of t){if(!(r in e))break;n.push(e[r])}return n}function TJ(t){return 0===t.length?0:t[0]===_J.FIRST_DIM_SIZE?t.length-1:t.length}function EJ(t,e){if(null==t||null==e)return;const n=t.length,r=e.length;if(n>=r)throw new Error("defaultValue.shape=".concat(t," and ragged tensor flatValues.shape=").concat(e,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(let i=0;i<Math.min(n,r-1);++i){const n=t[i],r=e[i+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error("defaultValue.shape=".concat(t,", and ragged tensor input flatValues.shape=").concat(e," are incompatible: defaultValue.shape[").concat(i-t.length,"] = ").concat(n," but ragged tensor input.flatValues.shape[").concat(i-t.length,"] = ").concat(r))}}!function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"}(_J||(_J={}));const AJ=30;function MJ(t){return t<=AJ?t:Yj(t,Math.floor(Math.sqrt(t)))}function OJ(t,e,n){return[n*("number"===typeof t?t:t[0]),e*("number"===typeof t?t:t[1])]}function CJ(t,e,n){let r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])r=r.concat(e.slice(0)),r.push(t[0]/n),r=r.concat(t.slice(1));else{r=r.concat(t[0]);const n=e.length;for(let i=0;i<n;++i)r=r.concat([t[i+1]/e[i],e[i]]);r=r.concat(t.slice(n+1))}return r}function kJ(t,e){const n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(e);for(let r=e+1;r<t;++r)r<=2*e?(n.push(r),n.push(r-(e+1))):n.push(r)}else{const r=[],i=[];for(let n=1;n<t;++n)n>=2*e+1||n%2===1?i.push(n):r.push(n);n.push(...r),n.push(0),n.push(...i)}return n}function PJ(t,e,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let o=1;o<t.length;++o)o<=e.length?r?i.push(e[o-1]*t[o]):i.push(t[o]/e[o-1]):i.push(t[o]);return i}function IJ(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function NJ(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}function RJ(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==e.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(e.shape[r-1]," vs. ").concat(n));if(0===Nj(t.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(t.shape,"."));const i=e.shape,o=i[i.length-1];let a=1;for(let h=0;h<i.length-1;++h)a*=i[h];const s=t.shape,c=i.slice();c.pop();let l=1;for(let h=o;h<n;++h)l*=s[h],c.push(s[h]);const u=[...Kj(t.shape).map((t=>t/l)),1].slice(0,o);return[c,a,l,u]}const DJ=1.7580993408473768,LJ=1.0507009873554805,FJ=.3275911,jJ=.254829592,UJ=-.284496736,BJ=1.421413741,zJ=-1.453152027,VJ=1.061405429;function GJ(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(t.length,", imag: ").concat(e.length,"."));const n=new Float32Array(2*t.length);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function WJ(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function HJ(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function qJ(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function XJ(t,e){return{real:t[2*e],imag:t[2*e+1]}}function YJ(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function KJ(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const o=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(o),r[i]=Math.sin(o)}return{real:n,imag:r}}function ZJ(t,e,n){const r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}const JJ="->",$J=/->/g,QJ=",",t$="...";function e$(t,e){const n=((t=t.replace(/\s/g,"")).length-t.replace($J,"").length)/JJ.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(JJ,'").'));const[r,i]=t.split(JJ);kj(-1===r.indexOf(t$),(()=>'The ellipsis notation ("'.concat(t$,'") is not supported yet.')));const o=r.split(QJ),a=o.length;if(e!==a)throw new Error("Expected ".concat(a," input tensors, received ").concat(e));if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let h=0;h<i.length;++h){const t=i[h];if(!o.some((e=>-1!==e.indexOf(t))))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===s.indexOf(t)&&s.push(t)}for(let h=0;h<r.length;++h){const t=r[h];-1===s.indexOf(t)&&t!==QJ&&s.push(t)}const c=new Array(o.length);for(let h=0;h<a;++h){if(new Set(o[h].split("")).size!==o[h].length)throw new Error("Found duplicate axes in input component ".concat(o[h],". ")+"Support for duplicate axes in input is not implemented yet.");c[h]=[];for(let t=0;t<o[h].length;++t)c[h].push(s.indexOf(o[h][t]))}const l=s.length,u=[];for(let h=i.length;h<l;++h)u.push(h);return{allDims:s,summedDims:u,idDims:c}}function n$(t,e){let n=new Array(t);n.fill(-1);for(let i=0;i<e.length;++i)n[e[i]]=i;const r=[];for(let i=0;i<t;++i)-1===n[i]&&r.push(i);return n=n.filter((t=>-1!==t)),{permutationIndices:n,expandDims:r}}function r$(t,e,n){const r=new Array(t);for(let i=0;i<n.length;++i){const t=n[i].shape;for(let n=0;n<e[i].length;++n)void 0===r[e[i][n]]?r[e[i][n]]=t[n]:kj(r[e[i][n]]===t[n],(()=>"Expected dimension ".concat(r[e[i][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(t),", ")+"but got dimension ".concat(t[n])))}}function i$(t,e){const n=t,r=[];let i=0;0===t.length&&n.push(-1),i=t.length+1;for(let a=0;a<i;++a)r.push([]);const o=[];for(let a=0;a<n.length;++a){const t=a$(e,n[a]);for(const e of t)-1===o.indexOf(e)&&(r[a].push(e),o.push(e))}return{path:n,steps:r}}function o$(t){return t.every(((t,e)=>t===e))}function a$(t,e){const n=[];for(let r=0;r<t.length;++r)0!==t[r].length&&-1===t[r].indexOf(e)&&-1!==e||n.push(r);return n}function s$(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof e)kj(t.shape[n]%e===0,(()=>"Number of splits must evenly divide the axis.")),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce(((t,e)=>(-1===e&&(t+=1),t)),0);kj(i<=1,(()=>"There should be only one negative value in split array."));const o=e.indexOf(-1);if(-1!==o){const r=e.reduce(((t,e)=>e>0?t+e:t));e[o]=t.shape[n]-r}kj(t.shape[n]===e.reduce(((t,e)=>t+e)),(()=>"The sum of sizes must match the size of the axis dimension.")),r=e}return r}function c$(t){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(t)}function l$(t,e){return"indices(".concat(t,", 0) is invalid: ").concat(e," < 0")}function u$(t,e,n){return"indices(".concat(t,", 0) is invalid: ").concat(e," >= ").concat(n)}function h$(t,e){return"only one output dimension may be -1, not both ".concat(t," and ").concat(e)}function d$(t,e){return"size ".concat(t," must be non-negative, not ").concat(e)}function p$(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function f$(t,e){const n=Nj(t),r=Nj(e);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(t," outputShape= ").concat(e)}function m$(t,e){const n=Nj(t),r=Nj(e);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(t," outputShape=").concat(e)}function g$(){return"segment ids must be >= 0"}function y$(){return"segment ids are not increasing"}function v$(t,e){return"Segment id ".concat(t," out of range [0, ").concat(e,"), possibly because segmentIds input is not sorted.")}function b$(t,e,n){return"Bad: indices[".concat(t,"] == ").concat(e," out of range [0, ").concat(n,")")}function x$(t,e){let n,r=!1;for(t<=AJ?(n=t,r=!0):n=Yj(t,Math.floor(Math.sqrt(t)));!r;)n>e||n===t?r=!0:n=Yj(t,n+1);return n}function _$(t,e,n){const r=[],i=t.length;for(let o=0;o<i;o++)o!==e?r.push(t[o]):r.push(n);return r}function w$(t,e,n,r){const i=e.shape.length,o=t.shape.length;if(0!==r&&(r<-i||r>i))throw new Error("Expect batchDims in the range of [-".concat(i,", ").concat(i,"], but got ").concat(r));if(r<0&&(r+=i),r>o)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(o,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(let h=0;h<r;++h)if(t.shape[h]!==e.shape[h])throw new Error("x.shape[".concat(h,"]: ").concat(t.shape[h]," should be equal to indices.shape[").concat(h,"]: ").concat(e.shape[h],"."));const a=t.shape[n],s=[];let c=1,l=1,u=1;for(let h=0;h<r;++h)s.push(t.shape[h]),c*=t.shape[h];for(let h=r;h<n;h++)s.push(t.shape[h]),l*=t.shape[h];for(let h=r;h<i;h++)s.push(e.shape[h]);for(let h=n+1;h<o;h++)s.push(t.shape[h]),u*=t.shape[h];return{batchSize:c,sliceSize:u,outerSize:l,dimSize:a,outputShape:s}}function S$(t){try{return t.map((t=>EV(t)))}catch(cCt){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(cCt))}}function T$(t){return t.map((t=>TV(t)))}!function(){for(const t of sH)ZW(t)}();var E$,A$;sU().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"}(E$||(E$={})),function(t){let e;!function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"}(e=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))}(A$||(A$={}));const M$={};function O$(t){return M$[t]}function C$(t,e,n,r,i){const o=e.inputParams[t];if(o&&void 0!==o.inputIndexStart){const t=o.inputIndexStart,a=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?t+1:o.inputIndexEnd,s=t<0?e.inputNames.length+t:t;if("tensor"===o.type)return k$(e.inputNames[s],n,r,i);if("tensors"===o.type){const o=e.inputs.slice(t,a),s=e.inputNames.slice(t,a).filter(((t,e)=>{var n;return"NoOp"!==(null===(n=o[e])||void 0===n?void 0:n.op)}));return s.map((t=>k$(t,n,r,i)))}const c=k$(e.inputNames[s],n,r,i),l=c.dataSync();return"number"===o.type?l[0]:Jj(c.shape,l)}const a=e.attrParams[t];return a&&a.value}function k$(t,e,n,r){const[i,o]=R$(t,n);if(null!=r){const t=r.getHashTableHandleByName(i);if(null!=t)return t}const a=n.currentContextIds.find((t=>!!e[N$(i,t)]));return void 0!==a?e[N$(i,a)][o]:void 0}function P$(t,e,n){return e[N$(t,n.currentContextId)]}function I$(t,e){const[n,r,i]=R$(t,e);return[N$(n,e&&e.currentContextId),r,i]}function N$(t,e){return e?"".concat(t,"-").concat(e):t}function R$(t,e){if(""===t)return["",0,void 0];const n=null!=e&&null!=e.parseNodeNameCache;if(n){const n=e.parseNodeNameCache.get(t);if(null!=n)return n}const r=t.split(":");let i;if(1===r.length)i=[t,0,void 0];else{const t=r[0],e=3===r.length?r[1]:void 0;i=[t,Number(r[r.length-1]),e]}return n&&e.parseNodeNameCache.set(t,i),i}function D$(t,e,n){let r=C$("pad",t,e,n);if("explicit"===r){r=C$("explicitPaddings",t,e,n);const i=[[0,0],[0,0],[0,0],[0,0]];for(let t=0;t<4;t++)i[t][0]=r[2*t],i[t][1]=r[2*t+1];return i}return r}function L$(t){return t.kept?t:DW(t)}const F$=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],j$=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],U$=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],B$=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],z$=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],V$=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],G$=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],W$=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],H$=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],q$=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],X$=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],Y$=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],K$=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],Z$=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],J$=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],$$=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Q$=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],tQ=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],eQ=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class nQ{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const t=[].concat(...[s,c,l,u,h,d,p,f,m,g,y,v,b,x,_,w,S,T,E].map((t=>t.json)));this.opMappers=t.reduce(((t,e)=>(t[e.tfOpName]=e,t)),{})}transformGraph(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.node,r=[],i=[],o=[],a=n.reduce(((t,e)=>(t[e.name]=this.mapNode(e),e.op.startsWith("Placeholder")?r.push(t[e.name]):"Const"===e.op?i.push(t[e.name]):null!=e.input&&0!==e.input.length||o.push(t[e.name]),t)),{});let s=[];const c=[];let l={},u={};null!=e&&(l=this.mapSignatureEntries(e.inputs),u=this.mapSignatureEntries(e.outputs));const h=Object.keys(a);h.forEach((t=>{const e=a[t];e.inputNames.forEach(((t,n)=>{const[r,,i]=I$(t),o=a[r];if(null!=o.outputs){const t=o.outputs.indexOf(i);if(-1!==t){const i="".concat(r,":").concat(t);e.inputNames[n]=i}}e.inputs.push(o),o.children.push(e)}))})),0===Object.keys(u).length?h.forEach((t=>{const e=a[t];0===e.children.length&&c.push(e)})):Object.keys(u).forEach((t=>{const[e]=I$(t),n=a[e];null!=n&&(n.signatureKey=u[t],c.push(n))})),Object.keys(l).length>0?Object.keys(l).forEach((t=>{const[e]=I$(t),n=a[e];n&&(n.signatureKey=l[t],s.push(n))})):s=r;let d={};null!=t.library&&null!=t.library.function&&(d=t.library.function.reduce(((t,e)=>(t[e.signature.name]=this.mapFunction(e),t)),{}));const p={nodes:a,inputs:s,outputs:c,weights:i,placeholders:r,signature:e,functions:d};return o.length>0&&(p.initNodes=o),p}mapSignatureEntries(t){return Object.keys(t||{}).reduce(((e,n)=>(e[t[n].name]=n,e)),{})}mapNode(t){const e=O$(t.op)||this.opMappers[t.op]||{};null==t.attr&&(t.attr={});const n={name:t.name,op:t.op,category:e.category,inputNames:(t.input||[]).map((t=>t.startsWith("^")?t.slice(1):t)),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr,outputs:e.outputs};return null!=e.inputs&&(n.inputParams=e.inputs.reduce(((t,e)=>(t[e.name]={type:e.type,inputIndexStart:e.start,inputIndexEnd:e.end},t)),{})),null!=e.attrs&&(n.attrParams=e.attrs.reduce(((e,n)=>{const r=n.type;let i;switch(n.type){case"string":i=iQ(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=iQ(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":i=fQ(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=fQ(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":i=aQ(t.attr,n.tfName,n.defaultValue||0),void 0===i&&n.tfDeprecatedName&&(i=aQ(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":i=pQ(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=pQ(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":i=oQ(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=oQ(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":i=gQ(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=gQ(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":i=dQ(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=dQ(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":i=mQ(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=mQ(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":i=lQ(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=lQ(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":i=uQ(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=uQ(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":i=cQ(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=cQ(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(t.op))}return e[n.name]={value:i,type:r},e}),{})),n}mapFunction(t){const e=t.nodeDef,n=[];let r={};null!=e&&(r=e.reduce(((t,e)=>(t[e.name]=this.mapNode(e),"Const"===e.op&&n.push(t[e.name]),t)),{}));const i=[],o=[];t.signature.inputArg.forEach((t=>{const[e]=I$(t.name),n={name:e,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:sQ(t.type),type:"dtype"}},children:[]};n.signatureKey=t.name,i.push(n),r[e]=n}));Object.keys(r).forEach((t=>{const e=r[t];e.inputNames.forEach(((t,n)=>{const[i,,o]=I$(t),a=r[i];if(null!=a.outputs){const t=a.outputs.indexOf(o);if(-1!==t){const r="".concat(i,":").concat(t);e.inputNames[n]=r}}e.inputs.push(a),a.children.push(e)}))}));const a=t.ret;t.signature.outputArg.forEach((t=>{const[e,n]=I$(a[t.name]),i=r[e];null!=i&&(i.defaultOutput=n,o.push(i))}));const s=this.mapArgsToSignature(t);return{nodes:r,inputs:i,outputs:o,weights:n,placeholders:[],signature:s}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce(((t,e)=>(t[e.name]=this.mapArgToTensorInfo(e),t)),{}),outputs:t.signature.outputArg.reduce(((e,n)=>(e[n.name]=this.mapArgToTensorInfo(n,t.ret),e)),{})}}mapArgToTensorInfo(t,e){let n=t.name;return null!=e&&(n=e[n]),{name:n,dtype:t.type}}}function rQ(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):function(t){const e=sU().global;if("undefined"!==typeof e.atob)return e.atob(t);if("undefined"!==typeof Buffer)return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(t);return e?n:n.toLowerCase()}function iQ(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t[e];return null!=i?rQ(i.s,r):n}function oQ(t,e,n){const r=t[e];return r?r.b:n}function aQ(t,e,n){const r=t[e]||{},i=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof i?i:parseInt(i,10)}function sQ(t){switch("string"===typeof t&&(t=E$[t]),t){case E$.DT_FLOAT:case E$.DT_HALF:return"float32";case E$.DT_INT32:case E$.DT_INT64:case E$.DT_INT8:case E$.DT_UINT8:return"int32";case E$.DT_BOOL:return"bool";case E$.DT_DOUBLE:return"float32";case E$.DT_STRING:return"string";case E$.DT_COMPLEX64:case E$.DT_COMPLEX128:return"complex64";default:return null}}function cQ(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function lQ(t,e,n){const r=t[e];return r&&r.type?sQ(r.type):n}function uQ(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map((t=>sQ(t))):n}function hQ(t){if(!t.unknownRank)return null!=t.dim?t.dim.map((t=>"number"===typeof t.size?t.size:parseInt(t.size,10))):[]}function dQ(t,e,n){const r=t[e];return r&&r.shape?hQ(r.shape):n}function pQ(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((t=>"number"===typeof t?t:parseInt(t,10))):n}function fQ(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t[e];return i&&i.list&&i.list.s?i.list.s.map((t=>rQ(t,r))):n}function mQ(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map((t=>hQ(t))):n}function gQ(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}class yQ{constructor(t,e,n){this.node=t,this.tensorMap=e,this.context=n,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((t=>this.getInput(t))),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce(((t,e)=>(t[e]=this.getAttr(e),t)),{}))}getInput(t){return k$(t,this.tensorMap,this.context)}getAttr(t,e){const n=this.node.rawAttrs[t];if(null!=n.tensor)return k$(t,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return aQ(this.node.rawAttrs,t,e);if(null!=n.s)return iQ(this.node.rawAttrs,t,e);if(null!=n.b)return oQ(this.node.rawAttrs,t,e);if(null!=n.shape)return dQ(this.node.rawAttrs,t,e);if(null!=n.type)return lQ(this.node.rawAttrs,t,e);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return pQ(this.node.rawAttrs,t,e);if(null!=n.list.s)return fQ(this.node.rawAttrs,t,e);if(null!=n.list.shape)return mQ(this.node.rawAttrs,t,e);if(null!=n.list.b)return gQ(this.node.rawAttrs,t,e);if(null!=n.list.type)return uQ(this.node.rawAttrs,t,e)}return e}}function vQ(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof t&&"number"!==typeof e){kj(t.length===e.length,(()=>n+" Shapes ".concat(t," and ").concat(e," must match")));for(let r=0;r<t.length;r++){const i=t[r],o=e[r];kj(i<0||o<0||i===o,(()=>n+" Shapes ".concat(t," and ").concat(e," must match")))}}}function bQ(t){return"number"!==typeof t&&!t.some((t=>t<0))}function xQ(t,e,n){let r=_Q(t,n);const i=!bQ(r);if(i&&0===e.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(i&&e.forEach((t=>{r=_Q(t.shape,r)})),!bQ(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function _Q(t,e){if("number"===typeof t)return e;if("number"===typeof e)return t;if(t.length!==e.length)throw new Error("Incompatible ranks during merge: ".concat(t," vs. ").concat(e));const n=[];for(let r=0;r<t.length;++r){const i=t[r],o=e[r];if(i>=0&&o>=0&&i!==o)throw new Error("Incompatible shape during merge: ".concat(t," vs. ").concat(e));n[r]=i>=0?i:o}return n}class wQ{constructor(t,e,n,r,i,o,a){this.name=t,this.dtype=e,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=HW(0),kG(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(t){this.tensors.forEach((e=>{null!=t&&t.has(e.tensor.id)||e.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(t<0||t>=this.size())throw new Error("Tried to read from index ".concat(t,", but array size is: ").concat(this.size()));const e=this.tensors[t];if(e.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(t," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor}readMany(t){return t.map((t=>this.read(t)))}write(t,e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error("Tried to write to index ".concat(t,", but array is not resizeable and size is: ").concat(this.maxSize));const n=this.tensors[t]||{};if(e.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(t,",\n          because the value dtype is ").concat(e.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=e.shape),vQ(this.elementShape,e.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(t,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(t,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(t,", because it has already been written."));n.tensor=e,kG(e),n.written=!0,this.tensors[t]=n}writeMany(t,e){if(t.length!==e.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(t.length," is not the same as tensors size: ").concat(e.length,"."));t.forEach(((t,n)=>this.write(t,e[n])))}gather(t,e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(e));if(t)t=t.slice(0,this.size());else{t=[];for(let e=0;e<this.size();e++)t.push(e)}if(0===t.length)return TG([],[0].concat(this.elementShape));const n=this.readMany(t);return vQ(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),OK(n,0)}concat(t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(t));if(0===this.size())return TG([],[0].concat(this.elementShape));const e=[];for(let r=0;r<this.size();r++)e.push(r);const n=this.readMany(e);return vQ(this.elementShape,n[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(n[0].shape,")")),kq(n,0)}scatter(t,e){if(e.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(e.dtype));if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));const n=Math.max(...t);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(t,HK(e,0))}split(t,e){if(e.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(e.dtype));let n=0;const r=t.map((t=>(n+=t,n)));if(n!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(n,", and tensor's shape is: ").concat(e.shape));if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(t.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");const i=0===n?0:e.size/n,o=[];OG((()=>{e=Mq(e,[1,n,i]);for(let n=0;n<t.length;++n){const a=[0,0===n?0:r[n-1],0],s=[1,t[n],i];o[n]=Mq(Nq(e,a,s),this.elementShape)}return o}));const a=[];for(let s=0;s<t.length;s++)a[s]=s;this.writeMany(a,o)}}class SQ{get id(){return this.idTensor.id}constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;this.tensors=t,this.elementShape=e,this.elementDtype=n,null!=t&&t.forEach((t=>{if(n!==t.dtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(t.dtype));vQ(e,t.shape,"TensorList shape mismatch: "),kG(t)})),this.idTensor=HW(0),this.maxNumElements=r,kG(this.idTensor)}copy(){return new SQ([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach((e=>{null!=t&&t.has(e.id)||e.dispose()})),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(e!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e,", but list elements ").concat(this.elementDtype));if(-1!==n&&this.tensors.length!==n)throw new Error("Operation expected a list with ".concat(n," elements but got a list with ").concat(this.tensors.length," elements."));vQ(t,this.elementShape,"TensorList shape mismatch: ");const r=xQ(this.elementShape,this.tensors,t);return OG((()=>{const t=this.tensors.map((t=>Mq(t,r)));return OK(t,0)}))}popBack(t,e){if(e!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=xQ(this.elementShape,this.tensors,t),r=this.tensors.pop();return r.kept=!1,vQ(r.shape,t,"TensorList shape mismatch: "),Mq(r,n)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(vQ(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");kG(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(t));if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error("TensorListResize input size ".concat(t," is greater maxNumElement ").concat(this.maxNumElements,"."));const e=new SQ([],this.elementShape,this.elementDtype,this.maxNumElements);e.tensors.length=t;for(let n=0;n<Math.min(this.tensors.length,t);++n)e.tensors[n]=this.tensors[n];return e}getItem(t,e,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(t<0||t>this.tensors.length)throw new Error("Trying to access element ".concat(t," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[t])throw new Error("element at index ".concat(t," is null."));vQ(this.tensors[t].shape,e,"TensorList shape mismatch: ");const r=xQ(this.elementShape,this.tensors,e);return Mq(this.tensors[t],r)}setItem(t,e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(t<0||-1!==this.maxNumElements&&t>=this.maxNumElements)throw new Error("Trying to set element ".concat(t," in a list with max ").concat(this.maxNumElements," elements."));vQ(this.elementShape,e.shape,"TensorList shape mismatch: "),kG(e),null!=this.tensors[t]&&(this.tensors[t].kept=!1),this.tensors[t]=e}gather(t,e,n){if(e!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e,", but list elements ").concat(this.elementDtype));vQ(this.elementShape,n,"TensorList shape mismatch: "),t=t.slice(0,this.size());const r=xQ(this.elementShape,this.tensors,n);return 0===t.length?TG([],[0].concat(r)):OG((()=>{const e=t.map((t=>Mq(this.tensors[t],r)));return OK(e,0)}))}concat(t,e){if(t&&t!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(t));vQ(this.elementShape,e,"TensorList shape mismatch: ");const n=xQ(this.elementShape,this.tensors,e);return 0===this.size()?TG([],[0].concat(n)):OG((()=>{const t=this.tensors.map((t=>Mq(t,n)));return kq(t,0)}))}}const TQ=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=C$("thenBranch",t,e,n),i=C$("elseBranch",t,e,n),o=C$("cond",t,e,n),a=C$("args",t,e,n);return(await o.data())[0]?n.functionMap[r].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap):n.functionMap[i].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=C$("body",t,e,n),i=C$("cond",t,e,n),o=C$("args",t,e,n),a=await n.functionMap[i].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap),s=o.map((t=>t.id));let c=await a[0].data();a.forEach((t=>{t.kept||-1!==s.indexOf(t.id)||t.dispose()}));let l=o;for(;c[0];){const t=l;l=await n.functionMap[r].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);const e=l.map((t=>t.id));t.forEach((t=>{t.kept||-1!==s.indexOf(t.id)||-1!==e.indexOf(t.id)||t.dispose()}));const o=await n.functionMap[i].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);c=await o[0].data(),o.forEach((t=>{t.kept||-1!==s.indexOf(t.id)||-1!==e.indexOf(t.id)||t.dispose()}))}return l}case"LoopCond":return[L$(C$("pred",t,e,n))];case"Switch":{const r=C$("pred",t,e,n);let i=C$("data",t,e,n);return i.kept||(i=L$(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=t.inputNames.find((t=>void 0!==k$(t,e,n)));if(r){return[L$(k$(r,e,n))]}return}case"Enter":{const r=C$("frameName",t,e,n),i=C$("tensor",t,e,n);return n.enterFrame(r),[L$(i)]}case"Exit":{const r=C$("tensor",t,e,n);return n.exitFrame(),[L$(r)]}case"NextIteration":{const r=C$("tensor",t,e,n);return n.nextIteration(),[L$(r)]}case"TensorArrayV3":{const r=C$("size",t,e,n),i=C$("dtype",t,e,n),o=C$("elementShape",t,e,n),a=C$("dynamicSize",t,e,n),s=C$("clearAfterRead",t,e,n),c=C$("identicalElementShapes",t,e,n),l=C$("name",t,e,n),u=new wQ(l,i,r,o,c,a,s);return n.addTensorArray(u),[u.idTensor,HW(1)]}case"TensorArrayWriteV3":{const r=C$("tensorArrayId",t,e,n),i=C$("index",t,e,n),o=C$("tensor",t,e,n),a=n.getTensorArray(r.id);return a.write(i,o),[a.idTensor]}case"TensorArrayReadV3":{const r=C$("tensorArrayId",t,e,n),i=C$("index",t,e,n);return[n.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{const r=C$("tensorArrayId",t,e,n),i=C$("indices",t,e,n),o=C$("dtype",t,e,n);return[n.getTensorArray(r.id).gather(i,o)]}case"TensorArrayScatterV3":{const r=C$("tensorArrayId",t,e,n),i=C$("indices",t,e,n),o=C$("tensor",t,e,n),a=n.getTensorArray(r.id);return a.scatter(i,o),[a.idTensor]}case"TensorArrayConcatV3":{const r=C$("tensorArrayId",t,e,n),i=n.getTensorArray(r.id),o=C$("dtype",t,e,n);return[i.concat(o)]}case"TensorArraySplitV3":{const r=C$("tensorArrayId",t,e,n),i=C$("tensor",t,e,n),o=C$("lengths",t,e,n),a=n.getTensorArray(r.id);return a.split(o,i),[a.idTensor]}case"TensorArraySizeV3":{const r=C$("tensorArrayId",t,e,n);return[HW(n.getTensorArray(r.id).size(),"int32")]}case"TensorArrayCloseV3":{const r=C$("tensorArrayId",t,e,n),i=n.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=C$("tensorListId",t,e,n),i=C$("index",t,e,n),o=C$("tensor",t,e,n),a=n.getTensorList(r.id);return a.setItem(i,o),[a.idTensor]}case"TensorListGetItem":{const r=C$("tensorListId",t,e,n),i=C$("index",t,e,n),o=C$("elementShape",t,e,n),a=C$("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(i,o,a)]}case"TensorListScatterV2":case"TensorListScatter":{const r=C$("indices",t,e,n),i=function(t,e,n,r){if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));const i=Math.max(...e);if(null!=r&&-1!==r&&i>=r)throw new Error("Max index must be < array size (".concat(i,"  vs. ").concat(r,")"));const o=new SQ([],n,t.dtype,r),a=HK(t,0);return e.forEach(((t,e)=>{o.setItem(t,a[e])})),o}(C$("tensor",t,e,n),r,C$("elementShape",t,e,n),C$("numElements",t,e,n));return n.addTensorList(i),[i.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=C$("elementShape",t,e,n),i=C$("elementDType",t,e,n);let o;o="TensorListReserve"===t.op?"numElements":"maxNumElements";const a=C$(o,t,e,n),s=function(t,e,n,r){return new SQ([],t,e,r)}(r,i,0,"TensorListReserve"===t.op?-1:a);return n.addTensorList(s),[s.idTensor]}case"TensorListGather":{const r=C$("tensorListId",t,e,n),i=C$("indices",t,e,n),o=C$("elementShape",t,e,n),a=C$("elementDType",t,e,n);return[n.getTensorList(r.id).gather(i,a,o)]}case"TensorListStack":{const r=C$("tensorListId",t,e,n),i=C$("elementShape",t,e,n),o=C$("elementDType",t,e,n),a=C$("numElements",t,e,n);return[n.getTensorList(r.id).stack(i,o,a)]}case"TensorListFromTensor":{const r=function(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(t.shape));if(t.dtype!==n)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(n));vQ(t.shape.slice(1),e,"TensorList shape mismatch: ");const i=HK(t);return new SQ(i,e,r)}(C$("tensor",t,e,n),C$("elementShape",t,e,n),C$("elementDType",t,e,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=C$("tensorListId",t,e,n),i=n.getTensorList(r.id),o=C$("dtype",t,e,n),a=C$("elementShape",t,e,n);return[i.concat(o,a)]}case"TensorListPushBack":{const r=C$("tensorListId",t,e,n),i=C$("tensor",t,e,n),o=n.getTensorList(r.id);return o.pushBack(i),[o.idTensor]}case"TensorListPopBack":{const r=C$("tensorListId",t,e,n),i=C$("elementShape",t,e,n),o=C$("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(i,o)]}case"TensorListSplit":{const r=C$("tensor",t,e,n),i=C$("elementShape",t,e,n),o=function(t,e,n){let r=0;const i=e.map((t=>(r+=t,r)));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));const o=_Q(t.shape.slice(1),n),a=0===r?0:t.size/r,s=OG((()=>{const n=[];t=Mq(t,[1,r,a]);for(let r=0;r<e.length;++r){const s=[0,0===r?0:i[r-1],0],c=[1,e[r],a];n[r]=Mq(Nq(t,s,c),o)}return t.dispose(),n})),c=new SQ([],n,t.dtype,e.length);for(let l=0;l<s.length;l++)c.setItem(l,s[l]);return c}(r,C$("lengths",t,e,n),i);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=C$("tensorListId",t,e,n);return[HW(n.getTensorList(r.id).size(),"int32")]}case"TensorListResize":{const r=C$("tensorListId",t,e,n),i=C$("size",t,e,n),o=n.getTensorList(r.id).resize(i);return n.addTensorList(o),[o.idTensor]}default:throw TypeError("Node type ".concat(t.op," is not implemented"))}};function EQ(t,e,n){const[r,i]=C$("fusedOps",t,e,n),o="biasadd"===r,a=!o,s="prelu"===i,c="fusedbatchnorm"===r,l=C$("numArgs",t,e,n);if(o){if(s&&2!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&o&&1!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=C$("strides",t,e,n),h=D$(t,e,n),d=C$("dataFormat",t,e,n).toUpperCase(),p=C$("dilations",t,e,n);let[f,m]=C$("args",t,e,n);a&&(m=f,f=void 0);return{stride:u,pad:h,dataFormat:d,dilations:p,biasArg:f,preluArg:m,activationFunc:i,leakyreluAlpha:C$("leakyreluAlpha",t,e,n)}}function AQ(t,e,n){return{boxes:C$("boxes",t,e,n),scores:C$("scores",t,e,n),maxOutputSize:C$("maxOutputSize",t,e,n),iouThreshold:C$("iouThreshold",t,e,n),scoreThreshold:C$("scoreThreshold",t,e,n),softNmsSigma:C$("softNmsSigma",t,e,n)}}class MQ{get id(){return this.handle.id}constructor(t,e){this.keyDType=t,this.valueDType=e,this.handle=HW(0),this.tensorMap=new Map,kG(this.handle)}clearAndClose(){this.tensorMap.forEach((t=>t.dispose())),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return HW(this.size(),"int32")}async import(t,e){this.checkKeyAndValueTensor(t,e);const n=await t.data();return this.tensorMap.forEach((t=>t.dispose())),this.tensorMap.clear(),OG((()=>{const t=HK(e),r=n.length,i=t.length;kj(r===i,(()=>"The number of elements doesn't match, keys has "+"".concat(r," elements, the values has ").concat(i," ")+"elements."));for(let e=0;e<r;e++){const r=n[e],i=t[e];kG(i),this.tensorMap.set(r,i)}return this.handle}))}async find(t,e){this.checkKeyAndValueTensor(t,e);const n=await t.data();return OG((()=>{const t=[];for(let r=0;r<n.length;r++){const i=n[r],o=this.findWithDefault(i,e);t.push(o)}return OK(t)}))}findWithDefault(t,e){const n=this.tensorMap.get(t);return null!=n?n:e}checkKeyAndValueTensor(t,e){if(t.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(t.dtype));if(e.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(e.dtype))}}function OQ(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:OG;const o=((t,e,n)=>{switch(t.category){case"arithmetic":return i((()=>function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(C$("a",t,e,n),C$("b",t,e,n))];case"AddN":return[r.addN(C$("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(C$("a",t,e,n),C$("b",t,e,n))];case"Mul":return[r.mul(C$("a",t,e,n),C$("b",t,e,n))];case"RealDiv":case"Div":return[r.div(C$("a",t,e,n),C$("b",t,e,n))];case"DivNoNan":return[r.divNoNan(C$("a",t,e,n),C$("b",t,e,n))];case"FloorDiv":return[r.floorDiv(C$("a",t,e,n),C$("b",t,e,n))];case"Sub":return[r.sub(C$("a",t,e,n),C$("b",t,e,n))];case"Minimum":return[r.minimum(C$("a",t,e,n),C$("b",t,e,n))];case"Maximum":return[r.maximum(C$("a",t,e,n),C$("b",t,e,n))];case"Pow":return[r.pow(C$("a",t,e,n),C$("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(C$("a",t,e,n),C$("b",t,e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)));case"basic_math":return i((()=>function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(C$("x",t,e,n))];case"Acos":return[r.acos(C$("x",t,e,n))];case"Acosh":return[r.acosh(C$("x",t,e,n))];case"Asin":return[r.asin(C$("x",t,e,n))];case"Asinh":return[r.asinh(C$("x",t,e,n))];case"Atan":return[r.atan(C$("x",t,e,n))];case"Atan2":return[r.atan2(C$("x",t,e,n),C$("y",t,e,n))];case"Atanh":return[r.atanh(C$("x",t,e,n))];case"Ceil":return[r.ceil(C$("x",t,e,n))];case"Complex":return[r.complex(C$("real",t,e,n),C$("imag",t,e,n))];case"Cos":return[r.cos(C$("x",t,e,n))];case"Cosh":return[r.cosh(C$("x",t,e,n))];case"Elu":return[r.elu(C$("x",t,e,n))];case"Erf":return[r.erf(C$("x",t,e,n))];case"Exp":return[r.exp(C$("x",t,e,n))];case"Expm1":return[r.expm1(C$("x",t,e,n))];case"Floor":return[r.floor(C$("x",t,e,n))];case"Log":return[r.log(C$("x",t,e,n))];case"Log1p":return[r.log1p(C$("x",t,e,n))];case"Imag":return[r.imag(C$("x",t,e,n))];case"Neg":return[r.neg(C$("x",t,e,n))];case"Reciprocal":return[r.reciprocal(C$("x",t,e,n))];case"Real":return[r.real(C$("x",t,e,n))];case"Relu":return[r.relu(C$("x",t,e,n))];case"Round":return[r.round(C$("x",t,e,n))];case"Selu":return[r.selu(C$("x",t,e,n))];case"Sigmoid":return[r.sigmoid(C$("x",t,e,n))];case"Sin":return[r.sin(C$("x",t,e,n))];case"Sign":return[r.sign(C$("x",t,e,n))];case"Sinh":return[r.sinh(C$("x",t,e,n))];case"Softplus":return[r.softplus(C$("x",t,e,n))];case"Sqrt":return[r.sqrt(C$("x",t,e,n))];case"Square":return[r.square(C$("x",t,e,n))];case"Tanh":return[r.tanh(C$("x",t,e,n))];case"Tan":return[r.tan(C$("x",t,e,n))];case"ClipByValue":return[r.clipByValue(C$("x",t,e,n),C$("clipValueMin",t,e,n),C$("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(C$("x",t,e,n))];case"Rsqrt":return[r.rsqrt(k$(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(C$("x",t,e,n),C$("alpha",t,e,n))];case"Prelu":return[r.prelu(C$("x",t,e,n),C$("alpha",t,e,n))];case"IsNan":return[r.isNaN(k$(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(k$(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(k$(t.inputNames[0],e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)));case"control":return TQ(t,e,n);case"convolution":return i((()=>function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;switch(t.op){case"Conv1D":{const i=C$("stride",t,e,n),o=C$("pad",t,e,n),a=C$("dataFormat",t,e,n).toUpperCase(),s=C$("dilation",t,e,n);return[r.conv1d(C$("x",t,e,n),C$("filter",t,e,n),i,o,a,s)]}case"Conv2D":{const i=C$("strides",t,e,n),o=D$(t,e,n),a=C$("dataFormat",t,e,n).toUpperCase(),s=C$("dilations",t,e,n);return[r.conv2d(C$("x",t,e,n),C$("filter",t,e,n),[i[1],i[2]],o,a,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:i,pad:o,dataFormat:a,dilations:s,biasArg:c,preluArg:l,activationFunc:u,leakyreluAlpha:h}=EQ(t,e,n);return[r.fused.conv2d({x:C$("x",t,e,n),filter:C$("filter",t,e,n),strides:[i[1],i[2]],pad:o,dataFormat:a,dilations:[s[1],s[2]],bias:c,activation:u,preluActivationWeights:l,leakyreluAlpha:h})]}case"FusedDepthwiseConv2dNative":{const{stride:i,pad:o,dataFormat:a,dilations:s,biasArg:c,preluArg:l,activationFunc:u,leakyreluAlpha:h}=EQ(t,e,n);return[r.fused.depthwiseConv2d({x:C$("x",t,e,n),filter:C$("filter",t,e,n),strides:[i[1],i[2]],pad:o,dataFormat:a,dilations:[s[1],s[2]],bias:c,activation:u,preluActivationWeights:l,leakyreluAlpha:h})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const i=C$("outputShape",t,e,n),o=C$("strides",t,e,n),a=D$(t,e,n);return[r.conv2dTranspose(C$("x",t,e,n),C$("filter",t,e,n),i,[o[1],o[2]],a)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const i=C$("strides",t,e,n),o=D$(t,e,n),a=C$("dilations",t,e,n),s=C$("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(C$("input",t,e,n),C$("filter",t,e,n),[i[1],i[2]],o,s,[a[1],a[2]])]}case"Conv3D":{const i=C$("strides",t,e,n),o=C$("pad",t,e,n),a=C$("dataFormat",t,e,n).toUpperCase(),s=C$("dilations",t,e,n);return[r.conv3d(C$("x",t,e,n),C$("filter",t,e,n),[i[1],i[2],i[3]],o,a,[s[1],s[2],s[3]])]}case"AvgPool":{const i=C$("strides",t,e,n),o=C$("pad",t,e,n),a=C$("kernelSize",t,e,n);return[r.avgPool(C$("x",t,e,n),[a[1],a[2]],[i[1],i[2]],o)]}case"MaxPool":{const i=C$("strides",t,e,n),o=C$("pad",t,e,n),a=C$("kernelSize",t,e,n);return[r.maxPool(C$("x",t,e,n),[a[1],a[2]],[i[1],i[2]],o)]}case"MaxPoolWithArgmax":{const i=C$("strides",t,e,n),o=C$("pad",t,e,n),a=C$("kernelSize",t,e,n),s=C$("includeBatchInIndex",t,e,n),{result:c,indexes:l}=r.maxPoolWithArgmax(C$("x",t,e,n),[a[1],a[2]],[i[1],i[2]],o,s);return[c,l]}case"AvgPool3D":{const i=C$("strides",t,e,n),o=C$("pad",t,e,n),a=C$("kernelSize",t,e,n);return[r.avgPool3d(C$("x",t,e,n),[a[1],a[2],a[3]],[i[1],i[2],i[3]],o)]}case"MaxPool3D":{const i=C$("strides",t,e,n),o=C$("pad",t,e,n),a=C$("kernelSize",t,e,n);return[r.maxPool3d(C$("x",t,e,n),[a[1],a[2],a[3]],[i[1],i[2],i[3]],o)]}case"Dilation2D":{const i=C$("strides",t,e,n),o=C$("pad",t,e,n),a=C$("dilations",t,e,n),s=i[1],c=i[2],l=a[1],u=a[2];return[r.dilation2d(C$("x",t,e,n),C$("filter",t,e,n),[s,c],o,[l,u],"NHWC")]}default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)));case"creation":return i((()=>function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;switch(t.op){case"Fill":{const i=C$("shape",t,e,n),o=C$("dtype",t,e,n),a=C$("value",t,e,n);return[r.fill(i,a,o)]}case"LinSpace":{const i=C$("start",t,e,n),o=C$("stop",t,e,n),a=C$("num",t,e,n);return[r.linspace(i,o,a)]}case"Multinomial":{const i=C$("logits",t,e,n),o=C$("numSamples",t,e,n),a=C$("seed",t,e,n);return[r.multinomial(i,o,a)]}case"OneHot":{const i=C$("indices",t,e,n),o=C$("depth",t,e,n),a=C$("onValue",t,e,n),s=C$("offValue",t,e,n),c=C$("dtype",t,e,n);return[r.oneHot(i,o,a,s,c)]}case"Ones":return[r.ones(C$("shape",t,e,n),C$("dtype",t,e,n))];case"OnesLike":return[r.onesLike(C$("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(C$("shape",t,e,n),C$("dtype",t,e,n),C$("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(C$("shape",t,e,n),C$("minval",t,e,n),C$("maxval",t,e,n),C$("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(C$("shape",t,e,n),C$("minval",t,e,n),C$("maxval",t,e,n),C$("seed",t,e,n))];case"Range":{const i=C$("start",t,e,n),o=C$("stop",t,e,n),a=C$("step",t,e,n);return[r.range(i,o,a,C$("dtype",t,e,n))]}case"TruncatedNormal":{const i=C$("shape",t,e,n),o=C$("mean",t,e,n),a=C$("stdDev",t,e,n),s=C$("seed",t,e,n);return[r.truncatedNormal(i,o,a,C$("dtype",t,e,n),s)]}case"Zeros":return[r.zeros(C$("shape",t,e,n),C$("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(C$("x",t,e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)));case"dynamic":return async function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:A;switch(t.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:o,maxOutputSize:a,iouThreshold:s,scoreThreshold:c,softNmsSigma:l}=AQ(t,e,n),u=await i.image.nonMaxSuppressionWithScoreAsync(r,o,a,s,c,l);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:o,maxOutputSize:a,iouThreshold:s,scoreThreshold:c}=AQ(t,e,n),l=C$("padToMaxOutputSize",t,e,n),u=await i.image.nonMaxSuppressionPaddedAsync(r,o,a,s,c,l);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:o,maxOutputSize:a,iouThreshold:s,scoreThreshold:c}=AQ(t,e,n);return[await i.image.nonMaxSuppressionAsync(r,o,a,s,c)]}case"Where":{const r=i.cast(C$("condition",t,e,n),"bool"),o=[await i.whereAsync(r)];return r.dispose(),o}case"ListDiff":return i.setdiff1dAsync(C$("x",t,e,n),C$("y",t,e,n));default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n);case"evaluation":return i((()=>function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;switch(t.op){case"LowerBound":{const i=C$("sortedSequence",t,e,n),o=C$("values",t,e,n);return[r.lowerBound(i,o)]}case"TopKV2":{const i=C$("x",t,e,n),o=C$("k",t,e,n),a=C$("sorted",t,e,n),s=r.topk(i,o,a);return[s.values,s.indices]}case"UpperBound":{const i=C$("sortedSequence",t,e,n),o=C$("values",t,e,n);return[r.upperBound(i,o)]}case"Unique":{const i=C$("x",t,e,n),o=r.unique(i);return[o.values,o.indices]}case"UniqueV2":{const i=C$("x",t,e,n),o=C$("axis",t,e,n),a=r.unique(i,o);return[a.values,a.indices]}default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)));case"image":return i((()=>function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;switch(t.op){case"ResizeBilinear":{const i=C$("images",t,e,n),o=C$("size",t,e,n),a=C$("alignCorners",t,e,n),s=C$("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(i,[o[0],o[1]],a,s)]}case"ResizeNearestNeighbor":{const i=C$("images",t,e,n),o=C$("size",t,e,n),a=C$("alignCorners",t,e,n),s=C$("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(i,[o[0],o[1]],a,s)]}case"CropAndResize":{const i=C$("image",t,e,n),o=C$("boxes",t,e,n),a=C$("boxInd",t,e,n),s=C$("cropSize",t,e,n),c=C$("method",t,e,n),l=C$("extrapolationValue",t,e,n);return[r.image.cropAndResize(i,o,a,s,c,l)]}case"ImageProjectiveTransformV3":{const i=C$("images",t,e,n),o=C$("transforms",t,e,n),a=C$("outputShape",t,e,n),s=C$("fillValue",t,e,n),c=C$("interpolation",t,e,n),l=C$("fillMode",t,e,n);return[r.image.transform(i,o,c.toLowerCase(),l.toLowerCase(),s,a)]}default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)));case"graph":return i((()=>function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const i=C$("default",t,e,n);return[k$(t.name,e,n)||i];case"Placeholder":return[k$(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[L$(C$("x",t,e,n))];case"IdentityN":return C$("x",t,e,n).map((t=>L$(t)));case"Shape":return[r.tensor1d(C$("x",t,e,n).shape,"int32")];case"ShapeN":return C$("x",t,e,n).map((t=>r.tensor1d(t.shape)));case"Size":return[r.scalar(C$("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(C$("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=C$("x",t,e,n),a=C$("data",t,e,n),s=C$("message",t,e,n),c=C$("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(let t=0;t<a.length;t++)console.log(Array.prototype.slice.call(a[t].dataSync()).slice(0,c));return[o];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)));case"logical":return i((()=>function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;switch(t.op){case"Equal":return[r.equal(C$("a",t,e,n),C$("b",t,e,n))];case"NotEqual":return[r.notEqual(C$("a",t,e,n),C$("b",t,e,n))];case"Greater":return[r.greater(C$("a",t,e,n),C$("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(C$("a",t,e,n),C$("b",t,e,n))];case"Less":return[r.less(C$("a",t,e,n),C$("b",t,e,n))];case"LessEqual":return[r.lessEqual(C$("a",t,e,n),C$("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(C$("a",t,e,n),C$("b",t,e,n))];case"LogicalNot":return[r.logicalNot(C$("a",t,e,n))];case"LogicalOr":return[r.logicalOr(C$("a",t,e,n),C$("b",t,e,n))];case"Select":case"SelectV2":return[r.where(C$("condition",t,e,n),C$("a",t,e,n),C$("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(C$("a",t,e,n),C$("b",t,e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)));case"matrices":return i((()=>function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(C$("a",t,e,n),C$("b",t,e,n),C$("transposeA",t,e,n),C$("transposeB",t,e,n))];case"Einsum":return[r.einsum(C$("equation",t,e,n),...C$("tensors",t,e,n))];case"Transpose":return[r.transpose(C$("x",t,e,n),C$("perm",t,e,n))];case"_FusedMatMul":const[i,o]=C$("fusedOps",t,e,n),a="biasadd"===i,s="prelu"===o,c=C$("numArgs",t,e,n),l=C$("leakyreluAlpha",t,e,n);if(a){if(s&&2!==c)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==c)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,h]=C$("args",t,e,n);return[r.fused.matMul({a:C$("a",t,e,n),b:C$("b",t,e,n),transposeA:C$("transposeA",t,e,n),transposeB:C$("transposeB",t,e,n),bias:u,activation:o,preluActivationWeights:h,leakyreluAlpha:l})];case"MatrixBandPart":return[r.linalg.bandPart(C$("a",t,e,n),C$("numLower",t,e,n),C$("numUpper",t,e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)));case"normalization":return i((()=>function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(C$("x",t,e,n),C$("axis",t,e,n),C$("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(C$("x",t,e,n),C$("mean",t,e,n),C$("variance",t,e,n),C$("offset",t,e,n),C$("scale",t,e,n),C$("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(C$("x",t,e,n),C$("radius",t,e,n),C$("bias",t,e,n),C$("alpha",t,e,n),C$("beta",t,e,n))];case"Softmax":return[r.softmax(C$("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(C$("x",t,e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)));case"ragged":return i((()=>function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;switch(t.op){case"RaggedGather":{const{outputNestedSplits:i,outputDenseValues:o}=r.raggedGather(C$("paramsNestedSplits",t,e,n),C$("paramsDenseValues",t,e,n),C$("indices",t,e,n),C$("outputRaggedRank",t,e,n));return i.concat(o)}case"RaggedRange":{const{rtNestedSplits:i,rtDenseValues:o}=r.raggedRange(C$("starts",t,e,n),C$("limits",t,e,n),C$("splits",t,e,n));return[i,o]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(C$("shape",t,e,n),C$("values",t,e,n),C$("defaultValue",t,e,n),C$("rowPartitionTensors",t,e,n),C$("rowPartitionTypes",t,e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)));case"reduction":return i((()=>function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;switch(t.op){case"Max":{const i=C$("axis",t,e,n),o=C$("keepDims",t,e,n);return[r.max(C$("x",t,e,n),i,o)]}case"Mean":{const i=C$("axis",t,e,n),o=C$("keepDims",t,e,n);return[r.mean(C$("x",t,e,n),i,o)]}case"Min":{const i=C$("axis",t,e,n),o=C$("keepDims",t,e,n);return[r.min(C$("x",t,e,n),i,o)]}case"Sum":{const i=C$("axis",t,e,n),o=C$("keepDims",t,e,n);return[r.sum(C$("x",t,e,n),i,o)]}case"All":{const i=C$("axis",t,e,n),o=C$("keepDims",t,e,n);return[r.all(C$("x",t,e,n),i,o)]}case"Any":{const i=C$("axis",t,e,n),o=C$("keepDims",t,e,n);return[r.any(C$("x",t,e,n),i,o)]}case"ArgMax":{const i=C$("axis",t,e,n);return[r.argMax(C$("x",t,e,n),i)]}case"ArgMin":{const i=C$("axis",t,e,n);return[r.argMin(C$("x",t,e,n),i)]}case"Prod":{const i=C$("axis",t,e,n),o=C$("keepDims",t,e,n);return[r.prod(C$("x",t,e,n),i,o)]}case"Cumprod":{const i=C$("axis",t,e,n),o=C$("exclusive",t,e,n),a=C$("reverse",t,e,n);return[r.cumprod(C$("x",t,e,n),i,o,a)]}case"Cumsum":{const i=C$("axis",t,e,n),o=C$("exclusive",t,e,n),a=C$("reverse",t,e,n);return[r.cumsum(C$("x",t,e,n),i,o,a)]}case"Bincount":const i=C$("x",t,e,n),o=C$("weights",t,e,n),a=C$("size",t,e,n);return[r.bincount(i,o,a)];case"DenseBincount":{const i=C$("x",t,e,n),o=C$("weights",t,e,n),a=C$("size",t,e,n),s=C$("binaryOutput",t,e,n);return[r.denseBincount(i,o,a,s)]}default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)));case"slice_join":return i((()=>function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;switch(t.op){case"ConcatV2":case"Concat":{const i=C$("n",t,e,n),o=C$("axis",t,e,n);let a=C$("tensors",t,e,n);return a=a.slice(0,i),[r.concat(a,o)]}case"Gather":{const i=C$("x",t,e,n),o=C$("indices",t,e,n);return[r.gather(i,r.cast(o,"int32"),0)]}case"GatherV2":{const i=C$("axis",t,e,n),o=C$("batchDims",t,e,n),a=C$("x",t,e,n),s=C$("indices",t,e,n);return[r.gather(a,r.cast(s,"int32"),i,o)]}case"Reverse":{const i=C$("dims",t,e,n),o=[];for(let t=0;t<i.length;t++)i[t]&&o.push(t);const a=C$("x",t,e,n);return[r.reverse(a,o)]}case"ReverseV2":{const i=C$("axis",t,e,n),o=C$("x",t,e,n);return[r.reverse(o,i)]}case"Slice":{const i=C$("begin",t,e,n),o=C$("size",t,e,n);return[r.slice(C$("x",t,e,n),i,o)]}case"StridedSlice":{const i=C$("begin",t,e,n),o=C$("end",t,e,n),a=C$("strides",t,e,n),s=C$("beginMask",t,e,n),c=C$("endMask",t,e,n),l=C$("ellipsisMask",t,e,n),u=C$("newAxisMask",t,e,n),h=C$("shrinkAxisMask",t,e,n),d=C$("x",t,e,n);return[r.stridedSlice(d,i,o,a,s,c,l,u,h)]}case"Pack":return OG((()=>{const i=C$("axis",t,e,n),o=C$("tensors",t,e,n),a=o[0].shape,s=r.squeeze(o[0]).shape,c=o.map((t=>{const e=Rj(t.shape,a);if(!e&&!Rj(r.squeeze(t).shape,s))throw new Error("the input tensors shape does not match");return e?t:r.reshape(t,a)}));return[r.stack(c,i)]}));case"Unpack":{const i=C$("axis",t,e,n),o=C$("tensor",t,e,n);return r.unstack(o,i)}case"Tile":{const i=C$("reps",t,e,n);return[r.tile(C$("x",t,e,n),i)]}case"Split":case"SplitV":{const i=C$("axis",t,e,n),o=C$("numOrSizeSplits",t,e,n),a=C$("x",t,e,n);return r.split(a,o,i)}case"ScatterNd":{const i=C$("indices",t,e,n),o=C$("values",t,e,n),a=C$("shape",t,e,n);return[r.scatterND(i,o,a)]}case"GatherNd":{const i=C$("x",t,e,n),o=C$("indices",t,e,n);return[r.gatherND(i,o)]}case"SparseToDense":{const i=C$("sparseIndices",t,e,n),o=C$("outputShape",t,e,n),a=C$("sparseValues",t,e,n),s=C$("defaultValue",t,e,n);return[r.sparseToDense(i,a,o,a.dtype===s.dtype?s:r.cast(s,a.dtype))]}case"TensorScatterUpdate":{const i=C$("indices",t,e,n),o=C$("values",t,e,n),a=C$("tensor",t,e,n);return[r.tensorScatterUpdate(a,i,o)]}default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)));case"sparse":return i((()=>function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:i,outputValues:o,emptyRowIndicator:a,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows(C$("indices",t,e,n),C$("values",t,e,n),C$("denseShape",t,e,n),C$("defaultValue",t,e,n));return[i,o,a,s]}case"SparseReshape":{const{outputIndices:i,outputShape:o}=r.sparse.sparseReshape(C$("inputIndices",t,e,n),C$("inputShape",t,e,n),C$("newShape",t,e,n));return[i,o]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(C$("data",t,e,n),C$("indices",t,e,n),C$("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(C$("data",t,e,n),C$("indices",t,e,n),C$("segmentIds",t,e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)));case"spectral":return i((()=>function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;switch(t.op){case"FFT":return[r.fft(C$("x",t,e,n))];case"IFFT":return[r.ifft(C$("x",t,e,n))];case"RFFT":return[r.rfft(C$("x",t,e,n))];case"IRFFT":return[r.irfft(C$("x",t,e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)));case"string":return i((()=>function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(C$("input",t,e,n),C$("pattern",t,e,n),C$("rewrite",t,e,n),C$("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:i,nGramsSplits:o}=r.string.stringNGrams(C$("data",t,e,n),C$("dataSplits",t,e,n),C$("separator",t,e,n),C$("nGramWidths",t,e,n),C$("leftPad",t,e,n),C$("rightPad",t,e,n),C$("padWidth",t,e,n),C$("preserveShortSequences",t,e,n));return[i,o]}case"StringSplit":{const{indices:i,values:o,shape:a}=r.string.stringSplit(C$("input",t,e,n),C$("delimiter",t,e,n),C$("skipEmpty",t,e,n));return[i,o,a]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(C$("input",t,e,n),C$("numBuckets",t,e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)));case"transformation":return i((()=>function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;switch(t.op){case"Cast":return[r.cast(C$("x",t,e,n),C$("dtype",t,e,n))];case"ExpandDims":{const i=C$("axis",t,e,n);return[r.expandDims(C$("x",t,e,n),i)]}case"Squeeze":{const i=C$("axis",t,e,n);return[r.squeeze(C$("x",t,e,n),i)]}case"Reshape":return[r.reshape(C$("x",t,e,n),C$("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(C$("x",t,e,n),C$("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(C$("x",t,e,n),C$("padding",t,e,n),C$("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(C$("x",t,e,n),C$("padding",t,e,n),C$("constantValue",t,e,n))];case"SpaceToBatchND":{const i=C$("blockShape",t,e,n),o=C$("paddings",t,e,n);return[r.spaceToBatchND(C$("x",t,e,n),i,o)]}case"BatchToSpaceND":{const i=C$("blockShape",t,e,n),o=C$("crops",t,e,n);return[r.batchToSpaceND(C$("x",t,e,n),i,o)]}case"DepthToSpace":{const i=C$("blockSize",t,e,n),o=C$("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(C$("x",t,e,n),i,o)]}case"BroadcastTo":return[r.broadcastTo(C$("x",t,e,n),C$("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(C$("s0",t,e,n),C$("s1",t,e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)));case"hash_table":return(async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const i=r.getHashTableHandleByName(t.name);if(null!=i)return[i];{const i=C$("keyDType",t,e,n),o=C$("valueDType",t,e,n),a=new MQ(i,o);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const i=C$("tableHandle",t,e,n,r),o=C$("keys",t,e,n),a=C$("values",t,e,n),s=r.getHashTableById(i.id);return[await s.import(o,a)]}case"LookupTableFind":case"LookupTableFindV2":{const i=C$("tableHandle",t,e,n,r),o=C$("keys",t,e,n),a=C$("defaultValue",t,e,n),s=r.getHashTableById(i.id);return[await s.find(o,a)]}case"LookupTableSize":case"LookupTableSizeV2":{const i=C$("tableHandle",t,e,n,r);return[r.getHashTableById(i.id).tensorSize()]}default:throw TypeError("Node type ".concat(t.op," is not implemented"))}})(t,e,n,r);case"custom":const o=O$(t.op);if(o&&o.customExecutor)return o.customExecutor(new yQ(t,e,n));throw TypeError("Custom op ".concat(t.op," is not registered."));default:throw TypeError("Unknown op '".concat(t.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}})(t,e,n);return rU(o)?o.then((t=>[].concat(t))):[].concat(o)}class CQ{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0;this.weightMap=t,this.tensorArrayMap=e,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,e){return{id:t,frameName:e,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let e=0;e<this.contexts.length-1;e++){const n=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(n))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map((t=>0===t.id&&0===t.iterationId?"":"".concat(t.frameName,"-").concat(t.iterationId))).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(const e in this.tensorArrayMap)this.tensorArrayMap[e].clearAndClose(t);for(const e in this.tensorListMap)this.tensorListMap[e].clearAndClose(t)}}function kQ(t,e,n,r){const i=new Set,o=[];let a=null,s=null;const c=new Set,l=new Set(Object.keys(t).map((t=>R$(t)[0])));r=r||[];const u=new Set(r.map((t=>R$(t.name)[0]))),h=[...e];for(;h.length>0;){const t=h.pop();(LQ(t)||FQ(t)||jQ(t))&&null==a&&(a=t,s=a.children.map((t=>t.name)).filter((t=>i.has(t)))),i.add(t.name),null==n[t.name]&&(l.has(t.name)||u.has(t.name)||(0!==t.inputs.length?t.inputs.forEach((t=>{c.has(t.name)||(c.add(t.name),h.push(t))})):o.push(t.name)))}return{inputs:t,outputs:e,usedNodes:i,missingInputs:o,dynamicNode:a,syncInputs:s}}function PQ(t,e){const{usedNodes:n,inputs:r}=e,i=Object.keys(r).map((t=>R$(t)[0])).map((e=>t.nodes[e])),o=t.initNodes||[],a=t=>n.has("string"===typeof t?t:t.name);function s(t){return[...new Map(t.map((t=>[t.name,t]))).values()]}const c=s([...i,...t.weights,...o]).filter(a),l=s([...c,...Object.values(t.nodes)]).filter(a),u=new Map(l.map((t=>[t.name,t]))),h={};for(const m of l){h[m.name]=h[m.name]||0;for(const t of m.children)a(t)||(h[t.name]=Number.POSITIVE_INFINITY),h[t.name]=(h[t.name]||0)+1}const d=Object.entries(h).filter((t=>{let[,e]=t;return 0===e})).map((t=>{let[e]=t;return e})),p=[...d];for(;d.length>0;){const t=d.pop(),e=u.get(t);for(const n of e.children.filter(a))0===--h[n.name]&&(p.push(n.name),d.push(n.name))}const f=function(t,e){const n=new Map(t.map((t=>[t.name,t]))),r=e.map((t=>t.name)),i=new Set(r);for(;r.length>0;){const t=r.pop(),e=n.get(t);for(const o of e.children)n.has(o.name)&&!i.has(o.name)&&(i.add(o.name),r.push(o.name))}const o=t.filter((t=>i.has(t.name)));return o}(p.map((t=>u.get(t))),c);return function(t,e){const n=new Map(t.map(((t,e)=>[t.name,e]))),r=new Set(e.map((t=>t.name))),i=t=>r.has("string"===typeof t?t:t.name),o=new Set(t.map((t=>t.name))),a=t=>o.has("string"===typeof t?t:t.name);for(const s of t){for(const t of s.children.filter(a)){if(!n.has(t.name))throw new IQ("Child ".concat(t.name," of node ").concat(s.name," is unreachable."));if(n.get(s.name)>n.get(t.name))throw new IQ("Node ".concat(s.name," is scheduled to run after its child ").concat(t.name,"."))}if(!i(s))for(const t of s.inputs){if(!n.has(t.name))throw new IQ("Input ".concat(t.name," of node ").concat(s.name," is unreachable."));if(n.get(t.name)>n.get(s.name))throw new IQ("Node ".concat(s.name," is scheduled to run before its input ").concat(t.name,"."))}}}(f,c),f}class IQ extends Error{constructor(t){super("NodesExecutionOrderError: ".concat(t))}}const NQ=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),RQ=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),DQ=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function LQ(t){return NQ.has(t.op)}function FQ(t){return RQ.has(t.op)}function jQ(t){return DQ.has(t.op)}class UQ{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){const e=Object.keys(t).map((e=>t[e].map((t=>t.id))));this._weightIds=[].concat(...e),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map((t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0})))}get outputs(){return this._outputs.map((t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0})))}get inputNodes(){return this._inputs.map((t=>t.signatureKey||t.name))}get outputNodes(){return this._outputs.map((t=>{const e=t.signatureKey||t.name;return t.defaultOutput?"".concat(e,":").concat(t.defaultOutput):e}))}get functions(){return Object.keys(this._functions).reduce(((t,e)=>(t[e]=this._functions[e].signature,t)),{})}constructor(t,e){this.graph=t,this.parent=e,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((e=>{this._functionExecutorMap[e]=new UQ(t.functions[e],this)}))}getCompilationKey(t,e){const n=t.map((t=>t.name)).sort(),r=e.map((t=>t.name)).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(t,e){const n=kQ(t,e,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:i,syncInputs:o}=n;if(null!=i)throw new Error("This execution contains the node '".concat(i.name,"', which has ")+"the dynamic op '".concat(i.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(o,"]"));if(r.length>0){const n=e.map((t=>t.name)),i=Object.keys(t);throw new Error("Cannot compute the outputs [".concat(n,"] from the provided inputs ")+"[".concat(i,"]. Missing the following inputs: [").concat(r,"]"))}const a=PQ(this.graph,n),s=function(t){const e=new Map(t.map(((t,e)=>[t.name,e]))),n=Number.MAX_SAFE_INTEGER,r=t.map(((t,e)=>LQ(t)?n:e)),i=t=>{const n=r[e.get(t.name)];return null==n?-1:n},o=t.map(((t,e)=>t.children.map(i).reduce(((t,e)=>Math.max(t,e)),r[e]))),a=new Map;for(let s=0;s<t.length;++s){const e=o[s];if(e===n)continue;const r=t[s],i=t[e];a.has(i.name)||a.set(i.name,[]),a.get(i.name).push(r)}return a}(a);return{orderedNodes:a,nodeLiveUntilMap:s}}cloneAndKeepTensor(t){if(null==t)return null;const e=t.clone();return kG(e),e}cloneTensorList(t){if(!t)return null;const e=t.map((t=>this.cloneAndKeepTensor(t)));return e}cloneTensorMap(t){return Object.fromEntries(Object.entries(t).map((t=>{let[e,n]=t;return[e,this.cloneTensorList(n)]})))}execute(t,e){this.disposeIntermediateTensors(),t=this.mapInputs(t);const n=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e);const r=n.map((t=>this.graph.nodes[R$(t)[0]])),i=e.map((t=>R$(t)[0])),o=new Set(i);let a=i.map((t=>this.graph.nodes[t]));0===a.length&&(a=this._outputs);const s=this.getCompilationKey(r,a);let c=this.compiledMap.get(s);null==c&&(c=this.compile(t,a),this.compiledMap.set(s,c));try{this.keepIntermediateTensors=sU().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(sCt){this.keepIntermediateTensors=!1,console.warn(sCt.message)}const l={},u={};return OG((()=>{const n=new CQ(this.weightMap,l,u,this.functionExecutorMap,this.parseNodeNameCache),r=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(t).forEach((e=>{const[i,o]=R$(e,n),a=[];a[o]=t[e],r[i]=a,this.keepIntermediateTensors&&(this.clonedTensorsMap[i]=this.cloneTensorList(a))}));const i=this.getFrozenTensorIds(r),{orderedNodes:a,nodeLiveUntilMap:s}=c;for(const t of a){if(r[t.name])continue;const e=OQ(t,r,n,this._resourceManager);if(rU(e))throw new Error("The execution of the op '".concat(t.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");r[t.name]=e,this.keepIntermediateTensors&&(this.clonedTensorsMap[t.name]=this.cloneTensorList(e)),this.checkTensorForDisposalWithNodeLiveUntilInfo(t,r,n,i,o,s.get(t.name))}return null==this.parent&&n.dispose(i),e.map((t=>k$(t,r,n)))}))}getFrozenTensorIds(t){const e=[].concat.apply([],Object.keys(t).map((e=>t[e])).map((t=>t.map((t=>t.id)))));return new Set(e)}checkTensorForDisposal(t,e,n,r,i,o,a){if(!LQ(e)&&!o.has(t)){for(const r of n[t])null!=r&&(a[r.id]=(a[r.id]||0)+e.children.length);for(const t of e.inputs){if(LQ(t))continue;const e=P$(t.name,n,r);if(null!=e)for(const t of e){if(!t||t.kept||i.has(t.id))continue;const e=a[t.id];1===e?(t.dispose(),delete a[t.id]):null!=e&&a[t.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(t,e,n,r,i,o){function a(t){return LQ(t)||i.has(t.name)}if(!LQ(t)&&null!=o)for(const s of o){if(a(s))continue;const t=P$(s.name,e,n);for(const e of t)!e||e.kept||r.has(e.id)||e.dispose()}}async executeAsync(t,e){return this._executeAsync(t,e)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach((t=>{for(const e of t)e&&!e.isDisposed&&e.dispose()})),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.disposeIntermediateTensors(),n||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e));try{this.keepIntermediateTensors=sU().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(sCt){this.keepIntermediateTensors=!1,console.warn(sCt.message)}const o=new CQ(this.weightMap,r,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const a=await this.executeWithControlFlow(t,o,e,n),s=e.map((t=>k$(t,a,o))),c=s.map((t=>t.id)),l=Object.keys(t).map((e=>t[e].id)),u=new Set([...c,...l,...this.weightIds]);return Object.values(a).forEach((t=>{t.forEach((t=>{!t||t.isDisposed||u.has(t.id)||t.dispose()}))})),null==this.parent&&o.dispose(u),s}async executeFunctionAsync(t,e,n){const r=t.reduce(((t,e,n)=>(t[this.inputs[n].name]=e,t)),{});return this._executeAsync(r,this.outputNodes,!0,e,n)}async executeWithControlFlow(t,e,n,r){const i=Object.keys(t),o=i.map((t=>this.graph.nodes[R$(t)[0]])),a=n.map((t=>R$(t)[0])),s=new Set(a);let c=a.map((t=>this.graph.nodes[t]));0===c.length&&(c=this._outputs);const{usedNodes:l,missingInputs:u,dynamicNode:h,syncInputs:d}=kQ(t,c,this.weightMap,this._initNodes),p=[...o,...this.graph.weights,...this._initNodes||[]].map((t=>({node:t,contexts:e.currentContext}))),f=Object.assign({},this.weightMap);Object.keys(t).forEach((e=>{const[n,r]=R$(e),i=[];i[r]=t[e],f[n]=i}));const m={},g=this.getFrozenTensorIds(f),y={};for(;p.length>0;){const t=this.processStack(o,p,e,f,y,g,s,m,l);await Promise.all(t)}null!=h||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const v=c.filter((t=>!LQ(t)&&!k$(t.name,f,e))).map((t=>t.name));if(v.length>0){let t="";throw null!=h&&(t="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(d,"]")),new Error("Cannot compute the outputs [".concat(v,"] from the provided ")+"inputs [".concat(i,"]. Consider providing the following inputs: ")+"[".concat(u,"]. ").concat(t))}return f}processStack(t,e,n,r,i,o,a,s,c){const l=[];for(;e.length>0;){const t=e.pop();n.currentContext=t.contexts;let u="";if("Enter"===t.node.op&&C$("isConstant",t.node,r,n)&&([u]=I$(t.node.name,n)),null==r[t.node.name]){const h=OQ(t.node,r,n,this._resourceManager);u||([u]=I$(t.node.name,n));const d=n.currentContext;rU(h)?l.push(h.then((l=>(r[u]=l,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(l)),n.currentContext=d,this.checkTensorForDisposal(u,t.node,r,n,o,a,s),this.processChildNodes(t.node,e,n,r,i,c),l)))):(r[u]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(h)),this.checkTensorForDisposal(u,t.node,r,n,o,a,s),this.processChildNodes(t.node,e,n,r,i,c))}else this.processChildNodes(t.node,e,n,r,i,c)}return l}processChildNodes(t,e,n,r,i,o){t.children.forEach((t=>{const[a]=I$(t.name,n);!i[a]&&o.has(t.name)&&("Merge"===t.op?t.inputNames.some((t=>!!k$(t,r,n)))&&(i[a]=!0,e.push({contexts:n.currentContext,node:t})):t.inputNames.every((t=>!!k$(t,r,n)))&&(i[a]=!0,e.push({contexts:n.currentContext,node:t})))}))}dispose(){Object.keys(this.weightMap).forEach((t=>this.weightMap[t].forEach((t=>t.dispose()))))}checkInputShapeAndType(t){Object.keys(t).forEach((e=>{const n=t[e],[r]=R$(e),i=this.graph.nodes[r];if(i.attrParams.shape&&i.attrParams.shape.value){const t=i.attrParams.shape.value,e=t.length===n.shape.length&&n.shape.every(((e,n)=>-1===t[n]||t[n]===e));kj(e,(()=>"The shape of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be [".concat(t,"], but was ")+"[".concat(n.shape,"]")))}i.attrParams.dtype&&i.attrParams.dtype.value&&kj(n.dtype===i.attrParams.dtype.value,(()=>"The dtype of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(i.attrParams.dtype.value,", but was ").concat(n.dtype)))}))}mapInputs(t){var e,n;const r={};for(const i in t){const o=null===(n=null===(e=this._signature)||void 0===e?void 0:e.inputs)||void 0===n?void 0:n[i];null!=o?r[o.name]=t[i]:r[i]=t[i]}return r}checkInputs(t){const e=Object.keys(t).filter((t=>{const[e]=R$(t);return null==this.graph.nodes[e]}));if(e.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(e,"] that are not part of graph"))}mapOutputs(t){return t.map((t=>{var e,n;const r=null===(n=null===(e=this._signature)||void 0===e?void 0:e.outputs)||void 0===n?void 0:n[t];return null!=r?r.name:t}),{})}checkOutputs(t){t.forEach((t=>{const[e]=R$(t);if(!this.graph.nodes[e])throw new Error("The output '".concat(t,"' is not found in the graph"))}))}}class BQ{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.hashTableNameToHandle=t,this.hashTableMap=e}addHashTable(t,e){this.hashTableNameToHandle[t]=e.handle,this.hashTableMap[e.id]=e}getHashTableHandleByName(t){return this.hashTableNameToHandle[t]}getHashTableById(t){return this.hashTableMap[t]}dispose(){for(const t in this.hashTableMap)this.hashTableMap[t].clearAndClose(),delete this.hashTableMap[t];for(const t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}const zQ="?tfjs-format=file",VQ="model.json";class GQ{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;this.modelUrl=t,this.loadOptions=e,this.version="n/a",this.io=r,null==e&&(this.loadOptions={}),this.resourceManager=new BQ}findIOHandler(){const t=this.modelUrl;if(null!=t.load)this.handler=t;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(t,this.loadOptions);else{const e=this.io.getLoadHandlers(t,this.loadOptions);if(0===e.length)e.push(this.io.browserHTTPRequest(t,this.loadOptions));else if(e.length>1)throw new Error("Found more than one (".concat(e.length,") load handlers for ")+"URL '".concat([t],"'"));this.handler=e[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const t=this.handler.load();return rU(t)?t.then((t=>null==t.getWeightStream?this.loadSync(t):this.loadStreaming(t))):this.loadSync(t)}loadSync(t){const e=this.io.decodeWeights(t.weightData,t.weightSpecs);return this.loadWithWeightMap(t,e)}async loadStreaming(t){if(null==t.getWeightStream)throw new Error("Model artifacts missing streamWeights function");const e=await jG(t.getWeightStream(),t.weightSpecs);return this.loadWithWeightMap(t,e)}loadWithWeightMap(t,e){this.artifacts=t;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const t=this.artifacts.userDefinedMetadata;null!=t.signature&&(r=t.signature),null!=t.structuredOutputKeys&&(this.structuredOutputKeys=t.structuredOutputKeys)}if(this.signature=r,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer),this.executor=new UQ(nQ.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(e),this.executor.resourceManager=this.resourceManager,null!=t.modelInitializer&&null!=t.modelInitializer.node){const e=nQ.Instance.transformGraph(t.modelInitializer);this.initializer=new UQ(e),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=t.initializerSignature}return!0}async save(t,e){if("string"===typeof t){const e=this.io.getSaveHandlers(t);if(0===e.length)throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));if(e.length>1)throw new Error("Found more than one (".concat(e.length,") save handlers for ")+"URL '".concat(t,"'"));t=e[0]}if(null==t.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}addStructuredOutputNames(t){if(this.structuredOutputKeys){const e={};return(t instanceof GV?[t]:t).forEach(((t,n)=>e[this.structuredOutputKeys[n]]=t)),e}return t}predict(t,e){const n=this.execute(t,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(t,e){const n=await this.executeAsync(t,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(t){var e;if(!(t instanceof GV)&&!Array.isArray(t)){const n=null===(e=this.signature)||void 0===e?void 0:e.inputs;if(null!=n)for(const e in n){const r=n[e];null!=r.resourceId&&(t[e]=this.resourceIdToCapturedInput[r.resourceId])}return t}t=Array.isArray(t)?t:[t];const n=Object.keys(this.resourceIdToCapturedInput).length;if(t.length+n!==this.inputNodes.length)throw new Error("Input tensor count mismatch, the graph model has ".concat(this.inputNodes.length-n," non-resource placeholders, while there are ").concat(t.length," input tensors provided."));let r=0;return this.inputNodes.reduce(((e,n)=>{var i,o,a;const s=null===(a=null===(o=null===(i=this.signature)||void 0===i?void 0:i.inputs)||void 0===o?void 0:o[n])||void 0===a?void 0:a.resourceId;return e[n]=null!=s?this.resourceIdToCapturedInput[s]:t[r++],e}),{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}executeInitializerGraph(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(t){if(this.resourceIdToCapturedInput={},this.initializerSignature){const e=this.initializerSignature.outputs,n=Object.keys(e);for(let r=0;r<n.length;r++){const i=e[n[r]];this.resourceIdToCapturedInput[i.resourceId]=t[r]}}}execute(t,e){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),t=this.normalizeInputs(t),e=this.normalizeOutputs(e);const n=this.executor.execute(t,e);return n.length>1?n:n[0]}async executeAsync(t,e){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),t=this.normalizeInputs(t),e=this.normalizeOutputs(e);const n=await this.executor.executeAsync(t,e);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce(((e,n)=>(e[n]=[t[n]],e)),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&CG(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function WQ(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;if(null==t)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==e&&(e={}),e.fromTFHub&&"string"===typeof t&&(t=function(t){t.endsWith("/")||(t+="/");return"".concat(t).concat(VQ).concat(zQ)}(t));const i=new GQ(t,e,r);return await i.load(),i}var HQ=function(){return HQ=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},HQ.apply(this,arguments)};function qQ(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))}function XQ(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function YQ(t){var e=t.map((function(t){return t[0]}));return e.push(t[t.length-1][1]),e}var KQ={lips:YQ([[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]]),leftEye:YQ([[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]]),leftEyebrow:YQ([[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]]),leftIris:YQ([[474,475],[475,476],[476,477],[477,474]]),rightEye:YQ([[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]]),rightEyebrow:YQ([[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]]),rightIris:YQ([[469,470],[470,471],[471,472],[472,469]]),faceOval:YQ([[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]])},ZQ=[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]],JQ=Object.entries(KQ).map((function(t){var e=t[0];return t[1].map((function(t){return[t,e]}))})).flat(),$Q=new Map(JQ);function QQ(t){for(var e={locationData:{relativeKeypoints:[]}},n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,a=0;a<t.length;++a){var s=t[a];n=Math.min(n,s.x),r=Math.max(r,s.x),i=Math.min(i,s.y),o=Math.max(o,s.y),e.locationData.relativeKeypoints.push({x:s.x,y:s.y})}return e.locationData.relativeBoundingBox={xMin:n,yMin:i,xMax:r,yMax:o,width:r-n,height:o-i},e}var t0={runtime:"mediapipe",maxFaces:1,refineLandmarks:!1},e0=function(){function t(t){var e=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceMeshSolution=new Sj.FaceMesh({locateFile:function(e,n){return t.solutionPath?t.solutionPath.replace(/\/+$/,"")+"/"+e:n+"/"+e}}),this.faceMeshSolution.setOptions({refineLandmarks:t.refineLandmarks,selfieMode:this.selfieMode,maxNumFaces:t.maxFaces}),this.faceMeshSolution.onResults((function(t){if(e.height=t.image.height,e.width=t.image.width,e.faces=[],null!==t.multiFaceLandmarks)for(var n=t.multiFaceLandmarks,r=0;r<n.length;r++){var i=e.translateOutput(n[r]);e.faces.push({keypoints:i,box:QQ(i).locationData.relativeBoundingBox})}}))}return t.prototype.translateOutput=function(t){var e=this;return t.map((function(t,n){var r={x:t.x*e.width,y:t.y*e.height,z:t.z*e.width},i=$Q.get(n);return null!=i&&(r.name=i),r}))},t.prototype.estimateFaces=function(t,e){return qQ(this,void 0,void 0,(function(){var n,r;return XQ(this,(function(i){switch(i.label){case 0:return e&&e.flipHorizontal&&e.flipHorizontal!==this.selfieMode&&(this.selfieMode=e.flipHorizontal,this.faceMeshSolution.setOptions({selfieMode:this.selfieMode})),t instanceof GV?(r=ImageData.bind,[4,NH(t)]):[3,2];case 1:return n=new(r.apply(ImageData,[void 0,i.sent(),t.shape[1],t.shape[0]])),[3,3];case 2:n=t,i.label=3;case 3:return t=n,[4,this.faceMeshSolution.send({image:t})];case 4:return i.sent(),[2,this.faces]}}))}))},t.prototype.dispose=function(){this.faceMeshSolution.close()},t.prototype.reset=function(){this.faceMeshSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},t.prototype.initialize=function(){return this.faceMeshSolution.initialize()},t}();function n0(t){return qQ(this,void 0,void 0,(function(){var e,n;return XQ(this,(function(r){switch(r.label){case 0:return e=function(t){if(null==t)return HQ({},t0);var e=HQ({},t);return e.runtime="mediapipe",null==e.maxFaces&&(e.maxFaces=t0.maxFaces),null==e.refineLandmarks&&(e.refineLandmarks=t0.refineLandmarks),e}(t),[4,(n=new e0(e)).initialize()];case 1:return r.sent(),[2,n]}}))}))}var r0="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof __webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{},i0={};(function(){var t;function e(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t},r=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof r0&&r0];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function i(t,e){if(e)t:{var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];if(!(a in i))break t;i=i[a]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&n(i,t,{configurable:!0,writable:!0,value:e})}}function o(t){return(t={next:t})[Symbol.iterator]=function(){return this},t}function a(t){var n="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return n?n.call(t):{next:e(t)}}function s(t){if(!(t instanceof Array)){t=a(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}i("Symbol",(function(t){function e(t,e){this.g=t,n(this,"description",{configurable:!0,writable:!0,value:e})}if(t)return t;e.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function t(n){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new e(r+(n||"")+"_"+i++,n)}})),i("Symbol.iterator",(function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),a=0;a<i.length;a++){var s=r[i[a]];"function"==typeof s&&"function"!=typeof s.prototype[t]&&n(s.prototype,t,{configurable:!0,writable:!0,value:function(){return o(e(this))}})}return t}));var c,l="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var u;t:{var h={};try{h.__proto__={a:!0},u=h.a;break t}catch(t){}u=!1}c=u?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var d=c;function p(t,e){if(t.prototype=l(e.prototype),t.prototype.constructor=t,d)d(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(e,n);r&&Object.defineProperty(t,n,r)}else t[n]=e[n];t.na=e.prototype}function f(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function m(t){if(t.l)throw new TypeError("Generator is already running");t.l=!0}function g(t,e){t.j={da:e,ea:!0},t.g=t.o||t.u}function y(t,e,n){return t.g=n,{value:e}}function v(t){this.g=new f,this.h=t}function b(t,e,n,r){try{var i=e.call(t.g.i,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return t.g.l=!1,i;var o=i.value}catch(e){return t.g.i=null,g(t.g,e),x(t)}return t.g.i=null,r.call(t.g,o),x(t)}function x(t){for(;t.g.g;)try{var e=t.h(t.g);if(e)return t.g.l=!1,{value:e.value,done:!1}}catch(e){t.g.h=void 0,g(t.g,e)}if(t.g.l=!1,t.g.j){if(e=t.g.j,t.g.j=null,e.ea)throw e.da;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function _(t){this.next=function(e){return m(t.g),t.g.i?e=b(t,t.g.i.next,e,t.g.s):(t.g.s(e),e=x(t)),e},this.throw=function(e){return m(t.g),t.g.i?e=b(t,t.g.i.throw,e,t.g.s):(g(t.g,e),e=x(t)),e},this.return=function(e){return function(t,e){m(t.g);var n=t.g.i;return n?b(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.g.return):(t.g.return(e),x(t))}(t,e)},this[Symbol.iterator]=function(){return this}}function w(t){return function(t){function e(e){return t.next(e)}function n(e){return t.throw(e)}return new Promise((function(r,i){!function t(o){o.done?r(o.value):Promise.resolve(o.value).then(e,n).then(t,i)}(t.next())}))}(new _(new v(t)))}f.prototype.s=function(t){this.h=t},f.prototype.return=function(t){this.j={return:t},this.g=this.u},i("Promise",(function(t){function e(t){this.h=0,this.i=void 0,this.g=[],this.s=!1;var e=this.j();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.g=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.h=function(t){if(null==this.g){this.g=[];var e=this;this.i((function(){e.l()}))}this.g.push(t)};var o=r.setTimeout;n.prototype.i=function(t){o(t,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var t=this.g;this.g=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.j(t)}}}this.g=null},n.prototype.j=function(t){this.i((function(){throw t}))},e.prototype.j=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.D),reject:t(this.l)}},e.prototype.D=function(t){if(t===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.H(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.A(t):this.o(t)}},e.prototype.A=function(t){var e=void 0;try{e=t.then}catch(t){return void this.l(t)}"function"==typeof e?this.I(e,t):this.o(t)},e.prototype.l=function(t){this.u(2,t)},e.prototype.o=function(t){this.u(1,t)},e.prototype.u=function(t,e){if(0!=this.h)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.h);this.h=t,this.i=e,2===this.h&&this.G(),this.B()},e.prototype.G=function(){var t=this;o((function(){if(t.C()){var e=r.console;void 0!==e&&e.error(t.i)}}),1)},e.prototype.C=function(){if(this.s)return!1;var t=r.CustomEvent,e=r.Event,n=r.dispatchEvent;return void 0===n||("function"==typeof t?t=new t("unhandledrejection",{cancelable:!0}):"function"==typeof e?t=new e("unhandledrejection",{cancelable:!0}):(t=r.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,t),t.promise=this,t.reason=this.i,n(t))},e.prototype.B=function(){if(null!=this.g){for(var t=0;t<this.g.length;++t)s.h(this.g[t]);this.g=null}};var s=new n;return e.prototype.H=function(t){var e=this.j();t.M(e.resolve,e.reject)},e.prototype.I=function(t,e){var n=this.j();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.M(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.M=function(t,e){function n(){switch(r.h){case 1:t(r.i);break;case 2:e(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?s.h(n):this.g.push(n),this.s=!0},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=a(t),o=r.next();!o.done;o=r.next())i(o.value).M(e,n)}))},e.all=function(t){var n=a(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).M(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var S="function"==typeof Object.assign?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};i("Object.assign",(function(t){return t||S})),i("Object.is",(function(t){return t||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}})),i("Array.prototype.includes",(function(t){return t||function(t,e){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(e=e||0)&&(e=Math.max(e+r,0));e<r;e++){var i=n[e];if(i===t||Object.is(i,t))return!0}return!1}})),i("String.prototype.includes",(function(t){return t||function(t,e){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(t,e||0)}})),i("Array.prototype.keys",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,r=!1,i={next:function(){if(!r&&n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(t){return t}))}}));var T=this||self;function E(t,e){t=t.split(".");var n,r=T;t[0]in r||void 0===r.execScript||r.execScript("var "+t[0]);for(;t.length&&(n=t.shift());)t.length||void 0===e?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=e}function A(){throw Error("Invalid UTF8")}function M(t,e){return e=String.fromCharCode.apply(null,e),null==t?e:t+e}var O,C,k="undefined"!=typeof TextDecoder,P="undefined"!=typeof TextEncoder,I={},N=null;function R(t){var e;void 0===e&&(e=0),L(),e=I[e];for(var n=Array(Math.floor(t.length/3)),r=e[64]||"",i=0,o=0;i<t.length-2;i+=3){var a=t[i],s=t[i+1],c=t[i+2],l=e[a>>2];a=e[(3&a)<<4|s>>4],s=e[(15&s)<<2|c>>6],c=e[63&c],n[o++]=l+a+s+c}switch(l=0,c=r,t.length-i){case 2:c=e[(15&(l=t[i+1]))<<2]||r;case 1:t=t[i],n[o]=e[t>>2]+e[(3&t)<<4|l>>4]+c+r}return n.join("")}function D(t){var e=t.length,n=3*e/4;n%3?n=Math.floor(n):-1!="=.".indexOf(t[e-1])&&(n=-1!="=.".indexOf(t[e-2])?n-2:n-1);var r=new Uint8Array(n),i=0;return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=N[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}L();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){r[i++]=t})),i!==n?r.subarray(0,i):r}function L(){if(!N){N={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=t.concat(e[n].split(""));I[n]=r;for(var i=0;i<r.length;i++){var o=r[i];void 0===N[o]&&(N[o]=i)}}}}var F,j="function"==typeof Uint8Array;function U(t){return j&&null!=t&&t instanceof Uint8Array}function B(t){if(this.L=t,null!==t&&0===t.length)throw Error("ByteString should be constructed with non-empty values")}var z="function"==typeof Uint8Array.prototype.slice,V=0;function G(t,e){return Error("Invalid wire type: "+t+" (at position "+e+")")}function W(){return Error("Failed to read varint, encoding is invalid.")}function H(t,e){e=void 0!==(e=void 0===e?{}:e).v&&e.v,this.h=null,this.g=this.i=this.j=0,this.v=e,t&&q(this,t)}function q(t,e){t.h=function(t,e){if(t.constructor===Uint8Array)return t;if(t.constructor===ArrayBuffer)return new Uint8Array(t);if(t.constructor===Array)return new Uint8Array(t);if(t.constructor===String)return D(t);if(t.constructor===B)return!e&&(e=t.L)&&e.constructor===Uint8Array?e:(e=null==(e=t.L)||U(e)?e:"string"==typeof e?D(e):null,(t=t.L=e)?new Uint8Array(t):F||(F=new Uint8Array(0)));if(t instanceof Uint8Array)return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(e,t.v),t.j=0,t.i=t.h.length,t.g=t.j}function X(t){if(t.g>t.i)throw Error("Tried to read past the end of the data "+t.g+" > "+t.i)}function Y(t){var e=t.h,n=e[t.g],r=127&n;if(128>n)return t.g+=1,X(t),r;if(r|=(127&(n=e[t.g+1]))<<7,128>n)return t.g+=2,X(t),r;if(r|=(127&(n=e[t.g+2]))<<14,128>n)return t.g+=3,X(t),r;if(r|=(127&(n=e[t.g+3]))<<21,128>n)return t.g+=4,X(t),r;if(n=e[t.g+4],t.g+=5,r|=(15&n)<<28,128>n)return X(t),r;if(128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++])throw W();return X(t),r}H.prototype.reset=function(){this.g=this.j};var K=[];function Z(){this.g=[]}function J(t,e){for(;127<e;)t.g.push(127&e|128),e>>>=7;t.g.push(e)}function $(t){var e={},n=void 0!==e.W&&e.W;this.l={v:void 0!==e.v&&e.v},this.W=n,e=this.l,K.length?(n=K.pop(),e&&(n.v=e.v),t&&q(n,t),t=n):t=new H(t,e),this.g=t,this.j=this.g.g,this.h=this.i=-1}function Q(t){var e=t.g;if(e.g==e.i)return!1;t.j=t.g.g;var n=Y(t.g)>>>0;if(e=n>>>3,!(0<=(n&=7)&&5>=n))throw G(n,t.j);if(1>e)throw Error("Invalid field number: "+e+" (at position "+t.j+")");return t.i=e,t.h=n,!0}function tt(t){switch(t.h){case 0:if(0!=t.h)tt(t);else t:{for(var e=(t=t.g).g,n=e+10;e<n;)if(0==(128&t.h[e++])){t.g=e,X(t);break t}throw W()}break;case 1:(t=t.g).g+=8,X(t);break;case 2:2!=t.h?tt(t):(e=Y(t.g)>>>0,(t=t.g).g+=e,X(t));break;case 5:(t=t.g).g+=4,X(t);break;case 3:for(e=t.i;;){if(!Q(t))throw Error("Unmatched start-group tag: stream EOF");if(4==t.h){if(t.i!=e)throw Error("Unmatched end-group tag");break}tt(t)}break;default:throw G(t.h,t.j)}}Z.prototype.length=function(){return this.g.length},Z.prototype.end=function(){var t=this.g;return this.g=[],t},$.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};var et=[];function nt(){this.i=[],this.h=0,this.g=new Z}function rt(t,e){0!==e.length&&(t.i.push(e),t.h+=e.length)}var it="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol(void 0):void 0;function ot(t,e){Object.isFrozen(t)||(it?t[it]|=e:void 0!==t.N?t.N|=e:Object.defineProperties(t,{N:{value:e,configurable:!0,writable:!0,enumerable:!1}}))}function at(t){var e;return null==(e=it?t[it]:t.N)?0:e}function st(t){return ot(t,1),t}function ct(t){return!!Array.isArray(t)&&!!(2&at(t))}function lt(t){if(!Array.isArray(t))throw Error("cannot mark non-array as immutable");ot(t,2)}function ut(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)&&t.constructor===Object}var ht=Object.freeze(st([]));function dt(t){if(ct(t.m))throw Error("Cannot mutate an immutable Message")}var pt,ft="undefined"!=typeof Symbol&&void 0!==Symbol.hasInstance;function mt(t){return{value:t,configurable:!1,writable:!1,enumerable:!1}}function gt(t,e,n){return-1===e?null:e>=t.i?t.g?t.g[e]:void 0:void 0!==n&&n&&t.g&&null!=(n=t.g[e])?n:t.m[e+t.h]}function yt(t,e,n,r){r=void 0!==r&&r,dt(t),e<t.i&&!r?t.m[e+t.h]=n:(t.g||(t.g=t.m[t.i+t.h]={}))[e]=n}function vt(t,e,n,r){n=void 0===n||n;var i=gt(t,e,r=void 0!==r&&r);return null==i&&(i=ht),ct(t.m)?n&&(lt(i),Object.freeze(i)):(i===ht||ct(i))&&yt(t,e,i=st(i.slice()),r),i}function bt(t,e,n){return null==(t=null==(t=gt(t,e))?t:+t)?void 0===n?0:n:t}function xt(t,e,n,r){t.j||(t.j={});var i=ct(t.m),o=t.j[n];if(!o){r=vt(t,n,!0,void 0!==r&&r),o=[],i=i||ct(r);for(var a=0;a<r.length;a++)o[a]=new e(r[a]),i&&lt(o[a].m);i&&(lt(o),Object.freeze(o)),t.j[n]=o}return o}function _t(t,e,n,r,i){var o=void 0!==o&&o;return dt(t),o=xt(t,n,e,o),n=r||new n,t=vt(t,e),null!=i?(o.splice(i,0,n),t.splice(i,0,n.m)):(o.push(n),t.push(n.m)),n}function wt(t,e){return null==(t=gt(t,e))?0:t}function St(t,e){return null==(t=gt(t,e))?"":t}function Tt(t){return At(t,void 0===Mt?Ot:Mt)}function Et(t,e){if(null!=t){if(Array.isArray(t))t=At(t,e);else if(ut(t)){var n,r={};for(n in t)r[n]=Et(t[n],e);t=r}else t=e(t);return t}}function At(t,e){for(var n=t.slice(),r=0;r<n.length;r++)n[r]=Et(n[r],e);return Array.isArray(t)&&1&at(t)&&st(n),n}function Mt(t){return t&&"object"==typeof t&&t.toJSON?t.toJSON():(t=function(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"object":if(t&&!Array.isArray(t)){if(U(t))return R(t);if(t instanceof B){var e=t.L;return e=null==e||"string"==typeof e?e:j&&e instanceof Uint8Array?R(e):null,(t.L=e)||""}}}return t}(t),Array.isArray(t)?Tt(t):t)}function Ot(t){return U(t)?new Uint8Array(t):t}function Ct(t,e,n){t||(t=pt),pt=null;var r=this.constructor.h;if(t||(t=r?[r]:[]),this.h=(r?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=t,t=(r=this.m.length)-1,r&&ut(r=this.m[t])?(this.i=t-this.h,this.g=r):void 0!==e&&-1<e?(this.i=Math.max(e,t+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE,n)for(e=0;e<n.length;e++)if((t=n[e])<this.i)t+=this.h,(r=this.m[t])?Array.isArray(r)&&st(r):this.m[t]=ht;else{var i=(r=this.g||(this.g=this.m[this.i+this.h]={}))[t];i?Array.isArray(i)&&st(i):r[t]=ht}}function kt(){Ct.apply(this,arguments)}if(Ct.prototype.toJSON=function(){return Tt(this.m)},Ct.prototype.toString=function(){return this.m.toString()},p(kt,Ct),ft){var Pt={};Object.defineProperties(kt,(Pt[Symbol.hasInstance]=mt((function(){throw Error("Cannot perform instanceof checks for MutableMessage")})),Pt))}function It(t,e,n){if(n){var r,i={};for(r in n){var o=n[r],a=o.ha;a||(i.F=o.la||o.fa.P,o.aa?(i.U=Ut(o.aa),a=function(t){return function(e,n,r){return t.F(e,n,r,t.U)}}(i)):o.ca?(i.T=Bt(o.X.g,o.ca),a=function(t){return function(e,n,r){return t.F(e,n,r,t.T)}}(i)):a=i.F,o.ha=a),a(e,t,o.X),i={F:i.F,U:i.U,T:i.T}}}!function(t,e){if(e=e.ba){rt(t,t.g.end());for(var n=0;n<e.length;n++)rt(t,e[n])}}(e,t)}var Nt=Symbol();function Rt(t,e,n){return t[Nt]||(t[Nt]=function(t,r){return e(t,r,n)})}function Dt(t){var e=t[Nt];if(!e){var n=$t(t);e=function(t,e){return Qt(t,e,n)},t[Nt]=e}return e}function Lt(t){var e=function(t){var e=t.aa;return e?Dt(e):(e=t.ka)?Rt(t.X.g,e,t.ca):void 0}(t),n=t.X,r=t.fa.O;return e?function(t,i){return r(t,i,n,e)}:function(t,e){return r(t,e,n)}}function Ft(t,e,n,r,i,o){var a=0;for((t=t()).length&&"number"!=typeof t[0]&&(n(e,t[0]),a++);a<t.length;){n=t[a++];for(var s=a+1;s<t.length&&"number"!=typeof t[s];)s++;var c=t[a++];switch(s-=a){case 0:r(e,n,c);break;case 1:r(e,n,c,t[a++]);break;case 2:i(e,n,c,t[a++],t[a++]);break;case 3:s=t[a++];var l=t[a++],u=t[a++];Array.isArray(u)?i(e,n,c,s,l,u):o(e,n,c,s,l,u);break;case 4:o(e,n,c,t[a++],t[a++],t[a++],t[a++]);break;default:throw Error("unexpected number of binary field arguments: "+s)}}return e}var jt=Symbol();function Ut(t){var e=t[jt];if(!e){var n=qt(t);e=function(t,e){return ee(t,e,n)},t[jt]=e}return e}function Bt(t,e){var n=t[jt];return n||(n=function(t,n){return It(t,n,e)},t[jt]=n),n}var zt=Symbol();function Vt(t,e){t.push(e)}function Gt(t,e,n){t.push(e,n.P)}function Wt(t,e,n,r,i){var o=Ut(i),a=n.P;t.push(e,(function(t,e,n){return a(t,e,n,r,o)}))}function Ht(t,e,n,r,i,o){var a=Bt(r,o),s=n.P;t.push(e,(function(t,e,n){return s(t,e,n,r,a)}))}function qt(t){return t[zt]||Ft(t,t[zt]=[],Vt,Gt,Wt,Ht)}var Xt=Symbol();function Yt(t,e){t[0]=e}function Kt(t,e,n,r){var i=n.O;t[e]=r?function(t,e,n){return i(t,e,n,r)}:i}function Zt(t,e,n,r,i,o){var a=n.O,s=Dt(i);t[e]=function(t,e,n){return a(t,e,n,r,s,o)}}function Jt(t,e,n,r,i,o,a){var s=n.O,c=Rt(r,i,o);t[e]=function(t,e,n){return s(t,e,n,r,c,a)}}function $t(t){return t[Xt]||Ft(t,t[Xt]={},Yt,Kt,Zt,Jt)}function Qt(t,e,n){for(;Q(e)&&4!=e.h;){var r=e.i,i=n[r];if(!i){var o=n[0];o&&(o=o[r])&&(i=n[r]=Lt(o))}if(!(i&&i(e,t,r)||(i=e,r=t,o=i.j,tt(i),i.W))){var a=i.g.h;i=o===(i=i.g.g)?F||(F=new Uint8Array(0)):z?a.slice(o,i):new Uint8Array(a.subarray(o,i)),(o=r.ba)?o.push(i):r.ba=[i]}}return t}function te(t,e,n){if(et.length){var r=et.pop();t&&(q(r.g,t),r.i=-1,r.h=-1),t=r}else t=new $(t);try{return Qt(new e,t,$t(n))}finally{(e=t.g).h=null,e.j=0,e.i=0,e.g=0,e.v=!1,t.i=-1,t.h=-1,100>et.length&&et.push(t)}}function ee(t,e,n){for(var r=n.length,i=1==r%2,o=i?1:0;o<r;o+=2)(0,n[o+1])(e,t,n[o]);It(t,e,i?n[0]:void 0)}function ne(t,e){var n=new nt;ee(t,n,qt(e)),rt(n,n.g.end()),t=new Uint8Array(n.h);for(var r=(e=n.i).length,i=0,o=0;o<r;o++){var a=e[o];t.set(a,i),i+=a.length}return n.i=[t],t}function re(t,e){return{O:t,P:e}}var ie=re((function(t,e,n){if(5!==t.h)return!1;var r=(t=t.g).h[t.g],i=t.h[t.g+1],o=t.h[t.g+2],a=t.h[t.g+3];return t.g+=4,X(t),t=2*((i=(r|i<<8|o<<16|a<<24)>>>0)>>31)+1,r=i>>>23&255,i&=8388607,yt(e,n,255==r?i?NaN:1/0*t:0==r?t*Math.pow(2,-149)*i:t*Math.pow(2,r-150)*(i+Math.pow(2,23))),!0}),(function(t,e,n){if(null!=(e=gt(e,n))){J(t.g,8*n+5),t=t.g;var r=e;0===(r=(n=0>r?1:0)?-r:r)?V=0<1/r?0:2147483648:isNaN(r)?V=2147483647:34028234663852886e22<r?V=(n<<31|2139095040)>>>0:11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),V=(n<<31|r)>>>0):(e=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-e),16777216<=(r=Math.round(8388608*r))&&++e,V=(n<<31|e+127<<23|8388607&r)>>>0),n=V,t.g.push(n>>>0&255),t.g.push(n>>>8&255),t.g.push(n>>>16&255),t.g.push(n>>>24&255)}})),oe=re((function(t,e,n){if(0!==t.h)return!1;for(var r=t.g,i=128,o=0,a=t=0;4>a&&128<=i;a++)i=r.h[r.g++],X(r),o|=(127&i)<<7*a;if(128<=i&&(i=r.h[r.g++],X(r),o|=(127&i)<<28,t|=(127&i)>>4),128<=i)for(a=0;5>a&&128<=i;a++)i=r.h[r.g++],X(r),t|=(127&i)<<7*a+3;if(!(128>i))throw W();return r=o>>>0,(t=2147483648&(i=t>>>0))&&(i=~i>>>0,0==(r=1+~r>>>0)&&(i=i+1>>>0)),r=4294967296*i+(r>>>0),yt(e,n,t?-r:r),!0}),(function(t,e,n){if(null!=(e=gt(e,n))&&null!=e){J(t.g,8*n),t=t.g;var r=e;for(n=0>r,e=(r=Math.abs(r))>>>0,r=Math.floor((r-e)/4294967296),r>>>=0,n&&(r=~r>>>0,4294967295<(e=1+(~e>>>0))&&(e=0,4294967295<++r&&(r=0))),n=V=e,e=r;0<e||127<n;)t.g.push(127&n|128),n=(n>>>7|e<<25)>>>0,e>>>=7;t.g.push(n)}})),ae=re((function(t,e,n){return 0===t.h&&(yt(e,n,Y(t.g)),!0)}),(function(t,e,n){if(null!=(e=gt(e,n))&&null!=e)if(J(t.g,8*n),t=t.g,0<=(n=e))J(t,n);else{for(e=0;9>e;e++)t.g.push(127&n|128),n>>=7;t.g.push(1)}})),se=re((function(t,e,n){if(2!==t.h)return!1;var r,i=Y(t.g)>>>0,o=(t=t.g).g;if(t.g+=i,X(t),t=t.h,k)(r=O)||(r=O=new TextDecoder("utf-8",{fatal:!0})),r=r.decode(t.subarray(o,o+i));else{i=o+i;for(var a,s,c,l=[],u=null;o<i;)128>(a=t[o++])?l.push(a):224>a?o>=i?A():(s=t[o++],194>a||128!=(192&s)?(o--,A()):l.push((31&a)<<6|63&s)):240>a?o>=i-1?A():128!=(192&(s=t[o++]))||224===a&&160>s||237===a&&160<=s||128!=(192&(r=t[o++]))?(o--,A()):l.push((15&a)<<12|(63&s)<<6|63&r):244>=a?o>=i-2?A():128!=(192&(s=t[o++]))||0!=s-144+(a<<28)>>30||128!=(192&(r=t[o++]))||128!=(192&(c=t[o++]))?(o--,A()):(a=(7&a)<<18|(63&s)<<12|(63&r)<<6|63&c,a-=65536,l.push(55296+(a>>10&1023),56320+(1023&a))):A(),8192<=l.length&&(u=M(u,l),l.length=0);r=M(u,l)}return yt(e,n,r),!0}),(function(t,e,n){if(null!=(e=gt(e,n))){var r=!1;if(r=void 0!==r&&r,P){if(r&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(e))throw Error("Found an unpaired surrogate");e=(C||(C=new TextEncoder)).encode(e)}else{for(var i=0,o=new Uint8Array(3*e.length),a=0;a<e.length;a++){var s=e.charCodeAt(a);if(128>s)o[i++]=s;else{if(2048>s)o[i++]=s>>6|192;else{if(55296<=s&&57343>=s){if(56319>=s&&a<e.length){var c=e.charCodeAt(++a);if(56320<=c&&57343>=c){s=1024*(s-55296)+c-56320+65536,o[i++]=s>>18|240,o[i++]=s>>12&63|128,o[i++]=s>>6&63|128,o[i++]=63&s|128;continue}a--}if(r)throw Error("Found an unpaired surrogate");s=65533}o[i++]=s>>12|224,o[i++]=s>>6&63|128}o[i++]=63&s|128}}e=o.subarray(0,i)}J(t.g,8*n+2),J(t.g,e.length),rt(t,t.g.end()),rt(t,e)}})),ce=re((function(t,e,n,r,i){if(2!==t.h)return!1;e=_t(e,n,r),n=t.g.i,r=Y(t.g)>>>0;var o=t.g.g+r,a=o-n;if(0>=a&&(t.g.i=o,i(e,t),a=o-t.g.g),a)throw Error("Message parsing ended unexpectedly. Expected to read "+r+" bytes, instead read "+(r-a)+" bytes, either the data ended unexpectedly or the message misreported its own length");return t.g.g=o,t.g.i=n,!0}),(function(t,e,n,r,i){if(null!=(e=xt(e,r,n)))for(r=0;r<e.length;r++){var o=t;J(o.g,8*n+2);var a=o.g.end();rt(o,a),a.push(o.h),o=a,i(e[r],t),a=t;var s=o.pop();for(s=a.h+a.g.length()-s;127<s;)o.push(127&s|128),s>>>=7,a.h++;o.push(s),a.h++}}));function le(){kt.apply(this,arguments)}if(p(le,kt),ft){var ue={};Object.defineProperties(le,(ue[Symbol.hasInstance]=mt(Object[Symbol.hasInstance]),ue))}function he(t){le.call(this,t)}function de(){return[1,ae,2,ie,3,se,4,se]}function pe(t){le.call(this,t,-1,me)}function fe(){return[1,ce,he,de]}p(he,le),p(pe,le),pe.prototype.addClassification=function(t,e){return _t(this,1,he,t,e),this};var me=[1];function ge(t){le.call(this,t)}function ye(){return[1,ie,2,ie,3,ie,4,ie,5,ie]}function ve(t){le.call(this,t,-1,xe)}function be(){return[1,ce,ge,ye]}p(ge,le),p(ve,le);var xe=[1];function _e(t){le.call(this,t)}function we(){return[1,ie,2,ie,3,ie,4,ie,5,ie,6,oe]}p(_e,le);var Se=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],Te=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],Ee=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Ae=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Me=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],Oe=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],Ce=[].concat(s(Se),s(Te),s(Ee),s(Ae),s(Me),s(Oe));function ke(t,e,n){if(n=t.createShader(0===n?t.VERTEX_SHADER:t.FRAGMENT_SHADER),t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+t.getShaderInfoLog(n));return n}function Pe(t){return xt(t,he,1).map((function(t){return{index:wt(t,1),ga:bt(t,2),label:null!=gt(t,3)?St(t,3):void 0,displayName:null!=gt(t,4)?St(t,4):void 0}}))}function Ie(t){return{x:bt(t,1),y:bt(t,2),z:bt(t,3),visibility:null!=gt(t,4)?bt(t,4):void 0}}function Ne(t,e){this.h=t,this.g=e,this.l=0}function Re(t,e,n){return function(t,e){var n=t.g;if(void 0===t.o){var r=ke(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),i=ke(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=n.createProgram();if(n.attachShader(o,r),n.attachShader(o,i),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(o));r=t.o=o,n.useProgram(r),i=n.getUniformLocation(r,"sampler0"),t.j={K:n.getAttribLocation(r,"aVertex"),J:n.getAttribLocation(r,"aTex"),ma:i},t.u=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.u),n.enableVertexAttribArray(t.j.K),n.vertexAttribPointer(t.j.K,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),t.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.s),n.enableVertexAttribArray(t.j.J),n.vertexAttribPointer(t.j.J,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(i,0)}r=t.j,n.useProgram(t.o),n.canvas.width=e.width,n.canvas.height=e.height,n.viewport(0,0,e.width,e.height),n.activeTexture(n.TEXTURE0),t.h.bindTexture2d(e.glName),n.enableVertexAttribArray(r.K),n.bindBuffer(n.ARRAY_BUFFER,t.u),n.vertexAttribPointer(r.K,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.J),n.bindBuffer(n.ARRAY_BUFFER,t.s),n.vertexAttribPointer(r.J,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.K),n.disableVertexAttribArray(r.J),n.bindBuffer(n.ARRAY_BUFFER,null),t.h.bindTexture2d(0)}(t,e),"function"==typeof t.g.canvas.transferToImageBitmap?Promise.resolve(t.g.canvas.transferToImageBitmap()):n?Promise.resolve(t.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(t.g.canvas):(void 0===t.i&&(t.i=document.createElement("canvas")),new Promise((function(e){t.i.height=t.g.canvas.height,t.i.width=t.g.canvas.width,t.i.getContext("2d",{}).drawImage(t.g.canvas,0,0,t.g.canvas.width,t.g.canvas.height),e(t.i)})))}function De(t){this.g=t}var Le=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Fe(t,e){return e+t}function je(t,e){window[t]=e}function Ue(t){if(this.g=t,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=Promise.resolve(),this.Y="",this.C={},this.locateFile=t&&t.locateFile||Fe,"object"==typeof window)var e=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");e=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.$=e,t.options)for(var n=(e=a(Object.keys(t.options))).next();!n.done;n=e.next()){n=n.value;var r=t.options[n].default;void 0!==r&&(this.j[n]="function"==typeof r?r():r)}}function Be(t,e){var n,r;return w((function(i){return e in t.H?i.return(t.H[e]):(n=t.locateFile(e,""),r=fetch(n).then((function(t){return t.arrayBuffer()})),t.H[e]=r,i.return(r))}))}function ze(t,e,n){var r,i,o,s,c,l,u,h,d,p,f,m,g,v;return w((function(b){switch(b.g){case 1:if(!n)return b.return(e);for(r={},i=0,o=a(Object.keys(n)),s=o.next();!s.done;s=o.next())c=s.value,"string"!=typeof(l=n[c])&&"texture"===l.type&&void 0!==e[l.stream]&&++i;1<i&&(t.I=!1),u=a(Object.keys(n)),s=u.next();case 2:if(s.done){b.g=4;break}if(h=s.value,"string"==typeof(d=n[h]))return g=r,v=h,y(b,function(t,e,n){var r;return w((function(i){return"number"==typeof n||n instanceof Uint8Array||n instanceof t.h.Uint8BlobList?i.return(n):n instanceof t.h.Texture2dDataOut?((r=t.u[e])||(r=new Ne(t.h,t.G),t.u[e]=r),i.return(Re(r,n,t.I))):i.return(void 0)}))}(t,h,e[d]),14);if(p=e[d.stream],"detection_list"===d.type){if(p){for(var x=p.getRectList(),_=p.getLandmarksList(),S=p.getClassificationsList(),T=[],E=0;E<x.size();++E){var A=te(x.get(E),_e,we);A={boundingBox:{xCenter:bt(A,1),yCenter:bt(A,2),height:bt(A,3),width:bt(A,4),rotation:bt(A,5,0),rectId:wt(A,6)},landmarks:xt(te(_.get(E),ve,be),ge,1).map(Ie),V:Pe(te(S.get(E),pe,fe))},T.push(A)}x=T}else x=[];r[h]=x,b.g=7;break}if("proto_list"===d.type){if(p){for(x=Array(p.size()),_=0;_<p.size();_++)x[_]=p.get(_);p.delete()}else x=[];r[h]=x,b.g=7;break}if(void 0===p){b.g=3;break}if("float_list"===d.type){r[h]=p,b.g=7;break}if("proto"===d.type){r[h]=p,b.g=7;break}if("texture"!==d.type)throw Error("Unknown output config type: '"+d.type+"'");return(f=t.u[h])||(f=new Ne(t.h,t.G),t.u[h]=f),y(b,Re(f,p,t.I),13);case 13:m=b.h,r[h]=m;case 7:d.transform&&r[h]&&(r[h]=d.transform(r[h])),b.g=3;break;case 14:g[v]=b.h;case 3:s=u.next(),b.g=2;break;case 4:return b.return(r)}}))}function Ve(t,e){for(var n=e.name||"$",r=[].concat(s(e.wants)),i=new t.h.StringList,o=a(e.wants),c=o.next();!c.done;c=o.next())i.push_back(c.value);o=t.h.PacketListener.implement({onResults:function(i){for(var o={},a=0;a<e.wants.length;++a)o[r[a]]=i.get(a);var s=t.listeners[n];s&&(t.D=ze(t,o,e.outs).then((function(n){n=s(n);for(var i=0;i<e.wants.length;++i){var a=o[r[i]];"object"==typeof a&&a.hasOwnProperty&&a.hasOwnProperty("delete")&&a.delete()}n&&(t.D=n)})))}}),t.i.attachMultiListener(i,o),i.delete()}function Ge(t){var e=this;t=t||{};var n={url:"face_detection_short.binarypb"},r={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new Ue({locateFile:t.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:n,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"object"==typeof window&&void 0!==window.navigator&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(t){var i,o,s,c,l;return w((function(u){switch(u.g){case 1:i=a("short"===t?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"]),o=i.next();case 2:if(o.done){u.g=4;break}return s=o.value,c="third_party/mediapipe/modules/face_detection/"+s,y(u,Be(e.g,s),5);case 5:l=u.h,e.g.overrideFile(c,l),o=i.next(),u.g=2;break;case 4:return n.url="short"===t?"face_detection_short.binarypb":"face_detection_full.binarypb",r.graphOptionXref.calculatorName="short"===t?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",u.return(!0)}}))}},minDetectionConfidence:r}})}(t=Ue.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},t.reset=function(){var t=this;return w((function(e){t.i&&(t.i.reset(),t.o={},t.u={}),e.g=0}))},t.setOptions=function(t,e){var n=this;if(e=e||this.g.options){for(var r=[],i=[],o={},s=a(Object.keys(t)),c=s.next();!c.done;o={R:o.R,S:o.S},c=s.next()){var l=c.value;l in this.j&&this.j[l]===t[l]||(this.j[l]=t[l],void 0!==(c=e[l])&&(c.onChange&&(o.R=c.onChange,o.S=t[l],r.push(function(t){return function(){return w((function(e){if(1==e.g)return y(e,t.R(t.S),2);!0===e.h&&(n.s=!0),e.g=0}))}}(o))),c.graphOptionXref&&(l={valueNumber:1===c.type?t[l]:0,valueBoolean:0===c.type&&t[l],valueString:2===c.type?t[l]:""},c=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),c.graphOptionXref),l),i.push(c))))}0===r.length&&0===i.length||(this.s=!0,this.B=(void 0===this.B?[]:this.B).concat(i),this.A=(void 0===this.A?[]:this.A).concat(r))}},t.initialize=function(){var t=this;return w((function(e){return 1==e.g?y(e,function(t){var e,n,r,i,o,a,c,l,u,h,d;return w((function(p){switch(p.g){case 1:return t.Z?(e=void 0===t.g.files?[]:"function"==typeof t.g.files?t.g.files(t.j):t.g.files,y(p,w((function(t){switch(t.g){case 1:return t.o=2,y(t,WebAssembly.instantiate(Le),4);case 4:t.g=3,t.o=0;break;case 2:return t.o=0,t.j=null,t.return(!1);case 3:return t.return(!0)}})),2)):p.return();case 2:if(n=p.h,"object"==typeof window)return je("createMediapipeSolutionsWasm",{locateFile:t.locateFile}),je("createMediapipeSolutionsPackedAssets",{locateFile:t.locateFile}),a=e.filter((function(t){return void 0!==t.data})),c=e.filter((function(t){return void 0===t.data})),l=Promise.all(a.map((function(e){var n=Be(t,e.url);if(void 0!==e.path){var r=e.path;n=n.then((function(e){return t.overrideFile(r,e),Promise.resolve(e)}))}return n}))),u=Promise.all(c.map((function(e){return void 0===e.simd||e.simd&&n||!e.simd&&!n?function(t){var e=document.createElement("script");return e.setAttribute("src",t),e.setAttribute("crossorigin","anonymous"),new Promise((function(t){e.addEventListener("load",(function(){t()}),!1),e.addEventListener("error",(function(){t()}),!1),document.body.appendChild(e)}))}(t.locateFile(e.url,t.$)):Promise.resolve()}))).then((function(){var e,n,r;return w((function(i){if(1==i.g)return e=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,r=t,y(i,e(n),2);r.h=i.h,i.g=0}))})),h=w((function(e){return t.g.graph&&t.g.graph.url?e=y(e,Be(t,t.g.graph.url),0):(e.g=0,e=void 0),e})),y(p,Promise.all([u,l,h]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return r=e.filter((function(t){return void 0===t.simd||t.simd&&n||!t.simd&&!n})).map((function(e){return t.locateFile(e.url,t.$)})),importScripts.apply(null,s(r)),i=t,y(p,createMediapipeSolutionsWasm(Module),6);case 6:i.h=p.h,t.l=new OffscreenCanvas(1,1),t.h.canvas=t.l,o=t.h.GL.createContext(t.l,{antialias:!1,alpha:!1,ja:"undefined"!=typeof WebGL2RenderingContext?2:1}),t.h.GL.makeContextCurrent(o),p.g=4;break;case 7:if(t.l=document.createElement("canvas"),!(d=t.l.getContext("webgl2",{}))&&!(d=t.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),p.return();t.G=d,t.h.canvas=t.l,t.h.createContext(t.l,!0,!0,{});case 4:t.i=new t.h.SolutionWasm,t.Z=!1,p.g=0}}))}(t),2):3!=e.g?y(e,function(t){var e,n,r,i,o,s,c,l;return w((function(u){if(1==u.g)return t.g.graph&&t.g.graph.url&&t.Y===t.g.graph.url?u.return():(t.s=!0,t.g.graph&&t.g.graph.url?(t.Y=t.g.graph.url,y(u,Be(t,t.g.graph.url),3)):void(u.g=2));for(2!=u.g&&(e=u.h,t.i.loadGraph(e)),n=a(Object.keys(t.C)),r=n.next();!r.done;r=n.next())i=r.value,t.i.overrideFile(i,t.C[i]);if(t.C={},t.g.listeners)for(o=a(t.g.listeners),s=o.next();!s.done;s=o.next())c=s.value,Ve(t,c);l=t.j,t.j={},t.setOptions(l),u.g=0}))}(t),3):y(e,function(t){var e,n,r,i,o,s;return w((function(c){switch(c.g){case 1:if(!t.s)return c.return();if(!t.A){c.g=2;break}e=a(t.A),n=e.next();case 3:if(n.done){c.g=5;break}return y(c,(0,n.value)(),4);case 4:n=e.next(),c.g=3;break;case 5:t.A=void 0;case 2:if(t.B){for(r=new t.h.GraphOptionChangeRequestList,i=a(t.B),o=i.next();!o.done;o=i.next())s=o.value,r.push_back(s);t.i.changeOptions(r),r.delete(),t.B=void 0}t.s=!1,c.g=0}}))}(t),0)}))},t.overrideFile=function(t,e){this.i?this.i.overrideFile(t,e):this.C[t]=e},t.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},t.send=function(t,e){var n,r,i,o,s,c,l,u,h,d=this;return w((function(p){switch(p.g){case 1:return d.g.inputs?(n=1e3*(null==e?performance.now():e),y(p,d.D,2)):p.return();case 2:return y(p,d.initialize(),3);case 3:for(r=new d.h.PacketDataList,i=a(Object.keys(t)),o=i.next();!o.done;o=i.next())if(s=o.value,c=d.g.inputs[s]){t:{var f=t[s];switch(c.type){case"video":var m=d.o[c.stream];if(m||(m=new Ne(d.h,d.G),d.o[c.stream]=m),0===m.l&&(m.l=m.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&f instanceof HTMLVideoElement)var g=f.videoWidth,v=f.videoHeight;else"undefined"!=typeof HTMLImageElement&&f instanceof HTMLImageElement?(g=f.naturalWidth,v=f.naturalHeight):(g=f.width,v=f.height);v={glName:m.l,width:g,height:v},(g=m.g).canvas.width=v.width,g.canvas.height=v.height,g.activeTexture(g.TEXTURE0),m.h.bindTexture2d(m.l),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f),m.h.bindTexture2d(0),m=v;break t;case"detections":for((m=d.o[c.stream])||(m=new De(d.h),d.o[c.stream]=m),m.data||(m.data=new m.g.DetectionListData),m.data.reset(f.length),v=0;v<f.length;++v){g=f[v];var b=m.data,x=b.setBoundingBox,_=v,w=g.boundingBox,S=new _e;if(yt(S,1,w.xCenter),yt(S,2,w.yCenter),yt(S,3,w.height),yt(S,4,w.width),yt(S,5,w.rotation),yt(S,6,w.rectId),w=ne(S,we),x.call(b,_,w),g.landmarks)for(b=0;b<g.landmarks.length;++b){var T=!!(S=g.landmarks[b]).visibility;_=(x=m.data).addNormalizedLandmark,w=v,S=Object.assign(Object.assign({},S),{visibility:T?S.visibility:0}),yt(T=new ge,1,S.x),yt(T,2,S.y),yt(T,3,S.z),S.visibility&&yt(T,4,S.visibility),S=ne(T,ye),_.call(x,w,S)}if(g.V)for(b=0;b<g.V.length;++b)_=(x=m.data).addClassification,w=v,S=g.V[b],yt(T=new he,2,S.ga),S.index&&yt(T,1,S.index),S.label&&yt(T,3,S.label),S.displayName&&yt(T,4,S.displayName),S=ne(T,de),_.call(x,w,S)}m=m.data;break t;default:m={}}}switch(l=m,u=c.stream,c.type){case"video":r.pushTexture2d(Object.assign(Object.assign({},l),{stream:u,timestamp:n}));break;case"detections":(h=l).stream=u,h.timestamp=n,r.pushDetectionList(h);break;default:throw Error("Unknown input config type: '"+c.type+"'")}}return d.i.send(r),y(p,d.D,4);case 4:r.delete(),p.g=0}}))},t.onResults=function(t,e){this.listeners[e||"$"]=t},E("Solution",Ue),E("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(t=Ge.prototype).close=function(){return this.g.close(),Promise.resolve()},t.onResults=function(t){this.g.onResults(t)},t.initialize=function(){var t=this;return w((function(e){return y(e,t.g.initialize(),0)}))},t.reset=function(){this.g.reset()},t.send=function(t){var e=this;return w((function(n){return y(n,e.g.send(t),0)}))},t.setOptions=function(t){this.g.setOptions(t)},E("FaceDetection",Ge),E("FACEDETECTION_LIPS",Se),E("FACEDETECTION_LEFT_EYE",Te),E("FACEDETECTION_LEFT_EYEBROW",Ee),E("FACEDETECTION_RIGHT_EYE",Ae),E("FACEDETECTION_RIGHT_EYEBROW",Me),E("FACEDETECTION_FACE_OVAL",Oe),E("FACEDETECTION_CONTOURS",Ce),E("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),E("VERSION","0.4.1646425229")}).call(r0);var o0=function(){return o0=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o0.apply(this,arguments)};function a0(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))}function s0(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var c0=["rightEye","leftEye","noseTip","mouthCenter","rightEarTragion","leftEarTragion"],l0={modelType:"short",runtime:"mediapipe",maxFaces:1},u0=function(){function t(t){var e=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceDetectorSolution=new i0.FaceDetection({locateFile:function(e,n){return t.solutionPath?t.solutionPath.replace(/\/+$/,"")+"/"+e:n+"/"+e}}),this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode,model:t.modelType}),this.faceDetectorSolution.onResults((function(t){if(e.height=t.image.height,e.width=t.image.width,e.faces=[],null!==t.detections)for(var n=0,r=t.detections;n<r.length;n++){var i=r[n];e.faces.push(e.normalizedToAbsolute(i.landmarks,{xMin:a=(o=i.boundingBox).xCenter-o.width/2,xMax:a+o.width,yMin:s=o.yCenter-o.height/2,yMax:s+o.height,width:o.width,height:o.height}))}var o,a,s}))}return t.prototype.normalizedToAbsolute=function(t,e){var n=this;return{keypoints:t.map((function(t,e){return{x:t.x*n.width,y:t.y*n.height,name:c0[e]}})),box:{xMin:e.xMin*this.width,yMin:e.yMin*this.height,xMax:e.xMax*this.width,yMax:e.yMax*this.height,width:e.width*this.width,height:e.height*this.height}}},t.prototype.estimateFaces=function(t,e){return a0(this,void 0,void 0,(function(){var n,r;return s0(this,(function(i){switch(i.label){case 0:return e&&e.flipHorizontal&&e.flipHorizontal!==this.selfieMode&&(this.selfieMode=e.flipHorizontal,this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode})),t instanceof GV?(r=ImageData.bind,[4,NH(t)]):[3,2];case 1:return n=new(r.apply(ImageData,[void 0,i.sent(),t.shape[1],t.shape[0]])),[3,3];case 2:n=t,i.label=3;case 3:return t=n,[4,this.faceDetectorSolution.send({image:t})];case 4:return i.sent(),[2,this.faces]}}))}))},t.prototype.dispose=function(){this.faceDetectorSolution.close()},t.prototype.reset=function(){this.faceDetectorSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},t.prototype.initialize=function(){return this.faceDetectorSolution.initialize()},t}();function h0(t){return a0(this,void 0,void 0,(function(){var e,n;return s0(this,(function(r){switch(r.label){case 0:return e=function(t){if(null==t)return o0({},l0);var e=o0({},t);return e.runtime="mediapipe",null==e.modelType&&(e.modelType=l0.modelType),null==e.maxFaces&&(e.maxFaces=l0.maxFaces),e}(t),[4,(n=new u0(e)).initialize()];case 1:return r.sent(),[2,n]}}))}))}function d0(t){return t instanceof GV?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function p0(t){return t instanceof GV?t:RH(t)}function f0(t,e){kj(0!==t.width,(function(){return e+" width cannot be 0."})),kj(0!==t.height,(function(){return e+" height cannot be 0."}))}function m0(t){null==t.reduceBoxesInLowestLayer&&(t.reduceBoxesInLowestLayer=!1),null==t.interpolatedScaleAspectRatio&&(t.interpolatedScaleAspectRatio=1),null==t.fixedAnchorSize&&(t.fixedAnchorSize=!1);for(var e=[],n=0;n<t.numLayers;){for(var r=[],i=[],o=[],a=[],s=n;s<t.strides.length&&t.strides[s]===t.strides[n];){var c=g0(t.minScale,t.maxScale,s,t.strides.length);if(0===s&&t.reduceBoxesInLowestLayer)o.push(1),o.push(2),o.push(.5),a.push(.1),a.push(c),a.push(c);else{for(var l=0;l<t.aspectRatios.length;++l)o.push(t.aspectRatios[l]),a.push(c);if(t.interpolatedScaleAspectRatio>0){var u=s===t.strides.length-1?1:g0(t.minScale,t.maxScale,s+1,t.strides.length);a.push(Math.sqrt(c*u)),o.push(t.interpolatedScaleAspectRatio)}}s++}for(var h=0;h<o.length;++h){var d=Math.sqrt(o[h]);r.push(a[h]/d),i.push(a[h]*d)}var p=0,f=0;if(t.featureMapHeight.length>0)p=t.featureMapHeight[n],f=t.featureMapWidth[n];else{var m=t.strides[n];p=Math.ceil(t.inputSizeHeight/m),f=Math.ceil(t.inputSizeWidth/m)}for(var g=0;g<p;++g)for(var y=0;y<f;++y)for(var v=0;v<r.length;++v){var b={xCenter:(y+t.anchorOffsetX)/f,yCenter:(g+t.anchorOffsetY)/p,width:0,height:0};t.fixedAnchorSize?(b.width=1,b.height=1):(b.width=i[v],b.height=r[v]),e.push(b)}n=s}return e}function g0(t,e,n,r){return 1===r?.5*(t+e):t+(e-t)*n/(r-1)}function y0(t,e){var n=e[0],r=e[1];return[n*t[0]+r*t[1]+t[3],n*t[4]+r*t[5]+t[7]]}function v0(t,e,n,r){return a0(this,void 0,void 0,(function(){var r,i,o,a,s;return s0(this,(function(c){switch(c.label){case 0:return t.sort((function(t,e){return Math.max.apply(Math,e.score)-Math.max.apply(Math,t.score)})),r=NK(t.map((function(t){return[t.locationData.relativeBoundingBox.yMin,t.locationData.relativeBoundingBox.xMin,t.locationData.relativeBoundingBox.yMax,t.locationData.relativeBoundingBox.xMax]}))),i=IK(t.map((function(t){return t.score[0]}))),[4,pJ.nonMaxSuppressionAsync(r,i,e,n)];case 1:return[4,(o=c.sent()).array()];case 2:return a=c.sent(),s=t.filter((function(t,e){return a.indexOf(e)>-1})),CG([r,i,o]),[2,s]}}))}))}function b0(t,e,n){return a0(this,void 0,void 0,(function(){var r,i,o,a,s;return s0(this,(function(c){switch(c.label){case 0:return r=t[0],i=t[1],o=function(t,e,n){return OG((function(){var r,i,o,a;n.reverseOutputOrder?(i=MK(Nq(t,[0,n.boxCoordOffset+0],[-1,1])),r=MK(Nq(t,[0,n.boxCoordOffset+1],[-1,1])),a=MK(Nq(t,[0,n.boxCoordOffset+2],[-1,1])),o=MK(Nq(t,[0,n.boxCoordOffset+3],[-1,1]))):(r=MK(Nq(t,[0,n.boxCoordOffset+0],[-1,1])),i=MK(Nq(t,[0,n.boxCoordOffset+1],[-1,1])),o=MK(Nq(t,[0,n.boxCoordOffset+2],[-1,1])),a=MK(Nq(t,[0,n.boxCoordOffset+3],[-1,1]))),i=FW(BW(UW(i,n.xScale),e.w),e.x),r=FW(BW(UW(r,n.yScale),e.h),e.y),n.applyExponentialOnBoxSize?(o=BW(DX(UW(o,n.hScale)),e.h),a=BW(DX(UW(a,n.wScale)),e.w)):(o=BW(UW(o,n.hScale),e.h),a=BW(UW(a,n.wScale),e.h));var s=tH(r,UW(o,2)),c=tH(i,UW(a,2)),l=FW(r,UW(o,2)),u=FW(i,UW(a,2)),h=kq([Mq(s,[n.numBoxes,1]),Mq(c,[n.numBoxes,1]),Mq(l,[n.numBoxes,1]),Mq(u,[n.numBoxes,1])],1);if(n.numKeypoints)for(var d=0;d<n.numKeypoints;++d){var p=n.keypointCoordOffset+d*n.numValuesPerKeypoint,f=void 0,m=void 0;n.reverseOutputOrder?(f=MK(Nq(t,[0,p],[-1,1])),m=MK(Nq(t,[0,p+1],[-1,1]))):(m=MK(Nq(t,[0,p],[-1,1])),f=MK(Nq(t,[0,p+1],[-1,1])));var g=FW(BW(UW(f,n.xScale),e.w),e.x),y=FW(BW(UW(m,n.yScale),e.h),e.y);h=kq([h,Mq(g,[n.numBoxes,1]),Mq(y,[n.numBoxes,1])],1)}return h}))}(i,e,n),a=OG((function(){var t=r;return n.sigmoidScore?(null!=n.scoreClippingThresh&&(t=qq(r,-n.scoreClippingThresh,n.scoreClippingThresh)),t=Iq(t)):t})),[4,x0(o,a,n)];case 1:return s=c.sent(),CG([o,a]),[2,s]}}))}))}function x0(t,e,n){return a0(this,void 0,void 0,(function(){var r,i,o,a,s,c,l,u,h,d,p,f;return s0(this,(function(m){switch(m.label){case 0:return r=[],[4,t.data()];case 1:return i=m.sent(),[4,e.data()];case 2:for(o=m.sent(),a=0;a<n.numBoxes;++a)if(!(null!=n.minScoreThresh&&o[a]<n.minScoreThresh||(s=a*n.numCoords,c=_0(i[s+0],i[s+1],i[s+2],i[s+3],o[a],n.flipVertically,a),(l=c.locationData.relativeBoundingBox).width<0||l.height<0))){if(n.numKeypoints>0)for((u=c.locationData).relativeKeypoints=[],h=n.numKeypoints*n.numValuesPerKeypoint,d=0;d<h;d+=n.numValuesPerKeypoint)p=s+n.keypointCoordOffset+d,f={x:i[p+0],y:n.flipVertically?1-i[p+1]:i[p+1]},u.relativeKeypoints.push(f);r.push(c)}return[2,r]}}))}))}function _0(t,e,n,r,i,o,a){return{score:[i],ind:a,locationData:{relativeBoundingBox:{xMin:e,yMin:o?1-n:t,xMax:r,yMax:o?1-t:n,width:r-e,height:n-t}}}}var w0,S0={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:128,inputSizeWidth:128,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},T0={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:0,featureMapHeight:[],featureMapWidth:[],numLayers:1,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[4],aspectRatios:[1],fixedAnchorSize:!0},E0={runtime:"tfjs",modelType:"short",maxFaces:1,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"},A0={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:896,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:128,yScale:128,hScale:128,wScale:128,minScoreThresh:.5},M0={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2304,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.6},O0={outputTensorSize:{width:128,height:128},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},C0={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},k0=function(){function t(t,e,n){this.detectorModel=e,this.maxFaces=n,"full"===t?(this.imageToTensorConfig=C0,this.tensorsToDetectionConfig=M0,this.anchors=m0(T0)):(this.imageToTensorConfig=O0,this.tensorsToDetectionConfig=A0,this.anchors=m0(S0));var r=IK(this.anchors.map((function(t){return t.width}))),i=IK(this.anchors.map((function(t){return t.height}))),o=IK(this.anchors.map((function(t){return t.xCenter}))),a=IK(this.anchors.map((function(t){return t.yCenter})));this.anchorTensor={x:o,y:a,w:r,h:i}}return t.prototype.dispose=function(){this.detectorModel.dispose(),CG([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},t.prototype.reset=function(){},t.prototype.detectFaces=function(t,e){return void 0===e&&(e=!1),a0(this,void 0,void 0,(function(){var n,r,i,o,a,s,c,l,u,h,d;return s0(this,(function(p){switch(p.label){case 0:return null==t?(this.reset(),[2,[]]):(n=OG((function(){var n=RW(p0(t),"float32");return e&&(n=MK(pJ.flipLeftRight(LX(n,0)),[0])),n})),r=function(t,e,n){var r=e.outputTensorSize,i=e.keepAspectRatio,o=e.borderMode,a=e.outputTensorFloatRange,s=d0(t),c=function(t,e){return e?{xCenter:e.xCenter*t.width,yCenter:e.yCenter*t.height,width:e.width*t.width,height:e.height*t.height,rotation:e.rotation}:{xCenter:.5*t.width,yCenter:.5*t.height,width:t.width,height:t.height,rotation:0}}(s,n),l=function(t,e,n){if(void 0===n&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var r=e.height,i=e.width;f0(e,"targetSize"),f0(t,"roi");var o,a,s=r/i,c=t.height/t.width,l=0,u=0;return s>c?(o=t.width,a=t.width*s,u=(1-c/s)/2):(o=t.height/s,a=t.height,l=(1-s/c)/2),t.width=o,t.height=a,{top:u,left:l,right:l,bottom:u}}(c,r,i),u=function(t,e,n,r){var i=t.width,o=t.height,a=Math.cos(t.rotation),s=Math.sin(t.rotation),c=t.xCenter,l=t.yCenter,u=1/e,h=1/n,d=new Array(16);return d[0]=i*a*1*u,d[1]=-o*s*u,d[2]=0,d[3]=(-.5*i*a*1+.5*o*s+c)*u,d[4]=i*s*1*h,d[5]=o*a*h,d[6]=0,d[7]=(-.5*o*a-.5*i*s*1+l)*h,d[8]=0,d[9]=0,d[10]=i*u,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,function(t){if(16!==t.length)throw new Error("Array length must be 16 but got "+t.length);return[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}(d)}(c,s.width,s.height),h=OG((function(){var e=p0(t),n=NK(function(t,e,n){return f0(n,"inputResolution"),[1/n.width*t[0][0]*e.width,1/n.height*t[0][1]*e.width,t[0][3]*e.width,1/n.width*t[1][0]*e.height,1/n.height*t[1][1]*e.height,t[1][3]*e.height,0,0]}(u,s,r),[1,8]),i="zero"===o?"constant":"nearest",c=pJ.transform(LX(RW(e,"float32")),n,"bilinear",i,0,[r.height,r.width]);return null!=a?function(t,e){var n=function(t,e,n,r){var i=(r-n)/255;return{scale:i,offset:n-0*i}}(0,0,e[0],e[1]);return OG((function(){return FW(BW(t,n.scale),n.offset)}))}(c,a):c}));return{imageTensor:h,padding:l,transformationMatrix:u}}(n,this.imageToTensorConfig),i=r.imageTensor,o=r.transformationMatrix,a=this.detectorModel.execute(i,"Identity:0"),s=function(t){return OG((function(){var e=function(t){return OG((function(){return[Nq(t,[0,0,0],[1,-1,1]),Nq(t,[0,0,1],[1,-1,-1])]}))}(t),n=e[0],r=e[1];return{boxes:MK(r),logits:MK(n)}}))}(a),c=s.boxes,[4,b0([l=s.logits,c],this.anchorTensor,this.tensorsToDetectionConfig)]);case 1:return 0===(u=p.sent()).length?(CG([n,i,a,l,c]),[2,u]):[4,v0(u,this.maxFaces,.3)];case 2:return h=p.sent(),d=function(t,e){void 0===t&&(t=[]);var n,r=(n=e,[].concat.apply([],n));return t.forEach((function(t){var e=t.locationData;e.relativeKeypoints.forEach((function(t){var e=y0(r,[t.x,t.y]),n=e[0],i=e[1];t.x=n,t.y=i}));var n=e.relativeBoundingBox,i=Number.MAX_VALUE,o=Number.MAX_VALUE,a=Number.MIN_VALUE,s=Number.MIN_VALUE;[[n.xMin,n.yMin],[n.xMin+n.width,n.yMin],[n.xMin+n.width,n.yMin+n.height],[n.xMin,n.yMin+n.height]].forEach((function(t){var e=y0(r,t),n=e[0],c=e[1];i=Math.min(i,n),a=Math.max(a,n),o=Math.min(o,c),s=Math.max(s,c)})),e.relativeBoundingBox={xMin:i,xMax:a,yMin:o,yMax:s,width:a-i,height:s-o}})),t}(h,o),CG([n,i,a,l,c]),[2,d]}}))}))},t.prototype.estimateFaces=function(t,e){return a0(this,void 0,void 0,(function(){var n,r;return s0(this,(function(i){return n=d0(t),r=!!e&&e.flipHorizontal,[2,this.detectFaces(t,r).then((function(t){return t.map((function(t){for(var e=t.locationData.relativeKeypoints.map((function(t,e){return o0(o0({},t),{x:t.x*n.width,y:t.y*n.height,name:c0[e]})})),r=t.locationData.relativeBoundingBox,i=0,o=["width","xMax","xMin"];i<o.length;i++)r[o[i]]*=n.width;for(var a=0,s=["height","yMax","yMin"];a<s.length;a++)r[s[a]]*=n.height;return{keypoints:e,box:r}}))}))]}))}))},t}();function P0(t){return a0(this,void 0,void 0,(function(){var e,n,r;return s0(this,(function(i){switch(i.label){case 0:return e=function(t){if(null==t)return o0({},E0);var e=o0({},t);return null==e.modelType&&(e.modelType=E0.modelType),null==e.maxFaces&&(e.maxFaces=E0.maxFaces),null==e.detectorModelUrl&&("full"===e.modelType?e.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/full/1":e.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"),e}(t),n="string"==typeof e.detectorModelUrl&&e.detectorModelUrl.indexOf("https://tfhub.dev")>-1,[4,WQ(e.detectorModelUrl,{fromTFHub:n})];case 1:return r=i.sent(),[2,new k0(e.modelType,r,e.maxFaces)]}}))}))}function I0(t,e){return a0(this,void 0,void 0,(function(){var n,r;return s0(this,(function(i){if(t===w0.MediaPipeFaceDetector){if(r=void 0,null!=(n=e)){if("tfjs"===n.runtime)return[2,P0(n)];if("mediapipe"===n.runtime)return[2,h0(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r)}throw new Error(t+" is not a supported model name.")}))}))}function N0(t){return t.width*t.height}function R0(t){var e=t.xCenter-t.width/2,n=e+t.width,r=t.yCenter-t.height/2;return{xMin:e,xMax:n,yMin:r,yMax:r+t.height,width:t.width,height:t.height}}function D0(t){return t instanceof GV?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function L0(t){return t-2*Math.PI*Math.floor((t+Math.PI)/(2*Math.PI))}function F0(t){return t instanceof GV?t:RH(t)}function j0(t,e){kj(0!==t.width,(function(){return e+" width cannot be 0."})),kj(0!==t.height,(function(){return e+" height cannot be 0."}))}function U0(t,e,n){var r=e.outputTensorSize,i=e.keepAspectRatio,o=e.borderMode,a=e.outputTensorFloatRange,s=D0(t),c=function(t,e){return e?{xCenter:e.xCenter*t.width,yCenter:e.yCenter*t.height,width:e.width*t.width,height:e.height*t.height,rotation:e.rotation}:{xCenter:.5*t.width,yCenter:.5*t.height,width:t.width,height:t.height,rotation:0}}(s,n),l=function(t,e,n){if(void 0===n&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var r=e.height,i=e.width;j0(e,"targetSize"),j0(t,"roi");var o,a,s=r/i,c=t.height/t.width,l=0,u=0;return s>c?(o=t.width,a=t.width*s,u=(1-c/s)/2):(o=t.height/s,a=t.height,l=(1-s/c)/2),t.width=o,t.height=a,{top:u,left:l,right:l,bottom:u}}(c,r,i),u=function(t,e,n,r){var i=t.width,o=t.height,a=r?-1:1,s=Math.cos(t.rotation),c=Math.sin(t.rotation),l=t.xCenter,u=t.yCenter,h=1/e,d=1/n,p=new Array(16);return p[0]=i*s*a*h,p[1]=-o*c*h,p[2]=0,p[3]=(-.5*i*s*a+.5*o*c+l)*h,p[4]=i*c*a*d,p[5]=o*s*d,p[6]=0,p[7]=(-.5*o*s-.5*i*c*a+u)*d,p[8]=0,p[9]=0,p[10]=i*h,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,function(t){if(16!==t.length)throw new Error("Array length must be 16 but got "+t.length);return[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}(p)}(c,s.width,s.height,!1),h=OG((function(){var e=F0(t),n=NK(function(t,e,n){return j0(n,"inputResolution"),[1/n.width*t[0][0]*e.width,1/n.height*t[0][1]*e.width,t[0][3]*e.width,1/n.width*t[1][0]*e.height,1/n.height*t[1][1]*e.height,t[1][3]*e.height,0,0]}(u,s,r),[1,8]),i="zero"===o?"constant":"nearest",c=pJ.transform(LX(RW(e,"float32")),n,"bilinear",i,0,[r.height,r.width]);return null!=a?function(t,e){var n=function(t,e,n,r){var i=(r-n)/255;return{scale:i,offset:n-0*i}}(0,0,e[0],e[1]);return OG((function(){return FW(BW(t,n.scale),n.offset)}))}(c,a):c}));return{imageTensor:h,padding:l,transformationMatrix:u}}function B0(t){return{xCenter:t.xMin+t.width/2,yCenter:t.yMin+t.height/2,width:t.width,height:t.height}}function z0(t){var e=t.relativeKeypoints;if(e.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,o=Number.MIN_VALUE;return e.forEach((function(t){n=Math.min(n,t.x),i=Math.max(i,t.x),r=Math.min(r,t.y),o=Math.max(o,t.y)})),{xCenter:(n+i)/2,yCenter:(r+o)/2,width:i-n,height:o-r}}function V0(t,e,n,r,i){var o="rect"===n?function(t,e,n){var r,i=t.locationData;if("boundingbox"===e)r=B0(i.boundingBox);else{r=z0(i);var o=n.width,a=n.height;r.xCenter=Math.round(r.xCenter*o),r.yCenter=Math.round(r.yCenter*a),r.width=Math.round(r.width*o),r.height=Math.round(r.height*a)}return r}(t,e,r):function(t,e){var n=t.locationData;return"boundingbox"===e?B0(n.relativeBoundingBox):z0(n)}(t,e);return i&&(o.rotation=function(t,e,n){var r,i=t.locationData,o=n.rotationVectorStartKeypointIndex,a=n.rotationVectorEndKeypointIndex;r=n.rotationVectorTargetAngle?n.rotationVectorTargetAngle:Math.PI*n.rotationVectorTargetAngleDegree/180;var s=i.relativeKeypoints[o].x*e.width,c=i.relativeKeypoints[o].y*e.height,l=i.relativeKeypoints[a].x*e.width,u=i.relativeKeypoints[a].y*e.height;return L0(r-Math.atan2(-(u-c),l-s))}(t,r,i)),o}function G0(t,e,n){for(var r=0;r<e.length;++r){var i=e[r],o=n[t[r]];o.x=i.x,o.y=i.y}}function W0(t,e,n,r){if("string"==typeof e){if("copy"===e)for(var i=0;i<n.length;++i)r[t[i]].z=n[i].z}else{var o=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[e[r]].z;return n/e.length}(r,e);for(i=0;i<t.length;++i)r[t[i]].z=o}}function H0(t,e){for(var n=function(t){var e=[].concat.apply([],t.map((function(t){return t.indexesMapping})));if(0===e.length)throw new Error("There should be at least one landmark in indexes mapping");var n=e[0],r=e[0],i=new Set(e);i.forEach((function(t){n=Math.min(n,t),r=Math.max(r,t)}));var o=i.size;if(0!==n)throw new Error("Indexes are expected to start with 0 instead of "+n);if(r+1!==o)throw new Error("Indexes should have no gaps but "+(r-o+1)+" indexes are missing");return o}(e),r=new Array(n).fill(null).map(Object),i=0;i<t.length;++i){var o=t[i],a=e[i];if(o.length!==a.indexesMapping.length)throw new Error("There are "+o.length+" refinement landmarks while mapping has "+a.indexesMapping.length);G0(a.indexesMapping,o,r),W0(a.indexesMapping,a.zRefinement,o,r)}return r}function q0(t,e){return t.map((function(t){var n=HQ(HQ({},t),{x:t.x*e.width,y:t.y*e.height});return null!=t.z&&(n.z=t.z*e.width),n}))}function X0(t,e){return"none"===t?e:function(t){return 1/(1+Math.exp(-t))}(e)}function Y0(t,e,n,r){return qQ(this,void 0,void 0,(function(){var i,o,a,s,c,l,u,h;return XQ(this,(function(d){switch(d.label){case 0:return n=n||e.flipHorizontally||!1,r=r||e.flipVertically||!1,i=t.size,o=i/e.numLandmarks,[4,t.data()];case 1:for(a=d.sent(),s=[],c=0;c<e.numLandmarks;++c)l=c*o,(h={x:0,y:0}).x=n?e.inputImageWidth-a[l]:a[l],o>1&&(h.y=r?e.inputImageHeight-a[l+1]:a[l+1]),o>2&&(h.z=a[l+2]),o>3&&(h.score=X0(e.visibilityActivation,a[l+3])),s.push(h);for(u=0;u<s.length;++u)(h=s[u]).x=h.x/e.inputImageWidth,h.y=h.y/e.inputImageHeight,h.z=h.z/e.inputImageWidth/(e.normalizeZ||1);return[2,s]}}))}))}function K0(t,e,n){var r=t.width,i=t.height,o=t.rotation;if(null==n.rotation&&null==n.rotationDegree||(o=function(t,e){return null!=e.rotation?t+=e.rotation:null!=e.rotationDegree&&(t+=Math.PI*e.rotationDegree/180),L0(t)}(o,n)),0===o)t.xCenter=t.xCenter+r*n.shiftX,t.yCenter=t.yCenter+i*n.shiftY;else{var a=(e.width*r*n.shiftX*Math.cos(o)-e.height*i*n.shiftY*Math.sin(o))/e.width,s=(e.width*r*n.shiftX*Math.sin(o)+e.height*i*n.shiftY*Math.cos(o))/e.height;t.xCenter=t.xCenter+a,t.yCenter=t.yCenter+s}if(n.squareLong){var c=Math.max(r*e.width,i*e.height);r=c/e.width,i=c/e.height}else if(n.squareShort){var l=Math.min(r*e.width,i*e.height);r=l/e.width,i=l/e.height}return t.width=r*n.scaleX,t.height=i*n.scaleY,t}(w0||(w0={})).MediaPipeFaceDetector="MediaPipeFaceDetector";var Z0,J0={runtime:"tfjs",maxFaces:1,refineLandmarks:!1,landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"},$0={flipHorizontal:!1,staticImageMode:!1},Q0={shiftX:0,shiftY:0,scaleX:1.5,scaleY:1.5,squareLong:!0},t1={outputTensorSize:{width:192,height:192},outputTensorFloatRange:[0,1],borderMode:"replicate"},e1={numLandmarks:468,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},n1={numLandmarks:80,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},r1={numLandmarks:71,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},i1={numLandmarks:5,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},o1={indexesMapping:Array.from(Array(468).keys()),zRefinement:"copy"},a1={indexesMapping:[61,146,91,181,84,17,314,405,321,375,291,185,40,39,37,0,267,269,270,409,78,95,88,178,87,14,317,402,318,324,308,191,80,81,82,13,312,311,310,415,76,77,90,180,85,16,315,404,320,307,306,184,74,73,72,11,302,303,304,408,62,96,89,179,86,15,316,403,319,325,292,183,42,41,38,12,268,271,272,407],zRefinement:"none"},s1={indexesMapping:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173,130,25,110,24,23,22,26,112,243,247,30,29,27,28,56,190,226,31,228,229,230,231,232,233,244,113,225,224,223,222,221,189,35,124,46,53,52,65,143,111,117,118,119,120,121,128,245,156,70,63,105,66,107,55,193],zRefinement:"none"},c1={indexesMapping:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398,359,255,339,254,253,252,256,341,463,467,260,259,257,258,286,414,446,261,448,449,450,451,452,453,464,342,445,444,443,442,441,413,265,353,276,283,282,295,372,340,346,347,348,349,350,357,465,383,300,293,334,296,336,285,417],zRefinement:"none"},l1={indexesMapping:[468,469,470,471,472],zRefinement:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173]},u1={indexesMapping:[473,474,475,476,477],zRefinement:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398]},h1=function(){function t(t,e,n,r){this.detector=t,this.landmarkModel=e,this.maxFaces=n,this.withAttention=r,this.prevFaceRectsFromLandmarks=null}return t.prototype.estimateFaces=function(t,e){return qQ(this,void 0,void 0,(function(){var n,r,i,o,a,s,c,l,u,h,d,p,f,m=this;return XQ(this,(function(g){switch(g.label){case 0:return n=function(t){if(null==t)return HQ({},$0);var e=HQ({},t);return null==e.flipHorizontal&&(e.flipHorizontal=$0.flipHorizontal),null==e.staticImageMode&&(e.staticImageMode=$0.staticImageMode),e}(e),null==t?(this.reset(),[2,[]]):(r=D0(t),i=OG((function(){var e=RW(F0(t),"float32");return n.flipHorizontal&&(e=MK(pJ.flipLeftRight(LX(e,0)),[0])),e})),o=this.prevFaceRectsFromLandmarks,n.staticImageMode||null==o||o.length<this.maxFaces?[4,this.detector.detectFaces(i,!1)]:[3,2]);case 1:return 0===(s=g.sent()).length?(this.reset(),i.dispose(),[2,[]]):(a=s.map((function(t){return m.faceDetectionFrontDetectionToRoi(t,r)})),[3,3]);case 2:a=[],g.label=3;case 3:return y=[],[a,o||[]].forEach((function(t){return t.forEach((function(t){(y=y.filter((function(e){return function(t,e){var n=R0(t),r=R0(e);if(!function(t,e){return!(t.xMax<e.xMin||e.xMax<t.xMin||t.yMax<e.yMin||e.yMax<t.yMin)}(n,r))return 0;var i=N0(function(t,e){var n=Math.max(t.xMin,e.xMin),r=Math.min(t.xMax,e.xMax),i=Math.max(t.yMin,e.yMin),o=Math.min(t.yMax,e.yMax);return{xMin:n,xMax:r,yMin:i,yMax:o,width:Math.max(r-n,0),height:Math.max(o-i,0)}}(n,r)),o=N0(n)+N0(r)-i;return o>0?i/o:0}(t,e)<=.5}))).push(t)}))})),c=y,[4,Promise.all(c.map((function(t){return m.faceLandmark(t,i)})))];case 4:for(l=g.sent(),u=[],this.prevFaceRectsFromLandmarks=[],h=0;h<l.length;++h)null!=(d=l[h])&&(this.prevFaceRectsFromLandmarks.push(this.faceLandmarksToRoi(d,r)),null!=(p=q0(d,r))&&p.forEach((function(t,e){var n=$Q.get(e);null!=n&&(t.name=n)})),f=QQ(p),u.push({keypoints:p,box:f.locationData.relativeBoundingBox}));return i.dispose(),[2,u]}var y}))}))},t.prototype.dispose=function(){this.detector.dispose(),this.landmarkModel.dispose()},t.prototype.reset=function(){this.detector.reset(),this.prevFaceRectsFromLandmarks=null},t.prototype.faceDetectionFrontDetectionToRoi=function(t,e){return K0(V0(t,"boundingbox","normRect",e,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:1,rotationVectorTargetAngleDegree:0}),e,Q0)},t.prototype.faceLandmark=function(t,e){return qQ(this,void 0,void 0,(function(){var n,r,i,o,a,s,c;return XQ(this,(function(l){switch(l.label){case 0:return n=U0(e,t1,t).imageTensor,r=["output_faceflag"].concat(this.withAttention?["output_mesh_identity","output_lips","Identity_6:0","Identity_1:0","Identity_2:0","Identity_5:0"]:["output_mesh"]),i=this.landmarkModel.execute(n,r),o=i[0],a=i.slice(1),[4,o.data()];case 1:return l.sent()[0]<.5?(CG(i),CG(n),[2,null]):this.withAttention?[4,this.tensorsToFaceLandmarksWithAttention(a)]:[3,3];case 2:return s=l.sent(),[3,5];case 3:return[4,this.tensorsToFaceLandmarks(a)];case 4:s=l.sent(),l.label=5;case 5:return c=function(t,e,n){void 0===n&&(n={ignoreRotation:!1});for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i],s=a.x-.5,c=a.y-.5,l=n.ignoreRotation?0:e.rotation,u=Math.cos(l)*s-Math.sin(l)*c,h=Math.sin(l)*s+Math.cos(l)*c;u=u*e.width+e.xCenter,h=h*e.height+e.yCenter;var d=a.z*e.width,p=HQ({},a);p.x=u,p.y=h,p.z=d,r.push(p)}return r}(s,t),CG(i),CG(n),[2,c]}}))}))},t.prototype.tensorsToFaceLandmarks=function(t){return qQ(this,void 0,void 0,(function(){return XQ(this,(function(e){return[2,Y0(t[0],e1)]}))}))},t.prototype.tensorsToFaceLandmarksWithAttention=function(t){return qQ(this,void 0,void 0,(function(){var e,n,r,i,o,a;return XQ(this,(function(s){switch(s.label){case 0:return[4,Y0(t[0],e1)];case 1:return e=s.sent(),[4,Y0(t[1],n1)];case 2:return n=s.sent(),[4,Y0(t[3],r1)];case 3:return r=s.sent(),[4,Y0(t[5],r1)];case 4:return i=s.sent(),[4,Y0(t[4],i1)];case 5:return o=s.sent(),[4,Y0(t[2],i1)];case 6:return a=s.sent(),[2,H0([e,n,r,i,o,a],[o1,a1,s1,c1,l1,u1])]}}))}))},t.prototype.faceLandmarksToRoi=function(t,e){return K0(V0(QQ(t),"boundingbox","normRect",e,{rotationVectorStartKeypointIndex:33,rotationVectorEndKeypointIndex:263,rotationVectorTargetAngleDegree:0}),e,Q0)},t}();function d1(t){return qQ(this,void 0,void 0,(function(){var e,n,r,i;return XQ(this,(function(o){switch(o.label){case 0:return e=function(t){if(null==t)return HQ({},J0);var e=HQ({},t);return e.runtime="tfjs",null==e.maxFaces&&(e.maxFaces=J0.maxFaces),null==e.refineLandmarks&&(e.refineLandmarks=J0.refineLandmarks),null==e.landmarkModelUrl&&(e.landmarkModelUrl=e.refineLandmarks?"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/attention_mesh/1":"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"),e}(t),n="string"==typeof e.landmarkModelUrl&&e.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,WQ(e.landmarkModelUrl,{fromTFHub:n})];case 1:return r=o.sent(),[4,I0(w0.MediaPipeFaceDetector,{modelType:"short",maxFaces:e.maxFaces,detectorModelUrl:e.detectorModelUrl,runtime:e.runtime})];case 2:return i=o.sent(),[2,new h1(i,r,e.maxFaces,e.refineLandmarks)]}}))}))}(Z0||(Z0={})).MediaPipeFaceMesh="MediaPipeFaceMesh";Object.freeze({__proto__:null,getKeypointIndexByContour:function(t){if(t===Z0.MediaPipeFaceMesh)return KQ;throw new Error("Model "+t+" is not supported.")},getAdjacentPairs:function(t){if(t===Z0.MediaPipeFaceMesh)return ZQ;throw new Error("Model "+t+" is not supported.")}});const p1={},f1={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function m1(t,e){if(!(t in p1)||null!=e){const n=function(t,e){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==e?function(t){if(sU().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==t){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(t):e;n.addEventListener("webglcontextlost",(e=>{e.preventDefault(),delete p1[t]}),!1),sU().getBool("SOFTWARE_WEBGL_ENABLED")&&(f1.failIfMajorPerformanceCaveat=!1);if(1===t)return n.getContext("webgl",f1)||n.getContext("experimental-webgl",f1);return n.getContext("webgl2",f1)}(t,e);if(null===n)return console.log("Could not get context for WebGL version",t),null;p1[t]=n}const n=p1[t];return null==n||n.isContextLost()?(delete p1[t],m1(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),p1[t])}var g1,y1,v1;function b1(t,e){return[e,t]}function x1(t){const e=Nj(t);return Lj(Math.ceil(e/4))}function _1(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function w1(t,e){const n=t;let r,i,o,a,s,c,l,u,h,d;return 2===sU().getNumber("WEBGL_VERSION")?(r=n.R32F,i=n.R16F,o=n.RGBA16F,a=n.RGBA32F,s=n.RED,l=4,u=1,h=n.HALF_FLOAT,d=n.FLOAT,c=n.RGBA8):(r=t.RGBA,i=t.RGBA,o=t.RGBA,a=n.RGBA,s=t.RGBA,l=4,u=4,h=null!=e?e.HALF_FLOAT_OES:null,d=t.FLOAT,c=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:s,downloadTextureFormat:c,downloadUnpackNumChannels:l,defaultNumChannels:u,textureTypeHalfFloat:h,textureTypeFloat:d}}function S1(t,e){const n=e();return sU().getBool("DEBUG")&&function(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+function(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(e)}}(t,e))}(t),n}!function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"}(g1||(g1={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(y1||(y1={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(v1||(v1={}));function T1(t){return!!(sU().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||5.96e-8<Math.abs(t)&&Math.abs(t)<65504)}function E1(t,e){return R1(t,(()=>t.getExtension(e)),'Extension "'+e+'" not supported on this browser.')}const A1=/ERROR: [0-9]+:([0-9]+):/g;function M1(t,e){const n=A1.exec(e);if(null==n)return console.log("Couldn't parse line number in error: ".concat(e)),void console.log(t);const r=+n[1],i=t.split("\n"),o=i.length.toString().length+2,a=i.map(((t,e)=>Fj((e+1).toString(),o)+t));let s=0;for(let h=0;h<a.length;h++)s=Math.max(a[h].length,s);const c=a.slice(0,r-1),l=a.slice(r-1,r),u=a.slice(r);console.log(c.join("\n")),console.log(e.split("\n")[0]),console.log("%c ".concat(Fj(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function O1(t,e){if(S1(t,(()=>t.validateProgram(e))),!1===t.getProgramParameter(e,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function C1(t,e,n,r,i,o,a){const s=t.getAttribLocation(e,n);return-1!==s&&(S1(t,(()=>t.bindBuffer(t.ARRAY_BUFFER,r))),S1(t,(()=>t.vertexAttribPointer(s,i,t.FLOAT,!1,o,a))),S1(t,(()=>t.enableVertexAttribArray(s))),!0)}function k1(t,e,n,r){S1(t,(()=>function(t,e,n){D1(t,n),S1(t,(()=>t.activeTexture(t.TEXTURE0+n))),S1(t,(()=>t.bindTexture(t.TEXTURE_2D,e)))}(t,e,r))),S1(t,(()=>t.uniform1i(n,r)))}function P1(t,e,n){S1(t,(()=>t.bindFramebuffer(t.FRAMEBUFFER,n))),S1(t,(()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)))}function I1(t,e){S1(t,(()=>t.bindFramebuffer(t.FRAMEBUFFER,e))),S1(t,(()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)))}function N1(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(e)}}(t,e))}function R1(t,e,n){const r=S1(t,(()=>e()));if(null==r)throw new Error(n);return r}function D1(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const t="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(t,"."))}}function L1(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Nj(t.slice(0,t.length-e))}function F1(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function j1(t){let e=[1,1,1];return 0===t.length||1===t.length&&1===t[0]||(e=[L1(t),...F1(t)]),e}function U1(t){return t%2===0}function B1(t,e){if(Rj(t=t.slice(-2),e=e.slice(-2)))return!0;if(!t.length||!e.length)return!0;if(0===t[0]||0===t[1]||0===e[0]||0===e[1])return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r)return!0;if(U1(n)&&U1(r)&&(1===t[0]||1===e[0]))return!0}return t[1]===e[1]&&U1(t[0])&&U1(e[0])}let z1,V1;function G1(t,e){return null!=t.getExtension(e)}function W1(t){try{if(null!=m1(t))return!0}catch(sCt){return console.log("Error when getting WebGL context: ",sCt),!1}return!1}function H1(t){if(0===t)return!1;const e=m1(t);if(1!==t){if(G1(e,"EXT_color_buffer_float"))return q1(e);const t="EXT_color_buffer_half_float";if(G1(e,t)){const n=e.getExtension(t);return function(t,e){const n=w1(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const i=1,o=1;t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,i,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(a),s}(e,n)}return!1}if(!G1(e,"OES_texture_float"))return!1;if(!G1(e,"WEBGL_color_buffer_float"))return!1;return q1(e)}function q1(t){const e=w1(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),i}function X1(t,e){Array.isArray(t)||(t=[t]),t.forEach((t=>{null!=t&&kj("complex64"!==t.dtype,(()=>"".concat(e," does not support complex64 tensors ")+"in the WebGL backend."))}))}const Y1=sU();function K1(){let t,e,n,r,i,o,a,s,c,l;return 2===sU().getNumber("WEBGL_VERSION")?(t="#version 300 es",e="in",n="out",r="in",i="texture",o="outputColor",a="out vec4 outputColor;",s=sU().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",c="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",e="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",a="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",c="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:c,defineRound:l}}function Z1(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=Kj(e);return r.map(((e,i)=>{const o="int ".concat(t[i]," = ").concat(n," / ").concat(e),a=i===r.length-1?"int ".concat(t[i+1]," = ").concat(n," - ").concat(t[i]," * ").concat(e):"index -= ".concat(t[i]," * ").concat(e);return"".concat(o,"; ").concat(a,";")})).join("")}function J1(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=Kj(e);return r.map(((e,i)=>{const o="int ".concat(t[i]," = ").concat(n," / outShapeStrides[").concat(i,"]"),a=i===r.length-1?"int ".concat(t[i+1]," = ").concat(n," - ").concat(t[i]," * outShapeStrides[").concat(i,"]"):"index -= ".concat(t[i]," * outShapeStrides[").concat(i,"]");return"".concat(o,"; ").concat(a,";")})).join("")}function $1(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=t.map(((t,e)=>e)),i=function(t,e){const n=t.length,r=t.map((t=>"".concat(e,"[").concat(t,"]"))),i=new Array(n-1);i[n-2]=r[n-1];for(let o=n-3;o>=0;--o)i[o]="(".concat(i[o+1]," * ").concat(r[o+1],")");return i}(r,e);return i.map(((e,r)=>{const o="int ".concat(t[r]," = ").concat(n," / ").concat(i[r]),a=r===i.length-1?"int ".concat(t[r+1]," = ").concat(n," - ").concat(t[r]," * ").concat(i[r]):"index -= ".concat(t[r]," * ").concat(i[r]);return"".concat(o,"; ").concat(a,";")})).join("")}function Q1(t){const e=Kj(t).map((t=>t.toString()));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(e[0]," + coords.y * ").concat(e[1]," + coords.z;\n  }\n")}Y1.registerFlag("HAS_WEBGL",(()=>Y1.getNumber("WEBGL_VERSION")>0)),Y1.registerFlag("WEBGL_VERSION",(()=>W1(2)?2:W1(1)?1:0)),Y1.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),Y1.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===Y1.get("WEBGL_VERSION"))),Y1.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),Y1.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),Y1.registerFlag("WEBGL_PACK",(()=>Y1.getBool("HAS_WEBGL"))),Y1.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>Y1.getBool("WEBGL_PACK"))),Y1.registerFlag("WEBGL_PACK_CLIP",(()=>Y1.getBool("WEBGL_PACK"))),Y1.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>Y1.getBool("WEBGL_PACK"))),Y1.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>Y1.getBool("WEBGL_PACK"))),Y1.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>Y1.getBool("WEBGL_PACK"))),Y1.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>Y1.getBool("WEBGL_PACK"))),Y1.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>Y1.getBool("WEBGL_PACK"))),Y1.registerFlag("WEBGL_PACK_REDUCE",(()=>Y1.getBool("WEBGL_PACK"))),Y1.registerFlag("WEBGL_LAZILY_UNPACK",(()=>Y1.getBool("WEBGL_PACK"))),Y1.registerFlag("WEBGL_CONV_IM2COL",(()=>Y1.getBool("WEBGL_PACK"))),Y1.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",(()=>Y1.getBool("WEBGL_PACK"))),Y1.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(t){if(null==z1){const e=m1(t);z1=e.getParameter(e.MAX_TEXTURE_SIZE)}return z1}(Y1.getNumber("WEBGL_VERSION")))),Y1.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(t){if(null==V1){const e=m1(t);V1=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,V1)}(Y1.getNumber("WEBGL_VERSION")))),Y1.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const t=Y1.getNumber("WEBGL_VERSION");return 0===t?0:function(t){if(0===t)return 0;let e;const n=m1(t);return e=G1(n,"EXT_disjoint_timer_query_webgl2")&&2===t?2:G1(n,"EXT_disjoint_timer_query")?1:0,e}(t)})),Y1.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>Y1.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!dG())),Y1.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(t){if(0===t)return!1;const e=m1(t);if(1===t){if(!G1(e,"OES_texture_float"))return!1}else if(!G1(e,"EXT_color_buffer_float"))return!1;return q1(e)}(Y1.getNumber("WEBGL_VERSION")))),Y1.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!Y1.getBool("WEBGL_FORCE_F16_TEXTURES")&&Y1.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),Y1.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>H1(Y1.getNumber("WEBGL_VERSION")))),Y1.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(t=Y1.getNumber("WEBGL_VERSION"))&&null!=m1(t).fenceSync;var t})),Y1.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>Y1.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),Y1.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(t=>{if("number"!==typeof t)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but "+"got ".concat(t,"."));if(t<0&&-1!==t)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(t,"."))})),Y1.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>dG()?1:-1),(t=>{if("number"!==typeof t)throw new Error("WEBGL_FLUSH_THRESHOLD must be a number but got "+"".concat(t,"."));if(t<0&&-1!==t)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(t,"."))})),Y1.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),Y1.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),Y1.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),Y1.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128)),Y1.registerFlag("WEBGL_EXP_CONV",(()=>!1)),Y1.registerFlag("SOFTWARE_WEBGL_ENABLED",(()=>Y1.getBool("IS_TEST"))),Y1.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(()=>1/0)),Y1.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(()=>!1)),Y1.registerFlag("WEBGL2_ISNAN_CUSTOM",(()=>!1)),Y1.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1));const t2="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:e2}=a;function n2(t,e,n){const r=[];if(t.forEach((t=>{const e=Nj(t.shapeInfo.logicalShape);if(t.shapeInfo.isUniform?r.push("uniform float ".concat(t.name).concat(e>1?"[".concat(e,"]"):"",";")):(r.push("uniform sampler2D ".concat(t.name,";")),r.push("uniform int offset".concat(t.name,";"))),n.enableShapeUniforms){const{uniformShape:e}=d2(n.packedInputs,t.shapeInfo.logicalShape,t.shapeInfo.texShape);switch(e.length){case 1:r.push("uniform int ".concat(t.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(t.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(t.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(t.name,"Shape;"))}r.push("uniform ivec2 ".concat(t.name,"TexShape;"))}})),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((t=>{r.push("uniform ".concat(t.type," ").concat(t.name).concat(t.arrayIndex?"[".concat(t.arrayIndex,"]"):"",";"))}));const i=r.join("\n"),o=t.map((t=>function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i="";i+=n?i2(t,r):r2(t,r);const o=t.shapeInfo.logicalShape,a=e.logicalShape;o.length<=a.length&&(i+=n?function(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=t.shapeInfo.logicalShape.length,a=e.logicalShape.length,s=e2(t.shapeInfo.logicalShape,e.logicalShape),c=h2(a),l=a-o;let u;const h=["x","y","z","w","u","v"];u=0===o?"":a<2&&s.length>=1?"coords = 0;":s.map((t=>"coords.".concat(h[t+l]," = 0;"))).join("\n");let d="";d=a<2&&o>0?"coords":t.shapeInfo.logicalShape.map(((t,e)=>"coords.".concat(h[e+l]))).join(", ");let p="return outputValue;";const f=1===Nj(t.shapeInfo.logicalShape),m=Nj(e.logicalShape),g=1===m;if(1!==o||f||g){if(f&&!g)p=1===a?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){const t=o-2,e=o-1;s.indexOf(t)>-1&&s.indexOf(e)>-1?p="return vec4(outputValue.x);":s.indexOf(t)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(e)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(u,"\n      vec4 outputValue = get").concat(r,"(").concat(d,");\n      ").concat(p,"\n    }\n  ")}(t,e):function(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=e.texShape,a=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,c=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===c&&null==t.shapeInfo.flatOffset&&Rj(a,o))return"\n      float ".concat(i,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");const l=h2(c),u=e2(t.shapeInfo.logicalShape,e.logicalShape),h=c-s;let d;const p=["x","y","z","w","u","v"];d=0===s?"":c<2&&u.length>=1?"coords = 0;":u.map((t=>"coords.".concat(p[t+h]," = 0;"))).join("\n");let f="";f=c<2&&s>0?"coords":t.shapeInfo.logicalShape.map(((t,e)=>"coords.".concat(p[e+h]))).join(", ");return"\n    float ".concat(i,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(d,"\n      return get").concat(r,"(").concat(f,");\n    }\n  ")}(t,e));return i}(t,e,n.packedInputs,n.enableShapeUniforms))).join("\n"),a=e.texShape,s=K1(),c=function(t){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(t.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(s);let l,u,h=function(t){const e="".concat(t.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(t.varyingFs," vec2 resultUV;\n    ").concat(t.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(t.defineSpecialNaN,"\n    ").concat(t.defineSpecialInf,"\n    ").concat(t.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(o2,"\n    ").concat(a2,"\n    ").concat(s2,"\n  ");return e}(s);e.isPacked?(l=function(t,e,n){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,e,n);case 2:return function(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Rj(t,e))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");const i=Math.ceil(t[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(i,");\n      int c = imod(index, ").concat(i,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(t,e,n);case 3:return function(t,e,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[2]/2),o=i*Math.ceil(t[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(i,");\n      int c = imod(index, ").concat(i,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(t,e,n);default:return function(t,e,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[t.length-1]/2),o=i*Math.ceil(t[t.length-2]/2);let a=o,s="",c="b, r, c";for(let l=2;l<t.length-1;l++)a*=t[t.length-l-1],s="\n      int b".concat(l," = index / ").concat(a,";\n      index -= b").concat(l," * ").concat(a,";\n    ")+s,c="b".concat(l,", ")+c;return"\n    ivec".concat(t.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(i,");\n      int c = imod(index, ").concat(i,") * 2;\n\n      return ivec").concat(t.length,"(").concat(c,");\n    }\n  ")}(t,e,n)}}(e.logicalShape,a,n.enableShapeUniforms),u=function(t){return"\n    void setOutput(vec4 val) {\n      ".concat(t.output," = val;\n    }\n  ")}(s)):(l=function(t,e,n){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e,n){if(1===e[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(e[1],".0);\n      }\n    ");if(1===e[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(e[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(e[0],", ").concat(e[1],"));\n      return resTexRC.x * ").concat(e[1]," + resTexRC.y;\n    }\n  ")}(0,e,n);case 2:return function(t,e,n){if(Rj(t,e))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(e[0],", ").concat(e[1],"));\n      }\n    ");if(1===t[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(e[0],", ").concat(e[1],"));\n        int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===t[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(e[0],", ").concat(e[1],"));\n        int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(e[0],", ").concat(e[1],"));\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n      int r = index / ").concat(t[1],";\n      int c = index - r * ").concat(t[1],";\n      return ivec2(r, c);\n    }\n  ")}(t,e,n);case 3:return function(t,e,n){if(n){const e=J1(["r","c","d"],t);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(e,"\n    return ivec3(r, c, d);\n  }\n")}const r=Z1(["r","c","d"],t);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(e[0],", ").concat(e[1],"));\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}(t,e,n);case 4:return function(t,e,n){if(n){const e=J1(["r","c","d","d2"],t);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(e,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}const r=Z1(["r","c","d","d2"],t);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(e[0],", ").concat(e[1],"));\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(t,e,n);case 5:return function(t,e){const n=Z1(["r","c","d","d2","d3"],t);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(e[0],",\n                             ").concat(e[1],"));\n\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(t,e);case 6:return function(t,e){const n=Z1(["r","c","d","d2","d3","d4"],t);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(e[0],", ").concat(e[1],"));\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(t,e);default:throw new Error("".concat(t.length,"-D output sampling is not yet supported"))}}(e.logicalShape,a,n.enableShapeUniforms),u=function(t){return"\n    void setOutput(float val) {\n      ".concat(t.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(s)),n.packedInputs&&(h+=c2);return[h,c,u,i,l,o,n.userCode].join("\n")}function r2(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return function(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");const[i,o]=t.shapeInfo.texShape;if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const a=l2(n);if(e)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(a,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");const[s,c]=t.shapeInfo.texShape;return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(s,", ").concat(c,", ").concat(a,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(t,e);case 1:return function(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(u2(t),"\n      }\n    ");const i=t.shapeInfo.texShape,o=i[0],a=i[1];if(1===a&&1===o)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const s=l2(n);if(1===a)return e?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(o,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===o)return e?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(a,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(e)return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(a,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(t,e);case 2:return function(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape;if(null!=o&&Rj(n,o)){if(e)return"\n      float ".concat(i,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");const t=o[0],n=o[1];return"\n    float ".concat(i,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(n,".0, ").concat(t,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}const{newShape:a,keptDims:s}=Bj(n),c=a;if(c.length<n.length){const n=p2(t,c),r=["row","col"];return"\n      ".concat(r2(n,e),"\n      float ").concat(i,"(int row, int col) {\n        return ").concat(i,"(").concat(f2(r,s),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(u2(t),"\n      }\n    ");const l=o[0],u=o[1],h=l2(r);if(1===u)return e?"\n      float ".concat(i,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(l,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(1===l)return e?"\n      float ".concat(i,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(u,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(e)return"\n      float ".concat(i,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(h,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");return"\n  float ".concat(i,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(h,";\n    vec2 uv = uvFromFlat(").concat(l,", ").concat(u,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(t,e);case 3:return function(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],a=n[2],{newShape:s,keptDims:c}=Bj(n),l=s;if(l.length<n.length){const n=p2(t,l),r=["row","col","depth"];return"\n        ".concat(r2(n,e),"\n        float ").concat(i,"(int row, int col, int depth) {\n          return ").concat(i,"(").concat(f2(r,c),");\n        }\n      ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(o,", ").concat(a,", 1)));\n        ").concat(u2(t),"\n      }\n    ");const u=t.shapeInfo.texShape,h=u[0],d=u[1],p=t.shapeInfo.flatOffset;if(d===o&&null==p)return e?"\n      float ".concat(i,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(i,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(a,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(d,".0, ").concat(h,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(d===a&&null==p)return e?"\n      float ".concat(i,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(d,".0, ").concat(h,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");const f=l2(r);if(e)return"\n    float ".concat(i,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    ");return"\n      float ".concat(i,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o," + col * ").concat(a," + depth + ").concat(f,";\n        vec2 uv = uvFromFlat(").concat(h,", ").concat(d,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(t,e);case 4:return function(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],a=n[2]*o,s=n[1]*a,{newShape:c,keptDims:l}=Bj(n);if(c.length<n.length){const n=p2(t,c),r=["row","col","depth","depth2"];return"\n      ".concat(r2(n,e),"\n      float ").concat(i,"(int row, int col, int depth, int depth2) {\n        return ").concat(i,"(").concat(f2(r,l),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(a,", ").concat(o,", 1)));\n        ").concat(u2(t),"\n      }\n    ");const u=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,d=h[0],p=h[1],f="int stride2 = ".concat(r,"Shape[3];"),m="int stride1 = ".concat(r,"Shape[2] * stride2;"),g="int stride0 = ".concat(r,"Shape[1] * stride1;");if(p===s&&null==u)return e?"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        ").concat(f,"\n        ").concat(m,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(a,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(p===o&&null==u)return e?"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");const y=l2(r);if(e)return"\n    float ".concat(i,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(f,"\n      ").concat(m,"\n      ").concat(g,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(y,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");return"\n    float ".concat(i,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(a," +\n          depth * ").concat(o," + depth2;\n      vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index + ").concat(y,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(t,e);case 5:return function(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],o=e[3]*i,a=e[2]*o,s=e[1]*a,{newShape:c,keptDims:l}=Bj(e);if(c.length<e.length){const e=p2(t,c),n=["row","col","depth","depth2","depth3"];return"\n      ".concat(r2(e),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(f2(n,l),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(a,", ").concat(o,", ").concat(i,")) +\n          depth3;\n        ").concat(u2(t),"\n      }\n    ");const u=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,d=h[0],p=h[1];if(p===s&&null==u)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(a,", ").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(p===i&&null==u)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(e[1]*e[2]*e[3],",\n               ").concat(e[2]*e[3],", ").concat(e[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const f=l2(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(a," + depth * ").concat(o," +\n          depth2 * ").concat(i," + depth3 + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(t);case 6:return function(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:o}=Bj(e);if(i.length<e.length){const e=p2(t,i),n=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(r2(e),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(f2(n,o),");\n      }\n    ")}const a=e[5],s=e[4]*a,c=e[3]*s,l=e[2]*c,u=e[1]*l;if(t.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(u,", ").concat(l,", ").concat(c,", ").concat(s,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(a,", 1)));\n        ").concat(u2(t),"\n      }\n    ");const h=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],f=d[1];if(f===u&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(l,", ").concat(c,", ").concat(s,", ").concat(a,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(f===a&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(e[1]*e[2]*e[3]*e[4],",\n               ").concat(e[2]*e[3]*e[4],",\n               ").concat(e[3]*e[4],",\n               ").concat(e[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const m=l2(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(l," + depth * ").concat(c," +\n          depth2 * ").concat(s," + depth3 * ").concat(a," + depth4 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(f,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(t);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function i2(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return function(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=K1();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(e,", halfCR);\n    }\n  ")}(t);case 1:return function(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,o=K1();if(e)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");const a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(a[0],", ").concat(a[1],", index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(t,e);case 2:return function(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape,a=o[0],s=o[1],c=K1();if(null!=o&&Rj(n,o))return e?"\n      vec4 ".concat(i,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(c.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(i,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(a,".0);\n\n        return ").concat(c.texture2D,"(").concat(r,", uv);\n      }\n    ");if(e)return"\n    vec4 ".concat(i,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ");const l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],u=Math.ceil(n[1]/2);return"\n    vec4 ".concat(i,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(u,", ").concat(l[0],", ").concat(l[1],", row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ")}(t,e);case 3:return function(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){const r=[1,2],o=p2(t,n.slice(1)),a=["b","row","col"];return"\n        ".concat(i2(o,e),"\n        vec4 ").concat(i,"(int b, int row, int col) {\n          return ").concat(i,"(").concat(f2(a,r),");\n        }\n      ")}const s=K1();if(e)return"\n    vec4 ".concat(i,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ");const c=a[0],l=a[1],u=Math.ceil(n[2]/2),h=u*Math.ceil(n[1]/2);return"\n    vec4 ".concat(i,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(c,", ").concat(l,", ").concat(h,", ").concat(u,", b, row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ")}(t,e);default:return function(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=K1();if(e)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");const o=t.shapeInfo.logicalShape,a=o.length,s=t.shapeInfo.texShape,c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=c[0],u=c[1],h=Math.ceil(o[a-1]/2);let d=h*Math.ceil(o[a-2]/2),p="int b, int row, int col",f="b * ".concat(d," + (row / 2) * ").concat(h," + (col / 2)");for(let m=2;m<a-1;m++)p="int b".concat(m,", ")+p,d*=o[a-m-1],f="b".concat(m," * ").concat(d," + ")+f;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(l,");\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(t,e)}}const o2="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",a2="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",s2="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",c2="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function l2(t){return"offset".concat(t)}function u2(t){const e=t.name,n=Nj(t.shapeInfo.logicalShape);return n<2?"return ".concat(e,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(e,"[i];\n      }\n    }\n  ")}function h2(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error("GPU for rank ".concat(t," is not yet supported"))}function d2(t,e,n){const{newShape:r,keptDims:i}=Bj(e),o=e.length,a=t&&3===o&&1===e[0],s=a?e.slice(1):r,c=!t&&o>1&&!Rj(e,n)&&r.length<o||a;return{useSqueezeShape:c,uniformShape:c?s:e,keptDims:i}}function p2(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function f2(t,e){return e.map((e=>t[e])).join(", ")}function m2(t,e,n,r){const i=n.map(((t,n)=>{const r={logicalShape:t.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform,isPacked:!t.isUniform&&t.texData.isPacked,flatOffset:null};return null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0&&(r.flatOffset=t.texData.slice.flatOffset),{name:e.variableNames[n],shapeInfo:r}})),o=i.map((t=>t.shapeInfo)),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=n2(i,a,e),c=function(t,e){const n=R1(t,(()=>t.createShader(t.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(S1(t,(()=>t.shaderSource(n,e))),S1(t,(()=>t.compileShader(n))),sU().get("ENGINE_COMPILE_ONLY"))return n;if(!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw M1(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(t.gl,s),l=t.createProgram(c);return sU().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:c,source:s,webGLProgram:l,inShapeInfos:o,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(l),Object.assign({program:e,fragmentShader:c,source:s,webGLProgram:l,inShapeInfos:o,outShapeInfo:a},g2(t,e,l)))}function g2(t,e,n){const r=[],i=[];let o,a,s,c=null,l=null;l=t.getUniformLocation(n,"NAN",!1),1===sU().getNumber("WEBGL_VERSION")&&(c=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const h of e.variableNames){const i={name:h,uniform:t.getUniformLocation(n,h,u),offset:t.getUniformLocation(n,"offset".concat(h),u)};e.enableShapeUniforms&&(i.shape=t.getUniformLocation(n,"".concat(h,"Shape"),u),i.texShape=t.getUniformLocation(n,"".concat(h,"TexShape"),u)),r.push(i)}if(e.enableShapeUniforms&&(o=t.getUniformLocation(n,"outShape",u),s=t.getUniformLocation(n,"outShapeStrides",u),a=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const h of e.customUniforms)i.push(t.getUniformLocation(n,h.name,u));return{variablesLocations:r,customUniformLocations:i,infLoc:c,nanLoc:l,outShapeLocation:o,outShapeStridesLocation:s,outTexShapeLocation:a}}function y2(t,e){if(t.length!==e.length)throw Error("Binary was compiled with ".concat(t.length," inputs, but ")+"was executed with ".concat(e.length," inputs"));t.forEach(((t,n)=>{const r=t.logicalShape,i=e[n],o=i.shape;if(!Rj(r,o))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(o," must match"));if(t.isUniform&&i.isUniform)return;const a=t.texShape,s=i.isUniform?null:i.texData.texShape;if(!Rj(a,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(a," and ").concat(s," must match"))}))}function v2(t){return sU().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}class b2{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=g1.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const e=K1();this.outputShape=t,this.enableShapeUniforms=v2(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?J1(["r","c","d"],t):Z1(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(e.output," = result;\n      }\n    ")}}class x2{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=g1.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const e=K1();this.outputShape=t,this.enableShapeUniforms=v2(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?J1(["r","c","d"],t):Z1(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(e.output," = result;\n      }\n    ")}}class _2{constructor(t){this.variableNames=["A"],this.outTexUsage=y1.DOWNLOAD;const e=K1();this.outputShape=t,this.userCode="\n      ".concat(t2,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(e.output," = encode_float(x);\n      }\n    ")}}class w2{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=y1.DOWNLOAD;const e=K1();this.outputShape=t,this.userCode="\n      ".concat(t2,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(e.output," = encode_float(x);\n      }\n    ")}}const S2={R:0,G:1,B:2,A:3};class T2{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=K1();this.outputShape=t,this.enableShapeUniforms=v2(this.outputShape.length);let i="result";e&&(i="floor(result * 255. + 0.5)");let o="";for(let a=0;a<n.length;a++){const t=n[a];o+="\n          if(offset == ".concat(a,") {\n            result = values[").concat(S2[t],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Q1(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(n.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(n.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(r.texture2D,"(A, uv);\n          ").concat(o,"\n        }\n        ").concat(r.output," = vec4(").concat(i,", 0., 0., 0.);\n      }\n    ")}}class E2{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=K1();this.outputShape=t,this.enableShapeUniforms=v2(this.outputShape.length);let r="",i="result";e&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let e=0;e<=1;e++){const i=2*o+e;r+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(e," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(e,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(n.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(i,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(i,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(i,"] = values[2];\n            } else {\n              result[").concat(i,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Q1(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(r,"\n\n          ").concat(n.output," = ").concat(i,";\n        }\n    ")}}function A2(t){const e=K1();return function(t,e){const n=R1(t,(()=>t.createShader(t.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(S1(t,(()=>t.shaderSource(n,e))),S1(t,(()=>t.compileShader(n))),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(t,"".concat(e.version,"\n    precision highp float;\n    ").concat(e.attribute," vec3 clipSpacePos;\n    ").concat(e.attribute," vec2 uv;\n    ").concat(e.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function M2(t){return function(t,e){const n=R1(t,(()=>t.createBuffer()),"Unable to create WebGLBuffer");return S1(t,(()=>t.bindBuffer(t.ARRAY_BUFFER,n))),S1(t,(()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW))),n}(t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function O2(t){return function(t,e){const n=R1(t,(()=>t.createBuffer()),"Unable to create WebGLBuffer");return S1(t,(()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n))),S1(t,(()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW))),n}(t,new Uint16Array([0,1,2,2,1,3]))}function C2(t,e,n,r,i,o){!function(t,e){const n=sU().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const n="[".concat(t,"x").concat(e,"]");throw new Error("Requested texture size "+n+" is invalid.")}if(t>n||e>n){const r="[".concat(t,"x").concat(e,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}(e,n);const a=function(t){return R1(t,(()=>t.createTexture()),"Unable to create WebGLTexture.")}(t),s=t.TEXTURE_2D;return S1(t,(()=>t.bindTexture(s,a))),S1(t,(()=>t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE))),S1(t,(()=>t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE))),S1(t,(()=>t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST))),S1(t,(()=>t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST))),1===sU().getNumber("WEBGL_VERSION")?S1(t,(()=>t.texImage2D(s,0,r,e,n,0,i,o,null))):S1(t,(()=>t.texStorage2D(s,1,r,e,n))),S1(t,(()=>t.bindTexture(t.TEXTURE_2D,null))),{texture:a,texShape:[n,e]}}function k2(t){return t.internalFormatFloat}function P2(t){return t.internalFormatHalfFloat}function I2(t){return t.downloadTextureFormat}function N2(t){return t.internalFormatPackedFloat}function R2(t){return t.internalFormatPackedHalfFloat}function D2(t,e,n,r,i,o,a,s){const c=t,l=new Float32Array(function(t,e){const[n,r]=_1(t,e);return n*r*4}(o,a));return c.bindBuffer(c.PIXEL_PACK_BUFFER,e),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,l),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),l}class L2{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const e=sU().getNumber("WEBGL_VERSION");if(null!=t?(this.gl=t,function(t,e){p1[t]=e}(e,t)):this.gl=m1(e),t=this.gl,2===sU().getNumber("WEBGL_VERSION")){const e=t;this.createVertexArray=()=>S1(e,(()=>e.createVertexArray())),this.bindVertexArray=t=>S1(e,(()=>e.bindVertexArray(t))),this.deleteVertexArray=t=>S1(e,(()=>e.deleteVertexArray(t))),this.getVertexArray=()=>S1(e,(()=>e.getParameter(e.VERTEX_ARRAY_BINDING)))}else if(null!=t){const e=t.getExtension("OES_vertex_array_object");if(null==e)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>S1(t,(()=>e.createVertexArrayOES())),this.bindVertexArray=n=>S1(t,(()=>e.bindVertexArrayOES(n))),this.deleteVertexArray=n=>S1(t,(()=>e.deleteVertexArrayOES(n))),this.getVertexArray=()=>S1(t,(()=>t.getParameter(e.VERTEX_ARRAY_BINDING_OES)))}let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===sU().getNumber("WEBGL_VERSION")){const t="OES_texture_float",e="OES_texture_half_float";if(this.textureFloatExtension=E1(this.gl,t),G1(this.gl,e))this.textureHalfFloatExtension=E1(this.gl,e);else if(sU().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),G1(this.gl,r))this.colorBufferHalfFloatExtension=E1(this.gl,r);else if(sU().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",G1(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!G1(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=M2(this.gl),this.indexBuffer=O2(this.gl),this.framebuffer=function(t){return R1(t,(()=>t.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=w1(this.gl,this.textureHalfFloatExtension)}get debug(){return sU().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;S1(t,(()=>t.finish())),S1(t,(()=>t.bindFramebuffer(t.FRAMEBUFFER,null))),S1(t,(()=>t.deleteFramebuffer(this.framebuffer))),S1(t,(()=>t.bindBuffer(t.ARRAY_BUFFER,null))),S1(t,(()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null))),S1(t,(()=>t.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r){const[i,o]=b1(e,n);return C2(t,i,o,k2(r),r.textureFormatFloat,t.FLOAT)}(this.gl,t,e,this.textureConfig)}createFloat16MatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r){const[i,o]=b1(e,n);return C2(t,i,o,P2(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,t,e,this.textureConfig)}createUnsignedBytesMatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r){const[i,o]=b1(e,n);return C2(t,i,o,I2(r),t.RGBA,t.UNSIGNED_BYTE)}(this.gl,t,e,this.textureConfig)}uploadPixelDataToTexture(t,e){this.throwIfDisposed(),function(t,e,n){S1(t,(()=>t.bindTexture(t.TEXTURE_2D,e))),n.data instanceof Uint8Array?2===sU().getNumber("WEBGL_VERSION")?S1(t,(()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data))):S1(t,(()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data))):2===sU().getNumber("WEBGL_VERSION")?S1(t,(()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n))):S1(t,(()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n))),S1(t,(()=>t.bindTexture(t.TEXTURE_2D,null)))}(this.gl,t,e)}uploadDenseMatrixToTexture(t,e,n,r){this.throwIfDisposed(),function(t,e,n,r,i,o){let a,s,c;S1(t,(()=>t.bindTexture(t.TEXTURE_2D,e))),i instanceof Uint8Array?(a=new Uint8Array(n*r*4),s=t.UNSIGNED_BYTE,c=t.RGBA):(a=new Float32Array(n*r*4),s=t.FLOAT,c=o.internalFormatPackedFloat),a.set(i),2===sU().getNumber("WEBGL_VERSION")?S1(t,(()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,s,a))):S1(t,(()=>t.texImage2D(t.TEXTURE_2D,0,c,n,r,0,t.RGBA,s,a))),S1(t,(()=>t.bindTexture(t.TEXTURE_2D,null)))}(this.gl,t,e,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r){const[i,o]=_1(e,n);return C2(t,i,o,R2(r),t.RGBA,r.textureTypeHalfFloat)}(this.gl,t,e,this.textureConfig)}createPackedMatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r){const[i,o]=_1(e,n);return C2(t,i,o,N2(r),t.RGBA,t.FLOAT)}(this.gl,t,e,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(I1(this.gl,this.framebuffer),this.outputTexture=null),S1(this.gl,(()=>this.gl.deleteTexture(t)))}downloadByteEncodedFloatMatrixFromOutputTexture(t,e,n){return this.downloadMatrixDriver(t,(()=>function(t,e,n,r){const[i,o]=b1(e,n),a=new Uint8Array(e*n*4);return S1(t,(()=>t.readPixels(0,0,i,o,r.downloadTextureFormat,t.UNSIGNED_BYTE,a))),new Float32Array(a.buffer)}(this.gl,e,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(t,e,n,r,i,o){return D2(this.gl,t,0,0,0,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,e){return function(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}(this.gl,t,e)}createBufferFromTexture(t,e,n){this.bindTextureToFrameBuffer(t);const r=function(t,e,n,r){const i=t.createBuffer();S1(t,(()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i)));const o=16*e*n;return S1(t,(()=>t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ))),S1(t,(()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0))),S1(t,(()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null))),i}(this.gl,e,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let e,n;if(sU().getBool("WEBGL_FENCE_API_ENABLED")){const r=t,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=()=>{const t=r.clientWaitSync(i,0,0);return t===r.ALREADY_SIGNALED||t===r.CONDITION_SATISFIED},e=i}else sU().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(e,sU().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:e,isFencePassed:n}}downloadMatrixFromPackedTexture(t,e,n){return this.downloadMatrixDriver(t,(()=>function(t,e,n){const r=new Float32Array(e*n*4);return S1(t,(()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r))),r}(this.gl,e,n)))}createProgram(t){this.throwIfDisposed();const e=this.gl;null==this.vertexShader&&(this.vertexShader=A2(e));const n=function(t){return R1(t,(()=>t.createProgram()),"Unable to create WebGLProgram.")}(e);S1(e,(()=>e.attachShader(n,this.vertexShader))),S1(e,(()=>e.attachShader(n,t))),function(t,e){if(S1(t,(()=>t.linkProgram(e))),!sU().get("ENGINE_COMPILE_ONLY")&&!1===t.getProgramParameter(e,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}(e,n);const r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&O1(e,r),r}buildVao(t){this.setProgram(t),this.bindVertexArray(t.vao);const e=this.gl;S1(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer))),function(t,e,n){S1(t,(()=>t.bindBuffer(t.ARRAY_BUFFER,n))),C1(t,e,"clipSpacePos",n,3,20,0)&&C1(t,e,"uv",n,2,20,12)}(e,t,this.vertexBuffer)}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&(S1(this.gl,(()=>this.gl.deleteProgram(t))),this.deleteVertexArray(t.vao))}setProgram(t){this.throwIfDisposed(),this.program=t,null!=this.program&&this.debug&&O1(this.gl,this.program),S1(this.gl,(()=>this.gl.useProgram(t)))}getUniformLocation(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(t,e,n){return R1(t,(()=>t.getUniformLocation(e,n)),'uniform "'+n+'" not present in program.')}(this.gl,t,e):function(t,e,n){return t.getUniformLocation(e,n)}(this.gl,t,e)}getAttributeLocation(t,e){return this.throwIfDisposed(),S1(this.gl,(()=>this.gl.getAttribLocation(t,e)))}getUniformLocationNoThrow(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)}setInputMatrixTexture(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),k1(this.gl,t,e,n)}setOutputMatrixTexture(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)}setOutputPackedMatrixTexture(t,e,n){this.throwIfDisposed();const[r,i]=_1(e,n);this.setOutputMatrixTextureDriver(t,r,i)}setOutputMatrixWriteRegion(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)}setOutputPackedMatrixWriteRegion(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&O1(this.gl,this.program),N1(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;if(this.debug){const t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}S1(t,(()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),S1(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=E1(this.gl,2===sU().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===sU().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}const t=this.getQueryTimerExtensionWebGL1(),e=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,e),e}endQuery(){if(2===sU().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const t=this.gl,e=this.getQueryTimerExtensionWebGL2();return void t.endQuery(e.TIME_ELAPSED_EXT)}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await jj((()=>this.disposed||this.isQueryAvailable(t,sU().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(t,sU().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,e){if(0===e)return null;if(2===e){const e=this.gl;return e.getQueryParameter(t,e.QUERY_RESULT)/1e6}{const e=this.getQueryTimerExtensionWebGL1();return e.getQueryObjectEXT(t,e.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,e){if(0===e)return!0;if(2===e){const e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.getQueryParameter(t,e.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const e=this.getQueryTimerExtensionWebGL1(),n=e.getQueryObjectEXT(t,e.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(e.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(t){return new Promise((e=>{this.addItemToPoll((()=>t.isFencePassed()),(()=>e()))}))}pollItems(){const t=function(t){let e=0;for(;e<t.length;++e){if(!t[e]())break}return e-1}(this.itemsToPoll.map((t=>t.isDoneFn)));for(let e=0;e<=t;++e){const{resolveFn:t}=this.itemsToPoll[e];t()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,e){if(this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in sU().platform&&(n=sU().platform.setTimeoutCustom.bind(sU().platform)),jj((()=>(this.pollItems(),0===this.itemsToPoll.length)),(()=>0),null,n)}bindTextureToFrameBuffer(t){this.throwIfDisposed(),P1(this.gl,t,this.framebuffer),this.debug&&N1(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(P1(this.gl,this.outputTexture,this.framebuffer),this.debug&&N1(this.gl)):I1(this.gl,this.framebuffer)}downloadMatrixDriver(t,e){this.bindTextureToFrameBuffer(t);const n=e();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(t,e,n){this.throwIfDisposed();const r=this.gl;P1(r,t,this.framebuffer),this.debug&&N1(r),this.outputTexture=t,S1(r,(()=>r.viewport(0,0,e,n))),S1(r,(()=>r.scissor(0,0,e,n)))}setOutputMatrixWriteRegionDriver(t,e,n,r){this.throwIfDisposed(),S1(this.gl,(()=>this.gl.scissor(t,e,n,r)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}function F2(t,e){Array.isArray(t)||(t=[t]),t.forEach((t=>{null!=t&&kj("complex64"!==t.dtype,(()=>"".concat(e," does not support complex64 tensors in the CPU backend.")))}))}function j2(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}function U2(t){return(e,n,r,i,o)=>{const a=iH(e,n),s=a.length,c=Kj(a),l=zj(o,Nj(a)),u=e.length,h=n.length,d=Kj(e),p=Kj(n),f=nH(e,a),m=nH(n,a);if(f.length+m.length===0)for(let g=0;g<l.length;++g)l[g]=t(r[g%r.length],i[g%i.length]);else for(let g=0;g<l.length;++g){const e=nU(g,s,c),n=e.slice(-u);f.forEach((t=>n[t]=0));const o=eU(n,u,d),a=e.slice(-h);m.forEach((t=>a[t]=0));const y=eU(a,h,p);l[g]=t(r[o],i[y])}return[l,a]}}function B2(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(i.shape,"float32",a)},s}function z2(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){return B2({inputs:{real:z2(t,e,"float32"),imag:z2(t,e,"float32")},backend:t})}const r=Qj(Nj(e),n);return t.makeTensorInfo(e,n,r)}function V2(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function G2(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,o)}function W2(t,e,n,r){if("int32"===r){return[e,"int32",Int32Array.from(t)]}if("bool"===r){const r=wV([0],n),[i,o]=U2(((t,e)=>t!==e?1:0))(e,[],t,r,"bool");return[o,"bool",i]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function H2(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:o}=r;if("complex64"===o){if("complex64"===i.dtype)return V2({inputs:{x:i},backend:n});const t=z2(n,i.shape,i.dtype),e=H2({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),r=B2({inputs:{real:e,imag:t},backend:n});return n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(e),r}if("complex64"===i.dtype){const t=G2({inputs:{input:i},backend:n}),e=H2({inputs:{x:t},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(t),e}if(!Gj(i.dtype,o)){const t=V2({inputs:{x:i},backend:n});return{dataId:t.dataId,shape:t.shape,dtype:o}}const a=n.data.get(i.dataId).values,[s,c,l]=W2(a,i.shape,i.dtype,o);return n.makeTensorInfo(s,c,l)}function q2(t,e,n,r){return null==n?n=>{let{inputs:i,backend:o}=n;const{a:a,b:s}=i,c=o;F2([a,s],t);const l=c.data.get(a.dataId).values,u=c.data.get(s.dataId).values,h="string"===a.dtype?S$(l):l,d="string"===a.dtype?S$(u):u,p=r||a.dtype,[f,m]=e(a.shape,s.shape,h,d,p);return c.makeTensorInfo(m,p,f)}:t=>{let{inputs:i,backend:o}=t;const{a:a,b:s}=i,c=o;if("complex64"===a.dtype||"complex64"===s.dtype){const t=H2({inputs:{x:a},backend:c,attrs:{dtype:"complex64"}}),e=c.data.get(t.dataId),r=e.complexTensorInfos.real,i=e.complexTensorInfos.imag,o=c.data.get(r.dataId).values,l=c.data.get(i.dataId).values,u=H2({inputs:{x:s},backend:c,attrs:{dtype:"complex64"}}),h=c.data.get(u.dataId),d=h.complexTensorInfos.real,p=h.complexTensorInfos.imag,f=c.data.get(d.dataId).values,m=c.data.get(p.dataId).values,[g,y,v]=n(a.shape,s.shape,o,l,f,m),b=c.makeTensorInfo(v,"float32",g),x=c.makeTensorInfo(v,"float32",y),_=B2({inputs:{real:b,imag:x},backend:c});return c.disposeIntermediateTensorInfo(t),c.disposeIntermediateTensorInfo(u),c.disposeIntermediateTensorInfo(b),c.disposeIntermediateTensorInfo(x),_}{const t=c.data.get(a.dataId).values,n=c.data.get(s.dataId).values,i=r||a.dtype,[o,l]=e(a.shape,s.shape,t,n,i);return c.makeTensorInfo(l,i,o)}}}function X2(t){return(e,n,r,i,o,a)=>{const s=iH(e,n),c=Nj(s),l=s.length,u=Kj(s),h=zj("float32",c),d=zj("float32",c),p=nH(e,s),f=nH(n,s),m=GJ(r,i),g=GJ(o,a),y=e.length,v=Kj(e),b=n.length,x=Kj(n);if(p.length+f.length===0)for(let _=0;_<h.length;_++){const e=_%m.length,n=_%g.length,r=t(m[2*e],m[2*e+1],g[2*n],g[2*n+1]);h[_]=r.real,d[_]=r.imag}else for(let _=0;_<h.length;_++){const e=nU(_,l,u),n=e.slice(-y);p.forEach((t=>n[t]=0));const r=eU(n,y,v),i=e.slice(-b);f.forEach((t=>i[t]=0));const o=eU(i,b,x),a=t(m[2*r],m[2*r+1],g[2*o],g[2*o+1]);h[_]=a.real,d[_]=a.imag}return[h,d,s]}}const Y2=U2(((t,e)=>t+e)),K2=X2(((t,e,n,r)=>({real:t+n,imag:e+r})));q2(mU,Y2,K2);function Z2(t,e,n,r,i){const o=Nj(r),a=Qj(i,n);for(let s=0;s<t.length;s++){const n=t[s];if(n<0)throw new Error("Input x must be non-negative!");n>=i||(a[n]+=o>0?e[s]:1)}return a}function J2(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t.shape[0],o=t.shape[1],a=NW([i,n],e.dtype);for(let s=0;s<i;s++)for(let i=0;i<o;i++){const o=t.get(s,i);if(o<0)throw new Error("Input x must be non-negative!");o>=n||(r?a.set(1,s,o):e.size>0?a.set(a.get(s,o)+e.get(s,i),s,o):a.set(a.get(s,o)+1,s,o))}return a}const $2=U2(((t,e)=>t&e));q2(CU,$2);function Q2(t){return(e,n,r)=>{const i=Vj(n,e.length);for(let o=0;o<e.length;++o)i[o]=t(e[o],r);return i}}function t3(t,e,n){return e3(t,Q2(e),n)}function e3(t,e,n){return r=>{let{inputs:i,attrs:o,backend:a}=r;const{x:s}=i;F2(s,t);const c=a,l=c.data.get(s.dataId).values;let u;if("string"===s.dtype){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=S$(l)}else u=l;const h=n||s.dtype,d=e(u,h,o);return c.makeTensorInfo(s.shape,h,d)}}const n3=Q2((t=>Math.ceil(t)));e3(IU,n3);function r3(t,e,n,r){const i=Vj(n,Nj(e));if(r&&"string"!==n){let e=0;t.forEach((t=>{const n=Nj(t.shape);i.set(t.vals,e),e+=n}))}else{let r=0;t.forEach((t=>{const o="string"===n?S$(t.vals):t.vals;let a=0;for(let n=0;n<t.shape[0];++n){const s=n*e[1]+r;for(let e=0;e<t.shape[1];++e)i[s+e]=o[a++]}r+=t.shape[1]}))}return i}const i3=U2(((t,e)=>t===e?1:0)),o3=(q2(nB,i3,null,"bool"),Q2((t=>Math.exp(t)))),a3=(e3(rB,o3,"float32"),Q2((t=>Math.expm1(t)))),s3=(e3(oB,a3),Q2((t=>Math.floor(t))));e3(cB,s3);function c3(t,e,n,r,i,o,a,s,c){const l=NW([r,o],n);for(let u=0;u<r;u++){const n=[];let r=0;for(let e=0;e<i;e++){const o=t[u*i+e];r+=o*a[e],n.push(o)}if(r<0||r>=c/o)throw new Error("Invalid indices: ".concat(n," does not index into ").concat(s));for(let t=0;t<o;t++)l.values[u*o+t]=e.get(...e.indexToLoc(r*o+t))}return l}function l3(t,e,n){const r=NW(n,t.dtype);for(let i=0;i<r.size;++i){const n=r.indexToLoc(i).slice(),o=n[0],a=n[2],s=e.locToIndex([o,a]);n[2]=e.values[s];const c=t.locToIndex(n);0<=c&&c<t.values.length&&(r.values[i]=t.values[c])}return r}const u3=U2(((t,e)=>t>e?1:0)),h3=(q2(pB,u3,null,"bool"),U2(((t,e)=>t>=e?1:0))),d3=(q2(fB,h3,null,"bool"),U2(((t,e)=>t<e?1:0))),p3=(q2(wB,d3,null,"bool"),U2(((t,e)=>t<=e?1:0)));q2(SB,p3,null,"bool");function f3(t,e,n){const r=(e-t)/(n-1),i=Qj(n,"float32");i[0]=t;for(let o=1;o<i.length;o++)i[o]=i[o-1]+r;return i}const m3=Q2((t=>Math.log(t)));e3(EB,m3);function g3(t,e,n,r){const i=zj(r,Nj(n));for(let o=0;o<i.length;++o){const n=o*e;let r=t[n];for(let i=0;i<e;++i){const e=t[n+i];(Number.isNaN(e)||e>r)&&(r=e)}i[o]=r}return i}const y3=U2(((t,e)=>Math.max(t,e))),v3=(q2(kB,y3),U2(((t,e)=>Math.min(t,e)))),b3=(q2(DB,v3),U2(((t,e)=>t*e))),x3=X2(((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})));q2(jB,b3,x3);function _3(t,e,n){const r=_V(-1,n);return b3([],e,r,t,n)}const w3=U2(((t,e)=>t!==e?1:0));q2(BB,w3,null,"bool");function S3(t,e,n,r,i){const o=e.length,a=Nj(e),s=Kj(e),c=Kj(i),l=zj(n,Nj(i));for(let u=0;u<a;++u){const e=nU(u,o,s),n=new Array(e.length);for(let t=0;t<n.length;t++)n[t]=e[r[t]];l[eU(n,o,c)]=t[u]}return l}function T3(t,e,n,r){const[i,o]=SX(t,r),a=$V(e,"int32"),s=Qj(Nj(i),a),c=Nj(o);for(let l=0;l<s.length;++l){const t=l*c;let e=1;for(let r=0;r<c;++r)e*=n[t+r];s[l]=e}return{outVals:s,outShape:i,outDtype:a}}function E3(t,e,n,r){const i=[];let o=0;const a=e.length-1+n.length,s=new Array(a).fill(null).map((()=>[0]));!function(t,e){for(let n=0;n<t.length;++n){const r=t[n],i=n===t.length-1?e:t[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let t=1;t<r.length;++t)if(r[t-1]>r[t])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let c=1;for(let l=0;l<e.length-1;++l){c*=e[l];const t=e[l+1];for(let e=1;e<c+1;++e)s[l].push(e*t)}for(let l=0;l<t.length;++l){let r=t[l],a=t[l]+1;for(let t=0;t<n.length;++t){const i=n[t],o=t+e.length-1;if(o>=0){const t=s[o],e=t[t.length-1]-i[r];for(let n=r;n<a;++n)s[o].push(i[n+1]+e)}r=i[r],a=i[a]}a!==r&&(i.push([r,a]),o+=a-r)}return{outSplits:s,valueSlices:i,numValues:o}}function A3(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function M3(t,e,n,r,i){const o=e.slice();o[0]=i;const a=Vj(n,Nj(o)),s=t.length;return function(t,e,n,r,i,o){const a=A3(e,2)[1],s=A3(o,2)[1];let c=0;for(const l of n)for(let e=l[0];e<l[1];++e){for(let n=0;n<r;++n)i[c*s+n]=t[e*a+n];++c}}(t,e,r,0===s?0:s/e[0],a,o),[a,o]}function O3(t,e,n,r,i,o,a,s){if(0===t.length)throw new Error("paramsNestedSplits must be non empty");if(0===e[0].length)throw new Error("Split tensors must not be scalars");if(function(t,e,n){t.forEach(((t,r)=>{if(t<0||t>=n){const i=nU(r,e.length,Kj(e)).join(",");throw new Error("indices[".concat(i,"] = ").concat(t," is not in [0, ").concat(n,")"))}}))}(o,a,e[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:l,valueSlices:u,numValues:h}=E3(o,a,t,c),d=function(t){const e=[];for(let n=0;n<t.length;++n){const r=Vj("int32",t[n].length);e.push(r),t[n].forEach(((t,e)=>r[e]=t))}return e}(l),p=M3(n,r,i,u,h);return[d,p[0],p[1]]}const C3=2147483647;function k3(t,e,n,r,i,o,a){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");const s=0===e.length,c=0===i.length,l=0===a.length,u=[];s||u.push(e[0]),c||u.push(i[0]),l||u.push(a[0]);for(let m=1;m<u.length;++m)if(u[m]!==u[m-1])throw new Error("starts, limits, and deltas must have the same shape");const h=0===u.length?1:u[0],d=Vj("int32",h+1);d[0]=0;for(let m=0;m<h;++m){const e=s?t[0]:t[m],n=c?r[0]:r[m],i=l?o[0]:o[m];if(0===i)throw new Error("Requires delta != 0");let a;if(i>0&&n<e||i<0&&n>e)a=0;else if(a=Math.ceil(Math.abs((n-e)/i)),a>C3)throw new Error("Requires ((limit - start) / delta) <= ".concat(C3));d[m+1]=d[m]+a}const p=Vj(n,d[h]);let f=0;for(let m=0;m<h;++m){const e=d[m+1]-d[m];let n=s?t[0]:t[m];const r=l?o[0]:o[m];for(let t=0;t<e;++t)p[f++]=n,n+=r}return[d,p]}var P3=_J;class I3{constructor(t,e,n,r,i,o,a,s,c,l){this.shape=t,this.shapeShape=e,this.values=n,this.valuesShape=r,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=s,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=SJ(l),this.raggedRank=TJ(this.rowPartitionTypes)}getRowPartitionTypeByDimension(t){return this.rowPartitionTypes[0]===P3.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}getRowPartitionTensor(t){return this.rowPartitionTypes[0]===P3.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}getMaxWidth(t){const e=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case P3.VALUE_ROWIDS:return I3.getMaxWidthValueRowID(e);case P3.ROW_SPLITS:return I3.getMaxWidthRowSplit(e);default:throw new Error("Cannot handle partition type ".concat(P3[this.getRowPartitionTypeByDimension(t-1)]))}}static getMaxWidthRowSplit(t){const e=t.length;if(0===e||1===e)return 0;let n=0;for(let r=0;r<e-1;++r){const e=t[r+1]-t[r];e>n&&(n=e)}return n}static getMaxWidthValueRowID(t){const e=t.length;if(0===e)return 0;let n=0,r=t[0],i=0;for(let o=1;o<e;++o){const e=t[o];e!==r&&(r=e,i=Math.max(o-n,i),n=o)}return Math.max(e-n,i)}tensorShapeFromTensor(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===e.length){if(-1===t[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return R3(t,n)}calculateOutputSize(t){const e=this.valuesShape;EJ(this.defaultValueShape,e);const n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=wJ(this.raggedRank,n,e);r[0]<0&&(r[0]=t);for(let i=1;i<=this.raggedRank;++i)r[i]<0&&(r[i]=this.getMaxWidth(i));return r}calculateFirstParentOutputIndex(t,e,n){const r=Math.min(t,n),i=[];let o=0;for(let a=0;a<r;++a,o+=e)i.push(o);for(let a=r;a<t;++a)i.push(-1);return kj(i.length===t,(()=>"Final length of result must be equal to firstDimension.")),i}calculateOutputIndexRowSplit(t,e,n,r){const i=t.length,o=[];for(let a=0;a<i-1;++a){const i=t[a+1]-t[a];let s=Math.min(r,i),c=e[a];-1===c&&(s=0);for(let t=0;t<s;++t)o.push(c),c+=n;for(let t=0;t<i-s;++t)o.push(-1)}if(i>0&&o.length!==t[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(t,e,n,r){const i=t.length,o=[];if(0===i)return[];let a=0,s=t[0];if(s>=e.length)throw new Error("Got currentValueRowId=".concat(s,", which is not less than ").concat(e.length));let c=e[s];o.push(c);for(let l=1;l<i;++l){const i=t[l];if(i===s)c>=0&&(++a,a<r?c+=n:c=-1);else{if(a=0,s=i,i>=e.length)throw new Error("Got nextValueRowId=".concat(i," which is not less than ").concat(e.length));c=e[i]}o.push(c)}if(o.length!==t.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(t,e,n,r){const i=this.getRowPartitionTensor(t),o=this.getRowPartitionTypeByDimension(t);switch(o){case P3.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,e,n,r);case P3.ROW_SPLITS:if(i.length-1>e.length)throw new Error("Row partition size is greater than output size: ".concat(i.length-1," > ").concat(e.length));return this.calculateOutputIndexRowSplit(i,e,n,r);default:throw new Error("Unsupported partition type: ".concat(P3[o]))}}getFirstDimensionSize(){const t=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const e=this.rowPartitionTypes[0];switch(e){case P3.FIRST_DIM_SIZE:return t[0];case P3.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case P3.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(P3[e]))}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const t=this.getFirstDimensionSize(),e=this.calculateOutputSize(t),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let o=n.length-2;o>=0;--o)n[o]=n[o+1]*e[o+1];const r=R3(e,!1),i=Vj(this.valuesDType,Nj(r));if(n[0]*e[0]>0){let o=this.calculateFirstParentOutputIndex(t,n[0],e[0]);for(let t=1;t<=this.raggedRank;++t){o=this.calculateOutputIndex(t-1,o,n[t],e[t])}this.setOutput(this.raggedRank,o,i,r)}return[r,i]}setOutput(t,e,n,r){if(0===n.length)return;const i=this.values,o=n;let a=r.slice();a=a.slice(t+1);const s=Nj(a),c=e.length;let l=this.defaultValue;if(l.length!==s&&1!==l.length){const t=this.defaultValueShape;OG((()=>{const e=Mq(l,t),n=Wq(e,a);l=n.dataSync()}))}let u=0,h=0,d=0;for(let p=0;p<=c;++p){let t=p<c?e[p]:-1;if(t!==d){if(h<d){const t=i.subarray(u*s);N3(o.subarray(h*s),t,(d-h)*s)}if(p>=c){const e=n.length;t=Math.floor(e/s)}if(t>d)if(1===this.defaultValue.length)o.subarray(d*s,t*s).fill(this.defaultValue[0]),d=t;else for(;t>d;){N3(o.slice(d*s),l,s),++d}t<0?(u=p+1,h=d):(u=p,h=d,d=h+1)}else++d}}}function N3(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function R3(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error("Dimension ".concat(r," must be >= 0"));if(r<-1)throw new Error("Dimension ".concat(r," must be >= -1"));r=-1}n.push(r)}return n}function D3(t,e,n,r,i,o,a,s,c,l){return new I3(t,e,n,r,i,o,a,s,c,l).compute()}function L3(t,e,n,r){if(t===e||t<e&&n<0||e<t&&n>1)return Qj(0,r);const i=Qj(Math.abs(Math.ceil((e-t)/n)),r);e<t&&1===n&&(n=-1),i[0]=t;for(let o=1;o<i.length;o++)i[o]=i[o-1]+n;return i}const F3=Q2((t=>1/Math.sqrt(t)));e3(lz,F3);function j3(t,e,n,r,i,o,a,s,c,l){const u=[r/i,i],h=t.values,d=e.values;if(0===r)return NW(n,e.dtype);const p=c instanceof UV?c:NW(u,e.dtype);"string"===typeof c||"number"===typeof c?p.values.fill(c):"boolean"===typeof c&&p.values.fill(+c);for(let f=0;f<o;f++){const t=[];let o=0;for(let e=0;e<a;e++){const n=h[f*a+e];t.push(n),o+=n*s[e]}if(o<0||o>=r/i)throw new Error("Invalid indices: ".concat(t," does not index into ").concat(n));for(let n=0;n<i;n++)l?p.values[o*i+n]+=d[f*i+n]:p.values[o*i+n]=0===e.rank?d[0]:d[f*i+n]}return p}const U3=Q2((t=>1/(1+Math.exp(-t))));t3(vz,(t=>1/(1+Math.exp(-t))));function B3(t,e,n,r,i){const o=KH(r,e,n),a=Nj(n),s=Kj(r);if(o){const n=ZH(e,s);return"string"===i?t.slice(n,n+a):t.subarray(n,n+a)}const c=NW(r,i,"string"===i?S$(t):t),l=NW(n,i);for(let u=0;u<l.size;++u){const t=l.indexToLoc(u),n=t.map(((t,n)=>t+e[n]));l.set(c.get(...n),...t)}return"string"===i?T$(l.values):l.values}function z3(t,e,n,r,i,o,a){const s=e[0],c=o[0],l=new Array(c),u=new Array(s),h=e[1];if(0===c){if(0!==s)throw new Error(c$(s));return[Vj(n,0),[0,h],Vj(i,0),l,u]}let d=!0,p=0;const f=new Array(c).fill(0);for(let g=0;g<s;++g){const e=t[g*h];if(e<0)throw new Error(l$(g,e));if(e>=c)throw new Error(u$(g,e,c));++f[e],d=d&&e>=p,p=e}let m=!0;for(let g=0;g<c;++g){const t=0===f[g];l[g]=t,m=m&&!t,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&d){const e=t,n=r;for(let t=0;t<s;++t)u[t]=t;return[e,[s,h],n,l,u]}{const e=f[c-1],o=Vj(n,e*h),d=Vj(i,e),p=new Array(c).fill(0);for(let n=0;n<s;++n){const e=t[n*h],i=p[e],a=(0===e?0:f[e-1])+i;p[e]++;for(let r=0;r<h;++r)o[a*h+r]=t[n*h+r];d[a]=r[n],u[n]=a}for(let t=0;t<c;++t){if(0===p[t]){const e=0===t?0:f[t-1];o[e*h+0]=t;for(let t=1;t<h;++t)o[e*h+t]=0;d[e]=a}}return[o,[e,h],d,l,u]}}function V3(t,e,n,r,i){const o=Nj(r),a=e[0],s=i.length,c=[];let l=1,u=-1;for(let m=0;m<s;++m){const t=i[m];if(-1===t){if(-1!==u)throw new Error(h$(u,m));u=m,c.push(1)}else{if(t<0)throw new Error(d$(m,t));l*=t,c.push(t)}}if(-1!==u){if(l<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const t=Math.trunc(o/l);if(l*t!==o)throw new Error(f$(r,c));c[u]=t}if(Nj(c)!==o)throw new Error(m$(r,c));const h=r.length,d=[];if(h>0){d[h-1]=1;for(let t=h-2;t>=0;--t)d[t]=d[t+1]*r[t+1]}const p=[];if(s>0){p[s-1]=1;for(let t=s-2;t>=0;--t)p[t]=p[t+1]*c[t+1]}const f=Vj(n,a*s);for(let m=0;m<a;++m){let e=0;for(let n=0;n<h;++n)e+=t[m*h+n]*d[n];for(let t=0;t<s;++t)f[m*s+t]=Math.trunc(e/p[t]),e%=p[t]}return[f,[a,s],c]}function G3(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const s=r.length,c=[e[0],t.length/e[0]],l=c[1],u=s>0?i[s-1]+1:0;if(u<0)throw new Error("segment ids must be >= 0");const h=e.slice();h[0]=u;const d=h.reduce(((t,e)=>t*e),1),p=Vj(n,d);if(0===s)return u>0&&p.fill(a),[p,h];if(u<=0)throw new Error("segment ids must be >= 0");let f=0,m=1,g=0,y=i[f];for(;;){let e=0;if(m<s){if(e=i[m],y===e){++m;continue}if(y>=e)throw new Error("segment ids are not increasing")}if(y<0||y>=u)throw new Error(v$(y,u));y>g&&p.fill(a,g*l,y*l);for(let n=f;n<m;++n){const e=r[n];if(e<0||e>=c[0])throw new Error(b$(n,r[n],c[0]));for(let n=0;n<l;n++)p[y*l+n]+=t[e*l+n]}if(o)for(let t=0;t<l;t++)p[y*l+t]/=m-f;if(f=m,++m,g=y+1,y=e,m>s)break}return g<u&&p.fill(a,g*l,u*l),[p,h]}const W3=Q2((t=>Math.sqrt(t))),H3=(t3(xz,(t=>Math.sqrt(t))),Q2(((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=e;return t.replace(new RegExp(n,r?"g":""),i)})));e3(kz,H3);function q3(t,e,n,r){const i=NW(t,e.dtype);for(let o=0;o<i.size;o++){const t=i.indexToLoc(o),a=new Array(t.length);for(let e=0;e<a.length;e++)a[e]=t[e]*n[e]+r[e];i.set(e.get(...a),...t)}return i}class X3{constructor(t,e,n,r,i,o){this.separator=TV(t),this.nGramWidths=e,this.leftPad=TV(n),this.rightPad=TV(r),this.padWidth=i,this.preserveShort=o}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,e){const n=this.getPadWidth(e);return Math.max(0,t+2*n-e+1)}createNGrams(t,e,n,r,i,o){for(let a=0;a<i;++a){const s=this.getPadWidth(o),c=Math.max(0,s-a),l=Math.max(0,s-(i-(a+1))),u=o-(c+l),h=e+(c>0?0:a-s);let d=0;d+=c*this.leftPad.length;for(let e=0;e<u;++e)d+=t[h+e].length;d+=l*this.rightPad.length;d+=(c+l+u-1)*this.separator.length,n[r+a]=new Uint8Array(d);const p=n[r+a];let f=0;const m=t=>t.forEach((t=>p[f++]=t));for(let t=0;t<c;++t)m(this.leftPad),m(this.separator);for(let e=0;e<u-1;++e)m(t[h+e]),m(this.separator);if(u>0){m(t[h+u-1]);for(let t=0;t<l;++t)m(this.separator),m(this.rightPad)}else{for(let t=0;t<l-1;++t)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(t,e){const n=t.length,r=e.length;if(r>0){let t=e[0];if(0!==t)throw new Error("First split value must be 0, got ".concat(t));for(let i=1;i<r;++i){let r=e[i]>=t;if(r=r&&e[i]<=n,!r)throw new Error("Invalid split value ".concat(e[i],", must be in [").concat(t,", ").concat(n,"]"));t=e[i]}if(t!==n)throw new Error("Last split value must be data size. Expected ".concat(n,", got ").concat(t))}const i=r-1,o=Vj("int32",r);if(0===n||0===r){const t=new Array(n);for(let e=0;e<=i;++e)o[e]=0;return[t,o]}o[0]=0;for(let s=1;s<=i;++s){const t=e[s]-e[s-1];let n=0;this.nGramWidths.forEach((e=>{n+=this.getNumNGrams(t,e)})),this.preserveShort&&t>0&&0===n&&(n=1),o[s]=o[s-1]+n}const a=new Array(o[i]);for(let s=0;s<i;++s){const n=e[s];let r=o[s];if(this.nGramWidths.forEach((i=>{const o=e[s+1]-e[s],c=this.getNumNGrams(o,i);this.createNGrams(t,n,a,r,c,i),r+=c})),this.preserveShort&&r===o[s]){const i=e[s+1]-e[s];if(0===i)continue;const o=i+2*this.padWidth,c=1;this.createNGrams(t,n,a,r,c,o)}}return[a,o]}}function Y3(t,e,n,r,i,o,a,s){return new X3(n,r,i,o,a,s).compute(t,e)}function K3(t,e,n,r){if(!t.length)return;if(0===e.length){for(let e=0;e<t.length;++e)r.push(t.subarray(e,e+1));return}if(1===e.length){const i=e[0];let o=t.indexOf(i);for(;-1!==o;){const e=t.subarray(0,o);n&&0===e.length||r.push(e),o=(t=t.subarray(o+1)).indexOf(i)}return void(n&&0===t.length||r.push(t))}let i=0;for(let o=0;o<t.length+1;o++)if(o===t.length||-1!==e.indexOf(t[o])){const e=t.subarray(i,o);n&&0===e.length||r.push(e),i=o+1}}function Z3(t,e,n){const r=t.length,i=[];let o=0,a=0;const s=new Array(r);for(let d=0;d<r;++d){const r=i.length;K3(t[d],e,n,i);const c=i.length-r;s[d]=c,o+=c,a=Math.max(a,c)}const c=Vj("int32",2*o),l=new Array(o),u=[r,a];let h=0;for(let d=0;d<r;++d)for(let t=0;t<s[d];++t)c[2*h]=d,c[2*h+1]=t,l[h]=i[h],++h;return[c,l,u]}function J3(t,e){const n=Vj("int32",t.length);for(let r=0;r<t.length;++r)n[r]=xV(t[r]).modulo(e).getLowBitsUnsigned();return n}const $3=U2(((t,e)=>t-e)),Q3=X2(((t,e,n,r)=>({real:t-n,imag:e-r})));q2(Dz,$3,Q3);function t4(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=NW(n,t.dtype);for(let i=0;i<r.values.length;++i){const e=r.indexToLoc(i),n=new Array(t.rank);for(let r=0;r<n.length;r++)n[r]=e[r]%t.shape[r];const o=t.locToIndex(n);r.values[i]=t.values[o]}return r}const e4=(t,e)=>{const n=e.value-t.value;return 0===n?t.index-e.index:n};function n4(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length-1;for(;r>n;){if(r-n>600){const i=r-n+1,o=e-n+1,a=Math.log(i),s=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*s*(i-s)/i)*Math.sign(o-i/2);n4(t,e,Math.max(n,Math.floor(e-o*s/i+c)),Math.min(r,Math.floor(e+(i-o)*s/i+c)))}const i=t[e];let o=n,a=r;for(Cj(t,n,e),e4(t[r],i)>0&&Cj(t,n,r);o<a;){for(Cj(t,o,a),o++,a--;e4(t[o],i)<0;)o+=1;for(;e4(t[a],i)>0;)a-=1}0===e4(t[n],i)?Cj(t,n,a):(a+=1,Cj(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}}function r4(t,e,n,r,i){const o=e[e.length-1],[a,s]=[t.length/o,o],c=zj(n,a*r),l=zj("int32",a*r);for(let h=0;h<a;h++){const e=h*s,n=t.subarray(e,e+s);let o=new Array(n.length);n.forEach(((t,e)=>o[e]={value:t,index:e})),r<o.length&&(n4(o,r),o=o.slice(0,r)),i&&o.sort(e4);const a=h*r,u=c.subarray(a,a+r),d=l.subarray(a,a+r);for(let t=0;t<r;t++)u[t]=o[t].value,d[t]=o[t].index}const u=e.slice();return u[u.length-1]=r,[NW(u,n,c),NW(u,"int32",l)]}function i4(t,e,n,r){const i=Uj(e,n)[0],o=[1,n[0],1];for(let f=0;f<i;f++)o[0]*=n[f];o[1]=n[i];for(let f=i+1;f<n.length;f++)o[2]*=n[f];const a=new Map,s=new Int32Array(n[i]),c=new UV(o,r,t),l=[],u=1===o[0]&&1===o[2];for(let f=0;f<n[i];f++){let e;if(u)e=t[f].toString();else{const t=[];for(let e=0;e<o[0];e++)for(let n=0;n<o[2];n++)t.push(c.get(e,f,n));e=t.join(",")}const n=a.get(e);if(null!=n)s[f]=n;else{const t=a.size;a.set(e,t),s[f]=t,l.push(f)}}const h=o.slice();h[1]=a.size;const d=new UV(h,r);l.forEach(((t,e)=>{for(let n=0;n<o[0];n++)for(let r=0;r<o[2];r++)d.set(c.get(n,t,r),n,e,r)}));const p=n.slice();return p[i]=h[1],{outputValues:d.values,outputShape:p,indices:s}}const{mx:o4,XI:a4,Nk:s4,f6:c4,ct:l4,YG:u4,hH:h4,z3:d4,sG:p4,uM:f4,vS:m4,qB:g4,GG:y4,rq:v4,lg:b4,WR:x4,cu:_4,GE:w4,px:S4,jC:T4,He:E4,hE:A4,BF:M4,Dk:O4,cl:C4,_B:k4,ub:P4,_f:I4,Ku:N4,qy:R4,Zy:D4,bu:L4,zv:F4,dH:j4,HS:U4,yH:B4,l3:z4,z9:V4,x6:G4,_m:W4,eW:H4,GK:q4,SP:X4,yr:Y4,dl:K4,Dw:Z4,xT:J4,_X:$4,wz:Q4}=M;function t6(t,e){return["x","y","z","w","u","v"].slice(0,e).map((e=>"".concat(t,".").concat(e)))}function e6(t,e){return 1===e?[t]:t6(t,e)}class n6{constructor(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=v2(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const t=e6("rc",this.rank),e=h2(this.rank),n=this.getOutOfBoundsCondition(t),r=this.getSetup(t),i=this.getOutput(t);this.userCode="\n        void main() {\n          ".concat(e," rc = getOutputCoords();\n\n          if(").concat(n,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(r,"\n\n            setOutput(vec4(").concat(i,"));\n          }\n        }\n      ")}}getSourceCoordsArr(t){const e=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let i="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1");for(let e=2;e<this.rank;e++)i="".concat(t[t.length-1-e],",")+i;e.push(i)}return e}getOutOfBoundsCondition(t){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);let e="";for(let n=this.rank-2;n<this.rank;n++)e+="".concat(t[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(e+="||");return e}getSetup(t){if(1===this.rank)return"";const e=t.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(e[0],";\n      int c = ").concat(e[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}getOutput(t){const e=this.getSourceCoordsArr(t);if(1===this.rank){const t=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(t," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(e[0],"),\n            cEdge ? 0. : getA(").concat(e[1],"),\n            rEdge ? 0. : getA(").concat(e[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(e[3],")")}}class r6{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=v2(this.outputShape.length);let n="";for(let r=0;r<4;r++){let t="thisRC = rc;";r%2===1&&(t+="thisRC.z += 1;"),r>1&&(t+="thisRC.y += 1;"),n+="\n        ".concat(t,"\n        ").concat(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(r,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(r>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(t,e){const n=e?$1(["r","c","d"],"inputShape"):Z1(["r","c","d"],t);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Q1(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(n,"\n\n        setOutput(result);\n      }\n    ")}}class i6{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(t,e,n){const r=a6(e,n),i=s6(t,r,n);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=o6(t,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const t=this.freeTextures[i].pop();return this.usedTextures[i].push(t),t}let a;return r===v1.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):r===v1.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):r===v1.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):r===v1.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):r===v1.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(t,e,n,r){if(null==this.freeTextures)return;const i=a6(n,r),o=s6(e,i,r);o in this.freeTextures||(this.freeTextures[o]=[]);const a=o6(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=sU().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(t),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[o],l=c&&c.indexOf(t);if(null==l||l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[l]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(t,")"));const e=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*e),"%)"))}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const t in this.freeTextures)this.freeTextures[t].forEach((t=>{this.gpgpu.deleteMatrixTexture(t.texture)}));for(const t in this.usedTextures)this.usedTextures[t].forEach((t=>{this.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function o6(t,e,n,r,i){const o=function(t,e){switch(t){case v1.PACKED_2X2_FLOAT32:return N2(e);case v1.PACKED_2X2_FLOAT16:return R2(e);case v1.UNPACKED_FLOAT32:return k2(e);case v1.UNPACKED_FLOAT16:return P2(e);case v1.PACKED_4X1_UNSIGNED_BYTE:return I2(e);default:throw new Error("Unknown physical texture type ".concat(t))}}(e,r);let a;if(i){const[e,n]=_1(t[0],t[1]);a=e*n}else{const[e,n]=b1(t[0],t[1]);a=e*n}const s=function(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(e))}(n,o);return a*s}function a6(t,e){if(t===y1.UPLOAD)return v1.PACKED_2X2_FLOAT32;if(t===y1.RENDER||null==t)return function(t){return sU().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?v1.PACKED_2X2_FLOAT32:v1.UNPACKED_FLOAT32:t?v1.PACKED_2X2_FLOAT16:v1.UNPACKED_FLOAT16}(e);if(t===y1.DOWNLOAD||t===y1.PIXELS)return v1.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(t))}function s6(t,e,n){return"".concat(t[0],"_").concat(t[1],"_").concat(e,"_").concat(n)}class c6{constructor(t,e){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=v2(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}const l6="if (isnan(x)) return x;",u6="return x;",h6="return abs(x);";const d6="return (x >= 0.0) ? x : (exp(x) - 1.0);",p6=l6+"\n  return (x < 0.0) ? 0.0 : x;\n",f6=l6+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",m6="return x;",g6="return 1.0 / (1.0 + exp(-1.0 * x));",y6="return x;",v6="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",b6="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",x6="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",_6="return 1.0 / (1.0 + exp(-1.0 * x));";class w6{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=v2(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}class S6{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=v2(this.outputShape.length);const e=t.length,n=e6("rc",e),r=h2(e),i=function(t,e){if(1===t)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}(e,n),o=n.slice(-2),a=e<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(r," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(a,"));\n      }\n    ")}}const T6=YK,E6={};const A6=sU().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class M6 extends Ej{nextDataId(){return M6.nextDataId++}constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!sU().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let e;if(null!=t){if(t instanceof L2)e=t;else{const n=m1(sU().getNumber("WEBGL_VERSION"),t);e=new L2(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const t=m1(sU().getNumber("WEBGL_VERSION"));e=new L2(t),this.binaryCache=((n=sU().getNumber("WEBGL_VERSION"))in E6||(E6[n]={}),E6[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=e,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new i6(this.gpgpu),this.numMBBeforeWarning=null==sU().global.screen?1024:sU().global.screen.height*sU().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new Tj(this,MG())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(t,e,n,r,i,o){const a=this.makeTensorInfo(e,n),s=this.texData.get(a.dataId);s.isPacked=!1,s.texture={texture:t,texShape:[r,i]},s.texShape=[r,i];const c=j1(e),l=new T2(c,!1,o),u=this.runWebGLProgram(l,[a],n,[[r,i]]);return u.shape=e,s.texture=null,this.disposeIntermediateTensorInfo(a),u.dataId}write(t,e,n){if((sU().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||sU().getBool("DEBUG"))&&this.checkNumericalProblems(t),"complex64"===n&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:e,dtype:n,values:t,usage:y1.UPLOAD,refCount:1}),r}refCount(t){if(this.texData.has(t)){return this.texData.get(t).refCount}return 0}incRef(t){this.texData.get(t).refCount++}decRef(t){if(this.texData.has(t)){this.texData.get(t).refCount--}}move(t,e,n,r,i){if(sU().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:n,dtype:r,values:e,usage:y1.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}readSync(t){const e=this.texData.get(t),{values:n,dtype:r,complexTensorInfos:i,slice:o,shape:a,isPacked:s}=e;if(null!=o){let e;e=s?new w6(a,m6):new c6(a,m6);const n=this.runWebGLProgram(e,[{dataId:t,shape:a,dtype:r}],r),i=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(t);if("string"===r)return n;const c=null!=this.activeTimers;let l,u;if(c&&(l=SV()),"complex64"===r){u=GJ(this.readSync(i.real.dataId),this.readSync(i.imag.dataId))}else u=this.getValuesFromTexture(t);return c&&(this.downloadWaitMs+=SV()-l),this.convertAndCacheOnCPU(t,u)}async read(t){if(this.pendingRead.has(t)){const e=this.pendingRead.get(t);return new Promise((t=>e.push(t)))}const e=this.texData.get(t),{values:n,shape:r,slice:i,dtype:o,complexTensorInfos:a,isPacked:s}=e;if(null!=i){let e;e=s?new w6(r,m6):new c6(r,m6);const n=this.runWebGLProgram(e,[{dataId:t,shape:r,dtype:o}],o),i=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(t);if(sU().getBool("DEBUG")&&!sU().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===sU().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c,l,u=null;if("complex64"!==o&&sU().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(t);const e=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(e.texture.texture,...x1(r))}if(this.pendingRead.set(t,[]),"complex64"!==o&&await this.gpgpu.createAndWaitForFence(),"complex64"===o){const t=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]);l=GJ(t[0],t[1])}else if(null==u)l=this.getValuesFromTexture(t);else{const t=Nj(r);l=this.gpgpu.downloadFloat32MatrixFromBuffer(u,t)}if(null!=c&&this.disposeIntermediateTensorInfo(c),null!=u){const t=this.gpgpu.gl;S1(t,(()=>t.deleteBuffer(u)))}const h=this.convertAndCacheOnCPU(t,l),d=this.pendingRead.get(t);return this.pendingRead.delete(t),d.forEach((t=>t(h))),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&MG().removeDataId(t,this),this.pendingDeletes--),h}readToGPU(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.texData.get(t),{values:r,shape:i,slice:o,dtype:a,isPacked:s,texture:c}=n;if("complex64"===a)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=o){let n;n=s?new w6(i,m6):new c6(i,m6);const r=this.runWebGLProgram(n,[{dataId:t,shape:i,dtype:a}],a),o=this.readToGPU(r,e);return this.disposeIntermediateTensorInfo(r),o}if(null==c)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const l=this.decode(t,e.customTexShape),u=MG().makeTensorFromTensorInfo(l),h=this.texData.get(l.dataId);return Object.assign({tensorRef:u},h.texture)}bufferSync(t){const e=this.readSync(t.dataId);if("string"===t.dtype)try{const n=e.map((t=>EV(t)));return NW(t.shape,t.dtype,n)}catch(KM){throw new Error("Failed to decode encoded string bytes into utf-8")}return NW(t.shape,t.dtype,e)}checkNumericalProblems(t){if(null!=t)for(let e=0;e<t.length;e++){const n=t[e];if(!T1(n)){if(sU().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}getValuesFromTexture(t){const{shape:e,dtype:n,isPacked:r}=this.texData.get(t),i=Nj(e);if(sU().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(t),r=this.texData.get(n.dataId),o=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...x1(e)).subarray(0,i);return this.disposeIntermediateTensorInfo(n),o}const o=sU().getBool("WEBGL_PACK")&&!0===r,a=o?j1(e):e,s=o?new w2(a):new _2(a),c=this.runWebGLProgram(s,[{shape:a,dtype:n,dataId:t}],"float32"),l=this.texData.get(c.dataId),u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(l.texture.texture,l.texShape[0],l.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(c),u}timerAvailable(){return sU().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(t){const e=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,t();const i=MV(this.activeTimers.map((t=>t.query))).filter((t=>null!=t)),o=MV(this.activeTimers.map((t=>t.name))).filter((t=>null!=t));this.activeTimers=e,r&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(sU().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const t=await Promise.all(i);a.kernelMs=function(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}(t),a.getExtraProfileInfo=()=>t.map(((t,e)=>({name:o[e],ms:t}))).map((t=>"".concat(t.name,": ").concat(t.ms))).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return sU().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:SV(),endMs:null}}endTimer(t){return sU().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=SV(),t)}async getQueryTime(t){if(sU().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const e=t;return e.endMs-e.startMs}disposeData(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(e?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!e&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);const{complexTensorInfos:n}=this.texData.get(t);return null!=n&&(this.disposeData(n.real.dataId,e),this.disposeData(n.imag.dataId,e)),this.texData.delete(t),!0}releaseGPUData(t){const{texture:e,dtype:n,texShape:r,usage:i,isPacked:o,slice:a}=this.texData.get(t),s=a&&a.origDataId||t,c=this.dataRefCount.get(s);c>1?this.dataRefCount.set(s,c-1):(this.dataRefCount.delete(s),null!=e&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(e,r,i,o)));const l=this.texData.get(t);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture.texture}getDataInfo(t){return this.texData.get(t)}shouldExecuteOnCPU(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A6;return sU().getBool("WEBGL_CPU_FORWARD")&&t.every((t=>null==this.texData.get(t.dataId).texture&&Nj(t.shape)<e))}getGPGPUContext(){return this.gpgpu}where(t){Jz("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const e=t.dataSync();return T6(t.shape,e)}packedUnaryOp(t,e,n){const r=new w6(t.shape,e),i=this.compileAndRun(r,[t],n);return MG().makeTensorFromTensorInfo(i)}abs(t){if(this.shouldExecuteOnCPU([t])&&"complex64"!==t.dtype){const e=j4(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,e)}if(sU().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,h6,t.dtype);const e=new c6(t.shape,h6),n=this.compileAndRun(e,[t]);return MG().makeTensorFromTensorInfo(n)}makeTensorInfo(t,e,n){let r;if("string"===e&&null!=n&&n.length>0&&Hj(n[0])){const i=n.map((t=>TV(t)));r=this.write(i,t,e)}else r=this.write(n,t,e);return this.texData.get(r).usage=null,{dataId:r,shape:t,dtype:e}}makeOutput(t,e,n){return MG().makeTensorFromTensorInfo(this.makeTensorInfo(t,e,n),this)}unpackTensor(t){const e=new S6(t.shape);return this.runWebGLProgram(e,[t],t.dtype)}packTensor(t){const e=new n6(t.shape);return this.runWebGLProgram(e,[t],t.dtype,null,!0)}packedReshape(t,e){const n=[L1(t.shape),...F1(t.shape)],r={dtype:t.dtype,shape:n,dataId:t.dataId},i=[L1(e),...F1(e)],o=new r6(i,n),a=[n],s=this.runWebGLProgram(o,[r],t.dtype,a,!0);return{dataId:s.dataId,shape:e,dtype:s.dtype}}decode(t,e){const n=this.texData.get(t),{isPacked:r,shape:i,dtype:o}=n;if(null!=e){kj(Nj(i)<=e[0]*e[1]*4,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."))}const a=j1(i);let s;s=r?new x2(a):new b2(a);const c=[null!=e?e:x1(a)];return{dtype:o,shape:i,dataId:this.runWebGLProgram(s,[{shape:a,dtype:o,dataId:t}],o,c,!0,e).dataId}}runWebGLProgram(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;const a=this.makeTensorInfo(t.outputShape,n),s=this.texData.get(a.dataId);if(t.packedOutput&&(s.isPacked=!0),t.outPackingScheme===g1.DENSE){const e=null!=o?o:x1(t.outputShape);s.texShape=e.map((t=>2*t))}if(null!=t.outTexUsage&&(s.usage=t.outTexUsage),0===Nj(a.shape))return s.values=zj(a.dtype,0),a;const c=[],l=e.map((e=>{if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(e.dataId);if(null==n.texture){if(!t.packedInputs&&Nj(e.shape)<=sU().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:e.shape,texData:null,isUniform:!0,uniformValues:n.values};t.packedInputs&&(n.isPacked=!0,n.shape=e.shape)}if(this.uploadToGPU(e.dataId),!!n.isPacked!==!!t.packedInputs)e=n.isPacked?this.unpackTensor(e):this.packTensor(e),c.push(e),n=this.texData.get(e.dataId);else if(n.isPacked&&!B1(n.shape,e.shape)){const t=e,r=e.shape;e.shape=n.shape,e=this.packedReshape(e,r),c.push(e),n=this.texData.get(e.dataId),t.shape=r}return{shape:e.shape,texData:n,isUniform:!1}}));this.uploadToGPU(a.dataId);const u={shape:a.shape,texData:s,isUniform:!1},h=function(t,e,n){let r="";e.concat(n).forEach((e=>{const i=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!e.isUniform){const o=e.texData.texShape,{useSqueezeShape:a,uniformShape:s,keptDims:c}=d2(t.packedInputs,e.shape,o);let l="",u="",h="";if(1===s.length&&t.packedInputs){const t=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];l="".concat(t[0]>1,"_").concat(t[1]>1)}else if(2!==s.length||t.packedInputs){if(s.length>2&&!t.packedInputs){const t=Kj(s);h="".concat(t[0]===o[1],"_").concat(t[t.length-1]===o[1])}}else u="".concat(s[0]>1,"_").concat(s[1]>1);const d=e.shape.length,p=2===s.length&&Rj(e.shape,o),f=1===Nj(e.shape),m=nH(e.shape,n.shape),g=!t.packedInputs&&d===n.shape.length&&Rj(o,n.texData.texShape),y=t.packedInputs||s.length>2?"":"".concat(o[0]>1,"_").concat(o[1]>1);r+="".concat(d,"_").concat(g,"_").concat(a?c:"","_").concat(s.length,"_").concat(f,"_").concat(m,"_").concat(p,"_").concat(l,"_").concat(u,"_").concat(h,"_").concat(y,"_").concat(i)}else{const t=e.isUniform?"uniform":e.texData.texShape;r+="".concat(e.shape,"_").concat(t,"_").concat(i)}}));const i=t.userCode;let o=t.constructor.name;return o+="_"+r+"_"+i+"".concat(sU().getNumber("WEBGL_VERSION")),o}(t,l,u),d=this.getAndSaveBinary(h,(()=>m2(this.gpgpu,t,l,u))),p=null!=this.activeTimers;let f;p&&(f=this.startTimer()),sU().get("ENGINE_COMPILE_ONLY")||function(t,e,n,r,i){e.program.enableShapeUniforms||(y2(e.inShapeInfos,n),y2([e.outShapeInfo],[r]));const o=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(o.texture,a[0],a[1]):t.setOutputMatrixTexture(o.texture,a[0],a[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),1===sU().getNumber("WEBGL_VERSION")&&null!==e.infLoc&&t.gl.uniform1f(e.infLoc,1/0),null!==e.nanLoc&&t.gl.uniform1f(e.nanLoc,NaN);for(let c=0;c<n.length;++c){const r=n[c],{uniform:i,offset:o,shape:a,texShape:s}=e.variablesLocations[c];if(a){const{uniformShape:n}=d2(e.program.packedInputs,r.shape,r.texData.texShape);switch(n.length){case 1:t.gl.uniform1iv(a,new Int32Array(n));break;case 2:t.gl.uniform2iv(a,new Int32Array(n));break;case 3:t.gl.uniform3iv(a,new Int32Array(n));break;case 4:t.gl.uniform4iv(a,new Int32Array(n))}}if(s&&t.gl.uniform2i(s,r.texData.texShape[0],r.texData.texShape[1]),null!=i)if(r.isUniform)if(Nj(r.shape)<2)t.gl.uniform1f(i,r.uniformValues[0]);else{let e=r.uniformValues;e instanceof Float32Array||(e=new Float32Array(e)),t.gl.uniform1fv(i,e)}else null!=r.texData.slice&&null!=o&&t.gl.uniform1i(o,r.texData.slice.flatOffset),t.setInputMatrixTexture(r.texData.texture.texture,i,c)}const s=e.outShapeLocation;if(s)switch(r.shape.length){case 1:t.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(s,new Int32Array(r.shape))}if(e.outShapeStridesLocation){const n=Kj(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(n));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(n));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(n))}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i)for(let c=0;c<e.program.customUniforms.length;++c){const n=e.program.customUniforms[c],r=e.customUniformLocations[c],o=i[c];if("float"===n.type)t.gl.uniform1fv(r,o);else if("vec2"===n.type)t.gl.uniform2fv(r,o);else if("vec3"===n.type)t.gl.uniform3fv(r,o);else if("vec4"===n.type)t.gl.uniform4fv(r,o);else if("int"===n.type)t.gl.uniform1iv(r,o);else if("ivec2"===n.type)t.gl.uniform2iv(r,o);else if("ivec3"===n.type)t.gl.uniform3iv(r,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));t.gl.uniform4iv(r,o)}}t.executeProgram()}(this.gpgpu,d,l,u,r),c.forEach((t=>this.disposeIntermediateTensorInfo(t))),p&&(f=this.endTimer(f),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(f)}));const m=sU().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){const t=SV();t-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=t)}if(!sU().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===i){const t=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),t}return a}compileAndRun(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||e[0].dtype;return this.runWebGLProgram(t,e,n,r,i)}getAndSaveBinary(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!sU().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach((t=>{this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram),delete this.binaryCache[t]}))}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=OG((()=>{if(!sU().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=sU().getBool("DEBUG");sU().set("DEBUG",!1);const e=this.abs(HW(1e-8)).dataSync()[0];if(sU().set("DEBUG",t),e>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(t){const e=this.texData.get(t),{shape:n,dtype:r,values:i,texture:o,usage:a,isPacked:s}=e;if(null!=o)return;const c=null!=this.activeTimers;let l;c&&(l=SV());let u=e.texShape;if(null==u&&(u=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=sU().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=sU().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&sU().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n*=2,r*=2,t=t.map(((e,n)=>n>=t.length-2?Oj(t[n]):t[n])),1===t.length&&(t=[2,t[0]])),2!==t.length){const e=Bj(t);t=e.newShape}let i=Nj(t),o=null;t.length<=1&&i<=n?o=[1,i]:2===t.length&&t[0]<=n&&t[1]<=n?o=t:3===t.length&&t[0]*t[1]<=n&&t[2]<=n?o=[t[0]*t[1],t[2]]:3===t.length&&t[0]<=n&&t[1]*t[2]<=n?o=[t[0],t[1]*t[2]]:4===t.length&&t[0]*t[1]*t[2]<=n&&t[3]<=n?o=[t[0]*t[1]*t[2],t[3]]:4===t.length&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(o=[t[0],t[1]*t[2]*t[3]]);const a=null!=o&&Math.max(...o)>r&&Math.min(...o)<=(e?2:1)&&Math.min(...o)>0;if(null==o||a)if(e){const e=L1(t);let n=2,r=2;t.length&&([n,r]=F1(t)),i=e*(n/2)*(r/2),o=Lj(i).map((t=>2*t))}else o=Lj(i);return o}(n,s),e.texShape=u),null!=i){const t=j1(n);let o,a=u[1],h=u[0];const d=i instanceof Uint8Array||i instanceof Uint8ClampedArray;!s&&d||([a,h]=_1(u[0],u[1])),o=s?new E2(t,d):new T2(t,d);const p=d?[h,a]:u,f=this.makeTensorInfo(p,r),m=this.texData.get(f.dataId);m.usage=d?y1.PIXELS:y1.UPLOAD,m.texShape=p,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),a,h,i);const g=[[h,a]],y=!0,v=this.runWebGLProgram(o,[f],r,g,y),b=this.texData.get(v.dataId);e.texShape=b.texShape,e.isPacked=b.isPacked,e.usage=b.usage,sU().get("ENGINE_COMPILE_ONLY")?this.disposeData(v.dataId):(e.texture=b.texture,e.values=null,this.texData.delete(v.dataId)),this.disposeIntermediateTensorInfo(f),c&&(this.uploadWaitMs+=SV()-l)}else{const t=this.acquireTexture(u,a,r,s);e.texture=t}}convertAndCacheOnCPU(t,e){const n=this.texData.get(t),{dtype:r}=n;return null!=e&&(n.values=function(t,e){if("float32"===e||"complex64"===e)return t;if("int32"===e||"bool"===e){const n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length);for(let e=0;e<n.length;++e)n[e]=Math.round(t[e]);return n}throw new Error("Unknown dtype ".concat(e))}(e,r)),n.values}acquireTexture(t,e,n,r){if(this.numBytesInGPU+=this.computeBytes(t,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const t=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(t," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(t,e,r)}computeBytes(t,e){return t[0]*t[1]*Wj(e)}checkCompileCompletion(){for(const[,t]of Object.entries(this.binaryCache))this.checkCompletion_(t)}async checkCompileCompletionAsync(){const t=[];if(this.gpgpu.parallelCompilationExtension){for(const[,e]of Object.entries(this.binaryCache))t.push(this.checkCompletionAsync_(e));return Promise.all(t)}for(const[,e]of Object.entries(this.binaryCache)){const n=new Promise((t=>{try{this.checkCompletion_(e),t(!0)}catch(sO){throw sO}}));t.push(n)}return Promise.all(t)}async checkCompletionAsync_(t){return this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(t):(await new Promise((t=>vJ((()=>t())))),this.checkCompletionAsync_(t))}checkCompletion_(t){if(!1===this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(t.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(t.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw M1(t.source,this.gpgpu.gl.getShaderInfoLog(t.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const t of Object.values(this.binaryCache)){this.gpgpu.buildVao(t.webGLProgram);const{variablesLocations:e,customUniformLocations:n,infLoc:r,nanLoc:i,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:s}=g2(this.gpgpu,t.program,t.webGLProgram);t.variablesLocations=e,t.customUniformLocations=n,t.infLoc=r,t.nanLoc=i,t.outShapeLocation=o,t.outShapeStridesLocation=a,t.outTexShapeLocation=s}}createTensorFromGPUData(t,e,n){t.channels=t.channels||"RGBA";const{texture:r,height:i,width:o,channels:a}=t,s=MG().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=s.writeTexture(r,e,n,i,o,a);return MG().makeTensorFromDataId(c,e,n,s)}}M6.nextDataId=0,pG()&&function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;lG.registerBackend(t,e,n)}("webgl",(()=>new M6),2);const O6="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class C6{constructor(t,e,n){this.variableNames=["A","B"],this.outputShape=iH(e,n),this.enableShapeUniforms=v2(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")}}const k6="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class P6{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=iH(e,n);const i=this.outputShape.length;this.enableShapeUniforms=v2(i);let o="";if(r)if(0===i||1===Nj(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const t=h2(i);if(o="\n          ".concat(t," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{const t=e6("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(t[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(t[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(t[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(t[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}}function I6(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const N6={kernelName:mB,backendName:"webgl",kernelFunc:I6};function R6(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,o=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(o.dataId),s=I6({inputs:{x:r},backend:n}),c=I6({inputs:{x:i},backend:n});return a.complexTensorInfos={real:s,imag:c},o}const D6={kernelName:RU,backendName:"webgl",kernelFunc:R6},L6="return (a < 0.) ? b * a : a;",F6="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const j6={kernelName:_B,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:o}=r,a=n.makeTensorInfo([],"float32",_V(o,"float32")),s=sU().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new P6(F6,i.shape,a.shape):new C6(L6,i.shape,a.shape),c=n.runWebGLProgram(s,[i,a],"float32");return n.disposeIntermediateTensorInfo(a),c}},U6="return (a < 0.) ? b * a : a;",B6="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const z6={kernelName:YB,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,o=sU().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new P6(B6,r.shape,i.shape):new C6(U6,r.shape,i.shape);return n.runWebGLProgram(o,[r,i],"float32")}},V6="if (isnan(x)) return x;";function G6(t){let{opSnippet:e,packedOpSnippet:n,cpuKernelImpl:r,dtype:i}=t;return t=>{let{inputs:o,backend:a}=t;const{x:s}=o,c=a,l=i||s.dtype;if(c.shouldExecuteOnCPU([s])&&null!=r){const t=c.texData.get(s.dataId),e=r(t.values,l);return c.makeTensorInfo(s.shape,l,e)}let u;return u=sU().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new w6(s.shape,n):new c6(s.shape,e),c.runWebGLProgram(u,[s],l)}}function W6(t){let{opSnippet:e,packedOpSnippet:n,checkOutOfBounds:r=!1,supportsComplex:i=!1,cpuKernelImpl:o,dtype:a}=t;return t=>{let{inputs:s,backend:c}=t;const{a:l,b:u}=s,h=c;if(i&&"complex64"===l.dtype){const t=h.texData.get(l.dataId),n=h.texData.get(u.dataId),[r,i]=[[t.complexTensorInfos.real,n.complexTensorInfos.real],[t.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((t=>{const[n,r]=t,i={dataId:n.dataId,dtype:n.dtype,shape:l.shape},o={dataId:r.dataId,dtype:r.dtype,shape:u.shape},a=new C6(e,l.shape,u.shape);return h.runWebGLProgram(a,[i,o],$V(n.dtype,r.dtype))})),o=R6({inputs:{real:r,imag:i},backend:h});return h.disposeIntermediateTensorInfo(r),h.disposeIntermediateTensorInfo(i),o}const d=a||$V(l.dtype,u.dtype);if(("string"===l.dtype||"string"===u.dtype||h.shouldExecuteOnCPU([l,u]))&&null!=o){const t=h.texData.get(l.dataId).values,e=h.texData.get(u.dataId).values,n="string"===l.dtype?S$(t):t,r="string"===l.dtype?S$(e):e,[i,a]=o(l.shape,u.shape,n,r,d),s=h.makeTensorInfo(a,d);return h.texData.get(s.dataId).values=i,s}let p;return p=sU().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new P6(n,l.shape,u.shape,r):new C6(e,l.shape,u.shape),h.runWebGLProgram(p,[l,u],d)}}function H6(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===t)return e?y6:u6;if("relu"===t)return e?b6:p6;if("elu"===t)return e?v6:d6;if("relu6"===t)return e?x6:f6;if("prelu"===t)return e?B6:U6;if("leakyrelu"===t)return e?F6:L6;if("sigmoid"===t)return e?_6:g6;throw new Error("Activation ".concat(t," has not been implemented for the WebGL backend."))}class q6{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=v2(this.outputShape.length);const l=r?t[1]:t[2],u=Math.ceil(l/2),h=r?"i * 2, rc.y":"rc.y, i * 2",d=i?"rc.z, i * 2":"i * 2, rc.z",p=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";a&&(m=s?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(a,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(a,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(a,"\n        }"),g="result = activation(result);");const y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let v="rc.x",b="rc.x";t[0]<e[0]?v="imod(rc.x, ".concat(t[0],")"):e[0]<t[0]&&(b="imod(rc.x, ".concat(e[0],")")),this.userCode="\n      ".concat(m,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(u,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(v,";\n        int batchB = ").concat(b,";\n        for (int i = 0; i < ").concat(u,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(h,");\n          vec4 b = getMatrixB(batchB, ").concat(d,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(f[0],");\n          result += (").concat(p[1]," * ").concat(f[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")}}const X6={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class Y6{constructor(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=iH(e,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")}}const K6="return a * b;";function Z6(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,o=$V(r.dtype,i.dtype);if("complex64"===r.dtype){const t=n.texData.get(r.dataId),e=n.texData.get(i.dataId),o=new Y6(X6.REAL,r.shape,i.shape),a=new Y6(X6.IMAG,r.shape,i.shape),s=[{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:r.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:i.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:i.shape}],c=n.runWebGLProgram(o,s,"float32"),l=n.runWebGLProgram(a,s,"float32"),u=R6({inputs:{real:c,imag:l},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),u}if(n.shouldExecuteOnCPU([r,i])){const t=n.texData.get(r.dataId),e=n.texData.get(i.dataId),[a,s]=M4(r.shape,i.shape,t.values,e.values,o),c=n.makeTensorInfo(s,o);return n.texData.get(c.dataId).values=a,c}let a;return a=sU().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new P6(K6,r.shape,i.shape):new C6(K6,r.shape,i.shape),n.runWebGLProgram(a,[r,i],o)}const J6={kernelName:jB,backendName:"webgl",kernelFunc:Z6};function $6(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:o}=r,a=n,s=Nj(i.shape),c=function(t,e){let n=1,r=-1;for(let o=0;o<t.length;++o)if(t[o]>=0)n*=t[o];else if(-1===t[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(o));r=o}else if(t[o]<0)throw Error("Shapes can not be < 0. Found ".concat(t[o]," at dim ").concat(o));if(-1===r){if(e>0&&e!==n)throw Error("Size(".concat(e,") must match the product of shape ").concat(t));return t}if(0===n)throw Error("Cannot infer the missing size in [".concat(t,"] when ")+"there are 0 elements");if(e%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(e," / ").concat(n));const i=t.slice();return i[r]=e/n,i}(o,s),l=Nj(c);kj(s===l,(()=>"The new shape (".concat(c,") has ").concat(l," elements and the old ")+"shape (".concat(i.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."));const u=a.texData.get(i.dataId);return!u.isPacked||B1(i.shape,c)||null!==u.texture&&B1(u.shape,c)?(a.incRef(i.dataId),{dataId:i.dataId,shape:c,dtype:i.dtype}):function(t,e,n){const r=[L1(t.shape),...F1(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},o=[L1(e),...F1(e)],a=new r6(o,r),s=[r],c=n.runWebGLProgram(a,[i],t.dtype,s,!0);return{dataId:c.dataId,shape:e,dtype:c.dtype}}(i,c,a)}const Q6={kernelName:rz,backendName:"webgl",kernelFunc:$6};class t5{constructor(t,e){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:o}=t;this.outputShape=[r,o];const a=4*Math.floor(n/4),s=n%4;let c="sumValue += dot(values, ones);";if(null!=e){const t=1/e;c="sumValue += dot(values * ".concat(Dj(t)?t.toPrecision(2):t,", ones);")}let l="";i%n>0&&(l="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(l,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(a,";\n        if (").concat(1===s,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")}}class e5{constructor(t,e){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:o}=t;this.outputShape=[r,o];let a="0.0",s="";"prod"===e?a="1.0":"min"===e?(a="1.0 / 1e-20",s="min"):"max"===e&&(a="-1.0 / 1e-20",s="max");let c="".concat(e,"(").concat(e,"(").concat(e,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e?c="sumValue":"prod"===e?c="prodValue":"all"===e?c="allValue":"any"===e&&(c="anyValue");const l=4*Math.floor(n/4),u=n%4;let h="\n      if (".concat("sum"===e,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===e,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(s,"(values, minMaxValue);\n        if (").concat("min"===e," || ").concat("max"===e,") {\n          minMaxValue = ").concat(s,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),d="vec4";"all"===e?(a="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===e&&(a="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let p="";i%n>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(a,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        vec4 minMaxValue = vec4(").concat(a,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(2===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(3===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(h,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}}function n5(t,e,n,r){const i=function(t){const e=[];for(;0===e.length||1!==e[e.length-1].outSize;){const n=e.length?e[e.length-1].outSize:t[1],r=MJ(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}(t.shape);let o=t;for(let a=0;a<i.length;a++){const{inSize:s,windowSize:c,outSize:l}=i[a];let u,h;u="mean"===n?0===a?new t5({windowSize:c,inSize:s,batchSize:t.shape[0],outSize:l},s):new t5({windowSize:c,inSize:s,batchSize:t.shape[0],outSize:l}):new e5({windowSize:c,inSize:s,batchSize:t.shape[0],outSize:l},n),h=o,o=r.runWebGLProgram(u,[o],e),h.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(h)}return o}class r5{constructor(t,e){this.variableNames=["A"];const n=new Array(t.length);for(let o=0;o<n.length;o++)n[o]=t[e[o]];this.outputShape=n,this.rank=n.length;const r=h2(this.rank),i=function(t){const e=t.length;if(e>6)throw Error("Transpose for rank ".concat(e," is not yet supported"));const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}(e);this.userCode="\n    void main() {\n      ".concat(r," resRC = getOutputCoords();\n      setOutput(getA(").concat(i,"));\n    }\n    ")}}class i5{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(t.length);for(let l=0;l<n.length;l++)n[l]=t[e[l]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));const r=h2(this.rank),i=t6("rc",this.rank),o=new Array(this.rank);for(let l=0;l<e.length;l++)o[e[l]]=i[l];const a="vec2(".concat(o.slice(-2).join(),")"),s="++".concat(i[this.rank-1]," < ").concat(n[this.rank-1]),c="getChannel(getA(".concat(o.join(),"), ").concat(a,")");this.userCode="\n    void main() {\n      ".concat(r," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(c,";\n      if(").concat(s,") {\n        result[1] = ").concat(c,";\n      }\n      --").concat(i[this.rank-1],";\n      if(++").concat(i[this.rank-2]," < ").concat(n[this.rank-2],") {\n        result[2] = ").concat(c,";\n        if(").concat(s,") {\n          result[3] = ").concat(c,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}}function o5(t,e,n){const r=sU().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new i5(t.shape,e):new r5(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}function a5(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:a}=r;return function(t,e,n,r){const i=e,o=t.shape.length,a=Uj(i,t.shape);let s=a;const c=AX(s,o),l=null!=c;let u=t;l&&(u=o5(t,c,r),s=OX(s.length,o)),EX("sum",s,o);const[h,d]=SX(u.shape,s);let p=h;n&&(p=TX(h,a));const f=Nj(d),m=$6({inputs:{x:u},attrs:{shape:[Nj(t.shape)/f,f]},backend:r}),g=n5(m,QV(t.dtype),"sum",r),y=$6({inputs:{x:g},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),l&&r.disposeIntermediateTensorInfo(u),y}(i,o,a,n)}const s5={kernelName:"Sum",backendName:"webgl",kernelFunc:a5};function c5(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{perm:o}=r,a=n,s=i.shape.length,c=new Array(s);for(let u=0;u<c.length;u++)c[u]=i.shape[o[u]];let l;if(a.shouldExecuteOnCPU([i])){const t=a.texData.get(i.dataId).values,e=$4(t,i.shape,i.dtype,o,c);l=a.makeTensorInfo(c,i.dtype);a.texData.get(l.dataId).values=e}else l=o5(i,o,a);return l}const l5={kernelName:Bz,backendName:"webgl",kernelFunc:c5},u5=1e3;function h5(t){let{a:e,b:n,transposeA:r,transposeB:i,backend:o,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:c=0,activation:l=null}=t;const u=e.shape.length,h=n.shape.length,d=r?e.shape[u-2]:e.shape[u-1],p=i?n.shape[h-1]:n.shape[h-2],f=r?e.shape[u-1]:e.shape[u-2],m=i?n.shape[h-2]:n.shape[h-1],g=e.shape.slice(0,-2),y=n.shape.slice(0,-2),v=Nj(g),b=Nj(y),x=iH(e.shape.slice(0,-2),n.shape.slice(0,-2)).concat([f,m]);kj(d===p,(()=>"Error in matMul: inner shapes (".concat(d,") and (")+"".concat(p,") of Tensors with shapes ").concat(e.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(i," must match.")));const _=r?[v,d,f]:[v,f,d],w=i?[b,m,p]:[b,p,m],S=$6({inputs:{x:e},backend:o,attrs:{shape:_}}),T=$6({inputs:{x:n},backend:o,attrs:{shape:w}}),E=[S,T],A=Math.max(v,b),M=r?S.shape[1]:S.shape[2],O=null!=a,C=null!=s,k="leakyrelu"===l,P=null!=l?H6(l,!0):null;let I;if((1===f||1===m)&&M>u5&&!1===(O||C||k||null!=P)){let t=S,e=T;r&&(t=c5({inputs:{x:S},backend:o,attrs:{perm:[0,2,1]}}),E.push(t)),i&&(e=c5({inputs:{x:T},backend:o,attrs:{perm:[0,2,1]}}),E.push(e));const n=1===m;let a=t;1!==m&&(a=$6({inputs:{x:t},backend:o,attrs:{shape:[A,M,1]}}),E.push(a));const s=1===m?2:1;let c=e;n&&(c=$6({inputs:{x:e},backend:o,attrs:{shape:[A,1,M]}}),E.push(c));const l=Z6({inputs:{a:a,b:c},backend:o});I=a5({inputs:{x:l},backend:o,attrs:{axis:s,keepDims:!0}}),E.push(l)}else{const t=$V(e.dtype,n.dtype),l=new q6(_,w,[A,f,m],r,i,O,P,C,k),u=[S,T];if(null!=a&&u.push(a),C&&u.push(s),k){const t=o.makeTensorInfo([],"float32",_V(c,"float32"));u.push(t),E.push(t)}I=o.runWebGLProgram(l,u,t)}const N=$6({inputs:{x:I},backend:o,attrs:{shape:x}});E.push(I);for(const R of E)o.disposeIntermediateTensorInfo(R);return N}const d5={kernelName:Yz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:o,bias:a,preluActivationWeights:s}=e,{transposeA:c,transposeB:l,activation:u,leakyreluAlpha:h}=r;return h5({a:i,b:o,transposeA:c,transposeB:l,backend:n,bias:a,preluActivationWeights:s,leakyreluAlpha:h,activation:u})}},p5="return abs(x);";const f5={kernelName:dU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const t=n.texData.get(r.dataId),e=j4(t.values);return n.makeTensorInfo(r.shape,r.dtype,e)}let i;return i=sU().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new w6(r.shape,p5):new c6(r.shape,p5),n.runWebGLProgram(i,[r],r.dtype)}},m5=G6({opSnippet:l6+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),g5={kernelName:pU,backendName:"webgl",kernelFunc:m5},y5=G6({opSnippet:l6+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),v5={kernelName:fU,backendName:"webgl",kernelFunc:y5},b5="return a + b;",x5=W6({opSnippet:b5,packedOpSnippet:b5,supportsComplex:!0,cpuKernelImpl:o4}),_5={kernelName:mU,backendName:"webgl",kernelFunc:x5};class w5{constructor(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map(((t,e)=>"T".concat(e)));const n=[];this.variableNames.forEach((t=>{n.push("float v".concat(t," = get").concat(t,"AtOutCoords();"))}));const r=this.variableNames.map((t=>"v".concat(t))).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        float result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}}class S5{constructor(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map(((t,e)=>"T".concat(e)));const n=[];this.variableNames.forEach((t=>{n.push("vec4 v".concat(t," = get").concat(t,"AtOutCoords();"))}));const r=this.variableNames.map((t=>"v".concat(t))).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        vec4 result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}}const T5={kernelName:gU,backendName:"webgl",kernelFunc:function t(e){const{inputs:n,backend:r}=e,i=n;if(1===i.length)return I6({inputs:{x:i[0]},backend:r});if(i.length>sU().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const e=Math.floor(i.length/2),n=t({inputs:i.slice(0,e),backend:r}),o=t({inputs:i.slice(e),backend:r});return t({inputs:[n,o],backend:r})}const o=i.map((t=>t.dtype)).reduce(((t,e)=>$V(t,e))),a=i.map((t=>t.shape)),s=sU().getBool("WEBGL_PACK")?new S5(i[0].shape,a):new w5(i[0].shape,a);return r.runWebGLProgram(s,i,o)}};const E5={kernelName:"All",backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:a}=r,s=i.shape.length,c=Uj(o,i.shape);let l=c;const u=AX(l,s);let h=i;null!=u&&(h=c5({inputs:{x:i},backend:n,attrs:{perm:u}}),l=OX(l.length,s)),EX("all",l,s);const[d,p]=SX(h.shape,l),f=$6({inputs:{x:h},backend:n,attrs:{shape:[-1,Nj(p)]}}),m=n5(f,f.dtype,"all",n);let g;if(a){g=$6({inputs:{x:m},backend:n,attrs:{shape:TX(d,c)}})}else g=$6({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(h),g}};const A5={kernelName:"Any",backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:a}=r,s=i.shape.length,c=Uj(o,i.shape);let l=c;const u=AX(l,s);let h=i;null!=u&&(h=c5({inputs:{x:i},backend:n,attrs:{perm:u}}),l=OX(l.length,s)),EX("any",l,s);const[d,p]=SX(h.shape,l),f=$6({inputs:{x:h},backend:n,attrs:{shape:[-1,Nj(p)]}}),m=n5(f,f.dtype,"any",n);let g;if(a){g=$6({inputs:{x:m},backend:n,attrs:{shape:TX(d,c)}})}else g=$6({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(h),g}};class M5{constructor(t,e,n){this.variableNames=["A"];const{windowSize:r,batchSize:i,outSize:o}=t;n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const a="max"===e?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(r,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          int inIdx = ").concat(s,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(a," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")}}class O5{constructor(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,kj(t.length>2,(()=>"Packed arg".concat(n.charAt(0).toUpperCase()+n.slice(1)," supports only inputs with rank above 2.")));const i=t[t.length-1],o=Math.ceil(i/e);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");const a=this.outputShape,s=a.length,c=h2(s),l=e6("coords",s);let u,h;if(1===o){h=s+1;const t=h2(h);u="\n        ".concat(t," sourceLocR = ").concat(t,"(").concat(l.join(),", 0);\n        ++").concat(l[s-1],";\n        ").concat(t," sourceLocG = ").concat(t,"(").concat(l.join(),", 0);\n        ++").concat(l[s-2],";\n        ").concat(t," sourceLocA = ").concat(t,"(").concat(l.join(),", 0);\n        --").concat(l[s-1],";\n        ").concat(t," sourceLocB = ").concat(t,"(").concat(l.join(),", 0);\n        --").concat(l[s-2],";")}else h=s,u="\n        ".concat(c," sourceLocR = coords;\n        ++").concat(l[s-1],";\n        ").concat(c," sourceLocG = coords;\n        ++").concat(l[s-2],";\n        ").concat(c," sourceLocA = coords;\n        --").concat(l[s-1],";\n        ").concat(c," sourceLocB = coords;\n        --").concat(l[s-2],";");const d=["x","y","z","w","u","v"].slice(0,h),p="."+d[h-1],f=d.map((t=>"int "+t)),m=e6("sourceLocR",h-1).concat("inIdx.r"),g=e6("sourceLocG",h-1).concat("inIdx.g"),y=e6("sourceLocB",h-1).concat("inIdx.b"),v=e6("sourceLocA",h-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",x=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(v.join(),")));"),_="vec4(\n            getAChannel(".concat(m.join(),"),\n            hasNextCol ? getAChannel(").concat(g.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(v.join(),") : 0.)"),w=r?"":"\n      float getBestIndicesAChannel(".concat(f.join(),") {\n        return getChannel(getBestIndicesA(").concat(d.join(),"),\n                                          vec2(").concat(d.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(f.join(),") {\n        return getChannel(getA(").concat(d.join(),"),\n                               vec2(").concat(d.slice(-2).join(),"));\n      }\n      ").concat(w,"\n      void main() {\n        ").concat(c," coords = getOutputCoords();\n        bool hasNextCol = ").concat(l[s-1]," < ").concat(a[s-1]-1,";\n        bool hasNextRow = ").concat(l[s-2]," < ").concat(a[s-2]-1,";\n        ").concat(u,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(p,", sourceLocG").concat(p,",\n          sourceLocB").concat(p,", sourceLocA").concat(p,") * ").concat(e,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(_,";\n\n        for (int i = 0; i < ").concat(e,"; i++) {\n          inIdx = srcIdx;\n          ").concat(x,"\n          vec4 candidate = ").concat(_,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(b,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}}function C5(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e.shape[0],o=e.shape[1];null!=r&&(i=r.shape[0],o=r.shape[1]);const a=MJ(o),s={windowSize:a,inSize:o,batchSize:i,outSize:Math.ceil(o/a)},c=new M5(s,n,null==r),l=[e];null!=r&&l.push(r);const u=t.runWebGLProgram(c,l,"int32");if(1===u.shape[1])return u;const h=C5(t,e,n,u);return t.disposeIntermediateTensorInfo(u),h}function k5(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i=null!=r?r.shape:e.shape,o=MJ(i[i.length-1]),a=new O5(i,o,n,null==r),s=null==r?[e]:[e,r],c=t.runWebGLProgram(a,s,"int32");if(c.shape.length===e.shape.length){const r=k5(t,e,n,c);return t.disposeIntermediateTensorInfo(c),r}return c}function P5(t,e,n,r){const i=[n];if(EX("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!sU().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const n=[],o=t.texData.get(e.dataId);let a=e;null!==o&&o.isPacked&&(a=t.unpackTensor(e),n.push(a));const[s,c]=SX(a.shape,i),l=Nj(c),u=$6({inputs:{x:a},backend:t,attrs:{shape:[-1,l]}});n.push(u);const h=C5(t,u,r);n.push(h);const d=$6({inputs:{x:h},backend:t,attrs:{shape:s}});return n.forEach((e=>t.disposeIntermediateTensorInfo(e))),d}return k5(t,e,r)}const I5={kernelName:yU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o}=r;let a=Uj(o,i.shape);const s=AX(a,i.shape.length);let c=i;const l=[];null!=s&&(c=c5({inputs:{x:i},backend:n,attrs:{perm:s}}),l.push(c),a=OX(a.length,c.shape.length)),EX("argMax",[a[0]],c.shape.length);const u=P5(n,c,a[0],"max");return l.forEach((t=>n.disposeIntermediateTensorInfo(t))),u}};const N5={kernelName:vU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o}=r;let a=Uj(o,i.shape);const s=AX(a,i.shape.length);let c=i;const l=[];null!=s&&(c=c5({inputs:{x:i},backend:n,attrs:{perm:s}}),l.push(c),a=OX(a.length,c.shape.length)),EX("argMin",[a[0]],c.shape.length);const u=P5(n,c,a[0],"min");return l.forEach((t=>n.disposeIntermediateTensorInfo(t))),u}},R5=G6({opSnippet:l6+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),D5={kernelName:bU,backendName:"webgl",kernelFunc:R5},L5=G6({opSnippet:l6+"return log(x + sqrt(x * x + 1.0));"}),F5={kernelName:xU,backendName:"webgl",kernelFunc:L5},j5=G6({opSnippet:l6+"\n  return atan(x);\n"}),U5={kernelName:_U,backendName:"webgl",kernelFunc:j5},B5=W6({opSnippet:O6+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+k6+"\n  return result;\n"}),z5={kernelName:SU,backendName:"webgl",kernelFunc:B5},V5=G6({opSnippet:l6+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),G5={kernelName:wU,backendName:"webgl",kernelFunc:V5};class W5{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");const o=t.filterWidth,a=t.strideHeight,s=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;const f="avg"===e,m="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),g="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d");let y="0.0";if(f||(y="-1.0 / 1e-20"),n){const e=">=";return void(this.userCode="\n        const ivec2 strides = ivec2(".concat(a,", ").concat(s,");\n        const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(u,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(e," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(r?i?m:g:"wR * ".concat(h," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let v="".concat(e,"(").concat(e,"(").concat(e,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(v="avgValue / max(count, 1.0)");const b=4*Math.floor(o/4),x=o%4,_="\n      if (".concat(f,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(a,", ").concat(s,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(b,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(_,"\n          }\n\n          int xC = xCCorner + ").concat(b,";\n          if (").concat(1===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(_,"\n          } else if (").concat(2===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(_,"\n          } else if (").concat(3===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(_,"\n          }\n        }\n        setOutput(").concat(v,");\n      }\n    ")}}class H5{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");const o=t.filterWidth,a=t.strideDepth,s=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,u=t.dilationHeight,h=t.dilationWidth,d=t.effectiveFilterDepth,p=t.effectiveFilterHeight,f=t.effectiveFilterWidth,m=t.padInfo.front,g=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;const v="avg"===e;let b="0.0";if(v||(b="-1.0 / 1e-20"),n){const e=">=";return void(this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(a,", ").concat(s,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(d,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(u,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(f,";\n                  wC += ").concat(h,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(e," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(r?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(p," * ").concat(f," +\n                      wR * ").concat(f," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let x="".concat(e,"(").concat(e,"(").concat(e,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(x="avgValue / max(count, 1.0)");const _=4*Math.floor(o/4),w=o%4,S="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(a,", ").concat(s,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(u,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(_,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(h,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(h,", ch)\n              );\n\n              ").concat(S,"\n            }\n\n            int xC = xCCorner + ").concat(_,";\n            if (").concat(1===w,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(2===w,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(3===w,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                initializationValue\n              );\n\n              ").concat(S,"\n            }\n          }\n        }\n        setOutput(").concat(x,");\n      }\n    ")}}const q5={kernelName:TU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;X1(i,"avgPool");const{filterSize:o,strides:a,pad:s,dimRoundingMode:c}=r;kj(Sq(a,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(1,"'")));const l=pq(i.shape,o,a,1,s,c);if(1===l.filterWidth&&1===l.filterHeight&&Rj(l.inShape,l.outShape))return I6({inputs:{x:i},backend:n});const u=new W5(l,"avg",!1);return n.runWebGLProgram(u,[i],"float32")}};const X5={kernelName:EU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:o,strides:a,pad:s,dimRoundingMode:c,dataFormat:l}=r,u=fq(i.shape,o,a,[1,1,1],s,c,l),h=new H5(u,"avg",!1);return n.runWebGLProgram(h,[i],"float32")}};class Y5{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=s-1-t.padInfo.top,u=c-1-t.padInfo.left,h=1/(e*n);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(u,");\n      const float avgMultiplier = float(").concat(h,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(s,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(a,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class K5{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,h=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=u-1-t.padInfo.front,f=h-1-t.padInfo.top,m=d-1-t.padInfo.left,g=1/(e*n*r);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(f,", ").concat(m,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n            wD += ").concat(s,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const Z5={kernelName:"AvgPool3DGrad",backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:o}=e,a=o,{filterSize:s,strides:c,pad:l,dimRoundingMode:u}=r,h=fq(a.shape,s,c,[1,1,1],l,u),d=new K5(h);return n.runWebGLProgram(d,[i],a.dtype)}};const J5={kernelName:"AvgPoolGrad",backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:o}=e,a=o;X1([i,o],"avgPoolGrad");const{filterSize:s,strides:c,pad:l}=r,u=pq(a.shape,s,c,1,l),h=new Y5(u);return n.runWebGLProgram(h,[i],a.dtype)}};const $5={kernelName:AU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:o}=e,{transposeA:a,transposeB:s}=r;return h5({a:i,b:o,transposeA:a,transposeB:s,backend:n})}};class Q5{constructor(t,e,n,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],iH(t,e),iH(t,n);let a="0.0";null!=r&&(iH(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let s="1.0";null!=i&&(iH(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(a,";\n        float scale = ").concat(s,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")}}class t8{constructor(t,e,n,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],iH(t,e),iH(t,n);let a="vec4(0.0)";null!=r&&(iH(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=i&&(iH(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(a,";\n        vec4 scale = ").concat(s,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")}}const e8={kernelName:uB,backendName:"webgl",kernelFunc:t=>{let{inputs:e,backend:n,attrs:r}=t;const{x:i,mean:o,variance:a,offset:s,scale:c}=e;kj(o.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),kj(null==s||o.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),kj(null==c||o.shape.length===c.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:l}=r;null==l&&(l=.001);const u=[i,o,a];let h=null;null!=s&&(h=s.shape,u.push(s));let d=null;null!=c&&(d=c.shape,u.push(c));const p=sU().getBool("WEBGL_PACK_NORMALIZATION")?new t8(i.shape,o.shape,a.shape,h,d,l):new Q5(i.shape,o.shape,a.shape,h,d,l);return n.runWebGLProgram(p,u,u[0].dtype)}};class n8{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const e=h2(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(t){if(1===t)return"sourceLoc";if(t<=6)return r8.slice(0,t).map((t=>"sourceLoc."+t)).join(",");throw Error("Slicing for rank ".concat(t," is not yet supported"))}(this.rank);let r;const i=t.map(((t,e)=>"sourceLoc.".concat(r8[e]," = start[").concat(e,"] + coords.").concat(r8[e],";")));r="\n        ".concat(e," sourceLoc;\n        ").concat(e," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(n,"));\n      }\n    ")}}const r8=["x","y","z","w","u","v"];class i8{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const e=h2(this.rank),n=e6("coords",this.rank),r=e6("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(r.slice(-2).join(),")"),o="getChannel(getSource(".concat(r.join(),"), ").concat(i,")"),a="\n      result.x = ".concat(o,";\n      if (++").concat(n[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(r[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(r[this.rank-1],";\n      }\n    "),s=1===this.rank?"":"\n      --".concat(n[this.rank-1],";\n      if (++").concat(n[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(r[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(n[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(r[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(e,"(").concat(t.map(((t,e)=>"start[".concat(e,"]"))).join(),");"):t.map(((t,e)=>"".concat(r[e]," = ").concat(n[e]," + start[").concat(e,"];"))).join("\n");this.userCode="\n      void main() {\n        ".concat(e," coords = getOutputCoords();\n        ").concat(e," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(a,"\n        ").concat(s,"\n        setOutput(result);\n      }\n    ")}}function o8(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:o,size:a}=r,[s,c]=JH(i,o,a);if(FH(i,s,c),0===Nj(c))return n.makeTensorInfo(c,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||"string"===i.dtype){const t=n.texData.get(i.dataId),e=U4(t.values,s,c,i.shape,i.dtype);return n.makeTensorInfo(c,i.dtype,e)}const{isPacked:l}=n.texData.get(i.dataId),u=KH(i.shape,s,c);if(l||!u){const t=sU().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new i8(c):new n8(c),e=[s];return n.runWebGLProgram(t,[i],i.dtype,e)}return n.uploadToGPU(i.dataId),function(t,e,n,r){const i=r.texData.get(t.dataId),o=r.makeTensorInfo(n,t.dtype),a=r.texData.get(o.dataId);Object.assign(a,i),a.refCount=1,a.shape=n,a.dtype=t.dtype;let s=ZH(e,Kj(t.shape));i.slice&&(s+=i.slice.flatOffset),a.slice={flatOffset:s,origDataId:i.slice&&i.slice.origDataId||t.dataId};const c=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,c+1),o}(i,s,c,n)}const a8={kernelName:mz,backendName:"webgl",kernelFunc:o8},s8={kernelName:MU,backendName:"webgl",kernelFunc:t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:o,crops:a}=r;kj(i.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const s=o.reduce(((t,e)=>t*e)),c=CJ(i.shape,o,s),l=kJ(c.length,o.length),u=PJ(i.shape,o,s),h=IJ(a,o.length),d=NJ(u,a,o.length),p=[],f=$6({inputs:{x:i},backend:n,attrs:{shape:c}}),m=c5({inputs:{x:f},backend:n,attrs:{perm:l}}),g=$6({inputs:{x:m},backend:n,attrs:{shape:u}}),y=o8({inputs:{x:g},backend:n,attrs:{begin:h,size:d}});return p.push(f),p.push(m),p.push(g),p.forEach((t=>n.disposeIntermediateTensorInfo(t))),y}};const c8={kernelName:OU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:o}=e,{size:a}=r,s=n.readSync(i.dataId),c=n.readSync(o.dataId),l=a4(s,c,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,l)}};const l8={kernelName:CU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,o=sU().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=sU().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||1===a){const t=n.texData.get(r.dataId).values,e=n.texData.get(i.dataId).values,[o,a]=c4(r.shape,i.shape,t,e,r.dtype),s=n.makeTensorInfo(a,r.dtype);return n.texData.get(s.dataId).values=o,s}let s;return s=o?new P6("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",r.shape,i.shape,!1):new C6("\n  return float(int(a.r) & int(b.r));\n",r.shape,i.shape),n.runWebGLProgram(s,[r,i],r.dtype)}};const u8={kernelName:kU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,o=n.readSync(r.dataId),a=n.readSync(i.dataId),s=iH(Array.from(o),Array.from(a));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},h8=W6({opSnippet:"return float(a != b);",cpuKernelImpl:C4,dtype:"bool"}),d8={kernelName:BB,backendName:"webgl",kernelFunc:h8};function p8(t){const{inputs:e,backend:n}=t,{input:r}=e;return I6({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const f8={kernelName:tz,backendName:"webgl",kernelFunc:p8},m8="return float(int(x));";const g8={kernelName:PU,backendName:"webgl",kernelFunc:function t(e){const{inputs:n,backend:r,attrs:i}=e,{x:o}=n,{dtype:a}=i;if("complex64"===a){if("complex64"===o.dtype)return I6({inputs:{x:o},backend:r});const e=yY(o.shape),n=t({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),i=R6({inputs:{real:n,imag:e},backend:r});return e.dispose(),r.disposeIntermediateTensorInfo(n),i}if("complex64"===o.dtype){const e=p8({inputs:{input:o},backend:r}),n=t({inputs:{x:e},backend:r,attrs:{dtype:a}});return r.disposeIntermediateTensorInfo(e),n}if(!Gj(o.dtype,a)){const t=I6({inputs:{x:o},backend:r});return{dataId:t.dataId,shape:t.shape,dtype:a}}if(r.shouldExecuteOnCPU([o])){const t=r.texData.get(o.dataId).values,[e,n,i]=l4(t,o.shape,o.dtype,a);return r.makeTensorInfo(e,n,i)}if("int32"===a)return function(t,e){const n=new c6(t.shape,m8),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===a){const t=r.makeTensorInfo([],"bool",zj("bool",1)),e=h8({inputs:{a:o,b:t},backend:r});return r.disposeIntermediateTensorInfo(t),e}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(a))}},y8="return ceil(x);",v8=G6({opSnippet:y8,packedOpSnippet:y8,cpuKernelImpl:u4}),b8={kernelName:IU,backendName:"webgl",kernelFunc:v8};class x8{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class _8{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const w8={kernelName:NU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{clipValueMin:o,clipValueMax:a}=r;let s;s=sU().getBool("WEBGL_PACK_CLIP")?new _8(i.shape):new x8(i.shape);const c=[[o],[a]];return n.runWebGLProgram(s,[i],i.dtype,c)}};class S8{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function T8(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}const E8={kernelName:DU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.texData.get(r.dataId),o=new S8(r.shape),a=[T8(r,i.complexTensorInfos.real),T8(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(o,a,a[0].dtype)}};class A8{constructor(t){this.outputShape=[],this.outputShape=xJ(t,1),this.variableNames=t.map(((t,e)=>"T".concat(e)));const e=new Array(t.length-1);e[0]=t[0][1];for(let o=1;o<e.length;o++)e[o]=e[o-1]+t[o][1];const n=["if (yC < ".concat(e[0],") setOutput(getT0(yR, yC));")];for(let o=1;o<e.length;o++){const t=e[o-1];n.push("else if (yC < ".concat(e[o],") ")+"setOutput(getT".concat(o,"(yR, yC-").concat(t,"));"))}const r=e.length,i=e[e.length-1];n.push("else setOutput(getT".concat(r,"(yR, yC-").concat(i,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(n.join("\n        "),"\n      }\n    ")}}class M8{constructor(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=xJ(t,e);const n=this.outputShape,r=n.length,i=h2(r),o=e6("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(((t,e)=>"T".concat(e)));const s=new Array(t.length-1);s[0]=t[0][e];for(let f=1;f<s.length;f++)s[f]=s[f-1]+t[f][e];const c=a[e],l=a.slice(-2),u=a.join();let h="if (".concat(c," < ").concat(s[0],") {\n        return getChannel(\n            getT0(").concat(u,"), vec2(").concat(l.join(),"));\n        }");for(let f=1;f<s.length;f++){const t=s[f-1];h+="\n        if (".concat(c," < ").concat(s[f],"  && ").concat(c," >= ").concat(s[f-1],") {\n          return getChannel(\n            getT").concat(f,"(").concat(O8(a,c,t),"),\n            vec2(").concat(O8(l,c,t),"));\n        }")}const d=s.length,p=s[s.length-1];h+="\n        return getChannel(\n          getT".concat(d,"(").concat(O8(a,c,p),"),\n          vec2(").concat(O8(l,c,p),"));"),this.userCode="\n      float getValue(".concat(a.map((t=>"int "+t)),") {\n        ").concat(h,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[r-1]," = ").concat(o[r-1]," + 1;\n        if (").concat(o[r-1]," < ").concat(n[r-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[r-2]," = ").concat(o[r-2]," + 1;\n        if (").concat(o[r-2]," < ").concat(n[r-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[r-1]," = ").concat(o[r-1]," - 1;\n        if (").concat(o[r-2]," < ").concat(n[r-2]," &&\n            ").concat(o[r-1]," < ").concat(n[r-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}}function O8(t,e,n){const r=t.indexOf(e),i=t.map(((t,e)=>e===r?"".concat(t," - ").concat(n):t));return i.join()}function C8(t){const{inputs:e,backend:n}=t,{input:r}=e;return I6({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const k8={kernelName:yB,backendName:"webgl",kernelFunc:C8};function P8(t,e,n){const r=t[0].dtype;if("complex64"===r){const r=t.map((t=>p8({inputs:{input:t},backend:n}))),i=t.map((t=>C8({inputs:{input:t},backend:n}))),o=P8(r,e,n),a=P8(i,e,n),s=R6({inputs:{real:o,imag:a},backend:n});return r.forEach((t=>n.disposeIntermediateTensorInfo(t))),i.forEach((t=>n.disposeIntermediateTensorInfo(t))),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),s}let i=n.shouldExecuteOnCPU(t);if("string"===r&&(i=!0),i){const i=t.map((t=>{const r=Nj(t.shape.slice(e));return $6({inputs:{x:t},backend:n,attrs:{shape:[-1,r]}})})),o=i.map((t=>({vals:n.readSync(t.dataId),shape:t.shape}))),a=xJ(i.map((t=>t.shape)),1),s=1===i[0].shape[0],c=h4(o,a,r,s),l=xJ(t.map((t=>t.shape)),e),u=n.makeTensorInfo(l,r,c);return i.forEach((t=>n.disposeIntermediateTensorInfo(t))),u}const o=t.filter((t=>Nj(t.shape)>0)),a=sU().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(1===o.length){const e=a?new c6(t[0].shape,m6):new w6(t[0].shape,m6);return n.runWebGLProgram(e,t,r)}const s=sU().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>s){const t=[];for(let i=0;i<o.length;i+=s){const r=o.slice(i,i+s);t.push(P8(r,e,n))}const r=P8(t,e,n);for(const e of t)n.disposeIntermediateTensorInfo(e);return r}if(a){const t=new M8(o.map((t=>t.shape)),e);return n.runWebGLProgram(t,o,r)}const{tensors2D:c,outShape:l}=function(t,e,n){const r=xJ(t.map((t=>t.shape)),e),i=t.map((t=>$6({inputs:{x:t},attrs:{shape:[-1,Nj(t.shape.slice(e))]},backend:n})));return{tensors2D:i,outShape:r}}(o,e,n),u=new A8(c.map((t=>t.shape))),h=n.runWebGLProgram(u,c,r);c.forEach((t=>n.disposeIntermediateTensorInfo(t)));const d=$6({inputs:{x:h},attrs:{shape:l},backend:n});return n.disposeIntermediateTensorInfo(h),d}function I8(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,o=Uj(i,e[0].shape)[0],a=e.map((t=>t.shape));bJ(a,o);const s=xJ(e.map((t=>t.shape)),o);if(0===Nj(s))return n.makeTensorInfo(s,e[0].dtype,[]);const c=e.filter((t=>Nj(t.shape)>0));return 1===c.length?I6({inputs:{x:c[0]},backend:n}):P8(c,o,n)}const N8={kernelName:LU,backendName:"webgl",kernelFunc:I8};class R8{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.outputShape=t.outShape;const o=t.padInfo.top,a=t.padInfo.left,s=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,u=t.dilationWidth,h=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),f=t.inChannels%4,m="channelsLast"===t.dataFormat,g=m?1:2,y=m?2:3,v=m?3:1;let b="",x="";n&&(b=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),x="result = activation(result);");const _=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      const ivec2 strides = ivec2(").concat(s,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(a,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(v,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(d,"; wC++) {\n            int xC = xCCorner + wC * ").concat(u,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===f,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===f,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===f,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(_,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}}class D8{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,u=t.filterDepth,h=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),f=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(a,");\n      const ivec3 pads = ivec3(").concat(e,", ").concat(n,", ").concat(r,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(u,"; wF++) {\n          int xF = xFCorner + wF * ").concat(s,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===f,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===f,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===f,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class L8{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=v2(this.outputShape.length);const o=t.padInfo.left,a=t.strideWidth,s=t.dilationWidth,c=t.filterHeight,l=t.filterWidth,u=l;let h="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let m=0;m<l;m++)h+="\n           vec4 xTexelC".concat(2*m,";\n           int xTexelC").concat(2*m,"Ready;\n           vec4 xTexelC").concat(2*m+1,";\n           int xTexelC").concat(2*m+1,"Ready;\n           vec4 xC").concat(m,";");h+="\n     for (int r = 0; r < ".concat(c,"; r++) {\n      for (int d1 = 0; d1 < ").concat(t.inChannels,"; d1 += 2) {\n       ");for(let m=0;m<l;m++)h+="\n           xTexelC".concat(2*m," = vec4(0.0);\n           xTexelC").concat(2*m,"Ready = 0;\n           xTexelC").concat(2*m+1," = vec4(0.0);\n           xTexelC").concat(2*m+1,"Ready = 0;\n           xC").concat(m," = vec4(0.0);");h+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let m=0;m<(u+1)/2;m++){const e=2*m;if(h+="\n           xC = xCCorner + ".concat(e*s,";\n           "),1===a){if(e<l&&(o%2===1?(h+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                   xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(e,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(e,"Ready = 1;\n                 }\n               "),h+=1===s&&e>0?"\n                 xC".concat(e," = vec4(xTexelC").concat(e-2,".zw, xTexelC").concat(e,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(e," = vec4(previous.zw, xTexelC").concat(e,".xy);\n                   } else {\n                     xC").concat(e," = vec4(0.0, 0.0, xTexelC").concat(e,".xy);\n                   }\n                   ")):h+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                   xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(e,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(e,"Ready = 1;\n                 }\n\n                 xC").concat(e," = xTexelC").concat(e,";\n                 "),e+1<l)){const t=o%2===0?Oj(s):s;s%2===0&&o%2===1||s%2!==0&&o%2!==1?(h+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(t,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                     xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(e+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(e+1,"Ready = 1;\n                   }\n                   "),h+=s>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(e+1," = vec4(previous.zw, xTexelC").concat(e+1,".xy);\n                     } else {\n                      xC").concat(e+1," = vec4(0.0, 0.0, xTexelC").concat(e+1,".xy);\n                     }\n                     "):"\n                     xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".xy);\n                     ")):h+=1===t?"\n                     xC".concat(e+1," = xTexelC").concat(e,";\n                     "):"\n                     xCOffset = xC + ".concat(t,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                       xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(e+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(e+1,"Ready = 1;\n                     }\n\n                     xC").concat(e+1," = xTexelC").concat(e+1,";\n                     ")}}else e<l&&(o%2===1?(h+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                   xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(e,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(e,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                   xTexelC").concat(e+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(e+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(e+1,"Ready = 1;\n                 }\n\n                 xC").concat(e," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n               "),e+1<l&&(h+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(e+1," = vec4(xTexelC").concat(e+1,".xy, final.xy);\n                 "))):(h+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                   xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(e,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(e,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                   xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(e+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(e+1,"Ready = 1;\n                 }\n\n                 xC").concat(e," = vec4(\n                   xTexelC").concat(e,".xy, xTexelC").concat(e+1,".xy);\n               "),e+1<l&&(h+="\n                   xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n                 "))));e<l&&(h+="\n             wTexel = getW(r, ".concat(e,", d1, d2);\n             dotProd += xC").concat(e,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(t.inChannels,") {\n               dotProd += xC").concat(e,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),e+1<l&&(h+="\n               wTexel = getW(r, ".concat(e+1,", d1, d2);\n               dotProd += xC").concat(e+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(t.inChannels,") {\n                 dotProd += xC").concat(e+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}h+="\n     }\n   ",h+="\n     }\n   ",h+="\n     }\n   ";let d="",p="";n&&(d=r?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(n,"\n         }"):i?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(n,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(n,"\n         }"),p="result = activation(result);");const f=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(d,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(h,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(f,"\n         ").concat(p,"\n         setOutput(result);\n       }\n     ")}}class F8{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=v2(this.outputShape.length);const{dataFormat:n}=e,r=K1(),i="channelsLast"===n,o=i?1:2,a=i?2:3,s=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(t[2]," && pos < ").concat(t[1],") {");let c="";for(let l=0;l<=1;l++)for(let t=0;t<=1;t++)c+="\n          blockIndex = rc.z + ".concat(t,";\n          pos = rc.y + ").concat(l,";\n\n          ").concat(s,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(a,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+t,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+t,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(r.output," = result;\n      }\n    ")}}function j8(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&1===n&&t[0]>1?[t[0],1]:null}function U8(t){let{x:e,filter:n,convInfo:r,backend:i,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:c=null}=t;const l=e.shape,u=i.texData.get(e.dataId),h=r.inChannels,d=l[0]*l[1]*l[2],p=r.outChannels,f="channelsLast"===r.dataFormat,m=!1;let g;const y=[];if(null!=a){const t=j8(a.shape,f);null!=t&&(a=$6({inputs:{x:a},backend:i,attrs:{shape:t}}),y.push(a))}if(null!=o){const t=j8(o.shape,f);null!=t&&(o=$6({inputs:{x:o},backend:i,attrs:{shape:t}}),y.push(o))}if(!((1===d||1===p)&&h>u5)&&u.isPacked&&f&&null!=u.texture&&l[2]%2!==0&&Rj(u.shape.slice(-3),l.slice(-3))){const t=l[0]*l[1]*(l[2]+1),h={dataId:e.dataId,shape:[1,t,r.inChannels],dtype:e.dtype},d=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,kj(B1(u.shape,h.shape),(()=>"packed reshape ".concat(u.shape," to ").concat(h.shape," isn't free")));const p=$6({inputs:{x:n},backend:i,attrs:{shape:[1,r.inChannels,r.outChannels]}});y.push(p);const f=h5({a:h,b:p,backend:i,transposeA:false,transposeB:m,bias:o,activation:c,preluActivationWeights:a,leakyreluAlpha:s}),v=i.texData.get(f.dataId);kj(v.isPacked,(()=>"batchMatMul result is expected to be packed")),u.shape=d,v.shape=r.outShape,g=I6({inputs:{x:f},backend:i}),g.shape=r.outShape,y.push(f)}else{const t=r.outHeight*r.outWidth,l=$6({inputs:{x:e},backend:i,attrs:{shape:f?[r.batchSize,t,r.inChannels]:[r.batchSize,r.inChannels,t]}}),u=$6({inputs:{x:n},backend:i,attrs:{shape:[1,r.inChannels,r.outChannels]}}),h=h5({a:f?l:u,b:f?u:l,transposeA:!f,transposeB:m,backend:i,bias:o,activation:c,preluActivationWeights:a,leakyreluAlpha:s});g=$6({inputs:{x:h},backend:i,attrs:{shape:r.outShape}}),y.push(l),y.push(u),y.push(h)}for(const v of y)i.disposeIntermediateTensorInfo(v);return g}function B8(t){let{x:e,filter:n,convInfo:r,backend:i,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:c=null}=t;const{filterWidth:l,filterHeight:u,inChannels:h,outWidth:d,outHeight:p,dataFormat:f}=r,m="channelsLast"===f,g=l*u*h,y=p*d,v=[r.batchSize,g,y],b=[];if(null!=a){const t=j8(a.shape,m);null!=t&&(a=$6({inputs:{x:a},backend:i,attrs:{shape:t}}),b.push(a))}if(null!=o){const t=j8(o.shape,m);null!=t&&(o=$6({inputs:{x:o},backend:i,attrs:{shape:t}}),b.push(o))}const x=$6({inputs:{x:n},backend:i,attrs:{shape:[1,g,Nj(n.shape)/g]}});b.push(x);const _=new F8(v,r),w=[e.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],S=i.runWebGLProgram(_,[e],"float32",w),T=$6({inputs:{x:S},backend:i,attrs:{shape:v}});b.push(S),b.push(T);const E=null!=o,A=null!=a,M="leakyrelu"===c,O=c?H6(c,!0):null,C=new q6(m?T.shape:x.shape,m?x.shape:T.shape,m?[r.batchSize,y,r.outChannels]:[r.batchSize,r.outChannels,y],!0,!1,E,O,A,M),k=m?[T,x]:[x,T];if(o&&k.push(o),A&&k.push(a),M){const t=i.makeTensorInfo([],"float32",_V(s,"float32"));k.push(t),b.push(t)}const P=i.runWebGLProgram(C,k,"float32"),I=$6({inputs:{x:P},backend:i,attrs:{shape:r.outShape}});b.push(P);for(const N of b)i.disposeIntermediateTensorInfo(N);return I}const z8={kernelName:FU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:o}=e,{strides:a,pad:s,dataFormat:c,dilations:l,dimRoundingMode:u}=r,h=Eq(c),d=mq(i.shape,o.shape,a,l,s,u,!1,h);let p;if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if(d.strideWidth<=2&&"channelsLast"===h&&sU().getBool("WEBGL_EXP_CONV")){const t=new L8(d),e=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];p=n.runWebGLProgram(t,[i,o],"float32",e)}else if(sU().getBool("WEBGL_CONV_IM2COL"))p=B8({x:i,filter:o,convInfo:d,backend:n});else{const t=new R8(d);p=n.runWebGLProgram(t,[i,o],"float32")}else p=U8({x:i,filter:o,convInfo:d,backend:n});const f=$6({inputs:{x:p},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(p),f}};class V8{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(e," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              ").concat(o?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class G8{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,a=e-1-t.padInfo.top,s=n-1-t.padInfo.left,c=o?1:2,l=o?2:3,u=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(a,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(u,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(e,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(e," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class W8{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,a=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(e," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(n," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(r," - ").concat(a,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class H8{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=e-1-t.padInfo.front,c=n-1-t.padInfo.top,l=r-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(s,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(e,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(e," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(n,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(n," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(r,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(r," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const q8={kernelName:jU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:o}=e,{strides:a,pad:s,dataFormat:c,dimRoundingMode:l,filterShape:u}=r,h=Eq(c),d=mq(i.shape,u,a,1,s,l,!1,h),p=new V8(d);return n.runWebGLProgram(p,[i,o],"float32")}};class X8{constructor(t){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=v2(this.outputShape.length);const e=t.filterHeight,n=t.filterWidth,r=e-1-t.padInfo.top,i=n-1-t.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(r,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(e,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(e," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(t.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(t.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}}const Y8={kernelName:UU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:o}=e,{inputShape:a,strides:s,pad:c,dataFormat:l,dimRoundingMode:u}=r,h=Eq(l),d=mq(a,o.shape,s,1,c,u,!1,h);if(sU().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===h){const t=[[d.strideHeight,d.strideWidth]],e=new X8(d);return n.runWebGLProgram(e,[i,o],"float32",t)}{const t=new G8(d);return n.runWebGLProgram(t,[i,o],"float32")}}};const K8={kernelName:BU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:o}=e,{strides:a,pad:s,dilations:c}=r,l=gq(i.shape,o.shape,a,c,s),u=new D8(l);return n.runWebGLProgram(u,[i,o],"float32")}};const Z8={kernelName:"Conv3DBackpropFilterV2",backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:o}=e,{strides:a,pad:s,filterShape:c}=r,l=gq(i.shape,c,a,1,s),u=new W8(l);return n.runWebGLProgram(u,[i,o],"float32")}};const J8={kernelName:zU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:o}=e,{pad:a,strides:s,inputShape:c}=r,l=gq(c,o.shape,s,1,a),u=new H8(l);return n.runWebGLProgram(u,[i,o],"float32")}},$8={kernelName:"Cos",backendName:"webgl",kernelFunc:G6({opSnippet:V6+"\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(k6,"\n  return result;\n")})},Q8=G6({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),t7={kernelName:VU,backendName:"webgl",kernelFunc:Q8};class e7{constructor(t,e,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,s,c]=t,[l]=e,[u,h]=n;this.outputShape=[l,u,h,c];const d="bilinear"===r?1:0,[p,f]=["".concat(a-1,".0"),"".concat(s-1,".0")],[m,g,y]=u>1?["".concat((a-1)/(u-1)),"(y2-y1) * height_ratio","y1*".concat(p," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(p)],[v,b,x]=h>1?["".concat((s-1)/(h-1)),"(x2-x1) * width_ratio","x1*".concat(f," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(f)];this.userCode="\n      const float height_ratio = float(".concat(m,");\n      const float width_ratio = float(").concat(v,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(o,") {\n          return;\n        }\n\n        float height_scale = ").concat(g,";\n        float width_scale = ").concat(b,";\n\n        float in_y = ").concat(y,";\n        if( in_y < 0.0 || in_y > ").concat(p," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(x,";\n        if( in_x < 0.0 || in_x > ").concat(f," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(d," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")}}const n7={kernelName:HU,backendName:"webgl",kernelFunc:t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:o,boxInd:a}=e,{cropSize:s,method:c,extrapolationValue:l}=r,u=new e7(i.shape,o.shape,s,c,l);return n.runWebGLProgram(u,[i,o,a],"float32")}};var r7;!function(t){t.Prod="*",t.Sum="+"}(r7||(r7={}));class i7{constructor(t,e,n,r){this.op=t,this.outputShape=e,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===r7.Prod?"1.0":"0.0",a=n?o:"getX(".concat(o7(i,"coords",this.op),")"),s=this.outputShape[this.outputShape.length-1];let c="",l="";n?(c=r?"end != ".concat(s-1):"end != 0",l=r?"end + 1":"end - 1"):(c=r?"end + pow2 < ".concat(s):"end >= pow2",l=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(h2(i)," coords = getOutputCoords();\n        int end = ").concat(a7(i,"coords",this.op),";\n        float val = ").concat(a,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(l,";\n          ").concat(a7(i,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(o7(i,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}}function o7(t,e,n){if(1===t)return"".concat(e);if(2===t)return"".concat(e,".x, ").concat(e,".y");if(3===t)return"".concat(e,".x, ").concat(e,".y, ").concat(e,".z");if(4===t)return"".concat(e,".x, ").concat(e,".y, ").concat(e,".z, ").concat(e,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(t," is not yet supported"))}function a7(t,e,n){if(1===t)return"".concat(e);if(2===t)return"".concat(e,".y");if(3===t)return"".concat(e,".z");if(4===t)return"".concat(e,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(t," is not yet supported"))}function s7(t,e,n,r,i,o){const a=e.shape.length,s=AX([r],a);let c=e;null!=s&&(c=c5({inputs:{x:e},backend:n,attrs:{perm:s}}));const l=OX(1,a)[0];if(l!==a-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(e.shape.length-1," ")+"but got axis=".concat(r));const u=c.shape[l];let h=I6({inputs:{x:c},backend:n});for(let d=0;d<=Math.ceil(Math.log2(u))-1;d++){const e=new i7(t,c.shape,!1,o),r=[[d]],i=h;h=n.runWebGLProgram(e,[h],h.dtype,r),n.disposeIntermediateTensorInfo(i)}if(i){const e=new i7(t,c.shape,i,o),r=h;h=n.runWebGLProgram(e,[h],h.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=s){const t=c5({inputs:{x:h},backend:n,attrs:{perm:MX(s)}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(c),t}return h}const c7={kernelName:GU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,exclusive:a,reverse:s}=r;return s7(r7.Prod,i,n,o,a,s)}};const l7={kernelName:WU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,exclusive:a,reverse:s}=r;return s7(r7.Sum,i,n,o,a,s)}};const u7={kernelName:qU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:o}=e,{size:a,binaryOutput:s}=r;if(1===i.shape.length){const t=n.readSync(i.dataId),e=n.readSync(o.dataId),r=a4(t,e,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,r)}if(2===i.shape.length){const t=n.bufferSync(i),e=n.bufferSync(o),r=s4(t,e,a,s);return n.makeTensorInfo(r.shape,o.dtype,r.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(i.shape.length,"."))}};class h7{constructor(t,e,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(e,";\n      int offset_h = imod(h, ").concat(e,");\n      int in_w = w / ").concat(e,";\n      int offset_w = imod(w, ").concat(e,");\n      int offset_d = (offset_h * ").concat(e," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const d7={kernelName:XU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:o,dataFormat:a}=r,s=i.shape[0],c=("NHWC"===a?i.shape[1]:i.shape[2])*o,l=("NHWC"===a?i.shape[2]:i.shape[3])*o,u=("NHWC"===a?i.shape[3]:i.shape[1])/(o*o),h=new h7("NHWC"===a?[s,c,l,u]:[s,u,c,l],o,a);return n.runWebGLProgram(h,[i],i.dtype)}};class p7{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=v2(this.outputShape.length);const o=t.filterHeight,a=t.filterWidth,s=t.outChannels/t.inChannels;let c="",l="";n&&(c=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),l="result = activation(result);");const u=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(s,";\n        int q = d2 - d1 * ").concat(s,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(a,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(u,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")}}class f7{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=v2(this.outputShape.length);const o=t.outChannels/t.inChannels,a=t.padInfo.left,s=t.strideWidth,c=t.dilationWidth,l=t.filterHeight,u=t.filterWidth,h=u;let d="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let g=0;g<u;g++)d+="\n          vec4 xTexelC".concat(2*g,";\n          int xTexelC").concat(2*g,"Ready;\n          vec4 xTexelC").concat(2*g+1,";\n          int xTexelC").concat(2*g+1,"Ready;\n          vec4 xC").concat(g,";");d+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(let g=0;g<u;g++)d+="\n          xTexelC".concat(2*g," = vec4(0.0);\n          xTexelC").concat(2*g,"Ready = 0;\n          xTexelC").concat(2*g+1," = vec4(0.0);\n          xTexelC").concat(2*g+1,"Ready = 0;\n          xC").concat(g," = vec4(0.0);");d+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let g=0;g<(h+1)/2;g++){const t=2*g;if(d+="\n          xC = xCCorner + ".concat(t*c,";\n          "),1===s){if(t<u&&(a%2===1?(d+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                  xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(t,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(t,"Ready = 1;\n                }\n              "),d+=1===c&&t>0?"\n                xC".concat(t," = vec4(xTexelC").concat(t-2,".zw, xTexelC").concat(t,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(t," = vec4(previous.zw, xTexelC").concat(t,".xy);\n                  } else {\n                    xC").concat(t," = vec4(0.0, 0.0, xTexelC").concat(t,".xy);\n                  }\n                  ")):d+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                  xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(t,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(t,"Ready = 1;\n                }\n\n                xC").concat(t," = xTexelC").concat(t,";\n                "),t+1<u)){const e=a%2===0?Oj(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(d+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(e,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                    xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(t+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(t+1,"Ready = 1;\n                  }\n                  "),d+=c>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(t+1," = vec4(previous.zw, xTexelC").concat(t+1,".xy);\n                    } else {\n                     xC").concat(t+1," = vec4(0.0, 0.0, xTexelC").concat(t+1,".xy);\n                    }\n                    "):"\n                    xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".xy);\n                    ")):d+=1===e?"\n                    xC".concat(t+1," = xTexelC").concat(t,";\n                    "):"\n                    xCOffset = xC + ".concat(e,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                      xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(t+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(t+1,"Ready = 1;\n                    }\n\n                    xC").concat(t+1," = xTexelC").concat(t+1,";\n                    ")}}else t<u&&(a%2===1?(d+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                  xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(t,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(t,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                  xTexelC").concat(t+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(t+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(t+1,"Ready = 1;\n                }\n\n                xC").concat(t," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n              "),t+1<u&&(d+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(t+1," = vec4(xTexelC").concat(t+1,".xy, final.xy);\n                "))):(d+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                  xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(t,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(t,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                  xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(t+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(t+1,"Ready = 1;\n                }\n\n                xC").concat(t," = vec4(\n                  xTexelC").concat(t,".xy, xTexelC").concat(t+1,".xy);\n              "),t+1<u&&(d+="\n                  xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n                "))));t<u&&(d+="\n            wTexel = getW(r, ".concat(t,", d1, q);\n            dotProd += xC").concat(t," * vec4(wTexel.xz, wTexel.xz);\n          "),t+1<u&&(d+="\n              wTexel = getW(r, ".concat(t+1,", d1, q);\n              dotProd += xC").concat(t+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}d+="\n    }\n  ",d+="\n      }\n    ";let p="",f="";n&&(p=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(n,"\n        }"),f="result = activation(result);");const m=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(p,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(d,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(m,"\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")}}const m7={kernelName:YU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:o}=e,{strides:a,pad:s,dilations:c,dimRoundingMode:l}=r;let u=c;null==u&&(u=[1,1]),kj(Sq(a,u),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(a," and dilations '").concat(u,"'")));const h=mq(i.shape,o.shape,a,u,s,l,!0);let d;d=sU().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?new f7(h):new p7(h);const p=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(d,[i,o],"float32",p)}};class g7{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(e," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class y7{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=e-1-t.padInfo.top,a=n-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(a,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(e,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(e," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(s,"; dm++) {\n              int d2 = d1 * ").concat(s," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const v7={kernelName:KU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:o}=e,{strides:a,dilations:s,pad:c,dimRoundingMode:l,filterShape:u}=r,h=mq(i.shape,u,a,s,c,l,!0),d=new g7(h);return n.runWebGLProgram(d,[i,o],"float32")}};const b7={kernelName:ZU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:o}=e,{strides:a,dilations:s,pad:c,dimRoundingMode:l,inputShape:u}=r,h=mq(u,o.shape,a,s,c,l,!0),d=new y7(h);return n.runWebGLProgram(d,[i,o],"float32")}};class x7{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const _7={kernelName:JU,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{x:r}=e,i=[...r.shape,...r.shape],o=Nj(r.shape),a=$6({inputs:{x:r},backend:n,attrs:{shape:[o]}}),s=new x7(o),c=n.runWebGLProgram(s,[a],a.dtype),l=$6({inputs:{x:c},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),l}};class w7{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const{inHeight:e,inWidth:n,padInfo:r,strideHeight:i,strideWidth:o,filterHeight:a,filterWidth:s,dilationHeight:c,dilationWidth:l}=t,{top:u,left:h}=r;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(h,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(a,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(e,") {\n            for (int w = 0; w < ").concat(s,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(n,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}}const S7={kernelName:$U,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:o}=e,{strides:a,pad:s,dilations:c}=r,l=dq(i.shape,o.shape,a,s,"NHWC",c);let u;const h=new w7(l);u=n.runWebGLProgram(h,[i,o],"float32");const d=$6({inputs:{x:u},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(u),d}};const T7={kernelName:eB,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,o=e,{allDims:a,summedDims:s,idDims:c}=e$(i,o.length);r$(a.length,c,o);const{path:l,steps:u}=i$(s,c),h=u.length;let d=null,p=a.length;const f=[];for(let m=0;m<h;++m){for(const t of u[m]){const{permutationIndices:e,expandDims:r}=n$(p,c[t]);let i;o$(e)?i=o[t]:(i=c5({inputs:{x:o[t]},backend:n,attrs:{perm:e}}),f.push(i));const a=i.shape.slice();for(let t=0;t<r.length;++t)a.splice(r[t],0,1);Rj(i.shape,a)||(i=$6({inputs:{x:i},backend:n,attrs:{shape:a}}),f.push(i)),null===d?d=i:(d=Z6({inputs:{a:i,b:d},backend:n}),f.push(d))}m<h-1&&(l[m]>=0&&(d=a5({inputs:{x:d},backend:n,attrs:{axis:l[m]-(a.length-p),keepDims:!1}}),f.push(d)),p--)}for(const m of f)m!==d&&n.disposeIntermediateTensorInfo(m);return d}},E7={kernelName:"Elu",backendName:"webgl",kernelFunc:G6({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"})},A7={kernelName:"EluGrad",backendName:"webgl",kernelFunc:t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,o=sU().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new P6("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,i.shape):new C6("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,i.shape);return n.runWebGLProgram(o,[r,i],r.dtype)}},M7=W6({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:d4}),O7={kernelName:nB,backendName:"webgl",kernelFunc:M7},C7={kernelName:"Erf",backendName:"webgl",kernelFunc:G6({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(FJ,";\n  float a1 = ").concat(jJ,";\n  float a2 = ").concat(UJ,";\n  float a3 = ").concat(BJ,";\n  float a4 = ").concat(zJ,";\n  float a5 = ").concat(VJ,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")})},k7=G6({opSnippet:V6+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:p4,dtype:"float32"}),P7={kernelName:rB,backendName:"webgl",kernelFunc:k7};function I7(t){const{inputs:e,attrs:n,backend:r}=t,{dim:i}=n,{input:o}=e,a=o.shape.length,s=o.shape.slice();let c=i;return i<0&&(kj(-(a+1)<=i,(()=>"Axis must be in the interval [".concat(-(a+1),", ").concat(a,"]"))),c=a+i+1),s.splice(c,0,1),$6({inputs:{x:o},backend:r,attrs:{shape:s}})}const N7={kernelName:iB,backendName:"webgl",kernelFunc:I7},R7="return exp(x) - 1.0;",D7=G6({opSnippet:R7,packedOpSnippet:R7,cpuKernelImpl:f4}),L7={kernelName:oB,backendName:"webgl",kernelFunc:D7};class F7{constructor(t,e,n){this.variableNames=["real","imag"];const r=e[1];this.outputShape=e;const i=n?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),o=n?"".concat(r,".0"):"1.0";let a;if("real"===t)a="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));a="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(i,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(a,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(r,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(o,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}}function j7(t,e,n){const r=n.texData.get(t.dataId),i=Nj(t.shape),o=t.shape[t.shape.length-1],a=$6({inputs:{x:t},backend:n,attrs:{shape:[i/o,o]}}),s=a.shape,c=new F7("real",s,e),l=new F7("imag",s,e),u=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],h=n.runWebGLProgram(c,u,"float32"),d=n.runWebGLProgram(l,u,"float32"),p=R6({inputs:{real:h,imag:d},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d);const f=$6({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),f}const U7={kernelName:"FFT",backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{input:r}=e;return j7(r,!1,n)}};class B7{constructor(t,e){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function z7(t){const{backend:e,attrs:n}=t,{shape:r,value:i}=n;let{dtype:o}=n;if(o=o||qj(i),"string"===o){const t=Vj(o,Nj(r));return t.fill(i),e.makeTensorInfo(r,o,t)}{const t=new B7(r,i),n=[[i]];return e.runWebGLProgram(t,[],o,n)}}const V7={kernelName:aB,backendName:"webgl",kernelFunc:z7};class G7{constructor(t){this.variableNames=["Image"],this.outputShape=[];const e=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(e," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(e,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const W7={kernelName:sB,backendName:"webgl",kernelFunc:t=>{let{inputs:e,backend:n}=t;const{image:r}=e,i=n,o=new G7(r.shape);return i.runWebGLProgram(o,[r],r.dtype)}},H7="return floor(x);",q7=G6({opSnippet:H7,packedOpSnippet:H7,cpuKernelImpl:m4}),X7={kernelName:cB,backendName:"webgl",kernelFunc:q7},Y7=W6({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),K7={kernelName:lB,backendName:"webgl",kernelFunc:Y7};class Z7{constructor(t){this.variableNames=["A"];const e=K1(),[n,r]=t;this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(r,".0, ").concat(n,".0);\n\n        vec4 values = ").concat(e.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")}}class J7{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const e=K1(),[n,r]=t;this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(r,".0, ").concat(n,".0);\n            vec4 values = ").concat(e.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(e.output," = result;\n      }\n    ")}}const $7={kernelName:qz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:o}=r,a="undefined"!==typeof HTMLVideoElement&&i instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&i instanceof HTMLImageElement,[c,l]=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],u=[l,c],h=[l,c,o];if(s||a){const t=sU().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=Q7&&t===t9||(t9=t,Q7=document.createElement("canvas").getContext("2d",{willReadFrequently:t9})),Q7.canvas.width=c,Q7.canvas.height=l,Q7.drawImage(i,0,0,c,l),i=Q7.canvas}const d=n.makeTensorInfo(u,"int32");n.texData.get(d.dataId).usage=y1.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),i);const p=sU().getBool("WEBGL_PACK")?new J7(h):new Z7(h),f=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),f}};let Q7,t9=sU().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const e9={kernelName:Kz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:o,bias:a,preluActivationWeights:s}=e,{strides:c,pad:l,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,m=Eq(u),g=mq(i.shape,o.shape,c,h,l,d,!1,m);let y;const v=[],b=null!=a,x=null!=s,_="leakyrelu"===p,w=()=>{const t=[i,o],e=(t,e)=>{if("NCHW"===e&&1===t.shape.length&&1!==t.shape[0]){const e=$6({inputs:{x:t},backend:n,attrs:{shape:[t.shape[0],1,1]}});return v.push(e),e}return t};if(b&&t.push(e(a,u)),x&&t.push(e(s,u)),_){const e=n.makeTensorInfo([],"float32",_V(f,"float32"));t.push(e),v.push(e)}return t};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===m&&sU().getBool("WEBGL_EXP_CONV")){const t=p?H6(p,!0):null,e=new L8(g,b,t,x,_),r=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],i=w();y=n.runWebGLProgram(e,i,"float32",r)}else if(sU().getBool("WEBGL_CONV_IM2COL"))y=B8({x:i,filter:o,convInfo:g,backend:n,bias:a,activation:p,preluActivationWeights:s,leakyreluAlpha:f});else{const t=p?H6(p,!1):null,e=new R8(g,b,t,x,_),r=w();y=n.runWebGLProgram(e,r,"float32")}else y=U8({x:i,filter:o,convInfo:g,backend:n,bias:a,activation:p,preluActivationWeights:s,leakyreluAlpha:f});const S=$6({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return v.push(y),v.forEach((t=>n.disposeIntermediateTensorInfo(t))),S}};const n9={kernelName:Zz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:o,bias:a,preluActivationWeights:s}=e,{strides:c,pad:l,dilations:u,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r,f=[];let m=u;null==m&&(m=[1,1]),kj(Sq(c,m),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(c," and dilations '").concat(m,"'")));const g=mq(i.shape,o.shape,c,m,l,h,!0),y=sU().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,v=d?H6(d,y):null,b=[i,o],x=null!=a,_=null!=s,w="leakyrelu"===d;if(x&&b.push(a),_&&b.push(s),w){const t=n.makeTensorInfo([],"float32",_V(p,"float32"));b.push(t),f.push(t)}let S;S=y?new f7(g,x,v,_,w):new p7(g,x,v,_,w);const T=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],E=n.runWebGLProgram(S,b,"float32",T);return f.forEach((t=>n.disposeIntermediateTensorInfo(t))),E}};class r9{constructor(t,e,n,r){this.sliceDim=t,this.strides=e,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;const i=h2(n.length);let o="\n    int index;";for(let a=0;a<this.sliceDim;a++)o+="\n          index = round(getIndices(coords[0], ".concat(a,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[a],";\n          flattenIndex += index * ").concat(this.strides[a],";");this.userCode="\n         void main() {\n          ".concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(o,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}}const i9={kernelName:dB,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,o=i.shape,a=o[o.length-1],s=Nj(r.shape),[c,l,u,h]=RJ(r,i),d=$6({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),p=$6({inputs:{x:r},backend:n,attrs:{shape:[Nj(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,i])||"string"===r.dtype){const t=n.readSync(i.dataId),e=n.bufferSync(r),o=g4(t,e,r.dtype,l,a,u,h,r.shape,s);return n.makeTensorInfo(c,r.dtype,o.values)}const f=new r9(a,h,[l,u],r.shape),m=n.runWebGLProgram(f,[p,d],p.dtype),g=$6({inputs:{x:m},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}};class o9{constructor(t,e){this.variableNames=["A","indices"],this.outputShape=e,this.rank=e.length;const n=h2(this.rank),r=function(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)2===i?r.push("index"):r.push("".concat(n[i]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(n," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(r,"));\n      }\n    ")}}function a9(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:o}=e,{axis:a,batchDims:s}=r,c=Uj(a,i.shape)[0];if(sU().get("DEBUG")){const t=n.readSync(o.dataId),e=i.shape[c];for(let n=0;n<t.length;++n){const r=t[n];kj(r<=e-1&&r>=0,(()=>"GatherV2: the index value ".concat(r," is not in [0, ").concat(e-1,"]")))}}const l=w$(i,o,c,s),u=Nj(o.shape),h=[],d=$6({inputs:{x:i},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),p=$6({inputs:{x:o},backend:n,attrs:{shape:[l.batchSize,u/l.batchSize]}});h.push(d),h.push(p);const f=[l.batchSize,l.outerSize,u/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([i,o])||"string"===i.dtype){const t=n.bufferSync(p),e=n.bufferSync(d),r=y4(e,t,f);return h.forEach((t=>n.disposeIntermediateTensorInfo(t))),n.makeTensorInfo(l.outputShape,r.dtype,r.values)}const m=new o9(d.shape,f),g=n.runWebGLProgram(m,[d,p],d.dtype);h.push(g);const y=$6({inputs:{x:g},backend:n,attrs:{shape:l.outputShape}});return h.forEach((t=>n.disposeIntermediateTensorInfo(t))),y}const s9={kernelName:hB,backendName:"webgl",kernelFunc:a9},c9=W6({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:v4,dtype:"bool"}),l9={kernelName:pB,backendName:"webgl",kernelFunc:c9},u9=W6({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:b4}),h9={kernelName:fB,backendName:"webgl",kernelFunc:u9};const d9={kernelName:gB,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{input:r}=e;return j7(r,!0,n)}},p9=G6({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),f9={kernelName:vB,backendName:"webgl",kernelFunc:p9},m9=G6({opSnippet:"return float(isinf(x));",dtype:"bool"}),g9={kernelName:bB,backendName:"webgl",kernelFunc:m9},y9=G6({opSnippet:"return float(isnan(x));",dtype:"bool"}),v9={kernelName:xB,backendName:"webgl",kernelFunc:y9},b9=W6({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:x4,dtype:"bool"}),x9={kernelName:wB,backendName:"webgl",kernelFunc:b9},_9=W6({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:_4,dtype:"bool"}),w9={kernelName:SB,backendName:"webgl",kernelFunc:_9};const S9={kernelName:TB,backendName:"webgl",kernelFunc:function(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:o}=n,a=w4(r,i,o);return e.makeTensorInfo([a.length],"float32",a)}},T9=G6({opSnippet:V6+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:S4}),E9={kernelName:EB,backendName:"webgl",kernelFunc:T9},A9=G6({opSnippet:V6+"\n  return log(1.0 + x);\n"}),M9={kernelName:AB,backendName:"webgl",kernelFunc:A9},O9=W6({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),C9={kernelName:MB,backendName:"webgl",kernelFunc:O9},k9=G6({opSnippet:"return float(!(x >= 1.0));"}),P9={kernelName:OB,backendName:"webgl",kernelFunc:k9},I9=W6({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),N9={kernelName:CB,backendName:"webgl",kernelFunc:I9};class R9{constructor(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[];const o=e,a=t[3]-1;let s;this.outputShape=t;const c="float(".concat(n,") + float(").concat(r,") * sum");s=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(o,"; j <= ").concat(o,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(a,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(s,";\n        setOutput(val);\n      }\n    ")}}class D9{constructor(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=e,a=t[3]-1;let s;this.outputShape=t;const c="float(".concat(n,") + float(").concat(r,") * sum");s=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(o,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(o,"; j <= ").concat(o,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(a,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(s,";\n        setOutput(result);\n      }\n    ")}}const L9={kernelName:"LRN",backendName:"webgl",kernelFunc:t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:o,bias:a,alpha:s,beta:c}=r,l=sU().getBool("WEBGL_PACK_NORMALIZATION")?new D9(i.shape,o,a,s,c):new R9(i.shape,o,a,s,c);return n.runWebGLProgram(l,[i],i.dtype)}};class F9{constructor(t,e,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(e,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(e," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(r,") * norm + float(").concat(n,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(r,")\n                * float(").concat(i,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")}}const j9={kernelName:"LRNGrad",backendName:"webgl",kernelFunc:t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i,y:o,dy:a}=e,{depthRadius:s,bias:c,alpha:l,beta:u}=r,h=new F9(i.shape,s,c,l,u);return n.runWebGLProgram(h,[i,o,a],i.dtype)}};function U9(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:o,keepDims:a}=r,s=i.shape.length,c=Uj(o,i.shape);let l=c;const u=AX(l,s),h=null!=u,d=n.shouldExecuteOnCPU([i]);let p=i;if(h){if(d){const t=n.texData.get(p.dataId).values,e=new Array(s);for(let n=0;n<e.length;n++)e[n]=i.shape[u[n]];const r=$4(t,i.shape,i.dtype,u,e);p=n.makeTensorInfo(e,i.dtype);n.texData.get(p.dataId).values=r}else p=o5(i,u,n);l=OX(l.length,s)}EX("max",l,s);const[f,m]=SX(p.shape,l);let g,y=f;if(a&&(y=TX(f,c)),d){const t=n.texData.get(p.dataId).values,e=T4(t,Nj(m),y,i.dtype);g=n.makeTensorInfo(y,i.dtype);n.texData.get(g.dataId).values=e}else g=function(t,e,n,r){const i=Nj(e),o=$6({inputs:{x:t},attrs:{shape:[Nj(t.shape)/i,i]},backend:r}),a=n5(o,t.dtype,"max",r),s=$6({inputs:{x:a},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),s}(p,m,y,n);return h&&n.disposeIntermediateTensorInfo(p),g}const B9={kernelName:"Max",backendName:"webgl",kernelFunc:U9},z9=W6({opSnippet:O6+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+k6+"\n  return result;\n",cpuKernelImpl:E4}),V9={kernelName:kB,backendName:"webgl",kernelFunc:z9};const G9={kernelName:PB,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;X1(i,"maxPool");const{filterSize:o,strides:a,pad:s,dimRoundingMode:c}=r;kj(Sq(a,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(1,"'")));const l=pq(i.shape,o,a,1,s,c);if(1===l.filterWidth&&1===l.filterHeight&&Rj(l.inShape,l.outShape))return I6({inputs:{x:i},backend:n});const u=new W5(l,"max",!1);return n.runWebGLProgram(u,[i],i.dtype)}};const W9={kernelName:IB,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:o,strides:a,pad:s,dataFormat:c,dimRoundingMode:l}=r,u=fq(i.shape,o,a,[1,1,1],s,l,c),h=new H5(u,"max",!1);return n.runWebGLProgram(h,[i],i.dtype)}};class H9{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,a=i-1-t.padInfo.top,s=o-1-t.padInfo.left,c=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(a,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(r,") {\n          float dyR = float(dyRCorner + wR) / ").concat(e,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(n,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class q9{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,u=s-1-t.padInfo.front,h=c-1-t.padInfo.top,d=l-1-t.padInfo.left,p=s*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(h,", ").concat(d,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(s,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(e,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(a,") {\n              float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const X9={kernelName:"MaxPool3DGrad",backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:o}=e,a=o,{filterSize:s,strides:c,pad:l,dimRoundingMode:u}=r,h=fq(a.shape,s,c,[1,1,1],l,u),d=new H5(h,"max",!0),p=n.runWebGLProgram(d,[a],a.dtype),f=new q9(h),m=n.runWebGLProgram(f,[i,p],a.dtype);return n.disposeIntermediateTensorInfo(p),m}};const Y9={kernelName:"MaxPoolGrad",backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:o,output:a}=e,s=o;X1([o,a],"maxPoolGrad");const{filterSize:c,strides:l,pad:u,dimRoundingMode:h}=r,d=pq(s.shape,c,l,1,u,h),p=new W5(d,"max",!0),f=n.runWebGLProgram(p,[s],s.dtype),m=new H9(d),g=n.runWebGLProgram(m,[i,f],s.dtype);return n.disposeIntermediateTensorInfo(f),g}};const K9={kernelName:NB,backendName:"webgl",kernelFunc:t=>{let{inputs:e,attrs:n,backend:r}=t;const{x:i}=e,{filterSize:o,strides:a,pad:s,includeBatchInIndex:c}=n,l=r;kj(4===i.shape.length,(()=>"Error in maxPool: input must be rank 4 but got rank ".concat(i.shape.length,".")));const u=[1,1];kj(Sq(a,u),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(u,"'")));const h=pq(i.shape,o,a,u,s),[d,p]=function(t,e,n,r){let i=new W5(n,"max",!1);const o=r.runWebGLProgram(i,[t],"float32");return i=new W5(n,"max",!0,!0,e),[o,r.runWebGLProgram(i,[t],"float32")]}(i,c,h,l);return[d,p]}};const Z9={kernelName:RB,backendName:"webgl",kernelFunc:t=>{let{inputs:e,attrs:n,backend:r}=t;const{x:i}=e,{keepDims:o,axis:a}=n,s=r,c=i.shape.length,l=Uj(a,i.shape);let u=l;const h=AX(u,c),d=null!=h,p=s.shouldExecuteOnCPU([i]),f=[];let m=i;if(d){if(p){const t=s.texData.get(m.dataId).values,e=new Array(c);for(let r=0;r<e.length;r++)e[r]=i.shape[h[r]];const n=$4(t,i.shape,i.dtype,h,e);m=s.makeTensorInfo(e,i.dtype);s.texData.get(m.dataId).values=n}else m=o5(i,h,s);f.push(m),u=OX(u.length,c)}EX("sum",u,c);const[g,y]=SX(m.shape,u);let v=g;o&&(v=TX(g,l));const b=function(t,e,n,r){const i=Nj(e),o=$6({inputs:{x:t},attrs:{shape:[Nj(t.shape)/i,i]},backend:r}),a=n5(o,"float32","mean",r),s=$6({inputs:{x:a},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),s}(m,y,v,s);for(const x of f)s.disposeIntermediateTensorInfo(x);return b}};const J9={kernelName:"Min",backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:a}=r,s=i.shape.length,c=Uj(o,i.shape);let l=c;const u=AX(l,s);let h=i;null!=u&&(h=c5({inputs:{x:i},backend:n,attrs:{perm:u}}),l=OX(l.length,i.shape.length)),EX("min",l,s);const[d,p]=SX(h.shape,l),f=$6({inputs:{x:h},backend:n,attrs:{shape:[-1,Nj(p)]}}),m=n5(f,f.dtype,"min",n);let g;if(a){g=$6({inputs:{x:m},backend:n,attrs:{shape:TX(d,c)}})}else g=$6({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(h),g}},$9=W6({opSnippet:O6+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+k6+"\n  return result;\n",cpuKernelImpl:A4}),Q9={kernelName:DB,backendName:"webgl",kernelFunc:$9};class ttt{constructor(t,e,n){this.variableNames=["x"],this.outputShape=e.map(((e,n)=>e[0]+t[n]+e[1]));const r=t.length,i=h2(r),o=e.map((t=>t[0])).join(","),a=e.map(((e,n)=>e[0]+t[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),c="reflect"===n?0:1;this.userCode=1!==r?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(a,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(r,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(s,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(a,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")}}class ett{constructor(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(((e,n)=>e[0]+t[n]+e[1]));const r=t.length,i=h2(r),o=e.map((t=>t[0])).join(","),a=e.map(((e,n)=>e[0]+t[n])).join(","),s=e6("rc",r),c=e6("source",r),l="".concat(s[r-1]," < ").concat(this.outputShape[r-1]),u=1===r?"source":"vec2(".concat(c.slice(-2).join(),")"),h="reflect"===n?0:1;let d="";if(1===r){const t="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(h,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(h,";\n        }\n        source -= start;\n      ");d="\n        ".concat(i," rc = outputLoc;\n        ").concat(t,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        ").concat(s[r-1]," += 1;\n        if(").concat(l,") {\n          ").concat(t,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        }\n      ")}else{const t="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(h,") +\n                gte * ((end - 1) * 2 - source + ").concat(h,");\n        source -= start;\n      ");d="\n        ".concat(i," rc = outputLoc;\n        ").concat(t,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        ").concat(s[r-1]," += 1;\n        if(").concat(l,") {\n          ").concat(t,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        }\n        rc = outputLoc;\n        ").concat(s[r-2]," += 1;\n        if(").concat(s[r-2]," < ").concat(this.outputShape[r-2],") {\n          ").concat(t,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n          ").concat(s[r-1]," += 1;\n          if(").concat(l,") {\n            ").concat(t,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(a,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(d,"\n        setOutput(result);\n      }\n    ")}}const ntt={kernelName:LB,backendName:"webgl",kernelFunc:t=>{let{inputs:e,backend:n,attrs:r}=t;const{x:i}=e,{paddings:o,mode:a}=r,s=sU().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ett(i.shape,o,a):new ttt(i.shape,o,a);return n.runWebGLProgram(s,[i],i.dtype)}},rtt={kernelName:"Mod",backendName:"webgl",kernelFunc:W6({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+k6+"\n  return result;\n"})};class itt{constructor(t,e,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(e-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(e-1,"));\n      }\n    ")}}const ott=W6({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),att={kernelName:tB,backendName:"webgl",kernelFunc:ott},stt="return a - b;",ctt=W6({opSnippet:stt,packedOpSnippet:stt,supportsComplex:!0,cpuKernelImpl:K4}),ltt={kernelName:Dz,backendName:"webgl",kernelFunc:ctt};function utt(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:o}=r,a=Uj([o],i.shape),s=U9({inputs:{x:i},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),c=TX(s.shape,a),l=$6({inputs:{x:s},backend:n,attrs:{shape:c}}),u=ctt({inputs:{a:i,b:l},backend:n}),h=k7({inputs:{x:u},backend:n}),d=a5({inputs:{x:h},backend:n,attrs:{axis:a,keepDims:!1}}),p=$6({inputs:{x:d},backend:n,attrs:{shape:c}}),f=ott({inputs:{a:h,b:p},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),f}const htt={kernelName:Sz,backendName:"webgl",kernelFunc:utt};const dtt={kernelName:FB,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:o,seed:a,normalized:s}=r,c=s?i:utt({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),l=c.shape[0],u=c.shape[1],h=new itt(l,u,o),d=[[a]],p=n.runWebGLProgram(h,[c],"int32",d);return s||n.disposeIntermediateTensorInfo(c),p}},ptt=l6+"\n  return -x;\n";const ftt={kernelName:UB,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const t=n.texData.get(r.dataId),[e,i]=O4(t.values,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,e)}let i;return i=sU().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new w6(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new c6(r.shape,ptt),n.runWebGLProgram(i,[r],r.dtype)}},mtt=CZ;const gtt={kernelName:zB,backendName:"webgl",kernelFunc:function(t){Jz("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:o}=e,{maxOutputSize:a,iouThreshold:s,scoreThreshold:c}=r,l=n.readSync(i.dataId),u=n.readSync(o.dataId),{selectedIndices:h}=mtt(l,u,a,s,c);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},ytt=kZ;const vtt={kernelName:VB,backendName:"webgl",kernelFunc:function(t){Jz("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:o}=e,{maxOutputSize:a,iouThreshold:s,scoreThreshold:c,padToMaxOutputSize:l}=r,u=n.readSync(i.dataId),h=n.readSync(o.dataId),{selectedIndices:d,validOutputs:p}=ytt(u,h,a,s,c,l);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},btt=PZ;const xtt={kernelName:GB,backendName:"webgl",kernelFunc:function(t){Jz("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:o}=e,{maxOutputSize:a,iouThreshold:s,scoreThreshold:c,softNmsSigma:l}=r,u=n.readSync(i.dataId),h=n.readSync(o.dataId),d=a,p=s,f=c,m=l,{selectedIndices:g,selectedScores:y}=btt(u,h,d,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};class _tt{constructor(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(r,"), float(").concat(n,"),\n                      float(index == coords.y)));\n      }\n    ")}}const wtt={kernelName:HB,backendName:"webgl",kernelFunc:t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:o,depth:a,onValue:s,offValue:c}=r,l=Nj(i.shape),u=new _tt(l,a,s,c),h=$6({inputs:{x:i},backend:n,attrs:{shape:[l]}}),d=n.runWebGLProgram(u,[h],o);n.disposeIntermediateTensorInfo(h);const p=$6({inputs:{x:d},backend:n,attrs:{shape:[...i.shape,a]}});return n.disposeIntermediateTensorInfo(d),p}};function Stt(t){const{inputs:e,backend:n}=t,{x:r}=e;if("complex64"===r.dtype){const t=p8({inputs:{input:r},backend:n}),e=Stt({inputs:{x:t},backend:n}),i=C8({inputs:{input:r},backend:n}),o=Stt({inputs:{x:i},backend:n}),a=R6({inputs:{real:e,imag:o},backend:n});return n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),a}return z7({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const Ttt={kernelName:Wz,backendName:"webgl",kernelFunc:Stt};const Ett={kernelName:WB,backendName:"webgl",kernelFunc:function t(e){const{inputs:n,backend:r}=e,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===i.dtype){const e=p8({inputs:{input:i},backend:r}),n=t({inputs:{x:e},backend:r}),o=C8({inputs:{input:i},backend:r}),a=Stt({inputs:{x:o},backend:r}),s=R6({inputs:{real:n,imag:a},backend:r});return r.disposeIntermediateTensorInfo(e),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),s}return z7({attrs:{shape:i.shape,dtype:i.dtype,value:1},backend:r})}};const Att={kernelName:qB,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(1===e.length)return I7({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const o=e[0].shape,a=e[0].dtype;e.forEach((t=>{Pj(o,t.shape,"All tensors passed to stack must have matching shapes"),kj(a===t.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],c=e.map((t=>{const e=I7({inputs:{input:t},backend:n,attrs:{dim:i}});return s.push(e),e})),l=I8({inputs:c,backend:n,attrs:{axis:i}});return s.forEach((t=>n.disposeIntermediateTensorInfo(t))),l}};class Mtt{constructor(t,e,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map(((e,n)=>e[0]+t[n]+e[1]));const r=t.length,i=h2(r),o=e.map((t=>t[0])).join(","),a=e.map(((e,n)=>e[0]+t[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(a,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(s,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(a,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")}}class Ott{constructor(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map(((e,n)=>e[0]+t[n]+e[1]));const r=t.length,i=h2(r),o=e.map((t=>t[0])).join(","),a=e.map(((e,n)=>e[0]+t[n])).join(","),s=e6("rc",r),c=e6("source",r),l="".concat(s[r-1]," < ").concat(this.outputShape[r-1]),u=1===r?"source":"vec2(".concat(c.slice(-2).join(),")"),h=["".concat(i," rc = outputLoc;"),"".concat(s[r-1]," += 1;\n       if(").concat(l,") {\n      "),1===r?"":"}\n       rc = outputLoc;\n       ".concat(s[r-2]," += 1;\n       if(").concat(s[r-2]," < ").concat(this.outputShape[r-2],") {"),1===r?"":"  ".concat(s[r-1]," += 1;\n         if(").concat(l,") {")],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,m=1===r?2:4;f<m;f++)p+="\n        ".concat(h[f],"\n        if (").concat(d,") {\n          result[").concat(f,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(f,"] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        }\n      ");p+=1===r?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(a,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")}}const Ctt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:o,constantValue:a}=r;if(0===Nj(i.shape)){const t=o.map(((t,e)=>t[0]+i.shape[e]+t[1]));return z7({backend:n,attrs:{shape:t,value:a,dtype:i.dtype}})}const s=sU().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ott(i.shape,o,a):new Mtt(i.shape,o,a),c=[[a]];return n.runWebGLProgram(s,[i],i.dtype,c)},ktt={kernelName:XB,backendName:"webgl",kernelFunc:Ctt},Ptt={kernelName:"Pow",backendName:"webgl",kernelFunc:W6({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+k6+"\n  return result;\n"})};const Itt={kernelName:KB,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:a}=r,s=i.shape.length,c=[],l=Uj(o,i.shape);let u=l;const h=AX(u,s);let d,p=i;if(null!=h&&(p=c5({inputs:{x:i},backend:n,attrs:{perm:h}}),u=OX(u.length,s),c.push(p)),EX("prod",u,s),n.shouldExecuteOnCPU([p])){const t=n.texData.get(p.dataId).values,{outVals:e,outShape:r,outDtype:i}=k4(p.shape,p.dtype,t,u);d=n.makeTensorInfo(r,i,e)}else{const[t,e]=SX(p.shape,u),r=Nj(e),o=$6({inputs:{x:p},backend:n,attrs:{shape:[-1,r]}}),a=n5(o,QV(i.dtype),"prod",n);d=$6({inputs:{x:a},backend:n,attrs:{shape:t}}),c.push(o),c.push(a)}if(a){c.push(d);const t=TX(d.shape,l);d=$6({inputs:{x:d},backend:n,attrs:{shape:t}})}return c.forEach((t=>n.disposeIntermediateTensorInfo(t))),d}};const Ntt={kernelName:ZB,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:o,indices:a}=e,{outputRaggedRank:s}=r,c=i.map((t=>n.readSync(t.dataId))),l=i.map((t=>t.shape)),u=n.readSync(o.dataId),h=n.readSync(a.dataId),[d,p,f]=P4(c,l,u,o.shape,o.dtype,h,a.shape,s),m=d.map((t=>n.makeTensorInfo([t.length],"int32",t))),g=n.makeTensorInfo(f,o.dtype,p);return m.concat([g])}};const Rtt={kernelName:JB,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:o}=e,a=n.readSync(r.dataId),s=n.readSync(i.dataId),c=n.readSync(o.dataId),[l,u]=I4(a,r.shape,r.dtype,s,i.shape,c,o.shape);return[n.makeTensorInfo([l.length],"int32",l),n.makeTensorInfo([u.length],r.dtype,u)]}};const Dtt={kernelName:$B,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:o,defaultValue:a,rowPartitionTensors:s}=e,{rowPartitionTypes:c}=r,l=n.readSync(i.dataId),u=n.readSync(o.dataId),h=n.readSync(a.dataId),d=s.map((t=>n.readSync(t.dataId))),p=s.map((t=>t.shape)),[f,m]=N4(l,i.shape,u,o.shape,o.dtype,h,a.shape,d,p,c);return n.makeTensorInfo(f,o.dtype,m)}},Ltt=t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:o,dtype:a}=n,s=R4(r,i,o,a);return e.makeTensorInfo([s.length],a,s)},Ftt={kernelName:QB,backendName:"webgl",kernelFunc:Ltt},jtt=G6({opSnippet:"return 1.0 / x;"}),Utt={kernelName:ez,backendName:"webgl",kernelFunc:jtt},Btt=G6({opSnippet:l6+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),ztt={kernelName:nz,backendName:"webgl",kernelFunc:Btt},Vtt=G6({opSnippet:l6+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Gtt={kernelName:az,backendName:"webgl",kernelFunc:Vtt};class Wtt{constructor(t,e,n,r,i){this.variableNames=["A"],this.outputShape=[];const[o,a,s,c]=t;this.outputShape=[o,e,n,c];const l=[r&&e>1?a-1:a,r&&n>1?s-1:s],u=[r&&e>1?e-1:e,r&&n>1?n-1:n];let h;h=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(l[0]/u[0],",\n          ").concat(l[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(a,".0, ").concat(s,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")}}class Htt{constructor(t,e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,s,c]=t;this.outputShape=[o,e,n,c];const l=[r&&e>1?a-1:a,r&&n>1?s-1:s],u=[r&&e>1?e-1:e,r&&n>1?n-1:n];let h;h=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(l[0]/u[0],",\n          ").concat(l[1]/u[1],",\n          ").concat(l[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(a,".0, ").concat(s,".0,\n                                     ").concat(s,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}}const qtt={kernelName:oz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:o,halfPixelCenters:a,size:s}=r,[c,l]=s,u=sU().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Htt(i.shape,c,l,o,a):new Wtt(i.shape,c,l,o,a);return n.runWebGLProgram(u,[i],"float32")}};class Xtt{constructor(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;const[,r,i]=e,[,o,a]=t,s=[n&&o>1?r-1:r,n&&a>1?i-1:i],c=[n&&o>1?o-1:o,n&&a>1?a-1:a],l=s[0]/c[0],u=s[1]/c[1],h=1/l,d=1/u,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(l,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(d,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(o,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(a,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(r-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(i-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const Ytt={kernelName:"ResizeBilinearGrad",backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:o}=e,{alignCorners:a}=r,s=new Xtt(o.shape,i.shape,a);return n.runWebGLProgram(s,[o],o.dtype)}};class Ktt{constructor(t,e,n,r,i){this.variableNames=["A"],this.outputShape=[];const[o,a,s,c]=t;this.outputShape=[o,e,n,c];const l=[r&&e>1?a-1:a,r&&n>1?s-1:s],u=[r&&e>1?e-1:e,r&&n>1?n-1:n],h=r?"0.5":"0.0";let d;d=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(l[0]/u[0],",\n          ").concat(l[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(a,".0, ").concat(s,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")}}class Ztt{constructor(t,e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,s,c]=t;this.outputShape=[o,e,n,c];const l=[r&&e>1?a-1:a,r&&n>1?s-1:s],u=[r&&e>1?e-1:e,r&&n>1?n-1:n],h=r?"0.5":"0.0";let d;d=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(l[0]/u[0],",\n          ").concat(l[1]/u[1],",\n          ").concat(l[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(a,".0, ").concat(s,".0,\n                                     ").concat(s,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}}const Jtt={kernelName:iz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:o,halfPixelCenters:a,size:s}=r,[c,l]=s,u=sU().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Ztt(i.shape,c,l,o,a):new Ktt(i.shape,c,l,o,a);return n.runWebGLProgram(u,[i],i.dtype)}};class $tt{constructor(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;const[,r,i]=e,[,o,a]=t,s=[n&&o>1?r-1:r,n&&a>1?i-1:i],c=[n&&o>1?o-1:o,n&&a>1?a-1:a],l=s[0]/c[0],u=s[1]/c[1],h=1/l,d=1/u,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(l,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(d,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(o,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(a,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(s[0],") *\n                (float(dyR) / float(").concat(c[0],"));\n\n            float sourceFracCol =\n                float(").concat(s[1],") *\n                  (float(dyC) / float(").concat(c[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(r,") - 1),\n                ").concat(n," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(n," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const Qtt={kernelName:"ResizeNearestNeighborGrad",backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:o}=e,{alignCorners:a}=r,s=new $tt(o.shape,i.shape,a);return n.runWebGLProgram(s,[o],o.dtype)}};class tet{constructor(t,e){this.variableNames=["x"];const n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));if(this.outputShape=t,1===n)return void(this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      "));const r=t.map(((n,r)=>(n=>-1!==e.indexOf(n)&&1!==t[n]?"".concat(t[n]," - coords[").concat(n,"] - 1"):"coords[".concat(n,"]"))(r))).join(","),i=h2(n);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(r,"));\n      }\n    ")}}class eet{constructor(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));this.outputShape=t;const r=e6("rc",n),i="".concat(r[n-1]," + 1 < ").concat(this.outputShape[n-1]),o="".concat(r[n-2]," + 1 < ").concat(this.outputShape[n-2]),a=h2(n);function s(n){const r=t.map(((r,i)=>function(n,r){return-1!==e.indexOf(n)&&1!==t[n]?"".concat(t[n]," - ").concat(r[n]," - 1"):"".concat(r[n])}(i,n))),i=r.join(","),o=r.slice(-2).join(",");return"getChannel(getX(".concat(i,"), vec2(").concat(o,"))")}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(a," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(t){return s(t)}(r.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(t){return t[n-1]="("+t[n-1]+" + 1)",s(t)}(r.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(t){return t[n-2]="("+t[n-2]+" + 1)",s(t)}(r.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(t){return t[n-1]="("+t[n-1]+" + 1)",t[n-2]="("+t[n-2]+" + 1)",s(t)}(r.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}}const net={kernelName:sz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:o}=r,a=i.shape.length,s=Uj(o,i.shape);if(0===a)return I6({inputs:{x:i},backend:n});const c=sU().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new eet(i.shape,s):new tet(i.shape,s);return n.runWebGLProgram(c,[i],i.dtype)}};class ret{constructor(t,e){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=t[1],r=t[2];this.outputShape=t;let i="";i="number"===typeof e?"float outputValue = ".concat(e.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(e.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(r," && coordY >= 0 && coordY < ").concat(n,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const iet={kernelName:Xz,backendName:"webgl",kernelFunc:t=>{let{inputs:e,attrs:n,backend:r}=t;const{image:i}=e,{radians:o,fillValue:a,center:s}=n,c=r,l=new ret(i.shape,a),[u,h]=OJ(s,i.shape[1],i.shape[2]),d=[[u,h,Math.sin(o),Math.cos(o)]];return c.runWebGLProgram(l,[i],i.dtype,d)}},oet=G6({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),aet={kernelName:cz,backendName:"webgl",kernelFunc:oet},set=G6({opSnippet:"return inversesqrt(x);",cpuKernelImpl:D4}),cet={kernelName:lz,backendName:"webgl",kernelFunc:set};class uet{constructor(t,e,n,r,i,o){let a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const s=h2(i.length),c=h2(o.length);let l="";1===n?l="i":2===n&&(l="i, j");const u="getIndices(".concat(l,")");let h="";1===r?h="i":2===r&&(h="i, coords[1]");const d="getUpdates(".concat(h,")");let p="";a&&(p="coords[0], coords[1]");const f="getDefaultValue(".concat(p,")"),m=e>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(e,"; j++) {\n              int index = round(").concat(u,");\n              flattenedIndex += index * ").concat(m,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(d,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(f,", sum, float(found)));\n        }\n      ")}}class het{constructor(t,e,n,r,i,o){let a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const s=h2(i.length),c=h2(o.length);let l="";1===n?l="i":2===n&&(l="i, j");const u="getIndices(".concat(l,")");let h="";1===r?h="i":2===r&&(h="i, coords[1]");const d="getUpdates(".concat(h,")");let p="";a&&(p="coords[0], coords[1]");const f="getDefaultValue(".concat(p,")"),m=e>1?"strides[j]":"strides",g=e>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(t,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(e,"; j+=2) {\n              ivec4 index = round(").concat(u,");\n              flattenedIndex += index.xz * ").concat(m,";\n              if (j + 1 < ").concat(e,") {\n                flattenedIndex += index.yw * ").concat(g,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(d,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(f,", sum, found));\n        }\n      ")}}const det={kernelName:uz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:o}=e,{shape:a}=r,{sliceRank:s,numUpdates:c,sliceSize:l,strides:u,outputSize:h}=UK(0,i,a),d=[h/l,l];if(0===h)return n.makeTensorInfo(a,i.dtype);const p=$6({inputs:{x:i},backend:n,attrs:{shape:[c,s]}}),f=$6({inputs:{x:o},backend:n,attrs:{shape:[c,l]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;g=sU().getBool("WEBGL_PACK")?new het(c,s,p.shape.length,f.shape.length,u,d):new uet(c,s,p.shape.length,f.shape.length,u,d);const y=n.runWebGLProgram(g,[f,p,m],f.dtype),v=$6({inputs:{x:y},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),v}};class pet{constructor(t,e,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,n];const i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(e+1)),"; ++i) { if (left >= right) break;"),o=2===sU().getNumber("WEBGL_VERSION")?"while (left < right) {":i,a="left"===r?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(a," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}}const fet={kernelName:dz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:o}=e,{side:a}=r,s=new pet(i.shape[0],i.shape[1],o.shape[1],a),c=[[i.shape[1]]];return n.runWebGLProgram(s,[i,o],"int32",c)}};class met{constructor(t,e,n){let r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank ".concat(n," is not yet supported"));if(1===n)i="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],a=[];for(let r=0;r<e.length;r++)a.push("".concat(n[r])),r<t&&o.push("".concat(n[r]));r=o.join(),i=a.join()}const o=h2(n);this.userCode="\n      void main() {\n        ".concat(o," resRC = getOutputCoords();\n        float cVal = getC(").concat(r,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}}const get={kernelName:pz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:o}=e,a=new met(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(a,[r,i,o],$V(i.dtype,o.dtype))}},yet=G6({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(DJ,";\n  float scale = ").concat(LJ,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),vet={kernelName:fz,backendName:"webgl",kernelFunc:yet},bet=G6({opSnippet:V6+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:F4}),xet={kernelName:vz,backendName:"webgl",kernelFunc:bet},_et=G6({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),wet={kernelName:yz,backendName:"webgl",kernelFunc:_et},Tet={kernelName:"Sin",backendName:"webgl",kernelFunc:G6({opSnippet:V6+"\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(k6,"\n  return result;\n")})},Eet=G6({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),Aet={kernelName:gz,backendName:"webgl",kernelFunc:Eet},Met=G6({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),Oet={kernelName:bz,backendName:"webgl",kernelFunc:Met},Cet={kernelName:_z,backendName:"webgl",kernelFunc:t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:o,paddings:a}=r;kj(i.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const s=o.reduce(((t,e)=>t*e)),c=[[0,0]];c.push(...a);for(let y=1+o.length;y<i.shape.length;++y)c.push([0,0]);const l=[],u=Ctt({inputs:{x:i},backend:n,attrs:{paddings:c,constantValue:0}}),h=CJ(u.shape,o,s,!1),d=kJ(h.length,o.length,!1),p=PJ(u.shape,o,s,!1),f=$6({inputs:{x:u},backend:n,attrs:{shape:h}}),m=c5({inputs:{x:f},backend:n,attrs:{perm:d}}),g=$6({inputs:{x:m},backend:n,attrs:{shape:p}});return l.push(u),l.push(f),l.push(m),l.forEach((t=>n.disposeIntermediateTensorInfo(t))),g}};const ket={kernelName:Tz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:o,defaultValue:a}=e;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==i.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(i.shape));if(0!==a.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(a.shape));const s=n.readSync(r.dataId),c=n.readSync(i.dataId),l=n.readSync(o.dataId),u=n.readSync(a.dataId)[0],[h,d,p,f,m]=B4(s,r.shape,r.dtype,c,i.dtype,l,u);return[n.makeTensorInfo(d,r.dtype,h),n.makeTensorInfo([d[0]],i.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((t=>Number(t))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};const Pet={kernelName:Ez,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:o}=e;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==i.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(i.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));const a=Array.from(n.readSync(i.dataId)),s=n.readSync(r.dataId),c=Array.from(n.readSync(o.dataId)),[l,u,h]=z4(s,r.shape,r.dtype,a,c);return[n.makeTensorInfo(u,r.dtype,l),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}};const Iet={kernelName:Az,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(i.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(o.shape));const a=n.readSync(r.dataId),s=n.readSync(i.dataId),c=n.readSync(o.dataId),[l,u]=V4(a,r.shape,r.dtype,s,c,!0);return n.makeTensorInfo(u,r.dtype,l)}};const Net={kernelName:Mz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(i.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(o.shape));const a=n.readSync(r.dataId),s=n.readSync(i.dataId),c=n.readSync(o.dataId),[l,u]=V4(a,r.shape,r.dtype,s,c);return n.makeTensorInfo(u,r.dtype,l)}};const Ret={kernelName:Oz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:o,defaultValue:a}=e,{outputShape:s}=r,{sliceRank:c,numUpdates:l,sliceSize:u,strides:h,outputSize:d}=UK(0,i,s),p=!1;if("string"===o.dtype){const t=n.bufferSync(i),e=n.bufferSync(o),r=EV(n.readSync(a.dataId)[0]),f=L4(t,e,s,d,u,l,c,h,r,p);return n.makeTensorInfo(s,f.dtype,f.values)}const f=new uet(l,c,i.shape.length,o.shape.length,h,[d,1],p),m=n.runWebGLProgram(f,[o,i,a],o.dtype),g=$6({inputs:{x:m},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(m),g}};const Det={kernelName:wz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:o,axis:a}=r,s=Uj(a,i.shape)[0],c=s$(i,o,s),l=i.shape.length,u=new Array(l).fill(0),h=i.shape.slice();return c.map((t=>{const e=[...h];e[s]=t;const r=o8({inputs:{x:i},backend:n,attrs:{begin:u,size:e}});return u[s]+=t,r}))}},Let="return sqrt(x);",Fet=G6({opSnippet:Let,packedOpSnippet:Let,cpuKernelImpl:G4}),jet={kernelName:xz,backendName:"webgl",kernelFunc:Fet},Uet={kernelName:"Square",backendName:"webgl",kernelFunc:G6({opSnippet:"return x * x;"})},Bet="return (a - b) * (a - b);",zet=W6({opSnippet:Bet,packedOpSnippet:Bet}),Vet={kernelName:Cz,backendName:"webgl",kernelFunc:zet};const Get={kernelName:kz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;if("string"!==i.dtype)throw new Error("Input must be of datatype string");const o=S$(n.readSync(i.dataId)),a=W4(o,"string",r);return n.makeTensorInfo(i.shape,"string",a)}};const Wet={kernelName:Hz,backendName:"webgl",kernelFunc:function(t){let{inputs:e,attrs:n,backend:r}=t;const{x:i}=e,o=l6+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),a=new c6(i.shape,o);return r.runWebGLProgram(a,[i],i.dtype)}};class Het{constructor(t,e,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,i=h2(n.length),o=h2(n.length);let a="";if(1===r)a="coords * strides + begin";else{let t=0;a=n.map(((e,r)=>(t++,1===n.length?"coords * strides[".concat(r,"] + begin[").concat(r,"]"):"coords[".concat(t-1,"] * strides[").concat(r,"] + begin[").concat(r,"]")))).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(e,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}}const qet={kernelName:Pz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:o,end:a,strides:s,beginMask:c,endMask:l,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:d}=r,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:x}=$H(i.shape,o,a,s,c,l,u,h,d);let _;if(m)_=$6({inputs:{x:i},backend:n,attrs:{shape:f}});else if(g||y){kj(i.shape.length>=1,(()=>"Input must have rank at least 1, got: ".concat(i.shape.length)));const t=UH(v,b,x),e=o8({inputs:{x:i},backend:n,attrs:{begin:v,size:t}});_=$6({inputs:{x:e},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(e)}else{if(n.shouldExecuteOnCPU([i])){const t=n.readSync(i.dataId),e=NW(i.shape,i.dtype,t),r=H4(p,e,x,v);_=n.makeTensorInfo(f,i.dtype,r.values)}else{const t=new Het(v,x,p);_=n.runWebGLProgram(t,[i],i.dtype)}}const w=$6({inputs:{x:_},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(_),w}};const Xet={kernelName:Iz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:o,leftPad:a,rightPad:s,padWidth:c,preserveShortSequences:l}=r,{data:u,dataSplits:h}=e,d=n.readSync(u.dataId),p=n.readSync(h.dataId),[f,m]=q4(d,p,i,o,a,s,c,l);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",m)]}};const Yet={kernelName:Nz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:o,delimiter:a}=e;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error("Input must be a vector, got shape: ".concat(o.shape));if(0!==a.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(a.shape));const s=n.readSync(o.dataId),c=n.readSync(a.dataId)[0],[l,u,h]=X4(s,c,i),d=u.length;return[n.makeTensorInfo([d,2],"int32",l),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};const Ket={kernelName:Rz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:o}=e;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const a=n.readSync(o.dataId),s=Y4(a,i);return n.makeTensorInfo(o.shape,"int32",s)}},Zet={kernelName:"Tan",backendName:"webgl",kernelFunc:G6({opSnippet:"return tan(x);"})},Jet=G6({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),$et={kernelName:Lz,backendName:"webgl",kernelFunc:Jet};const Qet={kernelName:hz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:i,indices:o,updates:a}=e,{}=r,{sliceRank:s,numUpdates:c,sliceSize:l,strides:u,outputSize:h}=UK(0,o,i.shape),d=[h/l,l];if(0===h)return n.makeTensorInfo(i.shape,o.dtype);const p=$6({inputs:{x:o},backend:n,attrs:{shape:[c,s]}}),f=$6({inputs:{x:a},backend:n,attrs:{shape:[c,l]}}),m=$6({inputs:{x:i},backend:n,attrs:{shape:d}}),g=new uet(c,s,p.shape.length,f.shape.length,u,d,!1,!0),y=n.runWebGLProgram(g,[f,p,m],m.dtype),v=$6({inputs:{x:y},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}};class tnt{constructor(t,e){this.variableNames=["A"];const n=new Array(t.length);for(let o=0;o<n.length;o++)n[o]=t[o]*e[o];this.outputShape=n,this.rank=n.length;const r=h2(this.rank),i=function(t){const e=t.length;if(e>5)throw Error("Tile for rank ".concat(e," is not yet supported"));if(1===e)return"imod(resRC, ".concat(t[0],")");const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push("imod(".concat(n[i],", ").concat(t[i],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(i,"));\n      }\n    ")}}function ent(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:o}=r;if("string"===i.dtype||i.shape.length>5){const t=n.readSync(i.dataId),e="string"===i.dtype?t.map((t=>EV(t))):t,r=NW(i.shape,i.dtype,e),a=Z4(r,o);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const a=new tnt(i.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const nnt={kernelName:Fz,backendName:"webgl",kernelFunc:ent};class rnt{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class int{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function ont(t,e){null!==e&&t.disposeIntermediateTensorInfo(e)}function ant(t){let e=1;for(;e<t;)e*=2;return e}const snt={kernelName:jz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:o,sorted:a}=r,s=sU().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),c=sU().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=i.shape,u=l[l.length-1];if(n.shouldExecuteOnCPU([i])||u<s||o>c){const t=n.readSync(i.dataId),[e,r]=J4(t,l,i.dtype,o,a);return[n.makeTensorInfo(e.shape,e.dtype,e.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===o)return l[l.length-1]=0,[n.makeTensorInfo(l,i.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(1===u)return[i,z7({attrs:{shape:l,dtype:"int32",value:0},backend:n})];const h=n.texData.get(i.dataId),d=null!==h&&h.isPacked,p=d?n.unpackTensor(i):i,f=Nj(l)/u,m=$6({inputs:{x:p},attrs:{shape:[f,u]},backend:n});d&&ont(n,p);const g=ant(o),y=ant(u);let v=null;const b=()=>null===v?[m,m]:[m,v],x=(t,e,r)=>{const i=b(),o=new rnt(r),a=[[u],[null===v?1:0],[Number.NEGATIVE_INFINITY],[t],[e]],s=v;v=n.runWebGLProgram(o,i,"int32",a),ont(n,s)};for(let E=1;E<g;E*=2){const t=2*E;for(let e=E;e>=1;e/=2)x(t,e,[f,y])}for(let E=y;E>g;E/=2){const t=b(),e=new int([f,E/2]),r=[[u],[null===v?1:0],[g]],i=v;v=n.runWebGLProgram(e,t,"int32",r),ont(n,i);const o=g/2,a=2*o;for(let n=o;n>=1;n/=2)x(a,n,v.shape)}let _=v;v=o8({inputs:{x:v},backend:n,attrs:{begin:0,size:[f,o]}}),ont(n,_);let w=a9({inputs:{x:m,indices:v},backend:n,attrs:{axis:1,batchDims:1}});ont(n,m);const S=l.slice(0,-1);S.push(o),_=v,v=$6({inputs:{x:v},attrs:{shape:S},backend:n}),ont(n,_);const T=w;return w=$6({inputs:{x:w},attrs:{shape:S},backend:n}),ont(n,T),[w,v]}};class cnt{constructor(t,e,n,r,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a="nearest"===n?1:2;let s;switch(r){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(e,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(e,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(a," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}}const lnt={kernelName:Uz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,transforms:o}=e,{interpolation:a,fillMode:s,fillValue:c,outputShape:l}=r,[u,h,d,p]=i.shape,[f,m]=null!=l?l:[h,d],g=new cnt(h,d,a,s,c,[u,f,m,p]);return n.runWebGLProgram(g,[i,o],"float32")}};const unt={kernelName:zz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:o}=e;X1(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(o.dataId),{outputValues:s,outputShape:c,indices:l}=Q4(a,i,o.shape,o.dtype);return[r.makeTensorInfo(c,o.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}};const hnt={kernelName:Vz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:o}=r;o<0&&(o+=i.shape.length);const a=i,s=a.shape.length,c=i.shape[o],l=new Array(s-1);let u=0;for(let m=0;m<s;m++)m!==o&&(l[u++]=a.shape[m]);const h=[],d=new Array(s).fill(0),p=a.shape.slice();p[o]=1;const f=new Array(c);for(let m=0;m<f.length;m++){d[o]=m;const t=o8({inputs:{x:a},backend:n,attrs:{begin:d,size:p}}),e=$6({inputs:{x:t},backend:n,attrs:{shape:l}});f[m]=e,h.push(t)}return h.forEach((t=>n.disposeIntermediateTensorInfo(t))),f}};class dnt{constructor(t,e){this.variableNames=["x","segmentIds"];const n=t.windowSize,r=t.batchSize,i=t.inSize,o=t.numSegments,a=o*Math.ceil(i/n);this.outputShape=[r,a];const s=4*Math.floor(n/4),c=n%4,l="\n        sumValue += dot(values, segFilter);\n    ";let u="";i%n>0&&(u="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));let h="";i%n>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(u,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(h,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(n,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}}const pnt={kernelName:Gz,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:o}=e,{numSegments:a}=r,s=i.shape.length,c=[];let l=0;const u=AX([l],s);let h=i;null!=u&&(h=c5({inputs:{x:i},backend:n,attrs:{perm:u}}),c.push(h),l=OX(1,s)[0]);const d=_$(h.shape,l,a),p=Nj([h.shape[l]]),f=$6({inputs:{x:h},backend:n,attrs:{shape:[-1,p]}});c.push(f);const m=QV(i.dtype),g=(t,e,r,i,o)=>{const a=t.shape[0],s=t.shape[1],l=x$(s,o),u=new dnt({windowSize:l,inSize:s,batchSize:a,numSegments:o},e),h=n.compileAndRun(u,[t,r],i);if(c.push(h),h.shape[1]===o)return h;const d=Ltt({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),p=ent({inputs:{x:d},backend:n,attrs:{reps:[s/l]}});c.push(d),c.push(p);return g(h,e,p,i,o)},y=$6({inputs:{x:g(f,"unsortedSegmentSum",o,m,a)},backend:n,attrs:{shape:d}});let v=y;if(null!=u){c.push(y);const t=MX(u);v=c5({inputs:{x:v},backend:n,attrs:{perm:t}})}return c.forEach((t=>n.disposeIntermediateTensorInfo(t))),v}},fnt=[d5,f5,g5,v5,_5,T5,E5,A5,I5,N5,D5,F5,U5,z5,G5,q5,X5,Z5,J5,$5,e8,s8,c8,l8,u8,g8,b8,w8,D6,E8,N8,z8,q8,Y8,K8,Z8,J8,$8,t7,n7,c7,l7,u7,d7,m7,v7,b7,_7,S7,T7,E7,A7,O7,C7,P7,N7,L7,U7,V7,W7,X7,K7,$7,e9,n9,i9,s9,l9,h9,N6,d9,k8,f9,g9,v9,j6,x9,w9,S9,E9,M9,C9,P9,N9,L9,j9,B9,V9,G9,W9,X9,Y9,K9,Z9,J9,Q9,ntt,rtt,dtt,J6,ftt,gtt,vtt,xtt,d8,wtt,Ett,Att,ktt,Ptt,z6,Itt,Ntt,Rtt,Dtt,Ftt,f8,att,Utt,ztt,Gtt,Q6,qtt,Ytt,Jtt,Qtt,net,iet,aet,cet,det,fet,get,vet,xet,wet,Tet,Aet,a8,htt,Oet,Cet,ket,Pet,Iet,Net,Ret,Det,jet,Uet,Vet,Get,Wet,qet,Xet,Yet,Ket,ltt,s5,Zet,$et,Qet,nnt,snt,lnt,l5,unt,hnt,pnt,Ttt];for(const Set of fnt)iV(Set);const mnt=Z0.MediaPipeFaceMesh,gnt={runtime:"tfjs"},ynt={0:"Angry",1:"Disgust",2:"Fear",3:"Happy",4:"Sad",5:"Surprise",6:"Neutral"},vnt={0:"Man",1:"Woman"},bnt={0:"White",1:"Black",2:"Asian",3:"Indian",4:"Other"},xnt=()=>{const[t,e]=(0,k.useState)(!1),n=(0,k.useRef)(null),r=(0,k.useRef)(null),i=(0,k.useRef)(null),o=(0,k.useRef)(new lj.InferenceSession({backendHint:"webgl"})),a=(0,k.useRef)(new lj.InferenceSession({backendHint:"webgl"})),s=async e=>{if("undefined"!==typeof n.current&&null!==n.current&&"undefined"!==typeof r.current&&null!==i.current&&"undefined"!==typeof i.current&&null!==r.current&&4===n.current.video.readyState&&t){const t=n.current.video,i=n.current.video.videoWidth,o=n.current.video.videoHeight;n.current.video.width=i,n.current.video.height=o,r.current.width=i,r.current.height=o;const a=r.current.getContext("2d"),s=await e.estimateFaces(t);requestAnimationFrame((()=>c(a,s,t)))}},c=async(t,e,n)=>{if(e.length>0)for(let r of e){const e=await l(n,r);t.beginPath(),t.strokeStyle="#45ff6a",t.lineWidth=5,t.moveTo(r.box.xMin,r.box.yMin),t.lineTo(r.box.xMax,r.box.yMin),t.lineTo(r.box.xMax,r.box.yMax),t.lineTo(r.box.xMin,r.box.yMax),t.lineTo(r.box.xMin,r.box.yMin),t.scale(-1,1);const[i,o,a,s,c]=[1.25,"cursive","#45ff6a","right","top"];t.font="".concat(i,"em ").concat(o),t.textAlign=s,t.textBaseline=c,t.fillStyle=a,t.fillText(e,-1.15*r.box.xMin,r.box.yMin-20),t.stroke(),t.closePath()}},l=async(t,e)=>{if("undefined"!==typeof i.current&&null!==i.current){const n=e.box.width,r=e.box.height,s=e.box.xMin,c=e.box.yMin,[l,u]=[128,128],h=((t,e,n,r,i,o,a,s)=>{t.clearRect(0,0,e,n),t.drawImage(r,i,o,a,s,0,0,e,n);const c=t.getImageData(0,0,t.canvas.width,t.canvas.height),{data:l,width:u,height:h}=c,d=hj()(new Float32Array(l),[u,h,4]),p=hj()(new Float32Array(u*h*3),[1,3,u,h]);for(let f=0;f<3;f++)pj().assign(p.pick(0,f,null,null),d.pick(null,null,f));return pj().divseq(p,255),p})(i.current.getContext("2d"),l,u,t,s,c,n,r),d=[new lj.Tensor(h.data,"float32",[1,3,l,u])],p=await o.current.run(d),f=await a.current.run(d);let m=pj().argmax(hj()(new Float32Array(p.values().next().value.data))),g=f.get("age").data[0],y=pj().argmax(hj()(new Float32Array(f.get("gender").data))),v=pj().argmax(hj()(new Float32Array(f.get("race").data)));m=ynt[m],y=vnt[y],v=bnt[v];return"".concat(m," ").concat(v," ").concat(y," --- Age ").concat(g.toFixed(0))}return"Predicting ..."};return(0,k.useEffect)((()=>{let e,n;return(async()=>{await(async(t,e)=>{await t.loadModel("/static/models/fer.onnx"),await e.loadModel("/static/models/rag.onnx")})(o.current,a.current)})(),(async()=>{e=await function(t,e){return qQ(this,void 0,void 0,(function(){var n,r;return XQ(this,(function(i){if(t===Z0.MediaPipeFaceMesh){if(r=void 0,null!=(n=e)){if("tfjs"===n.runtime)return[2,d1(n)];if("mediapipe"===n.runtime)return[2,n0(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r)}throw new Error(t+" is not a supported model name.")}))}))}(mnt,gnt),setInterval((()=>s(e)),100),t&&(n=setInterval((()=>s(e)),100))})(),()=>{n&&clearInterval(n),o.current=new lj.InferenceSession({backendHint:"webgl"}),a.current=new lj.InferenceSession({backendHint:"webgl"})}}),[t]),(0,Ln.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-4",children:[(0,Ln.jsx)("div",{className:"col-span-8 flex justify-center",children:t?(0,Ln.jsxs)("div",{className:"relative inline-block",children:[(0,Ln.jsx)(wj(),{ref:n,mirrored:!0,audio:!1,forceScreenshotSourceSize:!0,screenshotFormat:"image/jpeg",screenshotQuality:1,className:"inset-0 w-full h-full",style:{zIndex:9}}),(0,Ln.jsx)("canvas",{ref:r,className:"absolute inset-0 w-full h-full transform scale-x-[-1]",style:{zIndex:9}}),(0,Ln.jsx)("canvas",{ref:i,height:"128",width:"128",className:"hidden"})]}):(0,Ln.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Ln.jsx)("span",{className:"loading loading-spinner loading-lg"})})}),(0,Ln.jsxs)("div",{className:"col-span-4 flex flex-col items-center",children:[(0,Ln.jsx)("div",{className:"alert alert-info bg-gray-300",children:(0,Ln.jsx)("div",{children:(0,Ln.jsxs)("span",{children:["If camera not showing after clicking the button, make sure you access the website via ",(0,Ln.jsx)("strong",{children:"https"})]})})}),(0,Ln.jsx)("div",{className:"alert alert-info mt-10 bg-gray-300",children:(0,Ln.jsx)("div",{children:(0,Ln.jsx)("span",{children:"All AI models involved here are embedded directly in your browser! So, No data sent to any obscur server! Yeah We are RGPD compliant!!!"})})})]}),(0,Ln.jsx)("div",{className:"col-span-12 flex justify-center my-12",children:(0,Ln.jsx)("button",{className:"btn",onClick:()=>e(!t),children:t?"Pause Camera":"Start Face Detection"})})]})},_nt=t=>{let{children:e,value:n,index:r}=t;return(0,Ln.jsx)("div",{role:"tabpanel",hidden:n!==r,id:"scrollable-auto-tabpanel-".concat(r),"aria-labelledby":"scrollable-auto-tab-".concat(r),children:n===r&&(0,Ln.jsx)("div",{className:"p-3",children:e})})},wnt=t=>{let{navBarHeight:e}=t;const[n,r]=(0,k.useState)(0),i=t=>{r(t)};return(0,Ln.jsxs)("div",{className:"w-full h-full bg-gray-800",style:{paddingTop:e},children:[(0,Ln.jsx)("div",{className:"w-full relative",children:(0,Ln.jsxs)("nav",{className:"flex justify-center",children:[(0,Ln.jsx)("button",{className:"px-4 py-2 focus:outline-none ".concat(0===n?"border-b":"border-b border-slate-500"),onClick:()=>i(0),children:"Digit Drawing Classifier"}),(0,Ln.jsx)("button",{className:"px-4 py-2 focus:outline-none ".concat(1===n?"border-b":"border-b border-slate-500"),onClick:()=>i(1),children:"Visual Emotion Classifier"})]})}),(0,Ln.jsxs)("div",{className:"p-4",children:[(0,Ln.jsx)(_nt,{value:n,index:0,children:(0,Ln.jsx)(xj,{})}),(0,Ln.jsx)(_nt,{value:n,index:1,children:(0,Ln.jsx)(xnt,{})})]})]})};function Snt(){return Snt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Snt.apply(null,arguments)}function Tnt(t){return Tnt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tnt(t)}function Ent(t){var e=function(t,e){if("object"!=Tnt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Tnt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tnt(e)?e:e+""}function Ant(t,e,n){return(e=Ent(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mnt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ont(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mnt(Object(n),!0).forEach((function(e){Ant(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mnt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Cnt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ent(r.key),r)}}function knt(t,e){return knt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},knt(t,e)}function Pnt(t){return Pnt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pnt(t)}function Int(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Int=function(){return!!t})()}function Nnt(t,e){if(e&&("object"==Tnt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Rnt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Dnt(t,e){if(t){if("string"==typeof t)return Rnt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rnt(t,e):void 0}}function Lnt(t){return function(t){if(Array.isArray(t))return Rnt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Dnt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Fnt=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(sCt){}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){var e;return null==(e=t.parentNode)?void 0:e.removeChild(t)})),this.tags=[],this.ctr=0},t}(),jnt=Math.abs,Unt=String.fromCharCode,Bnt=Object.assign;function znt(t){return t.trim()}function Vnt(t,e,n){return t.replace(e,n)}function Gnt(t,e){return t.indexOf(e)}function Wnt(t,e){return 0|t.charCodeAt(e)}function Hnt(t,e,n){return t.slice(e,n)}function qnt(t){return t.length}function Xnt(t){return t.length}function Ynt(t,e){return e.push(t),t}var Knt=1,Znt=1,Jnt=0,$nt=0,Qnt=0,trt="";function ert(t,e,n,r,i,o,a){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:Knt,column:Znt,length:a,return:""}}function nrt(t,e){return Bnt(ert("",null,null,"",null,null,0),t,{length:-t.length},e)}function rrt(){return Qnt=$nt>0?Wnt(trt,--$nt):0,Znt--,10===Qnt&&(Znt=1,Knt--),Qnt}function irt(){return Qnt=$nt<Jnt?Wnt(trt,$nt++):0,Znt++,10===Qnt&&(Znt=1,Knt++),Qnt}function ort(){return Wnt(trt,$nt)}function art(){return $nt}function srt(t,e){return Hnt(trt,t,e)}function crt(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function lrt(t){return Knt=Znt=1,Jnt=qnt(trt=t),$nt=0,[]}function urt(t){return trt="",t}function hrt(t){return znt(srt($nt-1,frt(91===t?t+2:40===t?t+1:t)))}function drt(t){for(;(Qnt=ort())&&Qnt<33;)irt();return crt(t)>2||crt(Qnt)>3?"":" "}function prt(t,e){for(;--e&&irt()&&!(Qnt<48||Qnt>102||Qnt>57&&Qnt<65||Qnt>70&&Qnt<97););return srt(t,art()+(e<6&&32==ort()&&32==irt()))}function frt(t){for(;irt();)switch(Qnt){case t:return $nt;case 34:case 39:34!==t&&39!==t&&frt(Qnt);break;case 40:41===t&&frt(t);break;case 92:irt()}return $nt}function mrt(t,e){for(;irt()&&t+Qnt!==57&&(t+Qnt!==84||47!==ort()););return"/*"+srt(e,$nt-1)+"*"+Unt(47===t?t:irt())}function grt(t){for(;!crt(ort());)irt();return srt(t,$nt)}var yrt="-ms-",vrt="-moz-",brt="-webkit-",xrt="comm",_rt="rule",wrt="decl",Srt="@keyframes";function Trt(t,e){for(var n="",r=Xnt(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function Ert(t,e,n,r){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case wrt:return t.return=t.return||t.value;case xrt:return"";case Srt:return t.return=t.value+"{"+Trt(t.children,r)+"}";case _rt:t.value=t.props.join(",")}return qnt(n=Trt(t.children,r))?t.return=t.value+"{"+n+"}":""}function Art(t){return urt(Mrt("",null,null,null,[""],t=lrt(t),0,[0],t))}function Mrt(t,e,n,r,i,o,a,s,c){for(var l=0,u=0,h=a,d=0,p=0,f=0,m=1,g=1,y=1,v=0,b="",x=i,_=o,w=r,S=b;g;)switch(f=v,v=irt()){case 40:if(108!=f&&58==Wnt(S,h-1)){-1!=Gnt(S+=Vnt(hrt(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:S+=hrt(v);break;case 9:case 10:case 13:case 32:S+=drt(f);break;case 92:S+=prt(art()-1,7);continue;case 47:switch(ort()){case 42:case 47:Ynt(Crt(mrt(irt(),art()),e,n),c);break;default:S+="/"}break;case 123*m:s[l++]=qnt(S)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+u:-1==y&&(S=Vnt(S,/\f/g,"")),p>0&&qnt(S)-h&&Ynt(p>32?krt(S+";",r,n,h-1):krt(Vnt(S," ","")+";",r,n,h-2),c);break;case 59:S+=";";default:if(Ynt(w=Ort(S,e,n,l,u,i,s,b,x=[],_=[],h),o),123===v)if(0===u)Mrt(S,e,w,w,x,o,h,s,_);else switch(99===d&&110===Wnt(S,3)?100:d){case 100:case 108:case 109:case 115:Mrt(t,w,w,r&&Ynt(Ort(t,w,w,0,0,i,s,b,i,x=[],h),_),i,_,h,s,r?x:_);break;default:Mrt(S,w,w,w,[""],_,0,s,_)}}l=u=p=0,m=y=1,b=S="",h=a;break;case 58:h=1+qnt(S),p=f;default:if(m<1)if(123==v)--m;else if(125==v&&0==m++&&125==rrt())continue;switch(S+=Unt(v),v*m){case 38:y=u>0?1:(S+="\f",-1);break;case 44:s[l++]=(qnt(S)-1)*y,y=1;break;case 64:45===ort()&&(S+=hrt(irt())),d=ort(),u=h=qnt(b=S+=grt(art())),v++;break;case 45:45===f&&2==qnt(S)&&(m=0)}}return o}function Ort(t,e,n,r,i,o,a,s,c,l,u){for(var h=i-1,d=0===i?o:[""],p=Xnt(d),f=0,m=0,g=0;f<r;++f)for(var y=0,v=Hnt(t,h+1,h=jnt(m=a[f])),b=t;y<p;++y)(b=znt(m>0?d[y]+" "+v:Vnt(v,/&\f/g,d[y])))&&(c[g++]=b);return ert(t,e,n,0===i?_rt:s,c,l,u)}function Crt(t,e,n){return ert(t,e,n,xrt,Unt(Qnt),Hnt(t,2,-2),0)}function krt(t,e,n,r){return ert(t,e,n,wrt,Hnt(t,0,r),Hnt(t,r+1,-1),r)}var Prt=function(t,e,n){for(var r=0,i=0;r=i,i=ort(),38===r&&12===i&&(e[n]=1),!crt(i);)irt();return srt(t,$nt)},Irt=function(t,e){return urt(function(t,e){var n=-1,r=44;do{switch(crt(r)){case 0:38===r&&12===ort()&&(e[n]=1),t[n]+=Prt($nt-1,e,n);break;case 2:t[n]+=hrt(r);break;case 4:if(44===r){t[++n]=58===ort()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=Unt(r)}}while(r=irt());return t}(lrt(t),e))},Nrt=new WeakMap,Rrt=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,r=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||Nrt.get(n))&&!r){Nrt.set(t,!0);for(var i=[],o=Irt(e,i),a=n.props,s=0,c=0;s<o.length;s++)for(var l=0;l<a.length;l++,c++)t.props[c]=i[s]?o[s].replace(/&\f/g,a[l]):a[l]+" "+o[s]}}},Drt=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}};function Lrt(t,e){switch(function(t,e){return 45^Wnt(t,0)?(((e<<2^Wnt(t,0))<<2^Wnt(t,1))<<2^Wnt(t,2))<<2^Wnt(t,3):0}(t,e)){case 5103:return brt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return brt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return brt+t+vrt+t+yrt+t+t;case 6828:case 4268:return brt+t+yrt+t+t;case 6165:return brt+t+yrt+"flex-"+t+t;case 5187:return brt+t+Vnt(t,/(\w+).+(:[^]+)/,brt+"box-$1$2"+yrt+"flex-$1$2")+t;case 5443:return brt+t+yrt+"flex-item-"+Vnt(t,/flex-|-self/,"")+t;case 4675:return brt+t+yrt+"flex-line-pack"+Vnt(t,/align-content|flex-|-self/,"")+t;case 5548:return brt+t+yrt+Vnt(t,"shrink","negative")+t;case 5292:return brt+t+yrt+Vnt(t,"basis","preferred-size")+t;case 6060:return brt+"box-"+Vnt(t,"-grow","")+brt+t+yrt+Vnt(t,"grow","positive")+t;case 4554:return brt+Vnt(t,/([^-])(transform)/g,"$1"+brt+"$2")+t;case 6187:return Vnt(Vnt(Vnt(t,/(zoom-|grab)/,brt+"$1"),/(image-set)/,brt+"$1"),t,"")+t;case 5495:case 3959:return Vnt(t,/(image-set\([^]*)/,brt+"$1$`$1");case 4968:return Vnt(Vnt(t,/(.+:)(flex-)?(.*)/,brt+"box-pack:$3"+yrt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+brt+t+t;case 4095:case 3583:case 4068:case 2532:return Vnt(t,/(.+)-inline(.+)/,brt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(qnt(t)-1-e>6)switch(Wnt(t,e+1)){case 109:if(45!==Wnt(t,e+4))break;case 102:return Vnt(t,/(.+:)(.+)-([^]+)/,"$1"+brt+"$2-$3$1"+vrt+(108==Wnt(t,e+3)?"$3":"$2-$3"))+t;case 115:return~Gnt(t,"stretch")?Lrt(Vnt(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==Wnt(t,e+1))break;case 6444:switch(Wnt(t,qnt(t)-3-(~Gnt(t,"!important")&&10))){case 107:return Vnt(t,":",":"+brt)+t;case 101:return Vnt(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+brt+(45===Wnt(t,14)?"inline-":"")+"box$3$1"+brt+"$2$3$1"+yrt+"$2box$3")+t}break;case 5936:switch(Wnt(t,e+11)){case 114:return brt+t+yrt+Vnt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return brt+t+yrt+Vnt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return brt+t+yrt+Vnt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return brt+t+yrt+t+t}return t}var Frt=[function(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case wrt:t.return=Lrt(t.value,t.length);break;case Srt:return Trt([nrt(t,{value:Vnt(t.value,"@","@"+brt)})],r);case _rt:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Trt([nrt(t,{props:[Vnt(e,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Trt([nrt(t,{props:[Vnt(e,/:(plac\w+)/,":"+brt+"input-$1")]}),nrt(t,{props:[Vnt(e,/:(plac\w+)/,":-moz-$1")]}),nrt(t,{props:[Vnt(e,/:(plac\w+)/,yrt+"input-$1")]})],r)}return""}))}}],jrt=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var r,i,o=t.stylisPlugins||Frt,a={},s=[];r=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)a[e[n]]=!0;s.push(t)}));var c,l,u=[Ert,(l=function(t){c.insert(t)},function(t){t.root||(t=t.return)&&l(t)})],h=function(t){var e=Xnt(t);return function(n,r,i,o){for(var a="",s=0;s<e;s++)a+=t[s](n,r,i,o)||"";return a}}([Rrt,Drt].concat(o,u));i=function(t,e,n,r){c=n,Trt(Art(t?t+"{"+e.styles+"}":e.styles),h),r&&(d.inserted[e.name]=!0)};var d={key:e,sheet:new Fnt({key:e,container:r,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:i};return d.sheet.hydrate(s),d};var Urt=function(t,e,n){var r=t.key+"-"+e.name;!1===n&&void 0===t.registered[r]&&(t.registered[r]=e.styles)};var Brt={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function zrt(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}var Vrt=!1,Grt=/[A-Z]|^ms/g,Wrt=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Hrt=function(t){return 45===t.charCodeAt(1)},qrt=function(t){return null!=t&&"boolean"!==typeof t},Xrt=zrt((function(t){return Hrt(t)?t:t.replace(Grt,"-$&").toLowerCase()})),Yrt=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(Wrt,(function(t,e,n){return Jrt={name:e,styles:n,next:Jrt},e}))}return 1===Brt[t]||Hrt(t)||"number"!==typeof e||0===e?e:e+"px"},Krt="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Zrt(t,e,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return Jrt={name:i.name,styles:i.styles,next:Jrt},i.name;var o=n;if(void 0!==o.styles){var a=o.next;if(void 0!==a)for(;void 0!==a;)Jrt={name:a.name,styles:a.styles,next:Jrt},a=a.next;return o.styles+";"}return function(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Zrt(t,e,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a){var s=a;null!=e&&void 0!==e[s]?r+=o+"{"+e[s]+"}":qrt(s)&&(r+=Xrt(o)+":"+Yrt(o,s)+";")}else{if("NO_COMPONENT_SELECTOR"===o&&Vrt)throw new Error(Krt);if(!Array.isArray(a)||"string"!==typeof a[0]||null!=e&&void 0!==e[a[0]]){var c=Zrt(t,e,a);switch(o){case"animation":case"animationName":r+=Xrt(o)+":"+c+";";break;default:r+=o+"{"+c+"}"}}else for(var l=0;l<a.length;l++)qrt(a[l])&&(r+=Xrt(o)+":"+Yrt(o,a[l])+";")}}return r}(t,e,n);case"function":if(void 0!==t){var s=Jrt,c=n(t);return Jrt=s,Zrt(t,e,c)}}var l=n;if(null==e)return l;var u=e[l];return void 0!==u?u:l}var Jrt,$rt=/label:\s*([^\s;\n{]+)\s*(;|$)/g;function Qrt(t,e,n){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var r=!0,i="";Jrt=void 0;var o=t[0];null==o||void 0===o.raw?(r=!1,i+=Zrt(n,e,o)):i+=o[0];for(var a=1;a<t.length;a++){if(i+=Zrt(n,e,t[a]),r)i+=o[a]}$rt.lastIndex=0;for(var s,c="";null!==(s=$rt.exec(i));)c+="-"+s[1];var l=function(t){for(var e,n=0,r=0,i=t.length;i>=4;++r,i-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+c;return{name:l,styles:i,next:Jrt}}var tit=!!P.useInsertionEffect&&P.useInsertionEffect,eit=tit||function(t){return t()},nit=(tit||k.useLayoutEffect,k.createContext("undefined"!==typeof HTMLElement?jrt({key:"css"}):null)),rit=(nit.Provider,function(t){return(0,k.forwardRef)((function(e,n){var r=(0,k.useContext)(nit);return t(e,r,n)}))}),iit=k.createContext({});var oit={}.hasOwnProperty,ait="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",sit=function(t){var e=t.cache,n=t.serialized,r=t.isStringTag;return Urt(e,n,r),eit((function(){return function(t,e,n){Urt(t,e,n);var r=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var i=e;do{t.insert(e===i?"."+r:"",i,t.sheet,!0),i=i.next}while(void 0!==i)}}(e,n,r)})),null},cit=rit((function(t,e,n){var r=t.css;"string"===typeof r&&void 0!==e.registered[r]&&(r=e.registered[r]);var i=t[ait],o=[r],a="";"string"===typeof t.className?a=function(t,e,n){var r="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):r+=n+" "})),r}(e.registered,o,t.className):null!=t.className&&(a=t.className+" ");var s=Qrt(o,void 0,k.useContext(iit));a+=e.key+"-"+s.name;var c={};for(var l in t)oit.call(t,l)&&"css"!==l&&l!==ait&&(c[l]=t[l]);return c.className=a,n&&(c.ref=n),k.createElement(k.Fragment,null,k.createElement(sit,{cache:e,serialized:s,isStringTag:"string"===typeof i}),k.createElement(i,c))})),lit=cit,uit=(__webpack_require__(219),function(t,e){var n=arguments;if(null==e||!oit.call(e,"css"))return k.createElement.apply(void 0,n);var r=n.length,i=new Array(r);i[0]=lit,i[1]=function(t,e){var n={};for(var r in e)oit.call(e,r)&&(n[r]=e[r]);return n[ait]=t,n}(t,e);for(var o=2;o<r;o++)i[o]=n[o];return k.createElement.apply(null,i)});function hit(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Qrt(e)}function dit(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||Dnt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pit(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}const fit=Math.min,mit=Math.max,git=Math.round,yit=Math.floor,vit=t=>({x:t,y:t});function bit(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function xit(t){return Sit(t)?(t.nodeName||"").toLowerCase():"#document"}function _it(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function wit(t){var e;return null==(e=(Sit(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function Sit(t){return t instanceof Node||t instanceof _it(t).Node}function Tit(t){return t instanceof Element||t instanceof _it(t).Element}function Eit(t){return t instanceof HTMLElement||t instanceof _it(t).HTMLElement}function Ait(t){return"undefined"!==typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof _it(t).ShadowRoot)}function Mit(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=kit(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Oit(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Cit(t){return["html","body","#document"].includes(xit(t))}function kit(t){return _it(t).getComputedStyle(t)}function Pit(t){if("html"===xit(t))return t;const e=t.assignedSlot||t.parentNode||Ait(t)&&t.host||wit(t);return Ait(e)?e.host:e}function Iit(t){const e=Pit(t);return Cit(e)?t.ownerDocument?t.ownerDocument.body:t.body:Eit(e)&&Mit(e)?e:Iit(e)}function Nit(t,e,n){var r;void 0===e&&(e=[]),void 0===n&&(n=!0);const i=Iit(t),o=i===(null==(r=t.ownerDocument)?void 0:r.body),a=_it(i);return o?e.concat(a,a.visualViewport||[],Mit(i)?i:[],a.frameElement&&n?Nit(a.frameElement):[]):e.concat(i,Nit(i,[],n))}function Rit(t){const e=kit(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Eit(t),o=i?t.offsetWidth:n,a=i?t.offsetHeight:r,s=git(n)!==o||git(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function Dit(t){return Tit(t)?t:t.contextElement}function Lit(t){const e=Dit(t);if(!Eit(e))return vit(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=Rit(e);let a=(o?git(n.width):n.width)/r,s=(o?git(n.height):n.height)/i;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const Fit=vit(0);function jit(t){const e=_it(t);return Oit()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:Fit}function Uit(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=!1);const i=t.getBoundingClientRect(),o=Dit(t);let a=vit(1);e&&(r?Tit(r)&&(a=Lit(r)):a=Lit(t));const s=function(t,e,n){return void 0===e&&(e=!1),!(!n||e&&n!==_it(t))&&e}(o,n,r)?jit(o):vit(0);let c=(i.left+s.x)/a.x,l=(i.top+s.y)/a.y,u=i.width/a.x,h=i.height/a.y;if(o){const t=_it(o),e=r&&Tit(r)?_it(r):r;let n=t,i=n.frameElement;for(;i&&r&&e!==n;){const t=Lit(i),e=i.getBoundingClientRect(),r=kit(i),o=e.left+(i.clientLeft+parseFloat(r.paddingLeft))*t.x,a=e.top+(i.clientTop+parseFloat(r.paddingTop))*t.y;c*=t.x,l*=t.y,u*=t.x,h*=t.y,c+=o,l+=a,n=_it(i),i=n.frameElement}}return bit({width:u,height:h,x:c,y:l})}function Bit(t,e,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a="function"===typeof ResizeObserver,layoutShift:s="function"===typeof IntersectionObserver,animationFrame:c=!1}=r,l=Dit(t),u=i||o?[...l?Nit(l):[],...Nit(e)]:[];u.forEach((t=>{i&&t.addEventListener("scroll",n,{passive:!0}),o&&t.addEventListener("resize",n)}));const h=l&&s?function(t,e){let n,r=null;const i=wit(t);function o(){var t;clearTimeout(n),null==(t=r)||t.disconnect(),r=null}return function a(s,c){void 0===s&&(s=!1),void 0===c&&(c=1),o();const{left:l,top:u,width:h,height:d}=t.getBoundingClientRect();if(s||e(),!h||!d)return;const p={rootMargin:-yit(u)+"px "+-yit(i.clientWidth-(l+h))+"px "+-yit(i.clientHeight-(u+d))+"px "+-yit(l)+"px",threshold:mit(0,fit(1,c))||1};let f=!0;function m(t){const e=t[0].intersectionRatio;if(e!==c){if(!f)return a();e?a(!1,e):n=setTimeout((()=>{a(!1,1e-7)}),1e3)}f=!1}try{r=new IntersectionObserver(m,{...p,root:i.ownerDocument})}catch(sCt){r=new IntersectionObserver(m,p)}r.observe(t)}(!0),o}(l,n):null;let d,p=-1,f=null;a&&(f=new ResizeObserver((t=>{let[r]=t;r&&r.target===l&&f&&(f.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var t;null==(t=f)||t.observe(e)}))),n()})),l&&!c&&f.observe(l),f.observe(e));let m=c?Uit(t):null;return c&&function e(){const r=Uit(t);!m||r.x===m.x&&r.y===m.y&&r.width===m.width&&r.height===m.height||n();m=r,d=requestAnimationFrame(e)}(),n(),()=>{var t;u.forEach((t=>{i&&t.removeEventListener("scroll",n),o&&t.removeEventListener("resize",n)})),null==h||h(),null==(t=f)||t.disconnect(),f=null,c&&cancelAnimationFrame(d)}}const zit=k.useLayoutEffect;var Vit=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Git=function(){};function Wit(t,e){return e?"-"===e[0]?t+e:t+"__"+e:t}function Hit(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=[].concat(r);if(e&&t)for(var a in e)e.hasOwnProperty(a)&&e[a]&&o.push("".concat(Wit(t,a)));return o.filter((function(t){return t})).map((function(t){return String(t).trim()})).join(" ")}var qit=function(t){return e=t,Array.isArray(e)?t.filter(Boolean):"object"===Tnt(t)&&null!==t?[t]:[];var e},Xit=function(t){return t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme,Ont({},pit(t,Vit))},Yit=function(t,e,n){var r=t.cx,i=t.getStyles,o=t.getClassNames,a=t.className;return{css:i(e,t),className:r(null!==n&&void 0!==n?n:{},o(e,t),a)}};function Kit(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function Zit(t){return Kit(t)?window.pageYOffset:t.scrollTop}function Jit(t,e){Kit(t)?window.scrollTo(0,e):t.scrollTop=e}function $it(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Git,i=Zit(t),o=e-i,a=0;!function e(){var s=function(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}(a+=10,i,o,n);Jit(t,s),a<n?window.requestAnimationFrame(e):r(t)}()}function Qit(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>n.bottom?Jit(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):r.top-i<n.top&&Jit(t,Math.max(e.offsetTop-i,0))}function tot(){try{return document.createEvent("TouchEvent"),!0}catch(sCt){return!1}}var eot=!1,not={get passive(){return eot=!0}},rot="undefined"!==typeof window?window:{};rot.addEventListener&&rot.removeEventListener&&(rot.addEventListener("p",Git,not),rot.removeEventListener("p",Git,!1));var iot=eot;function oot(t){return null!=t}function aot(t,e,n){return t?e:n}var sot=["children","innerProps"],cot=["children","innerProps"];function lot(t){var e=t.maxHeight,n=t.menuEl,r=t.minHeight,i=t.placement,o=t.shouldScroll,a=t.isFixedPosition,s=t.controlHeight,c=function(t){var e=getComputedStyle(t),n="absolute"===e.position,r=/(auto|scroll)/;if("fixed"===e.position)return document.documentElement;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),(!n||"static"!==e.position)&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}(n),l={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return l;var u,h=c.getBoundingClientRect().height,d=n.getBoundingClientRect(),p=d.bottom,f=d.height,m=d.top,g=n.offsetParent.getBoundingClientRect().top,y=a?window.innerHeight:Kit(u=c)?window.innerHeight:u.clientHeight,v=Zit(c),b=parseInt(getComputedStyle(n).marginBottom,10),x=parseInt(getComputedStyle(n).marginTop,10),_=g-x,w=y-m,S=_+v,T=h-v-m,E=p-y+v+b,A=v+m-x,M=160;switch(i){case"auto":case"bottom":if(w>=f)return{placement:"bottom",maxHeight:e};if(T>=f&&!a)return o&&$it(c,E,M),{placement:"bottom",maxHeight:e};if(!a&&T>=r||a&&w>=r)return o&&$it(c,E,M),{placement:"bottom",maxHeight:a?w-b:T-b};if("auto"===i||a){var O=e,C=a?_:S;return C>=r&&(O=Math.min(C-b-s,e)),{placement:"top",maxHeight:O}}if("bottom"===i)return o&&Jit(c,E),{placement:"bottom",maxHeight:e};break;case"top":if(_>=f)return{placement:"top",maxHeight:e};if(S>=f&&!a)return o&&$it(c,A,M),{placement:"top",maxHeight:e};if(!a&&S>=r||a&&_>=r){var k=e;return(!a&&S>=r||a&&_>=r)&&(k=a?_-x:S-x),o&&$it(c,A,M),{placement:"top",maxHeight:k}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return l}var uot,hot=function(t){return"auto"===t?"bottom":t},dot=(0,k.createContext)(null),pot=function(t){var e=t.children,n=t.minMenuHeight,r=t.maxMenuHeight,i=t.menuPlacement,o=t.menuPosition,a=t.menuShouldScrollIntoView,s=t.theme,c=((0,k.useContext)(dot)||{}).setPortalPlacement,l=(0,k.useRef)(null),u=dit((0,k.useState)(r),2),h=u[0],d=u[1],p=dit((0,k.useState)(null),2),f=p[0],m=p[1],g=s.spacing.controlHeight;return zit((function(){var t=l.current;if(t){var e="fixed"===o,s=lot({maxHeight:r,menuEl:t,minHeight:n,placement:i,shouldScroll:a&&!e,isFixedPosition:e,controlHeight:g});d(s.maxHeight),m(s.placement),null===c||void 0===c||c(s.placement)}}),[r,i,o,a,n,c,g]),e({ref:l,placerProps:Ont(Ont({},t),{},{placement:f||hot(i),maxHeight:h})})},fot=function(t){var e=t.children,n=t.innerRef,r=t.innerProps;return uit("div",Snt({},Yit(t,"menu",{menu:!0}),{ref:n},r),e)},mot=function(t,e){var n=t.theme,r=n.spacing.baseUnit,i=n.colors;return Ont({textAlign:"center"},e?{}:{color:i.neutral40,padding:"".concat(2*r,"px ").concat(3*r,"px")})},got=mot,yot=mot,vot=["size"],bot=["innerProps","isRtl","size"];var xot={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},_ot=function(t){var e=t.size,n=pit(t,vot);return uit("svg",Snt({height:e,width:e,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:xot},n))},wot=function(t){return uit(_ot,Snt({size:20},t),uit("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Sot=function(t){return uit(_ot,Snt({size:20},t),uit("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Tot=function(t,e){var n=t.isFocused,r=t.theme,i=r.spacing.baseUnit,o=r.colors;return Ont({label:"indicatorContainer",display:"flex",transition:"color 150ms"},e?{}:{color:n?o.neutral60:o.neutral20,padding:2*i,":hover":{color:n?o.neutral80:o.neutral40}})},Eot=Tot,Aot=Tot,Mot=function(){var t=hit.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(uot||(uot=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"]))),Oot=function(t){var e=t.delay,n=t.offset;return uit("span",{css:hit({animation:"".concat(Mot," 1s ease-in-out ").concat(e,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Cot=function(t){var e=t.children,n=t.isDisabled,r=t.isFocused,i=t.innerRef,o=t.innerProps,a=t.menuIsOpen;return uit("div",Snt({ref:i},Yit(t,"control",{control:!0,"control--is-disabled":n,"control--is-focused":r,"control--menu-is-open":a}),o,{"aria-disabled":n||void 0}),e)},kot=["data"],Pot=function(t){var e=t.children,n=t.cx,r=t.getStyles,i=t.getClassNames,o=t.Heading,a=t.headingProps,s=t.innerProps,c=t.label,l=t.theme,u=t.selectProps;return uit("div",Snt({},Yit(t,"group",{group:!0}),s),uit(o,Snt({},a,{selectProps:u,theme:l,getStyles:r,getClassNames:i,cx:n}),c),uit("div",null,e))},Iot=["innerRef","isDisabled","isHidden","inputClassName"],Not={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Rot={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ont({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Not)},Dot=function(t){return Ont({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},Not)},Lot=function(t){var e=t.cx,n=t.value,r=Xit(t),i=r.innerRef,o=r.isDisabled,a=r.isHidden,s=r.inputClassName,c=pit(r,Iot);return uit("div",Snt({},Yit(t,"input",{"input-container":!0}),{"data-value":n||""}),uit("input",Snt({className:e({input:!0},s),ref:i,style:Dot(a),disabled:o},c)))},Fot=function(t){var e=t.children,n=t.innerProps;return uit("div",n,e)};var jot=function(t){var e=t.children,n=t.components,r=t.data,i=t.innerProps,o=t.isDisabled,a=t.removeProps,s=t.selectProps,c=n.Container,l=n.Label,u=n.Remove;return uit(c,{data:r,innerProps:Ont(Ont({},Yit(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),i),selectProps:s},uit(l,{data:r,innerProps:Ont({},Yit(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:s},e),uit(u,{data:r,innerProps:Ont(Ont({},Yit(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(e||"option")},a),selectProps:s}))},Uot=function(t){var e=t.children,n=t.isDisabled,r=t.isFocused,i=t.isSelected,o=t.innerRef,a=t.innerProps;return uit("div",Snt({},Yit(t,"option",{option:!0,"option--is-disabled":n,"option--is-focused":r,"option--is-selected":i}),{ref:o,"aria-disabled":n},a),e)},Bot=function(t){var e=t.children,n=t.innerProps;return uit("div",Snt({},Yit(t,"placeholder",{placeholder:!0}),n),e)},zot=function(t){var e=t.children,n=t.isDisabled,r=t.innerProps;return uit("div",Snt({},Yit(t,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),r),e)},Vot={ClearIndicator:function(t){var e=t.children,n=t.innerProps;return uit("div",Snt({},Yit(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),e||uit(wot,null))},Control:Cot,DropdownIndicator:function(t){var e=t.children,n=t.innerProps;return uit("div",Snt({},Yit(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),e||uit(Sot,null))},DownChevron:Sot,CrossIcon:wot,Group:Pot,GroupHeading:function(t){var e=Xit(t);e.data;var n=pit(e,kot);return uit("div",Snt({},Yit(t,"groupHeading",{"group-heading":!0}),n))},IndicatorsContainer:function(t){var e=t.children,n=t.innerProps;return uit("div",Snt({},Yit(t,"indicatorsContainer",{indicators:!0}),n),e)},IndicatorSeparator:function(t){var e=t.innerProps;return uit("span",Snt({},e,Yit(t,"indicatorSeparator",{"indicator-separator":!0})))},Input:Lot,LoadingIndicator:function(t){var e=t.innerProps,n=t.isRtl,r=t.size,i=void 0===r?4:r,o=pit(t,bot);return uit("div",Snt({},Yit(Ont(Ont({},o),{},{innerProps:e,isRtl:n,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),e),uit(Oot,{delay:0,offset:n}),uit(Oot,{delay:160,offset:!0}),uit(Oot,{delay:320,offset:!n}))},Menu:fot,MenuList:function(t){var e=t.children,n=t.innerProps,r=t.innerRef,i=t.isMulti;return uit("div",Snt({},Yit(t,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:r},n),e)},MenuPortal:function(t){var e=t.appendTo,n=t.children,r=t.controlElement,i=t.innerProps,o=t.menuPlacement,a=t.menuPosition,s=(0,k.useRef)(null),c=(0,k.useRef)(null),l=dit((0,k.useState)(hot(o)),2),u=l[0],h=l[1],d=(0,k.useMemo)((function(){return{setPortalPlacement:h}}),[]),p=dit((0,k.useState)(null),2),f=p[0],m=p[1],g=(0,k.useCallback)((function(){if(r){var t=function(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}(r),e="fixed"===a?0:window.pageYOffset,n=t[u]+e;n===(null===f||void 0===f?void 0:f.offset)&&t.left===(null===f||void 0===f?void 0:f.rect.left)&&t.width===(null===f||void 0===f?void 0:f.rect.width)||m({offset:n,rect:t})}}),[r,a,u,null===f||void 0===f?void 0:f.offset,null===f||void 0===f?void 0:f.rect.left,null===f||void 0===f?void 0:f.rect.width]);zit((function(){g()}),[g]);var y=(0,k.useCallback)((function(){"function"===typeof c.current&&(c.current(),c.current=null),r&&s.current&&(c.current=Bit(r,s.current,g,{elementResize:"ResizeObserver"in window}))}),[r,g]);zit((function(){y()}),[y]);var v=(0,k.useCallback)((function(t){s.current=t,y()}),[y]);if(!e&&"fixed"!==a||!f)return null;var b=uit("div",Snt({ref:v},Yit(Ont(Ont({},t),{},{offset:f.offset,position:a,rect:f.rect}),"menuPortal",{"menu-portal":!0}),i),n);return uit(dot.Provider,{value:d},e?(0,N.createPortal)(b,e):b)},LoadingMessage:function(t){var e=t.children,n=void 0===e?"Loading...":e,r=t.innerProps,i=pit(t,cot);return uit("div",Snt({},Yit(Ont(Ont({},i),{},{children:n,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),n)},NoOptionsMessage:function(t){var e=t.children,n=void 0===e?"No options":e,r=t.innerProps,i=pit(t,sot);return uit("div",Snt({},Yit(Ont(Ont({},i),{},{children:n,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),n)},MultiValue:jot,MultiValueContainer:Fot,MultiValueLabel:Fot,MultiValueRemove:function(t){var e=t.children,n=t.innerProps;return uit("div",Snt({role:"button"},n),e||uit(wot,{size:14}))},Option:Uot,Placeholder:Bot,SelectContainer:function(t){var e=t.children,n=t.innerProps,r=t.isDisabled,i=t.isRtl;return uit("div",Snt({},Yit(t,"container",{"--is-disabled":r,"--is-rtl":i}),n),e)},SingleValue:zot,ValueContainer:function(t){var e=t.children,n=t.innerProps,r=t.isMulti,i=t.hasValue;return uit("div",Snt({},Yit(t,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":i}),n),e)}},Got=Number.isNaN||function(t){return"number"===typeof t&&t!==t};function Wot(t,e){return t===e||!(!Got(t)||!Got(e))}function Hot(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Wot(t[n],e[n]))return!1;return!0}for(var qot={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Xot=function(t){return uit("span",Snt({css:qot},t))},Yot={guidance:function(t){var e=t.isSearchable,n=t.isMulti,r=t.tabSelectsValue,i=t.context,o=t.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(t["aria-label"]||"Select"," is focused ").concat(e?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var e=t.action,n=t.label,r=void 0===n?"":n,i=t.labels,o=t.isDisabled;switch(e){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return"option ".concat(r,o?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(t){var e=t.context,n=t.focused,r=t.options,i=t.label,o=void 0===i?"":i,a=t.selectValue,s=t.isDisabled,c=t.isSelected,l=t.isAppleDevice,u=function(t,e){return t&&t.length?"".concat(t.indexOf(e)+1," of ").concat(t.length):""};if("value"===e&&a)return"value ".concat(o," focused, ").concat(u(a,n),".");if("menu"===e&&l){var h=s?" disabled":"",d="".concat(c?" selected":"").concat(h);return"".concat(o).concat(d,", ").concat(u(r,n),".")}return""},onFilter:function(t){var e=t.inputValue,n=t.resultsMessage;return"".concat(n).concat(e?" for search term "+e:"",".")}},Kot=function(t){var e=t.ariaSelection,n=t.focusedOption,r=t.focusedValue,i=t.focusableOptions,o=t.isFocused,a=t.selectValue,s=t.selectProps,c=t.id,l=t.isAppleDevice,u=s.ariaLiveMessages,h=s.getOptionLabel,d=s.inputValue,p=s.isMulti,f=s.isOptionDisabled,m=s.isSearchable,g=s.menuIsOpen,y=s.options,v=s.screenReaderStatus,b=s.tabSelectsValue,x=s.isLoading,_=s["aria-label"],w=s["aria-live"],S=(0,k.useMemo)((function(){return Ont(Ont({},Yot),u||{})}),[u]),T=(0,k.useMemo)((function(){var t,n="";if(e&&S.onChange){var r=e.option,i=e.options,o=e.removedValue,s=e.removedValues,c=e.value,l=o||r||(t=c,Array.isArray(t)?null:t),u=l?h(l):"",d=i||s||void 0,p=d?d.map(h):[],m=Ont({isDisabled:l&&f(l,a),label:u,labels:p},e);n=S.onChange(m)}return n}),[e,S,f,a,h]),E=(0,k.useMemo)((function(){var t="",e=n||r,o=!!(n&&a&&a.includes(n));if(e&&S.onFocus){var s={focused:e,label:h(e),isDisabled:f(e,a),isSelected:o,options:i,context:e===n?"menu":"value",selectValue:a,isAppleDevice:l};t=S.onFocus(s)}return t}),[n,r,h,f,S,i,a,l]),A=(0,k.useMemo)((function(){var t="";if(g&&y.length&&!x&&S.onFilter){var e=v({count:i.length});t=S.onFilter({inputValue:d,resultsMessage:e})}return t}),[i,d,g,S,y,v,x]),M="initial-input-focus"===(null===e||void 0===e?void 0:e.action),O=(0,k.useMemo)((function(){var t="";if(S.guidance){var e=r?"value":g?"menu":"input";t=S.guidance({"aria-label":_,context:e,isDisabled:n&&f(n,a),isMulti:p,isSearchable:m,tabSelectsValue:b,isInitialFocus:M})}return t}),[_,n,r,p,f,m,g,S,a,b,M]),C=uit(k.Fragment,null,uit("span",{id:"aria-selection"},T),uit("span",{id:"aria-focused"},E),uit("span",{id:"aria-results"},A),uit("span",{id:"aria-guidance"},O));return uit(k.Fragment,null,uit(Xot,{id:c},M&&C),uit(Xot,{"aria-live":w,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!M&&C))},Zot=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],Jot=new RegExp("["+Zot.map((function(t){return t.letters})).join("")+"]","g"),$ot={},Qot=0;Qot<Zot.length;Qot++)for(var tat=Zot[Qot],eat=0;eat<tat.letters.length;eat++)$ot[tat.letters[eat]]=tat.base;var nat=function(t){return t.replace(Jot,(function(t){return $ot[t]}))},rat=function(t,e){void 0===e&&(e=Hot);var n=null;function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&e(r,n.lastArgs))return n.lastResult;var o=t.apply(this,r);return n={lastResult:o,lastArgs:r,lastThis:this},o}return r.clear=function(){n=null},r}(nat),iat=function(t){return t.replace(/^\s+|\s+$/g,"")},oat=function(t){return"".concat(t.label," ").concat(t.value)},aat=["innerRef"];function sat(t){var e=t.innerRef,n=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=Object.entries(t).filter((function(t){var e=dit(t,1)[0];return!n.includes(e)}));return i.reduce((function(t,e){var n=dit(e,2),r=n[0],i=n[1];return t[r]=i,t}),{})}(pit(t,aat),"onExited","in","enter","exit","appear");return uit("input",Snt({ref:e},n,{css:hit({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var cat=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};var lat=["boxSizing","height","overflow","paddingRight","position"],uat={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function hat(t){t.preventDefault()}function dat(t){t.stopPropagation()}function pat(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;0===t?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function fat(){return"ontouchstart"in window||navigator.maxTouchPoints}var mat=!("undefined"===typeof window||!window.document||!window.document.createElement),gat=0,yat={capture:!1,passive:!1};var vat=function(t){var e=t.target;return e.ownerDocument.activeElement&&e.ownerDocument.activeElement.blur()},bat={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function xat(t){var e=t.children,n=t.lockEnabled,r=t.captureEnabled,i=function(t){var e=t.isEnabled,n=t.onBottomArrive,r=t.onBottomLeave,i=t.onTopArrive,o=t.onTopLeave,a=(0,k.useRef)(!1),s=(0,k.useRef)(!1),c=(0,k.useRef)(0),l=(0,k.useRef)(null),u=(0,k.useCallback)((function(t,e){if(null!==l.current){var c=l.current,u=c.scrollTop,h=c.scrollHeight,d=c.clientHeight,p=l.current,f=e>0,m=h-d-u,g=!1;m>e&&a.current&&(r&&r(t),a.current=!1),f&&s.current&&(o&&o(t),s.current=!1),f&&e>m?(n&&!a.current&&n(t),p.scrollTop=h,g=!0,a.current=!0):!f&&-e>u&&(i&&!s.current&&i(t),p.scrollTop=0,g=!0,s.current=!0),g&&cat(t)}}),[n,r,i,o]),h=(0,k.useCallback)((function(t){u(t,t.deltaY)}),[u]),d=(0,k.useCallback)((function(t){c.current=t.changedTouches[0].clientY}),[]),p=(0,k.useCallback)((function(t){var e=c.current-t.changedTouches[0].clientY;u(t,e)}),[u]),f=(0,k.useCallback)((function(t){if(t){var e=!!iot&&{passive:!1};t.addEventListener("wheel",h,e),t.addEventListener("touchstart",d,e),t.addEventListener("touchmove",p,e)}}),[p,d,h]),m=(0,k.useCallback)((function(t){t&&(t.removeEventListener("wheel",h,!1),t.removeEventListener("touchstart",d,!1),t.removeEventListener("touchmove",p,!1))}),[p,d,h]);return(0,k.useEffect)((function(){if(e){var t=l.current;return f(t),function(){m(t)}}}),[e,f,m]),function(t){l.current=t}}({isEnabled:void 0===r||r,onBottomArrive:t.onBottomArrive,onBottomLeave:t.onBottomLeave,onTopArrive:t.onTopArrive,onTopLeave:t.onTopLeave}),o=function(t){var e=t.isEnabled,n=t.accountForScrollbars,r=void 0===n||n,i=(0,k.useRef)({}),o=(0,k.useRef)(null),a=(0,k.useCallback)((function(t){if(mat){var e=document.body,n=e&&e.style;if(r&&lat.forEach((function(t){var e=n&&n[t];i.current[t]=e})),r&&gat<1){var o=parseInt(i.current.paddingRight,10)||0,a=document.body?document.body.clientWidth:0,s=window.innerWidth-a+o||0;Object.keys(uat).forEach((function(t){var e=uat[t];n&&(n[t]=e)})),n&&(n.paddingRight="".concat(s,"px"))}e&&fat()&&(e.addEventListener("touchmove",hat,yat),t&&(t.addEventListener("touchstart",pat,yat),t.addEventListener("touchmove",dat,yat))),gat+=1}}),[r]),s=(0,k.useCallback)((function(t){if(mat){var e=document.body,n=e&&e.style;gat=Math.max(gat-1,0),r&&gat<1&&lat.forEach((function(t){var e=i.current[t];n&&(n[t]=e)})),e&&fat()&&(e.removeEventListener("touchmove",hat,yat),t&&(t.removeEventListener("touchstart",pat,yat),t.removeEventListener("touchmove",dat,yat)))}}),[r]);return(0,k.useEffect)((function(){if(e){var t=o.current;return a(t),function(){s(t)}}}),[e,a,s]),function(t){o.current=t}}({isEnabled:n});return uit(k.Fragment,null,n&&uit("div",{onClick:vat,css:bat}),e((function(t){i(t),o(t)})))}var _at={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},wat=function(t){var e=t.name,n=t.onFocus;return uit("input",{required:!0,name:e,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:_at,value:"",onChange:function(){}})};function Sat(t){var e;return"undefined"!==typeof window&&null!=window.navigator&&t.test((null===(e=window.navigator.userAgentData)||void 0===e?void 0:e.platform)||window.navigator.platform)}function Tat(){return Sat(/^Mac/i)}function Eat(){return Sat(/^iPhone/i)||Sat(/^iPad/i)||Tat()&&navigator.maxTouchPoints>1}var Aat=function(t){return t.label},Mat=function(t){return t.value},Oat={clearIndicator:Aot,container:function(t){var e=t.isDisabled;return{label:"container",direction:t.isRtl?"rtl":void 0,pointerEvents:e?"none":void 0,position:"relative"}},control:function(t,e){var n=t.isDisabled,r=t.isFocused,i=t.theme,o=i.colors,a=i.borderRadius;return Ont({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:i.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},e?{}:{backgroundColor:n?o.neutral5:o.neutral0,borderColor:n?o.neutral10:r?o.primary:o.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:r?o.primary:o.neutral30}})},dropdownIndicator:Eot,group:function(t,e){var n=t.theme.spacing;return e?{}:{paddingBottom:2*n.baseUnit,paddingTop:2*n.baseUnit}},groupHeading:function(t,e){var n=t.theme,r=n.colors,i=n.spacing;return Ont({label:"group",cursor:"default",display:"block"},e?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*i.baseUnit,paddingRight:3*i.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(t,e){var n=t.isDisabled,r=t.theme,i=r.spacing.baseUnit,o=r.colors;return Ont({label:"indicatorSeparator",alignSelf:"stretch",width:1},e?{}:{backgroundColor:n?o.neutral10:o.neutral20,marginBottom:2*i,marginTop:2*i})},input:function(t,e){var n=t.isDisabled,r=t.value,i=t.theme,o=i.spacing,a=i.colors;return Ont(Ont({visibility:n?"hidden":"visible",transform:r?"translateZ(0)":""},Rot),e?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:a.neutral80})},loadingIndicator:function(t,e){var n=t.isFocused,r=t.size,i=t.theme,o=i.colors,a=i.spacing.baseUnit;return Ont({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},e?{}:{color:n?o.neutral60:o.neutral20,padding:2*a})},loadingMessage:yot,menu:function(t,e){var n,r=t.placement,i=t.theme,o=i.borderRadius,a=i.spacing,s=i.colors;return Ont((Ant(n={label:"menu"},function(t){return t?{bottom:"top",top:"bottom"}[t]:"bottom"}(r),"100%"),Ant(n,"position","absolute"),Ant(n,"width","100%"),Ant(n,"zIndex",1),n),e?{}:{backgroundColor:s.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},menuList:function(t,e){var n=t.maxHeight,r=t.theme.spacing.baseUnit;return Ont({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},e?{}:{paddingBottom:r,paddingTop:r})},menuPortal:function(t){var e=t.rect,n=t.offset,r=t.position;return{left:e.left,position:r,top:n,width:e.width,zIndex:1}},multiValue:function(t,e){var n=t.theme,r=n.spacing,i=n.borderRadius,o=n.colors;return Ont({label:"multiValue",display:"flex",minWidth:0},e?{}:{backgroundColor:o.neutral10,borderRadius:i/2,margin:r.baseUnit/2})},multiValueLabel:function(t,e){var n=t.theme,r=n.borderRadius,i=n.colors,o=t.cropWithEllipsis;return Ont({overflow:"hidden",textOverflow:o||void 0===o?"ellipsis":void 0,whiteSpace:"nowrap"},e?{}:{borderRadius:r/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(t,e){var n=t.theme,r=n.spacing,i=n.borderRadius,o=n.colors,a=t.isFocused;return Ont({alignItems:"center",display:"flex"},e?{}:{borderRadius:i/2,backgroundColor:a?o.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},noOptionsMessage:got,option:function(t,e){var n=t.isDisabled,r=t.isFocused,i=t.isSelected,o=t.theme,a=o.spacing,s=o.colors;return Ont({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},e?{}:{backgroundColor:i?s.primary:r?s.primary25:"transparent",color:n?s.neutral20:i?s.neutral0:"inherit",padding:"".concat(2*a.baseUnit,"px ").concat(3*a.baseUnit,"px"),":active":{backgroundColor:n?void 0:i?s.primary:s.primary50}})},placeholder:function(t,e){var n=t.theme,r=n.spacing,i=n.colors;return Ont({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},e?{}:{color:i.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},singleValue:function(t,e){var n=t.isDisabled,r=t.theme,i=r.spacing,o=r.colors;return Ont({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e?{}:{color:n?o.neutral40:o.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},valueContainer:function(t,e){var n=t.theme.spacing,r=t.isMulti,i=t.hasValue,o=t.selectProps.controlShouldRenderValue;return Ont({alignItems:"center",display:r&&i&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},e?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(2*n.baseUnit,"px")})}};var Cat={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},kat={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:tot(),captureMenuScroll:!tot(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(t){return function(e,n){if(e.data.__isNew__)return!0;var r=Ont({ignoreCase:!0,ignoreAccents:!0,stringify:oat,trim:!0,matchFrom:"any"},t),i=r.ignoreCase,o=r.ignoreAccents,a=r.stringify,s=r.trim,c=r.matchFrom,l=s?iat(n):n,u=s?iat(a(e)):a(e);return i&&(l=l.toLowerCase(),u=u.toLowerCase()),o&&(l=rat(l),u=nat(u)),"start"===c?u.substr(0,l.length)===l:u.indexOf(l)>-1}}(),formatGroupLabel:function(t){return t.label},getOptionLabel:Aat,getOptionValue:Mat,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(t){return!!t.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(sCt){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var e=t.count;return"".concat(e," result").concat(1!==e?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Pat(t,e,n,r){return{type:"option",data:e,isDisabled:Uat(t,e,n),isSelected:Bat(t,e,n),label:Fat(t,e),value:jat(t,e),index:r}}function Iat(t,e){return t.options.map((function(n,r){if("options"in n){var i=n.options.map((function(n,r){return Pat(t,n,e,r)})).filter((function(e){return Dat(t,e)}));return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var o=Pat(t,n,e,r);return Dat(t,o)?o:void 0})).filter(oot)}function Nat(t){return t.reduce((function(t,e){return"group"===e.type?t.push.apply(t,Lnt(e.options.map((function(t){return t.data})))):t.push(e.data),t}),[])}function Rat(t,e){return t.reduce((function(t,n){return"group"===n.type?t.push.apply(t,Lnt(n.options.map((function(t){return{data:t.data,id:"".concat(e,"-").concat(n.index,"-").concat(t.index)}})))):t.push({data:n.data,id:"".concat(e,"-").concat(n.index)}),t}),[])}function Dat(t,e){var n=t.inputValue,r=void 0===n?"":n,i=e.data,o=e.isSelected,a=e.label,s=e.value;return(!Vat(t)||!o)&&zat(t,{label:a,value:s,data:i},r)}var Lat=function(t,e){var n;return(null===(n=t.find((function(t){return t.data===e})))||void 0===n?void 0:n.id)||null},Fat=function(t,e){return t.getOptionLabel(e)},jat=function(t,e){return t.getOptionValue(e)};function Uat(t,e,n){return"function"===typeof t.isOptionDisabled&&t.isOptionDisabled(e,n)}function Bat(t,e,n){if(n.indexOf(e)>-1)return!0;if("function"===typeof t.isOptionSelected)return t.isOptionSelected(e,n);var r=jat(t,e);return n.some((function(e){return jat(t,e)===r}))}function zat(t,e,n){return!t.filterOption||t.filterOption(e,n)}var Vat=function(t){var e=t.hideSelectedOptions,n=t.isMulti;return void 0===e?n:e},Gat=1,Wat=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&knt(t,e)}(n,t);var e=function(t){var e=Int();return function(){var n,r=Pnt(t);if(e){var i=Pnt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Nnt(this,n)}}(n);function n(t){var r;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(r=e.call(this,t)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},r.blockOptionHover=!1,r.isComposing=!1,r.commonProps=void 0,r.initialTouchX=0,r.initialTouchY=0,r.openAfterFocus=!1,r.scrollToFocusedOptionOnUpdate=!1,r.userIsDragging=void 0,r.isAppleDevice=Tat()||Eat(),r.controlRef=null,r.getControlRef=function(t){r.controlRef=t},r.focusedOptionRef=null,r.getFocusedOptionRef=function(t){r.focusedOptionRef=t},r.menuListRef=null,r.getMenuListRef=function(t){r.menuListRef=t},r.inputRef=null,r.getInputRef=function(t){r.inputRef=t},r.focus=r.focusInput,r.blur=r.blurInput,r.onChange=function(t,e){var n=r.props,i=n.onChange,o=n.name;e.name=o,r.ariaOnChange(t,e),i(t,e)},r.setValue=function(t,e,n){var i=r.props,o=i.closeMenuOnSelect,a=i.isMulti,s=i.inputValue;r.onInputChange("",{action:"set-value",prevInputValue:s}),o&&(r.setState({inputIsHiddenAfterUpdate:!a}),r.onMenuClose()),r.setState({clearFocusValueOnUpdate:!0}),r.onChange(t,{action:e,option:n})},r.selectOption=function(t){var e=r.props,n=e.blurInputOnSelect,i=e.isMulti,o=e.name,a=r.state.selectValue,s=i&&r.isOptionSelected(t,a),c=r.isOptionDisabled(t,a);if(s){var l=r.getOptionValue(t);r.setValue(a.filter((function(t){return r.getOptionValue(t)!==l})),"deselect-option",t)}else{if(c)return void r.ariaOnChange(t,{action:"select-option",option:t,name:o});i?r.setValue([].concat(Lnt(a),[t]),"select-option",t):r.setValue(t,"select-option")}n&&r.blurInput()},r.removeValue=function(t){var e=r.props.isMulti,n=r.state.selectValue,i=r.getOptionValue(t),o=n.filter((function(t){return r.getOptionValue(t)!==i})),a=aot(e,o,o[0]||null);r.onChange(a,{action:"remove-value",removedValue:t}),r.focusInput()},r.clearValue=function(){var t=r.state.selectValue;r.onChange(aot(r.props.isMulti,[],null),{action:"clear",removedValues:t})},r.popValue=function(){var t=r.props.isMulti,e=r.state.selectValue,n=e[e.length-1],i=e.slice(0,e.length-1),o=aot(t,i,i[0]||null);r.onChange(o,{action:"pop-value",removedValue:n})},r.getFocusedOptionId=function(t){return Lat(r.state.focusableOptionsWithIds,t)},r.getFocusableOptionsWithIds=function(){return Rat(Iat(r.props,r.state.selectValue),r.getElementId("option"))},r.getValue=function(){return r.state.selectValue},r.cx=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Hit.apply(void 0,[r.props.classNamePrefix].concat(e))},r.getOptionLabel=function(t){return Fat(r.props,t)},r.getOptionValue=function(t){return jat(r.props,t)},r.getStyles=function(t,e){var n=r.props.unstyled,i=Oat[t](e,n);i.boxSizing="border-box";var o=r.props.styles[t];return o?o(i,e):i},r.getClassNames=function(t,e){var n,i;return null===(n=(i=r.props.classNames)[t])||void 0===n?void 0:n.call(i,e)},r.getElementId=function(t){return"".concat(r.state.instancePrefix,"-").concat(t)},r.getComponents=function(){return t=r.props,Ont(Ont({},Vot),t.components);var t},r.buildCategorizedOptions=function(){return Iat(r.props,r.state.selectValue)},r.getCategorizedOptions=function(){return r.props.menuIsOpen?r.buildCategorizedOptions():[]},r.buildFocusableOptions=function(){return Nat(r.buildCategorizedOptions())},r.getFocusableOptions=function(){return r.props.menuIsOpen?r.buildFocusableOptions():[]},r.ariaOnChange=function(t,e){r.setState({ariaSelection:Ont({value:t},e)})},r.onMenuMouseDown=function(t){0===t.button&&(t.stopPropagation(),t.preventDefault(),r.focusInput())},r.onMenuMouseMove=function(t){r.blockOptionHover=!1},r.onControlMouseDown=function(t){if(!t.defaultPrevented){var e=r.props.openMenuOnClick;r.state.isFocused?r.props.menuIsOpen?"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName&&r.onMenuClose():e&&r.openMenu("first"):(e&&(r.openAfterFocus=!0),r.focusInput()),"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName&&t.preventDefault()}},r.onDropdownIndicatorMouseDown=function(t){if((!t||"mousedown"!==t.type||0===t.button)&&!r.props.isDisabled){var e=r.props,n=e.isMulti,i=e.menuIsOpen;r.focusInput(),i?(r.setState({inputIsHiddenAfterUpdate:!n}),r.onMenuClose()):r.openMenu("first"),t.preventDefault()}},r.onClearIndicatorMouseDown=function(t){t&&"mousedown"===t.type&&0!==t.button||(r.clearValue(),t.preventDefault(),r.openAfterFocus=!1,"touchend"===t.type?r.focusInput():setTimeout((function(){return r.focusInput()})))},r.onScroll=function(t){"boolean"===typeof r.props.closeMenuOnScroll?t.target instanceof HTMLElement&&Kit(t.target)&&r.props.onMenuClose():"function"===typeof r.props.closeMenuOnScroll&&r.props.closeMenuOnScroll(t)&&r.props.onMenuClose()},r.onCompositionStart=function(){r.isComposing=!0},r.onCompositionEnd=function(){r.isComposing=!1},r.onTouchStart=function(t){var e=t.touches,n=e&&e.item(0);n&&(r.initialTouchX=n.clientX,r.initialTouchY=n.clientY,r.userIsDragging=!1)},r.onTouchMove=function(t){var e=t.touches,n=e&&e.item(0);if(n){var i=Math.abs(n.clientX-r.initialTouchX),o=Math.abs(n.clientY-r.initialTouchY);r.userIsDragging=i>5||o>5}},r.onTouchEnd=function(t){r.userIsDragging||(r.controlRef&&!r.controlRef.contains(t.target)&&r.menuListRef&&!r.menuListRef.contains(t.target)&&r.blurInput(),r.initialTouchX=0,r.initialTouchY=0)},r.onControlTouchEnd=function(t){r.userIsDragging||r.onControlMouseDown(t)},r.onClearIndicatorTouchEnd=function(t){r.userIsDragging||r.onClearIndicatorMouseDown(t)},r.onDropdownIndicatorTouchEnd=function(t){r.userIsDragging||r.onDropdownIndicatorMouseDown(t)},r.handleInputChange=function(t){var e=r.props.inputValue,n=t.currentTarget.value;r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange(n,{action:"input-change",prevInputValue:e}),r.props.menuIsOpen||r.onMenuOpen()},r.onInputFocus=function(t){r.props.onFocus&&r.props.onFocus(t),r.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(r.openAfterFocus||r.props.openMenuOnFocus)&&r.openMenu("first"),r.openAfterFocus=!1},r.onInputBlur=function(t){var e=r.props.inputValue;r.menuListRef&&r.menuListRef.contains(document.activeElement)?r.inputRef.focus():(r.props.onBlur&&r.props.onBlur(t),r.onInputChange("",{action:"input-blur",prevInputValue:e}),r.onMenuClose(),r.setState({focusedValue:null,isFocused:!1}))},r.onOptionHover=function(t){if(!r.blockOptionHover&&r.state.focusedOption!==t){var e=r.getFocusableOptions().indexOf(t);r.setState({focusedOption:t,focusedOptionId:e>-1?r.getFocusedOptionId(t):null})}},r.shouldHideSelectedOptions=function(){return Vat(r.props)},r.onValueInputFocus=function(t){t.preventDefault(),t.stopPropagation(),r.focus()},r.onKeyDown=function(t){var e=r.props,n=e.isMulti,i=e.backspaceRemovesValue,o=e.escapeClearsValue,a=e.inputValue,s=e.isClearable,c=e.isDisabled,l=e.menuIsOpen,u=e.onKeyDown,h=e.tabSelectsValue,d=e.openMenuOnFocus,p=r.state,f=p.focusedOption,m=p.focusedValue,g=p.selectValue;if(!c&&("function"!==typeof u||(u(t),!t.defaultPrevented))){switch(r.blockOptionHover=!0,t.key){case"ArrowLeft":if(!n||a)return;r.focusValue("previous");break;case"ArrowRight":if(!n||a)return;r.focusValue("next");break;case"Delete":case"Backspace":if(a)return;if(m)r.removeValue(m);else{if(!i)return;n?r.popValue():s&&r.clearValue()}break;case"Tab":if(r.isComposing)return;if(t.shiftKey||!l||!h||!f||d&&r.isOptionSelected(f,g))return;r.selectOption(f);break;case"Enter":if(229===t.keyCode)break;if(l){if(!f)return;if(r.isComposing)return;r.selectOption(f);break}return;case"Escape":l?(r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange("",{action:"menu-close",prevInputValue:a}),r.onMenuClose()):s&&o&&r.clearValue();break;case" ":if(a)return;if(!l){r.openMenu("first");break}if(!f)return;r.selectOption(f);break;case"ArrowUp":l?r.focusOption("up"):r.openMenu("last");break;case"ArrowDown":l?r.focusOption("down"):r.openMenu("first");break;case"PageUp":if(!l)return;r.focusOption("pageup");break;case"PageDown":if(!l)return;r.focusOption("pagedown");break;case"Home":if(!l)return;r.focusOption("first");break;case"End":if(!l)return;r.focusOption("last");break;default:return}t.preventDefault()}},r.state.instancePrefix="react-select-"+(r.props.instanceId||++Gat),r.state.selectValue=qit(t.value),t.menuIsOpen&&r.state.selectValue.length){var i=r.getFocusableOptionsWithIds(),o=r.buildFocusableOptions(),a=o.indexOf(r.state.selectValue[0]);r.state.focusableOptionsWithIds=i,r.state.focusedOption=o[a],r.state.focusedOptionId=Lat(i,o[a])}return r}return function(t,e,n){e&&Cnt(t.prototype,e),n&&Cnt(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Qit(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.isDisabled,r=e.menuIsOpen,i=this.state.isFocused;(i&&!n&&t.isDisabled||i&&r&&!t.menuIsOpen)&&this.focusInput(),i&&n&&!t.isDisabled?this.setState({isFocused:!1},this.onMenuClose):i||n||!t.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Qit(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(t,e){this.props.onInputChange(t,e)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(t){var e=this,n=this.state,r=n.selectValue,i=n.isFocused,o=this.buildFocusableOptions(),a="first"===t?0:o.length-1;if(!this.props.isMulti){var s=o.indexOf(r[0]);s>-1&&(a=s)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:o[a],focusedOptionId:this.getFocusedOptionId(o[a])},(function(){return e.onMenuOpen()}))}},{key:"focusValue",value:function(t){var e=this.state,n=e.selectValue,r=e.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var i=n.indexOf(r);r||(i=-1);var o=n.length-1,a=-1;if(n.length){switch(t){case"previous":a=0===i?0:-1===i?o:i-1;break;case"next":i>-1&&i<o&&(a=i+1)}this.setState({inputIsHidden:-1!==a,focusedValue:n[a]})}}}},{key:"focusOption",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",e=this.props.pageSize,n=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var i=0,o=r.indexOf(n);n||(o=-1),"up"===t?i=o>0?o-1:r.length-1:"down"===t?i=(o+1)%r.length:"pageup"===t?(i=o-e)<0&&(i=0):"pagedown"===t?(i=o+e)>r.length-1&&(i=r.length-1):"last"===t&&(i=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[i],focusedValue:null,focusedOptionId:this.getFocusedOptionId(r[i])})}}},{key:"getTheme",value:function(){return this.props.theme?"function"===typeof this.props.theme?this.props.theme(Cat):Ont(Ont({},Cat),this.props.theme):Cat}},{key:"getCommonProps",value:function(){var t=this.clearValue,e=this.cx,n=this.getStyles,r=this.getClassNames,i=this.getValue,o=this.selectOption,a=this.setValue,s=this.props,c=s.isMulti,l=s.isRtl,u=s.options;return{clearValue:t,cx:e,getStyles:n,getClassNames:r,getValue:i,hasValue:this.hasValue(),isMulti:c,isRtl:l,options:u,selectOption:o,selectProps:s,setValue:a,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var t=this.props,e=t.isClearable,n=t.isMulti;return void 0===e?n:e}},{key:"isOptionDisabled",value:function(t,e){return Uat(this.props,t,e)}},{key:"isOptionSelected",value:function(t,e){return Bat(this.props,t,e)}},{key:"filterOption",value:function(t,e){return zat(this.props,t,e)}},{key:"formatOptionLabel",value:function(t,e){if("function"===typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(t,{context:e,inputValue:n,selectValue:r})}return this.getOptionLabel(t)}},{key:"formatGroupLabel",value:function(t){return this.props.formatGroupLabel(t)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var t=this.props,e=t.isDisabled,n=t.isSearchable,r=t.inputId,i=t.inputValue,o=t.tabIndex,a=t.form,s=t.menuIsOpen,c=t.required,l=this.getComponents().Input,u=this.state,h=u.inputIsHidden,d=u.ariaSelection,p=this.commonProps,f=r||this.getElementId("input"),m=Ont(Ont(Ont({"aria-autocomplete":"list","aria-expanded":s,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":c,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},s&&{"aria-controls":this.getElementId("listbox")}),!n&&{"aria-readonly":!0}),this.hasValue()?"initial-input-focus"===(null===d||void 0===d?void 0:d.action)&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return n?k.createElement(l,Snt({},p,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:f,innerRef:this.getInputRef,isDisabled:e,isHidden:h,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:o,form:a,type:"text",value:i},m)):k.createElement(sat,Snt({id:f,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Git,onFocus:this.onInputFocus,disabled:e,tabIndex:o,inputMode:"none",form:a,value:""},m))}},{key:"renderPlaceholderOrValue",value:function(){var t=this,e=this.getComponents(),n=e.MultiValue,r=e.MultiValueContainer,i=e.MultiValueLabel,o=e.MultiValueRemove,a=e.SingleValue,s=e.Placeholder,c=this.commonProps,l=this.props,u=l.controlShouldRenderValue,h=l.isDisabled,d=l.isMulti,p=l.inputValue,f=l.placeholder,m=this.state,g=m.selectValue,y=m.focusedValue,v=m.isFocused;if(!this.hasValue()||!u)return p?null:k.createElement(s,Snt({},c,{key:"placeholder",isDisabled:h,isFocused:v,innerProps:{id:this.getElementId("placeholder")}}),f);if(d)return g.map((function(e,a){var s=e===y,l="".concat(t.getOptionLabel(e),"-").concat(t.getOptionValue(e));return k.createElement(n,Snt({},c,{components:{Container:r,Label:i,Remove:o},isFocused:s,isDisabled:h,key:l,index:a,removeProps:{onClick:function(){return t.removeValue(e)},onTouchEnd:function(){return t.removeValue(e)},onMouseDown:function(t){t.preventDefault()}},data:e}),t.formatOptionLabel(e,"value"))}));if(p)return null;var b=g[0];return k.createElement(a,Snt({},c,{data:b,isDisabled:h}),this.formatOptionLabel(b,"value"))}},{key:"renderClearIndicator",value:function(){var t=this.getComponents().ClearIndicator,e=this.commonProps,n=this.props,r=n.isDisabled,i=n.isLoading,o=this.state.isFocused;if(!this.isClearable()||!t||r||!this.hasValue()||i)return null;var a={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return k.createElement(t,Snt({},e,{innerProps:a,isFocused:o}))}},{key:"renderLoadingIndicator",value:function(){var t=this.getComponents().LoadingIndicator,e=this.commonProps,n=this.props,r=n.isDisabled,i=n.isLoading,o=this.state.isFocused;if(!t||!i)return null;return k.createElement(t,Snt({},e,{innerProps:{"aria-hidden":"true"},isDisabled:r,isFocused:o}))}},{key:"renderIndicatorSeparator",value:function(){var t=this.getComponents(),e=t.DropdownIndicator,n=t.IndicatorSeparator;if(!e||!n)return null;var r=this.commonProps,i=this.props.isDisabled,o=this.state.isFocused;return k.createElement(n,Snt({},r,{isDisabled:i,isFocused:o}))}},{key:"renderDropdownIndicator",value:function(){var t=this.getComponents().DropdownIndicator;if(!t)return null;var e=this.commonProps,n=this.props.isDisabled,r=this.state.isFocused,i={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return k.createElement(t,Snt({},e,{innerProps:i,isDisabled:n,isFocused:r}))}},{key:"renderMenu",value:function(){var t=this,e=this.getComponents(),n=e.Group,r=e.GroupHeading,i=e.Menu,o=e.MenuList,a=e.MenuPortal,s=e.LoadingMessage,c=e.NoOptionsMessage,l=e.Option,u=this.commonProps,h=this.state.focusedOption,d=this.props,p=d.captureMenuScroll,f=d.inputValue,m=d.isLoading,g=d.loadingMessage,y=d.minMenuHeight,v=d.maxMenuHeight,b=d.menuIsOpen,x=d.menuPlacement,_=d.menuPosition,w=d.menuPortalTarget,S=d.menuShouldBlockScroll,T=d.menuShouldScrollIntoView,E=d.noOptionsMessage,A=d.onMenuScrollToTop,M=d.onMenuScrollToBottom;if(!b)return null;var O,C=function(e,n){var r=e.type,i=e.data,o=e.isDisabled,a=e.isSelected,s=e.label,c=e.value,d=h===i,p=o?void 0:function(){return t.onOptionHover(i)},f=o?void 0:function(){return t.selectOption(i)},m="".concat(t.getElementId("option"),"-").concat(n),g={id:m,onClick:f,onMouseMove:p,onMouseOver:p,tabIndex:-1,role:"option","aria-selected":t.isAppleDevice?void 0:a};return k.createElement(l,Snt({},u,{innerProps:g,data:i,isDisabled:o,isSelected:a,key:m,label:s,type:r,value:c,isFocused:d,innerRef:d?t.getFocusedOptionRef:void 0}),t.formatOptionLabel(e.data,"menu"))};if(this.hasOptions())O=this.getCategorizedOptions().map((function(e){if("group"===e.type){var i=e.data,o=e.options,a=e.index,s="".concat(t.getElementId("group"),"-").concat(a),c="".concat(s,"-heading");return k.createElement(n,Snt({},u,{key:s,data:i,options:o,Heading:r,headingProps:{id:c,data:e.data},label:t.formatGroupLabel(e.data)}),e.options.map((function(t){return C(t,"".concat(a,"-").concat(t.index))})))}if("option"===e.type)return C(e,"".concat(e.index))}));else if(m){var P=g({inputValue:f});if(null===P)return null;O=k.createElement(s,u,P)}else{var I=E({inputValue:f});if(null===I)return null;O=k.createElement(c,u,I)}var N={minMenuHeight:y,maxMenuHeight:v,menuPlacement:x,menuPosition:_,menuShouldScrollIntoView:T},R=k.createElement(pot,Snt({},u,N),(function(e){var n=e.ref,r=e.placerProps,a=r.placement,s=r.maxHeight;return k.createElement(i,Snt({},u,N,{innerRef:n,innerProps:{onMouseDown:t.onMenuMouseDown,onMouseMove:t.onMenuMouseMove},isLoading:m,placement:a}),k.createElement(xat,{captureEnabled:p,onTopArrive:A,onBottomArrive:M,lockEnabled:S},(function(e){return k.createElement(o,Snt({},u,{innerRef:function(n){t.getMenuListRef(n),e(n)},innerProps:{role:"listbox","aria-multiselectable":u.isMulti,id:t.getElementId("listbox")},isLoading:m,maxHeight:s,focusedOption:h}),O)})))}));return w||"fixed"===_?k.createElement(a,Snt({},u,{appendTo:w,controlElement:this.controlRef,menuPlacement:x,menuPosition:_}),R):R}},{key:"renderFormField",value:function(){var t=this,e=this.props,n=e.delimiter,r=e.isDisabled,i=e.isMulti,o=e.name,a=e.required,s=this.state.selectValue;if(a&&!this.hasValue()&&!r)return k.createElement(wat,{name:o,onFocus:this.onValueInputFocus});if(o&&!r){if(i){if(n){var c=s.map((function(e){return t.getOptionValue(e)})).join(n);return k.createElement("input",{name:o,type:"hidden",value:c})}var l=s.length>0?s.map((function(e,n){return k.createElement("input",{key:"i-".concat(n),name:o,type:"hidden",value:t.getOptionValue(e)})})):k.createElement("input",{name:o,type:"hidden",value:""});return k.createElement("div",null,l)}var u=s[0]?this.getOptionValue(s[0]):"";return k.createElement("input",{name:o,type:"hidden",value:u})}}},{key:"renderLiveRegion",value:function(){var t=this.commonProps,e=this.state,n=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,o=e.isFocused,a=e.selectValue,s=this.getFocusableOptions();return k.createElement(Kot,Snt({},t,{id:this.getElementId("live-region"),ariaSelection:n,focusedOption:r,focusedValue:i,isFocused:o,selectValue:a,focusableOptions:s,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var t=this.getComponents(),e=t.Control,n=t.IndicatorsContainer,r=t.SelectContainer,i=t.ValueContainer,o=this.props,a=o.className,s=o.id,c=o.isDisabled,l=o.menuIsOpen,u=this.state.isFocused,h=this.commonProps=this.getCommonProps();return k.createElement(r,Snt({},h,{className:a,innerProps:{id:s,onKeyDown:this.onKeyDown},isDisabled:c,isFocused:u}),this.renderLiveRegion(),k.createElement(e,Snt({},h,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:c,isFocused:u,menuIsOpen:l}),k.createElement(i,Snt({},h,{isDisabled:c}),this.renderPlaceholderOrValue(),this.renderInput()),k.createElement(n,Snt({},h,{isDisabled:c}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=e.prevProps,r=e.clearFocusValueOnUpdate,i=e.inputIsHiddenAfterUpdate,o=e.ariaSelection,a=e.isFocused,s=e.prevWasFocused,c=e.instancePrefix,l=t.options,u=t.value,h=t.menuIsOpen,d=t.inputValue,p=t.isMulti,f=qit(u),m={};if(n&&(u!==n.value||l!==n.options||h!==n.menuIsOpen||d!==n.inputValue)){var g=h?function(t,e){return Nat(Iat(t,e))}(t,f):[],y=h?Rat(Iat(t,f),"".concat(c,"-option")):[],v=r?function(t,e){var n=t.focusedValue,r=t.selectValue.indexOf(n);if(r>-1){if(e.indexOf(n)>-1)return n;if(r<e.length)return e[r]}return null}(e,f):null,b=function(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}(e,g);m={selectValue:f,focusedOption:b,focusedOptionId:Lat(y,b),focusableOptionsWithIds:y,focusedValue:v,clearFocusValueOnUpdate:!1}}var x=null!=i&&t!==n?{inputIsHidden:i,inputIsHiddenAfterUpdate:void 0}:{},_=o,w=a&&s;return a&&!w&&(_={value:aot(p,f,f[0]||null),options:f,action:"initial-input-focus"},w=!s),"initial-input-focus"===(null===o||void 0===o?void 0:o.action)&&(_=null),Ont(Ont(Ont({},m),x),{},{prevProps:t,ariaSelection:_,prevWasFocused:w})}}]),n}(k.Component);Wat.defaultProps=kat;var Hat=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];var qat=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],Xat=function(){var t=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0,n=String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase(),r=String(e.getOptionValue(t)).toLowerCase(),i=String(e.getOptionLabel(t)).toLowerCase();return r===n||i===n},Yat={formatCreateLabel:function(t){return'Create "'.concat(t,'"')},isValidNewOption:function(t,e,n,r){return!(!t||e.some((function(e){return Xat(t,e,r)}))||n.some((function(e){return Xat(t,e,r)})))},getNewOptionData:function(t,e){return{label:e,value:t,__isNew__:!0}}};var Kat=(0,k.forwardRef)((function(t,e){var n=function(t){var e=t.defaultInputValue,n=void 0===e?"":e,r=t.defaultMenuIsOpen,i=void 0!==r&&r,o=t.defaultValue,a=void 0===o?null:o,s=t.inputValue,c=t.menuIsOpen,l=t.onChange,u=t.onInputChange,h=t.onMenuClose,d=t.onMenuOpen,p=t.value,f=pit(t,Hat),m=dit((0,k.useState)(void 0!==s?s:n),2),g=m[0],y=m[1],v=dit((0,k.useState)(void 0!==c?c:i),2),b=v[0],x=v[1],_=dit((0,k.useState)(void 0!==p?p:a),2),w=_[0],S=_[1],T=(0,k.useCallback)((function(t,e){"function"===typeof l&&l(t,e),S(t)}),[l]),E=(0,k.useCallback)((function(t,e){var n;"function"===typeof u&&(n=u(t,e)),y(void 0!==n?n:t)}),[u]),A=(0,k.useCallback)((function(){"function"===typeof d&&d(),x(!0)}),[d]),M=(0,k.useCallback)((function(){"function"===typeof h&&h(),x(!1)}),[h]),O=void 0!==s?s:g,C=void 0!==c?c:b,P=void 0!==p?p:w;return Ont(Ont({},f),{},{inputValue:O,menuIsOpen:C,onChange:T,onInputChange:E,onMenuClose:M,onMenuOpen:A,value:P})}(t),r=function(t){var e=t.allowCreateWhileLoading,n=void 0!==e&&e,r=t.createOptionPosition,i=void 0===r?"last":r,o=t.formatCreateLabel,a=void 0===o?Yat.formatCreateLabel:o,s=t.isValidNewOption,c=void 0===s?Yat.isValidNewOption:s,l=t.getNewOptionData,u=void 0===l?Yat.getNewOptionData:l,h=t.onCreateOption,d=t.options,p=void 0===d?[]:d,f=t.onChange,m=pit(t,qat),g=m.getOptionValue,y=void 0===g?Mat:g,v=m.getOptionLabel,b=void 0===v?Aat:v,x=m.inputValue,_=m.isLoading,w=m.isMulti,S=m.value,T=m.name,E=(0,k.useMemo)((function(){return c(x,qit(S),p,{getOptionValue:y,getOptionLabel:b})?u(x,a(x)):void 0}),[a,u,b,y,x,c,p,S]),A=(0,k.useMemo)((function(){return!n&&_||!E?p:"first"===i?[E].concat(Lnt(p)):[].concat(Lnt(p),[E])}),[n,i,_,E,p]),M=(0,k.useCallback)((function(t,e){if("select-option"!==e.action)return f(t,e);var n=Array.isArray(t)?t:[t];if(n[n.length-1]!==E)f(t,e);else if(h)h(x);else{var r=u(x,x),i={action:"create-option",name:T,option:r};f(aot(w,[].concat(Lnt(qit(S)),[r]),r),i)}}),[u,x,w,T,E,h,f,S]);return Ont(Ont({},m),{},{options:A,onChange:M})}(n);return k.createElement(Wat,Snt({ref:e},r))})),Zat=Kat;function Jat(t){return Jat="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jat(t)}function $at(t){var e=function(t,e){if("object"!=Jat(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Jat(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jat(e)?e:e+""}function Qat(t,e,n){return(e=$at(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tst(t,e){t&&t(e)}function est(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const nst=class{constructor(){let t=function(){return t._call(...arguments)};return Object.setPrototypeOf(t,new.target.prototype)}_call(){throw Error("Must implement _call method in subclass")}};function rst(t){return Number.isInteger(t)||"bigint"===typeof t}function ist(t){const e=[];let n=t;for(;Array.isArray(n);)e.push(n.length),n=n[0];return e}function ost(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r=t[e];if(void 0!==r)return delete t[e],r;if(void 0===n)throw Error("Key ".concat(e," does not exist in object."));return n}function ast(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.prototype.concat.apply([],e)}function sst(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(((t,e)=>t.flatMap((t=>e.map((e=>[t,e]))))))}function cst(t,e){return Math.abs((t+e)%(2*e)-e)}var lst,ust=__webpack_require__(143),hst=__webpack_require__(2603),dst=__webpack_require__(2009),pst=__webpack_require__(6837),fst=__webpack_require__(2499),mst=__webpack_require__(3052),gst=__webpack_require__.t(mst,2),yst=__webpack_require__(9373),vst=__webpack_require__.t(yst,2);let bst;const xst=["wasm"];if("undefined"!==typeof process&&"node"===(null===(lst=process)||void 0===lst||null===(lst=lst.release)||void 0===lst?void 0:lst.name)){var _st;bst=null!==(_st=mst)&&void 0!==_st?_st:gst,xst.unshift("cpu")}else{var wst;bst=null!==(wst=yst)&&void 0!==wst?wst:vst;"undefined"!==typeof navigator&&/iP(hone|od|ad).+16_4.+AppleWebKit/.test(navigator.userAgent)&&(bst.env.wasm.simd=!1)}const{env:Sst}=bst,Tst="2.17.2",Est="undefined"!==typeof self&&"caches"in self,Ast=!Rst(dst),Mst=!Rst(pst),Ost=Ast&&Mst,Cst=Ost?pst.dirname(pst.dirname(fst.fileURLToPath("file:///Users/mahamadou/Documents/PERSONAL/alkasalissou.tech/node_modules/@xenova/transformers/src/env.js"))):"./",kst=Ost?pst.join(Cst,"/.cache/"):null,Pst="/models/",Ist=Ost?pst.join(Cst,Pst):Pst;null!==Sst&&void 0!==Sst&&Sst.wasm&&(Sst.wasm.wasmPaths=Ost?pst.join(Cst,"/dist/"):"https://cdn.jsdelivr.net/npm/@xenova/transformers@".concat(Tst,"/dist/"));const Nst={backends:{onnx:Sst,tfjs:{}},__dirname:Cst,version:Tst,allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!0,localModelPath:Ist,useFS:Ast,useBrowserCache:Est,useFSCache:Ast,cacheDir:kst,useCustomCache:!1,customCache:null};function Rst(t){return 0===Object.keys(t).length}class Dst{constructor(t){if(Qat(this,"_CONTENT_TYPE_MAP",{txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"}),this.filePath=t,this.headers=new Headers,this.exists=ust.existsSync(t),this.exists){this.status=200,this.statusText="OK";let e=ust.statSync(t);this.headers.set("content-length",e.size.toString()),this.updateContentType();let n=this;this.body=new ReadableStream({start(t){n.arrayBuffer().then((e=>{t.enqueue(new Uint8Array(e)),t.close()}))}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){var t;const e=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",null!==(t=this._CONTENT_TYPE_MAP[e])&&void 0!==t?t:"application/octet-stream")}clone(){let t=new Dst(this.filePath);return t.exists=this.exists,t.status=this.status,t.statusText=this.statusText,t.headers=new Headers(this.headers),t}async arrayBuffer(){return(await ust.promises.readFile(this.filePath)).buffer}async blob(){const t=await ust.promises.readFile(this.filePath);return new Blob([t],{type:this.headers.get("content-type")})}async text(){return await ust.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function Lst(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{e=new URL(t)}catch(ZQ){return!1}return!(n&&!n.includes(e.protocol))&&!(r&&!r.includes(e.hostname))}async function Fst(t){var e;if(Nst.useFS&&!Lst(t,["http:","https:","blob:"]))return new Dst(t);if("undefined"!==typeof process&&"node"===(null===(e=process)||void 0===e||null===(e=e.release)||void 0===e?void 0:e.name)){var n;const e=!(null===(n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===n||!n.TESTING_REMOTELY),a=Nst.version,s=new Headers;s.set("User-Agent","transformers.js/".concat(a,"; is_ci/").concat(e,";"));if(Lst(t,["http:","https:"],["huggingface.co","hf.co"])){var r,i,o;const t=null!==(r=null===(i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===i?void 0:i.HF_TOKEN)&&void 0!==r?r:null===(o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===o?void 0:o.HF_ACCESS_TOKEN;t&&s.set("Authorization","Bearer ".concat(t))}return fetch(t,{headers:s})}return fetch(t)}const jst={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};class Ust{constructor(t){this.path=t}async match(t){let e=hst.join(this.path,t),n=new Dst(e);return n.exists?n:void 0}async put(t,e){const n=Buffer.from(await e.arrayBuffer());let r=hst.join(this.path,t);try{await ust.promises.mkdir(hst.dirname(r),{recursive:!0}),await ust.promises.writeFile(r,n)}catch(cCt){console.warn("An error occurred while writing the file to cache:",cCt)}}}async function Bst(t,e){var n;let r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!Nst.allowLocalModels){if(o.local_files_only)throw Error("Invalid configuration detected: local models are disabled (`env.allowLocalModels=false`) but you have requested to only use local models (`local_files_only=true`).");if(!Nst.allowRemoteModels)throw Error("Invalid configuration detected: both local and remote models are disabled. Fix by setting `env.allowLocalModels` or `env.allowRemoteModels` to `true`.")}if(tst(o.progress_callback,{status:"initiate",name:t,file:e}),!r&&Nst.useBrowserCache){if("undefined"===typeof caches)throw Error("Browser cache is not available in this environment.");try{r=await caches.open("transformers-cache")}catch(sCt){console.warn("An error occurred while opening the browser cache:",sCt)}}var a;!r&&Nst.useFSCache&&(r=new Ust(null!==(a=o.cache_dir)&&void 0!==a?a:Nst.cacheDir));if(!r&&Nst.useCustomCache){if(!Nst.customCache)throw Error("`env.useCustomCache=true`, but `env.customCache` is not defined.");if(!Nst.customCache.match||!Nst.customCache.put)throw new Error("`env.customCache` must be an object which implements the `match` and `put` functions of the Web Cache API. For more information, see https://developer.mozilla.org/en-US/docs/Web/API/Cache");r=Nst.customCache}const s=null!==(n=o.revision)&&void 0!==n?n:"main";let c,l,u=Vst(t,e),h=Vst(Nst.localModelPath,u),d=Vst(Nst.remoteHost,Nst.remotePathTemplate.replaceAll("{model}",t).replaceAll("{revision}",encodeURIComponent(s)),e),p="main"===s?u:Vst(t,s,e),f=r instanceof Ust?p:d,m=!1;r&&(l=await async function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(let i of n)try{let e=await t.match(i);if(e)return e}catch(sCt){continue}}(r,h,f));const g=void 0!==l;if(void 0===l){if(Nst.allowLocalModels){if(Lst(u,["http:","https:"])){if(o.local_files_only)throw new Error("`local_files_only=true`, but attempted to load a remote file from: ".concat(u,"."));if(!Nst.allowRemoteModels)throw new Error("`env.allowRemoteModels=false`, but attempted to load a remote file from: ".concat(u,"."))}else try{l=await Fst(h),c=h}catch(sCt){console.warn('Unable to load from local path "'.concat(h,'": "').concat(sCt,'"'))}}if(void 0===l||404===l.status){if(o.local_files_only||!Nst.allowRemoteModels){if(i)throw Error('`local_files_only=true` or `env.allowRemoteModels=false` and file was not found locally at "'.concat(h,'".'));return null}if(l=await Fst(d),200!==l.status)return function(t,e,n){var r;if(!n)return null;const i=null!==(r=jst[t])&&void 0!==r?r:"Error (".concat(t,") occurred while trying to load file");throw Error("".concat(i,': "').concat(e,'".'))}(l.status,d,i);c=f}m=r&&"undefined"!==typeof Response&&l instanceof Response&&200===l.status}tst(o.progress_callback,{status:"download",name:t,file:e});const y={status:"progress",name:t,file:e};let v;return o.progress_callback?g&&"undefined"!==typeof navigator&&/firefox/i.test(navigator.userAgent)?(v=new Uint8Array(await l.arrayBuffer()),tst(o.progress_callback,{...y,progress:100,loaded:v.length,total:v.length})):v=await async function(t,e){const n=t.headers.get("Content-Length");null===n&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let r=parseInt(null!==n&&void 0!==n?n:"0"),i=new Uint8Array(r),o=0;const a=t.body.getReader();async function s(){const{done:t,value:n}=await a.read();if(t)return;let c=o+n.length;if(c>r){r=c;let t=new Uint8Array(r);t.set(i),i=t}i.set(n,o),o=c;return e({progress:o/r*100,loaded:o,total:r}),s()}return await s(),i}(l,(t=>{tst(o.progress_callback,{...y,...t})})):v=new Uint8Array(await l.arrayBuffer()),m&&c&&void 0===await r.match(c)&&await r.put(c,new Response(v,{headers:l.headers})).catch((t=>{console.warn("Unable to add response to browser cache: ".concat(t,"."))})),tst(o.progress_callback,{status:"done",name:t,file:e}),v}async function zst(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=await Bst(t,e,n,r);if(null===i)return{};let o=new TextDecoder("utf-8").decode(i);return JSON.parse(o)}function Vst(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e=e.map(((t,n)=>(n&&(t=t.replace(new RegExp("^/"),"")),n!==e.length-1&&(t=t.replace(new RegExp("/$"),"")),t))),e.join("/")}function Gst(t){const e=qst(t)[0],n=t.map((t=>Math.exp(t-e))),r=n.reduce(((t,e)=>t+e),0);return n.map((t=>t/r))}function Wst(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=Array.from(t).map(((t,e)=>[e,t])).sort(((t,e)=>e[1]-t[1])),null!==e&&e>0&&(t=t.slice(0,e)),t}function Hst(t){if(0===t.length)throw Error("Array must not be empty");let e=t[0],n=0;for(let r=1;r<t.length;++r)t[r]<e&&(e=t[r],n=r);return[e,n]}function qst(t){if(0===t.length)throw Error("Array must not be empty");let e=t[0],n=0;for(let r=1;r<t.length;++r)t[r]>e&&(e=t[r],n=r);return[Number(e),n]}function Xst(t){return t>0&&0===(t&t-1)}class Yst{constructor(t){if(this.size=0|t,this.size<=1||!Xst(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=t<<1,this.table=new Float64Array(2*this.size);for(let n=0;n<this.table.length;n+=2){const t=Math.PI*n/this.size;this.table[n]=Math.cos(t),this.table[n+1]=-Math.sin(t)}let e=0;for(let n=1;this.size>n;n<<=1)++e;this._width=e%2===0?e-1:e,this._bitrev=new Int32Array(1<<this._width);for(let n=0;n<this._bitrev.length;++n){this._bitrev[n]=0;for(let t=0;t<this._width;t+=2){const e=this._width-t-2;this._bitrev[n]|=(n>>>t&3)<<e}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(t,e){const n=e||new Array(t.length>>>1);for(let r=0;r<t.length;r+=2)n[r>>>1]=t[r];return n}toComplexArray(t,e){const n=e||this.createComplexArray();for(let r=0;r<n.length;r+=2)n[r]=t[r>>>1],n[r+1]=0;return n}transform(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._transform4(t,e,1)}realTransform(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._realTransform4(t,e,1)}inverseTransform(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._transform4(t,e,-1);for(let n=0;n<t.length;++n)t[n]/=this.size}_transform4(t,e,n){const r=this._csize;let i,o,a=1<<this._width,s=r/a<<1;const c=this._bitrev;if(4===s)for(i=0,o=0;i<r;i+=s,++o){const n=c[o];this._singleTransform2(e,t,i,n,a)}else for(i=0,o=0;i<r;i+=s,++o){const r=c[o];this._singleTransform4(e,t,i,r,a,n)}const l=this.table;for(a>>=2;a>=2;a>>=2){s=r/a<<1;const e=s>>>2;for(i=0;i<r;i+=s){const r=i+e-1;for(let o=i,s=0;o<r;o+=2,s+=a){const r=o,i=r+e,a=i+e,c=a+e,u=t[r],h=t[r+1],d=t[i],p=t[i+1],f=t[a],m=t[a+1],g=t[c],y=t[c+1],v=l[s],b=n*l[s+1],x=d*v-p*b,_=d*b+p*v,w=l[2*s],S=n*l[2*s+1],T=f*w-m*S,E=f*S+m*w,A=l[3*s],M=n*l[3*s+1],O=g*A-y*M,C=g*M+y*A,k=u+T,P=h+E,I=u-T,N=h-E,R=x+O,D=_+C,L=n*(x-O),F=n*(_-C);t[r]=k+R,t[r+1]=P+D,t[i]=I+F,t[i+1]=N-L,t[a]=k-R,t[a+1]=P-D,t[c]=I-F,t[c+1]=N+L}}}}_singleTransform2(t,e,n,r,i){const o=t[r],a=t[r+1],s=t[r+i],c=t[r+i+1];e[n]=o+s,e[n+1]=a+c,e[n+2]=o-s,e[n+3]=a-c}_singleTransform4(t,e,n,r,i,o){const a=2*i,s=3*i,c=t[r],l=t[r+1],u=t[r+i],h=t[r+i+1],d=t[r+a],p=t[r+a+1],f=t[r+s],m=t[r+s+1],g=c+d,y=l+p,v=c-d,b=l-p,x=u+f,_=h+m,w=o*(u-f),S=o*(h-m);e[n]=g+x,e[n+1]=y+_,e[n+2]=v+S,e[n+3]=b-w,e[n+4]=g-x,e[n+5]=y-_,e[n+6]=v-S,e[n+7]=b+w}_realTransform4(t,e,n){const r=this._csize;let i,o,a=1<<this._width,s=r/a<<1;const c=this._bitrev;if(4===s)for(i=0,o=0;i<r;i+=s,++o){const n=c[o];this._singleRealTransform2(e,t,i,n>>>1,a>>>1)}else for(i=0,o=0;i<r;i+=s,++o){const r=c[o];this._singleRealTransform4(e,t,i,r>>>1,a>>>1,n)}const l=this.table;for(a>>=2;a>=2;a>>=2){s=r/a<<1;const e=s>>>1,o=e>>>1,c=o>>>1;for(i=0;i<r;i+=s)for(let r=0,s=0;r<=c;r+=2,s+=a){const a=i+r,u=a+o,h=u+o,d=h+o,p=t[a],f=t[a+1],m=t[u],g=t[u+1],y=t[h],v=t[h+1],b=t[d],x=t[d+1],_=p,w=f,S=l[s],T=n*l[s+1],E=m*S-g*T,A=m*T+g*S,M=l[2*s],O=n*l[2*s+1],C=y*M-v*O,k=y*O+v*M,P=l[3*s],I=n*l[3*s+1],N=b*P-x*I,R=b*I+x*P,D=_+C,L=w+k,F=_-C,j=w-k,U=E+N,B=A+R,z=n*(E-N),V=n*(A-R);if(t[a]=D+U,t[a+1]=L+B,t[u]=F+V,t[u+1]=j-z,0===r){t[h]=D-U,t[h+1]=L-B;continue}if(r===c)continue;const G=i+o-r,W=i+e-r;t[G]=F-n*V,t[G+1]=-j-n*z,t[W]=D-n*U,t[W+1]=n*B-L}}const u=r>>>1;for(let h=2;h<u;h+=2)t[r-h]=t[h],t[r-h+1]=-t[h+1]}_singleRealTransform2(t,e,n,r,i){const o=t[r],a=t[r+i];e[n]=o+a,e[n+1]=0,e[n+2]=o-a,e[n+3]=0}_singleRealTransform4(t,e,n,r,i,o){const a=2*i,s=3*i,c=t[r],l=t[r+i],u=t[r+a],h=t[r+s],d=c+u,p=c-u,f=l+h,m=o*(l-h);e[n]=d+f,e[n+1]=0,e[n+2]=p,e[n+3]=-m,e[n+4]=d-f,e[n+5]=0,e[n+6]=p,e[n+7]=m}}class Kst{constructor(t){const e=2*(t-1),n=2*(2*t-1),r=2**Math.ceil(Math.log2(n));this.bufferSize=r,this._a=e;const i=new Float64Array(n),o=new Float64Array(r);this._chirpBuffer=new Float64Array(r),this._buffer1=new Float64Array(r),this._buffer2=new Float64Array(r),this._outBuffer1=new Float64Array(r),this._outBuffer2=new Float64Array(r);const a=-2*Math.PI/t,s=Math.cos(a),c=Math.sin(a);for(let l=0;l<n>>1;++l){const e=(l+1-t)**2/2,n=Math.sqrt(s**2+c**2)**e,r=e*Math.atan2(c,s),a=2*l;i[a]=n*Math.cos(r),i[a+1]=n*Math.sin(r),o[a]=i[a],o[a+1]=-i[a+1]}this._slicedChirpBuffer=i.subarray(e,n),this._f=new Yst(r>>1),this._f.transform(this._chirpBuffer,o)}_transform(t,e,n){const r=this._buffer1,i=this._buffer2,o=this._outBuffer1,a=this._outBuffer2,s=this._chirpBuffer,c=this._slicedChirpBuffer,l=this._a;if(n)for(let u=0;u<c.length;u+=2){const t=u+1,n=e[u>>1];r[u]=n*c[u],r[t]=n*c[t]}else for(let u=0;u<c.length;u+=2){const t=u+1;r[u]=e[u]*c[u]-e[t]*c[t],r[t]=e[u]*c[t]+e[t]*c[u]}this._f.transform(o,r);for(let u=0;u<s.length;u+=2){const t=u+1;i[u]=o[u]*s[u]-o[t]*s[t],i[t]=o[u]*s[t]+o[t]*s[u]}this._f.inverseTransform(a,i);for(let u=0;u<a.length;u+=2){const e=a[u+l],n=a[u+l+1],r=c[u],i=c[u+1];t[u]=e*r-n*i,t[u+1]=e*i+n*r}}transform(t,e){this._transform(t,e,!1)}realTransform(t,e){this._transform(t,e,!0)}}class Zst{constructor(t){this.fft_length=t,this.isPowerOfTwo=Xst(t),this.isPowerOfTwo?(this.fft=new Yst(t),this.outputBufferSize=2*t):(this.fft=new Kst(t),this.outputBufferSize=this.fft.bufferSize)}realTransform(t,e){this.fft.realTransform(t,e)}transform(t,e){this.fft.transform(t,e)}}function Jst(t,e){if(e%2===0||e<=0)throw new Error("Window size must be a positive odd number");const n=new t.constructor(t.length),r=new t.constructor(e),i=Math.floor(e/2);for(let o=0;o<t.length;++o){let e=0;for(let n=-i;n<=i;++n){let i=o+n;i<0?i=Math.abs(i):i>=t.length&&(i=2*(t.length-1)-i),r[e++]=t[i]}r.sort(),n[o]=r[i]}return n}function $st(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}const Qst=Object.freeze({float32:Float32Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array}),tct=bst.Tensor;class ect{constructor(){return Qat(this,"dims",void 0),Qat(this,"type",void 0),Qat(this,"data",void 0),Qat(this,"size",void 0),(arguments.length<=0?void 0:arguments[0])instanceof tct?Object.assign(this,arguments.length<=0?void 0:arguments[0]):Object.assign(this,new tct(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])),new Proxy(this,{get:(t,e)=>{if("string"===typeof e){let n=Number(e);if(Number.isInteger(n))return t._getitem(n)}return t[e]},set:(t,e,n)=>t[e]=n})}*[Symbol.iterator](){const[t,...e]=this.dims;if(e.length>0){const n=e.reduce(((t,e)=>t*e));for(let r=0;r<t;++r)yield this._subarray(r,n,e)}else yield*this.data}_getitem(t){const[e,...n]=this.dims;if(t=oct(t,e),n.length>0){const e=n.reduce(((t,e)=>t*e));return this._subarray(t,e,n)}return new ect(this.type,[this.data[t]],n)}indexOf(t){for(let e=0;e<this.data.length;++e)if(this.data[e]==t)return e;return-1}_subarray(t,e,n){const r=t*e,i=(t+1)*e,o="subarray"in this.data?this.data.subarray(r,i):this.data.slice(r,i);return new ect(this.type,o,n)}item(){if(1!==this.data.length)throw new Error("a Tensor with ".concat(this.data.length," elements cannot be converted to Scalar"));return this.data[0]}tolist(){return function(t,e){const n=t.length,r=e.reduce(((t,e)=>t*e));if(n!==r)throw Error("cannot reshape array of size ".concat(n," into shape (").concat(e,")"));let i=t;for(let o=e.length-1;o>=0;o--)i=i.reduce(((t,n)=>{let r=t[t.length-1];return r.length<e[o]?r.push(n):t.push([n]),t}),[[]]);return i[0]}(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){for(let t=0;t<this.data.length;++t)this.data[t]=1/(1+Math.exp(-this.data[t]));return this}mul(t){return this.clone().mul_(t)}mul_(t){for(let e=0;e<this.data.length;++e)this.data[e]*=t;return this}add(t){return this.clone().add_(t)}add_(t){for(let e=0;e<this.data.length;++e)this.data[e]+=t;return this}clone(){return new ect(this.type,this.data.slice(),this.dims.slice())}slice(){let t=[],e=[];for(let a=0;a<this.dims.length;++a){let n=a<0||arguments.length<=a?void 0:arguments[a];if(null===n||void 0===n)e.push([0,this.dims[a]]),t.push(this.dims[a]);else if("number"===typeof n)n=oct(n,this.dims[a],a),e.push([n,n+1]);else{if(!Array.isArray(n)||2!==n.length)throw new Error("Invalid slice: ".concat(n));{if(n[0]>n[1])throw new Error("Invalid slice: ".concat(n));let r=[Math.max(n[0],0),Math.min(n[1],this.dims[a])];e.push(r),t.push(r[1]-r[0])}}}let n=e.map((t=>{let[e,n]=t;return n-e})),r=n.reduce(((t,e)=>t*e)),i=new this.data.constructor(r);const o=this.stride();for(let a=0;a<r;++a){let t=0;for(let r=n.length-1,i=a;r>=0;--r){const a=n[r];t+=(i%a+e[r][0])*o[r],i=Math.floor(i/a)}i[a]=this.data[t]}return new ect(this.type,i,t)}permute(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t,e){const[n,r]=function(t,e,n){const r=new Array(n.length),i=new Array(n.length);for(let s=n.length-1,c=1;s>=0;--s)i[s]=c,r[s]=e[n[s]],c*=r[s];const o=n.map(((t,e)=>i[n.indexOf(e)])),a=new t.constructor(t.length);for(let s=0;s<t.length;++s){let n=0;for(let t=e.length-1,r=s;t>=0;--t)n+=r%e[t]*o[t],r=Math.floor(r/e[t]);a[n]=t[s]}return[a,r]}(t.data,t.dims,e);return new ect(t.type,n,r)}(this,e)}transpose(){return this.permute(...arguments)}sum(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.norm(1,t,e)}norm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fro",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("fro"===t)t=2;else if("string"===typeof t)throw Error("Unsupported norm: ".concat(t));if(null===e){let e=this.data.reduce(((e,n)=>e+n**t),0)**(1/t);return new ect(this.type,[e],[])}e=oct(e,this.dims.length);const r=this.dims.slice();r[e]=1;const i=new this.data.constructor(this.data.length/this.dims[e]);for(let o=0;o<this.data.length;++o){let n=0;for(let t=this.dims.length-1,i=o,a=1;t>=0;--t){const o=this.dims[t];if(t!==e){n+=i%o*a,a*=r[t]}i=Math.floor(i/o)}i[n]+=this.data[o]**t}if(1!==t)for(let o=0;o<i.length;++o)i[o]=i[o]**(1/t);return n||r.splice(e,1),new ect(this.type,i,r)}normalize_(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e=oct(e,this.dims.length);const n=this.norm(t,e,!0);for(let r=0;r<this.data.length;++r){let t=0;for(let n=this.dims.length-1,i=r,o=1;n>=0;--n){const r=this.dims[n];if(n!==e){t+=i%r*o,o*=this.dims[n]}i=Math.floor(i/r)}this.data[r]/=n.data[t]}return this}normalize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.clone().normalize_(t,e)}stride(){return function(t){const e=new Array(t.length);for(let n=t.length-1,r=1;n>=0;--n)e[n]=r,r*=t[n];return e}(this.dims)}squeeze(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new ect(this.type,this.data,rct(this.dims,t))}squeeze_(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.dims=rct(this.dims,t),this}unsqueeze(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new ect(this.type,this.data,ict(this.dims,t))}unsqueeze_(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.dims=ict(this.dims,t),this}flatten_(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;e=(e+this.dims.length)%this.dims.length;let n=this.dims.slice(0,t),r=this.dims.slice(t,e+1),i=this.dims.slice(e+1);return this.dims=[...n,r.reduce(((t,e)=>t*e),1),...i],this}flatten(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return this.clone().flatten_(t,e)}view(){let t=-1;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(let i=0;i<n.length;++i)if(-1===n[i]){if(-1!==t)throw new Error("Only one dimension can be inferred");t=i}if(-1!==t){const e=n.reduce(((e,n,r)=>r!==t?e*n:e),1);n[t]=this.data.length/e}return new ect(this.type,this.data,n)}neg_(){for(let t=0;t<this.data.length;++t)this.data[t]=-this.data[t];return this}neg(){return this.clone().neg_()}clamp_(t,e){for(let n=0;n<this.data.length;++n)this.data[n]=Math.min(Math.max(this.data[n],t),e);return this}clamp(t,e){return this.clone().clamp_(t,e)}round_(){for(let t=0;t<this.data.length;++t)this.data[t]=Math.round(this.data[t]);return this}round(){return this.clone().round_()}to(t){if(this.type===t)return this;if(!Qst.hasOwnProperty(t))throw new Error("Unsupported type: ".concat(t));return new ect(t,Qst[t].from(this.data),this.dims)}}function nct(t,e){var n;let[r,i]=e;const o=null!==(n=t.dims.at(-3))&&void 0!==n?n:1,a=t.dims.at(-2),s=t.dims.at(-1);let c=function(t,e,n){let[r,i,o]=e,[a,s]=n;const c=s/o,l=a/i,u=new t.constructor(a*s*r),h=i*o,d=a*s;for(let p=0;p<a;++p)for(let e=0;e<s;++e){const n=p*s+e,a=(e+.5)/c-.5,f=(p+.5)/l-.5;let m=Math.floor(a),g=Math.floor(f);const y=Math.min(m+1,o-1),v=Math.min(g+1,i-1);m=Math.max(m,0),g=Math.max(g,0);const b=a-m,x=f-g,_=(1-b)*(1-x),w=b*(1-x),S=(1-b)*x,T=b*x,E=g*o,A=v*o,M=E+m,O=E+y,C=A+m,k=A+y;for(let e=0;e<r;++e){const r=e*h;u[e*d+n]=_*t[r+M]+w*t[r+O]+S*t[r+C]+T*t[r+k]}}return u}(t.data,[o,a,s],[r,i]);return new ect(t.type,c,[o,r,i])}function rct(t,e){return t=t.slice(),null===e?t=t.filter((t=>1!==t)):"number"===typeof e?1===t[e]&&t.splice(e,1):Array.isArray(e)&&(t=t.filter(((t,n)=>1!==t||!e.includes(n)))),t}function ict(t,e){return e=oct(e,t.length+1),(t=t.slice()).splice(e,0,1),t}function oct(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t<-e||t>=e)throw new Error("IndexError: index ".concat(t," is out of bounds for dimension").concat(null===n?"":" "+n," with size ").concat(e));return t<0&&(t=(t%e+e)%e),t}function act(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e=oct(e,t[0].dims.length);const n=t[0].dims.slice();n[e]=t.reduce(((t,n)=>t+n.dims[e]),0);const r=n.reduce(((t,e)=>t*e),1),i=new t[0].data.constructor(r),o=t[0].type;if(0===e){let e=0;for(let n of t)i.set(n.data,e),e+=n.data.length}else{let r=0;for(let o=0;o<t.length;++o){let a=t[o];for(let t=0;t<a.data.length;++t){let o=0;for(let i=a.dims.length-1,s=t,c=1;i>=0;--i){const t=a.dims[i];let l=s%t;i===e&&(l+=r),o+=l*c,c*=n[i],s=Math.floor(s/t)}i[o]=a.data[t]}r+=a.dims[e]}}return new ect(o,i,n)}function sct(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return act(t.map((t=>t.unsqueeze(e))),e)}function cct(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null===e){const e=t.data.reduce(((t,e)=>t+e),0),r=e/t.data.length,i=Math.sqrt(t.data.reduce(((t,e)=>t+(e-r)**2),0)/(t.data.length-n)),o=new ect(t.type,[r],[]);return[new ect(t.type,[i],[]),o]}e=oct(e,t.dims.length);const i=lct(t,e,r),o=t.dims.slice();o[e]=1;const a=new t.data.constructor(t.data.length/t.dims[e]);for(let s=0;s<t.data.length;++s){let n=0;for(let r=t.dims.length-1,i=s,a=1;r>=0;--r){const s=t.dims[r];if(r!==e){n+=i%s*a,a*=o[r]}i=Math.floor(i/s)}a[n]+=(t.data[s]-i.data[n])**2}for(let s=0;s<a.length;++s)a[s]=Math.sqrt(a[s]/(t.dims[e]-n));r||o.splice(e,1);return[new ect(t.type,a,o),i]}function lct(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e){let e=t.data.reduce(((t,e)=>t+e),0);return new ect(t.type,[e/t.data.length],[])}e=oct(e,t.dims.length);const r=t.dims.slice();r[e]=1;const i=new t.data.constructor(t.data.length/t.dims[e]);for(let o=0;o<t.data.length;++o){let n=0;for(let i=t.dims.length-1,a=o,s=1;i>=0;--i){const o=t.dims[i];if(i!==e){n+=a%o*s,s*=r[i]}a=Math.floor(a/o)}i[n]+=t.data[o]}if(1!==t.dims[e])for(let o=0;o<i.length;++o)i[o]=i[o]/t.dims[e];return n||r.splice(e,1),new ect(t.type,i,r)}function uct(t){const[e,n]=t.dims,r=[e+1,n+1],i=new ect("float32",new Float32Array(r[0]*r[1]).fill(1/0),r),o=new ect("float32",new Float32Array(r[0]*r[1]).fill(-1),r);i[0].data[0]=0;for(let u=1;u<n+1;++u)for(let n=1;n<e+1;++n){const e=i[n-1][u-1].item(),r=i[n-1][u].item(),a=i[n][u-1].item();let s,c;e<r&&e<a?(s=e,c=0):r<e&&r<a?(s=r,c=1):(s=a,c=2),i[n].data[u]=t[n-1][u-1].item()+s,o[n].data[u]=c}let a=e,s=n;o.data.fill(2,0,r[1]);for(let u=0;u<r[0];++u)o[u].data[0]=1;let c=[],l=[];for(;a>0||s>0;){c.push(a-1),l.push(s-1);switch(o[a][s].item()){case 0:--a,--s;break;case 1:--a;break;case 2:--s;break;default:throw new Error("Internal error in dynamic time warping. Unexpected trace[".concat(a,", ").concat(s,"]. Please file a bug report."))}}return c.reverse(),l.reverse(),[c,l]}function hct(t){return function(t){const e=t.reduce(((t,e)=>t*e),1);return new ect("int64",new BigInt64Array(e).fill(1n),t)}(t.dims)}class dct{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(t,e)=>t>e;this._heap=[],this._comparator=t}get size(){return this._heap.length}isEmpty(){return 0===this.size}peek(){return this._heap[0]}push(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.extend(e)}extend(t){for(const e of t)this._heap.push(e),this._siftUp();return this.size}pop(){const t=this.peek(),e=this.size-1;return e>0&&this._swap(0,e),this._heap.pop(),this._siftDown(),t}replace(t){const e=this.peek();return this._heap[0]=t,this._siftDown(),e}_parent(t){return(t+1>>>1)-1}_left(t){return 1+(t<<1)}_right(t){return t+1<<1}_greater(t,e){return this._comparator(this._heap[t],this._heap[e])}_swap(t,e){const n=this._heap[t];this._heap[t]=this._heap[e],this._heap[e]=n}_siftUp(){let t=this.size-1;for(;t>0&&this._greater(t,this._parent(t));)this._swap(t,this._parent(t)),t=this._parent(t)}_siftDown(){let t=0;for(;this._left(t)<this.size&&this._greater(this._left(t),t)||this._right(t)<this.size&&this._greater(this._right(t),t);){const e=this._right(t)<this.size&&this._greater(this._right(t),this._left(t))?this._right(t):this._left(t);this._swap(t,e),t=e}}}class pct{constructor(){this.root=fct.default()}extend(t){for(let e of t)this.push(e)}push(t){let e=this.root;for(let n of t){let t=e.children.get(n);void 0===t&&(t=fct.default(),e.children.set(n,t)),e=t}e.isLeaf=!0}*commonPrefixSearch(t){let e=this.root,n="";for(let r=0;r<t.length&&void 0!==e;++r){const i=t[r];n+=i,e=e.children.get(i),void 0!==e&&e.isLeaf&&(yield n)}}}class fct{constructor(t,e){this.isLeaf=t,this.children=e}static default(){return new fct(!1,new Map)}}class mct{constructor(t,e,n){this.sentence=t,this.len=t.length,this.bosTokenId=e,this.eosTokenId=n,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},(()=>[])),this.endNodes=Array.from({length:this.len+1},(()=>[]));const r=new gct(this.bosTokenId,0,0,0,0),i=new gct(this.eosTokenId,1,this.len,0,0);this.nodes.push(r.clone()),this.nodes.push(i.clone()),this.beginNodes[this.len].push(i),this.endNodes[0].push(r)}insert(t,e,n,r){const i=this.nodes.length,o=new gct(r,i,t,e,n);this.beginNodes[t].push(o),this.endNodes[t+e].push(o),this.nodes.push(o)}viterbi(){const t=this.len;let e=0;for(;e<=t;){if(0==this.beginNodes[e].length)return[];for(let t of this.beginNodes[e]){t.prev=null;let n=0,r=null;for(let i of this.endNodes[e]){const e=i.backtraceScore+t.score;(null===r||e>n)&&(r=i.clone(),n=e)}if(null===r)return[];t.prev=r,t.backtraceScore=n}++e}const n=[],r=this.beginNodes[t][0].prev;if(null===r)return[];let i=r.clone();for(;null!==i.prev;){n.push(i.clone());const t=i.clone();i=t.prev.clone()}return n.reverse(),n}piece(t){return this.sentence.slice(t.pos,t.pos+t.length)}tokens(){return this.viterbi().map((t=>this.piece(t)))}tokenIds(){return this.viterbi().map((t=>t.tokenId))}}class gct{constructor(t,e,n,r,i){this.tokenId=t,this.nodeId=e,this.pos=n,this.length=r,this.score=i,this.prev=null,this.backtraceScore=0}clone(){const t=new gct(this.tokenId,this.nodeId,this.pos,this.length,this.score);return t.prev=this.prev,t.backtraceScore=this.backtraceScore,t}}var yct=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",BooleanLiteral:"BooleanLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Set:"Set",If:"If",For:"For",In:"In",Is:"Is",NotIn:"NotIn",Else:"Else",EndIf:"EndIf",ElseIf:"ElseIf",EndFor:"EndFor",And:"And",Or:"Or",Not:"UnaryOperator"}),vct=Object.freeze({set:yct.Set,for:yct.For,in:yct.In,is:yct.Is,if:yct.If,else:yct.Else,endif:yct.EndIf,elif:yct.ElseIf,endfor:yct.EndFor,and:yct.And,or:yct.Or,not:yct.Not,"not in":yct.NotIn,true:yct.BooleanLiteral,false:yct.BooleanLiteral}),bct=class{constructor(t,e){this.value=t,this.type=e}};function xct(t){return/\w/.test(t)}function _ct(t){return/[0-9]/.test(t)}var wct=[["{%",yct.OpenStatement],["%}",yct.CloseStatement],["{{",yct.OpenExpression],["}}",yct.CloseExpression],["(",yct.OpenParen],[")",yct.CloseParen],["{",yct.OpenCurlyBracket],["}",yct.CloseCurlyBracket],["[",yct.OpenSquareBracket],["]",yct.CloseSquareBracket],[",",yct.Comma],[".",yct.Dot],[":",yct.Colon],["|",yct.Pipe],["<=",yct.ComparisonBinaryOperator],[">=",yct.ComparisonBinaryOperator],["==",yct.ComparisonBinaryOperator],["!=",yct.ComparisonBinaryOperator],["<",yct.ComparisonBinaryOperator],[">",yct.ComparisonBinaryOperator],["+",yct.AdditiveBinaryOperator],["-",yct.AdditiveBinaryOperator],["*",yct.MultiplicativeBinaryOperator],["/",yct.MultiplicativeBinaryOperator],["%",yct.MultiplicativeBinaryOperator],["=",yct.Equals]],Sct=new Map([["n","\n"],["t","\t"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);var Tct=class{constructor(){Qat(this,"type","Statement")}},Ect=class extends Tct{constructor(t){super(),Qat(this,"type","Program"),this.body=t}},Act=class extends Tct{constructor(t,e,n){super(),Qat(this,"type","If"),this.test=t,this.body=e,this.alternate=n}},Mct=class extends Tct{constructor(t,e,n){super(),Qat(this,"type","For"),this.loopvar=t,this.iterable=e,this.body=n}},Oct=class extends Tct{constructor(t,e){super(),Qat(this,"type","Set"),this.assignee=t,this.value=e}},Cct=class extends Tct{constructor(){super(...arguments),Qat(this,"type","Expression")}},kct=class extends Cct{constructor(t,e,n){super(),Qat(this,"type","MemberExpression"),this.object=t,this.property=e,this.computed=n}},Pct=class extends Cct{constructor(t,e){super(),Qat(this,"type","CallExpression"),this.callee=t,this.args=e}},Ict=class extends Cct{constructor(t){super(),Qat(this,"type","Identifier"),this.value=t}},Nct=class extends Cct{constructor(t){super(),Qat(this,"type","Literal"),this.value=t}},Rct=class extends Nct{constructor(){super(...arguments),Qat(this,"type","NumericLiteral")}},Dct=class extends Nct{constructor(){super(...arguments),Qat(this,"type","StringLiteral")}},Lct=class extends Nct{constructor(){super(...arguments),Qat(this,"type","BooleanLiteral")}},Fct=class extends Nct{constructor(){super(...arguments),Qat(this,"type","ArrayLiteral")}},jct=class extends Nct{constructor(){super(...arguments),Qat(this,"type","TupleLiteral")}},Uct=class extends Nct{constructor(){super(...arguments),Qat(this,"type","ObjectLiteral")}},Bct=class extends Cct{constructor(t,e,n){super(),Qat(this,"type","BinaryExpression"),this.operator=t,this.left=e,this.right=n}},zct=class extends Cct{constructor(t,e){super(),Qat(this,"type","FilterExpression"),this.operand=t,this.filter=e}},Vct=class extends Cct{constructor(t,e,n){super(),Qat(this,"type","TestExpression"),this.operand=t,this.negate=e,this.test=n}},Gct=class extends Cct{constructor(t,e){super(),Qat(this,"type","UnaryExpression"),this.operator=t,this.argument=e}},Wct=class extends Cct{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;super(),Qat(this,"type","SliceExpression"),this.start=t,this.stop=e,this.step=n}},Hct=class extends Cct{constructor(t,e){super(),Qat(this,"type","KeywordArgumentExpression"),this.key=t,this.value=e}};function qct(t){const e=new Ect([]);let n=0;function r(e,r){const i=t[n++];if(!i||i.type!==e)throw new Error("Parser Error: ".concat(r,". ").concat(i.type," !== ").concat(e,"."));return i}function i(){switch(t[n].type){case yct.Text:return new Dct(r(yct.Text,"Expected text token").value);case yct.OpenStatement:return function(){let e;switch(r(yct.OpenStatement,"Expected opening statement token"),t[n].type){case yct.Set:++n,e=s(),r(yct.CloseStatement,"Expected closing statement token");break;case yct.If:++n,e=c(),r(yct.OpenStatement,"Expected {% token"),r(yct.EndIf,"Expected endif token"),r(yct.CloseStatement,"Expected %} token");break;case yct.For:++n,e=function(){const t=l(!0);if(!(t instanceof Ict||t instanceof jct))throw new SyntaxError("Expected identifier/tuple for the loop variable, got ".concat(t.type," instead"));r(yct.In,"Expected `in` keyword following loop variable");const e=u();r(yct.CloseStatement,"Expected closing statement token");const n=[];for(;o(yct.OpenStatement,yct.EndFor);)n.push(i());return new Mct(t,e,n)}(),r(yct.OpenStatement,"Expected {% token"),r(yct.EndFor,"Expected endfor token"),r(yct.CloseStatement,"Expected %} token");break;default:throw new SyntaxError("Unknown statement type: ".concat(t[n].type))}return e}();case yct.OpenExpression:return function(){r(yct.OpenExpression,"Expected opening expression token");const t=u();return r(yct.CloseExpression,"Expected closing expression token"),t}();default:throw new SyntaxError("Unexpected token type: ".concat(t[n].type))}}function o(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n+r.length<=t.length&&r.some(((e,r)=>e!==t[n+r].type))}function a(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n+r.length<=t.length&&r.every(((e,r)=>e===t[n+r].type))}function s(){const t=u();if(a(yct.Equals)){++n;const e=s();return new Oct(t,e)}return t}function c(){var e,o;const s=u();r(yct.CloseStatement,"Expected closing statement token");const l=[],h=[];for(;(null===(d=t[n])||void 0===d?void 0:d.type)!==yct.OpenStatement||(null===(p=t[n+1])||void 0===p?void 0:p.type)!==yct.ElseIf&&(null===(f=t[n+1])||void 0===f?void 0:f.type)!==yct.Else&&(null===(m=t[n+1])||void 0===m?void 0:m.type)!==yct.EndIf;){var d,p,f,m;l.push(i())}if((null===(e=t[n])||void 0===e?void 0:e.type)===yct.OpenStatement&&(null===(o=t[n+1])||void 0===o?void 0:o.type)!==yct.EndIf)if(++n,a(yct.ElseIf))r(yct.ElseIf,"Expected elseif token"),h.push(c());else for(r(yct.Else,"Expected else token"),r(yct.CloseStatement,"Expected closing statement token");(null===(g=t[n])||void 0===g?void 0:g.type)!==yct.OpenStatement||(null===(y=t[n+1])||void 0===y?void 0:y.type)!==yct.EndIf;){var g,y;h.push(i())}return new Act(s,l,h)}function l(){const t=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?x:u,e=[t()],r=a(yct.Comma);for(;r&&(++n,e.push(t()),a(yct.Comma)););return r?new jct(e):e[0]}function u(){return function(){const t=h();if(a(yct.If)){++n;const e=h();r(yct.Else,"Expected else token");const i=h();return new Act(e,[t],[i])}return t}()}function h(){let e=d();for(;a(yct.Or);){const r=t[n];++n;const i=d();e=new Bct(r,e,i)}return e}function d(){let e=p();for(;a(yct.And);){const r=t[n];++n;const i=p();e=new Bct(r,e,i)}return e}function p(){var e;let r;for(;a(yct.Not);){const e=t[n];++n;const i=p();r=new Gct(e,i)}return null!==(e=r)&&void 0!==e?e:function(){let e=f();for(;a(yct.ComparisonBinaryOperator)||a(yct.In)||a(yct.NotIn);){const r=t[n];++n;const i=f();e=new Bct(r,e,i)}return e}()}function f(){let e=v();for(;a(yct.AdditiveBinaryOperator);){const r=t[n];++n;const i=v();e=new Bct(r,e,i)}return e}function m(){const e=function(){let e=x();for(;a(yct.Dot)||a(yct.OpenSquareBracket);){const i=t[n];let o;++n;const a=i.type!==yct.Dot;if(a)o=y(),r(yct.CloseSquareBracket,"Expected closing square bracket");else if(o=x(),"Identifier"!==o.type)throw new SyntaxError("Expected identifier following dot operator");e=new kct(e,o,a)}return e}();return a(yct.OpenParen)?g(e):e}function g(t){let e=new Pct(t,function(){r(yct.OpenParen,"Expected opening parenthesis for arguments list");const t=function(){const t=[];for(;!a(yct.CloseParen);){let e=u();if(a(yct.Equals)){if(++n,!(e instanceof Ict))throw new SyntaxError("Expected identifier for keyword argument");const t=u();e=new Hct(e,t)}t.push(e),a(yct.Comma)&&++n}return t}();return r(yct.CloseParen,"Expected closing parenthesis for arguments list"),t}());return a(yct.OpenParen)&&(e=g(e)),e}function y(){const t=[];let e=!1;for(;!a(yct.CloseSquareBracket);)a(yct.Colon)?(t.push(void 0),++n,e=!0):(t.push(u()),a(yct.Colon)&&(++n,e=!0));if(0===t.length)throw new SyntaxError("Expected at least one argument for member/slice expression");if(e){if(t.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new Wct(...t)}return t[0]}function v(){let e=b();for(;a(yct.MultiplicativeBinaryOperator);){const r=t[n];++n;const i=b();e=new Bct(r,e,i)}return e}function b(){let t=function(){let t=m();for(;a(yct.Pipe);){++n;let e=x();if(!(e instanceof Ict))throw new SyntaxError("Expected identifier for the filter");a(yct.OpenParen)&&(e=g(e)),t=new zct(t,e)}return t}();for(;a(yct.Is);){++n;const e=a(yct.Not);e&&++n;let r=x();if(r instanceof Lct&&(r=new Ict(r.value.toString())),!(r instanceof Ict))throw new SyntaxError("Expected identifier for the test");t=new Vct(t,e,r)}return t}function x(){const e=t[n];switch(e.type){case yct.NumericLiteral:return++n,new Rct(Number(e.value));case yct.StringLiteral:return++n,new Dct(e.value);case yct.BooleanLiteral:return++n,new Lct("true"===e.value);case yct.Identifier:return++n,new Ict(e.value);case yct.OpenParen:{++n;const e=l();if(t[n].type!==yct.CloseParen)throw new SyntaxError("Expected closing parenthesis, got ".concat(t[n].type," instead"));return++n,e}case yct.OpenSquareBracket:{++n;const t=[];for(;!a(yct.CloseSquareBracket);)t.push(u()),a(yct.Comma)&&++n;return++n,new Fct(t)}case yct.OpenCurlyBracket:{++n;const t=new Map;for(;!a(yct.CloseCurlyBracket);){const e=u();r(yct.Colon,"Expected colon between key and value in object literal");const i=u();t.set(e,i),a(yct.Comma)&&++n}return++n,new Uct(t)}default:throw new SyntaxError("Unexpected token: ".concat(e.type))}}for(;n<t.length;)e.body.push(i());return e}function Xct(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;void 0===e&&(e=t,t=0);const r=[];for(let i=t;i<e;i+=n)r.push(i);return r}function Yct(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=Math.sign(r);var o,a,s,c;i>=0?(e=(null!==(o=e)&&void 0!==o?o:e=0)<0?Math.max(t.length+e,0):Math.min(e,t.length),n=(null!==(a=n)&&void 0!==a?a:n=t.length)<0?Math.max(t.length+n,0):Math.min(n,t.length)):(e=(null!==(s=e)&&void 0!==s?s:e=t.length-1)<0?Math.max(t.length+e,-1):Math.min(e,t.length-1),n=(null!==(c=n)&&void 0!==c?c:n=-1)<-1?Math.max(t.length+n,-1):Math.min(n,t.length-1));const l=[];for(let u=e;i*u<i*n;u+=r)l.push(t[u]);return l}function Kct(t){return t.replace(/\b\w/g,(t=>t.toUpperCase()))}var Zct=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;Qat(this,"type","RuntimeValue"),Qat(this,"value",void 0),Qat(this,"builtins",new Map),this.value=t}__bool__(){return new Qct(!!this.value)}},Jct=class extends Zct{constructor(){super(...arguments),Qat(this,"type","NumericValue")}},$ct=class t extends Zct{constructor(){super(...arguments),Qat(this,"type","StringValue"),Qat(this,"builtins",new Map([["upper",new rlt((()=>new t(this.value.toUpperCase())))],["lower",new rlt((()=>new t(this.value.toLowerCase())))],["strip",new rlt((()=>new t(this.value.trim())))],["title",new rlt((()=>new t(Kct(this.value))))],["length",new Jct(this.value.length)]]))}},Qct=class extends Zct{constructor(){super(...arguments),Qat(this,"type","BooleanValue")}},tlt=class extends Zct{constructor(){super(...arguments),Qat(this,"type","ObjectValue"),Qat(this,"builtins",new Map([["get",new rlt((t=>{var e,n;let[r,i]=t;if(!(r instanceof $ct))throw new Error("Object key must be a string: got ".concat(r.type));return null!==(e=null!==(n=this.value.get(r.value))&&void 0!==n?n:i)&&void 0!==e?e:new ilt}))],["items",new rlt((()=>new elt(Array.from(this.value.entries()).map((t=>{let[e,n]=t;return new elt([new $ct(e),n])})))))]]))}__bool__(){return new Qct(this.value.size>0)}},elt=class extends Zct{constructor(){super(...arguments),Qat(this,"type","ArrayValue"),Qat(this,"builtins",new Map([["length",new Jct(this.value.length)]]))}__bool__(){return new Qct(this.value.length>0)}},nlt=class extends elt{constructor(){super(...arguments),Qat(this,"type","TupleValue")}},rlt=class extends Zct{constructor(){super(...arguments),Qat(this,"type","FunctionValue")}},ilt=class extends Zct{constructor(){super(...arguments),Qat(this,"type","NullValue")}},olt=class extends Zct{constructor(){super(...arguments),Qat(this,"type","UndefinedValue")}},alt=class{constructor(t){Qat(this,"variables",new Map([["namespace",new rlt((t=>{if(0===t.length)return new tlt(new Map);if(1!==t.length||!(t[0]instanceof tlt))throw new Error("`namespace` expects either zero arguments or a single object argument");return t[0]}))]])),Qat(this,"tests",new Map([["boolean",t=>"BooleanValue"===t.type],["callable",t=>t instanceof rlt],["odd",t=>{if("NumericValue"!==t.type)throw new Error('Cannot apply test "odd" to type: '.concat(t.type));return t.value%2!==0}],["even",t=>{if("NumericValue"!==t.type)throw new Error('Cannot apply test "even" to type: '.concat(t.type));return t.value%2===0}],["false",t=>"BooleanValue"===t.type&&!t.value],["true",t=>"BooleanValue"===t.type&&t.value],["number",t=>"NumericValue"===t.type],["integer",t=>"NumericValue"===t.type&&Number.isInteger(t.value)],["iterable",t=>t instanceof elt||t instanceof $ct],["lower",t=>{const e=t.value;return"StringValue"===t.type&&e===e.toLowerCase()}],["upper",t=>{const e=t.value;return"StringValue"===t.type&&e===e.toUpperCase()}],["none",t=>"NullValue"===t.type],["defined",t=>"UndefinedValue"!==t.type],["undefined",t=>"UndefinedValue"===t.type],["equalto",(t,e)=>t.value===e.value]])),this.parent=t}set(t,e){return this.declareVariable(t,clt(e))}declareVariable(t,e){if(this.variables.has(t))throw new SyntaxError("Variable already declared: ".concat(t));return this.variables.set(t,e),e}setVariable(t,e){return this.variables.set(t,e),e}resolve(t){if(this.variables.has(t))return this;if(this.parent)return this.parent.resolve(t);throw new Error("Unknown variable: ".concat(t))}lookupVariable(t){try{var e;return null!==(e=this.resolve(t).variables.get(t))&&void 0!==e?e:new olt}catch{return new olt}}},slt=class{constructor(t){Qat(this,"global",void 0),this.global=null!==t&&void 0!==t?t:new alt}run(t){return this.evaluate(t,this.global)}evaluateBinaryExpression(t,e){const n=this.evaluate(t.left,e);switch(t.operator.value){case"and":return n.__bool__().value?this.evaluate(t.right,e):n;case"or":return n.__bool__().value?n:this.evaluate(t.right,e)}const r=this.evaluate(t.right,e);switch(t.operator.value){case"==":return new Qct(n.value==r.value);case"!=":return new Qct(n.value!=r.value)}if(n instanceof olt||r instanceof olt)throw new Error("Cannot perform operation on undefined values");if(n instanceof ilt||r instanceof ilt)throw new Error("Cannot perform operation on null values");if(n instanceof Jct&&r instanceof Jct)switch(t.operator.value){case"+":return new Jct(n.value+r.value);case"-":return new Jct(n.value-r.value);case"*":return new Jct(n.value*r.value);case"/":return new Jct(n.value/r.value);case"%":return new Jct(n.value%r.value);case"<":return new Qct(n.value<r.value);case">":return new Qct(n.value>r.value);case">=":return new Qct(n.value>=r.value);case"<=":return new Qct(n.value<=r.value)}else if(n instanceof elt&&r instanceof elt){if("+"===t.operator.value)return new elt(n.value.concat(r.value))}else if(r instanceof elt){const e=void 0!==r.value.find((t=>t.value===n.value));switch(t.operator.value){case"in":return new Qct(e);case"not in":return new Qct(!e)}}if((n instanceof $ct||r instanceof $ct)&&"+"===t.operator.value)return new $ct(n.value.toString()+r.value.toString());if(n instanceof $ct&&r instanceof $ct)switch(t.operator.value){case"in":return new Qct(r.value.includes(n.value));case"not in":return new Qct(!r.value.includes(n.value))}if(n instanceof $ct&&r instanceof tlt)switch(t.operator.value){case"in":return new Qct(r.value.has(n.value));case"not in":return new Qct(!r.value.has(n.value))}throw new SyntaxError('Unknown operator "'.concat(t.operator.value,'" between ').concat(n.type," and ").concat(r.type))}evaluateFilterExpression(t,e){const n=this.evaluate(t.operand,e);if("Identifier"===t.filter.type){const e=t.filter;if(n instanceof elt)switch(e.value){case"list":return n;case"first":return n.value[0];case"last":return n.value[n.value.length-1];case"length":return new Jct(n.value.length);case"reverse":return new elt(n.value.reverse());case"sort":return new elt(n.value.sort(((t,e)=>{if(t.type!==e.type)throw new Error("Cannot compare different types: ".concat(t.type," and ").concat(e.type));switch(t.type){case"NumericValue":return t.value-e.value;case"StringValue":return t.value.localeCompare(e.value);default:throw new Error("Cannot compare type: ".concat(t.type))}})));default:throw new Error("Unknown ArrayValue filter: ".concat(e.value))}else if(n instanceof $ct)switch(e.value){case"length":return new Jct(n.value.length);case"upper":return new $ct(n.value.toUpperCase());case"lower":return new $ct(n.value.toLowerCase());case"title":return new $ct(Kct(n.value));case"capitalize":return new $ct(n.value.charAt(0).toUpperCase()+n.value.slice(1));case"trim":return new $ct(n.value.trim());default:throw new Error("Unknown StringValue filter: ".concat(e.value))}else{if(n instanceof Jct){if("abs"===e.value)return new Jct(Math.abs(n.value));throw new Error("Unknown NumericValue filter: ".concat(e.value))}if(n instanceof tlt)switch(e.value){case"items":return new elt(Array.from(n.value.entries()).map((t=>{let[e,n]=t;return new elt([new $ct(e),n])})));case"length":return new Jct(n.value.size);default:throw new Error("Unknown ObjectValue filter: ".concat(e.value))}}throw new Error('Cannot apply filter "'.concat(e.value,'" to type: ').concat(n.type))}if("CallExpression"===t.filter.type){const r=t.filter;if("Identifier"!==r.callee.type)throw new Error("Unknown filter: ".concat(r.callee.type));const i=r.callee.value;if(n instanceof elt){if("selectattr"===i){if(n.value.some((t=>!(t instanceof tlt))))throw new Error("`selectattr` can only be applied to array of objects");if(r.args.some((t=>"StringLiteral"!==t.type)))throw new Error("arguments of `selectattr` must be strings");const[t,i,o]=r.args.map((t=>this.evaluate(t,e)));let a;if(i){const t=e.tests.get(i.value);if(!t)throw new Error("Unknown test: ".concat(i.value));a=t}else a=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e[0].__bool__().value};const s=n.value.filter((e=>{const n=e.value.get(t.value);return!!n&&a(n,o)}));return new elt(s)}throw new Error("Unknown ArrayValue filter: ".concat(i))}throw new Error('Cannot apply filter "'.concat(i,'" to type: ').concat(n.type))}throw new Error("Unknown filter: ".concat(t.filter.type))}evaluateTestExpression(t,e){const n=this.evaluate(t.operand,e),r=e.tests.get(t.test.value);if(!r)throw new Error("Unknown test: ".concat(t.test.value));const i=r(n);return new Qct(t.negate?!i:i)}evaluateUnaryExpression(t,e){const n=this.evaluate(t.argument,e);if("not"===t.operator.value)return new Qct(!n.value);throw new SyntaxError("Unknown operator: ".concat(t.operator.value))}evalProgram(t,e){return this.evaluateBlock(t.body,e)}evaluateBlock(t,e){let n="";for(const r of t){const t=this.evaluate(r,e);"NullValue"!==t.type&&"UndefinedValue"!==t.type&&(n+=t.value)}return new $ct(n)}evaluateIdentifier(t,e){return e.lookupVariable(t.value)}evaluateCallExpression(t,e){const n=[],r=new Map;for(const o of t.args)if("KeywordArgumentExpression"===o.type){const t=o;r.set(t.key.value,this.evaluate(t.value,e))}else n.push(this.evaluate(o,e));r.size>0&&n.push(new tlt(r));const i=this.evaluate(t.callee,e);if("FunctionValue"!==i.type)throw new Error("Cannot call something that is not a function: got ".concat(i.type));return i.value(n,e)}evaluateSliceExpression(t,e,n){if(!(t instanceof elt||t instanceof $ct))throw new Error("Slice object must be an array or string");const r=this.evaluate(e.start,n),i=this.evaluate(e.stop,n),o=this.evaluate(e.step,n);if(!(r instanceof Jct||r instanceof olt))throw new Error("Slice start must be numeric or undefined");if(!(i instanceof Jct||i instanceof olt))throw new Error("Slice stop must be numeric or undefined");if(!(o instanceof Jct||o instanceof olt))throw new Error("Slice step must be numeric or undefined");return t instanceof elt?new elt(Yct(t.value,r.value,i.value,o.value)):new $ct(Yct(Array.from(t.value),r.value,i.value,o.value).join(""))}evaluateMemberExpression(t,e){const n=this.evaluate(t.object,e);let r,i;if(t.computed){if("SliceExpression"===t.property.type)return this.evaluateSliceExpression(n,t.property,e);r=this.evaluate(t.property,e)}else r=new $ct(t.property.value);if(n instanceof tlt){var o;if(!(r instanceof $ct))throw new Error("Cannot access property with non-string: got ".concat(r.type));i=null!==(o=n.value.get(r.value))&&void 0!==o?o:n.builtins.get(r.value)}else if(n instanceof elt||n instanceof $ct)if(r instanceof Jct)i=n.value.at(r.value),n instanceof $ct&&(i=new $ct(n.value.at(r.value)));else{if(!(r instanceof $ct))throw new Error("Cannot access property with non-string/non-number: got ".concat(r.type));i=n.builtins.get(r.value)}else{if(!(r instanceof $ct))throw new Error("Cannot access property with non-string: got ".concat(r.type));i=n.builtins.get(r.value)}return i instanceof Zct?i:new olt}evaluateSet(t,e){const n=this.evaluate(t.value,e);if("Identifier"===t.assignee.type){const r=t.assignee.value;e.setVariable(r,n)}else{if("MemberExpression"!==t.assignee.type)throw new Error("Invalid LHS inside assignment expression: ".concat(JSON.stringify(t.assignee)));{const r=t.assignee,i=this.evaluate(r.object,e);if(!(i instanceof tlt))throw new Error("Cannot assign to member of non-object");if("Identifier"!==r.property.type)throw new Error("Cannot assign to member with non-identifier property");i.value.set(r.property.value,n)}}return new ilt}evaluateIf(t,e){const n=this.evaluate(t.test,e);return this.evaluateBlock(n.__bool__().value?t.body:t.alternate,e)}evaluateFor(t,e){const n=new alt(e),r=this.evaluate(t.iterable,n);if(!(r instanceof elt))throw new Error("Expected iterable type in for loop: got ".concat(r.type));let i="";for(let o=0;o<r.value.length;++o){const e=new Map([["index",new Jct(o+1)],["index0",new Jct(o)],["revindex",new Jct(r.value.length-o)],["revindex0",new Jct(r.value.length-o-1)],["first",new Qct(0===o)],["last",new Qct(o===r.value.length-1)],["length",new Jct(r.value.length)],["previtem",o>0?r.value[o-1]:new olt],["nextitem",o<r.value.length-1?r.value[o+1]:new olt]]);n.setVariable("loop",new tlt(e));const a=r.value[o];if("Identifier"===t.loopvar.type)n.setVariable(t.loopvar.value,a);else if("TupleLiteral"===t.loopvar.type){const e=t.loopvar;if("ArrayValue"!==a.type)throw new Error("Cannot unpack non-iterable type: ".concat(a.type));const r=a;if(e.value.length!==r.value.length)throw new Error("Too ".concat(e.value.length>r.value.length?"few":"many"," items to unpack"));for(let t=0;t<e.value.length;++t){if("Identifier"!==e.value[t].type)throw new Error("Cannot unpack non-identifier type: ".concat(e.value[t].type));n.setVariable(e.value[t].value,r.value[t])}}i+=this.evaluateBlock(t.body,n).value}return new $ct(i)}evaluate(t,e){if(void 0===t)return new olt;switch(t.type){case"Program":return this.evalProgram(t,e);case"Set":return this.evaluateSet(t,e);case"If":return this.evaluateIf(t,e);case"For":return this.evaluateFor(t,e);case"NumericLiteral":return new Jct(Number(t.value));case"StringLiteral":return new $ct(t.value);case"BooleanLiteral":return new Qct(t.value);case"ArrayLiteral":return new elt(t.value.map((t=>this.evaluate(t,e))));case"TupleLiteral":return new nlt(t.value.map((t=>this.evaluate(t,e))));case"ObjectLiteral":{const n=new Map;for(const[r,i]of t.value){const t=this.evaluate(r,e);if(!(t instanceof $ct))throw new Error("Object keys must be strings: got ".concat(t.type));n.set(t.value,this.evaluate(i,e))}return new tlt(n)}case"Identifier":return this.evaluateIdentifier(t,e);case"CallExpression":return this.evaluateCallExpression(t,e);case"MemberExpression":return this.evaluateMemberExpression(t,e);case"UnaryExpression":return this.evaluateUnaryExpression(t,e);case"BinaryExpression":return this.evaluateBinaryExpression(t,e);case"FilterExpression":return this.evaluateFilterExpression(t,e);case"TestExpression":return this.evaluateTestExpression(t,e);default:throw new SyntaxError("Unknown node type: ".concat(t.type))}}};function clt(t){switch(typeof t){case"number":return new Jct(t);case"string":return new $ct(t);case"boolean":return new Qct(t);case"object":return null===t?new ilt:Array.isArray(t)?new elt(t.map(clt)):new tlt(new Map(Object.entries(t).map((t=>{let[e,n]=t;return[e,clt(n)]}))));case"function":return new rlt(((e,n)=>{var r;return clt(null!==(r=t(...e.map((t=>t.value))))&&void 0!==r?r:null)}));default:throw new Error("Cannot convert to runtime value: ".concat(t))}}var llt=class{constructor(t){Qat(this,"parsed",void 0);const e=function(t){const e=[],n=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.endsWith("\n")&&(t=t.slice(0,-1)),t=t.replace(/{#.*?#}/gs,"{##}"),e.lstrip_blocks&&(t=t.replace(/^[ \t]*({[#%])/gm,"$1")),e.trim_blocks&&(t=t.replace(/([#%]})\n/g,"$1")),t.replace(/{##}/g,"").replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{")}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});let r=0;const i=t=>{let e="";for(;t(n[r]);)if("\\"!==n[r]){if(e+=n[r++],r>=n.length)throw new SyntaxError("Unexpected end of input")}else{if(++r,r>=n.length)throw new SyntaxError("Unexpected end of input");const t=n[r++],i=Sct.get(t);if(void 0===i)throw new SyntaxError("Unexpected escaped character: ".concat(t));e+=i}return e};t:for(;r<n.length;){var o;const t=null===(o=e.at(-1))||void 0===o?void 0:o.type;if(void 0===t||t===yct.CloseStatement||t===yct.CloseExpression){let t="";for(;r<n.length&&("{"!==n[r]||"%"!==n[r+1]&&"{"!==n[r+1]);)t+=n[r++];if(t.length>0){e.push(new bct(t,yct.Text));continue}}i((t=>/\s/.test(t)));const c=n[r];if("-"===c||"+"===c){var a;const t=null===(a=e.at(-1))||void 0===a?void 0:a.type;if(t===yct.Text||void 0===t)throw new SyntaxError("Unexpected character: ".concat(c));switch(t){case yct.Identifier:case yct.NumericLiteral:case yct.BooleanLiteral:case yct.StringLiteral:case yct.CloseParen:case yct.CloseSquareBracket:break;default:{++r;const t=i(_ct);e.push(new bct("".concat(c).concat(t),t.length>0?yct.NumericLiteral:yct.UnaryOperator));continue}}}for(const[i,o]of wct)if(n.slice(r,r+i.length)===i){e.push(new bct(i,o)),r+=i.length;continue t}if("'"!==c&&'"'!==c)if(_ct(c)){const t=i(_ct);e.push(new bct(t,yct.NumericLiteral))}else{if(!xct(c))throw new SyntaxError("Unexpected character: ".concat(c));{var s;const t=i(xct),n=Object.hasOwn(vct,t)?vct[t]:yct.Identifier;n===yct.In&&(null===(s=e.at(-1))||void 0===s?void 0:s.type)===yct.Not?(e.pop(),e.push(new bct("not in",yct.NotIn))):e.push(new bct(t,n))}}else{++r;const t=i((t=>t!==c));e.push(new bct(t,yct.StringLiteral)),++r}}return e}(t,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=qct(e)}render(t){const e=new alt;e.set("false",!1),e.set("true",!0),e.set("raise_exception",(t=>{throw new Error(t)})),e.set("range",Xct);for(const[n,r]of Object.entries(t))e.set(n,r);return new slt(e).run(this.parsed).value}};async function ult(t,e){const n=await Promise.all([zst(t,"tokenizer.json",!0,e),zst(t,"tokenizer_config.json",!0,e)]);return null!==e.legacy&&(n[1].legacy=e.legacy),n}function hlt(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0!==t.Regex){let e=t.Regex.replace(/\\([#&~])/g,"$1");for(const[t,n]of ylt)e=e.replaceAll(t,n);return new RegExp(e,"gu")}if(void 0!==t.String){const n=est(t.String);return new RegExp(e?n:"(".concat(n,")"),"gu")}return console.warn("Unknown pattern type:",t),null}function dlt(t){return new Map(Object.entries(t))}function plt(t){const e=t.dims;switch(e.length){case 1:return t.tolist();case 2:if(1!==e[0])throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return t.tolist()[0];default:throw new Error("Expected tensor to have 1-2 dimensions, got ".concat(e.length,"."))}}function flt(t){return t.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function mlt(t){return t.replace(/[\u0300-\u036f]/g,"")}const glt="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",ylt=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"]]);class vlt{constructor(t){var e,n,r,i,o;this.content=t.content,this.id=t.id,this.single_word=null!==(e=t.single_word)&&void 0!==e&&e,this.lstrip=null!==(n=t.lstrip)&&void 0!==n&&n,this.rstrip=null!==(r=t.rstrip)&&void 0!==r&&r,this.special=null!==(i=t.special)&&void 0!==i&&i,this.normalized=null!==(o=t.normalized)&&void 0!==o?o:null}}class blt extends nst{constructor(t){var e;super(),this.config=t,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=null!==(e=this.config.fuse_unk)&&void 0!==e&&e}static fromConfig(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];switch(t.type){case"WordPiece":return new xlt(t);case"Unigram":return new _lt(t,...n);case"BPE":return new Tlt(t);default:if(t.vocab)return new Elt(t,...n);throw new Error("Unknown TokenizerModel type: ".concat(t.type))}}_call(t){let e=this.encode(t);return this.fuse_unk&&(e=function(t,e,n){const r=[];let i=0;for(;i<t.length;){var o;if(r.push(t[i]),(null!==(o=n.get(t[i]))&&void 0!==o?o:e)===e)for(;i<t.length&&(null!==(a=n.get(t[i]))&&void 0!==a?a:e)===e;){var a;++i}else++i}return r}(e,this.unk_token_id,this.tokens_to_ids)),e}encode(t){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(t){return t.map((t=>{var e;return null!==(e=this.tokens_to_ids.get(t))&&void 0!==e?e:this.unk_token_id}))}convert_ids_to_tokens(t){return t.map((t=>{var e;return null!==(e=this.vocab[t])&&void 0!==e?e:this.unk_token}))}}class xlt extends blt{constructor(t){var e;super(t),this.tokens_to_ids=dlt(t.vocab),this.unk_token_id=this.tokens_to_ids.get(t.unk_token),this.unk_token=t.unk_token,this.max_input_chars_per_word=null!==(e=t.max_input_chars_per_word)&&void 0!==e?e:100,this.vocab=new Array(this.tokens_to_ids.size);for(const[n,r]of this.tokens_to_ids)this.vocab[r]=n}encode(t){const e=[];for(const n of t){const t=[...n];if(t.length>this.max_input_chars_per_word){e.push(this.unk_token);continue}let r=!1,i=0;const o=[];for(;i<t.length;){let e=t.length,n=null;for(;i<e;){let r=t.slice(i,e).join("");if(i>0&&(r=this.config.continuing_subword_prefix+r),this.tokens_to_ids.has(r)){n=r;break}--e}if(null===n){r=!0;break}o.push(n),i=e}r?e.push(this.unk_token):e.push(...o)}return e}}class _lt extends blt{constructor(t,e){super(t);const n=t.vocab.length;this.vocab=new Array(n),this.scores=new Array(n);for(let r=0;r<n;++r){const e=t.vocab[r];this.vocab[r]=e[0],this.scores[r]=e[1]}this.unk_token_id=t.unk_id,this.unk_token=this.vocab[t.unk_id],this.tokens_to_ids=new Map(this.vocab.map(((t,e)=>[t,e]))),this.bosToken=" ",this.bosTokenId=this.tokens_to_ids.get(this.bosToken),this.eosToken=e.eos_token,this.eosTokenId=this.tokens_to_ids.get(this.eosToken),this.unkToken=this.vocab[this.unk_token_id],this.minScore=Hst(this.scores)[0],this.unkScore=this.minScore-10,this.scores[this.unk_token_id]=this.unkScore,this.trie=new pct,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(t){const e=t.sentence,n=e.length;let r=0;for(;r<n;){const n=1;let i=!1;const o=[];for(let a of this.trie.commonPrefixSearch(e.slice(r))){o.push(a);const e=this.tokens_to_ids.get(a),s=this.scores[e],c=a.length;t.insert(r,c,s,e),i||c!==n||(i=!0)}i||t.insert(r,n,this.unkScore,this.unk_token_id),r+=n}}tokenize(t){const e=new mct(t,this.bosTokenId,this.eosTokenId);return this.populateNodes(e),e.tokens()}encode(t){const e=[];for(const n of t){const t=this.tokenize(n);e.push(...t)}return e}}const wlt=(()=>{const t=[...Array.from({length:"~".charCodeAt(0)-"!".charCodeAt(0)+1},((t,e)=>e+"!".charCodeAt(0))),...Array.from({length:"\xac".charCodeAt(0)-"\xa1".charCodeAt(0)+1},((t,e)=>e+"\xa1".charCodeAt(0))),...Array.from({length:"\xff".charCodeAt(0)-"\xae".charCodeAt(0)+1},((t,e)=>e+"\xae".charCodeAt(0)))],e=t.slice();let n=0;for(let i=0;i<256;++i)t.includes(i)||(t.push(i),e.push(256+n),n+=1);const r=e.map((t=>String.fromCharCode(t)));return Object.fromEntries(t.map(((t,e)=>[t,r[e]])))})(),Slt=function(t){return Object.fromEntries(Object.entries(t).map((t=>{let[e,n]=t;return[n,e]})))}(wlt);class Tlt extends blt{constructor(t){var e,n,r;super(t),this.BPE_SPLIT_TOKEN=" ",this.tokens_to_ids=dlt(t.vocab),this.unk_token_id=this.tokens_to_ids.get(t.unk_token),this.unk_token=t.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[i,o]of this.tokens_to_ids)this.vocab[o]=i;this.bpe_ranks=new Map(t.merges.map(((t,e)=>[t,e]))),this.merges=t.merges.map((t=>t.split(this.BPE_SPLIT_TOKEN))),this.end_of_word_suffix=t.end_of_word_suffix,this.continuing_subword_suffix=null!==(e=t.continuing_subword_suffix)&&void 0!==e?e:null,this.byte_fallback=null!==(n=this.config.byte_fallback)&&void 0!==n&&n,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=null!==(r=this.config.ignore_merges)&&void 0!==r&&r,this.cache=new Map}bpe(t){if(0===t.length)return[];const e=this.cache.get(t);if(void 0!==e)return e;const n=Array.from(t);this.end_of_word_suffix&&(n[n.length-1]+=this.end_of_word_suffix);let r=[];if(n.length>1){const t=new dct(((t,e)=>t.score<e.score));let e={token:n[0],bias:0,prev:null,next:null},i=e;for(let r=1;r<n.length;++r){const e={bias:r/n.length,token:n[r],prev:i,next:null};i.next=e,this._add_node(t,i),i=e}for(;!t.isEmpty();){const n=t.pop();if(n.deleted||!n.next||n.next.deleted)continue;if(n.deleted=!0,n.next.deleted=!0,n.prev){const t={...n.prev};n.prev.deleted=!0,n.prev=t,t.prev?t.prev.next=t:e=t}const r={token:n.token+n.next.token,bias:n.bias,prev:n.prev,next:n.next.next};r.prev?(r.prev.next=r,this._add_node(t,r.prev)):e=r,r.next&&(r.next.prev=r,this._add_node(t,r))}for(let n=e;null!==n;n=n.next)r.push(n.token)}else r=n;if(this.continuing_subword_suffix)for(let i=0;i<r.length-1;++i)r[i]+=this.continuing_subword_suffix;return this.cache.set(t,r),r}_add_node(t,e){const n=this.bpe_ranks.get(e.token+this.BPE_SPLIT_TOKEN+e.next.token);void 0!==n&&(e.score=n+e.bias,t.push(e))}encode(t){const e=[];for(const n of t){if(this.ignore_merges&&this.tokens_to_ids.has(n)){e.push(n);continue}const t=this.bpe(n);for(const n of t)this.tokens_to_ids.has(n)?e.push(n):this.byte_fallback?e.push(...Array.from(this.text_encoder.encode(n)).map((t=>"<0x".concat(t.toString(16).toUpperCase().padStart(2,"0"),">")))):e.push(this.unk_token)}return e}}class Elt extends blt{constructor(t,e){super(t),this.tokens_to_ids=dlt(e.target_lang?t.vocab[e.target_lang]:t.vocab),this.bos_token=e.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=e.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=e.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=e.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[n,r]of this.tokens_to_ids)this.vocab[r]=n}encode(t){return t}}class Alt extends nst{constructor(t){super(),this.config=t}static fromConfig(t){if(null===t)return null;switch(t.type){case"BertNormalizer":return new Llt(t);case"Precompiled":return new cut(t);case"Sequence":return new Dlt(t);case"Replace":return new Mlt(t);case"NFC":return new Olt(t);case"NFKC":return new Clt(t);case"NFKD":return new klt(t);case"Strip":return new Plt(t);case"StripAccents":return new Ilt(t);case"Lowercase":return new Nlt(t);case"Prepend":return new Rlt(t);default:throw new Error("Unknown Normalizer type: ".concat(t.type))}}normalize(t){throw Error("normalize should be implemented in subclass.")}_call(t){return this.normalize(t)}}class Mlt extends Alt{normalize(t){const e=hlt(this.config.pattern);return null===e?t:t.replaceAll(e,this.config.content)}}class Olt extends Alt{normalize(t){return t=t.normalize("NFC")}}class Clt extends Alt{normalize(t){return t=t.normalize("NFKC")}}class klt extends Alt{normalize(t){return t=t.normalize("NFKD")}}class Plt extends Alt{normalize(t){return this.config.strip_left&&this.config.strip_right?t=t.trim():(this.config.strip_left&&(t=t.trimStart()),this.config.strip_right&&(t=t.trimEnd())),t}}class Ilt extends Alt{normalize(t){return t=mlt(t)}}class Nlt extends Alt{normalize(t){return t=t.toLowerCase()}}class Rlt extends Alt{normalize(t){return t=this.config.prepend+t}}class Dlt extends Alt{constructor(t){super(t),this.normalizers=t.normalizers.map((t=>Alt.fromConfig(t)))}normalize(t){return this.normalizers.reduce(((t,e)=>e.normalize(t)),t)}}class Llt extends Alt{_tokenize_chinese_chars(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n],i=r.charCodeAt(0);this._is_chinese_char(i)?(e.push(" "),e.push(r),e.push(" ")):e.push(r)}return e.join("")}_is_chinese_char(t){return t>=19968&&t<=40959||t>=13312&&t<=19903||t>=131072&&t<=173791||t>=173824&&t<=177983||t>=177984&&t<=178207||t>=178208&&t<=183983||t>=63744&&t<=64255||t>=194560&&t<=195103}stripAccents(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}_is_control(t){switch(t){case"\t":case"\n":case"\r":return!1;default:return/^\p{Cc}|\p{Cf}|\p{Co}|\p{Cs}$/u.test(t)}}_clean_text(t){const e=[];for(const n of t){const t=n.charCodeAt(0);0===t||65533===t||this._is_control(n)||(/^\s$/.test(n)?e.push(" "):e.push(n))}return e.join("")}normalize(t){return this.config.clean_text&&(t=this._clean_text(t)),this.config.handle_chinese_chars&&(t=this._tokenize_chinese_chars(t)),this.config.lowercase?(t=t.toLowerCase(),!1!==this.config.strip_accents&&(t=this.stripAccents(t))):this.config.strip_accents&&(t=this.stripAccents(t)),t}}class Flt extends nst{static fromConfig(t){if(null===t)return null;switch(t.type){case"BertPreTokenizer":return new jlt(t);case"Sequence":return new lut(t);case"Whitespace":return new uut(t);case"WhitespaceSplit":return new hut(t);case"Metaspace":return new aut(t);case"ByteLevel":return new Ult(t);case"Split":return new Blt(t);case"Punctuation":return new zlt(t);case"Digits":return new Vlt(t);case"Replace":return new dut(t);default:throw new Error("Unknown PreTokenizer type: ".concat(t.type))}}pre_tokenize_text(t,e){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(t,e){return(Array.isArray(t)?t.map((t=>this.pre_tokenize_text(t,e))):this.pre_tokenize_text(t,e)).flat()}_call(t,e){return this.pre_tokenize(t,e)}}class jlt extends Flt{constructor(t){super(),this.pattern=new RegExp("[^\\s".concat(glt,"]+|[").concat(glt,"]"),"gu")}pre_tokenize_text(t,e){return t.trim().match(this.pattern)||[]}}class Ult extends Flt{constructor(t){var e;super(),this.config=t,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=null===(e=this.config.use_regex)||void 0===e||e,this.pattern=/'s|'t|'re|'ve|'m|'ll|'d| ?\p{L}+| ?\p{N}+| ?[^\s\p{L}\p{N}]+|\s+(?!\S)|\s+/gu,this.byte_encoder=wlt,this.text_encoder=new TextEncoder}pre_tokenize_text(t,e){this.add_prefix_space&&!t.startsWith(" ")&&(t=" "+t);return(this.use_regex?t.match(this.pattern)||[]:[t]).map((t=>Array.from(this.text_encoder.encode(t),(t=>this.byte_encoder[t])).join("")))}}class Blt extends Flt{constructor(t){super(),this.config=t,this.pattern=hlt(this.config.pattern,this.config.invert)}pre_tokenize_text(t,e){return null===this.pattern?[]:this.config.invert?t.match(this.pattern)||[]:function(t,e){const n=[];let r=0;for(const i of t.matchAll(e)){const e=i[0];r<i.index&&n.push(t.slice(r,i.index)),e.length>0&&n.push(e),r=i.index+e.length}return r<t.length&&n.push(t.slice(r)),n}(t,this.pattern)}}class zlt extends Flt{constructor(t){super(),this.config=t,this.pattern=new RegExp("[^".concat(glt,"]+|[").concat(glt,"]+"),"gu")}pre_tokenize_text(t,e){return t.match(this.pattern)||[]}}class Vlt extends Flt{constructor(t){super(),this.config=t;const e="[^\\d]+|\\d".concat(this.config.individual_digits?"":"+");this.pattern=new RegExp(e,"gu")}pre_tokenize_text(t,e){return t.match(this.pattern)||[]}}class Glt extends nst{constructor(t){super(),this.config=t}static fromConfig(t){if(null===t)return null;switch(t.type){case"TemplateProcessing":return new qlt(t);case"ByteLevel":return new Xlt(t);case"RobertaProcessing":return new Hlt(t);case"BertProcessing":return new Wlt(t);case"Sequence":return new Ylt(t);default:throw new Error("Unknown PostProcessor type: ".concat(t.type))}}post_process(t){throw Error("post_process should be implemented in subclass.")}_call(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.post_process(t,...n)}}class Wlt extends Glt{constructor(t){super(t),this.cls=t.cls[0],this.sep=t.sep[0]}post_process(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{add_special_tokens:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n&&(t=ast([this.cls],t,[this.sep]));let r=new Array(t.length).fill(0);if(null!==e){const i=n&&this instanceof Hlt?[this.sep]:[],o=n?[this.sep]:[];t=ast(t,i,e,o),r=ast(r,new Array(e.length+i.length+o.length).fill(1))}return{tokens:t,token_type_ids:r}}}class Hlt extends Wlt{}class qlt extends Glt{constructor(t){super(t),this.single=t.single,this.pair=t.pair}post_process(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{add_special_tokens:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=null===e?this.single:this.pair;let i=[],o=[];for(const a of r)"SpecialToken"in a?n&&(i.push(a.SpecialToken.id),o.push(a.SpecialToken.type_id)):"Sequence"in a&&("A"===a.Sequence.id?(i=ast(i,t),o=ast(o,new Array(t.length).fill(a.Sequence.type_id))):"B"===a.Sequence.id&&(i=ast(i,e),o=ast(o,new Array(e.length).fill(a.Sequence.type_id))));return{tokens:i,token_type_ids:o}}}class Xlt extends Glt{post_process(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&(t=ast(t,e)),{tokens:t}}}class Ylt extends Glt{constructor(t){super(t),this.processors=t.processors.map((t=>Glt.fromConfig(t)))}post_process(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(const i of this.processors)if(i instanceof Xlt){if(t=i.post_process(t).tokens,n){n=i.post_process(n).tokens}}else{const o=i.post_process(t,n,r);t=o.tokens,e=o.token_type_ids}return{tokens:t,token_type_ids:e}}}class Klt extends nst{constructor(t){super(),this.config=t,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=t.trim_offsets}static fromConfig(t){if(null===t)return null;switch(t.type){case"WordPiece":return new tut(t);case"Metaspace":return new sut(t);case"ByteLevel":return new eut(t);case"Replace":return new Zlt(t);case"ByteFallback":return new Jlt(t);case"Fuse":return new $lt(t);case"Strip":return new Qlt(t);case"Sequence":return new rut(t);case"CTC":return new nut(t);case"BPEDecoder":return new iut(t);default:throw new Error("Unknown Decoder type: ".concat(t.type))}}_call(t){return this.decode(t)}decode(t){return this.decode_chain(t).join("")}decode_chain(t){throw Error("`decode_chain` should be implemented in subclass.")}}class Zlt extends Klt{decode_chain(t){const e=hlt(this.config.pattern);return null===e?t:t.map((t=>t.replaceAll(e,this.config.content)))}}class Jlt extends Klt{constructor(t){super(t),this.text_decoder=new TextDecoder}decode_chain(t){const e=[];let n=[];for(const r of t){let t=null;if(6===r.length&&r.startsWith("<0x")&&r.endsWith(">")){const e=parseInt(r.slice(3,5),16);isNaN(e)||(t=e)}if(null!==t)n.push(t);else{if(n.length>0){const t=this.text_decoder.decode(Uint8Array.from(n));e.push(t),n=[]}e.push(r)}}if(n.length>0){const t=this.text_decoder.decode(Uint8Array.from(n));e.push(t),n=[]}return e}}class $lt extends Klt{decode_chain(t){return[t.join("")]}}class Qlt extends Klt{constructor(t){super(t),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(t){return t.map((t=>{let e=0;for(let r=0;r<this.start&&t[r]===this.content;++r)e=r+1;let n=t.length;for(let r=0;r<this.stop;++r){const e=t.length-r-1;if(t[e]!==this.content)break;n=e}return t.slice(e,n)}))}}class tut extends Klt{constructor(t){super(t),this.cleanup=t.cleanup}decode_chain(t){return t.map(((t,e)=>(0!==e&&(t=t.startsWith(this.config.prefix)?t.replace(this.config.prefix,""):" "+t),this.cleanup&&(t=flt(t)),t)))}}class eut extends Klt{constructor(t){super(t),this.byte_decoder=Slt,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(t){const e=t.join(""),n=new Uint8Array([...e].map((t=>this.byte_decoder[t])));return this.text_decoder.decode(n)}decode_chain(t){const e=[];let n=[];for(const r of t)void 0!==this.added_tokens.find((t=>t.content===r))?(n.length>0&&(e.push(this.convert_tokens_to_string(n)),n=[]),e.push(r)):n.push(r);return n.length>0&&e.push(this.convert_tokens_to_string(n)),e}}class nut extends Klt{constructor(t){super(t),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(t){if(0===t.length)return"";const e=[t[0]];for(let i=1;i<t.length;++i)t[i]!==e.at(-1)&&e.push(t[i]);const n=e.filter((t=>t!==this.pad_token));let r=n.join("");return this.cleanup&&(r=flt(r).replaceAll(this.word_delimiter_token," ").trim()),r}decode_chain(t){return[this.convert_tokens_to_string(t)]}}class rut extends Klt{constructor(t){super(t),this.decoders=t.decoders.map((t=>Klt.fromConfig(t)))}decode_chain(t){return this.decoders.reduce(((t,e)=>e.decode_chain(t)),t)}}class iut extends Klt{constructor(t){super(t),this.suffix=this.config.suffix}decode_chain(t){return t.map(((e,n)=>e.replaceAll(this.suffix,n===t.length-1?"":" ")))}}class out extends Klt{decode_chain(t){let e="";for(let n=1;n<t.length;n+=2)e+=t[n];return[e]}}class aut extends Flt{constructor(t){var e;super(),this.addPrefixSpace=t.add_prefix_space,this.replacement=t.replacement,this.strRep=t.str_rep||this.replacement,this.prepend_scheme=null!==(e=t.prepend_scheme)&&void 0!==e?e:"always"}pre_tokenize_text(t){let{section_index:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!n.startsWith(this.replacement)&&("always"===this.prepend_scheme||"first"===this.prepend_scheme&&0===e)&&(n=this.strRep+n),[n]}}class sut extends Klt{constructor(t){super(t),this.addPrefixSpace=t.add_prefix_space,this.replacement=t.replacement}decode_chain(t){const e=[];for(let n=0;n<t.length;++n){let r=t[n].replaceAll(this.replacement," ");this.addPrefixSpace&&0==n&&r.startsWith(" ")&&(r=r.substring(1)),e.push(r)}return e}}class cut extends Alt{constructor(t){super(t),this.charsmap=t.precompiled_charsmap}normalize(t){if((t=(t=t.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,"")).replace(/[\u0009\u000A\u000C\u000D\u1680\u200B\u200C\u200E\u200F\u2028\u2029\u2581\uFEFF\uFFFD]/gm," ")).includes("\uff5e")){const e=t.split("\uff5e");t=e.map((t=>t.normalize("NFKC"))).join("\uff5e")}else t=t.normalize("NFKC");return t}}class lut extends Flt{constructor(t){super(),this.tokenizers=t.pretokenizers.map((t=>Flt.fromConfig(t)))}pre_tokenize_text(t,e){return this.tokenizers.reduce(((t,n)=>n.pre_tokenize(t,e)),[t])}}class uut extends Flt{constructor(t){super()}pre_tokenize_text(t,e){return t.match(/\w+|[^\w\s]+/g)||[]}}class hut extends Flt{constructor(t){super()}pre_tokenize_text(t,e){return function(t){return t.match(/\S+/g)||[]}(t)}}class dut extends Flt{constructor(t){super(),this.config=t,this.pattern=hlt(this.config.pattern),this.content=this.config.content}pre_tokenize_text(t,e){return null===this.pattern?[t]:[t.replaceAll(this.pattern,this.config.content)]}}const put=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function fut(t,e,n,r){for(const i of Object.keys(t)){const o=e-t[i].length,a=n(i),s=new Array(o).fill(a);t[i]="right"===r?ast(t[i],s):ast(s,t[i])}}function mut(t,e){for(const n of Object.keys(t))t[n].length=e}class gut extends nst{constructor(t,e){var n,r,i,o;super(),Qat(this,"return_token_type_ids",!1),Qat(this,"_default_chat_template","{% for message in messages %}{{'<|im_start|>' + message['role'] + '\n' + message['content'] + '<|im_end|>' + '\n'}}{% endfor %}{% if add_generation_prompt %}{{ '<|im_start|>assistant\n' }}{% endif %}"),this._tokenizer_config=e,this.normalizer=Alt.fromConfig(t.normalizer),this.pre_tokenizer=Flt.fromConfig(t.pre_tokenizer),this.model=blt.fromConfig(t.model,e),this.post_processor=Glt.fromConfig(t.post_processor),this.decoder=Klt.fromConfig(t.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const a of t.added_tokens){const t=new vlt(a);this.added_tokens.push(t),this.model.tokens_to_ids.set(t.content,t.id),this.model.vocab[t.id]=t.content,t.special&&(this.special_tokens.push(t.content),this.all_special_ids.push(t.id))}if(this.additional_special_tokens=null!==(n=e.additional_special_tokens)&&void 0!==n?n:[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_regex=this.added_tokens.length>0?new RegExp(this.added_tokens.map((t=>"".concat(t.lstrip?"\\s*":"","(").concat(est(t.content),")").concat(t.rstrip?"\\s*":""))).join("|")):null,this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.model_max_length=e.model_max_length,this.remove_space=e.remove_space,this.clean_up_tokenization_spaces=null===(r=e.clean_up_tokenization_spaces)||void 0===r||r,this.do_lowercase_and_remove_accent=null!==(i=e.do_lowercase_and_remove_accent)&&void 0!==i&&i,this.padding_side="right",this.legacy=!1,this.chat_template=null!==(o=e.chat_template)&&void 0!==o?o:null,Array.isArray(this.chat_template)){const t=Object.create(null);for(const{name:e,template:n}of this.chat_template){if("string"!==typeof e||"string"!==typeof n)throw new Error('Chat template must be a list of objects with "name" and "template" properties');t[e]=n}this.chat_template=t}this._compiled_template_cache=new Map}getToken(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e){const t=this._tokenizer_config[r];if(t){if("object"===typeof t){if("AddedToken"===t.__type)return t.content;throw Error("Unknown token: ".concat(t))}return t}}return null}static async from_pretrained(t){let{progress_callback:e=null,config:n=null,cache_dir:r=null,local_files_only:i=!1,revision:o="main",legacy:a=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this(...await ult(t,{progress_callback:e,config:n,cache_dir:r,local_files_only:i,revision:o,legacy:a}))}_call(t){let{text_pair:e=null,add_special_tokens:n=!0,padding:r=!1,truncation:i=null,max_length:o=null,return_tensor:a=!0,return_token_type_ids:s=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=Array.isArray(t);let l;if(c){if(0===t.length)throw Error("text array must be non-empty");if(null!==e){if(!Array.isArray(e))throw Error("text_pair must also be an array");if(t.length!==e.length)throw Error("text and text_pair must have the same length");l=t.map(((t,r)=>this._encode_plus(t,e[r],{add_special_tokens:n,return_token_type_ids:s})))}else l=t.map((t=>this._encode_plus(t,null,{add_special_tokens:n,return_token_type_ids:s})))}else{if(null===t||void 0===t)throw Error("text may not be null or undefined");if(Array.isArray(e))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");l=[this._encode_plus(t,e,{add_special_tokens:n,return_token_type_ids:s})]}if(null===o?o="max_length"===r?this.model_max_length:qst(l.map((t=>t.input_ids.length)))[0]:i||console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation=true` to explicitly truncate examples to max length."),o=Math.min(o,this.model_max_length),r||i)for(let h=0;h<l.length;++h)l[h].input_ids.length!==o&&(l[h].input_ids.length>o?i&&mut(l[h],o):r&&fut(l[h],o,(t=>"input_ids"===t?this.pad_token_id:0),this.padding_side));const u={};if(a){if((!r||!i)&&l.some((t=>{for(const n of Object.keys(t)){var e;if(t[n].length!==(null===(e=l[0][n])||void 0===e?void 0:e.length))return!0}return!1})))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const t=[l.length,l[0].input_ids.length];for(const e of Object.keys(l[0]))u[e]=new ect("int64",BigInt64Array.from(l.flatMap((t=>t[e])).map(BigInt)),t)}else{for(const t of Object.keys(l[0]))u[t]=l.map((e=>e[t]));if(!c)for(const t of Object.keys(u))u[t]=u[t][0]}return u}_encode_text(t){if(null===t)return null;const e=(this.added_tokens_regex?t.split(this.added_tokens_regex).filter((t=>t)):[t]).map(((t,e)=>{const n=this.added_tokens.find((e=>e.content===t));if(void 0!==n)return t;{if(!0===this.remove_space&&(t=t.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(t=function(t){return mlt(t.toLowerCase())}(t)),null!==this.normalizer&&(t=this.normalizer(t)),0===t.length)return[];const n=null!==this.pre_tokenizer?this.pre_tokenizer(t,{section_index:e}):[t];return this.model(n)}})).flat();return e}_encode_plus(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{add_special_tokens:n=!0,return_token_type_ids:r=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this._encode_text(t),o=this._encode_text(e),a=this.post_processor?this.post_processor(i,o,{add_special_tokens:n}):{tokens:ast(null!==i&&void 0!==i?i:[],null!==o&&void 0!==o?o:[])},s=this.model.convert_tokens_to_ids(a.tokens),c={input_ids:s,attention_mask:new Array(s.length).fill(1)};return(null!==r&&void 0!==r?r:this.return_token_type_ids)&&a.token_type_ids&&(c.token_type_ids=a.token_type_ids),c}encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{add_special_tokens:n=!0,return_token_type_ids:r=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{input_ids:i}=this._encode_plus(t,e,{add_special_tokens:n,return_token_type_ids:r});return i}batch_decode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t instanceof ect&&(t=t.tolist()),t.map((t=>this.decode(t,e)))}decode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t instanceof ect&&(t=plt(t)),!Array.isArray(t)||0===t.length||!rst(t[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(t,e)}decode_single(t,e){let{skip_special_tokens:n=!1,clean_up_tokenization_spaces:r=null}=e,i=this.model.convert_ids_to_tokens(t);n&&(i=i.filter((t=>!this.special_tokens.includes(t))));let o=this.decoder?this.decoder(i):i.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(o=o.replaceAll(this.decoder.end_of_word_suffix," "),n&&(o=o.trim())),(null!==r&&void 0!==r?r:this.clean_up_tokenization_spaces)&&(o=flt(o)),o}get default_chat_template(){return this._warned_about_chat_template||(console.warn("No chat template is defined for this tokenizer - using a default chat template that implements the ChatML format. If the default is not appropriate for your model, please set `tokenizer.chat_template` to an appropriate template. See https://huggingface.co/docs/transformers/main/chat_templating for more information."),this._warned_about_chat_template=!0),this._default_chat_template}apply_chat_template(t){let{chat_template:e=null,add_generation_prompt:n=!1,tokenize:r=!0,padding:i=!1,truncation:o=!1,max_length:a=null,return_tensor:s=!0,tokenizer_kwargs:c={},...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.chat_template&&"object"===typeof this.chat_template||null===this.chat_template&&this.default_chat_template&&"object"===typeof this.default_chat_template){var u;const t=null!==(u=this.chat_template)&&void 0!==u?u:this.default_chat_template;if(null!==e&&Object.hasOwn(t,e))e=t[e];else if(null===e&&"default"in t)e=t.default;else if(null===e)throw Error("This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available "+"template names are ".concat(Object.keys(t).sort(),"."))}else{var h,d;null!==(h=e)&&void 0!==h||(e=null!==(d=this.chat_template)&&void 0!==d?d:this.default_chat_template)}if("string"!==typeof e)throw Error("chat_template must be a string, but got ".concat(typeof e));let p=this._compiled_template_cache.get(e);void 0===p&&(p=new llt(e),this._compiled_template_cache.set(e,p));const f=Object.create(null);for(const g of put){const t=this.getToken(g);t&&(f[g]=t)}const m=p.render({messages:t,add_generation_prompt:n,...f,...l});return r?this._call(m,{add_special_tokens:!1,padding:i,truncation:o,max_length:a,return_tensor:s,...c}).input_ids:m}}class yut extends gut{constructor(){super(...arguments),Qat(this,"_default_chat_template",'{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}')}}class vut extends gut{constructor(t,e){super(t,e),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter((t=>this.languageRegex.test(t))),this.lang_to_token=t=>t}_build_translation_inputs(t,e,n){return _ut(this,t,e,n)}}const but="\u2581";class xut extends gut{constructor(t,e){var n,r;super(t,e),Qat(this,"_default_chat_template","{% if messages[0]['role'] == 'system' %}{% set loop_messages = messages[1:] %}{% set system_message = messages[0]['content'] %}{% elif USE_DEFAULT_PROMPT == true and not '<<SYS>>' in messages[0]['content'] %}{% set loop_messages = messages %}{% set system_message = 'DEFAULT_SYSTEM_MESSAGE' %}{% else %}{% set loop_messages = messages %}{% set system_message = false %}{% endif %}{% for message in loop_messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if loop.index0 == 0 and system_message != false %}{% set content = '<<SYS>>\n' + system_message + '\n<</SYS>>\n\n' + message['content'] %}{% else %}{% set content = message['content'] %}{% endif %}{% if message['role'] == 'user' %}{{ bos_token + '[INST] ' + content.strip() + ' [/INST]' }}{% elif message['role'] == 'system' %}{{ '<<SYS>>\n' + content.strip() + '\n<</SYS>>\n\n' }}{% elif message['role'] == 'assistant' %}{{ ' '  + content.strip() + ' ' + eos_token }}{% endif %}{% endfor %}"),Qat(this,"DEFAULT_SYSTEM_PROMPT","You are a helpful, respectful and honest assistant. Always answer as helpfully as possible, while being safe. Your answers should not include any harmful, unethical, racist, sexist, toxic, dangerous, or illegal content. Please ensure that your responses are socially unbiased and positive in nature.\n\nIf a question does not make any sense, or is not factually coherent, explain why instead of answering something not correct. If you don't know the answer to a question, please don't share false information."),this.use_default_system_prompt=null!==(n=e.use_default_system_prompt)&&void 0!==n&&n,this.legacy=null===(r=e.legacy)||void 0===r||r,this.legacy||(this.normalizer=null,this.pre_tokenizer=new aut({replacement:but,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(t){if(null===t)return null;if(this.legacy||0===t.length)return super._encode_text(t);let e=super._encode_text(but+t.replaceAll(but," "));return e.length>1&&e[0]===but&&this.special_tokens.includes(e[1])&&(e=e.slice(1)),e}get default_chat_template(){return super.default_chat_template.replaceAll("USE_DEFAULT_PROMPT",this.use_default_system_prompt?"true":"false").replaceAll("DEFAULT_SYSTEM_MESSAGE",this.DEFAULT_SYSTEM_PROMPT.replaceAll("\n","\\n").replaceAll("'","\\'"))}}function _ut(t,e,n,r){if(!("language_codes"in t)||!Array.isArray(t.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in t)||!(t.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in t)||"function"!==typeof t.lang_to_token)throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const i=r.src_lang,o=r.tgt_lang;if(!t.language_codes.includes(o))throw new Error('Target language code "'.concat(o,'" is not valid. Must be one of: {').concat(t.language_codes.join(", "),"}"));if(void 0!==i){if(!t.language_codes.includes(i))throw new Error('Source language code "'.concat(i,'" is not valid. Must be one of: {').concat(t.language_codes.join(", "),"}"));for(const e of t.post_processor.config.single)if("SpecialToken"in e&&t.languageRegex.test(e.SpecialToken.id)){e.SpecialToken.id=t.lang_to_token(i);break}}return r.forced_bos_token_id=t.model.convert_tokens_to_ids([t.lang_to_token(o)])[0],t._call(e,n)}const wut=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],Sut=new Map(wut),Tut=new Map([...wut.map((t=>{let[e,n]=t;return[n,e]})),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);class Eut extends gut{constructor(){super(...arguments),Qat(this,"_default_chat_template","{% for message in messages %}{% if message['role'] == 'user' %}{{ ' ' }}{% endif %}{{ message['content'] }}{% if not loop.last %}{{ '  ' }}{% endif %}{% endfor %}{{ eos_token }}")}}class Aut{static async from_pretrained(t){var e,n;let{quantized:r=!0,progress_callback:i=null,config:o=null,cache_dir:a=null,local_files_only:s=!1,revision:c="main",legacy:l=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[u,h]=await ult(t,{quantized:r,progress_callback:i,config:o,cache_dir:a,local_files_only:s,revision:c,legacy:l}),d=null!==(e=null===(n=h.tokenizer_class)||void 0===n?void 0:n.replace(/Fast$/,""))&&void 0!==e?e:"PreTrainedTokenizer";let p=this.TOKENIZER_CLASS_MAPPING[d];return p||(console.warn('Unknown tokenizer class "'.concat(d,'", attempting to construct from base class.')),p=gut),new p(u,h)}}Qat(Aut,"TOKENIZER_CLASS_MAPPING",{T5Tokenizer:class extends gut{},DistilBertTokenizer:class extends gut{},CamembertTokenizer:class extends gut{},DebertaTokenizer:class extends gut{constructor(){super(...arguments),Qat(this,"return_token_type_ids",!0)}},DebertaV2Tokenizer:class extends gut{constructor(){super(...arguments),Qat(this,"return_token_type_ids",!0)}},BertTokenizer:class extends gut{constructor(){super(...arguments),Qat(this,"return_token_type_ids",!0)}},HerbertTokenizer:class extends gut{constructor(){super(...arguments),Qat(this,"return_token_type_ids",!0)}},ConvBertTokenizer:class extends gut{constructor(){super(...arguments),Qat(this,"return_token_type_ids",!0)}},RoFormerTokenizer:class extends gut{constructor(){super(...arguments),Qat(this,"return_token_type_ids",!0)}},XLMTokenizer:class extends gut{constructor(t,e){super(t,e),Qat(this,"return_token_type_ids",!0),console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}},ElectraTokenizer:class extends gut{constructor(){super(...arguments),Qat(this,"return_token_type_ids",!0)}},MobileBertTokenizer:class extends gut{constructor(){super(...arguments),Qat(this,"return_token_type_ids",!0)}},SqueezeBertTokenizer:class extends gut{constructor(){super(...arguments),Qat(this,"return_token_type_ids",!0)}},AlbertTokenizer:class extends gut{constructor(){super(...arguments),Qat(this,"return_token_type_ids",!0)}},GPT2Tokenizer:yut,BartTokenizer:class extends gut{},MBartTokenizer:vut,MBart50Tokenizer:class extends vut{},RobertaTokenizer:class extends gut{},WhisperTokenizer:class extends gut{constructor(){super(...arguments),Qat(this,"_default_chat_template",'{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}')}_decode_asr(t){let{return_timestamps:e=!1,return_language:n=!1,time_precision:r=null,force_full_sequences:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===r)throw Error("Must specify time_precision");let o=null;const a="word"===e;function s(){return{language:o,timestamp:[null,null],text:""}}const c=[];let l=s(),u=0;const h=this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1;let d=[],p=[],f=!1,m=null;const g=new Set(this.all_special_ids);for(const b of t){const t=b.tokens,n=a?b.token_timestamps:null;let i=null,y=h;if("stride"in b){const[e,n,o]=b.stride;if(u-=n,m=e-o,n&&(y=n/r+h),o)for(let a=t.length-1;a>=0;--a){const e=t[a];if(e>=h){if(null!==i&&(e-h)*r<m)break;i=e}}}let v=[],x=[];for(let m=0;m<t.length;++m){const b=t[m];if(g.has(b)){const t=this.decode([b]),n=Sut.get(t.slice(2,-2));if(void 0!==n){if(null!==o&&n!==o&&!e){d.push(v);const t=this.findLongestCommonSequence(d)[0],e=this.decode(t);l.text=e,c.push(l),d=[],v=[],l=s()}o=l.language=n}}else if(b>=h){const t=$st((b-h)*r+u,2);if(null!==i&&b>=i)f=!0;else if(f||d.length>0&&b<y)f=!1;else if(null===l.timestamp[0])l.timestamp[0]=t;else if(t===l.timestamp[0]);else{l.timestamp[1]=t,d.push(v),a&&p.push(x);const[e,n]=this.findLongestCommonSequence(d,p),r=this.decode(e);l.text=r,a&&(l.words=this.collateWordTimestamps(e,n,o)),c.push(l),d=[],v=[],p=[],x=[],l=s()}}else if(v.push(b),a){let t,e=$st(n[m]+u,2);t=m+1<n.length?$st(n[m+1]+u,2):null,x.push([e,t])}}if("stride"in b){const[t,e,n]=b.stride;u+=t-n}v.length>0?(d.push(v),a&&p.push(x)):d.every((t=>0===t.length))&&(l=s(),d=[],v=[],p=[],x=[])}if(d.length>0){if(i&&e)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[t,n]=this.findLongestCommonSequence(d,p),r=this.decode(t);l.text=r,a&&(l.words=this.collateWordTimestamps(t,n,o)),c.push(l)}let y=Object.create(null);const v=c.map((t=>t.text)).join("");if(e||n){for(let t=0;t<c.length;++t){const r=c[t];e||delete r.timestamp,n||delete r.language}if(a){const t=[];for(const e of c)for(const n of e.words)t.push(n);y={chunks:t}}else y={chunks:c}}return[v,y]}findLongestCommonSequence(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t[0],r=n.length,i=[];const o=Array.isArray(e)&&e.length>0;let a=o?[]:null,s=o?e[0]:null;for(let c=1;c<t.length;++c){const l=t[c];let u=0,h=[r,r,0,0];const d=l.length;for(let t=1;t<r+d;++t){const e=t/1e4,i=Math.max(0,r-t),o=Math.min(r,r+d-t),a=n.slice(i,o),s=Math.max(0,t-r),c=Math.min(d,t),p=l.slice(s,c);if(a.length!==p.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");const f=a.filter(((t,e)=>t===p[e])).length,m=f/t+e;f>1&&m>u&&(u=m,h=[i,o,s,c])}const[p,f,m,g]=h,y=Math.floor((f+p)/2),v=Math.floor((g+m)/2);i.push(...n.slice(0,y)),n=l.slice(v),r=n.length,o&&(a.push(...s.slice(0,y)),s=e[c].slice(v))}return i.push(...n),o?(a.push(...s),[i,a]):[i,[]]}collateWordTimestamps(t,e,n){const[r,i,o]=this.combineTokensIntoWords(t,n),a=[];for(let s=0;s<r.length;++s){const t=o[s];a.push({text:r[s],timestamp:[e[t.at(0)][0],e[t.at(-1)][1]]})}return a}combineTokensIntoWords(t,e){var n;let r,i,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\"'\u201c\xa1\xbf([{-",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"\"'.\u3002,\uff0c!\uff01?\uff1f:\uff1a\u201d)]}\u3001";return e=null!==(n=e)&&void 0!==n?n:"english",["chinese","japanese","thai","lao","myanmar"].includes(e)?[r,i,o]=this.splitTokensOnUnicode(t):[r,i,o]=this.splitTokensOnSpaces(t),this.mergePunctuations(r,i,o,a,s)}decode(t,e){let n;return e&&e.decode_with_timestamps?(t instanceof ect&&(t=plt(t)),n=this.decodeWithTimestamps(t,e)):n=super.decode(t,e),n}decodeWithTimestamps(t,e){var n;const r=null!==(n=null===e||void 0===e?void 0:e.time_precision)&&void 0!==n?n:.02,i=Array.from(this.all_special_ids).at(-1)+1;let o=[[]];for(const a of t)if(a>=i){const t=$st((a-i)*r,2);o.push("<|".concat(t,"|>")),o.push([])}else o[o.length-1].push(a);return o=o.map((t=>"string"===typeof t?t:super.decode(t,e))),o.join("")}splitTokensOnUnicode(t){const e=this.decode(t,{decode_with_timestamps:!0}),n=[],r=[],i=[];let o=[],a=[],s=0;for(let c=0;c<t.length;++c){const l=t[c];o.push(l),a.push(c);const u=this.decode(o,{decode_with_timestamps:!0});u.includes("\ufffd")&&"\ufffd"!==e[s+u.indexOf("\ufffd")]||(n.push(u),r.push(o),i.push(a),o=[],a=[],s+=u.length)}return[n,r,i]}splitTokensOnSpaces(t){const[e,n,r]=this.splitTokensOnUnicode(t),i=[],o=[],a=[],s=new RegExp("^[".concat(glt,"]$"),"gu");for(let c=0;c<e.length;++c){const t=e[c],l=n[c],u=r[c],h=l[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),d=t.startsWith(" "),p=t.trim(),f=s.test(p);if(h||d||f||0===i.length)i.push(t),o.push(l),a.push(u);else{const e=i.length-1;i[e]+=t,o[e].push(...l),a[e].push(...u)}}return[i,o,a]}mergePunctuations(t,e,n,r,i){const o=structuredClone(t),a=structuredClone(e),s=structuredClone(n);let c=o.length-2,l=o.length-1;for(;c>=0;)o[c].startsWith(" ")&&r.includes(o[c].trim())?(o[l]=o[c]+o[l],a[l]=ast(a[c],a[l]),s[l]=ast(s[c],s[l]),o[c]="",a[c]=[],s[c]=[]):l=c,--c;for(c=0,l=1;l<o.length;)!o[c].endsWith(" ")&&i.includes(o[l])?(o[c]+=o[l],a[c]=ast(a[c],a[l]),s[c]=ast(s[c],s[l]),o[l]="",a[l]=[],s[l]=[]):c=l,++l;return[o.filter((t=>t)),a.filter((t=>t.length>0)),s.filter((t=>t.length>0))]}get_decoder_prompt_ids(){let{language:t=null,task:e=null,no_timestamps:n=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=[];if(t){t=t.toLowerCase();let e=Tut.get(t);if(void 0===e){if(!Sut.has(t)){const e=2===t.length?Sut.keys():Sut.values();throw new Error('Language "'.concat(t,'" is not supported. Must be one of: ').concat(JSON.stringify(e)))}e=t}const n=this.model.tokens_to_ids.get("<|".concat(e,"|>"));if(void 0===n)throw new Error('Unable to find language "'.concat(e,'" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.'));r.push(n)}else r.push(null);if(e){if(e=e.toLowerCase(),"transcribe"!==e&&"translate"!==e)throw new Error('Task "'.concat(e,'" is not supported. Must be one of: ["transcribe", "translate"]'));const t=this.model.tokens_to_ids.get("<|".concat(e,"|>"));if(void 0===t)throw new Error('Unable to find task "'.concat(e,'" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.'));r.push(t)}else r.push(null);if(n){const t=this.model.tokens_to_ids.get("<|notimestamps|>");if(void 0===t)throw new Error('Unable to find "<|notimestamps|>" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.');r.push(t)}return r.map(((t,e)=>[e+1,t])).filter((t=>null!==t[1]))}},CodeGenTokenizer:class extends gut{},CLIPTokenizer:class extends gut{},SiglipTokenizer:class extends gut{},MarianTokenizer:class extends gut{constructor(t,e){super(t,e),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter((t=>this.languageRegex.test(t))),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(t){if(null===t)return null;const[e,...n]=t.trim().split(this.languageRegex);if(0===n.length)return super._encode_text(e);if(2===n.length){const[t,e]=n;return this.supported_language_codes.includes(t)||console.warn('Unsupported language code "'.concat(t,'" detected, which may lead to unexpected behavior. Should be one of: ').concat(JSON.stringify(this.supported_language_codes))),ast([t],super._encode_text(e))}}},BloomTokenizer:class extends yut{constructor(t,e){var n;const r=".,!?\u2026\u3002\uff0c\u3001\u0964\u06d4\u060c",i=null===(n=t.pre_tokenizer)||void 0===n||null===(n=n.pretokenizers[0])||void 0===n?void 0:n.pattern;i&&i.Regex===" ?[^(\\s|[".concat(r,"])]+")&&(i.Regex=" ?[^\\s".concat(r,"]+")),super(t,e)}},NllbTokenizer:class extends gut{constructor(t,e){super(t,e),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter((t=>this.languageRegex.test(t))),this.lang_to_token=t=>t}_build_translation_inputs(t,e,n){return _ut(this,t,e,n)}},M2M100Tokenizer:class extends gut{constructor(t,e){super(t,e),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter((t=>this.languageRegex.test(t))).map((t=>t.slice(2,-2))),this.lang_to_token=t=>"__".concat(t,"__")}_build_translation_inputs(t,e,n){return _ut(this,t,e,n)}},LlamaTokenizer:xut,CodeLlamaTokenizer:class extends xut{},XLMRobertaTokenizer:class extends gut{},MPNetTokenizer:class extends gut{},FalconTokenizer:class extends gut{},GPTNeoXTokenizer:class extends gut{},EsmTokenizer:class extends gut{},Wav2Vec2CTCTokenizer:class extends gut{},BlenderbotTokenizer:Eut,BlenderbotSmallTokenizer:class extends Eut{},SpeechT5Tokenizer:class extends gut{},NougatTokenizer:class extends gut{},VitsTokenizer:class extends gut{constructor(t,e){super(t,e),this.decoder=new out({})}},Qwen2Tokenizer:class extends gut{},GemmaTokenizer:class extends gut{constructor(){super(...arguments),Qat(this,"_default_chat_template","{% if messages[0]['role'] == 'system' %}{{ raise_exception('System role not supported') }}{% endif %}{% for message in messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if (message['role'] == 'assistant') %}{% set role = 'model' %}{% else %}{% set role = message['role'] %}{% endif %}{{ '<start_of_turn>' + role + '\n' + message['content'] | trim + '<end_of_turn>\n' }}{% endfor %}{% if add_generation_prompt %}{{'<start_of_turn>model\n'}}{% endif %}")}},Grok1Tokenizer:class extends gut{},CohereTokenizer:class extends gut{},PreTrainedTokenizer:gut});class Mut{constructor(t){this.model_type=null,this.is_encoder_decoder=!1,Object.assign(this,t)}static async from_pretrained(t){let{progress_callback:e=null,config:n=null,cache_dir:r=null,local_files_only:i=!1,revision:o="main"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=null!==n&&void 0!==n?n:await async function(t,e){return await zst(t,"config.json",!0,e)}(t,{progress_callback:e,config:n,cache_dir:r,local_files_only:i,revision:o});return new this(a)}}class Out{static async from_pretrained(){return Mut.from_pretrained(...arguments)}}class Cut extends nst{constructor(){super(),this.processors=[]}push(t){this.processors.push(t)}extend(t){this.processors.push(...t)}_call(t,e){for(let n of e)this.processors.forEach((e=>e(t,n)))}[Symbol.iterator](){return this.processors.values()}}class kut extends nst{_call(t,e){throw Error("`_call` should be implemented in a subclass")}}class Put extends kut{constructor(t){super(),this.force_token_map=Object.fromEntries(null!==t&&void 0!==t?t:[])}_call(t,e){let n=this.force_token_map[t.length];var r;return void 0!==(r=n)&&null!==r&&(e.data.fill(-1/0),e.data[n]=0),e}}class Iut extends kut{constructor(t){super(),this.bos_token_id=t}_call(t,e){return 1===t.length&&(e.data.fill(-1/0),e.data[this.bos_token_id]=0),e}}class Nut extends kut{constructor(t,e){super(),this.max_length=t,this.forced_eos_token_id=e}_call(t,e){}}class Rut extends kut{constructor(t,e){super(),this.begin_suppress_tokens=t,this.begin_index=e}_call(t,e){if(t.length===this.begin_index)for(let n of this.begin_suppress_tokens)e.data[n]=-1/0;return e}}class Dut extends kut{constructor(t){super(),this.eos_token_id=t.eos_token_id,this.no_timestamps_token_id=t.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=(t.forced_decoder_ids||[]).length+2,t.forced_decoder_ids.slice(-1)[0][1]===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=t.max_initial_timestamp_index}_call(t,e){const n=e.data;if(n[this.no_timestamps_token_id]=-1/0,t.length===this.begin_index-1)return n.fill(-1/0),n[this.timestamp_begin]=0,e;const r=t.slice(this.begin_index),i=r.length>=1&&r[r.length-1]>=this.timestamp_begin,o=r.length<2||r[r.length-2]>=this.timestamp_begin;if(i&&(o?n.subarray(this.timestamp_begin).fill(-1/0):n.subarray(0,this.eos_token_id).fill(-1/0)),t.length===this.begin_index&&null!==this.max_initial_timestamp_index){const t=this.timestamp_begin+this.max_initial_timestamp_index;n.subarray(t+1).fill(-1/0)}const a=Gst(n).map((t=>Math.log(t)));const s=Math.log(a.subarray(this.timestamp_begin).map(Math.exp).reduce(((t,e)=>t+e)));return s>qst(a.subarray(0,this.timestamp_begin))[0]&&n.subarray(0,this.timestamp_begin).fill(-1/0),e}}class Lut extends kut{constructor(t){super(),this.no_repeat_ngram_size=t}getNgrams(t){const e=t.length,n=[];for(let o=0;o<e+1-this.no_repeat_ngram_size;++o){const e=[];for(let n=0;n<this.no_repeat_ngram_size;++n)e.push(t[o+n]);n.push(e)}const r=new Map;for(const o of n){var i;const t=o.slice(0,o.length-1),e=JSON.stringify(t),n=null!==(i=r.get(e))&&void 0!==i?i:[];n.push(o[o.length-1]),r.set(e,n)}return r}getGeneratedNgrams(t,e){var n;const r=e.slice(e.length+1-this.no_repeat_ngram_size,e.length);return null!==(n=t.get(JSON.stringify(r)))&&void 0!==n?n:[]}calcBannedNgramTokens(t){const e=[];if(t.length+1<this.no_repeat_ngram_size)return e;{const e=this.getNgrams(t);return this.getGeneratedNgrams(e,t)}}_call(t,e){const n=this.calcBannedNgramTokens(t);for(const r of n)e.data[r]=-1/0;return e}}class Fut extends kut{constructor(t){super(),this.penalty=t}_call(t,e){for(const n of t)e.data[n]<0?e.data[n]*=this.penalty:e.data[n]/=this.penalty;return e}}class jut extends kut{constructor(t,e){super(),this.min_length=t,this.eos_token_id=Array.isArray(e)?e:[e]}_call(t,e){if(t.length<this.min_length)for(const n of this.eos_token_id)e.data[n]=-1/0;return e}}class Uut extends kut{constructor(t,e,n){super(),this.prompt_length_to_skip=t,this.min_new_tokens=e,this.eos_token_id=Array.isArray(n)?n:[n]}_call(t,e){if(t.length-this.prompt_length_to_skip<this.min_new_tokens)for(const n of this.eos_token_id)e.data[n]=-1/0;return e}}class But extends kut{constructor(t,e){super(),this.bad_words_ids=t,this.eos_token_id=Array.isArray(e)?e:[e]}_call(t,e){for(const n of this.bad_words_ids){let r=!0;for(let e=1;e<=n.length-1&&n.length<t.length;++e)if(n.at(-e-1)!==t.at(-e)){r=!1;break}r&&(e.data[n.at(-1)]=-1/0)}return e}}const zut=class{constructor(){var t,e,n,r,i,o,a,s,c,l,u,h,d,p,f,m,g,y,v,b,x,_,w,S,T,E,A,M,O,C,k,P,I,N,R,D,L,F,j,U,B,z,V,G;let W=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.max_length=null!==(t=W.max_length)&&void 0!==t?t:20,this.max_new_tokens=null!==(e=W.max_new_tokens)&&void 0!==e?e:null,this.min_length=null!==(n=W.min_length)&&void 0!==n?n:0,this.min_new_tokens=null!==(r=W.min_new_tokens)&&void 0!==r?r:null,this.early_stopping=null!==(i=W.early_stopping)&&void 0!==i&&i,this.max_time=null!==(o=W.max_time)&&void 0!==o?o:null,this.do_sample=null!==(a=W.do_sample)&&void 0!==a&&a,this.num_beams=null!==(s=W.num_beams)&&void 0!==s?s:1,this.num_beam_groups=null!==(c=W.num_beam_groups)&&void 0!==c?c:1,this.penalty_alpha=null!==(l=W.penalty_alpha)&&void 0!==l?l:null,this.use_cache=null===(u=W.use_cache)||void 0===u||u,this.temperature=null!==(h=W.temperature)&&void 0!==h?h:1,this.top_k=null!==(d=W.top_k)&&void 0!==d?d:50,this.top_p=null!==(p=W.top_p)&&void 0!==p?p:1,this.typical_p=null!==(f=W.typical_p)&&void 0!==f?f:1,this.epsilon_cutoff=null!==(m=W.epsilon_cutoff)&&void 0!==m?m:0,this.eta_cutoff=null!==(g=W.eta_cutoff)&&void 0!==g?g:0,this.diversity_penalty=null!==(y=W.diversity_penalty)&&void 0!==y?y:0,this.repetition_penalty=null!==(v=W.repetition_penalty)&&void 0!==v?v:1,this.encoder_repetition_penalty=null!==(b=W.encoder_repetition_penalty)&&void 0!==b?b:1,this.length_penalty=null!==(x=W.length_penalty)&&void 0!==x?x:1,this.no_repeat_ngram_size=null!==(_=W.no_repeat_ngram_size)&&void 0!==_?_:0,this.bad_words_ids=null!==(w=W.bad_words_ids)&&void 0!==w?w:null,this.force_words_ids=null!==(S=W.force_words_ids)&&void 0!==S?S:null,this.renormalize_logits=null!==(T=W.renormalize_logits)&&void 0!==T&&T,this.constraints=null!==(E=W.constraints)&&void 0!==E?E:null,this.forced_bos_token_id=null!==(A=W.forced_bos_token_id)&&void 0!==A?A:null,this.forced_eos_token_id=null!==(M=W.forced_eos_token_id)&&void 0!==M?M:null,this.remove_invalid_values=null!==(O=W.remove_invalid_values)&&void 0!==O&&O,this.exponential_decay_length_penalty=null!==(C=W.exponential_decay_length_penalty)&&void 0!==C?C:null,this.suppress_tokens=null!==(k=W.suppress_tokens)&&void 0!==k?k:null,this.begin_suppress_tokens=null!==(P=W.begin_suppress_tokens)&&void 0!==P?P:null,this.forced_decoder_ids=null!==(I=W.forced_decoder_ids)&&void 0!==I?I:null,this.num_return_sequences=null!==(N=W.num_return_sequences)&&void 0!==N?N:1,this.output_attentions=null!==(R=W.output_attentions)&&void 0!==R&&R,this.output_hidden_states=null!==(D=W.output_hidden_states)&&void 0!==D&&D,this.output_scores=null!==(L=W.output_scores)&&void 0!==L&&L,this.return_dict_in_generate=null!==(F=W.return_dict_in_generate)&&void 0!==F&&F,this.pad_token_id=null!==(j=W.pad_token_id)&&void 0!==j?j:null,this.bos_token_id=null!==(U=W.bos_token_id)&&void 0!==U?U:null,this.eos_token_id=null!==(B=W.eos_token_id)&&void 0!==B?B:null,this.encoder_no_repeat_ngram_size=null!==(z=W.encoder_no_repeat_ngram_size)&&void 0!==z?z:0,this.decoder_start_token_id=null!==(V=W.decoder_start_token_id)&&void 0!==V?V:null,this.generation_kwargs=null!==(G=W.generation_kwargs)&&void 0!==G?G:{}}};class Vut extends nst{constructor(t){super(),this.generation_config=t}_call(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return this.sample(t,e)}sample(t,e){throw Error("sample should be implemented in subclasses.")}getLogits(t,e){let n=t.dims.at(-1),r=t.data;if(-1===e)r=r.slice(-n);else{let t=e*n;r=r.slice(t,t+n)}return this.generation_config.temperature>0&&(r=r.map((t=>t/this.generation_config.temperature))),r}randomSelect(t){let e=t.reduce(((t,e)=>t+e),0),n=Math.random()*e;for(let r=0;r<t.length;++r)if(n-=t[r],n<=0)return r;return 0}static getSampler(t){if(t.do_sample)return new Wut(t);if(t.num_beams>1)return new Hut(t);if(t.num_return_sequences>1)throw Error("num_return_sequences has to be 1 when doing greedy search, but is ".concat(t.num_return_sequences,"."));return new Gut(t)}}class Gut extends Vut{sample(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return[[qst(this.getLogits(t,e))[1],0]]}}class Wut extends Vut{sample(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=t.dims.at(-1);this.generation_config.top_k>0&&(n=Math.min(this.generation_config.top_k,n));const r=Wst(this.getLogits(t,e),n),i=Gst(r.map((t=>t[1])));return Array.from({length:this.generation_config.num_beams},(()=>{const t=this.randomSelect(i);return[r[t][0],Math.log(i[t])]}))}}class Hut extends Vut{sample(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=t.dims.at(-1);this.generation_config.top_k>0&&(n=Math.min(this.generation_config.top_k,n));const r=Wst(this.getLogits(t,e),n),i=Gst(r.map((t=>t[1])));return Array.from({length:this.generation_config.num_beams},((t,e)=>[r[e][0],Math.log(i[e])]))}}const{InferenceSession:qut,Tensor:Xut,env:Yut}=bst,Kut=0,Zut=1,Jut=2,$ut=3,Qut=4,tht=5,eht=new Map,nht=new Map,rht=new Map;async function iht(t,e,n){let r="onnx/".concat(e).concat(n.quantized?"_quantized":"",".onnx"),i=await Bst(t,r,!0,n);try{return await qut.create(i,{executionProviders:xst})}catch(cCt){if(1===xst.length&&"wasm"===xst[0])throw cCt;return console.warn(cCt),console.warn("Something went wrong during model construction (most likely a missing operation). Using `wasm` as a fallback. "),await qut.create(i,{executionProviders:["wasm"]})}}async function oht(t,e){const n=function(t,e){const n=Object.create(null),r=[];for(const a of t.inputNames){const t=e[a];t instanceof ect?n[a]=Yut.wasm.proxy?t.clone():t:r.push(a)}if(r.length>0)throw new Error('An error occurred during model execution: "Missing the following inputs: '.concat(r.join(", "),"."));const i=Object.keys(e).length,o=t.inputNames.length;if(i>o){let n=Object.keys(e).filter((e=>!t.inputNames.includes(e)));console.warn("WARNING: Too many inputs were provided (".concat(i," > ").concat(o,'). The following inputs will be ignored: "').concat(n.join(", "),'".'))}return n}(t,e);try{let e=await t.run(n);return e=aht(e),e}catch(sCt){throw console.error('An error occurred during model execution: "'.concat(sCt,'".')),console.error("Inputs given to model:",n),sCt}}function aht(t){for(let e in t)t[e]instanceof Xut?t[e]=new ect(t[e]):"object"===typeof t[e]&&aht(t[e]);return t}function sht(t){if(t instanceof ect)return t;if(0===t.length)throw Error("items must be non-empty");if(Array.isArray(t[0])){if(t.some((e=>e.length!==t[0].length)))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new ect("int64",BigInt64Array.from(t.flat().map((t=>BigInt(t)))),[t.length,t[0].length])}return new ect("int64",BigInt64Array.from(t.map((t=>BigInt(t)))),[1,t.length])}function cht(t,e){var n,r;let i=null!==(n=t.config.pad_token_id)&&void 0!==n?n:null,o=null!==(r=t.config.eos_token_id)&&void 0!==r?r:null;rst(o)&&(o=[o]);let a=-1!==e.indexOf(i),s=null===o||!o.includes(i);if(a&&s){let t=BigInt64Array.from(e.data.map((t=>t!=i)));return new ect("int64",t,e.dims)}return hct(e)}function lht(t,e,n){if(!t.inputNames.includes("position_ids"))return;const r=new BigInt64Array(e.attention_mask.data.length);for(let i=0;i<e.attention_mask.dims[0];++i){let t=i*e.attention_mask.dims[1],n=BigInt(0);for(let i=0;i<e.attention_mask.dims[1];++i){const o=t+i;0n===e.attention_mask.data[o]?r[o]=BigInt(1):(r[o]=n,n+=e.attention_mask.data[o])}}e.position_ids=new ect("int64",r,e.attention_mask.dims),n&&(e.position_ids=e.position_ids.slice(null,-1).unsqueeze_(-1))}function uht(t){return new ect("bool",[t],[1])}async function hht(t,e){let{encoder_outputs:n,past_key_values:r}=e;n||(n=(await mht(t,e)).last_hidden_state);let i={input_ids:e.decoder_input_ids,encoder_hidden_states:n};const o=!!r;t.decoder_merged_session.inputNames.includes("use_cache_branch")&&(i.use_cache_branch=uht(o)),t.decoder_merged_session.inputNames.includes("encoder_attention_mask")&&(i.encoder_attention_mask=e.attention_mask),lht(t.decoder_merged_session,i,o),t.addPastKeyValues(i,r);const a=await oht(t.decoder_merged_session,i);let s=a.logits;r=t.getPastKeyValues(a,r);const c=t.getAttentions(a);return new nft({logits:s,past_key_values:r,encoder_outputs:n,...c})}function dht(t,e,n,r){var i,o,a,s;let c=[],l=0;const u=null===(i=t.requires_attention_mask)||void 0===i||i;let h=null!==(o=null!==(a=null!==(s=n.decoder_input_ids)&&void 0!==s?s:n.decoder_start_token_id)&&void 0!==a?a:n.bos_token_id)&&void 0!==o?o:n.eos_token_id;h instanceof ect?h=h.tolist().flat():Array.isArray(h)||(h=[h]);for(let d of e){d.dims=[1,...d.dims];let e={inputs:d,encoder_outputs:null,prev_model_outputs:null,output_token_ids:h,done:!1,score:0,id:l++};u&&(e.attention_mask=cht(t,d)),c.push(e)}return c}async function pht(t,e){var n;const r=t.main_input_name;let i=e.output_token_ids;e.prev_model_outputs&&(i=i.slice(-1));let o={[r]:e.inputs,decoder_input_ids:sht(i),encoder_outputs:e.encoder_outputs,past_key_values:null===(n=e.prev_model_outputs)||void 0===n?void 0:n.past_key_values};e.attention_mask&&(o.attention_mask=e.attention_mask);let a=await t.forward(o);return e.prev_model_outputs=a,e.encoder_outputs=a.encoder_outputs,a}function fht(t,e){t.output_token_ids=[...t.output_token_ids,e]}async function mht(t,e){const n=Object.create(null);for(const r of t.session.inputNames)n[r]=e[r];return t.session.inputNames.includes("token_type_ids")&&!n.token_type_ids&&(n.token_type_ids=new ect("int64",new BigInt64Array(n.input_ids.data.length),n.input_ids.dims)),await oht(t.session,n)}async function ght(t,e){let{input_ids:n,past_key_values:r,attention_mask:i}=e,o={input_ids:n,attention_mask:null!==i&&void 0!==i?i:cht(t,n)};const a=!!r;t.session.inputNames.includes("use_cache_branch")&&(o.use_cache_branch=uht(a)),lht(t.session,o,a),t.addPastKeyValues(o,r);let s=await oht(t.session,o),c=s.logits;return r=t.getPastKeyValues(s,r),{logits:c,past_key_values:r}}function yht(t,e,n,r,i){let o=[],a=0;for(let s of e){let e,n=s.tolist().map(Number);s.dims=[1,...s.dims],i?(e=i[a],e.dims=[1,...e.dims]):e=cht(t,s);let c={input:s,model_input_ids:s,attention_mask:e,prev_model_outputs:null,output_token_ids:n,num_output_tokens:r,done:!1,score:0,id:a++};o.push(c)}return o}async function vht(t,e){var n;let r=new BigInt64Array(e.output_token_ids.length).fill(1n),i={input_ids:e.model_input_ids,attention_mask:new ect("int64",r,[1,r.length]),past_key_values:null===(n=e.prev_model_outputs)||void 0===n?void 0:n.past_key_values},o=await t.forward(i);return e.prev_model_outputs=o,o}function bht(t,e){t.output_token_ids=[...t.output_token_ids,e],t.model_input_ids=new ect("int64",[BigInt(e)],[1,1])}class xht extends nst{constructor(t,e){super(),Qat(this,"main_input_name","input_ids"),this.config=t,this.session=e;const n=rht.get(this.constructor),r=eht.get(n);this.can_generate=!1,this._runBeam=null,this._getStartBeams=null,this._updateBeam=null,this._forward=null,r===Qut?(this.can_generate=!0,this._runBeam=vht,this._getStartBeams=yht,this._updateBeam=bht,this._forward=ght):r===Jut||r===$ut?(this.can_generate=!0,this._runBeam=pht,this._getStartBeams=dht,this._updateBeam=fht,this._forward=hht):this._forward=mht}async dispose(){const t=[];for(let e of Object.keys(this)){const n=this[e];n instanceof qut&&t.push(n.handler.dispose())}return await Promise.all(t)}static async from_pretrained(t){let{quantized:e=!0,progress_callback:n=null,config:r=null,cache_dir:i=null,local_files_only:o=!1,revision:a="main",model_file_name:s=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c={quantized:e,progress_callback:n,config:r,cache_dir:i,local_files_only:o,revision:a,model_file_name:s};const l=rht.get(this),u=eht.get(l);let h;var d;if(u===Qut)h=await Promise.all([Out.from_pretrained(t,c),iht(t,null!==(d=c.model_file_name)&&void 0!==d?d:"decoder_model_merged",c),zst(t,"generation_config.json",!1,c)]);else if(u===Jut||u===$ut)h=await Promise.all([Out.from_pretrained(t,c),iht(t,"encoder_model",c),iht(t,"decoder_model_merged",c),zst(t,"generation_config.json",!1,c)]);else if(u===tht)h=await Promise.all([Out.from_pretrained(t,c),iht(t,"vision_encoder",c),iht(t,"prompt_encoder_mask_decoder",c)]);else if(u===Zut)h=await Promise.all([Out.from_pretrained(t,c),iht(t,"encoder_model",c),iht(t,"decoder_model_merged",c)]);else{var p;u!==Kut&&console.warn("Model type for '".concat(null!==l&&void 0!==l?l:null===r||void 0===r?void 0:r.model_type,"' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.")),h=await Promise.all([Out.from_pretrained(t,c),iht(t,null!==(p=c.model_file_name)&&void 0!==p?p:"model",c)])}return new this(...h)}async _call(t){return await this.forward(t)}async forward(t){return await this._forward(this,t)}_get_logits_processor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=new Cut;if(null!==t.repetition_penalty&&1!==t.repetition_penalty&&r.push(new Fut(t.repetition_penalty)),null!==t.no_repeat_ngram_size&&t.no_repeat_ngram_size>0&&r.push(new Lut(t.no_repeat_ngram_size)),null!==t.bad_words_ids&&r.push(new But(t.bad_words_ids,t.eos_token_id)),null!==t.min_length&&null!==t.eos_token_id&&t.min_length>0&&r.push(new jut(t.min_length,t.eos_token_id)),null!==t.min_new_tokens&&null!==t.eos_token_id&&t.min_new_tokens>0&&r.push(new Uut(e,t.min_new_tokens,t.eos_token_id)),null!==t.forced_bos_token_id&&r.push(new Iut(t.forced_bos_token_id)),null!==t.forced_eos_token_id&&r.push(new Nut(t.max_length,t.forced_eos_token_id)),null!==t.begin_suppress_tokens){let n=e>1||null===t.forced_bos_token_id?e:e+1;null!==t.forced_decoder_ids&&(n+=t.forced_decoder_ids[t.forced_decoder_ids.length-1][0]),r.push(new Rut(t.begin_suppress_tokens,n))}return null!==t.forced_decoder_ids&&r.push(new Put(t.forced_decoder_ids)),null!==n&&r.extend(n),r}_get_generation_config(t){let e=new zut(this.config);return"generation_config"in this&&Object.assign(e,this.generation_config),null!==t&&Object.assign(e,t),e}async generate(t){var e,n,r;let i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,{inputs_attention_mask:s=null}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!this.can_generate){var c,l,u;const t=rht.get(this.constructor);let e="The current model class (".concat(t,") is not compatible with `.generate()`, as it doesn't have a language model head.");const n=this.config.model_type,r=null!==(c=null!==(l=null!==(u=ppt.get(n))&&void 0!==u?u:dpt.get(n))&&void 0!==l?l:spt.get(n))&&void 0!==c?c:gpt.get(n);throw r&&(e+=" Please use the following class instead: '".concat(r[0],"'")),Error(e)}if(!(t instanceof ect)&&!function(t){var e;return"TypedArray"===(null===t||void 0===t||null===(e=t.prototype)||void 0===e||null===(e=e.__proto__)||void 0===e||null===(e=e.constructor)||void 0===e?void 0:e.name)}(t)&&!Array.isArray(t))throw Error('`inputs` must be a Tensor, TypedArray, or Array, but is "'.concat(t.constructor.name,'".'));if(this.config.is_encoder_decoder)i=0;else if(i=t instanceof ect?t.dims.at(-1):t.length,0===i)throw Error("Must supply a non-empty array of input token ids.");o=this._get_generation_config(o),a=null!==(e=a)&&void 0!==e?e:new Cut,a=this._get_logits_processor(o,i,a);let h=o.eos_token_id;null===h||Array.isArray(h)||(h=[h]);let d=1;const p=d+(null!==(n=o.max_new_tokens)&&void 0!==n?n:1/0),f=Number.isInteger(o.max_length)&&null===(null!==(r=o.max_new_tokens)&&void 0!==r?r:null);let m=Vut.getSampler(o),g=this.getStartBeams(t,o,d,s);for(;g.some((t=>!t.done))&&d<p;){let t=[];for(let e of g){if(e.done){t.push(e);continue}if(f&&e.output_token_ids.length>=o.max_length){e.done=!0,t.push(e);continue}let n=await this.runBeam(e);o.output_attentions&&this.addAttentionsToBeam(e,n),o.output_scores;let r=n.logits.slice(null,-1,null);a(e.output_token_ids,r);let i=m(r);for(let[o,a]of i){let n={...e};this.updateBeam(n,o),n.score+=a,h&&h.includes(o)&&(n.done=!0),t.push(n)}}++d,t=this.groupBeams(t).map((t=>t.sort(((t,e)=>e.score-t.score)).slice(0,o.num_beams))),g=t.flat(),o.callback_function&&o.callback_function(g)}const y=this.groupBeams(g),v=t=>y.map((e=>o.num_return_sequences>1?e.slice(0,o.num_return_sequences).map((e=>e[t])):[e[0][t]])).flat(),b=v("output_token_ids");if(o.return_dict_in_generate){return{sequences:b,decoder_attentions:v("decoder_attentions"),cross_attentions:v("cross_attentions")}}return b}addAttentionsToBeam(t,e){if(this.config.is_encoder_decoder){if(!e.cross_attentions||0===e.cross_attentions.length)throw Error("`output_attentions` is true, but the model did not produce cross-attentions. This is most likely because the model was not exported with `output_attentions=True`.");t.cross_attentions||(t.cross_attentions=[]),t.cross_attentions.push(e.cross_attentions)}if(!e.decoder_attentions||0===e.decoder_attentions.length)throw Error("`output_attentions` is true, but the model did not produce decoder-attentions. This is most likely because the model was not exported with `output_attentions=True`.");t.decoder_attentions||(t.decoder_attentions=[]),t.decoder_attentions.push(e.decoder_attentions)}groupBeams(t){const e=Object.create(null);for(const n of t)void 0===e[n.id]?e[n.id]=[n]:e[n.id].push(n);return Object.values(e)}getPastKeyValues(t,e){const n=Object.create(null);for(const r in t)if(r.startsWith("present")){let i=r.replace("present","past_key_values");e&&r.includes("encoder")?n[i]=e[i]:n[i]=t[r]}return n}getAttentions(t){const e=Object.create(null);for(const n of["cross_attentions","decoder_attentions"]){const r=[];for(const e in t)if(e.startsWith(n)){r[e.split(".").pop()]=t[e]}e[n]=r}return e}addPastKeyValues(t,e){if(e)Object.assign(t,e);else{var n;const e=1;if(this.config.is_encoder_decoder&&(null===(n=this.add_encoder_pkv)||void 0===n||n)){let n=[e,this.num_encoder_heads,0,this.encoder_dim_kv],r=[e,this.num_decoder_heads,0,this.decoder_dim_kv];for(let e=0;e<this.num_decoder_layers;++e)t["past_key_values.".concat(e,".encoder.key")]=new ect("float32",[],n),t["past_key_values.".concat(e,".encoder.value")]=new ect("float32",[],n),t["past_key_values.".concat(e,".decoder.key")]=new ect("float32",[],r),t["past_key_values.".concat(e,".decoder.value")]=new ect("float32",[],r)}else if("falcon"===this.config.model_type){let n=[e*this.num_heads,0,this.dim_kv];for(let e=0;e<this.num_layers;++e)t["past_key_values.".concat(e,".key")]=new ect("float32",[],n),t["past_key_values.".concat(e,".value")]=new ect("float32",[],n)}else if(this.config.multi_query){let n=[e*this.num_heads,0,2*this.dim_kv];for(let e=0;e<this.num_layers;++e)t["past_key_values.".concat(e,".key_value")]=new ect("float32",[],n)}else if("bloom"===this.config.model_type){let n=[e*this.num_heads,this.dim_kv,0],r=[e*this.num_heads,0,this.dim_kv];for(let e=0;e<this.num_layers;++e)t["past_key_values.".concat(e,".key")]=new ect("float32",[],n),t["past_key_values.".concat(e,".value")]=new ect("float32",[],r)}else{let n=[e,this.num_heads,0,this.dim_kv];for(let e=0;e<this.num_layers;++e)t["past_key_values.".concat(e,".key")]=new ect("float32",[],n),t["past_key_values.".concat(e,".value")]=new ect("float32",[],n)}}}getStartBeams(t,e,n,r){return this._getStartBeams(this,t,e,n,r)}async runBeam(t){return await this._runBeam(this,t)}updateBeam(t,e){return this._updateBeam(t,e)}}class _ht{}class wht extends xht{}class Sht extends xht{}class Tht extends xht{}class Eht extends xht{}class Aht extends xht{}class Mht extends xht{}class Oht extends xht{}class Cht extends xht{}class kht extends xht{}class Pht extends xht{}class Iht extends xht{}class Nht extends xht{}class Rht extends xht{}class Dht extends xht{}class Lht extends xht{}class Fht extends xht{}class jht extends xht{}class Uht extends xht{}class Bht extends xht{}class zht extends xht{}class Vht extends xht{}class Ght extends xht{}class Wht extends xht{}class Hht extends xht{}class qht extends xht{}class Xht extends xht{}class Yht extends xht{constructor(t,e,n,r){var i;super(t,e),Qat(this,"main_input_name","pixel_values"),this.decoder_merged_session=n,this.generation_config=r;const o=this.config.encoder,a=this.config.decoder,s=o.model_type;(null!==(i=ipt.get(s))&&void 0!==i?i:opt.get(s))||console.warn("Model type for encoder '".concat(s,"' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose."));const c=ppt.get(a.model_type);if(!c)throw new Error('Unable to construct `VisionEncoderDecoder` due to unsupported decoder: "'.concat(this.config.decoder.model_type,'"'));const l=new(0,c[1])(a,n,r);this.add_encoder_pkv="num_decoder_layers"in l,this.add_encoder_pkv?(this.num_decoder_layers=l.num_decoder_layers,this.num_decoder_heads=l.num_decoder_heads,this.decoder_dim_kv=l.decoder_dim_kv,this.num_encoder_layers=l.num_encoder_layers,this.num_encoder_heads=l.num_encoder_heads,this.encoder_dim_kv=l.encoder_dim_kv):(this.num_layers=l.num_layers,this.num_heads=l.num_heads,this.dim_kv=l.dim_kv)}}class Kht extends xht{}class Zht extends xht{}class Jht extends xht{}class $ht extends xht{}class Qht extends xht{constructor(t,e,n){super(t,e),this.generation_config=n,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class tdt extends xht{constructor(t,e,n){super(t,e),this.generation_config=n,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_heads,this.num_layers=this.config.num_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class edt extends xht{constructor(t,e,n){super(t,e),this.generation_config=n,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class ndt extends xht{constructor(t,e,n){super(t,e),this.generation_config=n,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class rdt extends xht{constructor(t,e,n){super(t,e),this.generation_config=n,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class idt extends xht{constructor(t,e,n){super(t,e),this.generation_config=n,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class odt extends xht{constructor(t,e,n){var r;super(t,e),this.generation_config=n,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=null!==(r=this.config.num_key_value_heads)&&void 0!==r?r:this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class adt extends xht{constructor(t,e,n){var r;super(t,e),this.generation_config=n,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=null!==(r=this.config.num_key_value_heads)&&void 0!==r?r:this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class sdt extends xht{constructor(t,e,n){super(t,e),this.generation_config=n,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class cdt extends xht{constructor(t,e,n){super(t,e),this.generation_config=n,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.hidden_size/this.num_heads}}class ldt extends xht{constructor(t,e,n){super(t,e),this.generation_config=n,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_heads,this.num_layers=this.config.n_layers,this.dim_kv=this.config.d_model/this.num_heads}}class udt extends xht{constructor(t,e,n){super(t,e),this.generation_config=n,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class hdt extends xht{}class ddt extends xht{}class pdt extends xht{}class fdt extends xht{}class mdt extends xht{}class gdt extends xht{}class ydt extends xht{}class vdt extends xht{}class bdt extends xht{}class xdt extends _ht{constructor(t){let{logits:e,pred_boxes:n}=t;super(),this.logits=e,this.pred_boxes=n}}class _dt extends _ht{constructor(t){let{logits:e,pred_boxes:n,pred_masks:r}=t;super(),this.logits=e,this.pred_boxes=n,this.pred_masks=r}}class wdt extends xht{}class Sdt extends xdt{}class Tdt extends xht{}class Edt extends xht{}class Adt extends xht{}class Mdt extends xht{}class Odt extends xht{}class Cdt extends xht{}class kdt extends xht{}class Pdt extends xht{}class Idt extends xht{}class Ndt extends xht{}class Rdt extends xht{}class Ddt extends xht{}class Ldt extends _ht{constructor(t){let{logits:e,pred_boxes:n}=t;super(),this.logits=e,this.pred_boxes=n}}class Fdt extends xht{}class jdt extends _ht{constructor(t){let{iou_scores:e,pred_masks:n}=t;super(),this.iou_scores=e,this.pred_masks=n}}class Udt extends xht{}class Bdt extends xht{}class zdt extends xht{}class Vdt extends xht{}class Gdt extends xht{}class Wdt extends xht{}class Hdt extends xht{}class qdt extends xht{}class Xdt extends xht{constructor(t,e,n){super(t,e),this.generation_config=n,this.config.pad_token_id=this.config.eos_token_id,this.num_encoder_layers=this.num_decoder_layers=this.config.decoder_layers,this.num_encoder_heads=this.num_decoder_heads=this.config.decoder_attention_heads,this.encoder_dim_kv=this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads}}class Ydt extends xht{constructor(t,e,n){super(t,e),this.generation_config=n,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Kdt extends xht{constructor(t,e,n){super(t,e),this.generation_config=n,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Zdt extends xht{constructor(t,e,n){super(t,e),this.generation_config=n,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Jdt extends xht{}class $dt extends xht{}class Qdt extends $dt{async _call(t){return new uft(await super._call(t))}}class tpt extends xht{}class ept extends xht{constructor(t,e,n){super(t,e),this.generation_config=n,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class npt extends xht{}class rpt{static async from_pretrained(t){let{quantized:e=!0,progress_callback:n=null,config:r=null,cache_dir:i=null,local_files_only:o=!1,revision:a="main",model_file_name:s=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c={quantized:e,progress_callback:n,config:r,cache_dir:i,local_files_only:o,revision:a,model_file_name:s};if(r=await Out.from_pretrained(t,c),c.config||(c.config=r),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);for(let l of this.MODEL_CLASS_MAPPINGS){const e=l.get(r.model_type);if(e)return await e[1].from_pretrained(t,c)}if(this.BASE_IF_FAIL)return console.warn('Unknown model class "'.concat(r.model_type,'", attempting to construct from base class.')),await xht.from_pretrained(t,c);throw Error("Unsupported model type: ".concat(r.model_type))}}Qat(rpt,"MODEL_CLASS_MAPPINGS",null),Qat(rpt,"BASE_IF_FAIL",!1);const ipt=new Map([["bert",["BertModel",class extends wht{}]],["nomic_bert",["NomicBertModel",class extends Sht{}]],["roformer",["RoFormerModel",class extends Tht{}]],["electra",["ElectraModel",class extends Aht{}]],["esm",["EsmModel",class extends Pht{}]],["convbert",["ConvBertModel",class extends Eht{}]],["camembert",["CamembertModel",class extends Mht{}]],["deberta",["DebertaModel",class extends Oht{}]],["deberta-v2",["DebertaV2Model",class extends Cht{}]],["mpnet",["MPNetModel",class extends Nht{}]],["albert",["AlbertModel",class extends Dht{}]],["distilbert",["DistilBertModel",class extends kht{}]],["roberta",["RobertaModel",class extends Ght{}]],["xlm",["XLMModel",class extends Wht{}]],["xlm-roberta",["XLMRobertaModel",class extends Hht{}]],["clap",["ClapModel",class extends Jdt{}]],["clip",["CLIPModel",class extends Kht{}]],["clipseg",["CLIPSegModel",class extends $ht{}]],["chinese_clip",["ChineseCLIPModel",class extends Jht{}]],["siglip",["SiglipModel",class extends Zht{}]],["mobilebert",["MobileBertModel",class extends Iht{}]],["squeezebert",["SqueezeBertModel",class extends Rht{}]],["wav2vec2",["Wav2Vec2Model",class extends zdt{}]],["wav2vec2-bert",["Wav2Vec2BertModel",class extends Wdt{}]],["unispeech",["UniSpeechModel",class extends Vdt{}]],["unispeech-sat",["UniSpeechSatModel",class extends Gdt{}]],["hubert",["HubertModel",class extends zdt{}]],["wavlm",["WavLMModel",class extends Hdt{}]],["audio-spectrogram-transformer",["ASTModel",class extends qht{}]],["vits",["VitsModel",Qdt]],["detr",["DetrModel",class extends bdt{}]],["table-transformer",["TableTransformerModel",class extends wdt{}]],["vit",["ViTModel",class extends hdt{}]],["fastvit",["FastViTModel",class extends ddt{}]],["mobilevit",["MobileViTModel",class extends fdt{}]],["mobilevitv2",["MobileViTV2Model",class extends mdt{}]],["owlvit",["OwlViTModel",class extends gdt{}]],["owlv2",["Owlv2Model",class extends ydt{}]],["beit",["BeitModel",class extends vdt{}]],["deit",["DeiTModel",class extends Tdt{}]],["convnext",["ConvNextModel",class extends Idt{}]],["convnextv2",["ConvNextV2Model",class extends Ndt{}]],["dinov2",["Dinov2Model",class extends Rdt{}]],["resnet",["ResNetModel",class extends Edt{}]],["swin",["SwinModel",class extends Adt{}]],["swin2sr",["Swin2SRModel",class extends Mdt{}]],["donut-swin",["DonutSwinModel",class extends Pdt{}]],["yolos",["YolosModel",class extends Ddt{}]],["dpt",["DPTModel",class extends Odt{}]],["glpn",["GLPNModel",class extends kdt{}]],["hifigan",["SpeechT5HifiGan",class extends xht{constructor(){super(...arguments),Qat(this,"main_input_name","spectrogram")}}]],["efficientnet",["EfficientNetModel",class extends npt{}]]]),opt=new Map([["t5",["T5Model",class extends Lht{}]],["longt5",["LongT5Model",class extends Fht{}]],["mt5",["MT5Model",class extends jht{}]],["bart",["BartModel",class extends Uht{}]],["mbart",["MBartModel",class extends Bht{}]],["marian",["MarianModel",class extends Udt{}]],["whisper",["WhisperModel",class extends Xht{}]],["m2m_100",["M2M100Model",class extends Bdt{}]],["blenderbot",["BlenderbotModel",class extends zht{}]],["blenderbot-small",["BlenderbotSmallModel",class extends Vht{}]]]),apt=new Map([["bloom",["BloomModel",class extends cdt{}]],["gpt2",["GPT2Model",class extends Qht{}]],["gptj",["GPTJModel",class extends ndt{}]],["gpt_bigcode",["GPTBigCodeModel",class extends rdt{}]],["gpt_neo",["GPTNeoModel",class extends tdt{}]],["gpt_neox",["GPTNeoXModel",class extends edt{}]],["codegen",["CodeGenModel",class extends idt{}]],["llama",["LlamaModel",class extends odt{}]],["qwen2",["Qwen2Model",class extends adt{}]],["phi",["PhiModel",class extends sdt{}]],["mpt",["MptModel",class extends ldt{}]],["opt",["OPTModel",class extends udt{}]],["mistral",["MistralModel",class extends Ydt{}]],["starcoder2",["Starcoder2Model",class extends Kdt{}]],["falcon",["FalconModel",class extends Zdt{}]]]),spt=new Map([["speecht5",["SpeechT5ForSpeechToText",class extends qdt{}]],["whisper",["WhisperForConditionalGeneration",class extends Xht{constructor(t,e,n,r){super(t,e),Qat(this,"requires_attention_mask",!1),Qat(this,"main_input_name","input_features"),this.decoder_merged_session=n,this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}async generate(t){var e,n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(r=this._get_generation_config(r),null!==(n=(e=r).return_timestamps)&&void 0!==n||(e.return_timestamps=!1),r.return_timestamps&&(i=[new Dut(r)]),r.return_token_timestamps&&(r.output_attentions=!0,r.return_dict_in_generate=!0,"translate"===r.task&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),!r.alignment_heads))throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");const o=await super.generate(t,r,i);return r.return_token_timestamps&&r.alignment_heads&&(o.token_timestamps=this._extract_token_timestamps(o,r.alignment_heads,r.num_frames)),o}_extract_token_timestamps(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.02;if(!t.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");let i=this.config.median_filter_width;void 0===i&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),i=7);const o=t.cross_attentions.map((t=>{let r=Array.from({length:this.config.decoder_layers},((e,n)=>act(t.map((t=>t[n])),2))),o=sct(e.map((t=>{let[e,i]=t;return n?r[e].slice(null,i,null,[0,n]):r[e].slice(null,i)})));o=o.transpose(1,0,2,3);let[a,s]=cct(o,-2,0,!0),c=o.clone();for(let e=0;e<c.dims[0];++e){let t=c[e];for(let n=0;n<t.dims[0];++n){let r=t[n];const o=a[e][n][0],c=s[e][n][0];for(let t=0;t<r.dims[0];++t){let e=r[t];for(let t=0;t<e.data.length;++t)e.data[t]=(e.data[t]-c.data[t])/o.data[t];e.data.set(Jst(e.data,i))}}}return lct(c,1)})),a=[t.sequences.length,t.sequences[0].length],s=new ect("float32",new Float32Array(a[0]*a[1]),a);for(let c=0;c<a[0];++c){const t=o[c].neg().squeeze_(0);let[e,n]=uct(t),i=Array.from({length:e.length-1},((t,n)=>e[n+1]-e[n])),a=ast([1],i).map((t=>!!t)),l=[];for(let o=0;o<a.length;++o)a[o]&&l.push(n[o]*r);s[c].data.set(l,1)}return s}}]]]),cpt=new Map([["speecht5",["SpeechT5ForTextToSpeech",class extends qdt{constructor(t,e,n,r){super(t,e),this.decoder_merged_session=n,this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.hidden_size/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.hidden_size/this.num_encoder_heads}async generate_speech(t,e){let{threshold:n=.5,minlenratio:r=0,maxlenratio:i=20,vocoder:o=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a={input_ids:t},{encoder_outputs:s,encoder_attention_mask:c}=await mht(this,a),l=s.dims[1]/this.config.reduction_factor,u=Math.floor(l*i),h=Math.floor(l*r),d=this.config.num_mel_bins;let p=[],f=null,m=null,g=0;for(;;){++g;const t=uht(!!m);let r;r=m?m.output_sequence_out:new ect("float32",new Float32Array(d),[1,1,d]);let i={use_cache_branch:t,output_sequence:r,encoder_attention_mask:c,speaker_embeddings:e,encoder_hidden_states:s};this.addPastKeyValues(i,f),m=await oht(this.decoder_merged_session,i),f=this.getPastKeyValues(m,f);const{prob:o,spectrum:a}=m;if(p.push(a),g>=h&&(Array.from(o.data).filter((t=>t>=n)).length>0||g>=u))break}const y=act(p),{waveform:v}=await oht(o.session,{spectrogram:y});return{spectrogram:y,waveform:v}}}]]]),lpt=new Map([["vits",["VitsModel",Qdt]]]),upt=new Map([["bert",["BertForSequenceClassification",class extends wht{async _call(t){return new rft(await super._call(t))}}]],["roformer",["RoFormerForSequenceClassification",class extends Tht{async _call(t){return new rft(await super._call(t))}}]],["electra",["ElectraForSequenceClassification",class extends Aht{async _call(t){return new rft(await super._call(t))}}]],["esm",["EsmForSequenceClassification",class extends Pht{async _call(t){return new rft(await super._call(t))}}]],["convbert",["ConvBertForSequenceClassification",class extends Eht{async _call(t){return new rft(await super._call(t))}}]],["camembert",["CamembertForSequenceClassification",class extends Mht{async _call(t){return new rft(await super._call(t))}}]],["deberta",["DebertaForSequenceClassification",class extends Oht{async _call(t){return new rft(await super._call(t))}}]],["deberta-v2",["DebertaV2ForSequenceClassification",class extends Cht{async _call(t){return new rft(await super._call(t))}}]],["mpnet",["MPNetForSequenceClassification",class extends Nht{async _call(t){return new rft(await super._call(t))}}]],["albert",["AlbertForSequenceClassification",class extends Dht{async _call(t){return new rft(await super._call(t))}}]],["distilbert",["DistilBertForSequenceClassification",class extends kht{async _call(t){return new rft(await super._call(t))}}]],["roberta",["RobertaForSequenceClassification",class extends Ght{async _call(t){return new rft(await super._call(t))}}]],["xlm",["XLMForSequenceClassification",class extends Wht{async _call(t){return new rft(await super._call(t))}}]],["xlm-roberta",["XLMRobertaForSequenceClassification",class extends Hht{async _call(t){return new rft(await super._call(t))}}]],["bart",["BartForSequenceClassification",class extends Uht{async _call(t){return new rft(await super._call(t))}}]],["mbart",["MBartForSequenceClassification",class extends Bht{async _call(t){return new rft(await super._call(t))}}]],["mobilebert",["MobileBertForSequenceClassification",class extends Iht{async _call(t){return new rft(await super._call(t))}}]],["squeezebert",["SqueezeBertForSequenceClassification",class extends Rht{async _call(t){return new rft(await super._call(t))}}]]]),hpt=new Map([["bert",["BertForTokenClassification",class extends wht{async _call(t){return new oft(await super._call(t))}}]],["roformer",["RoFormerForTokenClassification",class extends Tht{async _call(t){return new oft(await super._call(t))}}]],["electra",["ElectraForTokenClassification",class extends Aht{async _call(t){return new oft(await super._call(t))}}]],["esm",["EsmForTokenClassification",class extends Pht{async _call(t){return new oft(await super._call(t))}}]],["convbert",["ConvBertForTokenClassification",class extends Eht{async _call(t){return new oft(await super._call(t))}}]],["camembert",["CamembertForTokenClassification",class extends Mht{async _call(t){return new oft(await super._call(t))}}]],["deberta",["DebertaForTokenClassification",class extends Oht{async _call(t){return new oft(await super._call(t))}}]],["deberta-v2",["DebertaV2ForTokenClassification",class extends Cht{async _call(t){return new oft(await super._call(t))}}]],["mpnet",["MPNetForTokenClassification",class extends Nht{async _call(t){return new oft(await super._call(t))}}]],["distilbert",["DistilBertForTokenClassification",class extends kht{async _call(t){return new oft(await super._call(t))}}]],["roberta",["RobertaForTokenClassification",class extends Ght{async _call(t){return new oft(await super._call(t))}}]],["xlm",["XLMForTokenClassification",class extends Wht{async _call(t){return new oft(await super._call(t))}}]],["xlm-roberta",["XLMRobertaForTokenClassification",class extends Hht{async _call(t){return new oft(await super._call(t))}}]]]),dpt=new Map([["t5",["T5ForConditionalGeneration",class extends Lht{constructor(t,e,n,r){super(t,e),this.decoder_merged_session=n,this.generation_config=r,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}]],["longt5",["LongT5ForConditionalGeneration",class extends Fht{constructor(t,e,n,r){super(t,e),this.decoder_merged_session=n,this.generation_config=r,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}]],["mt5",["MT5ForConditionalGeneration",class extends jht{constructor(t,e,n,r){super(t,e),this.decoder_merged_session=n,this.generation_config=r,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}]],["bart",["BartForConditionalGeneration",class extends Uht{constructor(t,e,n,r){super(t,e),this.decoder_merged_session=n,this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}]],["mbart",["MBartForConditionalGeneration",class extends Bht{constructor(t,e,n,r){super(t,e),this.decoder_merged_session=n,this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}]],["marian",["MarianMTModel",class extends Udt{constructor(t,e,n,r){super(t,e),this.decoder_merged_session=n,this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}]],["m2m_100",["M2M100ForConditionalGeneration",class extends Bdt{constructor(t,e,n,r){super(t,e),this.decoder_merged_session=n,this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}]],["blenderbot",["BlenderbotForConditionalGeneration",class extends zht{constructor(t,e,n,r){super(t,e),this.decoder_merged_session=n,this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",class extends Vht{constructor(t,e,n,r){super(t,e),this.decoder_merged_session=n,this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}]]]),ppt=new Map([["bloom",["BloomForCausalLM",class extends cdt{}]],["gpt2",["GPT2LMHeadModel",class extends Qht{}]],["gptj",["GPTJForCausalLM",class extends ndt{}]],["gpt_bigcode",["GPTBigCodeForCausalLM",class extends rdt{}]],["gpt_neo",["GPTNeoForCausalLM",class extends tdt{}]],["gpt_neox",["GPTNeoXForCausalLM",class extends edt{}]],["codegen",["CodeGenForCausalLM",class extends idt{}]],["llama",["LlamaForCausalLM",class extends odt{}]],["qwen2",["Qwen2ForCausalLM",class extends adt{}]],["phi",["PhiForCausalLM",class extends sdt{}]],["mpt",["MptForCausalLM",class extends ldt{}]],["opt",["OPTForCausalLM",class extends udt{}]],["mbart",["MBartForCausalLM",class extends Bht{constructor(t,e,n){super(t,e),this.generation_config=n,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}]],["mistral",["MistralForCausalLM",class extends Ydt{}]],["starcoder2",["Starcoder2ForCausalLM",class extends Kdt{}]],["falcon",["FalconForCausalLM",class extends Zdt{}]],["trocr",["TrOCRForCausalLM",class extends Xdt{}]],["stablelm",["StableLmForCausalLM",class extends ept{}]]]),fpt=new Map([["bert",["BertForMaskedLM",class extends wht{async _call(t){return new aft(await super._call(t))}}]],["roformer",["RoFormerForMaskedLM",class extends Tht{async _call(t){return new aft(await super._call(t))}}]],["electra",["ElectraForMaskedLM",class extends Aht{async _call(t){return new aft(await super._call(t))}}]],["esm",["EsmForMaskedLM",class extends Pht{async _call(t){return new aft(await super._call(t))}}]],["convbert",["ConvBertForMaskedLM",class extends Eht{async _call(t){return new aft(await super._call(t))}}]],["camembert",["CamembertForMaskedLM",class extends Mht{async _call(t){return new aft(await super._call(t))}}]],["deberta",["DebertaForMaskedLM",class extends Oht{async _call(t){return new aft(await super._call(t))}}]],["deberta-v2",["DebertaV2ForMaskedLM",class extends Cht{async _call(t){return new aft(await super._call(t))}}]],["mpnet",["MPNetForMaskedLM",class extends Nht{async _call(t){return new aft(await super._call(t))}}]],["albert",["AlbertForMaskedLM",class extends Dht{async _call(t){return new aft(await super._call(t))}}]],["distilbert",["DistilBertForMaskedLM",class extends kht{async _call(t){return new aft(await super._call(t))}}]],["roberta",["RobertaForMaskedLM",class extends Ght{async _call(t){return new aft(await super._call(t))}}]],["xlm",["XLMWithLMHeadModel",class extends Wht{async _call(t){return new aft(await super._call(t))}}]],["xlm-roberta",["XLMRobertaForMaskedLM",class extends Hht{async _call(t){return new aft(await super._call(t))}}]],["mobilebert",["MobileBertForMaskedLM",class extends Iht{async _call(t){return new aft(await super._call(t))}}]],["squeezebert",["SqueezeBertForMaskedLM",class extends Rht{async _call(t){return new aft(await super._call(t))}}]]]),mpt=new Map([["bert",["BertForQuestionAnswering",class extends wht{async _call(t){return new sft(await super._call(t))}}]],["roformer",["RoFormerForQuestionAnswering",class extends Tht{async _call(t){return new sft(await super._call(t))}}]],["electra",["ElectraForQuestionAnswering",class extends Aht{async _call(t){return new sft(await super._call(t))}}]],["convbert",["ConvBertForQuestionAnswering",class extends Eht{async _call(t){return new sft(await super._call(t))}}]],["camembert",["CamembertForQuestionAnswering",class extends Mht{async _call(t){return new sft(await super._call(t))}}]],["deberta",["DebertaForQuestionAnswering",class extends Oht{async _call(t){return new sft(await super._call(t))}}]],["deberta-v2",["DebertaV2ForQuestionAnswering",class extends Cht{async _call(t){return new sft(await super._call(t))}}]],["mpnet",["MPNetForQuestionAnswering",class extends Nht{async _call(t){return new sft(await super._call(t))}}]],["albert",["AlbertForQuestionAnswering",class extends Dht{async _call(t){return new sft(await super._call(t))}}]],["distilbert",["DistilBertForQuestionAnswering",class extends kht{async _call(t){return new sft(await super._call(t))}}]],["roberta",["RobertaForQuestionAnswering",class extends Ght{async _call(t){return new sft(await super._call(t))}}]],["xlm",["XLMForQuestionAnswering",class extends Wht{async _call(t){return new sft(await super._call(t))}}]],["xlm-roberta",["XLMRobertaForQuestionAnswering",class extends Hht{async _call(t){return new sft(await super._call(t))}}]],["mobilebert",["MobileBertForQuestionAnswering",class extends Iht{async _call(t){return new sft(await super._call(t))}}]],["squeezebert",["SqueezeBertForQuestionAnswering",class extends Rht{async _call(t){return new sft(await super._call(t))}}]]]),gpt=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",Yht]]]),ypt=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",Yht]]]),vpt=new Map([["vit",["ViTForImageClassification",class extends hdt{async _call(t){return new rft(await super._call(t))}}]],["fastvit",["FastViTForImageClassification",class extends ddt{async _call(t){return new rft(await super._call(t))}}]],["mobilevit",["MobileViTForImageClassification",class extends fdt{async _call(t){return new rft(await super._call(t))}}]],["mobilevitv2",["MobileViTV2ForImageClassification",class extends mdt{async _call(t){return new rft(await super._call(t))}}]],["beit",["BeitForImageClassification",class extends vdt{async _call(t){return new rft(await super._call(t))}}]],["deit",["DeiTForImageClassification",class extends Tdt{async _call(t){return new rft(await super._call(t))}}]],["convnext",["ConvNextForImageClassification",class extends Idt{async _call(t){return new rft(await super._call(t))}}]],["convnextv2",["ConvNextV2ForImageClassification",class extends Ndt{async _call(t){return new rft(await super._call(t))}}]],["dinov2",["Dinov2ForImageClassification",class extends Rdt{async _call(t){return new rft(await super._call(t))}}]],["resnet",["ResNetForImageClassification",class extends Edt{async _call(t){return new rft(await super._call(t))}}]],["swin",["SwinForImageClassification",class extends Adt{async _call(t){return new rft(await super._call(t))}}]],["segformer",["SegformerForImageClassification",class extends tpt{}]],["efficientnet",["EfficientNetForImageClassification",class extends npt{async _call(t){return new rft(await super._call(t))}}]]]),bpt=new Map([["detr",["DetrForObjectDetection",class extends bdt{async _call(t){return new xdt(await super._call(t))}}]],["table-transformer",["TableTransformerForObjectDetection",class extends wdt{async _call(t){return new Sdt(await super._call(t))}}]],["yolos",["YolosForObjectDetection",class extends Ddt{async _call(t){return new Ldt(await super._call(t))}}]]]),xpt=new Map([["owlvit",["OwlViTForObjectDetection",class extends gdt{}]],["owlv2",["Owlv2ForObjectDetection",class extends ydt{}]]]),_pt=new Map([["detr",["DetrForSegmentation",class extends bdt{async _call(t){return new _dt(await super._call(t))}}]],["clipseg",["CLIPSegForImageSegmentation",class extends $ht{}]]]),wpt=new Map([["segformer",["SegformerForSemanticSegmentation",class extends tpt{}]]]),Spt=new Map([["sam",["SamModel",class extends Fdt{constructor(t,e,n){super(t,e),this.prompt_encoder_mask_decoder=n}async get_image_embeddings(t){let{pixel_values:e}=t;return await mht(this,{pixel_values:e})}async forward(t){if(t.image_embeddings&&t.image_positional_embeddings||(t={...t,...await this.get_image_embeddings(t)}),!t.input_labels){const e=t.input_points.dims.slice(0,-1),n=e.reduce(((t,e)=>t*e),1);t.input_labels=new ect("int64",new BigInt64Array(n).fill(1n),e)}return await oht(this.prompt_encoder_mask_decoder,{input_points:t.input_points,input_labels:t.input_labels,image_embeddings:t.image_embeddings,image_positional_embeddings:t.image_positional_embeddings})}async _call(t){return new jdt(await super._call(t))}}]]]),Tpt=new Map([["wav2vec2",["Wav2Vec2ForCTC",class extends zdt{async _call(t){return new cft(await super._call(t))}}]],["wav2vec2-bert",["Wav2Vec2BertForCTC",class extends Wdt{async _call(t){return new cft(await super._call(t))}}]],["unispeech",["UniSpeechForCTC",class extends Vdt{async _call(t){return new cft(await super._call(t))}}]],["unispeech-sat",["UniSpeechSatForCTC",class extends Gdt{async _call(t){return new cft(await super._call(t))}}]],["wavlm",["WavLMForCTC",class extends Hdt{async _call(t){return new cft(await super._call(t))}}]],["hubert",["HubertForCTC",class extends zdt{async _call(t){return new cft(await super._call(t))}}]]]),Ept=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",class extends zdt{async _call(t){return new rft(await super._call(t))}}]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",class extends Wdt{async _call(t){return new rft(await super._call(t))}}]],["unispeech",["UniSpeechForSequenceClassification",class extends Vdt{async _call(t){return new rft(await super._call(t))}}]],["unispeech-sat",["UniSpeechSatForSequenceClassification",class extends Gdt{async _call(t){return new rft(await super._call(t))}}]],["wavlm",["WavLMForSequenceClassification",class extends Hdt{async _call(t){return new rft(await super._call(t))}}]],["hubert",["HubertForSequenceClassification",class extends zdt{async _call(t){return new rft(await super._call(t))}}]],["audio-spectrogram-transformer",["ASTForAudioClassification",class extends qht{}]]]),Apt=new Map([["wavlm",["WavLMForXVector",class extends Hdt{async _call(t){return new ift(await super._call(t))}}]]]),Mpt=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",class extends Gdt{async _call(t){return new oft(await super._call(t))}}]],["wavlm",["WavLMForAudioFrameClassification",class extends Hdt{async _call(t){return new oft(await super._call(t))}}]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",class extends zdt{async _call(t){return new oft(await super._call(t))}}]]]),Opt=new Map([["vitmatte",["VitMatteForImageMatting",class extends pdt{async _call(t){return new lft(await super._call(t))}}]]]),Cpt=new Map([["swin2sr",["Swin2SRForImageSuperResolution",class extends Mdt{}]]]),kpt=new Map([["dpt",["DPTForDepthEstimation",class extends Odt{}]],["depth_anything",["DepthAnythingForDepthEstimation",class extends Cdt{}]],["glpn",["GLPNForDepthEstimation",class extends kdt{}]]]),Ppt=new Map([["clip",["CLIPVisionModelWithProjection",class extends Kht{static async from_pretrained(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!==(e=n.model_file_name)&&void 0!==e||(n.model_file_name="vision_model"),super.from_pretrained(t,n)}}]],["siglip",["SiglipVisionModel",class extends Kht{static async from_pretrained(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!==(e=n.model_file_name)&&void 0!==e||(n.model_file_name="vision_model"),super.from_pretrained(t,n)}}]]]),Ipt=[[ipt,Kut],[opt,Zut],[apt,Qut],[upt,Kut],[hpt,Kut],[dpt,Jut],[spt,Jut],[ppt,Qut],[fpt,Kut],[mpt,Kut],[gpt,$ut],[vpt,Kut],[_pt,Kut],[wpt,Kut],[Opt,Kut],[Cpt,Kut],[kpt,Kut],[bpt,Kut],[xpt,Kut],[Spt,tht],[Tpt,Kut],[Ept,Kut],[cpt,Jut],[lpt,Kut],[Apt,Kut],[Mpt,Kut],[Ppt,Kut]];for(const[Set,lCt]of Ipt)for(const[t,e]of Set.values())eht.set(t,lCt),rht.set(e,t),nht.set(t,e);const Npt=[["CLIPTextModelWithProjection",class extends Kht{static async from_pretrained(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!==(e=n.model_file_name)&&void 0!==e||(n.model_file_name="text_model"),super.from_pretrained(t,n)}},Kut],["SiglipTextModel",class extends Zht{static async from_pretrained(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!==(e=n.model_file_name)&&void 0!==e||(n.model_file_name="text_model"),super.from_pretrained(t,n)}},Kut],["ClapTextModelWithProjection",class extends Jdt{static async from_pretrained(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!==(e=n.model_file_name)&&void 0!==e||(n.model_file_name="text_model"),super.from_pretrained(t,n)}},Kut],["ClapAudioModelWithProjection",class extends Jdt{static async from_pretrained(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!==(e=n.model_file_name)&&void 0!==e||(n.model_file_name="audio_model"),super.from_pretrained(t,n)}},Kut]];for(const[Set,lCt,uCt]of Npt)eht.set(Set,uCt),rht.set(lCt,Set),nht.set(Set,lCt);class Rpt extends rpt{}Qat(Rpt,"MODEL_CLASS_MAPPINGS",Ipt.map((t=>t[0]))),Qat(Rpt,"BASE_IF_FAIL",!0);class Dpt extends rpt{}Qat(Dpt,"MODEL_CLASS_MAPPINGS",[upt]);class Lpt extends rpt{}Qat(Lpt,"MODEL_CLASS_MAPPINGS",[hpt]);class Fpt extends rpt{}Qat(Fpt,"MODEL_CLASS_MAPPINGS",[dpt]);class jpt extends rpt{}Qat(jpt,"MODEL_CLASS_MAPPINGS",[spt]);class Upt extends rpt{}Qat(Upt,"MODEL_CLASS_MAPPINGS",[cpt]);class Bpt extends rpt{}Qat(Bpt,"MODEL_CLASS_MAPPINGS",[lpt]);class zpt extends rpt{}Qat(zpt,"MODEL_CLASS_MAPPINGS",[ppt]);class Vpt extends rpt{}Qat(Vpt,"MODEL_CLASS_MAPPINGS",[fpt]);class Gpt extends rpt{}Qat(Gpt,"MODEL_CLASS_MAPPINGS",[mpt]);class Wpt extends rpt{}Qat(Wpt,"MODEL_CLASS_MAPPINGS",[gpt]);class Hpt extends rpt{}Qat(Hpt,"MODEL_CLASS_MAPPINGS",[vpt]);class qpt extends rpt{}Qat(qpt,"MODEL_CLASS_MAPPINGS",[_pt]);class Xpt extends rpt{}Qat(Xpt,"MODEL_CLASS_MAPPINGS",[wpt]);class Ypt extends rpt{}Qat(Ypt,"MODEL_CLASS_MAPPINGS",[bpt]);class Kpt extends rpt{}Qat(Kpt,"MODEL_CLASS_MAPPINGS",[xpt]);Qat(class extends rpt{},"MODEL_CLASS_MAPPINGS",[Spt]);class Zpt extends rpt{}Qat(Zpt,"MODEL_CLASS_MAPPINGS",[Tpt]);class Jpt extends rpt{}Qat(Jpt,"MODEL_CLASS_MAPPINGS",[Ept]);Qat(class extends rpt{},"MODEL_CLASS_MAPPINGS",[Apt]);Qat(class extends rpt{},"MODEL_CLASS_MAPPINGS",[Mpt]);class $pt extends rpt{}Qat($pt,"MODEL_CLASS_MAPPINGS",[ypt]);Qat(class extends rpt{},"MODEL_CLASS_MAPPINGS",[Opt]);class Qpt extends rpt{}Qat(Qpt,"MODEL_CLASS_MAPPINGS",[Cpt]);class tft extends rpt{}Qat(tft,"MODEL_CLASS_MAPPINGS",[kpt]);class eft extends rpt{}Qat(eft,"MODEL_CLASS_MAPPINGS",[Ppt]);class nft extends _ht{constructor(t){let{logits:e,past_key_values:n,encoder_outputs:r,decoder_attentions:i=null,cross_attentions:o=null}=t;super(),this.logits=e,this.past_key_values=n,this.encoder_outputs=r,this.decoder_attentions=i,this.cross_attentions=o}}class rft extends _ht{constructor(t){let{logits:e}=t;super(),this.logits=e}}class ift extends _ht{constructor(t){let{logits:e,embeddings:n}=t;super(),this.logits=e,this.embeddings=n}}class oft extends _ht{constructor(t){let{logits:e}=t;super(),this.logits=e}}class aft extends _ht{constructor(t){let{logits:e}=t;super(),this.logits=e}}class sft extends _ht{constructor(t){let{start_logits:e,end_logits:n}=t;super(),this.start_logits=e,this.end_logits=n}}class cft extends _ht{constructor(t){let{logits:e}=t;super(),this.logits=e}}class lft extends _ht{constructor(t){let{alphas:e}=t;super(),this.alphas=e}}class uft extends _ht{constructor(t){let{waveform:e,spectrogram:n}=t;super(),this.waveform=e,this.spectrogram=n}}var hft=__webpack_require__(7806);const dft="undefined"!==typeof self,pft=dft&&"DedicatedWorkerGlobalScope"===self.constructor.name;let fft,mft,gft;if(dft)fft=(t,e)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(t,e)},gft=self.createImageBitmap,mft=self.ImageData;else{if(!hft)throw new Error("Unable to load image processing library.");gft=async t=>{const e=(await t.metadata()).channels;let{data:n,info:r}=await t.rotate().raw().toBuffer({resolveWithObject:!0});const i=new bft(new Uint8ClampedArray(n),r.width,r.height,r.channels);return void 0!==e&&e!==r.channels&&i.convert(e),i}}const yft={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},vft=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class bft{constructor(t,e,n,r){this.data=t,this.width=e,this.height=n,this.channels=r}get size(){return[this.width,this.height]}static async read(t){if(t instanceof bft)return t;if("string"===typeof t||t instanceof URL)return await this.fromURL(t);throw new Error("Unsupported input type: ".concat(typeof t))}static async fromURL(t){let e=await Fst(t);if(200!==e.status)throw new Error('Unable to read image from "'.concat(t,'" (').concat(e.status," ").concat(e.statusText,")"));let n=await e.blob();return this.fromBlob(n)}static async fromBlob(t){if(dft){let e=await gft(t);const n=fft(e.width,e.height).getContext("2d");return n.drawImage(e,0,0),new this(n.getImageData(0,0,e.width,e.height).data,e.width,e.height,4)}{let e=hft(await t.arrayBuffer());return await gft(e)}}static fromTensor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CHW";if(3!==t.dims.length)throw new Error("Tensor should have 3 dimensions, but has ".concat(t.dims.length," dimensions."));if("CHW"===e)t=t.transpose(1,2,0);else if("HWC"!==e)throw new Error("Unsupported channel format: ".concat(e));if(!(t.data instanceof Uint8ClampedArray||t.data instanceof Uint8Array))throw new Error("Unsupported tensor type: ".concat(t.type));switch(t.dims[2]){case 1:case 2:case 3:case 4:return new bft(t.data,t.dims[1],t.dims[0],t.dims[2]);default:throw new Error("Unsupported number of channels: ".concat(t.dims[2]))}}grayscale(){if(1===this.channels)return this;let t=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let e=0,n=0;e<this.data.length;e+=this.channels){const r=this.data[e],i=this.data[e+1],o=this.data[e+2];t[n++]=Math.round(.2989*r+.587*i+.114*o)}break;default:throw new Error("Conversion failed due to unsupported number of channels: ".concat(this.channels))}return this._update(t,this.width,this.height,1)}rgb(){if(3===this.channels)return this;let t=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let e=0,n=0;e<this.data.length;++e)t[n++]=this.data[e],t[n++]=this.data[e],t[n++]=this.data[e];break;case 4:for(let e=0,n=0;e<this.data.length;e+=4)t[n++]=this.data[e],t[n++]=this.data[e+1],t[n++]=this.data[e+2];break;default:throw new Error("Conversion failed due to unsupported number of channels: ".concat(this.channels))}return this._update(t,this.width,this.height,3)}rgba(){if(4===this.channels)return this;let t=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let e=0,n=0;e<this.data.length;++e)t[n++]=this.data[e],t[n++]=this.data[e],t[n++]=this.data[e],t[n++]=255;break;case 3:for(let e=0,n=0;e<this.data.length;e+=3)t[n++]=this.data[e],t[n++]=this.data[e+1],t[n++]=this.data[e+2],t[n++]=255;break;default:throw new Error("Conversion failed due to unsupported number of channels: ".concat(this.channels))}return this._update(t,this.width,this.height,4)}async resize(t,e){var n;let{resample:r=2}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null!==(n=yft[r])&&void 0!==n?n:r;if(dft){let n=this.channels,r=this.toCanvas();const i=fft(t,e).getContext("2d");return i.drawImage(r,0,0,t,e),new bft(i.getImageData(0,0,t,e).data,t,e,4).convert(n)}{let n=this.toSharp();switch(i){case"box":case"hamming":"box"!==i&&"hamming"!==i||(console.warn("Resampling method ".concat(i," is not yet supported. Using bilinear instead.")),i="bilinear");case"nearest":case"bilinear":case"bicubic":n=n.affine([t/this.width,0,0,e/this.height],{interpolator:i});break;case"lanczos":n=n.resize({width:t,height:e,fit:"fill",kernel:"lanczos3"});break;default:throw new Error("Resampling method ".concat(i," is not supported."))}return await gft(n)}}async pad(t){let[e,n,r,i]=t;if(e=Math.max(e,0),n=Math.max(n,0),r=Math.max(r,0),i=Math.max(i,0),0===e&&0===n&&0===r&&0===i)return this;if(dft){let t=this.channels,o=this.toCanvas(),a=this.width+e+n,s=this.height+r+i;const c=fft(a,s).getContext("2d");return c.drawImage(o,0,0,this.width,this.height,e,r,a,s),new bft(c.getImageData(0,0,a,s).data,a,s,4).convert(t)}{let t=this.toSharp().extend({left:e,right:n,top:r,bottom:i});return await gft(t)}}async crop(t){let[e,n,r,i]=t;if(e=Math.max(e,0),n=Math.max(n,0),r=Math.min(r,this.width-1),i=Math.min(i,this.height-1),0===e&&0===n&&r===this.width-1&&i===this.height-1)return this;const o=r-e+1,a=i-n+1;if(dft){const t=this.channels,r=this.toCanvas(),i=fft(o,a).getContext("2d");i.drawImage(r,e,n,o,a,0,0,o,a);return new bft(i.getImageData(0,0,o,a).data,o,a,4).convert(t)}{const t=this.toSharp().extract({left:e,top:n,width:o,height:a});return await gft(t)}}async center_crop(t,e){if(this.width===t&&this.height===e)return this;let n=(this.width-t)/2,r=(this.height-e)/2;if(dft){let i=this.channels,o=this.toCanvas();const a=fft(t,e).getContext("2d");let s=0,c=0,l=0,u=0;return n>=0?s=n:l=-n,r>=0?c=r:u=-r,a.drawImage(o,s,c,t,e,l,u,t,e),new bft(a.getImageData(0,0,t,e).data,t,e,4).convert(i)}{let i=this.toSharp();if(n>=0&&r>=0)i=i.extract({left:Math.floor(n),top:Math.floor(r),width:t,height:e});else if(n<=0&&r<=0){let o=Math.floor(-r),a=Math.floor(-n);i=i.extend({top:o,left:a,right:t-this.width-a,bottom:e-this.height-o})}else{let o=[0,0],a=0;r<0?(o[0]=Math.floor(-r),o[1]=e-this.height-o[0]):a=Math.floor(r);let s=[0,0],c=0;n<0?(s[0]=Math.floor(-n),s[1]=t-this.width-s[0]):c=Math.floor(n),i=i.extend({top:o[0],bottom:o[1],left:s[0],right:s[1]}).extract({left:c,top:a,width:t,height:e})}return await gft(i)}}async toBlob(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!dft)throw new Error("toBlob() is only supported in browser environments.");const n=this.toCanvas();return await n.convertToBlob({type:t,quality:e})}toTensor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CHW",e=new ect("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if("HWC"===t);else{if("CHW"!==t)throw new Error("Unsupported channel format: ".concat(t));e=e.permute(2,0,1)}return e}toCanvas(){if(!dft)throw new Error("toCanvas() is only supported in browser environments.");let t=this.clone().rgba(),e=fft(t.width,t.height),n=new mft(t.data,t.width,t.height);return e.getContext("2d").putImageData(n,0,0),e}_update(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.data=t,this.width=e,this.height=n,null!==r&&(this.channels=r),this}clone(){return new bft(this.data.slice(),this.width,this.height,this.channels)}convert(t){if(this.channels===t)return this;switch(t){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error("Conversion failed due to unsupported number of channels: ".concat(this.channels))}return this}async save(t){if(!dft){if(Nst.useFS){const e=this.toSharp();return await e.toFile(t)}throw new Error("Unable to save the image because filesystem is disabled in this environment.")}{var e;if(pft)throw new Error("Unable to save an image from a Web Worker.");const n=t.split(".").pop().toLowerCase(),r=null!==(e=vft.get(n))&&void 0!==e?e:"image/png",i=await this.toBlob(r),o=URL.createObjectURL(i),a=document.createElement("a");a.href=o,a.download=t,a.click(),a.remove()}}toSharp(){if(dft)throw new Error("toSharp() is only supported in server-side environments.");return hft(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}function xft(t){if(t<1)return new Float64Array;if(1===t)return new Float64Array([1]);const e=t-1,n=Math.PI/e,r=new Float64Array(t);for(let i=0;i<t;++i){const t=2*i-e;r[i]=.5+.5*Math.cos(n*t)}return r}const _ft={htk:t=>2595*Math.log10(1+t/700),kaldi:t=>1127*Math.log(1+t/700),slaney:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:27/Math.log(6.4);return t>=e?n+Math.log(t/e)*r:3*t/200}};function wft(t){const e=_ft[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"htk"];if(!e)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return"number"===typeof t?e(t):t.map((t=>e(t)))}const Sft={htk:t=>700*(10**(t/2595)-1),kaldi:t=>700*(Math.exp(t/1127)-1),slaney:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.log(6.4)/27;return t>=n?e*Math.exp(r*(t-n)):200*t/3}};function Tft(t,e,n){const r=(e-t)/(n-1);return Float64Array.from({length:n},((e,n)=>t+r*n))}function Eft(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"htk",s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(null!==o&&"slaney"!==o)throw new Error('norm must be one of null or "slaney"');const c=Tft(wft(n,a),wft(r,a),e+2);let l,u=function(t){const e=Sft[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"htk"];if(!e)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return"number"===typeof t?e(t):t.map((t=>e(t)))}(c,a);if(s){const e=i/(2*t);l=wft(Float64Array.from({length:t},((t,n)=>n*e)),a),u=c}else l=Tft(0,Math.floor(i/2),t);const h=function(t,e){const n=Float64Array.from({length:e.length-1},((t,n)=>e[n+1]-e[n])),r=Array.from({length:t.length},(()=>new Array(e.length)));for(let a=0;a<t.length;++a){const n=r[a];for(let r=0;r<e.length;++r)n[r]=e[r]-t[a]}const i=e.length-2,o=Array.from({length:i},(()=>new Array(t.length)));for(let a=0;a<t.length;++a){const t=r[a];for(let e=0;e<i;++e){const r=-t[e]/n[e],i=t[e+2]/n[e+1];o[e][a]=Math.max(0,Math.min(r,i))}}return o}(l,u);if(null!==o&&"slaney"===o)for(let d=0;d<e;++d){const e=h[d],n=2/(u[d+2]-u[d]);for(let r=0;r<t;++r)e[r]*=n}return h}function Aft(t,e,n,r,i){if(n<=0)throw new Error("reference must be greater than zero");if(r<=0)throw new Error("min_value must be greater than zero");n=Math.max(r,n);const o=Math.log10(n);for(let a=0;a<t.length;++a)t[a]=e*Math.log10(Math.max(r,t[a])-o);if(null!==i){if(i<=0)throw new Error("db_range must be greater than zero");const e=qst(t)[0]-i;for(let n=0;n<t.length;++n)t[n]=Math.max(t[n],e)}return t}function Mft(t,e,n,r){let{fft_length:i=null,power:o=1,center:a=!0,pad_mode:s="reflect",onesided:c=!0,preemphasis:l=null,mel_filters:u=null,mel_floor:h=1e-10,log_mel:d=null,reference:p=1,min_value:f=1e-10,db_range:m=null,remove_dc_offset:g=null,max_num_frames:y=null,do_pad:v=!0,transpose:b=!1}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const x=e.length;if(null===i&&(i=n),n>i)throw Error("frame_length (".concat(n,") may not be larger than fft_length (").concat(i,")"));if(x!==n)throw new Error("Length of the window (".concat(x,") must equal frame_length (").concat(n,")"));if(r<=0)throw new Error("hop_length must be greater than zero");if(null===o&&null!==u)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(a){if("reflect"!==s)throw new Error('pad_mode="'.concat(s,'" not implemented yet.'));const e=Math.floor((i-1)/2)+1;t=function(t,e,n){const r=new t.constructor(t.length+e+n),i=t.length-1;for(let o=0;o<t.length;++o)r[e+o]=t[o];for(let o=1;o<=e;++o)r[e-o]=t[cst(o,i)];for(let o=1;o<=n;++o)r[i+e+o]=t[cst(i-o,i)];return r}(t,e,e)}const _=Math.floor(1+Math.floor((t.length-n)/r)),w=c?Math.floor(i/2)+1:i;let S=_,T=_;null!==y&&(y>_?v&&(T=y):T=S=y);const E=new Zst(i),A=new Float64Array(i),M=new Float64Array(E.outputBufferSize),O=new Array(S);for(let I=0;I<S;++I){const i=I*r;for(let e=0;e<n;++e)A[e]=t[i+e];if(g){let t=0;for(let r=0;r<n;++r)t+=A[r];const e=t/n;for(let r=0;r<n;++r)A[r]-=e}if(null!==l){for(let t=n-1;t>=1;--t)A[t]-=l*A[t-1];A[0]*=1-l}for(let t=0;t<e.length;++t)A[t]*=e[t];E.realTransform(M,A);const o=new Array(w);for(let t=0;t<o.length;++t){const e=t<<1;o[t]=M[e]**2+M[e+1]**2}O[I]=o}if(null!==o&&2!==o){const t=2/o;for(let e=0;e<O.length;++e){const n=O[e];for(let e=0;e<n.length;++e)n[e]**=t}}const C=u.length,k=new Float32Array(C*T),P=b?[T,C]:[C,T];for(let I=0;I<C;++I){const t=u[I];for(let e=0;e<S;++e){const n=O[e];let r=0;for(let e=0;e<w;++e)r+=t[e]*n[e];k[b?e*C+I:I*S+e]=Math.max(h,r)}}if(null!==o&&null!==d){const t=Math.min(k.length,S*C);switch(d){case"log":for(let e=0;e<t;++e)k[e]=Math.log(k[e]);break;case"log10":for(let e=0;e<t;++e)k[e]=Math.log10(k[e]);break;case"dB":if(1===o)!function(t){Aft(t,20,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-5,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}(k,p,f,m);else{if(2!==o)throw new Error("Cannot use log_mel option '".concat(d,"' with power ").concat(o));!function(t){Aft(t,10,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-10,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}(k,p,f,m)}break;default:throw new Error("log_mel must be one of null, 'log', 'log10' or 'dB'. Got '".concat(d,"'"))}}return{data:k,dims:P}}function Oft(t,e){let{periodic:n=!0,frame_length:r=null,center:i=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=n?t+1:t;let a;switch(e){case"boxcar":a=new Float64Array(o).fill(1);break;case"hann":case"hann_window":a=xft(o);break;case"povey":a=xft(o).map((t=>Math.pow(t,.85)));break;default:throw new Error("Unknown window type ".concat(e,"."))}if(n&&(a=a.subarray(0,t)),null===r)return a;if(t>r)throw new Error("Length of the window (".concat(t,") may not be larger than frame_length (").concat(r,")"));return a}function Cft(t){let[e,n,r,i]=t;return[e-r/2,n-i/2,e+r/2,n+i/2]}function kft(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t.logits,o=t.pred_boxes,[a,s,c]=i.dims;if(null!==n&&n.length!==a)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let l=[];for(let u=0;u<a;++u){let t=null!==n?n[u]:null,a={boxes:[],classes:[],scores:[]},h=i[u],d=o[u];for(let n=0;n<s;++n){let i,o=h[n],s=[];if(r){i=o.sigmoid().data;for(let t=0;t<i.length;++t)i[t]>e&&s.push(t)}else{let t=qst(o.data)[1];if(t===c-1)continue;s.push(t),i=Gst(o.data)}for(const e of s){let r=d[n].data;r=Cft(r),null!==t&&(r=r.map(((e,n)=>e*t[(n+1)%2]))),a.boxes.push(r),a.classes.push(e),a.scores.push(i[e])}}l.push(a)}return l}function Pft(t,e){var n,r;if(!(t instanceof Float32Array||t instanceof Float64Array))throw new Error("".concat(e," expects input to be a Float32Array or a Float64Array, but got ").concat(null!==(n=null===t||void 0===t||null===(r=t.constructor)||void 0===r?void 0:r.name)&&void 0!==n?n:typeof t," instead. ")+"If using the feature extractor directly, remember to use `read_audio(url, sampling_rate)` to obtain the raw audio data of the file/url.")}function Ift(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i=t/e;let o=function(t){const e=Math.round(t);return Math.abs(t)%1===.5?e%2===0?e:e-1:e}(i)*e;return null!==r&&o>r&&(o=Math.floor(i)*e),o<n&&(o=Math.ceil(i)*e),o}function Nft(t,e){let[n,r]=t;return[Math.max(Math.floor(n/e),1)*e,Math.max(Math.floor(r/e),1)*e]}class Rft extends nst{constructor(t){super(),this.config=t}}class Dft extends Rft{constructor(t){var e,n,r,i,o,a,s,c;super(t),this.image_mean=null!==(e=this.config.image_mean)&&void 0!==e?e:this.config.mean,this.image_std=null!==(n=this.config.image_std)&&void 0!==n?n:this.config.std,this.resample=null!==(r=this.config.resample)&&void 0!==r?r:2,this.do_rescale=null===(i=this.config.do_rescale)||void 0===i||i,this.rescale_factor=null!==(o=this.config.rescale_factor)&&void 0!==o?o:1/255,this.do_normalize=this.config.do_normalize,this.do_resize=this.config.do_resize,this.do_thumbnail=this.config.do_thumbnail,this.size=this.config.size,this.size_divisibility=null!==(a=this.config.size_divisibility)&&void 0!==a?a:this.config.size_divisor,this.do_center_crop=this.config.do_center_crop,this.crop_size=this.config.crop_size,this.do_convert_rgb=null===(s=this.config.do_convert_rgb)||void 0===s||s,this.do_crop_margin=this.config.do_crop_margin,this.pad_size=this.config.pad_size,this.do_pad=this.config.do_pad,this.do_pad&&!this.pad_size&&this.size&&void 0!==this.size.width&&void 0!==this.size.height&&(this.pad_size=this.size),this.do_flip_channel_order=null!==(c=this.config.do_flip_channel_order)&&void 0!==c&&c}async thumbnail(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const r=t.height,i=t.width,o=e.height,a=e.width;let s=Math.min(r,o),c=Math.min(i,a);return s===r&&c===i?t:(r>i?c=Math.floor(i*s/r):i>r&&(s=Math.floor(r*c/i)),await t.resize(c,s,{resample:n}))}async crop_margin(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;const n=t.clone().grayscale(),r=Hst(n.data)[0],i=qst(n.data)[0]-r;if(0===i)return t;const o=e/255;let a=n.width,s=n.height,c=0,l=0;for(let u=0;u<n.height;++u){const t=u*n.width;for(let e=0;e<n.width;++e)(n.data[t+e]-r)/i<o&&(a=Math.min(a,e),s=Math.min(s,u),c=Math.max(c,e),l=Math.max(l,u))}return t=await t.crop([a,s,c,l])}pad_image(t,e,n){let{mode:r="constant",center:i=!1,constant_values:o=0}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const[a,s,c]=e;let l,u;if("number"===typeof n?(l=n,u=n):(l=n.width,u=n.height),l!==s||u!==a){const n=new Float32Array(l*u*c);if(Array.isArray(o))for(let t=0;t<n.length;++t)n[t]=o[t%c];else 0!==o&&n.fill(o);const[h,d]=i?[Math.floor((l-s)/2),Math.floor((u-a)/2)]:[0,0];for(let e=0;e<a;++e){const r=(e+d)*l,i=e*s;for(let e=0;e<s;++e){const o=(r+e+h)*c,a=(i+e)*c;for(let e=0;e<c;++e)n[o+e]=t[a+e]}}if("symmetric"===r){if(i)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const e=a-1,r=s-1;for(let i=0;i<u;++i){const o=i*l,u=cst(i,e)*s;for(let e=0;e<l;++e){if(i<a&&e<s)continue;const l=(o+e)*c,h=(u+cst(e,r))*c;for(let e=0;e<c;++e)n[l+e]=t[h+e]}}}t=n,e=[u,l,c]}return[t,e]}rescale(t){for(let e=0;e<t.length;++e)t[e]=this.rescale_factor*t[e]}get_resize_output_image_size(t,e){const[n,r]=t.size;let i,o;if(this.do_thumbnail){const{height:t,width:n}=e;i=Math.min(t,n)}else if(Number.isInteger(e)){var a;i=e,o=null!==(a=this.config.max_size)&&void 0!==a?a:i}else void 0!==e&&(i=e.shortest_edge,o=e.longest_edge);if(void 0!==i||void 0!==o){const t=void 0===i?1:Math.max(i/n,i/r),e=n*t,a=r*t,s=void 0===o?1:Math.min(o/e,o/a);let c=Math.floor(Number((e*s).toFixed(2))),l=Math.floor(Number((a*s).toFixed(2)));return void 0!==this.size_divisibility&&([c,l]=Nft([c,l],this.size_divisibility)),[c,l]}if(void 0!==e&&void 0!==e.width&&void 0!==e.height){let t=e.width,i=e.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let e=i/r,o=t/n;Math.abs(1-o)<Math.abs(1-e)?e=o:o=e,i=Ift(e*r,this.config.ensure_multiple_of),t=Ift(o*n,this.config.ensure_multiple_of)}return[t,i]}if(void 0!==this.size_divisibility)return Nft([n,r],this.size_divisibility);throw new Error("Could not resize image due to unsupported `this.size` option in config: ".concat(JSON.stringify(e)))}async resize(t){const[e,n]=this.get_resize_output_image_size(t,this.size);return await t.resize(e,n,{resample:this.resample})}async preprocess(t){let{do_normalize:e=null,do_pad:n=null,do_convert_rgb:r=null,do_convert_grayscale:i=null,do_flip_channel_order:o=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.do_crop_margin&&(t=await this.crop_margin(t));const[a,s]=t.size;if((null!==r&&void 0!==r?r:this.do_convert_rgb)?t=t.rgb():i&&(t=t.grayscale()),this.do_resize&&(t=await this.resize(t)),this.do_thumbnail&&(t=await this.thumbnail(t,this.size,this.resample)),this.do_center_crop){let e,n;Number.isInteger(this.crop_size)?(e=this.crop_size,n=this.crop_size):(e=this.crop_size.width,n=this.crop_size.height),t=await t.center_crop(e,n)}const c=[t.height,t.width];let l=Float32Array.from(t.data),u=[t.height,t.width,t.channels];if(this.do_rescale&&this.rescale(l),null!==e&&void 0!==e?e:this.do_normalize){let e=this.image_mean;Array.isArray(this.image_mean)||(e=new Array(t.channels).fill(e));let n=this.image_std;if(Array.isArray(this.image_std)||(n=new Array(t.channels).fill(e)),e.length!==t.channels||n.length!==t.channels)throw new Error("When set to arrays, the length of `image_mean` (".concat(e.length,") and `image_std` (").concat(n.length,") must match the number of channels in the image (").concat(t.channels,")."));for(let r=0;r<l.length;r+=t.channels)for(let i=0;i<t.channels;++i)l[r+i]=(l[r+i]-e[i])/n[i]}if(null!==n&&void 0!==n?n:this.do_pad)if(this.pad_size){const e=this.pad_image(l,[t.height,t.width,t.channels],this.pad_size);[l,u]=e}else if(this.size_divisibility){const[t,e]=Nft([u[1],u[0]],this.size_divisibility);[l,u]=this.pad_image(l,u,{width:t,height:e})}if(null!==o&&void 0!==o?o:this.do_flip_channel_order){if(3!==u[2])throw new Error("Flipping channel order is only supported for RGB images.");for(let t=0;t<l.length;t+=3){const e=l[t];l[t]=l[t+2],l[t+2]=e}}return{original_size:[s,a],reshaped_input_size:c,pixel_values:new ect("float32",l,u).permute(2,0,1)}}async _call(t){Array.isArray(t)||(t=[t]);const e=await Promise.all(t.map((t=>this.preprocess(t))));return{pixel_values:sct(e.map((t=>t.pixel_values)),0),original_sizes:e.map((t=>t.original_size)),reshaped_input_sizes:e.map((t=>t.reshaped_input_size))}}}class Lft extends Dft{}class Fft extends Dft{constructor(t){var e;super(t),this.crop_pct=null!==(e=this.config.crop_pct)&&void 0!==e?e:.875}async resize(t){var e;const n=null===(e=this.size)||void 0===e?void 0:e.shortest_edge;if(void 0===n)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(n<384){const e=Math.floor(n/this.crop_pct),[r,i]=this.get_resize_output_image_size(t,{shortest_edge:e});t=await t.resize(r,i,{resample:this.resample}),t=await t.center_crop(n,n)}else t=await t.resize(n,n,{resample:this.resample});return t}}class jft extends Dft{}class Uft extends Dft{post_process_object_detection(){return kft(...arguments)}}class Bft extends Dft{pad_image(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const[i,o,a]=e;let s=this.image_mean;Array.isArray(this.image_mean)||(s=new Array(a).fill(s));let c=this.image_std;Array.isArray(c)||(c=new Array(a).fill(s));const l=s.map(((t,e)=>-t/c[e]));return super.pad_image(t,e,n,{center:!0,constant_values:l,...r})}}class zft extends nst{constructor(t){super(),this.feature_extractor=t}async _call(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return await this.feature_extractor(t,...n)}}class Vft{static async from_pretrained(t){var e,n;let{progress_callback:r=null,config:i=null,cache_dir:o=null,local_files_only:a=!1,revision:s="main"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=null!==i&&void 0!==i?i:await zst(t,"preprocessor_config.json",!0,{progress_callback:r,config:i,cache_dir:o,local_files_only:a,revision:s}),l=null!==(e=c.feature_extractor_type)&&void 0!==e?e:c.image_processor_type,u=this.FEATURE_EXTRACTOR_CLASS_MAPPING[l];if(!u){if(void 0===c.size)throw new Error("Unknown Feature Extractor type: ".concat(l));console.warn('Feature extractor type "'.concat(l,'" not found, assuming ImageFeatureExtractor due to size parameter in config.')),u=Dft}return new(null!==(n=this.PROCESSOR_CLASS_MAPPING[c.processor_class])&&void 0!==n?n:zft)(new u(c))}}async function Gft(t){return Array.isArray(t)||(t=[t]),await Promise.all(t.map((t=>bft.read(t))))}async function Wft(t,e){return Array.isArray(t)||(t=[t]),await Promise.all(t.map((t=>"string"===typeof t||t instanceof URL?async function(t,e){if("undefined"===typeof AudioContext)throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const n=await(await Fst(t)).arrayBuffer(),r=new AudioContext({sampleRate:e});"undefined"===typeof e&&console.warn("No sampling rate provided, using default of ".concat(r.sampleRate,"Hz."));const i=await r.decodeAudioData(n);let o;if(2===i.numberOfChannels){const t=Math.sqrt(2),e=i.getChannelData(0),n=i.getChannelData(1);o=new Float32Array(e.length);for(let r=0;r<i.length;++r)o[r]=t*(e[r]+n[r])/2}else o=i.getChannelData(0);return o}(t,e):t instanceof Float64Array?new Float32Array(t):t)))}function Hft(t,e){e&&(t=t.map((t=>0|t)));const[n,r,i,o]=t;return{xmin:n,ymin:r,xmax:i,ymax:o}}Qat(Vft,"FEATURE_EXTRACTOR_CLASS_MAPPING",{ImageFeatureExtractor:Dft,WhisperFeatureExtractor:class extends Rft{constructor(t){var e,n;super(t),null!==(n=(e=this.config).mel_filters)&&void 0!==n||(e.mel_filters=Eft(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney")),this.window=Oft(this.config.n_fft,"hann")}_extract_fbank_features(t){const{data:e,dims:n}=Mft(t,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:this.config.nb_max_frames}),r=qst(e)[0];for(let i=0;i<e.length;++i)e[i]=(Math.max(e[i],r-8)+4)/4;return{data:e,dims:n}}async _call(t){let e;Pft(t,"WhisperFeatureExtractor"),t.length>this.config.n_samples?(console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),e=t.slice(0,this.config.n_samples)):(e=new Float32Array(this.config.n_samples),e.set(t));const{data:n,dims:r}=this._extract_fbank_features(e);return{input_features:new ect("float32",n,[1,...r])}}},ViTFeatureExtractor:class extends Dft{},MobileViTFeatureExtractor:jft,MobileViTImageProcessor:class extends jft{},OwlViTFeatureExtractor:Uft,Owlv2ImageProcessor:class extends Uft{},CLIPFeatureExtractor:class extends Dft{},ChineseCLIPFeatureExtractor:class extends Dft{},SiglipImageProcessor:class extends Dft{},ConvNextFeatureExtractor:Fft,ConvNextImageProcessor:class extends Fft{},SegformerFeatureExtractor:class extends Dft{post_process_semantic_segmentation(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=t.logits,r=n.dims[0];if(null!==e&&e.length!==r)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const i=[];for(let o=0;o<r;++o){const t=null!==e?e[o]:null;let r=n[o];null!==t&&(r=nct(r,t,"bilinear",!1));const[a,s]=null!==t&&void 0!==t?t:r.dims.slice(-2),c=new ect("int32",new Int32Array(a*s),[a,s]),l=r[0].data;for(let e=1;e<r.dims[0];++e){const t=r[e].data;for(let n=0;n<t.length;++n)t[n]>l[n]&&(l[n]=t[n],c.data[n]=e)}const u=new Array(r.dims[0]),h=c.data;for(let e=0;e<h.length;++e){const t=h[e];u[t]=t}const d=u.filter((t=>void 0!==t));i.push({segmentation:c,labels:d})}return i}},BitImageProcessor:class extends Dft{},DPTImageProcessor:class extends Lft{},DPTFeatureExtractor:Lft,GLPNFeatureExtractor:class extends Dft{},BeitFeatureExtractor:class extends Dft{},DeiTFeatureExtractor:class extends Dft{},DetrFeatureExtractor:class extends Dft{async _call(t){const e=await super._call(t),n=[e.pixel_values.dims[0],64,64],r=new ect("int64",new BigInt64Array(n.reduce(((t,e)=>t*e))).fill(1n),n);return{...e,pixel_mask:r}}post_process_object_detection(){return kft(...arguments)}remove_low_and_no_objects(t,e,n,r){let i=[],o=[],a=[];for(let s=0;s<t.dims[0];++s){let c=t[s],l=e[s],u=qst(c.data)[1];if(u===r)continue;let h=Gst(c.data)[u];h>n&&(i.push(l),o.push(h),a.push(u))}return[i,o,a]}check_segment_validity(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.8,o=[],a=0,s=0;for(let l=0;l<t.length;++l)t[l]===n&&(o.push(l),++a),e[n].data[l]>=r&&++s;let c=a>0&&s>0;if(c){c=a/s>i}return[c,o]}compute_segments(t,e,n,r,i){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,[a,s]=null!==o&&void 0!==o?o:t[0].dims,c=new ect("int32",new Int32Array(a*s),[a,s]),l=[];if(null!==o)for(let p=0;p<t.length;++p)t[p]=nct(t[p],o,"bilinear",!1);let u=new Int32Array(t[0].data.length),h=new Float32Array(t[0].data.length);for(let p=0;p<t.length;++p){let n=e[p];for(let e=0;e<t[p].data.length;++e)t[p].data[e]*=n,t[p].data[e]>h[e]&&(u[e]=p,h[e]=t[p].data[e])}let d=0;for(let p=0;p<n.length;++p){let o=n[p],[a,s]=this.check_segment_validity(u,t,p,r,i);if(a){++d;for(let t of s)c.data[t]=d;l.push({id:d,label_id:o,score:e[p]})}}return[c,l]}post_process_panoptic_segmentation(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;null===i&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),i=new Set);const a=t.logits,s=t.pred_masks.sigmoid();let[c,l,u]=a.dims;if(u-=1,null!==o&&o.length!==c)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let h=[];for(let d=0;d<c;++d){let t=null!==o?o[d]:null,c=a[d],l=s[d],[p,f,m]=this.remove_low_and_no_objects(c,l,e,u);if(0===m.length){let[e,n]=null!==t&&void 0!==t?t:l.dims.slice(-2),r=new ect("int32",new Int32Array(e*n).fill(-1),[e,n]);h.push({segmentation:r,segments_info:[]});continue}let[g,y]=this.compute_segments(p,f,m,n,r,i,t);h.push({segmentation:g,segments_info:y})}return h}post_process_instance_segmentation(){throw Error("Not implemented yet")}},YolosFeatureExtractor:class extends Dft{post_process_object_detection(){return kft(...arguments)}},DonutFeatureExtractor:Bft,NougatImageProcessor:class extends Bft{},EfficientNetImageProcessor:class extends Dft{constructor(t){var e;super(t),this.include_top=null===(e=this.config.include_top)||void 0===e||e,this.include_top&&(this.image_std=this.image_std.map((t=>t*t)))}},ViTImageProcessor:class extends Dft{},VitMatteImageProcessor:class extends Dft{async _call(t,e){Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]);const n=await Promise.all(t.map((t=>this.preprocess(t)))),r=await Promise.all(e.map((t=>this.preprocess(t,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})))),i=sct(n.map(((t,e)=>act([t.pixel_values,r[e].pixel_values],0))),0);return{pixel_values:i,original_sizes:n.map((t=>t.original_size)),reshaped_input_sizes:n.map((t=>t.reshaped_input_size))}}},SamImageProcessor:class extends Dft{reshape_input_points(t,e,n){let r=ist(t=structuredClone(t));if(3===r.length)r=[1,...r],t=[t];else if(4!==r.length)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let i=0;i<t.length;++i){let r=e[i],o=n[i],a=[o[0]/r[0],o[1]/r[1]];for(let e=0;e<t[i].length;++e)for(let n=0;n<t[i][e].length;++n)for(let r=0;r<t[i][e][n].length;++r)t[i][e][n][r]*=a[r]}return new ect("float32",Float32Array.from(t.flat(1/0)),r)}add_input_labels(t,e){let n=ist(t);if(2===n.length)n=[1,...n],t=[t];else if(3!==n.length)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(n.some(((t,n)=>t!==e.dims[n])))throw Error("The first ".concat(n.length," dimensions of 'input_points' and 'input_labels' must be the same."));return new ect("int64",t.flat(1/0).map(BigInt),n)}async _call(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=await super._call(t);if(e&&(r.input_points=this.reshape_input_points(e,r.original_sizes,r.reshaped_input_sizes)),n){if(!r.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");r.input_labels=this.add_input_labels(n,r.input_points)}return r}post_process_masks(t,e,n){var r;let{mask_threshold:i=0,binarize:o=!0,pad_size:a=null}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=[];a=null!==(r=a)&&void 0!==r?r:this.pad_size;const c=[a.height,a.width];for(let l=0;l<e.length;++l){const r=e[l],a=n[l],u=t[l],h=[];for(let t=0;t<u.dims[0];++t){let e=nct(u[t],c,"bilinear",!1);if(e=e.slice(null,[0,a[0]],[0,a[1]]),e=nct(e,r,"bilinear",!1),o){const t=new Uint8Array(e.data.length);for(let n=0;n<e.data.length;++n)e.data[n]>i&&(t[n]=1);e=new ect("bool",t,e.dims)}h.push(e)}s.push(sct(h))}return s}},Swin2SRImageProcessor:class extends Dft{pad_image(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const[i,o,a]=e;return super.pad_image(t,e,{width:o+(n-o%n)%n,height:i+(n-i%n)%n},{mode:"symmetric",center:!1,constant_values:-1,...r})}},Wav2Vec2FeatureExtractor:class extends Rft{_zero_mean_unit_var_norm(t){const e=t.reduce(((t,e)=>t+e),0),n=e/t.length,r=t.reduce(((t,e)=>t+(e-n)**2),0)/t.length;return t.map((t=>(t-n)/Math.sqrt(r+1e-7)))}async _call(t){Pft(t,"Wav2Vec2FeatureExtractor"),t instanceof Float64Array&&(t=new Float32Array(t));let e=t;this.config.do_normalize&&(e=this._zero_mean_unit_var_norm(e));const n=[1,e.length];return{input_values:new ect("float32",e,n),attention_mask:new ect("int64",new BigInt64Array(e.length).fill(1n),n)}}},SeamlessM4TFeatureExtractor:class extends Rft{constructor(t){super(t);const e=this.config.sampling_rate,n=Eft(256,this.config.num_mel_bins,20,Math.floor(e/2),e,null,"kaldi",!0);for(let r=0;r<n.length;++r)n[r].push(0);this.mel_filters=n,this.window=Oft(400,"povey",{periodic:!1})}_extract_fbank_features(t,e){return Mft(t=t.map((t=>32768*t)),this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1.192092955078125e-7,remove_dc_offset:!0,max_num_frames:e,transpose:!0})}async _call(t){let{padding:e=!0,pad_to_multiple_of:n=2,do_normalize_per_mel_bins:r=!0,return_attention_mask:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pft(t,"SeamlessM4TFeatureExtractor");let o,a=this._extract_fbank_features(t,this.config.max_length);if(r){const[t,e]=a.dims;for(let n=0;n<e;++n){let r=0;for(let c=0;c<t;++c)r+=a.data[c*e+n];const i=r/t;let o=0;for(let c=0;c<t;++c)o+=(a.data[c*e+n]-i)**2;o/=t-1;const s=Math.sqrt(o+1e-7);for(let c=0;c<t;++c){const t=c*e+n;a.data[t]=(a.data[t]-i)/s}}}if(e){const[t,e]=a.dims,r=t%n;if(r>0){const n=new Float32Array(e*(t+r));n.set(a.data),n.fill(this.config.padding_value,a.data.length);const s=t+r;a={data:n,dims:[s,e]},i&&(o=new ect("int64",new BigInt64Array(s),[1,s]),o.data.fill(1n,0,t))}}const[s,c]=a.dims,l=this.config.stride;if(0!==s%l)throw new Error("The number of frames (".concat(s,") must be a multiple of the stride (").concat(l,")."));const u=new ect("float32",a.data,a.dims).view(1,Math.floor(s/l),c*l),h={input_features:u};if(i){const t=u.dims[1],e=new ect("int64",new BigInt64Array(t),[1,t]);if(o)for(let n=1,r=0;n<s;n+=l,++r)e.data[r]=o.data[n];else e.data.fill(1n);h.attention_mask=e}return h}},SpeechT5FeatureExtractor:class extends Rft{},ASTFeatureExtractor:class extends Rft{constructor(t){super(t);const e=this.config.sampling_rate,n=Eft(256,this.config.num_mel_bins,20,Math.floor(e/2),e,null,"kaldi",!0);for(let r=0;r<n.length;++r)n[r].push(0);this.mel_filters=n,this.window=Oft(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}_extract_fbank_features(t,e){return Mft(t,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1.192092955078125e-7,remove_dc_offset:!0,max_num_frames:e,transpose:!0})}async _call(t){Pft(t,"ASTFeatureExtractor");const e=this._extract_fbank_features(t,this.config.max_length);if(this.config.do_normalize){const t=2*this.std;for(let n=0;n<e.data.length;++n)e.data[n]=(e.data[n]-this.mean)/t}return{input_values:new ect("float32",e.data,[1,...e.dims])}}},ClapFeatureExtractor:class extends Rft{constructor(t){super(t),this.mel_filters=Eft(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=Eft(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=Oft(this.config.fft_window_size,"hann")}_get_input_mel(t,e,n,r){let i,o=!1;const a=t.length-e;if(a>0){if("rand_trunc"!==n)throw new Error('Truncation strategy "'.concat(n,'" not implemented'));{o=!0;const n=Math.floor(Math.random()*(a+1));t=t.subarray(n,n+e),i=this._extract_fbank_features(t,this.mel_filters_slaney,this.config.nb_max_samples),i.dims=[1,...i.dims]}}else{if(a<0){let n=new Float64Array(e);if(n.set(t),"repeat"===r)for(let r=t.length;r<e;r+=t.length)n.set(t.subarray(0,Math.min(t.length,e-r)),r);else if("repeatpad"===r)for(let e=t.length;e<-a;e+=t.length)n.set(t,e);t=n}if("fusion"===n)throw new Error('Truncation strategy "'.concat(n,'" not implemented'));i=this._extract_fbank_features(t,this.mel_filters_slaney,this.config.nb_max_samples),i.dims=[1,...i.dims]}return{...i,longer:o}}_extract_fbank_features(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Mft(t,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:e,log_mel:"dB",max_num_frames:n,do_pad:!1,transpose:!0})}async _call(t){let{max_length:e=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pft(t,"ClapFeatureExtractor");const n=this._get_input_mel(t,null!==e&&void 0!==e?e:this.config.nb_max_samples,this.config.truncation,this.config.padding);return{input_features:new ect("float32",n.data,[1,...n.dims])}}}}),Qat(Vft,"PROCESSOR_CLASS_MAPPING",{WhisperProcessor:class extends zft{async _call(t){return await this.feature_extractor(t)}},Wav2Vec2ProcessorWithLM:class extends zft{async _call(t){return await this.feature_extractor(t)}},SamProcessor:class extends zft{async _call(){return await this.feature_extractor(...arguments)}post_process_masks(){return this.feature_extractor.post_process_masks(...arguments)}reshape_input_points(){return this.feature_extractor.reshape_input_points(...arguments)}},SpeechT5Processor:class extends zft{async _call(t){return await this.feature_extractor(t)}},OwlViTProcessor:class extends zft{}});class qft extends nst{constructor(t){let{task:e,model:n,tokenizer:r=null,processor:i=null}=t;super(),this.task=e,this.model=n,this.tokenizer=r,this.processor=i}async dispose(){await this.model.dispose()}}class Xft extends qft{constructor(t){super(t),Qat(this,"_key","generated_text")}async _call(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Array.isArray(t)||(t=[t]),this.model.config.prefix&&(t=t.map((t=>this.model.config.prefix+t)));const n=this.model.config.task_specific_params;n&&n[this.task]&&n[this.task].prefix&&(t=t.map((t=>n[this.task].prefix+t)));const r=this.tokenizer,i={padding:!0,truncation:!0};let o;o=this instanceof Yft&&"_build_translation_inputs"in r?r._build_translation_inputs(t,i,e).input_ids:r(t,i).input_ids;const a=await this.model.generate(o,e);return r.batch_decode(a,{skip_special_tokens:!0}).map((t=>({[this._key]:t})))}}class Yft extends Xft{constructor(t){super(t),Qat(this,"_key","translation_text")}}function Kft(t){return Array.isArray(t)&&t.every((t=>"role"in t&&"content"in t))}const Zft=Object.freeze({"text-classification":{tokenizer:Aut,pipeline:class extends qft{constructor(t){super(t)}async _call(t){let{topk:e=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.tokenizer(t,{padding:!0,truncation:!0}),r=await this.model(n),i="multi_label_classification"===this.model.config.problem_type?t=>t.sigmoid().data:t=>Gst(t.data),o=this.model.config.id2label,a=[];for(const s of r.logits){const t=Wst(i(s),e).map((t=>({label:o[t[0]],score:t[1]})));1===e?a.push(...t):a.push(t)}return Array.isArray(t)||1===e?a:a[0]}},model:Dpt,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:Aut,pipeline:class extends qft{constructor(t){super(t)}async _call(t){let{ignore_labels:e=["O"]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Array.isArray(t),r=this.tokenizer(n?t:[t],{padding:!0,truncation:!0}),i=(await this.model(r)).logits,o=this.model.config.id2label,a=[];for(let s=0;s<i.dims[0];++s){const t=r.input_ids[s],n=i[s],c=[];for(let r=0;r<n.dims[0];++r){const i=n[r],a=qst(i.data)[1],s=o?o[a]:"LABEL_".concat(a);if(e.includes(s))continue;const l=this.tokenizer.decode([t[r].item()],{skip_special_tokens:!0});if(""===l)continue;const u=Gst(i.data);c.push({entity:s,score:u[a],index:r,word:l,start:null,end:null})}a.push(c)}return n?a:a[0]}},model:Lpt,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:Aut,pipeline:class extends qft{constructor(t){super(t)}async _call(t,e){let{topk:n=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.tokenizer(t,{text_pair:e,padding:!0,truncation:!0}),i=await this.model(r),o=[];for(let a=0;a<i.start_logits.dims[0];++a){const t=r.input_ids[a],e=t.indexOf(this.tokenizer.sep_token_id),s=Array.from(Gst(i.start_logits[a].data)).map(((t,e)=>[t,e])).filter((t=>t[1]>e)),c=Array.from(Gst(i.end_logits[a].data)).map(((t,e)=>[t,e])).filter((t=>t[1]>e)),l=sst(s,c).filter((t=>t[0][1]<=t[1][1])).map((t=>[t[0][1],t[1][1],t[0][0]*t[1][0]])).sort(((t,e)=>e[2]-t[2]));for(let r=0;r<Math.min(l.length,n);++r){const[e,n,i]=l[r],a=[...t].slice(e,n+1),s=this.tokenizer.decode(a,{skip_special_tokens:!0});o.push({answer:s,score:i})}}return 1===n?o[0]:o}},model:Gpt,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:Aut,pipeline:class extends qft{constructor(t){super(t)}async _call(t){let{topk:e=5}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.tokenizer(t,{padding:!0,truncation:!0}),r=await this.model(n),i=[];for(let o=0;o<n.input_ids.dims[0];++o){const t=n.input_ids[o],a=t.indexOf(this.tokenizer.mask_token_id);if(-1===a)throw Error("Mask token (".concat(this.tokenizer.mask_token,") not found in text."));const s=Wst(Gst(r.logits[o][a].data),e);i.push(s.map((e=>{const n=[...t];return n[a]=e[0],{score:e[1],token:e[0],token_str:this.tokenizer.model.vocab[e[0]],sequence:this.tokenizer.decode(n,{skip_special_tokens:!0})}})))}return Array.isArray(t)?i:i[0]}},model:Vpt,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:Aut,pipeline:class extends Xft{constructor(t){super(t),Qat(this,"_key","summary_text")}},model:Fpt,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:Aut,pipeline:Yft,model:Fpt,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:Aut,pipeline:Xft,model:Fpt,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:Aut,pipeline:class extends qft{constructor(t){super(t)}async _call(t){var e,n;let r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!1,a=!1;if("string"===typeof t)r=t=[t];else if(Array.isArray(t)&&t.every((t=>"string"===typeof t)))o=!0,r=t;else{if(Kft(t))t=[t];else{if(!Array.isArray(t)||!t.every(Kft))throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");o=!0}a=!0,r=t.map((t=>this.tokenizer.apply_chat_template(t,{tokenize:!1,add_generation_prompt:!0})))}const s=null!==(e=i.add_special_tokens)&&void 0!==e&&e,c=!a&&(null===(n=i.return_full_text)||void 0===n||n);this.tokenizer.padding_side="left";const{input_ids:l,attention_mask:u}=this.tokenizer(r,{add_special_tokens:s,padding:!0,truncation:!0}),h=await this.model.generate(l,i,null,{inputs_attention_mask:u});let d,p=this.tokenizer.batch_decode(h,{skip_special_tokens:!0});!c&&l.dims.at(-1)>0&&(d=this.tokenizer.batch_decode(l,{skip_special_tokens:!0}).map((t=>t.length)));const f=Array.from({length:t.length},(t=>[]));for(let m=0;m<p.length;++m){const e=Math.floor(m/h.length*t.length);d&&(p[m]=p[m].slice(d[e])),f[e].push({generated_text:a?[...t[e],{role:"assistant",content:p[m]}]:p[m]})}return o||1!==f.length?f:f[0]}},model:zpt,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:Aut,pipeline:class extends qft{constructor(t){var e;super(t),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map((t=>{let[e,n]=t;return[e.toLowerCase(),n]}))),this.entailment_id=this.label2id.entailment,void 0===this.entailment_id&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=null!==(e=this.label2id.contradiction)&&void 0!==e?e:this.label2id.not_entailment,void 0===this.contradiction_id&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(t,e){let{hypothesis_template:n="This example is {}.",multi_label:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=Array.isArray(t);i||(t=[t]),Array.isArray(e)||(e=[e]);const o=e.map((t=>n.replace("{}",t))),a=r||1===e.length,s=[];for(const c of t){const t=[];for(const e of o){const n=this.tokenizer(c,{text_pair:e,padding:!0,truncation:!0}),r=await this.model(n);a?t.push([r.logits.data[this.contradiction_id],r.logits.data[this.entailment_id]]):t.push(r.logits.data[this.entailment_id])}const n=(a?t.map((t=>Gst(t)[1])):Gst(t)).map(((t,e)=>[t,e])).sort(((t,e)=>e[0]-t[0]));s.push({sequence:c,labels:n.map((t=>e[t[1]])),scores:n.map((t=>t[0]))})}return i?s:s[0]}},model:Dpt,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:class extends qft{constructor(t){super(t)}async _call(t){let{topk:e=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=!Array.isArray(t),r=this.processor.feature_extractor.config.sampling_rate,i=await Wft(t,r),o=this.model.config.id2label,a=[];for(const s of i){const t=await this.processor(s),n=Wst(Gst((await this.model(t)).logits[0].data),e).map((t=>({label:o[t[0]],score:t[1]})));1===e?a.push(...n):a.push(n)}return n&&1!==e?a[0]:a}},model:Jpt,processor:Vft,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:Aut,pipeline:class extends qft{constructor(t){super(t)}async _call(t,e){let{hypothesis_template:n="This is a sound of {}."}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=!Array.isArray(t);r&&(t=[t]);const i=e.map((t=>n.replace("{}",t))),o=this.tokenizer(i,{padding:!0,truncation:!0}),a=this.processor.feature_extractor.config.sampling_rate,s=await Wft(t,a),c=[];for(const l of s){const t=await this.processor(l),n=Gst((await this.model({...o,...t})).logits_per_audio.data);c.push([...n].map(((t,n)=>({score:t,label:e[n]}))))}return r?c[0]:c}},model:Rpt,processor:Vft,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:Aut,pipeline:class extends qft{constructor(t){super(t)}async _call(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(this.model.config.model_type){case"whisper":return this._call_whisper(t,e);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(t,e);default:throw new Error("AutomaticSpeechRecognitionPipeline does not support model type '".concat(this.model.config.model_type,"'."))}}async _call_wav2vec2(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),e.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const n=!Array.isArray(t);n&&(t=[t]);const r=this.processor.feature_extractor.config.sampling_rate,i=await Wft(t,r),o=[];for(const a of i){const t=await this.processor(a),e=(await this.model(t)).logits[0],n=[];for(const i of e)n.push(qst(i.data)[1]);const r=this.tokenizer.decode(n);o.push({text:r})}return n?o[0]:o}async _call_whisper(t){var e,n,r,i,o;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=null!==(e=a.return_timestamps)&&void 0!==e&&e,c=null!==(n=a.chunk_length_s)&&void 0!==n?n:0,l=null!==(r=a.chunk_callback)&&void 0!==r?r:null,u=null!==(i=a.force_full_sequences)&&void 0!==i&&i;let h=null!==(o=a.stride_length_s)&&void 0!==o?o:null;"word"===s&&(a.return_token_timestamps=!0);const d=ost(a,"language",null),p=ost(a,"task",null);if(d||p||s){if(a.forced_decoder_ids)throw new Error("Cannot specify `language`/`task`/`return_timestamps` and `forced_decoder_ids` at the same time.");const t=this.tokenizer.get_decoder_prompt_ids({language:d,task:p,no_timestamps:!s});t.length>0&&(a.forced_decoder_ids=t)}const f=!Array.isArray(t);f&&(t=[t]);const m=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,g=this.processor.feature_extractor.config.hop_length,y=this.processor.feature_extractor.config.sampling_rate,v=await Wft(t,y),b=[];for(const x of v){let t=[];if(c>0){if(null===h)h=c/6;else if(c<=h)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const e=y*c,n=y*h,r=e-2*n;let i=0;for(;i<x.length;){const o=x.subarray(i,i+e),a=await this.processor(o),s=0===i,c=i+r>=x.length;t.push({stride:[o.length,s?0:n,c?0:n],input_features:a.input_features,is_last:c}),i+=r}}else t=[{stride:[x.length,0,0],input_features:(await this.processor(x)).input_features,is_last:!0}];for(const r of t){a.num_frames=Math.floor(r.stride[0]/g);const t=await this.model.generate(r.input_features,a);"word"===s?(r.tokens=t.sequences[0],r.token_timestamps=t.token_timestamps.tolist()[0].map((t=>$st(t,2)))):r.tokens=t[0],r.stride=r.stride.map((t=>t/y)),null!==l&&l(r)}const[e,n]=this.tokenizer._decode_asr(t,{time_precision:m,return_timestamps:s,force_full_sequences:u});b.push({text:e,...n})}return f?b[0]:b}},model:[jpt,Zpt],processor:Vft,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:Aut,pipeline:class extends qft{constructor(t){var e;super(t),Qat(this,"DEFAULT_VOCODER_ID","Xenova/speecht5_hifigan"),this.vocoder=null!==(e=t.vocoder)&&void 0!==e?e:null}async _call(t){let{speaker_embeddings:e=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processor?this._call_text_to_spectrogram(t,{speaker_embeddings:e}):this._call_text_to_waveform(t)}async _call_text_to_waveform(t){const e=this.tokenizer(t,{padding:!0,truncation:!0}),{waveform:n}=await this.model(e),r=this.model.config.sampling_rate;return{audio:n.data,sampling_rate:r}}async _call_text_to_spectrogram(t,e){let{speaker_embeddings:n}=e;if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await Rpt.from_pretrained(this.DEFAULT_VOCODER_ID,{quantized:!1})),("string"===typeof n||n instanceof URL)&&(n=new Float32Array(await(await fetch(n)).arrayBuffer())),n instanceof Float32Array)n=new ect("float32",n,[1,n.length]);else if(!(n instanceof ect))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:r}=this.tokenizer(t,{padding:!0,truncation:!0}),{waveform:i}=await this.model.generate_speech(r,n,{vocoder:this.vocoder}),o=this.processor.feature_extractor.config.sampling_rate;return{audio:i.data,sampling_rate:o}}},model:[Bpt,Upt],processor:[Vft,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:Aut,pipeline:class extends qft{constructor(t){super(t)}async _call(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Array.isArray(t),r=await Gft(t),{pixel_values:i}=await this.processor(r),o=[];for(const a of i){a.dims=[1,...a.dims];const t=await this.model.generate(a,e),n=this.tokenizer.batch_decode(t,{skip_special_tokens:!0}).map((t=>({generated_text:t.trim()})));o.push(n)}return n?o:o[0]}},model:Wpt,processor:Vft,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:class extends qft{constructor(t){super(t)}async _call(t){let{topk:e=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Array.isArray(t),r=await Gft(t),{pixel_values:i}=await this.processor(r),o=await this.model({pixel_values:i}),a=this.model.config.id2label,s=[];for(const c of o.logits){const t=Wst(Gst(c.data),e).map((t=>({label:a[t[0]],score:t[1]})));1===e?s.push(...t):s.push(t)}return n||1===e?s:s[0]}},model:Hpt,processor:Vft,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:class extends qft{constructor(t){super(t),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(t){let{threshold:e=.5,mask_threshold:n=.5,overlap_mask_area_threshold:r=.8,label_ids_to_fuse:i=null,target_sizes:o=null,subtask:a=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Array.isArray(t)&&1!==t.length)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const s=await Gft(t),c=s.map((t=>[t.height,t.width])),{pixel_values:l,pixel_mask:u}=await this.processor(s),h=await this.model({pixel_values:l,pixel_mask:u});let d=null;if(null!==a)d=this.subtasks_mapping[a];else for(let[m,g]of Object.entries(this.subtasks_mapping))if(g in this.processor.feature_extractor){d=this.processor.feature_extractor[g].bind(this.processor.feature_extractor),a=m;break}const p=this.model.config.id2label,f=[];if("panoptic"===a||"instance"===a){const t=d(h,e,n,r,i,null!==o&&void 0!==o?o:c)[0],a=t.segmentation;for(const e of t.segments_info){const t=new Uint8ClampedArray(a.data.length);for(let r=0;r<a.data.length;++r)a.data[r]===e.id&&(t[r]=255);const n=new bft(t,a.dims[1],a.dims[0],1);f.push({score:e.score,label:p[e.label_id],mask:n})}}else{if("semantic"!==a)throw Error("Subtask ".concat(a," not supported."));{const{segmentation:t,labels:e}=d(h,null!==o&&void 0!==o?o:c)[0];for(const n of e){const e=new Uint8ClampedArray(t.data.length);for(let i=0;i<t.data.length;++i)t.data[i]===n&&(e[i]=255);const r=new bft(e,t.dims[1],t.dims[0],1);f.push({score:null,label:p[n],mask:r})}}}return f}},model:[qpt,Xpt],processor:Vft,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"zero-shot-image-classification":{tokenizer:Aut,pipeline:class extends qft{constructor(t){super(t)}async _call(t,e){let{hypothesis_template:n="This is a photo of {}"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Array.isArray(t),i=await Gft(t),o=e.map((t=>n.replace("{}",t))),a=this.tokenizer(o,{padding:"siglip"!==this.model.config.model_type||"max_length",truncation:!0}),{pixel_values:s}=await this.processor(i),c=await this.model({...a,pixel_values:s}),l="siglip"===this.model.config.model_type?t=>t.sigmoid().data:t=>Gst(t.data),u=[];for(const h of c.logits_per_image){const t=[...l(h)].map(((t,n)=>({score:t,label:e[n]})));t.sort(((t,e)=>e.score-t.score)),u.push(t)}return r?u:u[0]}},model:Rpt,processor:Vft,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:class extends qft{constructor(t){super(t)}async _call(t){let{threshold:e=.9,percentage:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=Array.isArray(t);if(r&&1!==t.length)throw Error("Object detection pipeline currently only supports a batch size of 1.");const i=await Gft(t),o=n?null:i.map((t=>[t.height,t.width])),{pixel_values:a,pixel_mask:s}=await this.processor(i),c=await this.model({pixel_values:a,pixel_mask:s}),l=this.processor.feature_extractor.post_process_object_detection(c,e,o),u=this.model.config.id2label,h=l.map((t=>t.boxes.map(((e,r)=>({score:t.scores[r],label:u[t.classes[r]],box:Hft(e,!n)})))));return r?h:h[0]}},model:Ypt,processor:Vft,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:Aut,pipeline:class extends qft{constructor(t){super(t)}async _call(t,e){let{threshold:n=.1,topk:r=null,percentage:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=Array.isArray(t),a=await Gft(t),s=this.tokenizer(e,{padding:!0,truncation:!0}),c=await this.processor(a),l=[];for(let u=0;u<a.length;++u){const t=a[u],o=i?null:[[t.height,t.width]],h=c.pixel_values[u].unsqueeze_(0),d=await this.model({...s,pixel_values:h}),p=this.processor.feature_extractor.post_process_object_detection(d,n,o,!0)[0];let f=p.boxes.map(((t,n)=>({score:p.scores[n],label:e[p.classes[n]],box:Hft(t,!i)}))).sort(((t,e)=>e.score-t.score));null!==r&&(f=f.slice(0,r)),l.push(f)}return o?l:l[0]}},model:Kpt,processor:Vft,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:Aut,pipeline:class extends qft{constructor(t){super(t)}async _call(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(await Gft(t))[0],{pixel_values:i}=await this.processor(r),o="<s_docvqa><s_question>".concat(e,"</s_question><s_answer>"),a=this.tokenizer(o,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,s=await this.model.generate(i,{...n,decoder_input_ids:a,max_length:this.model.config.decoder.max_position_embeddings}),c=this.tokenizer.batch_decode(s)[0].match(/<s_answer>(.*?)<\/s_answer>/);let l=null;return c&&c.length>=2&&(l=c[1].trim()),[{answer:l}]}},model:$pt,processor:Vft,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:class extends qft{constructor(t){super(t)}async _call(t){const e=await Gft(t),n=await this.processor(e),r=await this.model(n),i=[];for(const o of r.reconstruction){const t=o.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");i.push(bft.fromTensor(t))}return i.length>1?i:i[0]}},model:Qpt,processor:Vft,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:class extends qft{constructor(t){super(t)}async _call(t){const e=await Gft(t),n=await this.processor(e),{predicted_depth:r}=await this.model(n),i=[];for(let o=0;o<e.length;++o){const t=nct(r[o],e[o].size.reverse(),"bilinear",!1),n=t.mul_(255/qst(t.data)[0]).to("uint8");i.push({predicted_depth:r[o],depth:bft.fromTensor(n)})}return i.length>1?i:i[0]}},model:tft,processor:Vft,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:Aut,pipeline:class extends qft{constructor(t){super(t)}async _call(t){var e,n;let{pooling:r="none",normalize:i=!1,quantize:o=!1,precision:a="binary"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=this.tokenizer(t,{padding:!0,truncation:!0}),c=await this.model(s);let l=null!==(e=null!==(n=c.last_hidden_state)&&void 0!==n?n:c.logits)&&void 0!==e?e:c.token_embeddings;if("none"===r);else if("mean"===r)l=function(t,e){let n=[t.dims[0],t.dims[2]],r=new t.data.constructor(n[0]*n[1]),[i,o,a]=t.dims,s=0;for(let c=0;c<i;++c){let n=c*a*o;for(let i=0;i<a;++i){let l=0,u=0,h=c*o,d=n+i;for(let n=0;n<o;++n){let r=Number(e.data[h+n]);u+=r,l+=t.data[d+n*a]*r}let p=l/u;r[s++]=p}}return new ect(t.type,r,n)}(l,s.attention_mask);else{if("cls"!==r)throw Error("Pooling method '".concat(r,"' not supported."));l=l.slice(null,0)}return i&&(l=l.normalize(2,-1)),o&&(l=function(t,e){if(2!==t.dims.length)throw new Error("The tensor must have 2 dimensions");if(t.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(e))throw new Error("The precision must be either 'binary' or 'ubinary'");const n="binary"===e,r=n?"int8":"uint8",i=n?Int8Array:Uint8Array,o=t.data,a=new i(o.length/8);for(let s=0;s<o.length;++s){const t=o[s]>0?1:0,e=Math.floor(s/8),r=s%8;a[e]|=t<<7-r,n&&0===r&&(a[e]-=128)}return new ect(r,a,[t.dims[0],t.dims[1]/8])}(l,a)),l}},model:Rpt,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:Vft,pipeline:class extends qft{constructor(t){super(t)}async _call(t){let{pool:e=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await Gft(t),{pixel_values:r}=await this.processor(n),i=await this.model({pixel_values:r});let o;if(e){if(!("pooler_output"in i))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");o=i.pooler_output}else{var a,s;o=null!==(a=null!==(s=i.last_hidden_state)&&void 0!==s?s:i.logits)&&void 0!==a?a:i.image_embeds}return o}},model:[eft,Rpt],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),Jft=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function $ft(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{quantized:r=!0,progress_callback:i=null,config:o=null,cache_dir:a=null,local_files_only:s=!1,revision:c="main",model_file_name:l=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=null!==(e=Jft[t])&&void 0!==e?e:t;const u=Zft[t.split("_",1)[0]];if(!u)throw Error("Unsupported pipeline: ".concat(t,". Must be one of [").concat(Object.keys(Zft),"]"));n||(n=u.default.model,console.log('No model specified. Using default model: "'.concat(n,'".')));const h={quantized:r,progress_callback:i,config:o,cache_dir:a,local_files_only:s,revision:c,model_file_name:l},d=new Map([["tokenizer",u.tokenizer],["model",u.model],["processor",u.processor]]),p=await async function(t,e,n){const r=Object.create(null),i=[];for(let[o,a]of t.entries()){if(!a)continue;let t;t=Array.isArray(a)?new Promise((async(t,r)=>{let i;for(let o of a){if(null===o)return void t(null);try{return void t(await o.from_pretrained(e,n))}catch(cCt){i=cCt}}r(i)})):a.from_pretrained(e,n),r[o]=t,i.push(t)}await Promise.all(i);for(let[o,a]of Object.entries(r))r[o]=await a;return r}(d,n,h);p.task=t,tst(i,{status:"ready",task:t,model:n});return new(0,u.pipeline)(p)}function Qft(t){var e,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Qft(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}const tmt=function(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Qft(t))&&(r&&(r+=" "),r+=e);return r};var emt=__webpack_require__(9889),nmt=__webpack_require__.n(emt),rmt=__webpack_require__(2086),imt=__webpack_require__(620),omt=__webpack_require__.n(imt),amt=__webpack_require__(5268),smt=__webpack_require__.n(amt),cmt=__webpack_require__(3097),lmt=__webpack_require__.n(cmt),umt=__webpack_require__(9160),hmt=__webpack_require__.n(umt),dmt=function(t){return 0===t?0:t>0?1:-1},pmt=function(t){return omt()(t)&&t.indexOf("%")===t.length-1},fmt=function(t){return hmt()(t)&&!smt()(t)},mmt=function(t){return fmt(t)||omt()(t)},gmt=0,ymt=function(t){var e=++gmt;return"".concat(t||"").concat(e)},vmt=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!fmt(t)&&!omt()(t))return r;if(pmt(t)){var o=t.indexOf("%");n=e*parseFloat(t.slice(0,o))/100}else n=+t;return smt()(n)&&(n=r),i&&n>e&&(n=e),n},bmt=function(t){if(!t)return null;var e=Object.keys(t);return e&&e.length?t[e[0]]:null},xmt=function(t,e){return fmt(t)&&fmt(e)?function(n){return t+n*(e-t)}:function(){return e}};function _mt(t,e,n){return t&&t.length?t.find((function(t){return t&&("function"===typeof e?e(t):lmt()(t,e))===n})):null}var wmt=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]},Smt=__webpack_require__(9686),Tmt=__webpack_require__.n(Smt),Emt=__webpack_require__(1629),Amt=__webpack_require__.n(Emt),Mmt=__webpack_require__(6686),Omt=__webpack_require__.n(Mmt);function Cmt(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function kmt(t){return kmt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kmt(t)}var Pmt=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Imt=["points","pathLength"],Nmt={svg:["viewBox","children"],polygon:Imt,polyline:Imt},Rmt=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Dmt=function(t,e){if(!t||"function"===typeof t||"boolean"===typeof t)return null;var n=t;if((0,k.isValidElement)(t)&&(n=t.props),!Omt()(n))return null;var r={};return Object.keys(n).forEach((function(t){Rmt.includes(t)&&(r[t]=e||function(e){return n[t](n,e)})})),r},Lmt=function(t,e,n){if(!Omt()(t)||"object"!==kmt(t))return null;var r=null;return Object.keys(t).forEach((function(i){var o=t[i];Rmt.includes(i)&&"function"===typeof o&&(r||(r={}),r[i]=function(t,e,n){return function(r){return t(e,n,r),null}}(o,e,n))})),r},Fmt=["children"],jmt=["children"];function Umt(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Bmt={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},zmt=function(t){return"string"===typeof t?t:t?t.displayName||t.name||"Component":""},Vmt=null,Gmt=null,Wmt=function t(e){if(e===Vmt&&Array.isArray(Gmt))return Gmt;var n=[];return k.Children.forEach(e,(function(e){Tmt()(e)||((0,rmt.isFragment)(e)?n=n.concat(t(e.props.children)):n.push(e))})),Gmt=n,Vmt=e,n};function Hmt(t,e){var n=[],r=[];return r=Array.isArray(e)?e.map((function(t){return zmt(t)})):[zmt(e)],Wmt(t).forEach((function(t){var e=lmt()(t,"type.displayName")||lmt()(t,"type.name");-1!==r.indexOf(e)&&n.push(t)})),n}function qmt(t,e){var n=Hmt(t,e);return n&&n[0]}var Xmt=function(t){if(!t||!t.props)return!1;var e=t.props,n=e.width,r=e.height;return!(!fmt(n)||n<=0||!fmt(r)||r<=0)},Ymt=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Kmt=function(t){return t&&t.type&&omt()(t.type)&&Ymt.indexOf(t.type)>=0},Zmt=function(t,e,n){if(!t||"function"===typeof t||"boolean"===typeof t)return null;var r=t;if((0,k.isValidElement)(t)&&(r=t.props),!Omt()(r))return null;var i={};return Object.keys(r).forEach((function(t){var o;(function(t,e,n,r){var i,o=null!==(i=null===Nmt||void 0===Nmt?void 0:Nmt[r])&&void 0!==i?i:[];return!Amt()(t)&&(r&&o.includes(e)||Pmt.includes(e))||n&&Rmt.includes(e)})(null===(o=r)||void 0===o?void 0:o[t],t,e,n)&&(i[t]=r[t])})),i},Jmt=function t(e,n){if(e===n)return!0;var r=k.Children.count(e);if(r!==k.Children.count(n))return!1;if(0===r)return!0;if(1===r)return $mt(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=e[i],a=n[i];if(Array.isArray(o)||Array.isArray(a)){if(!t(o,a))return!1}else if(!$mt(o,a))return!1}return!0},$mt=function(t,e){if(Tmt()(t)&&Tmt()(e))return!0;if(!Tmt()(t)&&!Tmt()(e)){var n=t.props||{},r=n.children,i=Umt(n,Fmt),o=e.props||{},a=o.children,s=Umt(o,jmt);return r&&a?Cmt(i,s)&&Jmt(r,a):!r&&!a&&Cmt(i,s)}return!1},Qmt=function(t,e){var n=[],r={};return Wmt(t).forEach((function(t,i){if(Kmt(t))n.push(t);else if(t){var o=zmt(t.type),a=e[o]||{},s=a.handler,c=a.once;if(s&&(!c||!r[o])){var l=s(t,o,i);n.push(l),r[o]=!0}}})),n},tgt=function(t,e){return Wmt(e).indexOf(t)};function egt(t){return egt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},egt(t)}function ngt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function rgt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ngt(Object(n),!0).forEach((function(e){igt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ngt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function igt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=egt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=egt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==egt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ogt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return agt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return agt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function agt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var sgt=(0,k.forwardRef)((function(t,e){var n=t.aspect,r=t.initialDimension,i=void 0===r?{width:-1,height:-1}:r,o=t.width,a=void 0===o?"100%":o,s=t.height,c=void 0===s?"100%":s,l=t.minWidth,u=void 0===l?0:l,h=t.minHeight,d=t.maxHeight,p=t.children,f=t.debounce,m=void 0===f?0:f,g=t.id,y=t.className,v=t.onResize,b=t.style,x=void 0===b?{}:b,_=(0,k.useRef)(null),w=(0,k.useRef)();w.current=v,(0,k.useImperativeHandle)(e,(function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})}));var S=ogt((0,k.useState)({containerWidth:i.width,containerHeight:i.height}),2),T=S[0],E=S[1],A=(0,k.useCallback)((function(t,e){E((function(n){var r=Math.round(t),i=Math.round(e);return n.containerWidth===r&&n.containerHeight===i?n:{containerWidth:r,containerHeight:i}}))}),[]);(0,k.useEffect)((function(){var t=function(t){var e,n=t[0].contentRect,r=n.width,i=n.height;A(r,i),null===(e=w.current)||void 0===e||e.call(w,r,i)};m>0&&(t=nmt()(t,m,{trailing:!0,leading:!1}));var e=new ResizeObserver(t),n=_.current.getBoundingClientRect(),r=n.width,i=n.height;return A(r,i),e.observe(_.current),function(){e.disconnect()}}),[A,m]);var M=(0,k.useMemo)((function(){var t=T.containerWidth,e=T.containerHeight;if(t<0||e<0)return null;wmt(pmt(a)||pmt(c),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",a,c),wmt(!n||n>0,"The aspect(%s) must be greater than zero.",n);var r=pmt(a)?t:a,i=pmt(c)?e:c;n&&n>0&&(r?i=r/n:i&&(r=i*n),d&&i>d&&(i=d)),wmt(r>0||i>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",r,i,a,c,u,h,n);var o=!Array.isArray(p)&&(0,rmt.isElement)(p)&&zmt(p.type).endsWith("Chart");return k.Children.map(p,(function(t){return(0,rmt.isElement)(t)?(0,k.cloneElement)(t,rgt({width:r,height:i},o?{style:rgt({height:"100%",width:"100%",maxHeight:i,maxWidth:r},t.props.style)}:{})):t}))}),[n,p,c,d,h,u,T,a]);return k.createElement("div",{id:g?"".concat(g):void 0,className:tmt("recharts-responsive-container",y),style:rgt(rgt({},x),{},{width:a,height:c,minWidth:u,minHeight:h,maxHeight:d}),ref:_},M)})),cgt=__webpack_require__(6604),lgt=__webpack_require__.n(cgt),ugt=__webpack_require__(7424),hgt=__webpack_require__.n(ugt),dgt=!0,pgt="Invariant failed";function fgt(t,e){if(!t){if(dgt)throw new Error(pgt);var n="function"===typeof e?e():e,r=n?"".concat(pgt,": ").concat(n):pgt;throw new Error(r)}}var mgt=["children","width","height","viewBox","className","style","title","desc"];function ggt(){return ggt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ggt.apply(this,arguments)}function ygt(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function vgt(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,o=t.className,a=t.style,s=t.title,c=t.desc,l=ygt(t,mgt),u=i||{width:n,height:r,x:0,y:0},h=tmt("recharts-surface",o);return k.createElement("svg",ggt({},Zmt(l,!0,"svg"),{className:h,width:n,height:r,style:a,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),k.createElement("title",null,s),k.createElement("desc",null,c),e)}var bgt=["children","className"];function xgt(){return xgt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xgt.apply(this,arguments)}function _gt(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var wgt=k.forwardRef((function(t,e){var n=t.children,r=t.className,i=_gt(t,bgt),o=tmt("recharts-layer",r);return k.createElement("g",xgt({className:o},Zmt(i,!0),{ref:e}),n)}));function Sgt(t){return Sgt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sgt(t)}function Tgt(){return Tgt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tgt.apply(this,arguments)}function Egt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return Agt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Agt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Agt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mgt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ogt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mgt(Object(n),!0).forEach((function(e){Cgt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mgt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Cgt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=Sgt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Sgt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Sgt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kgt(t){return Array.isArray(t)&&mmt(t[0])&&mmt(t[1])?t.join(" ~ "):t}var Pgt=function(t){var e=t.separator,n=void 0===e?" : ":e,r=t.contentStyle,i=void 0===r?{}:r,o=t.itemStyle,a=void 0===o?{}:o,s=t.labelStyle,c=void 0===s?{}:s,l=t.payload,u=t.formatter,h=t.itemSorter,d=t.wrapperClassName,p=t.labelClassName,f=t.label,m=t.labelFormatter,g=t.accessibilityLayer,y=void 0!==g&&g,v=Ogt({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),b=Ogt({margin:0},c),x=!Tmt()(f),_=x?f:"",w=tmt("recharts-default-tooltip",d),S=tmt("recharts-tooltip-label",p);x&&m&&void 0!==l&&null!==l&&(_=m(f,l));var T=y?{role:"status","aria-live":"assertive"}:{};return k.createElement("div",Tgt({className:w,style:v},T),k.createElement("p",{className:S,style:b},k.isValidElement(_)?_:"".concat(_)),function(){if(l&&l.length){var t=(h?hgt()(l,h):l).map((function(t,e){if("none"===t.type)return null;var r=Ogt({display:"block",paddingTop:4,paddingBottom:4,color:t.color||"#000"},a),i=t.formatter||u||kgt,o=t.value,s=t.name,c=o,h=s;if(i&&null!=c&&null!=h){var d=i(o,s,t,e,l);if(Array.isArray(d)){var p=Egt(d,2);c=p[0],h=p[1]}else c=d}return k.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(e),style:r},mmt(h)?k.createElement("span",{className:"recharts-tooltip-item-name"},h):null,mmt(h)?k.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,k.createElement("span",{className:"recharts-tooltip-item-value"},c),k.createElement("span",{className:"recharts-tooltip-item-unit"},t.unit||""))}));return k.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},t)}return null}())};function Igt(t){return Igt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Igt(t)}function Ngt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=Igt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Igt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Igt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Rgt="recharts-tooltip-wrapper",Dgt={visibility:"hidden"};function Lgt(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return tmt(Rgt,Ngt(Ngt(Ngt(Ngt({},"".concat(Rgt,"-right"),fmt(n)&&e&&fmt(e.x)&&n>=e.x),"".concat(Rgt,"-left"),fmt(n)&&e&&fmt(e.x)&&n<e.x),"".concat(Rgt,"-bottom"),fmt(r)&&e&&fmt(e.y)&&r>=e.y),"".concat(Rgt,"-top"),fmt(r)&&e&&fmt(e.y)&&r<e.y))}function Fgt(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,a=t.reverseDirection,s=t.tooltipDimension,c=t.viewBox,l=t.viewBoxDimension;if(o&&fmt(o[r]))return o[r];var u=n[r]-s-i,h=n[r]+i;return e[r]?a[r]?u:h:a[r]?u<c[r]?Math.max(h,c[r]):Math.max(u,c[r]):h+s>c[r]+l?Math.max(u,c[r]):Math.max(h,c[r])}function jgt(t){return jgt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jgt(t)}function Ugt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bgt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ugt(Object(n),!0).forEach((function(e){Xgt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ugt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function zgt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ygt(r.key),r)}}function Vgt(t,e,n){return e=Wgt(e),function(t,e){if(e&&("object"===jgt(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Hgt(t)}(t,Ggt()?Reflect.construct(e,n||[],Wgt(t).constructor):e.apply(t,n))}function Ggt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ggt=function(){return!!t})()}function Wgt(t){return Wgt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wgt(t)}function Hgt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qgt(t,e){return qgt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qgt(t,e)}function Xgt(t,e,n){return(e=Ygt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ygt(t){var e=function(t,e){if("object"!=jgt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=jgt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jgt(e)?e:String(e)}var Kgt=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Xgt(Hgt(t=Vgt(this,e,[].concat(r))),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Xgt(Hgt(t),"handleKeyDown",(function(e){var n,r,i,o;"Escape"===e.key&&t.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(r=t.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==n?n:0,y:null!==(i=null===(o=t.props.coordinate)||void 0===o?void 0:o.y)&&void 0!==i?i:0}})})),t}var n,r,i;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qgt(t,e)}(e,t),n=e,r=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var t=this.wrapperNode.getBoundingClientRect();(Math.abs(t.width-this.state.lastBoundingBox.width)>1||Math.abs(t.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:t.width,height:t.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var t,e;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(t=this.props.coordinate)||void 0===t?void 0:t.x)===this.state.dismissedAtCoordinate.x&&(null===(e=this.props.coordinate)||void 0===e?void 0:e.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var t=this,e=this.props,n=e.active,r=e.allowEscapeViewBox,i=e.animationDuration,o=e.animationEasing,a=e.children,s=e.coordinate,c=e.hasPayload,l=e.isAnimationActive,u=e.offset,h=e.position,d=e.reverseDirection,p=e.useTranslate3d,f=e.viewBox,m=e.wrapperStyle,g=function(t){var e,n,r=t.allowEscapeViewBox,i=t.coordinate,o=t.offsetTopLeft,a=t.position,s=t.reverseDirection,c=t.tooltipBox,l=t.useTranslate3d,u=t.viewBox;return{cssProperties:c.height>0&&c.width>0&&i?function(t){var e=t.translateX,n=t.translateY;return{transform:t.useTranslate3d?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}({translateX:e=Fgt({allowEscapeViewBox:r,coordinate:i,key:"x",offsetTopLeft:o,position:a,reverseDirection:s,tooltipDimension:c.width,viewBox:u,viewBoxDimension:u.width}),translateY:n=Fgt({allowEscapeViewBox:r,coordinate:i,key:"y",offsetTopLeft:o,position:a,reverseDirection:s,tooltipDimension:c.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:l}):Dgt,cssClasses:Lgt({translateX:e,translateY:n,coordinate:i})}}({allowEscapeViewBox:r,coordinate:s,offsetTopLeft:u,position:h,reverseDirection:d,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:f}),y=g.cssClasses,v=g.cssProperties,b=Bgt(Bgt({transition:l&&n?"transform ".concat(i,"ms ").concat(o):void 0},v),{},{pointerEvents:"none",visibility:!this.state.dismissed&&n&&c?"visible":"hidden",position:"absolute",top:0,left:0},m);return k.createElement("div",{tabIndex:-1,className:y,style:b,ref:function(e){t.wrapperNode=e}},a)}}],r&&zgt(n.prototype,r),i&&zgt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(k.PureComponent),Zgt={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(t){return Zgt[t]},set:function(t,e){if("string"===typeof t)Zgt[t]=e;else{var n=Object.keys(t);n&&n.length&&n.forEach((function(e){Zgt[e]=t[e]}))}}},Jgt=__webpack_require__(977),$gt=__webpack_require__.n(Jgt);function Qgt(t,e,n){return!0===e?$gt()(t,n):Amt()(e)?$gt()(t,e):t}function tyt(t){return tyt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tyt(t)}function eyt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nyt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?eyt(Object(n),!0).forEach((function(e){cyt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eyt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ryt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lyt(r.key),r)}}function iyt(t,e,n){return e=ayt(e),function(t,e){if(e&&("object"===tyt(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,oyt()?Reflect.construct(e,n||[],ayt(t).constructor):e.apply(t,n))}function oyt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(oyt=function(){return!!t})()}function ayt(t){return ayt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ayt(t)}function syt(t,e){return syt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},syt(t,e)}function cyt(t,e,n){return(e=lyt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lyt(t){var e=function(t,e){if("object"!=tyt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=tyt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tyt(e)?e:String(e)}function uyt(t){return t.dataKey}var hyt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),iyt(this,e,arguments)}var n,r,i;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&syt(t,e)}(e,t),n=e,r=[{key:"render",value:function(){var t=this,e=this.props,n=e.active,r=e.allowEscapeViewBox,i=e.animationDuration,o=e.animationEasing,a=e.content,s=e.coordinate,c=e.filterNull,l=e.isAnimationActive,u=e.offset,h=e.payload,d=e.payloadUniqBy,p=e.position,f=e.reverseDirection,m=e.useTranslate3d,g=e.viewBox,y=e.wrapperStyle,v=null!==h&&void 0!==h?h:[];c&&v.length&&(v=Qgt(h.filter((function(e){return null!=e.value&&(!0!==e.hide||t.props.includeHidden)})),d,uyt));var b=v.length>0;return k.createElement(Kgt,{allowEscapeViewBox:r,animationDuration:i,animationEasing:o,isAnimationActive:l,active:n,coordinate:s,hasPayload:b,offset:u,position:p,reverseDirection:f,useTranslate3d:m,viewBox:g,wrapperStyle:y},function(t,e){return k.isValidElement(t)?k.cloneElement(t,e):"function"===typeof t?k.createElement(t,e):k.createElement(Pgt,e)}(a,nyt(nyt({},this.props),{},{payload:v})))}}],r&&ryt(n.prototype,r),i&&ryt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(k.PureComponent);cyt(hyt,"displayName","Tooltip"),cyt(hyt,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Zgt.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var dyt=__webpack_require__(643),pyt=__webpack_require__.n(dyt);Math.abs,Math.atan2;const fyt=Math.cos,myt=(Math.max,Math.min,Math.sin),gyt=Math.sqrt,yyt=Math.PI,vyt=2*yyt;const byt={draw(t,e){const n=gyt(e/yyt);t.moveTo(n,0),t.arc(0,0,n,0,vyt)}},xyt={draw(t,e){const n=gyt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},_yt=gyt(1/3),wyt=2*_yt,Syt={draw(t,e){const n=gyt(e/wyt),r=n*_yt;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Tyt={draw(t,e){const n=gyt(e),r=-n/2;t.rect(r,r,n,n)}},Eyt=myt(yyt/10)/myt(7*yyt/10),Ayt=myt(vyt/10)*Eyt,Myt=-fyt(vyt/10)*Eyt,Oyt={draw(t,e){const n=gyt(.8908130915292852*e),r=Ayt*n,i=Myt*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const e=vyt*o/5,a=fyt(e),s=myt(e);t.lineTo(s*n,-a*n),t.lineTo(a*r-s*i,s*r+a*i)}t.closePath()}},Cyt=gyt(3),kyt={draw(t,e){const n=-gyt(e/(3*Cyt));t.moveTo(0,2*n),t.lineTo(-Cyt*n,-n),t.lineTo(Cyt*n,-n),t.closePath()}},Pyt=-.5,Iyt=gyt(3)/2,Nyt=1/gyt(12),Ryt=3*(Nyt/2+1),Dyt={draw(t,e){const n=gyt(e/Ryt),r=n/2,i=n*Nyt,o=r,a=n*Nyt+n,s=-o,c=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,c),t.lineTo(Pyt*r-Iyt*i,Iyt*r+Pyt*i),t.lineTo(Pyt*o-Iyt*a,Iyt*o+Pyt*a),t.lineTo(Pyt*s-Iyt*c,Iyt*s+Pyt*c),t.lineTo(Pyt*r+Iyt*i,Pyt*i-Iyt*r),t.lineTo(Pyt*o+Iyt*a,Pyt*a-Iyt*o),t.lineTo(Pyt*s+Iyt*c,Pyt*c-Iyt*s),t.closePath()}};function Lyt(t){return function(){return t}}function Fyt(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var jyt,Uyt,Byt,zyt,Vyt,Gyt,Wyt,Hyt,qyt,Xyt,Yyt,Kyt,Zyt,Jyt;const $yt=Math.PI,Qyt=2*$yt,tvt=1e-6,evt=Qyt-tvt;function nvt(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class rvt{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?nvt:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error("invalid digits: ".concat(t));if(e>15)return nvt;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append(jyt||(jyt=Fyt(["M",",",""])),this._x0=this._x1=+t,this._y0=this._y1=+e)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(Uyt||(Uyt=Fyt(["Z"]))))}lineTo(t,e){this._append(Byt||(Byt=Fyt(["L",",",""])),this._x1=+t,this._y1=+e)}quadraticCurveTo(t,e,n,r){this._append(zyt||(zyt=Fyt(["Q",",",",",",",""])),+t,+e,this._x1=+n,this._y1=+r)}bezierCurveTo(t,e,n,r,i,o){this._append(Vyt||(Vyt=Fyt(["C",",",",",",",",",",",""])),+t,+e,+n,+r,this._x1=+i,this._y1=+o)}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error("negative radius: ".concat(i));let o=this._x1,a=this._y1,s=n-t,c=r-e,l=o-t,u=a-e,h=l*l+u*u;if(null===this._x1)this._append(Gyt||(Gyt=Fyt(["M",",",""])),this._x1=t,this._y1=e);else if(h>tvt)if(Math.abs(u*s-c*l)>tvt&&i){let d=n-o,p=r-a,f=s*s+c*c,m=d*d+p*p,g=Math.sqrt(f),y=Math.sqrt(h),v=i*Math.tan(($yt-Math.acos((f+h-m)/(2*g*y)))/2),b=v/y,x=v/g;Math.abs(b-1)>tvt&&this._append(Hyt||(Hyt=Fyt(["L",",",""])),t+b*l,e+b*u),this._append(qyt||(qyt=Fyt(["A",",",",0,0,",",",",",""])),i,i,+(u*d>l*p),this._x1=t+x*s,this._y1=e+x*c)}else this._append(Wyt||(Wyt=Fyt(["L",",",""])),this._x1=t,this._y1=e);else;}arc(t,e,n,r,i,o){if(t=+t,e=+e,o=!!o,(n=+n)<0)throw new Error("negative radius: ".concat(n));let a=n*Math.cos(r),s=n*Math.sin(r),c=t+a,l=e+s,u=1^o,h=o?r-i:i-r;null===this._x1?this._append(Xyt||(Xyt=Fyt(["M",",",""])),c,l):(Math.abs(this._x1-c)>tvt||Math.abs(this._y1-l)>tvt)&&this._append(Yyt||(Yyt=Fyt(["L",",",""])),c,l),n&&(h<0&&(h=h%Qyt+Qyt),h>evt?this._append(Kyt||(Kyt=Fyt(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,u,t-a,e-s,n,n,u,this._x1=c,this._y1=l):h>tvt&&this._append(Zyt||(Zyt=Fyt(["A",",",",0,",",",",",",",""])),n,n,+(h>=$yt),u,this._x1=t+n*Math.cos(i),this._y1=e+n*Math.sin(i)))}rect(t,e,n,r){this._append(Jyt||(Jyt=Fyt(["M",",","h","v","h","Z"])),this._x0=this._x1=+t,this._y0=this._y1=+e,n=+n,+r,-n)}toString(){return this._}}function ivt(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError("invalid digits: ".concat(n));e=t}return t},()=>new rvt(e)}rvt.prototype;gyt(3),gyt(3);function ovt(t){return ovt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ovt(t)}var avt=["type","size","sizeType"];function svt(){return svt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},svt.apply(this,arguments)}function cvt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lvt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cvt(Object(n),!0).forEach((function(e){uvt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cvt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function uvt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=ovt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ovt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ovt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hvt(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var dvt={symbolCircle:byt,symbolCross:xyt,symbolDiamond:Syt,symbolSquare:Tyt,symbolStar:Oyt,symbolTriangle:kyt,symbolWye:Dyt},pvt=Math.PI/180,fvt=function(t){var e=t.type,n=void 0===e?"circle":e,r=t.size,i=void 0===r?64:r,o=t.sizeType,a=void 0===o?"area":o,s=lvt(lvt({},hvt(t,avt)),{},{type:n,size:i,sizeType:a}),c=s.className,l=s.cx,u=s.cy,h=Zmt(s,!0);return l===+l&&u===+u&&i===+i?k.createElement("path",svt({},h,{className:tmt("recharts-symbols",c),transform:"translate(".concat(l,", ").concat(u,")"),d:function(){var t=function(t){var e="symbol".concat(pyt()(t));return dvt[e]||byt}(n),e=function(t,e){let n=null,r=ivt(i);function i(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return t="function"===typeof t?t:Lyt(t||byt),e="function"===typeof e?e:Lyt(void 0===e?64:+e),i.type=function(e){return arguments.length?(t="function"===typeof e?e:Lyt(e),i):t},i.size=function(t){return arguments.length?(e="function"===typeof t?t:Lyt(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i}().type(t).size(function(t,e,n){if("area"===e)return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return.5*t*t/Math.sqrt(3);case"square":return t*t;case"star":var r=18*pvt;return 1.25*t*t*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}}(i,a,n));return e()}()})):null};function mvt(t){return mvt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mvt(t)}function gvt(){return gvt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gvt.apply(this,arguments)}function yvt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vvt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tvt(r.key),r)}}function bvt(t,e,n){return e=_vt(e),function(t,e){if(e&&("object"===mvt(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,xvt()?Reflect.construct(e,n||[],_vt(t).constructor):e.apply(t,n))}function xvt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(xvt=function(){return!!t})()}function _vt(t){return _vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_vt(t)}function wvt(t,e){return wvt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wvt(t,e)}function Svt(t,e,n){return(e=Tvt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tvt(t){var e=function(t,e){if("object"!=mvt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=mvt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mvt(e)?e:String(e)}fvt.registerSymbol=function(t,e){dvt["symbol".concat(pyt()(t))]=e};var Evt=32,Avt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),bvt(this,e,arguments)}var n,r,i;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wvt(t,e)}(e,t),n=e,r=[{key:"renderIcon",value:function(t){var e=this.props.inactiveColor,n=16,r=Evt/6,i=Evt/3,o=t.inactive?e:t.color;if("plainline"===t.type)return k.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:n,x2:Evt,y2:n,className:"recharts-legend-icon"});if("line"===t.type)return k.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(n,"h").concat(i,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(2*i,",").concat(n,"\n            H").concat(Evt,"M").concat(2*i,",").concat(n,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(i,",").concat(n),className:"recharts-legend-icon"});if("rect"===t.type)return k.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(4,"h").concat(Evt,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(k.isValidElement(t.legendIcon)){var a=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yvt(Object(n),!0).forEach((function(e){Svt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yvt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t);return delete a.legendIcon,k.cloneElement(t.legendIcon,a)}return k.createElement(fvt,{fill:o,cx:n,cy:n,size:Evt,sizeType:"diameter",type:t.type})}},{key:"renderItems",value:function(){var t=this,e=this.props,n=e.payload,r=e.iconSize,i=e.layout,o=e.formatter,a=e.inactiveColor,s={x:0,y:0,width:Evt,height:Evt},c={display:"horizontal"===i?"inline-block":"block",marginRight:10},l={display:"inline-block",verticalAlign:"middle",marginRight:4};return n.map((function(e,n){var i=e.formatter||o,u=tmt(Svt(Svt({"recharts-legend-item":!0},"legend-item-".concat(n),!0),"inactive",e.inactive));if("none"===e.type)return null;var h=Amt()(e.value)?null:e.value;wmt(!Amt()(e.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var d=e.inactive?a:e.color;return k.createElement("li",gvt({className:u,style:c,key:"legend-item-".concat(n)},Lmt(t.props,e,n)),k.createElement(vgt,{width:r,height:r,viewBox:s,style:l},t.renderIcon(e)),k.createElement("span",{className:"recharts-legend-item-text",style:{color:d}},i?i(h,e,n):h))}))}},{key:"render",value:function(){var t=this.props,e=t.payload,n=t.layout,r=t.align;if(!e||!e.length)return null;var i={padding:0,margin:0,textAlign:"horizontal"===n?r:"left"};return k.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}],r&&vvt(n.prototype,r),i&&vvt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(k.PureComponent);function Mvt(t){return Mvt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mvt(t)}Svt(Avt,"displayName","Legend"),Svt(Avt,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Ovt=["ref"];function Cvt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kvt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Cvt(Object(n),!0).forEach((function(e){Fvt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cvt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Pvt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jvt(r.key),r)}}function Ivt(t,e,n){return e=Rvt(e),function(t,e){if(e&&("object"===Mvt(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Dvt(t)}(t,Nvt()?Reflect.construct(e,n||[],Rvt(t).constructor):e.apply(t,n))}function Nvt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Nvt=function(){return!!t})()}function Rvt(t){return Rvt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rvt(t)}function Dvt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lvt(t,e){return Lvt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Lvt(t,e)}function Fvt(t,e,n){return(e=jvt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jvt(t){var e=function(t,e){if("object"!=Mvt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Mvt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mvt(e)?e:String(e)}function Uvt(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Bvt(t){return t.value}var zvt=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Fvt(Dvt(t=Ivt(this,e,[].concat(r))),"lastBoundingBox",{width:-1,height:-1}),t}var n,r,i;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lvt(t,e)}(e,t),n=e,r=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var t=this.wrapperNode.getBoundingClientRect();return t.height=this.wrapperNode.offsetHeight,t.width=this.wrapperNode.offsetWidth,t}return null}},{key:"updateBBox",value:function(){var t=this.props.onBBoxUpdate,e=this.getBBox();e?(Math.abs(e.width-this.lastBoundingBox.width)>1||Math.abs(e.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=e.width,this.lastBoundingBox.height=e.height,t&&t(e)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,t&&t(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?kvt({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(t){var e,n,r=this.props,i=r.layout,o=r.align,a=r.verticalAlign,s=r.margin,c=r.chartWidth,l=r.chartHeight;return t&&(void 0!==t.left&&null!==t.left||void 0!==t.right&&null!==t.right)||(e="center"===o&&"vertical"===i?{left:((c||0)-this.getBBoxSnapshot().width)/2}:"right"===o?{right:s&&s.right||0}:{left:s&&s.left||0}),t&&(void 0!==t.top&&null!==t.top||void 0!==t.bottom&&null!==t.bottom)||(n="middle"===a?{top:((l||0)-this.getBBoxSnapshot().height)/2}:"bottom"===a?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),kvt(kvt({},e),n)}},{key:"render",value:function(){var t=this,e=this.props,n=e.content,r=e.width,i=e.height,o=e.wrapperStyle,a=e.payloadUniqBy,s=e.payload,c=kvt(kvt({position:"absolute",width:r||"auto",height:i||"auto"},this.getDefaultPosition(o)),o);return k.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(e){t.wrapperNode=e}},function(t,e){if(k.isValidElement(t))return k.cloneElement(t,e);if("function"===typeof t)return k.createElement(t,e);e.ref;var n=Uvt(e,Ovt);return k.createElement(Avt,n)}(n,kvt(kvt({},this.props),{},{payload:Qgt(s,a,Bvt)})))}}],i=[{key:"getWithHeight",value:function(t,e){var n=t.props.layout;return"vertical"===n&&fmt(t.props.height)?{height:t.props.height}:"horizontal"===n?{width:t.props.width||e}:null}}],r&&Pvt(n.prototype,r),i&&Pvt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(k.PureComponent);function Vvt(){return Vvt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vvt.apply(this,arguments)}Fvt(zvt,"displayName","Legend"),Fvt(zvt,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Gvt=function(t){var e=t.cx,n=t.cy,r=t.r,i=t.className,o=tmt("recharts-dot",i);return e===+e&&n===+n&&r===+r?k.createElement("circle",Vvt({},Zmt(t,!1),Dmt(t),{className:o,cx:e,cy:n,r:r})):null},Wvt=__webpack_require__(5173),Hvt=__webpack_require__.n(Wvt),qvt=Object.getOwnPropertyNames,Xvt=Object.getOwnPropertySymbols,Yvt=Object.prototype.hasOwnProperty;function Kvt(t,e){return function(n,r,i){return t(n,r,i)&&e(n,r,i)}}function Zvt(t){return function(e,n,r){if(!e||!n||"object"!==typeof e||"object"!==typeof n)return t(e,n,r);var i=r.cache,o=i.get(e),a=i.get(n);if(o&&a)return o===n&&a===e;i.set(e,n),i.set(n,e);var s=t(e,n,r);return i.delete(e),i.delete(n),s}}function Jvt(t){return qvt(t).concat(Xvt(t))}var $vt=Object.hasOwn||function(t,e){return Yvt.call(t,e)};function Qvt(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var tbt="_owner",ebt=Object.getOwnPropertyDescriptor,nbt=Object.keys;function rbt(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function ibt(t,e){return Qvt(t.getTime(),e.getTime())}function obt(t,e,n){if(t.size!==e.size)return!1;for(var r,i,o={},a=t.entries(),s=0;(r=a.next())&&!r.done;){for(var c=e.entries(),l=!1,u=0;(i=c.next())&&!i.done;){var h=r.value,d=h[0],p=h[1],f=i.value,m=f[0],g=f[1];l||o[u]||!(l=n.equals(d,m,s,u,t,e,n)&&n.equals(p,g,d,m,t,e,n))||(o[u]=!0),u++}if(!l)return!1;s++}return!0}function abt(t,e,n){var r,i=nbt(t),o=i.length;if(nbt(e).length!==o)return!1;for(;o-- >0;){if((r=i[o])===tbt&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof)return!1;if(!$vt(e,r)||!n.equals(t[r],e[r],r,r,t,e,n))return!1}return!0}function sbt(t,e,n){var r,i,o,a=Jvt(t),s=a.length;if(Jvt(e).length!==s)return!1;for(;s-- >0;){if((r=a[s])===tbt&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof)return!1;if(!$vt(e,r))return!1;if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;if(i=ebt(t,r),o=ebt(e,r),(i||o)&&(!i||!o||i.configurable!==o.configurable||i.enumerable!==o.enumerable||i.writable!==o.writable))return!1}return!0}function cbt(t,e){return Qvt(t.valueOf(),e.valueOf())}function lbt(t,e){return t.source===e.source&&t.flags===e.flags}function ubt(t,e,n){if(t.size!==e.size)return!1;for(var r,i,o={},a=t.values();(r=a.next())&&!r.done;){for(var s=e.values(),c=!1,l=0;(i=s.next())&&!i.done;)c||o[l]||!(c=n.equals(r.value,i.value,r.value,i.value,t,e,n))||(o[l]=!0),l++;if(!c)return!1}return!0}function hbt(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}var dbt="[object Arguments]",pbt="[object Boolean]",fbt="[object Date]",mbt="[object Map]",gbt="[object Number]",ybt="[object Object]",vbt="[object RegExp]",bbt="[object Set]",xbt="[object String]",_bt=Array.isArray,wbt="function"===typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,Sbt=Object.assign,Tbt=Object.prototype.toString.call.bind(Object.prototype.toString);var Ebt=Abt();Abt({strict:!0}),Abt({circular:!0}),Abt({circular:!0,strict:!0}),Abt({createInternalComparator:function(){return Qvt}}),Abt({strict:!0,createInternalComparator:function(){return Qvt}}),Abt({circular:!0,createInternalComparator:function(){return Qvt}}),Abt({circular:!0,createInternalComparator:function(){return Qvt},strict:!0});function Abt(t){void 0===t&&(t={});var e,n=t.circular,r=void 0!==n&&n,i=t.createInternalComparator,o=t.createState,a=t.strict,s=void 0!==a&&a,c=function(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?sbt:rbt,areDatesEqual:ibt,areMapsEqual:r?Kvt(obt,sbt):obt,areObjectsEqual:r?sbt:abt,arePrimitiveWrappersEqual:cbt,areRegExpsEqual:lbt,areSetsEqual:r?Kvt(ubt,sbt):ubt,areTypedArraysEqual:r?sbt:hbt};if(n&&(i=Sbt({},i,n(i))),e){var o=Zvt(i.areArraysEqual),a=Zvt(i.areMapsEqual),s=Zvt(i.areObjectsEqual),c=Zvt(i.areSetsEqual);i=Sbt({},i,{areArraysEqual:o,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:c})}return i}(t),l=function(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,a=t.areRegExpsEqual,s=t.areSetsEqual,c=t.areTypedArraysEqual;return function(t,l,u){if(t===l)return!0;if(null==t||null==l||"object"!==typeof t||"object"!==typeof l)return t!==t&&l!==l;var h=t.constructor;if(h!==l.constructor)return!1;if(h===Object)return i(t,l,u);if(_bt(t))return e(t,l,u);if(null!=wbt&&wbt(t))return c(t,l,u);if(h===Date)return n(t,l,u);if(h===RegExp)return a(t,l,u);if(h===Map)return r(t,l,u);if(h===Set)return s(t,l,u);var d=Tbt(t);return d===fbt?n(t,l,u):d===vbt?a(t,l,u):d===mbt?r(t,l,u):d===bbt?s(t,l,u):d===ybt?"function"!==typeof t.then&&"function"!==typeof l.then&&i(t,l,u):d===dbt?i(t,l,u):(d===pbt||d===gbt||d===xbt)&&o(t,l,u)}}(c),u=i?i(l):(e=l,function(t,n,r,i,o,a,s){return e(t,n,s)});return function(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,o=t.strict;if(r)return function(t,a){var s=r(),c=s.cache,l=void 0===c?e?new WeakMap:void 0:c,u=s.meta;return n(t,a,{cache:l,equals:i,meta:u,strict:o})};if(e)return function(t,e){return n(t,e,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var a={cache:void 0,equals:i,meta:void 0,strict:o};return function(t,e){return n(t,e,a)}}({circular:r,comparator:l,createState:o,equals:u,strict:s})}function Mbt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame((function r(i){n<0&&(n=i),i-n>e?(t(i),n=-1):function(t){"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(t)}(r)}))}function Obt(t){return Obt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Obt(t)}function Cbt(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return kbt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kbt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kbt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Pbt(){var t=function(){return null},e=!1,n=function n(r){if(!e){if(Array.isArray(r)){if(!r.length)return;var i=Cbt(r),o=i[0],a=i.slice(1);return"number"===typeof o?void Mbt(n.bind(null,a),o):(n(o),void Mbt(n.bind(null,a)))}"object"===Obt(r)&&t(r),"function"===typeof r&&r()}};return{stop:function(){e=!0},start:function(t){e=!1,n(t)},subscribe:function(e){return t=e,function(){t=function(){return null}}}}}function Ibt(t){return Ibt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ibt(t)}function Nbt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Rbt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nbt(Object(n),!0).forEach((function(e){Dbt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nbt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Dbt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Ibt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ibt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ibt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Lbt=function(t){return t},Fbt=function(t,e){return Object.keys(e).reduce((function(n,r){return Rbt(Rbt({},n),{},Dbt({},r,t(r,e[r])))}),{})},jbt=function(t,e,n){return t.map((function(t){return"".concat(function(t){return t.replace(/([A-Z])/g,(function(t){return"-".concat(t.toLowerCase())}))}(t)," ").concat(e,"ms ").concat(n)})).join(",")};function Ubt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||zbt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bbt(t){return function(t){if(Array.isArray(t))return Vbt(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||zbt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zbt(t,e){if(t){if("string"===typeof t)return Vbt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vbt(t,e):void 0}}function Vbt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Gbt=1e-4,Wbt=function(t,e){return[0,3*t,3*e-6*t,3*t-3*e+1]},Hbt=function(t,e){return t.map((function(t,n){return t*Math.pow(e,n)})).reduce((function(t,e){return t+e}))},qbt=function(t,e){return function(n){var r=Wbt(t,e);return Hbt(r,n)}},Xbt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i=e[1],o=e[2],a=e[3];if(1===e.length)switch(e[0]){case"linear":r=0,i=0,o=1,a=1;break;case"ease":r=.25,i=.1,o=.25,a=1;break;case"ease-in":r=.42,i=0,o=1,a=1;break;case"ease-out":r=.42,i=0,o=.58,a=1;break;case"ease-in-out":r=0,i=0,o=.58,a=1;break;default:var s=e[0].split("(");if("cubic-bezier"===s[0]&&4===s[1].split(")")[0].split(",").length){var c=Ubt(s[1].split(")")[0].split(",").map((function(t){return parseFloat(t)})),4);r=c[0],i=c[1],o=c[2],a=c[3]}}[r,o,i,a].every((function(t){return"number"===typeof t&&t>=0&&t<=1}));var l,u,h=qbt(r,o),d=qbt(i,a),p=(l=r,u=o,function(t){var e=Wbt(l,u),n=[].concat(Bbt(e.map((function(t,e){return t*e})).slice(1)),[0]);return Hbt(n,t)}),f=function(t){return t>1?1:t<0?0:t},m=function(t){for(var e=t>1?1:t,n=e,r=0;r<8;++r){var i=h(n)-e,o=p(n);if(Math.abs(i-e)<Gbt||o<Gbt)return d(n);n=f(n-i/o)}return d(n)};return m.isStepper=!1,m},Ybt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0];if("string"===typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Xbt(r);case"spring":return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.stiff,n=void 0===e?100:e,r=t.damping,i=void 0===r?8:r,o=t.dt,a=void 0===o?17:o,s=function(t,e,r){var o=r+(-(t-e)*n-r*i)*a/1e3,s=r*a/1e3+t;return Math.abs(s-e)<Gbt&&Math.abs(o)<Gbt?[e,0]:[s,o]};return s.isStepper=!0,s.dt=a,s}();default:if("cubic-bezier"===r.split("(")[0])return Xbt(r)}return"function"===typeof r?r:null};function Kbt(t){return Kbt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kbt(t)}function Zbt(t){return function(t){if(Array.isArray(t))return nxt(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ext(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jbt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jbt(Object(n),!0).forEach((function(e){Qbt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jbt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qbt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Kbt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Kbt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Kbt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function txt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||ext(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ext(t,e){if(t){if("string"===typeof t)return nxt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nxt(t,e):void 0}}function nxt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var rxt=function(t,e,n){return t+(e-t)*n},ixt=function(t){return t.from!==t.to},oxt=function t(e,n,r){var i=Fbt((function(t,n){if(ixt(n)){var r=txt(e(n.from,n.to,n.velocity),2),i=r[0],o=r[1];return $bt($bt({},n),{},{from:i,velocity:o})}return n}),n);return r<1?Fbt((function(t,e){return ixt(e)?$bt($bt({},e),{},{velocity:rxt(e.velocity,i[t].velocity,r),from:rxt(e.from,i[t].from,r)}):e}),n):t(e,i,r-1)};const axt=function(t,e,n,r,i){var o,a,s,c,l=(o=t,a=e,[Object.keys(o),Object.keys(a)].reduce((function(t,e){return t.filter((function(t){return e.includes(t)}))}))),u=l.reduce((function(n,r){return $bt($bt({},n),{},Qbt({},r,[t[r],e[r]]))}),{}),h=l.reduce((function(n,r){return $bt($bt({},n),{},Qbt({},r,{from:t[r],velocity:0,to:e[r]}))}),{}),d=-1,p=function(){return null};return p=n.isStepper?function(r){s||(s=r);var o=(r-s)/n.dt;h=oxt(n,h,o),i($bt($bt($bt({},t),e),Fbt((function(t,e){return e.from}),h))),s=r,Object.values(h).filter(ixt).length&&(d=requestAnimationFrame(p))}:function(o){c||(c=o);var a=(o-c)/r,s=Fbt((function(t,e){return rxt.apply(void 0,Zbt(e).concat([n(a)]))}),u);if(i($bt($bt($bt({},t),e),s)),a<1)d=requestAnimationFrame(p);else{var l=Fbt((function(t,e){return rxt.apply(void 0,Zbt(e).concat([n(1)]))}),u);i($bt($bt($bt({},t),e),l))}},function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(d)}}};function sxt(t){return sxt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sxt(t)}var cxt=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function lxt(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function uxt(t){return function(t){if(Array.isArray(t))return hxt(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return hxt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hxt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hxt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dxt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pxt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dxt(Object(n),!0).forEach((function(e){fxt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dxt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function fxt(t,e,n){return(e=gxt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mxt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gxt(r.key),r)}}function gxt(t){var e=function(t,e){if("object"!==sxt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==sxt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===sxt(e)?e:String(e)}function yxt(t,e){return yxt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yxt(t,e)}function vxt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(sCt){return!1}}();return function(){var n,r=_xt(t);if(e){var i=_xt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bxt(this,n)}}function bxt(t,e){if(e&&("object"===sxt(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xxt(t)}function xxt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _xt(t){return _xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_xt(t)}var wxt=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yxt(t,e)}(o,t);var e,n,r,i=vxt(o);function o(t,e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var r=(n=i.call(this,t,e)).props,a=r.isActive,s=r.attributeName,c=r.from,l=r.to,u=r.steps,h=r.children,d=r.duration;if(n.handleStyleChange=n.handleStyleChange.bind(xxt(n)),n.changeStyle=n.changeStyle.bind(xxt(n)),!a||d<=0)return n.state={style:{}},"function"===typeof h&&(n.state={style:l}),bxt(n);if(u&&u.length)n.state={style:u[0].style};else if(c){if("function"===typeof h)return n.state={style:c},bxt(n);n.state={style:s?fxt({},s,c):c}}else n.state={style:{}};return n}return e=o,n=[{key:"componentDidMount",value:function(){var t=this.props,e=t.isActive,n=t.canBegin;this.mounted=!0,e&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.isActive,r=e.canBegin,i=e.attributeName,o=e.shouldReAnimate,a=e.to,s=e.from,c=this.state.style;if(r)if(n){if(!(Ebt(t.to,a)&&t.canBegin&&t.isActive)){var l=!t.canBegin||!t.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var u=l||o?s:t.to;if(this.state&&c){var h={style:i?fxt({},i,u):u};(i&&c[i]!==u||!i&&c!==u)&&this.setState(h)}this.runAnimation(pxt(pxt({},this.props),{},{from:u,begin:0}))}}else{var d={style:i?fxt({},i,a):a};this.state&&c&&(i&&c[i]!==a||!i&&c!==a)&&this.setState(d)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var t=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}},{key:"handleStyleChange",value:function(t){this.changeStyle(t)}},{key:"changeStyle",value:function(t){this.mounted&&this.setState({style:t})}},{key:"runJSAnimation",value:function(t){var e=this,n=t.from,r=t.to,i=t.duration,o=t.easing,a=t.begin,s=t.onAnimationEnd,c=t.onAnimationStart,l=axt(n,r,Ybt(o),i,this.changeStyle);this.manager.start([c,a,function(){e.stopJSAnimation=l()},i,s])}},{key:"runStepAnimation",value:function(t){var e=this,n=t.steps,r=t.begin,i=t.onAnimationStart,o=n[0],a=o.style,s=o.duration,c=void 0===s?0:s;return this.manager.start([i].concat(uxt(n.reduce((function(t,r,i){if(0===i)return t;var o=r.duration,a=r.easing,s=void 0===a?"ease":a,c=r.style,l=r.properties,u=r.onAnimationEnd,h=i>0?n[i-1]:r,d=l||Object.keys(c);if("function"===typeof s||"spring"===s)return[].concat(uxt(t),[e.runJSAnimation.bind(e,{from:h.style,to:c,duration:o,easing:s}),o]);var p=jbt(d,o,s),f=pxt(pxt(pxt({},h.style),c),{},{transition:p});return[].concat(uxt(t),[f,o,u]).filter(Lbt)}),[a,Math.max(c,r)])),[t.onAnimationEnd]))}},{key:"runAnimation",value:function(t){this.manager||(this.manager=Pbt());var e=t.begin,n=t.duration,r=t.attributeName,i=t.to,o=t.easing,a=t.onAnimationStart,s=t.onAnimationEnd,c=t.steps,l=t.children,u=this.manager;if(this.unSubscribe=u.subscribe(this.handleStyleChange),"function"!==typeof o&&"function"!==typeof l&&"spring"!==o)if(c.length>1)this.runStepAnimation(t);else{var h=r?fxt({},r,i):i,d=jbt(Object.keys(h),n,o);u.start([a,e,pxt(pxt({},h),{},{transition:d}),n,s])}else this.runJSAnimation(t)}},{key:"render",value:function(){var t=this.props,e=t.children,n=(t.begin,t.duration),r=(t.attributeName,t.easing,t.isActive),i=(t.steps,t.from,t.to,t.canBegin,t.onAnimationEnd,t.shouldReAnimate,t.onAnimationReStart,lxt(t,cxt)),o=k.Children.count(e),a=this.state.style;if("function"===typeof e)return e(a);if(!r||0===o||n<=0)return e;var s=function(t){var e=t.props,n=e.style,r=void 0===n?{}:n,o=e.className;return(0,k.cloneElement)(t,pxt(pxt({},i),{},{style:pxt(pxt({},r),a),className:o}))};return 1===o?s(k.Children.only(e)):k.createElement("div",null,k.Children.map(e,(function(t){return s(t)})))}}],n&&mxt(e.prototype,n),r&&mxt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(k.PureComponent);wxt.displayName="Animate",wxt.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},wxt.propTypes={from:Hvt().oneOfType([Hvt().object,Hvt().string]),to:Hvt().oneOfType([Hvt().object,Hvt().string]),attributeName:Hvt().string,duration:Hvt().number,begin:Hvt().number,easing:Hvt().oneOfType([Hvt().string,Hvt().func]),steps:Hvt().arrayOf(Hvt().shape({duration:Hvt().number.isRequired,style:Hvt().object.isRequired,easing:Hvt().oneOfType([Hvt().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Hvt().func]),properties:Hvt().arrayOf("string"),onAnimationEnd:Hvt().func})),children:Hvt().oneOfType([Hvt().node,Hvt().func]),isActive:Hvt().bool,canBegin:Hvt().bool,onAnimationEnd:Hvt().func,shouldReAnimate:Hvt().bool,onAnimationStart:Hvt().func,onAnimationReStart:Hvt().func};const Sxt=wxt;function Txt(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function Ext(){return Ext=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ext.apply(null,arguments)}function Axt(t,e){return Axt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Axt(t,e)}function Mxt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Axt(t,e)}const Oxt=k.createContext(null);function Cxt(t,e){var n=Object.create(null);return t&&k.Children.map(t,(function(t){return t})).forEach((function(t){n[t.key]=function(t){return e&&(0,k.isValidElement)(t)?e(t):t}(t)})),n}function kxt(t,e,n){return null!=n[e]?n[e]:t.props[e]}function Pxt(t,e,n){var r=Cxt(t.children),i=function(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var r,i=Object.create(null),o=[];for(var a in t)a in e?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var c in e){if(i[c])for(r=0;r<i[c].length;r++){var l=i[c][r];s[i[c][r]]=n(l)}s[c]=n(c)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(e,r);return Object.keys(i).forEach((function(o){var a=i[o];if((0,k.isValidElement)(a)){var s=o in e,c=o in r,l=e[o],u=(0,k.isValidElement)(l)&&!l.props.in;!c||s&&!u?c||!s||u?c&&s&&(0,k.isValidElement)(l)&&(i[o]=(0,k.cloneElement)(a,{onExited:n.bind(null,a),in:l.props.in,exit:kxt(a,"exit",t),enter:kxt(a,"enter",t)})):i[o]=(0,k.cloneElement)(a,{in:!1}):i[o]=(0,k.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:kxt(a,"exit",t),enter:kxt(a,"enter",t)})}})),i}var Ixt=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},Nxt=function(t){function e(e,n){var r,i=(r=t.call(this,e,n)||this).handleExited.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}Mxt(e,t);var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(t,e){var n,r,i=e.children,o=e.handleExited;return{children:e.firstRender?(n=t,r=o,Cxt(n.children,(function(t){return(0,k.cloneElement)(t,{onExited:r.bind(null,t),in:!0,appear:kxt(t,"appear",n),enter:kxt(t,"enter",n),exit:kxt(t,"exit",n)})}))):Pxt(t,i,o),firstRender:!1}},n.handleExited=function(t,e){var n=Cxt(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=Ext({},e.children);return delete n[t.key],{children:n}})))},n.render=function(){var t=this.props,e=t.component,n=t.childFactory,r=Txt(t,["component","childFactory"]),i=this.state.contextValue,o=Ixt(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===e?k.createElement(Oxt.Provider,{value:i},o):k.createElement(Oxt.Provider,{value:i},k.createElement(e,r,o))},e}(k.Component);Nxt.propTypes={},Nxt.defaultProps={component:"div",childFactory:function(t){return t}};const Rxt=Nxt,Dxt=!1;var Lxt="unmounted",Fxt="exited",jxt="entering",Uxt="entered",Bxt="exiting",zxt=function(t){function e(e,n){var r;r=t.call(this,e,n)||this;var i,o=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?o?(i=Fxt,r.appearStatus=jxt):i=Uxt:i=e.unmountOnExit||e.mountOnEnter?Lxt:Fxt,r.state={status:i},r.nextCallback=null,r}Mxt(e,t),e.getDerivedStateFromProps=function(t,e){return t.in&&e.status===Lxt?{status:Fxt}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==jxt&&n!==Uxt&&(e=jxt):n!==jxt&&n!==Uxt||(e=Bxt)}this.updateStatus(!1,e)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!==typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},n.updateStatus=function(t,e){if(void 0===t&&(t=!1),null!==e)if(this.cancelNextCallback(),e===jxt){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:N.findDOMNode(this);n&&function(t){t.scrollTop}(n)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Fxt&&this.setState({status:Lxt})},n.performEnter=function(t){var e=this,n=this.props.enter,r=this.context?this.context.isMounting:t,i=this.props.nodeRef?[r]:[N.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),c=r?s.appear:s.enter;!t&&!n||Dxt?this.safeSetState({status:Uxt},(function(){e.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:jxt},(function(){e.props.onEntering(o,a),e.onTransitionEnd(c,(function(){e.safeSetState({status:Uxt},(function(){e.props.onEntered(o,a)}))}))})))},n.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:N.findDOMNode(this);e&&!Dxt?(this.props.onExit(r),this.safeSetState({status:Bxt},(function(){t.props.onExiting(r),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:Fxt},(function(){t.props.onExited(r)}))}))}))):this.safeSetState({status:Fxt},(function(){t.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},n.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:N.findDOMNode(this),r=null==t&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},n.render=function(){var t=this.state.status;if(t===Lxt)return null;var e=this.props,n=e.children,r=(e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef,Txt(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return k.createElement(Oxt.Provider,{value:null},"function"===typeof n?n(t,r):k.cloneElement(k.Children.only(n),r))},e}(k.Component);function Vxt(){}zxt.contextType=Oxt,zxt.propTypes={},zxt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Vxt,onEntering:Vxt,onEntered:Vxt,onExit:Vxt,onExiting:Vxt,onExited:Vxt},zxt.UNMOUNTED=Lxt,zxt.EXITED=Fxt,zxt.ENTERING=jxt,zxt.ENTERED=Uxt,zxt.EXITING=Bxt;const Gxt=zxt;var Wxt=["children","appearOptions","enterOptions","leaveOptions"];function Hxt(t){return Hxt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hxt(t)}function qxt(){return qxt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qxt.apply(this,arguments)}function Xxt(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Yxt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Kxt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yxt(Object(n),!0).forEach((function(e){e_t(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yxt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Zxt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n_t(r.key),r)}}function Jxt(t,e){return Jxt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Jxt(t,e)}function $xt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(sCt){return!1}}();return function(){var n,r=t_t(t);if(e){var i=t_t(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Hxt(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Qxt(t)}(this,n)}}function Qxt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function t_t(t){return t_t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t_t(t)}function e_t(t,e,n){return(e=n_t(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n_t(t){var e=function(t,e){if("object"!==Hxt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Hxt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Hxt(e)?e:String(e)}var r_t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.steps,n=t.duration;return e&&e.length?e.reduce((function(t,e){return t+(Number.isFinite(e.duration)&&e.duration>0?e.duration:0)}),0):Number.isFinite(n)?n:0},i_t=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jxt(t,e)}(o,t);var e,n,r,i=$xt(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),e_t(Qxt(t=i.call(this)),"handleEnter",(function(e,n){var r=t.props,i=r.appearOptions,o=r.enterOptions;t.handleStyleActive(n?i:o)})),e_t(Qxt(t),"handleExit",(function(){var e=t.props.leaveOptions;t.handleStyleActive(e)})),t.state={isActive:!1},t}return e=o,n=[{key:"handleStyleActive",value:function(t){if(t){var e=t.onAnimationEnd?function(){t.onAnimationEnd()}:null;this.setState(Kxt(Kxt({},t),{},{onAnimationEnd:e,isActive:!0}))}}},{key:"parseTimeout",value:function(){var t=this.props,e=t.appearOptions,n=t.enterOptions,r=t.leaveOptions;return r_t(e)+r_t(n)+r_t(r)}},{key:"render",value:function(){var t=this,e=this.props,n=e.children,r=(e.appearOptions,e.enterOptions,e.leaveOptions,Xxt(e,Wxt));return k.createElement(Gxt,qxt({},r,{onEnter:this.handleEnter,onExit:this.handleExit,timeout:this.parseTimeout()}),(function(){return k.createElement(Sxt,t.state,k.Children.only(n))}))}}],n&&Zxt(e.prototype,n),r&&Zxt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(k.Component);i_t.propTypes={appearOptions:Hvt().object,enterOptions:Hvt().object,leaveOptions:Hvt().object,children:Hvt().element};const o_t=i_t;function a_t(t){var e=t.component,n=t.children,r=t.appear,i=t.enter,o=t.leave;return k.createElement(Rxt,{component:e},k.Children.map(n,(function(t,e){return k.createElement(o_t,{appearOptions:r,enterOptions:i,leaveOptions:o,key:"child-".concat(e)},t)})))}a_t.propTypes={appear:Hvt().object,enter:Hvt().object,leave:Hvt().object,children:Hvt().oneOfType([Hvt().array,Hvt().element]),component:Hvt().any},a_t.defaultProps={component:"span"};const s_t=Sxt;function c_t(t){return c_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c_t(t)}function l_t(){return l_t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l_t.apply(this,arguments)}function u_t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return h_t(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h_t(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h_t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d_t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p_t(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d_t(Object(n),!0).forEach((function(e){f_t(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d_t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f_t(t,e,n){return e=function(t){var e=function(t,e){if("object"!=c_t(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=c_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c_t(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m_t=function(t,e,n,r,i){var o,a=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,c=n>=0?1:-1,l=r>=0&&n>=0||r<0&&n<0?1:0;if(a>0&&i instanceof Array){for(var u=[0,0,0,0],h=0;h<4;h++)u[h]=i[h]>a?a:i[h];o="M".concat(t,",").concat(e+s*u[0]),u[0]>0&&(o+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(l,",").concat(t+c*u[0],",").concat(e)),o+="L ".concat(t+n-c*u[1],",").concat(e),u[1]>0&&(o+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(l,",\n        ").concat(t+n,",").concat(e+s*u[1])),o+="L ".concat(t+n,",").concat(e+r-s*u[2]),u[2]>0&&(o+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(l,",\n        ").concat(t+n-c*u[2],",").concat(e+r)),o+="L ".concat(t+c*u[3],",").concat(e+r),u[3]>0&&(o+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(l,",\n        ").concat(t,",").concat(e+r-s*u[3])),o+="Z"}else if(a>0&&i===+i&&i>0){var d=Math.min(a,i);o="M ".concat(t,",").concat(e+s*d,"\n            A ").concat(d,",").concat(d,",0,0,").concat(l,",").concat(t+c*d,",").concat(e,"\n            L ").concat(t+n-c*d,",").concat(e,"\n            A ").concat(d,",").concat(d,",0,0,").concat(l,",").concat(t+n,",").concat(e+s*d,"\n            L ").concat(t+n,",").concat(e+r-s*d,"\n            A ").concat(d,",").concat(d,",0,0,").concat(l,",").concat(t+n-c*d,",").concat(e+r,"\n            L ").concat(t+c*d,",").concat(e+r,"\n            A ").concat(d,",").concat(d,",0,0,").concat(l,",").concat(t,",").concat(e+r-s*d," Z")}else o="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return o},g_t=function(t,e){if(!t||!e)return!1;var n=t.x,r=t.y,i=e.x,o=e.y,a=e.width,s=e.height;if(Math.abs(a)>0&&Math.abs(s)>0){var c=Math.min(i,i+a),l=Math.max(i,i+a),u=Math.min(o,o+s),h=Math.max(o,o+s);return n>=c&&n<=l&&r>=u&&r<=h}return!1},y_t={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},v_t=function(t){var e=p_t(p_t({},y_t),t),n=(0,k.useRef)(),r=u_t((0,k.useState)(-1),2),i=r[0],o=r[1];(0,k.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var t=n.current.getTotalLength();t&&o(t)}catch(cCt){}}),[]);var a=e.x,s=e.y,c=e.width,l=e.height,u=e.radius,h=e.className,d=e.animationEasing,p=e.animationDuration,f=e.animationBegin,m=e.isAnimationActive,g=e.isUpdateAnimationActive;if(a!==+a||s!==+s||c!==+c||l!==+l||0===c||0===l)return null;var y=tmt("recharts-rectangle",h);return g?k.createElement(s_t,{canBegin:i>0,from:{width:c,height:l,x:a,y:s},to:{width:c,height:l,x:a,y:s},duration:p,animationEasing:d,isActive:g},(function(t){var r=t.width,o=t.height,a=t.x,s=t.y;return k.createElement(s_t,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:p,isActive:m,easing:d},k.createElement("path",l_t({},Zmt(e,!0),{className:y,d:m_t(a,s,r,o,u),ref:n})))})):k.createElement("path",l_t({},Zmt(e,!0),{className:y,d:m_t(a,s,c,l,u)}))};function b_t(t){return b_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b_t(t)}function x_t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function __t(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x_t(Object(n),!0).forEach((function(e){w_t(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x_t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w_t(t,e,n){return e=function(t){var e=function(t,e){if("object"!=b_t(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=b_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==b_t(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S_t={widthCache:{},cacheCount:0},T_t={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},E_t="recharts_measurement_span";var A_t=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===t||null===t||Zgt.isSsr)return{width:0,height:0};var n=function(t){var e=__t({},t);return Object.keys(e).forEach((function(t){e[t]||delete e[t]})),e}(e),r=JSON.stringify({text:t,copyStyle:n});if(S_t.widthCache[r])return S_t.widthCache[r];try{var i=document.getElementById(E_t);i||((i=document.createElement("span")).setAttribute("id",E_t),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=__t(__t({},T_t),n);Object.assign(i.style,o),i.textContent="".concat(t);var a=i.getBoundingClientRect(),s={width:a.width,height:a.height};return S_t.widthCache[r]=s,++S_t.cacheCount>2e3&&(S_t.cacheCount=0,S_t.widthCache={}),s}catch(sCt){return{width:0,height:0}}};function M_t(t){return M_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M_t(t)}function O_t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return C_t(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C_t(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C_t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function k_t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P_t(r.key),r)}}function P_t(t){var e=function(t,e){if("object"!=M_t(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=M_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==M_t(e)?e:String(e)}var I_t=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,N_t=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,R_t=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,D_t=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,L_t={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},F_t=Object.keys(L_t),j_t="NaN";var U_t=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),""===n||R_t.test(n)||(this.num=NaN,this.unit=""),F_t.includes(n)&&(this.num=function(t,e){return t*L_t[e]}(e,n),this.unit="px")}var e,n,r;return e=t,r=[{key:"parse",value:function(e){var n,r=O_t(null!==(n=D_t.exec(e))&&void 0!==n?n:[],3),i=r[1],o=r[2];return new t(parseFloat(i),null!==o&&void 0!==o?o:"")}}],(n=[{key:"add",value:function(e){return this.unit!==e.unit?new t(NaN,""):new t(this.num+e.num,this.unit)}},{key:"subtract",value:function(e){return this.unit!==e.unit?new t(NaN,""):new t(this.num-e.num,this.unit)}},{key:"multiply",value:function(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new t(NaN,""):new t(this.num*e.num,this.unit||e.unit)}},{key:"divide",value:function(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new t(NaN,""):new t(this.num/e.num,this.unit||e.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&k_t(e.prototype,n),r&&k_t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function B_t(t){if(t.includes(j_t))return j_t;for(var e=t;e.includes("*")||e.includes("/");){var n,r=O_t(null!==(n=I_t.exec(e))&&void 0!==n?n:[],4),i=r[1],o=r[2],a=r[3],s=U_t.parse(null!==i&&void 0!==i?i:""),c=U_t.parse(null!==a&&void 0!==a?a:""),l="*"===o?s.multiply(c):s.divide(c);if(l.isNaN())return j_t;e=e.replace(I_t,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,h=O_t(null!==(u=N_t.exec(e))&&void 0!==u?u:[],4),d=h[1],p=h[2],f=h[3],m=U_t.parse(null!==d&&void 0!==d?d:""),g=U_t.parse(null!==f&&void 0!==f?f:""),y="+"===p?m.add(g):m.subtract(g);if(y.isNaN())return j_t;e=e.replace(N_t,y.toString())}return e}var z_t=/\(([^()]*)\)/;function V_t(t){var e=t.replace(/\s+/g,"");return e=function(t){for(var e=t;e.includes("(");){var n=O_t(z_t.exec(e),2)[1];e=e.replace(z_t,B_t(n))}return e}(e),e=B_t(e)}function G_t(t){var e=function(t){try{return V_t(t)}catch(sCt){return j_t}}(t.slice(5,-1));return e===j_t?"":e}var W_t=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],H_t=["dx","dy","angle","className","breakAll"];function q_t(){return q_t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q_t.apply(this,arguments)}function X_t(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Y_t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return K_t(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K_t(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K_t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Z_t=/[ \f\n\r\t\v\u2028\u2029]+/,J_t=function(t){var e=t.children,n=t.breakAll,r=t.style;try{var i=[];return Tmt()(e)||(i=n?e.toString().split(""):e.toString().split(Z_t)),{wordsWithComputedWidth:i.map((function(t){return{word:t,width:A_t(t,r).width}})),spaceWidth:n?0:A_t("\xa0",r).width}}catch(sCt){return null}},$_t=function(t){return[{words:Tmt()(t)?[]:t.toString().split(Z_t)}]},Q_t=function(t){var e=t.width,n=t.scaleToFit,r=t.children,i=t.style,o=t.breakAll,a=t.maxLines;if((e||n)&&!Zgt.isSsr){var s=J_t({breakAll:o,children:r,style:i});return s?function(t,e,n,r,i){var o=t.maxLines,a=t.children,s=t.style,c=t.breakAll,l=fmt(o),u=a,h=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(t,e){var o=e.word,a=e.width,s=t[t.length-1];if(s&&(null==r||i||s.width+a+n<Number(r)))s.words.push(o),s.width+=a+n;else{var c={words:[o],width:a};t.push(c)}return t}),[])},d=h(e);if(!l)return d;for(var p,f=function(t){var e=u.slice(0,t),n=J_t({breakAll:c,style:s,children:e+"\u2026"}).wordsWithComputedWidth,i=h(n),a=i.length>o||function(t){return t.reduce((function(t,e){return t.width>e.width?t:e}))}(i).width>Number(r);return[a,i]},m=0,g=u.length-1,y=0;m<=g&&y<=u.length-1;){var v=Math.floor((m+g)/2),b=Y_t(f(v-1),2),x=b[0],_=b[1],w=Y_t(f(v),1)[0];if(x||w||(m=v+1),x&&w&&(g=v-1),!x&&w){p=_;break}y++}return p||d}({breakAll:o,children:r,maxLines:a,style:i},s.wordsWithComputedWidth,s.spaceWidth,e,n):$_t(r)}return $_t(r)},twt="#808080",ewt=function(t){var e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,o=t.lineHeight,a=void 0===o?"1em":o,s=t.capHeight,c=void 0===s?"0.71em":s,l=t.scaleToFit,u=void 0!==l&&l,h=t.textAnchor,d=void 0===h?"start":h,p=t.verticalAnchor,f=void 0===p?"end":p,m=t.fill,g=void 0===m?twt:m,y=X_t(t,W_t),v=(0,k.useMemo)((function(){return Q_t({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:u,style:y.style,width:y.width})}),[y.breakAll,y.children,y.maxLines,u,y.style,y.width]),b=y.dx,x=y.dy,_=y.angle,w=y.className,S=y.breakAll,T=X_t(y,H_t);if(!mmt(n)||!mmt(i))return null;var E,A=n+(fmt(b)?b:0),M=i+(fmt(x)?x:0);switch(f){case"start":E=G_t("calc(".concat(c,")"));break;case"middle":E=G_t("calc(".concat((v.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:E=G_t("calc(".concat(v.length-1," * -").concat(a,")"))}var O=[];if(u){var C=v[0].width,P=y.width;O.push("scale(".concat((fmt(P)?P/C:1)/C,")"))}return _&&O.push("rotate(".concat(_,", ").concat(A,", ").concat(M,")")),O.length&&(T.transform=O.join(" ")),k.createElement("text",q_t({},Zmt(T,!0),{x:A,y:M,className:tmt("recharts-text",w),textAnchor:d,fill:g.includes("url")?twt:g}),v.map((function(t,e){var n=t.words.join(S?"":" ");return k.createElement("tspan",{x:A,dy:0===e?E:a,key:n},n)})))};function nwt(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}Array.prototype.slice;function rwt(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function iwt(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function owt(t,e){return t[e]}function awt(t){const e=[];return e.key=t,e}var swt=__webpack_require__(539),cwt=__webpack_require__.n(swt),lwt=__webpack_require__(6745),uwt=__webpack_require__.n(lwt),hwt=__webpack_require__(3538),dwt=__webpack_require__.n(hwt),pwt=__webpack_require__(9853),fwt=__webpack_require__.n(pwt),mwt=__webpack_require__(8210),gwt=__webpack_require__.n(mwt);function ywt(t){return function(t){if(Array.isArray(t))return vwt(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return vwt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vwt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vwt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var bwt=function(t){return t},xwt={"@@functional/placeholder":!0},_wt=function(t){return t===xwt},wwt=function(t){return function e(){return 0===arguments.length||1===arguments.length&&_wt(arguments.length<=0?void 0:arguments[0])?e:t.apply(void 0,arguments)}},Swt=function t(e,n){return 1===e?n:wwt((function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter((function(t){return t!==xwt})).length;return a>=e?n.apply(void 0,i):t(e-a,wwt((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var o=i.map((function(t){return _wt(t)?e.shift():t}));return n.apply(void 0,ywt(o).concat(e))})))}))},Twt=function(t){return Swt(t.length,t)},Ewt=function(t,e){for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},Awt=Twt((function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map((function(t){return e[t]})).map(t)})),Mwt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!e.length)return bwt;var r=e.reverse(),i=r[0],o=r.slice(1);return function(){return o.reduce((function(t,e){return e(t)}),i.apply(void 0,arguments))}},Owt=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},Cwt=function(t){var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e&&i.every((function(t,n){return t===e[n]}))?n:(e=i,n=t.apply(void 0,i))}};var kwt=Twt((function(t,e,n){var r=+t;return r+n*(+e-r)})),Pwt=Twt((function(t,e,n){var r=e-+t;return(n-t)/(r=r||1/0)})),Iwt=Twt((function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))}));const Nwt={rangeStep:function(t,e,n){for(var r=new(gwt())(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o},getDigitCount:function(t){return 0===t?1:Math.floor(new(gwt())(t).abs().log(10).toNumber())+1},interpolateNumber:kwt,uninterpolateNumber:Pwt,uninterpolateTruncation:Iwt};function Rwt(t){return function(t){if(Array.isArray(t))return Fwt(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Lwt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dwt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(cCt){i=!0,o=cCt}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||Lwt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lwt(t,e){if(t){if("string"===typeof t)return Fwt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fwt(t,e):void 0}}function Fwt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jwt(t){var e=Dwt(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function Uwt(t,e,n){if(t.lte(0))return new(gwt())(0);var r=Nwt.getDigitCount(t.toNumber()),i=new(gwt())(10).pow(r),o=t.div(i),a=1!==r?.05:.1,s=new(gwt())(Math.ceil(o.div(a).toNumber())).add(n).mul(a).mul(i);return e?s:new(gwt())(Math.ceil(s))}function Bwt(t,e,n){var r=1,i=new(gwt())(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new(gwt())(10).pow(Nwt.getDigitCount(t)-1),i=new(gwt())(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new(gwt())(Math.floor(t)))}else 0===t?i=new(gwt())(Math.floor((e-1)/2)):n||(i=new(gwt())(Math.floor(t)));var a=Math.floor((e-1)/2);return Mwt(Awt((function(t){return i.add(new(gwt())(t-a).mul(r)).toNumber()})),Ewt)(0,e)}function zwt(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new(gwt())(0),tickMin:new(gwt())(0),tickMax:new(gwt())(0)};var o,a=Uwt(new(gwt())(e).sub(t).div(n-1),r,i);o=t<=0&&e>=0?new(gwt())(0):(o=new(gwt())(t).add(e).div(2)).sub(new(gwt())(o).mod(a));var s=Math.ceil(o.sub(t).div(a).toNumber()),c=Math.ceil(new(gwt())(e).sub(o).div(a).toNumber()),l=s+c+1;return l>n?zwt(t,e,n,r,i+1):(l<n&&(c=e>0?c+(n-l):c,s=e>0?s:s+(n-l)),{step:a,tickMin:o.sub(new(gwt())(s).mul(a)),tickMax:o.add(new(gwt())(c).mul(a))})}var Vwt=Cwt((function(t){var e=Dwt(t,2),n=e[0],r=e[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),s=Dwt(jwt([n,r]),2),c=s[0],l=s[1];if(c===-1/0||l===1/0){var u=l===1/0?[c].concat(Rwt(Ewt(0,i-1).map((function(){return 1/0})))):[].concat(Rwt(Ewt(0,i-1).map((function(){return-1/0}))),[l]);return n>r?Owt(u):u}if(c===l)return Bwt(c,i,o);var h=zwt(c,l,a,o),d=h.step,p=h.tickMin,f=h.tickMax,m=Nwt.rangeStep(p,f.add(new(gwt())(.1).mul(d)),d);return n>r?Owt(m):m})),Gwt=(Cwt((function(t){var e=Dwt(t,2),n=e[0],r=e[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),s=Dwt(jwt([n,r]),2),c=s[0],l=s[1];if(c===-1/0||l===1/0)return[n,r];if(c===l)return Bwt(c,i,o);var u=Uwt(new(gwt())(l).sub(c).div(a-1),o,0),h=Mwt(Awt((function(t){return new(gwt())(c).add(new(gwt())(t).mul(u)).toNumber()})),Ewt)(0,a).filter((function(t){return t>=c&&t<=l}));return n>r?Owt(h):h})),Cwt((function(t,e){var n=Dwt(t,2),r=n[0],i=n[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Dwt(jwt([r,i]),2),s=a[0],c=a[1];if(s===-1/0||c===1/0)return[r,i];if(s===c)return[s];var l=Math.max(e,2),u=Uwt(new(gwt())(c).sub(s).div(l-1),o,0),h=[].concat(Rwt(Nwt.rangeStep(new(gwt())(s),new(gwt())(c).sub(new(gwt())(.99).mul(u)),u)),[c]);return r>i?Owt(h):h}))),Wwt=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Hwt(){return Hwt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hwt.apply(this,arguments)}function qwt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return Xwt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xwt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xwt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ywt(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Kwt(t){var e=t.offset,n=t.layout,r=t.width,i=t.dataKey,o=t.data,a=t.dataPointFormatter,s=t.xAxis,c=t.yAxis,l=Ywt(t,Wwt),u=Zmt(l,!1);"x"===t.direction&&"number"!==s.type&&fgt(!1);var h=o.map((function(t){var o=a(t,i),l=o.x,h=o.y,d=o.value,p=o.errorVal;if(!p)return null;var f,m,g=[];if(Array.isArray(p)){var y=qwt(p,2);f=y[0],m=y[1]}else f=m=p;if("vertical"===n){var v=s.scale,b=h+e,x=b+r,_=b-r,w=v(d-f),S=v(d+m);g.push({x1:S,y1:x,x2:S,y2:_}),g.push({x1:w,y1:b,x2:S,y2:b}),g.push({x1:w,y1:x,x2:w,y2:_})}else if("horizontal"===n){var T=c.scale,E=l+e,A=E-r,M=E+r,O=T(d-f),C=T(d+m);g.push({x1:A,y1:C,x2:M,y2:C}),g.push({x1:E,y1:O,x2:E,y2:C}),g.push({x1:A,y1:O,x2:M,y2:O})}return k.createElement(wgt,Hwt({className:"recharts-errorBar",key:"bar-".concat(g.map((function(t){return"".concat(t.x1,"-").concat(t.x2,"-").concat(t.y1,"-").concat(t.y2)})))},u),g.map((function(t){return k.createElement("line",Hwt({},t,{key:"line-".concat(t.x1,"-").concat(t.x2,"-").concat(t.y1,"-").concat(t.y2)}))})))}));return k.createElement(wgt,{className:"recharts-errorBars"},h)}function Zwt(t){return Zwt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zwt(t)}function Jwt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jwt(Object(n),!0).forEach((function(e){Qwt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jwt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qwt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=Zwt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Zwt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zwt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Kwt.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"},Kwt.displayName="ErrorBar";var tSt=function(t){var e,n=t.children,r=t.formattedGraphicalItems,i=t.legendWidth,o=t.legendContent,a=qmt(n,zvt);return a?(e=a.props&&a.props.payload?a.props&&a.props.payload:"children"===o?(r||[]).reduce((function(t,e){var n=e.item,r=e.props,i=r.sectors||r.data||[];return t.concat(i.map((function(t){return{type:a.props.iconType||n.props.legendType,value:t.name,color:t.fill,payload:t}})))}),[]):(r||[]).map((function(t){var e=t.item,n=e.props,r=n.dataKey,i=n.name,o=n.legendType;return{inactive:n.hide,dataKey:r,type:a.props.iconType||o||"square",color:lSt(e),value:i||r,payload:e.props}})),$wt($wt($wt({},a.props),zvt.getWithHeight(a,i)),{},{payload:e,item:a})):null};function eSt(t){return eSt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eSt(t)}function nSt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function rSt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nSt(Object(n),!0).forEach((function(e){iSt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nSt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function iSt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=eSt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=eSt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eSt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oSt(t){return function(t){if(Array.isArray(t))return aSt(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return aSt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aSt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aSt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sSt(t,e,n){return Tmt()(t)||Tmt()(e)?n:mmt(e)?lmt()(t,e,n):Amt()(e)?e(t):n}function cSt(t,e,n,r){var i=dwt()(t,(function(t){return sSt(t,e)}));if("number"===n){var o=i.filter((function(t){return fmt(t)||parseFloat(t)}));return o.length?[uwt()(o),cwt()(o)]:[1/0,-1/0]}return(r?i.filter((function(t){return!Tmt()(t)})):i).map((function(t){return mmt(t)||t instanceof Date?t:""}))}var lSt=function(t){var e,n=t.type.displayName,r=t.props,i=r.stroke,o=r.fill;switch(n){case"Line":e=i;break;case"Area":case"Radar":e=i&&"none"!==i?i:o;break;default:e=o}return e},uSt=function(t,e,n,r,i){var o=Hmt(e.props.children,Kwt).filter((function(t){return function(t,e,n){return!!Tmt()(e)||("horizontal"===t?"yAxis"===e:"vertical"===t||"x"===n?"xAxis"===e:"y"!==n||"yAxis"===e)}(r,i,t.props.direction)}));if(o&&o.length){var a=o.map((function(t){return t.props.dataKey}));return t.reduce((function(t,e){var r=sSt(e,n);if(Tmt()(r))return t;var i=Array.isArray(r)?[uwt()(r),cwt()(r)]:[r,r],o=a.reduce((function(t,n){var r=sSt(e,n,0),o=i[0]-Math.abs(Array.isArray(r)?r[0]:r),a=i[1]+Math.abs(Array.isArray(r)?r[1]:r);return[Math.min(o,t[0]),Math.max(a,t[1])]}),[1/0,-1/0]);return[Math.min(o[0],t[0]),Math.max(o[1],t[1])]}),[1/0,-1/0])}return null},hSt=function(t,e,n,r,i){var o=e.map((function(e){var o=e.props.dataKey;return"number"===n&&o&&uSt(t,e,o,r)||cSt(t,o,n,i)}));if("number"===n)return o.reduce((function(t,e){return[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}),[1/0,-1/0]);var a={};return o.reduce((function(t,e){for(var n=0,r=e.length;n<r;n++)a[e[n]]||(a[e[n]]=!0,t.push(e[n]));return t}),[])},dSt=function(t,e){return"horizontal"===t&&"xAxis"===e||"vertical"===t&&"yAxis"===e||"centric"===t&&"angleAxis"===e||"radial"===t&&"radiusAxis"===e},pSt=function(t,e,n){if(!t)return null;var r=t.scale,i=t.duplicateDomain,o=t.type,a=t.range,s="scaleBand"===t.realScaleType?r.bandwidth()/2:2,c=(e||n)&&"category"===o&&r.bandwidth?r.bandwidth()/s:0;return c="angleAxis"===t.axisType&&(null===a||void 0===a?void 0:a.length)>=2?2*dmt(a[0]-a[1])*c:c,e&&(t.ticks||t.niceTicks)?(t.ticks||t.niceTicks).map((function(t){var e=i?i.indexOf(t):t;return{coordinate:r(e)+c,value:t,offset:c}})).filter((function(t){return!smt()(t.coordinate)})):t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map((function(t,e){return{coordinate:r(t)+c,value:t,index:e,offset:c}})):r.ticks&&!n?r.ticks(t.tickCount).map((function(t){return{coordinate:r(t)+c,value:t,offset:c}})):r.domain().map((function(t,e){return{coordinate:r(t)+c,value:i?i[t]:t,index:e,offset:c}}))},fSt=new WeakMap,mSt=function(t,e){if("function"!==typeof e)return t;fSt.has(t)||fSt.set(t,new WeakMap);var n=fSt.get(t);if(n.has(e))return n.get(e);var r=function(){t.apply(void 0,arguments),e.apply(void 0,arguments)};return n.set(e,r),r},gSt=1e-4,ySt={sign:function(t){var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0,a=0;a<e;++a){var s=smt()(t[a][n][1])?t[a][n][0]:t[a][n][1];s>=0?(t[a][n][0]=i,t[a][n][1]=i+s,i=t[a][n][1]):(t[a][n][0]=o,t[a][n][1]=o+s,o=t[a][n][1])}},expand:function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}nwt(t,e)}},none:nwt,silhouette:function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}nwt(t,e)}},wiggle:function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,c=0,l=0;s<i;++s){for(var u=t[e[s]],h=u[a][1]||0,d=(h-(u[a-1][1]||0))/2,p=0;p<s;++p){var f=t[e[p]];d+=(f[a][1]||0)-(f[a-1][1]||0)}c+=h,l+=d*h}n[a-1][1]+=n[a-1][0]=o,c&&(o-=l/c)}n[a-1][1]+=n[a-1][0]=o,nwt(t,e)}},positive:function(t){var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0;o<e;++o){var a=smt()(t[o][n][1])?t[o][n][0]:t[o][n][1];a>=0?(t[o][n][0]=i,t[o][n][1]=i+a,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}}},vSt=function(t,e,n){var r=e.map((function(t){return t.props.dataKey})),i=ySt[n],o=function(){var t=Lyt([]),e=iwt,n=nwt,r=owt;function i(i){var o,a,s=Array.from(t.apply(this,arguments),awt),c=s.length,l=-1;for(const t of i)for(o=0,++l;o<c;++o)(s[o][l]=[0,+r(t,s[o].key,l,i)]).data=t;for(o=0,a=rwt(e(s));o<c;++o)s[a[o]].index=o;return n(s,a),s}return i.keys=function(e){return arguments.length?(t="function"===typeof e?e:Lyt(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"===typeof t?t:Lyt(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?iwt:"function"===typeof t?t:Lyt(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?nwt:t,i):n},i}().keys(r).value((function(t,e){return+sSt(t,e,0)})).order(iwt).offset(i);return o(t)};var bSt=function(t){var e=t.axis,n=t.ticks,r=t.offset,i=t.bandSize,o=t.entry,a=t.index;if("category"===e.type)return n[a]?n[a].coordinate+r:null;var s=sSt(o,e.dataKey,e.domain[a]);return Tmt()(s)?null:e.scale(s)-i/2+r},xSt=function(t,e,n){return Object.keys(t).reduce((function(r,i){var o=t[i].stackedData.reduce((function(t,r){var i=function(t){return t.reduce((function(t,e){return[uwt()(e.concat([t[0]]).filter(fmt)),cwt()(e.concat([t[1]]).filter(fmt))]}),[1/0,-1/0])}(r.slice(e,n+1));return[Math.min(t[0],i[0]),Math.max(t[1],i[1])]}),[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]}),[1/0,-1/0]).map((function(t){return t===1/0||t===-1/0?0:t}))},_St=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,wSt=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,SSt=function(t,e,n){if(Amt()(t))return t(e,n);if(!Array.isArray(t))return e;var r=[];if(fmt(t[0]))r[0]=n?t[0]:Math.min(t[0],e[0]);else if(_St.test(t[0])){var i=+_St.exec(t[0])[1];r[0]=e[0]-i}else Amt()(t[0])?r[0]=t[0](e[0]):r[0]=e[0];if(fmt(t[1]))r[1]=n?t[1]:Math.max(t[1],e[1]);else if(wSt.test(t[1])){var o=+wSt.exec(t[1])[1];r[1]=e[1]+o}else Amt()(t[1])?r[1]=t[1](e[1]):r[1]=e[1];return r},TSt=function(t,e,n){if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=hgt()(e,(function(t){return t.coordinate})),o=1/0,a=1,s=i.length;a<s;a++){var c=i[a],l=i[a-1];o=Math.min((c.coordinate||0)-(l.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},ESt=function(t,e,n){return t&&t.length?fwt()(t,lmt()(n,"type.defaultProps.domain"))?e:t:e},ASt=function(t,e){var n=t.props,r=n.dataKey,i=n.name,o=n.unit,a=n.formatter,s=n.tooltipType,c=n.chartType,l=n.hide;return rSt(rSt({},Zmt(t,!1)),{},{dataKey:r,unit:o,formatter:a,name:i||r,color:lSt(t),value:sSt(e,r),type:s,payload:e,chartType:c,hide:l})};function MSt(t){return MSt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},MSt(t)}function OSt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function CSt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?OSt(Object(n),!0).forEach((function(e){kSt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OSt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function kSt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=MSt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=MSt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==MSt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var PSt=["Webkit","Moz","O","ms"];function ISt(t){return ISt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ISt(t)}function NSt(){return NSt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NSt.apply(this,arguments)}function RSt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function DSt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?RSt(Object(n),!0).forEach((function(e){VSt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RSt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function LSt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GSt(r.key),r)}}function FSt(t,e,n){return e=USt(e),function(t,e){if(e&&("object"===ISt(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return BSt(t)}(t,jSt()?Reflect.construct(e,n||[],USt(t).constructor):e.apply(t,n))}function jSt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(jSt=function(){return!!t})()}function USt(t){return USt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},USt(t)}function BSt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zSt(t,e){return zSt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zSt(t,e)}function VSt(t,e,n){return(e=GSt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GSt(t){var e=function(t,e){if("object"!=ISt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ISt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ISt(e)?e:String(e)}var WSt=function(t){return t.changedTouches&&!!t.changedTouches.length},HSt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),VSt(BSt(n=FSt(this,e,[t])),"handleDrag",(function(t){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(t):n.state.isSlideMoving&&n.handleSlideDrag(t)})),VSt(BSt(n),"handleTouchMove",(function(t){null!=t.changedTouches&&t.changedTouches.length>0&&n.handleDrag(t.changedTouches[0])})),VSt(BSt(n),"handleDragEnd",(function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},(function(){var t=n.props,e=t.endIndex,r=t.onDragEnd,i=t.startIndex;null===r||void 0===r||r({endIndex:e,startIndex:i})})),n.detachDragEndListener()})),VSt(BSt(n),"handleLeaveWrapper",(function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))})),VSt(BSt(n),"handleEnterSlideOrTraveller",(function(){n.setState({isTextActive:!0})})),VSt(BSt(n),"handleLeaveSlideOrTraveller",(function(){n.setState({isTextActive:!1})})),VSt(BSt(n),"handleSlideDragStart",(function(t){var e=WSt(t)?t.changedTouches[0]:t;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:e.pageX}),n.attachDragEndListener()})),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(BSt(n),"startX"),endX:n.handleTravellerDragStart.bind(BSt(n),"endX")},n.state={},n}var n,r,i;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zSt(t,e)}(e,t),n=e,r=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(t){var n=t.startX,r=t.endX,i=this.state.scaleValues,o=this.props,a=o.gap,s=o.data.length-1,c=Math.min(n,r),l=Math.max(n,r),u=e.getIndexInRange(i,c),h=e.getIndexInRange(i,l);return{startIndex:u-u%a,endIndex:h===s?s:h-h%a}}},{key:"getTextOfTick",value:function(t){var e=this.props,n=e.data,r=e.tickFormatter,i=e.dataKey,o=sSt(n[t],i,t);return Amt()(r)?r(o,t):o}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(t){var e=this.state,n=e.slideMoveStartX,r=e.startX,i=e.endX,o=this.props,a=o.x,s=o.width,c=o.travellerWidth,l=o.startIndex,u=o.endIndex,h=o.onChange,d=t.pageX-n;d>0?d=Math.min(d,a+s-c-i,a+s-c-r):d<0&&(d=Math.max(d,a-r,a-i));var p=this.getIndex({startX:r+d,endX:i+d});p.startIndex===l&&p.endIndex===u||!h||h(p),this.setState({startX:r+d,endX:i+d,slideMoveStartX:t.pageX})}},{key:"handleTravellerDragStart",value:function(t,e){var n=WSt(e)?e.changedTouches[0]:e;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:t,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(t){var e=this.state,n=e.brushMoveStartX,r=e.movingTravellerId,i=e.endX,o=e.startX,a=this.state[r],s=this.props,c=s.x,l=s.width,u=s.travellerWidth,h=s.onChange,d=s.gap,p=s.data,f={startX:this.state.startX,endX:this.state.endX},m=t.pageX-n;m>0?m=Math.min(m,c+l-u-a):m<0&&(m=Math.max(m,c-a)),f[r]=a+m;var g=this.getIndex(f),y=g.startIndex,v=g.endIndex;this.setState(VSt(VSt({},r,a+m),"brushMoveStartX",t.pageX),(function(){h&&function(){var t=p.length-1;return"startX"===r&&(i>o?y%d===0:v%d===0)||i<o&&v===t||"endX"===r&&(i>o?v%d===0:y%d===0)||i>o&&v===t}()&&h(g)}))}},{key:"handleTravellerMoveKeyboard",value:function(t,e){var n=this,r=this.state,i=r.scaleValues,o=r.startX,a=r.endX,s=this.state[e],c=i.indexOf(s);if(-1!==c){var l=c+t;if(!(-1===l||l>=i.length)){var u=i[l];"startX"===e&&u>=a||"endX"===e&&u<=o||this.setState(VSt({},e,u),(function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))}))}}}},{key:"renderBackground",value:function(){var t=this.props,e=t.x,n=t.y,r=t.width,i=t.height,o=t.fill,a=t.stroke;return k.createElement("rect",{stroke:a,fill:o,x:e,y:n,width:r,height:i})}},{key:"renderPanorama",value:function(){var t=this.props,e=t.x,n=t.y,r=t.width,i=t.height,o=t.data,a=t.children,s=t.padding,c=k.Children.only(a);return c?k.cloneElement(c,{x:e,y:n,width:r,height:i,margin:s,compact:!0,data:o}):null}},{key:"renderTravellerLayer",value:function(t,n){var r,i,o=this,a=this.props,s=a.y,c=a.travellerWidth,l=a.height,u=a.traveller,h=a.ariaLabel,d=a.data,p=a.startIndex,f=a.endIndex,m=Math.max(t,this.props.x),g=DSt(DSt({},Zmt(this.props,!1)),{},{x:m,y:s,width:c,height:l}),y=h||"Min value: ".concat(null===(r=d[p])||void 0===r?void 0:r.name,", Max value: ").concat(null===(i=d[f])||void 0===i?void 0:i.name);return k.createElement(wgt,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":t,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(t){["ArrowLeft","ArrowRight"].includes(t.key)&&(t.preventDefault(),t.stopPropagation(),o.handleTravellerMoveKeyboard("ArrowRight"===t.key?1:-1,n))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(u,g))}},{key:"renderSlide",value:function(t,e){var n=this.props,r=n.y,i=n.height,o=n.stroke,a=n.travellerWidth,s=Math.min(t,e)+a,c=Math.max(Math.abs(e-t)-a,0);return k.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:o,fillOpacity:.2,x:s,y:r,width:c,height:i})}},{key:"renderText",value:function(){var t=this.props,e=t.startIndex,n=t.endIndex,r=t.y,i=t.height,o=t.travellerWidth,a=t.stroke,s=this.state,c=s.startX,l=s.endX,u={pointerEvents:"none",fill:a};return k.createElement(wgt,{className:"recharts-brush-texts"},k.createElement(ewt,NSt({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,l)-5,y:r+i/2},u),this.getTextOfTick(e)),k.createElement(ewt,NSt({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,l)+o+5,y:r+i/2},u),this.getTextOfTick(n)))}},{key:"render",value:function(){var t=this.props,e=t.data,n=t.className,r=t.children,i=t.x,o=t.y,a=t.width,s=t.height,c=t.alwaysShowText,l=this.state,u=l.startX,h=l.endX,d=l.isTextActive,p=l.isSlideMoving,f=l.isTravellerMoving,m=l.isTravellerFocused;if(!e||!e.length||!fmt(i)||!fmt(o)||!fmt(a)||!fmt(s)||a<=0||s<=0)return null;var g=tmt("recharts-brush",n),y=1===k.Children.count(r),v=function(t,e){if(!t)return null;var n=t.replace(/(\w)/,(function(t){return t.toUpperCase()})),r=PSt.reduce((function(t,r){return CSt(CSt({},t),{},kSt({},r+n,e))}),{});return r[t]=e,r}("userSelect","none");return k.createElement(wgt,{className:g,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:v},this.renderBackground(),y&&this.renderPanorama(),this.renderSlide(u,h),this.renderTravellerLayer(u,"startX"),this.renderTravellerLayer(h,"endX"),(d||p||f||m||c)&&this.renderText())}}],i=[{key:"renderDefaultTraveller",value:function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.stroke,a=Math.floor(n+i/2)-1;return k.createElement(k.Fragment,null,k.createElement("rect",{x:e,y:n,width:r,height:i,fill:o,stroke:"none"}),k.createElement("line",{x1:e+1,y1:a,x2:e+r-1,y2:a,fill:"none",stroke:"#fff"}),k.createElement("line",{x1:e+1,y1:a+2,x2:e+r-1,y2:a+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(t,n){return k.isValidElement(t)?k.cloneElement(t,n):Amt()(t)?t(n):e.renderDefaultTraveller(n)}},{key:"getDerivedStateFromProps",value:function(t,e){var n=t.data,r=t.width,i=t.x,o=t.travellerWidth,a=t.updateId,s=t.startIndex,c=t.endIndex;if(n!==e.prevData||a!==e.prevUpdateId)return DSt({prevData:n,prevTravellerWidth:o,prevUpdateId:a,prevX:i,prevWidth:r},n&&n.length?function(t){var e=t.data,n=t.startIndex,r=t.endIndex,i=t.x,o=t.width,a=t.travellerWidth;if(!e||!e.length)return{};var s=e.length,c=lN().domain(lgt()(0,s)).range([i,i+o-a]),l=c.domain().map((function(t){return c(t)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(r),scale:c,scaleValues:l}}({data:n,width:r,x:i,travellerWidth:o,startIndex:s,endIndex:c}):{scale:null,scaleValues:null});if(e.scale&&(r!==e.prevWidth||i!==e.prevX||o!==e.prevTravellerWidth)){e.scale.range([i,i+r-o]);var l=e.scale.domain().map((function(t){return e.scale(t)}));return{prevData:n,prevTravellerWidth:o,prevUpdateId:a,prevX:i,prevWidth:r,startX:e.scale(t.startIndex),endX:e.scale(t.endIndex),scaleValues:l}}return null}},{key:"getIndexInRange",value:function(t,e){for(var n=0,r=t.length-1;r-n>1;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i}return e>=t[r]?r:n}}],r&&LSt(n.prototype,r),i&&LSt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(k.PureComponent);function qSt(t){return qSt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qSt(t)}function XSt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function YSt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?XSt(Object(n),!0).forEach((function(e){KSt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XSt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function KSt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=qSt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=qSt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qSt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}VSt(HSt,"displayName","Brush"),VSt(HSt,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ZSt=Math.PI/180,JSt=function(t){return 180*t/Math.PI},$St=function(t,e,n,r){return{x:t+Math.cos(-ZSt*r)*n,y:e+Math.sin(-ZSt*r)*n}},QSt=function(t,e){var n=t.x,r=t.y,i=e.cx,o=e.cy,a=function(t,e){var n=t.x,r=t.y,i=e.x,o=e.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(r-o,2))}({x:n,y:r},{x:i,y:o});if(a<=0)return{radius:a};var s=(n-i)/a,c=Math.acos(s);return r>o&&(c=2*Math.PI-c),{radius:a,angle:JSt(c),angleInRadian:c}},tTt=function(t,e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360);return t+360*Math.min(i,o)},eTt=function(t,e){var n=t.x,r=t.y,i=QSt({x:n,y:r},e),o=i.radius,a=i.angle,s=e.innerRadius,c=e.outerRadius;if(o<s||o>c)return!1;if(0===o)return!0;var l,u=function(t){var e=t.startAngle,n=t.endAngle,r=Math.floor(e/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:e-360*o,endAngle:n-360*o}}(e),h=u.startAngle,d=u.endAngle,p=a;if(h<=d){for(;p>d;)p-=360;for(;p<h;)p+=360;l=p>=h&&p<=d}else{for(;p>h;)p-=360;for(;p<d;)p+=360;l=p>=d&&p<=h}return l?YSt(YSt({},e),{},{radius:o,angle:tTt(p,e)}):null};function nTt(t){return nTt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nTt(t)}var rTt=["offset"];function iTt(t){return function(t){if(Array.isArray(t))return oTt(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return oTt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oTt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oTt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aTt(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sTt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function cTt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sTt(Object(n),!0).forEach((function(e){lTt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sTt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function lTt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=nTt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=nTt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nTt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uTt(){return uTt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uTt.apply(this,arguments)}var hTt=function(t){var e=t.value,n=t.formatter,r=Tmt()(t.children)?e:t.children;return Amt()(n)?n(r):r},dTt=function(t,e,n){var r,i,o=t.position,a=t.viewBox,s=t.offset,c=t.className,l=a,u=l.cx,h=l.cy,d=l.innerRadius,p=l.outerRadius,f=l.startAngle,m=l.endAngle,g=l.clockWise,y=(d+p)/2,v=function(t,e){return dmt(e-t)*Math.min(Math.abs(e-t),360)}(f,m),b=v>=0?1:-1;"insideStart"===o?(r=f+b*s,i=g):"insideEnd"===o?(r=m-b*s,i=!g):"end"===o&&(r=m+b*s,i=g),i=v<=0?i:!i;var x=$St(u,h,y,r),_=$St(u,h,y,r+359*(i?1:-1)),w="M".concat(x.x,",").concat(x.y,"\n    A").concat(y,",").concat(y,",0,1,").concat(i?0:1,",\n    ").concat(_.x,",").concat(_.y),S=Tmt()(t.id)?ymt("recharts-radial-line-"):t.id;return k.createElement("text",uTt({},n,{dominantBaseline:"central",className:tmt("recharts-radial-bar-label",c)}),k.createElement("defs",null,k.createElement("path",{id:S,d:w})),k.createElement("textPath",{xlinkHref:"#".concat(S)},e))},pTt=function(t){var e=t.viewBox,n=t.offset,r=t.position,i=e,o=i.cx,a=i.cy,s=i.innerRadius,c=i.outerRadius,l=(i.startAngle+i.endAngle)/2;if("outside"===r){var u=$St(o,a,c+n,l),h=u.x;return{x:h,y:u.y,textAnchor:h>=o?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var d=$St(o,a,(s+c)/2,l);return{x:d.x,y:d.y,textAnchor:"middle",verticalAnchor:"middle"}},fTt=function(t){var e=t.viewBox,n=t.parentViewBox,r=t.offset,i=t.position,o=e,a=o.x,s=o.y,c=o.width,l=o.height,u=l>=0?1:-1,h=u*r,d=u>0?"end":"start",p=u>0?"start":"end",f=c>=0?1:-1,m=f*r,g=f>0?"end":"start",y=f>0?"start":"end";if("top"===i)return cTt(cTt({},{x:a+c/2,y:s-u*r,textAnchor:"middle",verticalAnchor:d}),n?{height:Math.max(s-n.y,0),width:c}:{});if("bottom"===i)return cTt(cTt({},{x:a+c/2,y:s+l+h,textAnchor:"middle",verticalAnchor:p}),n?{height:Math.max(n.y+n.height-(s+l),0),width:c}:{});if("left"===i){var v={x:a-m,y:s+l/2,textAnchor:g,verticalAnchor:"middle"};return cTt(cTt({},v),n?{width:Math.max(v.x-n.x,0),height:l}:{})}if("right"===i){var b={x:a+c+m,y:s+l/2,textAnchor:y,verticalAnchor:"middle"};return cTt(cTt({},b),n?{width:Math.max(n.x+n.width-b.x,0),height:l}:{})}var x=n?{width:c,height:l}:{};return"insideLeft"===i?cTt({x:a+m,y:s+l/2,textAnchor:y,verticalAnchor:"middle"},x):"insideRight"===i?cTt({x:a+c-m,y:s+l/2,textAnchor:g,verticalAnchor:"middle"},x):"insideTop"===i?cTt({x:a+c/2,y:s+h,textAnchor:"middle",verticalAnchor:p},x):"insideBottom"===i?cTt({x:a+c/2,y:s+l-h,textAnchor:"middle",verticalAnchor:d},x):"insideTopLeft"===i?cTt({x:a+m,y:s+h,textAnchor:y,verticalAnchor:p},x):"insideTopRight"===i?cTt({x:a+c-m,y:s+h,textAnchor:g,verticalAnchor:p},x):"insideBottomLeft"===i?cTt({x:a+m,y:s+l-h,textAnchor:y,verticalAnchor:d},x):"insideBottomRight"===i?cTt({x:a+c-m,y:s+l-h,textAnchor:g,verticalAnchor:d},x):Omt()(i)&&(fmt(i.x)||pmt(i.x))&&(fmt(i.y)||pmt(i.y))?cTt({x:a+vmt(i.x,c),y:s+vmt(i.y,l),textAnchor:"end",verticalAnchor:"end"},x):cTt({x:a+c/2,y:s+l/2,textAnchor:"middle",verticalAnchor:"middle"},x)},mTt=function(t){return"cx"in t&&fmt(t.cx)};function gTt(t){var e,n=t.offset,r=cTt({offset:void 0===n?5:n},aTt(t,rTt)),i=r.viewBox,o=r.position,a=r.value,s=r.children,c=r.content,l=r.className,u=void 0===l?"":l,h=r.textBreakAll;if(!i||Tmt()(a)&&Tmt()(s)&&!(0,k.isValidElement)(c)&&!Amt()(c))return null;if((0,k.isValidElement)(c))return(0,k.cloneElement)(c,r);if(Amt()(c)){if(e=(0,k.createElement)(c,r),(0,k.isValidElement)(e))return e}else e=hTt(r);var d=mTt(i),p=Zmt(r,!0);if(d&&("insideStart"===o||"insideEnd"===o||"end"===o))return dTt(r,e,p);var f=d?pTt(r):fTt(r);return k.createElement(ewt,uTt({className:tmt("recharts-label",u)},p,f,{breakAll:h}),e)}gTt.displayName="Label";var yTt=function(t){var e=t.cx,n=t.cy,r=t.angle,i=t.startAngle,o=t.endAngle,a=t.r,s=t.radius,c=t.innerRadius,l=t.outerRadius,u=t.x,h=t.y,d=t.top,p=t.left,f=t.width,m=t.height,g=t.clockWise,y=t.labelViewBox;if(y)return y;if(fmt(f)&&fmt(m)){if(fmt(u)&&fmt(h))return{x:u,y:h,width:f,height:m};if(fmt(d)&&fmt(p))return{x:d,y:p,width:f,height:m}}return fmt(u)&&fmt(h)?{x:u,y:h,width:0,height:0}:fmt(e)&&fmt(n)?{cx:e,cy:n,startAngle:i||r||0,endAngle:o||r||0,innerRadius:c||0,outerRadius:l||s||a||0,clockWise:g}:t.viewBox?t.viewBox:{}};gTt.parseViewBox=yTt,gTt.renderCallByParent=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=yTt(t),o=Hmt(r,gTt).map((function(t,n){return(0,k.cloneElement)(t,{viewBox:e||i,key:"label-".concat(n)})}));if(!n)return o;var a=function(t,e){return t?!0===t?k.createElement(gTt,{key:"label-implicit",viewBox:e}):mmt(t)?k.createElement(gTt,{key:"label-implicit",viewBox:e,value:t}):(0,k.isValidElement)(t)?t.type===gTt?(0,k.cloneElement)(t,{key:"label-implicit",viewBox:e}):k.createElement(gTt,{key:"label-implicit",content:t,viewBox:e}):Amt()(t)?k.createElement(gTt,{key:"label-implicit",content:t,viewBox:e}):Omt()(t)?k.createElement(gTt,uTt({viewBox:e},t,{key:"label-implicit"})):null:null}(t.label,e||i);return[a].concat(iTt(o))};var vTt=function(t,e){var n=t.alwaysShow,r=t.ifOverflow;return n&&(r="extendDomain"),r===e},bTt=__webpack_require__(1733),xTt=__webpack_require__.n(bTt),_Tt=__webpack_require__(7002),wTt=__webpack_require__.n(_Tt),STt=function(t){return null};STt.displayName="Cell";var TTt=__webpack_require__(4065),ETt=__webpack_require__.n(TTt);function ATt(t){return ATt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ATt(t)}var MTt=["valueAccessor"],OTt=["data","dataKey","clockWise","id","textBreakAll"];function CTt(t){return function(t){if(Array.isArray(t))return kTt(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return kTt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kTt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kTt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PTt(){return PTt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PTt.apply(this,arguments)}function ITt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function NTt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ITt(Object(n),!0).forEach((function(e){RTt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ITt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function RTt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=ATt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ATt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ATt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DTt(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var LTt=function(t){return Array.isArray(t.value)?ETt()(t.value):t.value};function FTt(t){var e=t.valueAccessor,n=void 0===e?LTt:e,r=DTt(t,MTt),i=r.data,o=r.dataKey,a=r.clockWise,s=r.id,c=r.textBreakAll,l=DTt(r,OTt);return i&&i.length?k.createElement(wgt,{className:"recharts-label-list"},i.map((function(t,e){var r=Tmt()(o)?n(t,e):sSt(t&&t.payload,o),i=Tmt()(s)?{}:{id:"".concat(s,"-").concat(e)};return k.createElement(gTt,PTt({},Zmt(t,!0),l,i,{parentViewBox:t.parentViewBox,value:r,textBreakAll:c,viewBox:gTt.parseViewBox(Tmt()(a)?t:NTt(NTt({},t),{},{clockWise:a})),key:"label-".concat(e),index:e}))}))):null}FTt.displayName="LabelList",FTt.renderCallByParent=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||!t.children&&n&&!t.label)return null;var r=Hmt(t.children,FTt).map((function(t,n){return(0,k.cloneElement)(t,{data:e,key:"labelList-".concat(n)})}));if(!n)return r;var i=function(t,e){return t?!0===t?k.createElement(FTt,{key:"labelList-implicit",data:e}):k.isValidElement(t)||Amt()(t)?k.createElement(FTt,{key:"labelList-implicit",data:e,content:t}):Omt()(t)?k.createElement(FTt,PTt({data:e},t,{key:"labelList-implicit"})):null:null}(t.label,e);return[i].concat(CTt(r))};var jTt=__webpack_require__(2322),UTt=__webpack_require__.n(jTt),BTt=__webpack_require__(6361),zTt=__webpack_require__.n(BTt);function VTt(t){return VTt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},VTt(t)}function GTt(){return GTt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GTt.apply(this,arguments)}function WTt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return HTt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HTt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HTt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qTt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function XTt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qTt(Object(n),!0).forEach((function(e){YTt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qTt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function YTt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=VTt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=VTt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==VTt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var KTt=function(t,e,n,r,i){var o,a=n-r;return o="M ".concat(t,",").concat(e),o+="L ".concat(t+n,",").concat(e),o+="L ".concat(t+n-a/2,",").concat(e+i),o+="L ".concat(t+n-a/2-r,",").concat(e+i),o+="L ".concat(t,",").concat(e," Z")},ZTt={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},JTt=function(t){var e=XTt(XTt({},ZTt),t),n=(0,k.useRef)(),r=WTt((0,k.useState)(-1),2),i=r[0],o=r[1];(0,k.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var t=n.current.getTotalLength();t&&o(t)}catch(cCt){}}),[]);var a=e.x,s=e.y,c=e.upperWidth,l=e.lowerWidth,u=e.height,h=e.className,d=e.animationEasing,p=e.animationDuration,f=e.animationBegin,m=e.isUpdateAnimationActive;if(a!==+a||s!==+s||c!==+c||l!==+l||u!==+u||0===c&&0===l||0===u)return null;var g=tmt("recharts-trapezoid",h);return m?k.createElement(s_t,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:u,x:a,y:s},to:{upperWidth:c,lowerWidth:l,height:u,x:a,y:s},duration:p,animationEasing:d,isActive:m},(function(t){var r=t.upperWidth,o=t.lowerWidth,a=t.height,s=t.x,c=t.y;return k.createElement(s_t,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:p,easing:d},k.createElement("path",GTt({},Zmt(e,!0),{className:g,d:KTt(s,c,r,o,a),ref:n})))})):k.createElement("g",null,k.createElement("path",GTt({},Zmt(e,!0),{className:g,d:KTt(a,s,c,l,u)})))};function $Tt(t){return $Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$Tt(t)}function QTt(){return QTt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QTt.apply(this,arguments)}function tEt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function eEt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tEt(Object(n),!0).forEach((function(e){nEt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tEt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nEt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=$Tt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=$Tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$Tt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rEt=function(t){var e=t.cx,n=t.cy,r=t.radius,i=t.angle,o=t.sign,a=t.isExternal,s=t.cornerRadius,c=t.cornerIsExternal,l=s*(a?1:-1)+r,u=Math.asin(s/l)/ZSt,h=c?i:i+o*u,d=c?i-o*u:i;return{center:$St(e,n,l,h),circleTangency:$St(e,n,r,h),lineTangency:$St(e,n,l*Math.cos(u*ZSt),d),theta:u}},iEt=function(t){var e=t.cx,n=t.cy,r=t.innerRadius,i=t.outerRadius,o=t.startAngle,a=function(t,e){return dmt(e-t)*Math.min(Math.abs(e-t),359.999)}(o,t.endAngle),s=o+a,c=$St(e,n,i,o),l=$St(e,n,i,s),u="M ".concat(c.x,",").concat(c.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(a)>180),",").concat(+(o>s),",\n    ").concat(l.x,",").concat(l.y,"\n  ");if(r>0){var h=$St(e,n,r,o),d=$St(e,n,r,s);u+="L ".concat(d.x,",").concat(d.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(a)>180),",").concat(+(o<=s),",\n            ").concat(h.x,",").concat(h.y," Z")}else u+="L ".concat(e,",").concat(n," Z");return u},oEt={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},aEt=function(t){var e=eEt(eEt({},oEt),t),n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,c=e.cornerIsExternal,l=e.startAngle,u=e.endAngle,h=e.className;if(o<i||l===u)return null;var d,p=tmt("recharts-sector",h),f=o-i,m=vmt(a,f,0,!0);return d=m>0&&Math.abs(l-u)<360?function(t){var e=t.cx,n=t.cy,r=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,a=t.forceCornerRadius,s=t.cornerIsExternal,c=t.startAngle,l=t.endAngle,u=dmt(l-c),h=rEt({cx:e,cy:n,radius:i,angle:c,sign:u,cornerRadius:o,cornerIsExternal:s}),d=h.circleTangency,p=h.lineTangency,f=h.theta,m=rEt({cx:e,cy:n,radius:i,angle:l,sign:-u,cornerRadius:o,cornerIsExternal:s}),g=m.circleTangency,y=m.lineTangency,v=m.theta,b=s?Math.abs(c-l):Math.abs(c-l)-f-v;if(b<0)return a?"M ".concat(p.x,",").concat(p.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*o,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*-o,",0\n      "):iEt({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:l});var x="M ".concat(p.x,",").concat(p.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(d.x,",").concat(d.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(y.x,",").concat(y.y,"\n  ");if(r>0){var _=rEt({cx:e,cy:n,radius:r,angle:c,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),w=_.circleTangency,S=_.lineTangency,T=_.theta,E=rEt({cx:e,cy:n,radius:r,angle:l,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),A=E.circleTangency,M=E.lineTangency,O=E.theta,C=s?Math.abs(c-l):Math.abs(c-l)-T-O;if(C<0&&0===o)return"".concat(x,"L").concat(e,",").concat(n,"Z");x+="L".concat(M.x,",").concat(M.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(A.x,",").concat(A.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(C>180),",").concat(+(u>0),",").concat(w.x,",").concat(w.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"Z")}else x+="L".concat(e,",").concat(n,"Z");return x}({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(m,f/2),forceCornerRadius:s,cornerIsExternal:c,startAngle:l,endAngle:u}):iEt({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:l,endAngle:u}),k.createElement("path",QTt({},Zmt(e,!0),{className:p,d:d,role:"img"}))},sEt=["option","shapeType","propTransformer","activeClassName","isActive"];function cEt(t){return cEt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cEt(t)}function lEt(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function uEt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function hEt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?uEt(Object(n),!0).forEach((function(e){dEt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uEt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function dEt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=cEt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=cEt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cEt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pEt(t,e){return hEt(hEt({},e),t)}function fEt(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return k.createElement(v_t,n);case"trapezoid":return k.createElement(JTt,n);case"sector":return k.createElement(aEt,n);case"symbols":if(function(t,e){return"symbols"===t}(e))return k.createElement(fvt,n);break;default:return null}}function mEt(t){var e,n=t.option,r=t.shapeType,i=t.propTransformer,o=void 0===i?pEt:i,a=t.activeClassName,s=void 0===a?"recharts-active-shape":a,c=t.isActive,l=lEt(t,sEt);if((0,k.isValidElement)(n))e=(0,k.cloneElement)(n,hEt(hEt({},l),function(t){return(0,k.isValidElement)(t)?t.props:t}(n)));else if(Amt()(n))e=n(l);else if(UTt()(n)&&!zTt()(n)){var u=o(n,l);e=k.createElement(fEt,{shapeType:r,elementProps:u})}else{var h=l;e=k.createElement(fEt,{shapeType:r,elementProps:h})}return c?k.createElement(wgt,{className:s},e):e}function gEt(t,e){return null!=e&&"trapezoids"in t.props}function yEt(t,e){return null!=e&&"sectors"in t.props}function vEt(t,e){return null!=e&&"points"in t.props}function bEt(t,e){var n,r,i=t.x===(null===e||void 0===e||null===(n=e.labelViewBox)||void 0===n?void 0:n.x)||t.x===e.x,o=t.y===(null===e||void 0===e||null===(r=e.labelViewBox)||void 0===r?void 0:r.y)||t.y===e.y;return i&&o}function xEt(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function _Et(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function wEt(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=function(t,e){var n;return gEt(t,e)?n="trapezoids":yEt(t,e)?n="sectors":vEt(t,e)&&(n="points"),n}(n,e),o=function(t,e){var n,r;return gEt(t,e)?null===(n=e.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:yEt(t,e)?null===(r=e.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:vEt(t,e)?e.payload:{}}(n,e),a=r.filter((function(t,r){var a=fwt()(o,t),s=n.props[i].filter((function(t){var r=function(t,e){var n;return gEt(t,e)?n=bEt:yEt(t,e)?n=xEt:vEt(t,e)&&(n=_Et),n}(n,e);return r(t,e)})),c=n.props[i].indexOf(s[s.length-1]);return a&&r===c}));return r.indexOf(a[a.length-1])}var SEt=["x","y"];function TEt(t){return TEt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},TEt(t)}function EEt(){return EEt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EEt.apply(this,arguments)}function AEt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function MEt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?AEt(Object(n),!0).forEach((function(e){OEt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AEt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function OEt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=TEt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=TEt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==TEt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CEt(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kEt(t,e){var n=t.x,r=t.y,i=CEt(t,SEt),o="".concat(n),a=parseInt(o,10),s="".concat(r),c=parseInt(s,10),l="".concat(e.height||i.height),u=parseInt(l,10),h="".concat(e.width||i.width),d=parseInt(h,10);return MEt(MEt(MEt(MEt(MEt({},e),i),a?{x:a}:{}),c?{y:c}:{}),{},{height:u,width:d,name:e.name,radius:e.radius})}function PEt(t){return k.createElement(mEt,EEt({shapeType:"rectangle",propTransformer:kEt,activeClassName:"recharts-active-bar"},t))}var IEt,NEt=["value","background"];function REt(t){return REt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},REt(t)}function DEt(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function LEt(){return LEt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LEt.apply(this,arguments)}function FEt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jEt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?FEt(Object(n),!0).forEach((function(e){HEt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FEt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function UEt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qEt(r.key),r)}}function BEt(t,e,n){return e=VEt(e),function(t,e){if(e&&("object"===REt(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return GEt(t)}(t,zEt()?Reflect.construct(e,n||[],VEt(t).constructor):e.apply(t,n))}function zEt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(zEt=function(){return!!t})()}function VEt(t){return VEt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},VEt(t)}function GEt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WEt(t,e){return WEt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},WEt(t,e)}function HEt(t,e,n){return(e=qEt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qEt(t){var e=function(t,e){if("object"!=REt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=REt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==REt(e)?e:String(e)}var XEt=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return HEt(GEt(t=BEt(this,e,[].concat(r))),"state",{isAnimationFinished:!1}),HEt(GEt(t),"id",ymt("recharts-bar-")),HEt(GEt(t),"handleAnimationEnd",(function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),e&&e()})),HEt(GEt(t),"handleAnimationStart",(function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),e&&e()})),t}var n,r,i;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WEt(t,e)}(e,t),n=e,r=[{key:"renderRectanglesStatically",value:function(t){var e=this,n=this.props,r=n.shape,i=n.dataKey,o=n.activeIndex,a=n.activeBar,s=Zmt(this.props,!1);return t&&t.map((function(t,n){var c=n===o,l=c?a:r,u=jEt(jEt(jEt({},s),t),{},{isActive:c,option:l,index:n,dataKey:i,onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd});return k.createElement(wgt,LEt({className:"recharts-bar-rectangle"},Lmt(e.props,t,n),{key:"rectangle-".concat(null===t||void 0===t?void 0:t.x,"-").concat(null===t||void 0===t?void 0:t.y,"-").concat(null===t||void 0===t?void 0:t.value)}),k.createElement(PEt,u))}))}},{key:"renderRectanglesWithAnimation",value:function(){var t=this,e=this.props,n=e.data,r=e.layout,i=e.isAnimationActive,o=e.animationBegin,a=e.animationDuration,s=e.animationEasing,c=e.animationId,l=this.state.prevData;return k.createElement(s_t,{begin:o,duration:a,isActive:i,easing:s,from:{t:0},to:{t:1},key:"bar-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(e){var i=e.t,o=n.map((function(t,e){var n=l&&l[e];if(n){var o=xmt(n.x,t.x),a=xmt(n.y,t.y),s=xmt(n.width,t.width),c=xmt(n.height,t.height);return jEt(jEt({},t),{},{x:o(i),y:a(i),width:s(i),height:c(i)})}if("horizontal"===r){var u=xmt(0,t.height)(i);return jEt(jEt({},t),{},{y:t.y+t.height-u,height:u})}var h=xmt(0,t.width)(i);return jEt(jEt({},t),{},{width:h})}));return k.createElement(wgt,null,t.renderRectanglesStatically(o))}))}},{key:"renderRectangles",value:function(){var t=this.props,e=t.data,n=t.isAnimationActive,r=this.state.prevData;return!(n&&e&&e.length)||r&&fwt()(r,e)?this.renderRectanglesStatically(e):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var t=this,e=this.props,n=e.data,r=e.dataKey,i=e.activeIndex,o=Zmt(this.props.background,!1);return n.map((function(e,n){e.value;var a=e.background,s=DEt(e,NEt);if(!a)return null;var c=jEt(jEt(jEt(jEt(jEt({},s),{},{fill:"#eee"},a),o),Lmt(t.props,e,n)),{},{onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd,dataKey:r,index:n,key:"background-bar-".concat(n),className:"recharts-bar-background-rectangle"});return k.createElement(PEt,LEt({option:t.props.background,isActive:n===i},c))}))}},{key:"renderErrorBar",value:function(t,e){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,r=n.data,i=n.xAxis,o=n.yAxis,a=n.layout,s=Hmt(n.children,Kwt);if(!s)return null;var c="vertical"===a?r[0].height/2:r[0].width/2,l=function(t,e){var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:sSt(t,e)}},u={clipPath:t?"url(#clipPath-".concat(e,")"):null};return k.createElement(wgt,u,s.map((function(t){return k.cloneElement(t,{key:"error-bar-".concat(e,"-").concat(t.props.dataKey),data:r,xAxis:i,yAxis:o,layout:a,offset:c,dataPointFormatter:l})})))}},{key:"render",value:function(){var t=this.props,e=t.hide,n=t.data,r=t.className,i=t.xAxis,o=t.yAxis,a=t.left,s=t.top,c=t.width,l=t.height,u=t.isAnimationActive,h=t.background,d=t.id;if(e||!n||!n.length)return null;var p=this.state.isAnimationFinished,f=tmt("recharts-bar",r),m=i&&i.allowDataOverflow,g=o&&o.allowDataOverflow,y=m||g,v=Tmt()(d)?this.id:d;return k.createElement(wgt,{className:f},m||g?k.createElement("defs",null,k.createElement("clipPath",{id:"clipPath-".concat(v)},k.createElement("rect",{x:m?a:a-c/2,y:g?s:s-l/2,width:m?c:2*c,height:g?l:2*l}))):null,k.createElement(wgt,{className:"recharts-bar-rectangles",clipPath:y?"url(#clipPath-".concat(v,")"):null},h?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(y,v),(!u||p)&&FTt.renderCallByParent(this.props,n))}}],i=[{key:"getDerivedStateFromProps",value:function(t,e){return t.animationId!==e.prevAnimationId?{prevAnimationId:t.animationId,curData:t.data,prevData:e.curData}:t.data!==e.curData?{curData:t.data}:null}}],r&&UEt(n.prototype,r),i&&UEt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(k.PureComponent);function YEt(t){return YEt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YEt(t)}function KEt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,QEt(r.key),r)}}function ZEt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function JEt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ZEt(Object(n),!0).forEach((function(e){$Et(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZEt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $Et(t,e,n){return(e=QEt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QEt(t){var e=function(t,e){if("object"!=YEt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=YEt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YEt(e)?e:String(e)}IEt=XEt,HEt(XEt,"displayName","Bar"),HEt(XEt,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Zgt.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),HEt(XEt,"getComposedData",(function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,a=t.yAxis,s=t.xAxisTicks,c=t.yAxisTicks,l=t.stackedData,u=t.dataStartIndex,h=t.displayedData,d=t.offset,p=function(t,e){if(!t)return null;for(var n=0,r=t.length;n<r;n++)if(t[n].item===e)return t[n].position;return null}(r,n);if(!p)return null;var f=e.layout,m=n.props,g=m.dataKey,y=m.children,v=m.minPointSize,b="horizontal"===f?a:o,x=l?b.scale.domain():null,_=function(t){var e=t.numericAxis,n=e.scale.domain();if("number"===e.type){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]}({numericAxis:b}),w=Hmt(y,STt),S=h.map((function(t,e){var r,h,d,m,y,b;l?r=function(t,e){if(!e||2!==e.length||!fmt(e[0])||!fmt(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!fmt(t[0])||t[0]<n)&&(i[0]=n),(!fmt(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i}(l[u+e],x):(r=sSt(t,g),Array.isArray(r)||(r=[_,r]));var S=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n,r){if("number"===typeof t)return t;var i="number"===typeof n;return i?t(n,r):(i||fgt(!1),e)}}(v,IEt.defaultProps.minPointSize)(r[1],e);if("horizontal"===f){var T,E=[a.scale(r[0]),a.scale(r[1])],A=E[0],M=E[1];h=bSt({axis:o,ticks:s,bandSize:i,offset:p.offset,entry:t,index:e}),d=null!==(T=null!==M&&void 0!==M?M:A)&&void 0!==T?T:void 0,m=p.size;var O=A-M;if(y=Number.isNaN(O)?0:O,b={x:h,y:a.y,width:m,height:a.height},Math.abs(S)>0&&Math.abs(y)<Math.abs(S)){var C=dmt(y||S)*(Math.abs(S)-Math.abs(y));d-=C,y+=C}}else{var k=[o.scale(r[0]),o.scale(r[1])],P=k[0],I=k[1];if(h=P,d=bSt({axis:a,ticks:c,bandSize:i,offset:p.offset,entry:t,index:e}),m=I-P,y=p.size,b={x:o.x,y:d,width:o.width,height:y},Math.abs(S)>0&&Math.abs(m)<Math.abs(S))m+=dmt(m||S)*(Math.abs(S)-Math.abs(m))}return jEt(jEt(jEt({},t),{},{x:h,y:d,width:m,height:y,value:l?r:r[1],payload:t,background:b},w&&w[e]&&w[e].props),{},{tooltipPayload:[ASt(n,t)],tooltipPosition:{x:h+m/2,y:d+y/2}})}));return jEt({data:S,layout:f},d)}));var tAt=function(t,e){var n=t.x,r=t.y,i=e.x,o=e.y;return{x:Math.min(n,i),y:Math.min(r,o),width:Math.abs(i-n),height:Math.abs(o-r)}},eAt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scale=e}var e,n,r;return e=t,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.bandAware,r=e.position;if(void 0!==t){if(r)switch(r){case"start":default:return this.scale(t);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i;case"end":var o=this.bandwidth?this.bandwidth():0;return this.scale(t)+o}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}return this.scale(t)}}},{key:"isInRange",value:function(t){var e=this.range(),n=e[0],r=e[e.length-1];return n<=r?t>=n&&t<=r:t>=r&&t<=n}}],r=[{key:"create",value:function(e){return new t(e)}}],n&&KEt(e.prototype,n),r&&KEt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();$Et(eAt,"EPS",1e-4);var nAt=function(t){var e=Object.keys(t).reduce((function(e,n){return JEt(JEt({},e),{},$Et({},n,eAt.create(t[n])))}),{});return JEt(JEt({},e),{},{apply:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,i=n.position;return xTt()(t,(function(t,n){return e[n].apply(t,{bandAware:r,position:i})}))},isInRange:function(t){return wTt()(t,(function(t,n){return e[n].isInRange(t)}))}})};var rAt=function(t){var e=t.width,n=t.height,r=function(t){return(t%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),i=r*Math.PI/180,o=Math.atan(n/e),a=i>o&&i<Math.PI-o?n/Math.sin(i):e/Math.cos(i);return Math.abs(a)};function iAt(t){return iAt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iAt(t)}function oAt(){return oAt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oAt.apply(this,arguments)}function aAt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function sAt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?aAt(Object(n),!0).forEach((function(e){cAt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aAt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function cAt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=iAt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=iAt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iAt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lAt(t){var e=t.x,n=t.y,r=t.r,i=t.alwaysShow,o=t.clipPathId,a=mmt(e),s=mmt(n);if(wmt(void 0===i,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!a||!s)return null;var c=function(t){var e=t.x,n=t.y,r=t.xAxis,i=t.yAxis,o=nAt({x:r.scale,y:i.scale}),a=o.apply({x:e,y:n},{bandAware:!0});return vTt(t,"discard")&&!o.isInRange(a)?null:a}(t);if(!c)return null;var l=c.x,u=c.y,h=t.shape,d=t.className,p=sAt(sAt({clipPath:vTt(t,"hidden")?"url(#".concat(o,")"):void 0},Zmt(t,!0)),{},{cx:l,cy:u});return k.createElement(wgt,{className:tmt("recharts-reference-dot",d)},lAt.renderDot(h,p),gTt.renderCallByParent(t,{x:l-r,y:u-r,width:2*r,height:2*r}))}lAt.displayName="ReferenceDot",lAt.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1},lAt.renderDot=function(t,e){return k.isValidElement(t)?k.cloneElement(t,e):Amt()(t)?t(e):k.createElement(Gvt,oAt({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"}))};var uAt=__webpack_require__(4597),hAt=__webpack_require__.n(uAt),dAt=(__webpack_require__(8990),__webpack_require__(5797)),pAt=__webpack_require__.n(dAt)()((function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}}),(function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}));var fAt=(0,k.createContext)(void 0),mAt=(0,k.createContext)(void 0),gAt=(0,k.createContext)(void 0),yAt=(0,k.createContext)({}),vAt=(0,k.createContext)(void 0),bAt=(0,k.createContext)(0),xAt=(0,k.createContext)(0),_At=function(t){var e=t.state,n=e.xAxisMap,r=e.yAxisMap,i=e.offset,o=t.clipPathId,a=t.children,s=t.width,c=t.height,l=pAt(i);return k.createElement(fAt.Provider,{value:n},k.createElement(mAt.Provider,{value:r},k.createElement(yAt.Provider,{value:i},k.createElement(gAt.Provider,{value:l},k.createElement(vAt.Provider,{value:o},k.createElement(bAt.Provider,{value:c},k.createElement(xAt.Provider,{value:s},a)))))))};var wAt=function(t){var e=(0,k.useContext)(fAt);null==e&&fgt(!1);var n=e[t];return null==n&&fgt(!1),n},SAt=function(t){var e=(0,k.useContext)(mAt);null==e&&fgt(!1);var n=e[t];return null==n&&fgt(!1),n},TAt=function(){return(0,k.useContext)(xAt)},EAt=function(){return(0,k.useContext)(bAt)};function AAt(t){return AAt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AAt(t)}function MAt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function OAt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?MAt(Object(n),!0).forEach((function(e){CAt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MAt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function CAt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=AAt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=AAt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AAt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kAt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return PAt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PAt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PAt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function IAt(){return IAt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IAt.apply(this,arguments)}function NAt(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,o=t.yAxisId,a=t.shape,s=t.className,c=t.alwaysShow,l=(0,k.useContext)(vAt),u=wAt(i),h=SAt(o),d=(0,k.useContext)(gAt);if(!l||!d)return null;wmt(void 0===c,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=function(t,e,n,r,i,o,a,s,c){var l=i.x,u=i.y,h=i.width,d=i.height;if(n){var p=c.y,f=t.y.apply(p,{position:o});if(vTt(c,"discard")&&!t.y.isInRange(f))return null;var m=[{x:l+h,y:f},{x:l,y:f}];return"left"===s?m.reverse():m}if(e){var g=c.x,y=t.x.apply(g,{position:o});if(vTt(c,"discard")&&!t.x.isInRange(y))return null;var v=[{x:y,y:u+d},{x:y,y:u}];return"top"===a?v.reverse():v}if(r){var b=c.segment.map((function(e){return t.apply(e,{position:o})}));return vTt(c,"discard")&&hAt()(b,(function(e){return!t.isInRange(e)}))?null:b}return null}(nAt({x:u.scale,y:h.scale}),mmt(e),mmt(n),r&&2===r.length,d,t.position,u.orientation,h.orientation,t);if(!p)return null;var f=kAt(p,2),m=f[0],g=m.x,y=m.y,v=f[1],b=v.x,x=v.y,_=OAt(OAt({clipPath:vTt(t,"hidden")?"url(#".concat(l,")"):void 0},Zmt(t,!0)),{},{x1:g,y1:y,x2:b,y2:x});return k.createElement(wgt,{className:tmt("recharts-reference-line",s)},function(t,e){return k.isValidElement(t)?k.cloneElement(t,e):Amt()(t)?t(e):k.createElement("line",IAt({},e,{className:"recharts-reference-line-line"}))}(a,_),gTt.renderCallByParent(t,function(t){var e=t.x1,n=t.y1,r=t.x2,i=t.y2;return tAt({x:e,y:n},{x:r,y:i})}({x1:g,y1:y,x2:b,y2:x})))}function RAt(t){return RAt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},RAt(t)}function DAt(){return DAt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DAt.apply(this,arguments)}function LAt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function FAt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?LAt(Object(n),!0).forEach((function(e){jAt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LAt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function jAt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=RAt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=RAt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==RAt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}NAt.displayName="ReferenceLine",NAt.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function UAt(t){var e=t.x1,n=t.x2,r=t.y1,i=t.y2,o=t.className,a=t.alwaysShow,s=t.clipPathId;wmt(void 0===a,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=mmt(e),l=mmt(n),u=mmt(r),h=mmt(i),d=t.shape;if(!c&&!l&&!u&&!h&&!d)return null;var p=function(t,e,n,r,i){var o=i.x1,a=i.x2,s=i.y1,c=i.y2,l=i.xAxis,u=i.yAxis;if(!l||!u)return null;var h=nAt({x:l.scale,y:u.scale}),d={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(s,{position:"start"}):h.y.rangeMin},p={x:e?h.x.apply(a,{position:"end"}):h.x.rangeMax,y:r?h.y.apply(c,{position:"end"}):h.y.rangeMax};return!vTt(i,"discard")||h.isInRange(d)&&h.isInRange(p)?tAt(d,p):null}(c,l,u,h,t);if(!p&&!d)return null;var f=vTt(t,"hidden")?"url(#".concat(s,")"):void 0;return k.createElement(wgt,{className:tmt("recharts-reference-area",o)},UAt.renderRect(d,FAt(FAt({clipPath:f},Zmt(t,!0)),p)),gTt.renderCallByParent(t,p))}function BAt(t){return function(t){if(Array.isArray(t))return zAt(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return zAt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zAt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zAt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}UAt.displayName="ReferenceArea",UAt.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1},UAt.renderRect=function(t,e){return k.isValidElement(t)?k.cloneElement(t,e):Amt()(t)?t(e):k.createElement(v_t,DAt({},e,{className:"recharts-reference-area-rect"}))};var VAt=function(t,e,n,r,i){var o=Hmt(t,NAt),a=Hmt(t,lAt),s=[].concat(BAt(o),BAt(a)),c=Hmt(t,UAt),l="".concat(r,"Id"),u=r[0],h=e;if(s.length&&(h=s.reduce((function(t,e){if(e.props[l]===n&&vTt(e.props,"extendDomain")&&fmt(e.props[u])){var r=e.props[u];return[Math.min(t[0],r),Math.max(t[1],r)]}return t}),h)),c.length){var d="".concat(u,"1"),p="".concat(u,"2");h=c.reduce((function(t,e){if(e.props[l]===n&&vTt(e.props,"extendDomain")&&fmt(e.props[d])&&fmt(e.props[p])){var r=e.props[d],i=e.props[p];return[Math.min(t[0],r,i),Math.max(t[1],r,i)]}return t}),h)}return i&&i.length&&(h=i.reduce((function(t,e){return fmt(e)?[Math.min(t[0],e),Math.max(t[1],e)]:t}),h)),h},GAt=__webpack_require__(7283),WAt=new(__webpack_require__.n(GAt)()),HAt="recharts.syncMouseEvents";function qAt(t){return qAt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qAt(t)}function XAt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,KAt(r.key),r)}}function YAt(t,e,n){return(e=KAt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KAt(t){var e=function(t,e){if("object"!=qAt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=qAt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qAt(e)?e:String(e)}var ZAt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),YAt(this,"activeIndex",0),YAt(this,"coordinateList",[]),YAt(this,"layout","horizontal")}var e,n,r;return e=t,n=[{key:"setDetails",value:function(t){var e,n=t.coordinateList,r=void 0===n?null:n,i=t.container,o=void 0===i?null:i,a=t.layout,s=void 0===a?null:a,c=t.offset,l=void 0===c?null:c,u=t.mouseHandlerCallback,h=void 0===u?null:u;this.coordinateList=null!==(e=null!==r&&void 0!==r?r:this.coordinateList)&&void 0!==e?e:[],this.container=null!==o&&void 0!==o?o:this.container,this.layout=null!==s&&void 0!==s?s:this.layout,this.offset=null!==l&&void 0!==l?l:this.offset,this.mouseHandlerCallback=null!==h&&void 0!==h?h:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(0!==this.coordinateList.length)switch(t.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,e;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),r=n.x,i=n.y,o=n.height,a=this.coordinateList[this.activeIndex].coordinate,s=(null===(t=window)||void 0===t?void 0:t.scrollX)||0,c=(null===(e=window)||void 0===e?void 0:e.scrollY)||0,l=r+a+s,u=i+this.offset.top+o/2+c;this.mouseHandlerCallback({pageX:l,pageY:u})}}}],n&&XAt(e.prototype,n),r&&XAt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function JAt(){}function $At(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function QAt(t){this._context=t}function tMt(t){this._context=t}function eMt(t){this._context=t}QAt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$At(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$At(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},tMt.prototype={areaStart:JAt,areaEnd:JAt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:$At(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},eMt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:$At(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};class nMt{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}function rMt(t){this._context=t}function iMt(t){this._context=t}function oMt(t){return new iMt(t)}function aMt(t){return t<0?-1:1}function sMt(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(aMt(o)+aMt(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function cMt(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function lMt(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function uMt(t){this._context=t}function hMt(t){this._context=new dMt(t)}function dMt(t){this._context=t}function pMt(t){this._context=t}function fMt(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function mMt(t,e){this._context=t,this._t=e}function gMt(t){return t[0]}function yMt(t){return t[1]}function vMt(t,e){var n=Lyt(!0),r=null,i=oMt,o=null,a=ivt(s);function s(s){var c,l,u,h=(s=rwt(s)).length,d=!1;for(null==r&&(o=i(u=a())),c=0;c<=h;++c)!(c<h&&n(l=s[c],c,s))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+t(l,c,s),+e(l,c,s));if(u)return o=null,u+""||null}return t="function"===typeof t?t:void 0===t?gMt:Lyt(t),e="function"===typeof e?e:void 0===e?yMt:Lyt(e),s.x=function(e){return arguments.length?(t="function"===typeof e?e:Lyt(+e),s):t},s.y=function(t){return arguments.length?(e="function"===typeof t?t:Lyt(+t),s):e},s.defined=function(t){return arguments.length?(n="function"===typeof t?t:Lyt(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),s):r},s}function bMt(t,e,n){var r=null,i=Lyt(!0),o=null,a=oMt,s=null,c=ivt(l);function l(l){var u,h,d,p,f,m=(l=rwt(l)).length,g=!1,y=new Array(m),v=new Array(m);for(null==o&&(s=a(f=c())),u=0;u<=m;++u){if(!(u<m&&i(p=l[u],u,l))===g)if(g=!g)h=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=u-1;d>=h;--d)s.point(y[d],v[d]);s.lineEnd(),s.areaEnd()}g&&(y[u]=+t(p,u,l),v[u]=+e(p,u,l),s.point(r?+r(p,u,l):y[u],n?+n(p,u,l):v[u]))}if(f)return s=null,f+""||null}function u(){return vMt().defined(i).curve(a).context(o)}return t="function"===typeof t?t:void 0===t?gMt:Lyt(+t),e="function"===typeof e?e:Lyt(void 0===e?0:+e),n="function"===typeof n?n:void 0===n?yMt:Lyt(+n),l.x=function(e){return arguments.length?(t="function"===typeof e?e:Lyt(+e),r=null,l):t},l.x0=function(e){return arguments.length?(t="function"===typeof e?e:Lyt(+e),l):t},l.x1=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:Lyt(+t),l):r},l.y=function(t){return arguments.length?(e="function"===typeof t?t:Lyt(+t),n=null,l):e},l.y0=function(t){return arguments.length?(e="function"===typeof t?t:Lyt(+t),l):e},l.y1=function(t){return arguments.length?(n=null==t?null:"function"===typeof t?t:Lyt(+t),l):n},l.lineX0=l.lineY0=function(){return u().x(t).y(e)},l.lineY1=function(){return u().x(t).y(n)},l.lineX1=function(){return u().x(r).y(e)},l.defined=function(t){return arguments.length?(i="function"===typeof t?t:Lyt(!!t),l):i},l.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),l):a},l.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),l):o},l}function xMt(t){return xMt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xMt(t)}function _Mt(){return _Mt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_Mt.apply(this,arguments)}function wMt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function SMt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wMt(Object(n),!0).forEach((function(e){TMt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wMt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function TMt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=xMt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=xMt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xMt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}rMt.prototype={areaStart:JAt,areaEnd:JAt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},iMt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},uMt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:lMt(this,this._t0,cMt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,lMt(this,cMt(this,n=sMt(this,t,e)),n);break;default:lMt(this,this._t0,n=sMt(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(hMt.prototype=Object.create(uMt.prototype)).point=function(t,e){uMt.prototype.point.call(this,e,t)},dMt.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},pMt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=fMt(t),i=fMt(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},mMt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var EMt={curveBasisClosed:function(t){return new tMt(t)},curveBasisOpen:function(t){return new eMt(t)},curveBasis:function(t){return new QAt(t)},curveBumpX:function(t){return new nMt(t,!0)},curveBumpY:function(t){return new nMt(t,!1)},curveLinearClosed:function(t){return new rMt(t)},curveLinear:oMt,curveMonotoneX:function(t){return new uMt(t)},curveMonotoneY:function(t){return new hMt(t)},curveNatural:function(t){return new pMt(t)},curveStep:function(t){return new mMt(t,.5)},curveStepAfter:function(t){return new mMt(t,1)},curveStepBefore:function(t){return new mMt(t,0)}},AMt=function(t){return t.x===+t.x&&t.y===+t.y},MMt=function(t){return t.x},OMt=function(t){return t.y},CMt=function(t){var e,n=t.type,r=void 0===n?"linear":n,i=t.points,o=void 0===i?[]:i,a=t.baseLine,s=t.layout,c=t.connectNulls,l=void 0!==c&&c,u=function(t,e){if(Amt()(t))return t;var n="curve".concat(pyt()(t));return"curveMonotone"!==n&&"curveBump"!==n||!e?EMt[n]||oMt:EMt["".concat(n).concat("vertical"===e?"Y":"X")]}(r,s),h=l?o.filter((function(t){return AMt(t)})):o;if(Array.isArray(a)){var d=l?a.filter((function(t){return AMt(t)})):a,p=h.map((function(t,e){return SMt(SMt({},t),{},{base:d[e]})}));return e="vertical"===s?bMt().y(OMt).x1(MMt).x0((function(t){return t.base.x})):bMt().x(MMt).y1(OMt).y0((function(t){return t.base.y})),e.defined(AMt).curve(u),e(p)}return(e="vertical"===s&&fmt(a)?bMt().y(OMt).x1(MMt).x0(a):fmt(a)?bMt().x(MMt).y1(OMt).y0(a):vMt().x(MMt).y(OMt)).defined(AMt).curve(u),e(h)},kMt=function(t){var e=t.className,n=t.points,r=t.path,i=t.pathRef;if((!n||!n.length)&&!r)return null;var o=n&&n.length?CMt(t):r;return k.createElement("path",_Mt({},Zmt(t,!1),Dmt(t),{className:tmt("recharts-curve",e),d:o,ref:i}))};function PMt(t){return PMt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PMt(t)}var IMt=["x","y","top","left","width","height","className"];function NMt(){return NMt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NMt.apply(this,arguments)}function RMt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function DMt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=PMt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=PMt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==PMt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LMt(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var FMt=function(t,e,n,r,i,o){return"M".concat(t,",").concat(i,"v").concat(r,"M").concat(o,",").concat(e,"h").concat(n)},jMt=function(t){var e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,o=t.top,a=void 0===o?0:o,s=t.left,c=void 0===s?0:s,l=t.width,u=void 0===l?0:l,h=t.height,d=void 0===h?0:h,p=t.className,f=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?RMt(Object(n),!0).forEach((function(e){DMt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RMt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({x:n,y:i,top:a,left:c,width:u,height:d},LMt(t,IMt));return fmt(n)&&fmt(i)&&fmt(u)&&fmt(d)&&fmt(a)&&fmt(c)?k.createElement("path",NMt({},Zmt(f,!0),{className:tmt("recharts-cross",p),d:FMt(n,i,u,d,a,c)})):null};function UMt(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle;return{points:[$St(e,n,r,i),$St(e,n,r,o)],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function BMt(t,e,n){var r,i,o,a;if("horizontal"===t)o=r=e.x,i=n.top,a=n.top+n.height;else if("vertical"===t)a=i=e.y,r=n.left,o=n.left+n.width;else if(null!=e.cx&&null!=e.cy){if("centric"!==t)return UMt(e);var s=e.cx,c=e.cy,l=e.innerRadius,u=e.outerRadius,h=e.angle,d=$St(s,c,l,h),p=$St(s,c,u,h);r=d.x,i=d.y,o=p.x,a=p.y}return[{x:r,y:i},{x:o,y:a}]}function zMt(t){return zMt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zMt(t)}function VMt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function GMt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?VMt(Object(n),!0).forEach((function(e){WMt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VMt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function WMt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=zMt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=zMt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zMt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HMt(t){var e,n=t.element,r=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,a=t.activePayload,s=t.offset,c=t.activeTooltipIndex,l=t.tooltipAxisBandSize,u=t.layout,h=t.chartName;if(!n||!n.props.cursor||!i||!o||"ScatterChart"!==h&&"axis"!==r)return null;var d=kMt;if("ScatterChart"===h)e=o,d=jMt;else if("BarChart"===h)e=function(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===t?e.x-i:n.left+.5,y:"horizontal"===t?n.top+.5:e.y-i,width:"horizontal"===t?r:n.width-1,height:"horizontal"===t?n.height-1:r}}(u,o,s,l),d=v_t;else if("radial"===u){var p=UMt(o),f=p.cx,m=p.cy,g=p.radius;e={cx:f,cy:m,startAngle:p.startAngle,endAngle:p.endAngle,innerRadius:g,outerRadius:g},d=aEt}else e={points:BMt(u,o,s)},d=kMt;var y=GMt(GMt(GMt(GMt({stroke:"#ccc",pointerEvents:"none"},s),e),Zmt(n.props.cursor,!1)),{},{payload:a,payloadIndex:c,className:tmt("recharts-tooltip-cursor",n.props.cursor.className)});return(0,k.isValidElement)(n.props.cursor)?(0,k.cloneElement)(n.props.cursor,y):(0,k.createElement)(d,y)}var qMt=["item"],XMt=["children","className","width","height","style","compact","title","desc"];function YMt(t){return YMt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YMt(t)}function KMt(){return KMt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KMt.apply(this,arguments)}function ZMt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||oOt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JMt(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function $Mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uOt(r.key),r)}}function QMt(t,e,n){return e=eOt(e),function(t,e){if(e&&("object"===YMt(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return nOt(t)}(t,tOt()?Reflect.construct(e,n||[],eOt(t).constructor):e.apply(t,n))}function tOt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(tOt=function(){return!!t})()}function eOt(t){return eOt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eOt(t)}function nOt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rOt(t,e){return rOt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rOt(t,e)}function iOt(t){return function(t){if(Array.isArray(t))return aOt(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||oOt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oOt(t,e){if(t){if("string"===typeof t)return aOt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aOt(t,e):void 0}}function aOt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sOt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function cOt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sOt(Object(n),!0).forEach((function(e){lOt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sOt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function lOt(t,e,n){return(e=uOt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uOt(t){var e=function(t,e){if("object"!=YMt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=YMt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YMt(e)?e:String(e)}var hOt={xAxis:["bottom","top"],yAxis:["left","right"]},dOt={width:"100%",height:"100%"},pOt={x:0,y:0};function fOt(t){return t}var mOt=function(t,e){var n=e.graphicalItems,r=e.dataStartIndex,i=e.dataEndIndex,o=(null!==n&&void 0!==n?n:[]).reduce((function(t,e){var n=e.props.data;return n&&n.length?[].concat(iOt(t),iOt(n)):t}),[]);return o.length>0?o:t&&t.length&&fmt(r)&&fmt(i)?t.slice(r,i+1):[]};function gOt(t){return"number"===t?[0,"auto"]:void 0}var yOt=function(t,e,n,r){var i=t.graphicalItems,o=t.tooltipAxis,a=mOt(e,t);return n<0||!i||!i.length||n>=a.length?null:i.reduce((function(i,s){var c,l,u=null!==(c=s.props.data)&&void 0!==c?c:e;(u&&t.dataStartIndex+t.dataEndIndex!==0&&(u=u.slice(t.dataStartIndex,t.dataEndIndex+1)),o.dataKey&&!o.allowDuplicatedCategory)?l=_mt(void 0===u?a:u,o.dataKey,r):l=u&&u[n]||a[n];return l?[].concat(iOt(i),[ASt(s,l)]):i}),[])},vOt=function(t,e,n,r){var i=r||{x:t.chartX,y:t.chartY},o=function(t,e){return"horizontal"===e?t.x:"vertical"===e?t.y:"centric"===e?t.angle:t.radius}(i,n),a=t.orderedTooltipTicks,s=t.tooltipAxis,c=t.tooltipTicks,l=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,a=null!==(e=null===n||void 0===n?void 0:n.length)&&void 0!==e?e:0;if(a<=1)return 0;if(i&&"angleAxis"===i.axisType&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var s=i.range,c=0;c<a;c++){var l=c>0?r[c-1].coordinate:r[a-1].coordinate,u=r[c].coordinate,h=c>=a-1?r[0].coordinate:r[c+1].coordinate,d=void 0;if(dmt(u-l)!==dmt(h-u)){var p=[];if(dmt(h-u)===dmt(s[1]-s[0])){d=h;var f=u+s[1]-s[0];p[0]=Math.min(f,(f+l)/2),p[1]=Math.max(f,(f+l)/2)}else{d=l;var m=h+s[1]-s[0];p[0]=Math.min(u,(m+u)/2),p[1]=Math.max(u,(m+u)/2)}var g=[Math.min(u,(d+u)/2),Math.max(u,(d+u)/2)];if(t>g[0]&&t<=g[1]||t>=p[0]&&t<=p[1]){o=r[c].index;break}}else{var y=Math.min(l,h),v=Math.max(l,h);if(t>(y+u)/2&&t<=(v+u)/2){o=r[c].index;break}}}else for(var b=0;b<a;b++)if(0===b&&t<=(n[b].coordinate+n[b+1].coordinate)/2||b>0&&b<a-1&&t>(n[b].coordinate+n[b-1].coordinate)/2&&t<=(n[b].coordinate+n[b+1].coordinate)/2||b===a-1&&t>(n[b].coordinate+n[b-1].coordinate)/2){o=n[b].index;break}return o}(o,a,c,s);if(l>=0&&c){var u=c[l]&&c[l].value,h=yOt(t,e,l,u),d=function(t,e,n,r){var i=e.find((function(t){return t&&t.index===n}));if(i){if("horizontal"===t)return{x:i.coordinate,y:r.y};if("vertical"===t)return{x:r.x,y:i.coordinate};if("centric"===t){var o=i.coordinate,a=r.radius;return cOt(cOt(cOt({},r),$St(r.cx,r.cy,a,o)),{},{angle:o,radius:a})}var s=i.coordinate,c=r.angle;return cOt(cOt(cOt({},r),$St(r.cx,r.cy,s,c)),{},{angle:c,radius:s})}return pOt}(n,a,l,i);return{activeTooltipIndex:l,activeLabel:u,activePayload:h,activeCoordinate:d}}return null},bOt=function(t,e){var n=e.axes,r=e.graphicalItems,i=e.axisType,o=e.axisIdKey,a=e.stackGroups,s=e.dataStartIndex,c=e.dataEndIndex,l=t.layout,u=t.children,h=t.stackOffset,d=dSt(l,i);return n.reduce((function(e,n){var p,f=n.props,m=f.type,g=f.dataKey,y=f.allowDataOverflow,v=f.allowDuplicatedCategory,b=f.scale,x=f.ticks,_=f.includeHidden,w=n.props[o];if(e[w])return e;var S,T,E,A=mOt(t.data,{graphicalItems:r.filter((function(t){return t.props[o]===w})),dataStartIndex:s,dataEndIndex:c}),M=A.length;(function(t,e,n){if("number"===n&&!0===e&&Array.isArray(t)){var r=null===t||void 0===t?void 0:t[0],i=null===t||void 0===t?void 0:t[1];if(r&&i&&fmt(r)&&fmt(i))return!0}return!1})(n.props.domain,y,m)&&(S=SSt(n.props.domain,null,y),!d||"number"!==m&&"auto"===b||(E=cSt(A,g,"category")));var O=gOt(m);if(!S||0===S.length){var C,k=null!==(C=n.props.domain)&&void 0!==C?C:O;if(g){if(S=cSt(A,g,m),"category"===m&&d){var P=function(t){if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++){if(n[t[r]])return!0;n[t[r]]=!0}return!1}(S);v&&P?(T=S,S=lgt()(0,M)):v||(S=ESt(k,S,n).reduce((function(t,e){return t.indexOf(e)>=0?t:[].concat(iOt(t),[e])}),[]))}else if("category"===m)S=v?S.filter((function(t){return""!==t&&!Tmt()(t)})):ESt(k,S,n).reduce((function(t,e){return t.indexOf(e)>=0||""===e||Tmt()(e)?t:[].concat(iOt(t),[e])}),[]);else if("number"===m){var I=function(t,e,n,r,i){var o=e.map((function(e){return uSt(t,e,n,i,r)})).filter((function(t){return!Tmt()(t)}));return o&&o.length?o.reduce((function(t,e){return[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}),[1/0,-1/0]):null}(A,r.filter((function(t){return t.props[o]===w&&(_||!t.props.hide)})),g,i,l);I&&(S=I)}!d||"number"!==m&&"auto"===b||(E=cSt(A,g,"category"))}else S=d?lgt()(0,M):a&&a[w]&&a[w].hasStack&&"number"===m?"expand"===h?[0,1]:xSt(a[w].stackGroups,s,c):hSt(A,r.filter((function(t){return t.props[o]===w&&(_||!t.props.hide)})),m,l,!0);if("number"===m)S=VAt(u,S,w,i,x),k&&(S=SSt(k,S,y));else if("category"===m&&k){var N=k;S.every((function(t){return N.indexOf(t)>=0}))&&(S=N)}}return cOt(cOt({},e),{},lOt({},w,cOt(cOt({},n.props),{},{axisType:i,domain:S,categoricalDomain:E,duplicateDomain:T,originalDomain:null!==(p=n.props.domain)&&void 0!==p?p:O,isCategorical:d,layout:l})))}),{})},xOt=function(t,e){var n=e.axisType,r=void 0===n?"xAxis":n,i=e.AxisComp,o=e.graphicalItems,a=e.stackGroups,s=e.dataStartIndex,c=e.dataEndIndex,l=t.children,u="".concat(r,"Id"),h=Hmt(l,i),d={};return h&&h.length?d=bOt(t,{axes:h,graphicalItems:o,axisType:r,axisIdKey:u,stackGroups:a,dataStartIndex:s,dataEndIndex:c}):o&&o.length&&(d=function(t,e){var n=e.graphicalItems,r=e.Axis,i=e.axisType,o=e.axisIdKey,a=e.stackGroups,s=e.dataStartIndex,c=e.dataEndIndex,l=t.layout,u=t.children,h=mOt(t.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:c}),d=h.length,p=dSt(l,i),f=-1;return n.reduce((function(t,e){var m,g=e.props[o],y=gOt("number");return t[g]?t:(f++,p?m=lgt()(0,d):a&&a[g]&&a[g].hasStack?(m=xSt(a[g].stackGroups,s,c),m=VAt(u,m,g,i)):(m=SSt(y,hSt(h,n.filter((function(t){return t.props[o]===g&&!t.props.hide})),"number",l),r.defaultProps.allowDataOverflow),m=VAt(u,m,g,i)),cOt(cOt({},t),{},lOt({},g,cOt(cOt({axisType:i},r.defaultProps),{},{hide:!0,orientation:lmt()(hOt,"".concat(i,".").concat(f%2),null),domain:m,originalDomain:y,isCategorical:p,layout:l}))))}),{})}(t,{Axis:i,graphicalItems:o,axisType:r,axisIdKey:u,stackGroups:a,dataStartIndex:s,dataEndIndex:c})),d},_Ot=function(t){var e=t.children,n=t.defaultShowTooltip,r=qmt(e,HSt),i=0,o=0;return t.data&&0!==t.data.length&&(o=t.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(i=r.props.startIndex),r.props.endIndex>=0&&(o=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:Boolean(n)}},wOt=function(t){return"horizontal"===t?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===t?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===t?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},SOt=function(t,e){var n=t.props,r=(t.graphicalItems,t.xAxisMap),i=void 0===r?{}:r,o=t.yAxisMap,a=void 0===o?{}:o,s=n.width,c=n.height,l=n.children,u=n.margin||{},h=qmt(l,HSt),d=qmt(l,zvt),p=Object.keys(a).reduce((function(t,e){var n=a[e],r=n.orientation;return n.mirror||n.hide?t:cOt(cOt({},t),{},lOt({},r,t[r]+n.width))}),{left:u.left||0,right:u.right||0}),f=Object.keys(i).reduce((function(t,e){var n=i[e],r=n.orientation;return n.mirror||n.hide?t:cOt(cOt({},t),{},lOt({},r,lmt()(t,"".concat(r))+n.height))}),{top:u.top||0,bottom:u.bottom||0}),m=cOt(cOt({},f),p),g=m.bottom;h&&(m.bottom+=h.props.height||HSt.defaultProps.height),d&&e&&(m=function(t,e,n,r){var i=n.children,o=n.width,a=n.margin,s=o-(a.left||0)-(a.right||0),c=tSt({children:i,legendWidth:s});if(c){var l=r||{},u=l.width,h=l.height,d=c.align,p=c.verticalAlign,f=c.layout;if(("vertical"===f||"horizontal"===f&&"middle"===p)&&"center"!==d&&fmt(t[d]))return rSt(rSt({},t),{},iSt({},d,t[d]+(u||0)));if(("horizontal"===f||"vertical"===f&&"center"===d)&&"middle"!==p&&fmt(t[p]))return rSt(rSt({},t),{},iSt({},p,t[p]+(h||0)))}return t}(m,0,n,e));var y=s-m.left-m.right,v=c-m.top-m.bottom;return cOt(cOt({brushBottom:g},m),{},{width:Math.max(y,0),height:Math.max(v,0)})},TOt=function(t,e){return"xAxis"===e?t[e].width:"yAxis"===e?t[e].height:void 0};function EOt(t,e,n){if(e<1)return[];if(1===e&&void 0===n)return t;for(var r=[],i=0;i<t.length;i+=e){if(void 0!==n&&!0!==n(t[i]))return;r.push(t[i])}return r}function AOt(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function MOt(t){return MOt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},MOt(t)}function OOt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function COt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?OOt(Object(n),!0).forEach((function(e){kOt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OOt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function kOt(t,e,n){return e=function(t){var e=function(t,e){if("object"!=MOt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=MOt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==MOt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function POt(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,a=t.minTickGap,s=t.orientation,c=t.interval,l=t.tickFormatter,u=t.unit,h=t.angle;if(!i||!i.length||!r)return[];if(fmt(c)||Zgt.isSsr)return function(t,e){return EOt(t,e+1)}(i,"number"===typeof c&&fmt(c)?c:0);var d=[],p="top"===s||"bottom"===s?"width":"height",f=u&&"width"===p?A_t(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},m=function(t,r){var i=Amt()(l)?l(t.value,r):t.value;return"width"===p?function(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return rAt(r,n)}(A_t(i,{fontSize:e,letterSpacing:n}),f,h):A_t(i,{fontSize:e,letterSpacing:n})[p]},g=i.length>=2?dmt(i[1].coordinate-i[0].coordinate):1,y=function(t,e,n){var r="width"===n,i=t.x,o=t.y,a=t.width,s=t.height;return 1===e?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}(o,g,p);return"equidistantPreserveStart"===c?function(t,e,n,r,i){for(var o,a=(r||[]).slice(),s=e.start,c=e.end,l=0,u=1,h=s,d=function(){var e=null===r||void 0===r?void 0:r[l];if(void 0===e)return{v:EOt(r,u)};var o,a=l,d=function(){return void 0===o&&(o=n(e,a)),o},p=e.coordinate,f=0===l||AOt(t,p,d,h,c);f||(l=0,h=s,u+=1),f&&(h=p+t*(d()/2+i),l+=u)};u<=a.length;)if(o=d())return o.v;return[]}(g,y,m,i,a):(d="preserveStart"===c||"preserveStartEnd"===c?function(t,e,n,r,i,o){var a=(r||[]).slice(),s=a.length,c=e.start,l=e.end;if(o){var u=r[s-1],h=n(u,s-1),d=t*(u.coordinate+t*h/2-l);a[s-1]=u=COt(COt({},u),{},{tickCoord:d>0?u.coordinate-d*t:u.coordinate}),AOt(t,u.tickCoord,(function(){return h}),c,l)&&(l=u.tickCoord-t*(h/2+i),a[s-1]=COt(COt({},u),{},{isShow:!0}))}for(var p=o?s-1:s,f=function(e){var r,o=a[e],s=function(){return void 0===r&&(r=n(o,e)),r};if(0===e){var u=t*(o.coordinate-t*s()/2-c);a[e]=o=COt(COt({},o),{},{tickCoord:u<0?o.coordinate-u*t:o.coordinate})}else a[e]=o=COt(COt({},o),{},{tickCoord:o.coordinate});AOt(t,o.tickCoord,s,c,l)&&(c=o.tickCoord+t*(s()/2+i),a[e]=COt(COt({},o),{},{isShow:!0}))},m=0;m<p;m++)f(m);return a}(g,y,m,i,a,"preserveStartEnd"===c):function(t,e,n,r,i){for(var o=(r||[]).slice(),a=o.length,s=e.start,c=e.end,l=function(e){var r,l=o[e],u=function(){return void 0===r&&(r=n(l,e)),r};if(e===a-1){var h=t*(l.coordinate+t*u()/2-c);o[e]=l=COt(COt({},l),{},{tickCoord:h>0?l.coordinate-h*t:l.coordinate})}else o[e]=l=COt(COt({},l),{},{tickCoord:l.coordinate});AOt(t,l.tickCoord,u,s,c)&&(c=l.tickCoord-t*(u()/2+i),o[e]=COt(COt({},l),{},{isShow:!0}))},u=a-1;u>=0;u--)l(u);return o}(g,y,m,i,a),d.filter((function(t){return t.isShow})))}var IOt=["viewBox"],NOt=["viewBox"],ROt=["ticks"];function DOt(t){return DOt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DOt(t)}function LOt(){return LOt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LOt.apply(this,arguments)}function FOt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jOt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?FOt(Object(n),!0).forEach((function(e){HOt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FOt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function UOt(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function BOt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qOt(r.key),r)}}function zOt(t,e,n){return e=GOt(e),function(t,e){if(e&&("object"===DOt(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,VOt()?Reflect.construct(e,n||[],GOt(t).constructor):e.apply(t,n))}function VOt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(VOt=function(){return!!t})()}function GOt(t){return GOt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},GOt(t)}function WOt(t,e){return WOt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},WOt(t,e)}function HOt(t,e,n){return(e=qOt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qOt(t){var e=function(t,e){if("object"!=DOt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=DOt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==DOt(e)?e:String(e)}var XOt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=zOt(this,e,[t])).state={fontSize:"",letterSpacing:""},n}var n,r,i;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WOt(t,e)}(e,t),n=e,r=[{key:"shouldComponentUpdate",value:function(t,e){var n=t.viewBox,r=UOt(t,IOt),i=this.props,o=i.viewBox,a=UOt(i,NOt);return!Cmt(n,o)||!Cmt(r,a)||!Cmt(e,this.state)}},{key:"componentDidMount",value:function(){var t=this.layerReference;if(t){var e=t.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];e&&this.setState({fontSize:window.getComputedStyle(e).fontSize,letterSpacing:window.getComputedStyle(e).letterSpacing})}}},{key:"getTickLineCoord",value:function(t){var e,n,r,i,o,a,s=this.props,c=s.x,l=s.y,u=s.width,h=s.height,d=s.orientation,p=s.tickSize,f=s.mirror,m=s.tickMargin,g=f?-1:1,y=t.tickSize||p,v=fmt(t.tickCoord)?t.tickCoord:t.coordinate;switch(d){case"top":e=n=t.coordinate,a=(r=(i=l+ +!f*h)-g*y)-g*m,o=v;break;case"left":r=i=t.coordinate,o=(e=(n=c+ +!f*u)-g*y)-g*m,a=v;break;case"right":r=i=t.coordinate,o=(e=(n=c+ +f*u)+g*y)+g*m,a=v;break;default:e=n=t.coordinate,a=(r=(i=l+ +f*h)+g*y)+g*m,o=v}return{line:{x1:e,y1:r,x2:n,y2:i},tick:{x:o,y:a}}}},{key:"getTickTextAnchor",value:function(){var t,e=this.props,n=e.orientation,r=e.mirror;switch(n){case"left":t=r?"start":"end";break;case"right":t=r?"end":"start";break;default:t="middle"}return t}},{key:"getTickVerticalAnchor",value:function(){var t=this.props,e=t.orientation,n=t.mirror,r="end";switch(e){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var t=this.props,e=t.x,n=t.y,r=t.width,i=t.height,o=t.orientation,a=t.mirror,s=t.axisLine,c=jOt(jOt(jOt({},Zmt(this.props,!1)),Zmt(s,!1)),{},{fill:"none"});if("top"===o||"bottom"===o){var l=+("top"===o&&!a||"bottom"===o&&a);c=jOt(jOt({},c),{},{x1:e,y1:n+l*i,x2:e+r,y2:n+l*i})}else{var u=+("left"===o&&!a||"right"===o&&a);c=jOt(jOt({},c),{},{x1:e+u*r,y1:n,x2:e+u*r,y2:n+i})}return k.createElement("line",LOt({},c,{className:tmt("recharts-cartesian-axis-line",lmt()(s,"className"))}))}},{key:"renderTicks",value:function(t,n,r){var i=this,o=this.props,a=o.tickLine,s=o.stroke,c=o.tick,l=o.tickFormatter,u=o.unit,h=POt(jOt(jOt({},this.props),{},{ticks:t}),n,r),d=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),f=Zmt(this.props,!1),m=Zmt(c,!1),g=jOt(jOt({},f),{},{fill:"none"},Zmt(a,!1)),y=h.map((function(t,n){var r=i.getTickLineCoord(t),o=r.line,y=r.tick,v=jOt(jOt(jOt(jOt({textAnchor:d,verticalAnchor:p},f),{},{stroke:"none",fill:s},m),y),{},{index:n,payload:t,visibleTicksCount:h.length,tickFormatter:l});return k.createElement(wgt,LOt({className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},Lmt(i.props,t,n)),a&&k.createElement("line",LOt({},g,o,{className:tmt("recharts-cartesian-axis-tick-line",lmt()(a,"className"))})),c&&e.renderTickItem(c,v,"".concat(Amt()(l)?l(t.value,n):t.value).concat(u||"")))}));return k.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var t=this,e=this.props,n=e.axisLine,r=e.width,i=e.height,o=e.ticksGenerator,a=e.className;if(e.hide)return null;var s=this.props,c=s.ticks,l=UOt(s,ROt),u=c;return Amt()(o)&&(u=c&&c.length>0?o(this.props):o(l)),r<=0||i<=0||!u||!u.length?null:k.createElement(wgt,{className:tmt("recharts-cartesian-axis",a),ref:function(e){t.layerReference=e}},n&&this.renderAxisLine(),this.renderTicks(u,this.state.fontSize,this.state.letterSpacing),gTt.renderCallByParent(this.props))}}],i=[{key:"renderTickItem",value:function(t,e,n){return k.isValidElement(t)?k.cloneElement(t,e):Amt()(t)?t(e):k.createElement(ewt,LOt({},e,{className:"recharts-cartesian-axis-tick-value"}),n)}}],r&&BOt(n.prototype,r),i&&BOt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(k.Component);function YOt(){return YOt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YOt.apply(this,arguments)}HOt(XOt,"displayName","CartesianAxis"),HOt(XOt,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var KOt=function(t){var e=t.xAxisId,n=TAt(),r=EAt(),i=wAt(e);return null==i?null:k.createElement(XOt,YOt({},i,{className:tmt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(t){return pSt(t,!0)}}))};function ZOt(){return ZOt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZOt.apply(this,arguments)}KOt.displayName="XAxis",KOt.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var JOt=function(t){var e=t.yAxisId,n=TAt(),r=EAt(),i=SAt(e);return null==i?null:k.createElement(XOt,ZOt({},i,{className:tmt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(t){return pSt(t,!0)}}))};JOt.displayName="YAxis",JOt.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var $Ot=function(t){var e,n=t.chartName,r=t.GraphicalChild,i=t.defaultTooltipEventType,o=void 0===i?"axis":i,a=t.validateTooltipEventTypes,s=void 0===a?["axis"]:a,c=t.axisComponents,l=t.legendContent,u=t.formatAxisMap,h=t.defaultProps,d=function(t,e){var n=e.graphicalItems,r=e.stackGroups,i=e.offset,o=e.updateId,a=e.dataStartIndex,s=e.dataEndIndex,l=t.barSize,u=t.layout,h=t.barGap,d=t.barCategoryGap,p=t.maxBarSize,f=wOt(u),m=f.numericAxisName,g=f.cateAxisName,y=function(t){return!(!t||!t.length)&&t.some((function(t){var e=zmt(t&&t.type);return e&&e.indexOf("Bar")>=0}))}(n),v=[];return n.forEach((function(n,f){var b=mOt(t.data,{graphicalItems:[n],dataStartIndex:a,dataEndIndex:s}),x=n.props,_=x.dataKey,w=x.maxBarSize,S=n.props["".concat(m,"Id")],T=n.props["".concat(g,"Id")],E=c.reduce((function(t,r){var i=e["".concat(r.axisType,"Map")],o=n.props["".concat(r.axisType,"Id")];i&&i[o]||"zAxis"===r.axisType||fgt(!1);var a=i[o];return cOt(cOt({},t),{},lOt(lOt({},r.axisType,a),"".concat(r.axisType,"Ticks"),pSt(a)))}),{}),A=E[g],M=E["".concat(g,"Ticks")],O=r&&r[S]&&r[S].hasStack&&function(t,e){var n=t.props.stackId;if(mmt(n)){var r=e[n];if(r){var i=r.items.indexOf(t);return i>=0?r.stackedData[i]:null}}return null}(n,r[S].stackGroups),C=zmt(n.type).indexOf("Bar")>=0,k=TSt(A,M),P=[],I=y&&function(t){var e=t.barSize,n=t.totalSize,r=t.stackGroups,i=void 0===r?{}:r;if(!i)return{};for(var o={},a=Object.keys(i),s=0,c=a.length;s<c;s++)for(var l=i[a[s]].stackGroups,u=Object.keys(l),h=0,d=u.length;h<d;h++){var p=l[u[h]],f=p.items,m=p.cateAxisId,g=f.filter((function(t){return zmt(t.type).indexOf("Bar")>=0}));if(g&&g.length){var y=g[0].props.barSize,v=g[0].props[m];o[v]||(o[v]=[]);var b=Tmt()(y)?e:y;o[v].push({item:g[0],stackList:g.slice(1),barSize:Tmt()(b)?void 0:vmt(b,n,0)})}}return o}({barSize:l,stackGroups:r,totalSize:TOt(E,g)});if(C){var N,R,D=Tmt()(w)?p:w,L=null!==(N=null!==(R=TSt(A,M,!0))&&void 0!==R?R:D)&&void 0!==N?N:0;P=function(t){var e=t.barGap,n=t.barCategoryGap,r=t.bandSize,i=t.sizeList,o=void 0===i?[]:i,a=t.maxBarSize,s=o.length;if(s<1)return null;var c,l=vmt(e,r,0,!0),u=[];if(o[0].barSize===+o[0].barSize){var h=!1,d=r/s,p=o.reduce((function(t,e){return t+e.barSize||0}),0);(p+=(s-1)*l)>=r&&(p-=(s-1)*l,l=0),p>=r&&d>0&&(h=!0,p=s*(d*=.9));var f={offset:((r-p)/2|0)-l,size:0};c=o.reduce((function(t,e){var n={item:e.item,position:{offset:f.offset+f.size+l,size:h?d:e.barSize}},r=[].concat(oSt(t),[n]);return f=r[r.length-1].position,e.stackList&&e.stackList.length&&e.stackList.forEach((function(t){r.push({item:t,position:f})})),r}),u)}else{var m=vmt(n,r,0,!0);r-2*m-(s-1)*l<=0&&(l=0);var g=(r-2*m-(s-1)*l)/s;g>1&&(g>>=0);var y=a===+a?Math.min(g,a):g;c=o.reduce((function(t,e,n){var r=[].concat(oSt(t),[{item:e.item,position:{offset:m+(g+l)*n+(g-y)/2,size:y}}]);return e.stackList&&e.stackList.length&&e.stackList.forEach((function(t){r.push({item:t,position:r[r.length-1].position})})),r}),u)}return c}({barGap:h,barCategoryGap:d,bandSize:L!==k?L:k,sizeList:I[T],maxBarSize:D}),L!==k&&(P=P.map((function(t){return cOt(cOt({},t),{},{position:cOt(cOt({},t.position),{},{offset:t.position.offset-L/2})})})))}var F=n&&n.type&&n.type.getComposedData;F&&v.push({props:cOt(cOt({},F(cOt(cOt({},E),{},{displayedData:b,props:t,dataKey:_,item:n,bandSize:k,barPosition:P,offset:i,stackedData:O,layout:u,dataStartIndex:a,dataEndIndex:s}))),{},lOt(lOt(lOt({key:n.key||"item-".concat(f)},m,E[m]),g,E[g]),"animationId",o)),childIndex:tgt(n,t.children),item:n})})),v},p=function(t,e){var i=t.props,o=t.dataStartIndex,a=t.dataEndIndex,s=t.updateId;if(!Xmt({props:i}))return null;var l=i.children,h=i.layout,p=i.stackOffset,f=i.data,m=i.reverseStackOrder,g=wOt(h),y=g.numericAxisName,v=g.cateAxisName,b=Hmt(l,r),x=function(t,e,n,r,i,o){if(!t)return null;var a=(o?e.reverse():e).reduce((function(t,e){var i=e.props,o=i.stackId;if(i.hide)return t;var a=e.props[n],s=t[a]||{hasStack:!1,stackGroups:{}};if(mmt(o)){var c=s.stackGroups[o]||{numericAxisId:n,cateAxisId:r,items:[]};c.items.push(e),s.hasStack=!0,s.stackGroups[o]=c}else s.stackGroups[ymt("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[e]};return rSt(rSt({},t),{},iSt({},a,s))}),{});return Object.keys(a).reduce((function(e,o){var s=a[o];return s.hasStack&&(s.stackGroups=Object.keys(s.stackGroups).reduce((function(e,o){var a=s.stackGroups[o];return rSt(rSt({},e),{},iSt({},o,{numericAxisId:n,cateAxisId:r,items:a.items,stackedData:vSt(t,a.items,i)}))}),{})),rSt(rSt({},e),{},iSt({},o,s))}),{})}(f,b,"".concat(y,"Id"),"".concat(v,"Id"),p,m),_=c.reduce((function(t,e){var n="".concat(e.axisType,"Map");return cOt(cOt({},t),{},lOt({},n,xOt(i,cOt(cOt({},e),{},{graphicalItems:b,stackGroups:e.axisType===y&&x,dataStartIndex:o,dataEndIndex:a}))))}),{}),w=SOt(cOt(cOt({},_),{},{props:i,graphicalItems:b}),null===e||void 0===e?void 0:e.legendBBox);Object.keys(_).forEach((function(t){_[t]=u(i,_[t],w,t.replace("Map",""),n)}));var S=function(t){var e=bmt(t),n=pSt(e,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:hgt()(n,(function(t){return t.coordinate})),tooltipAxis:e,tooltipAxisBandSize:TSt(e,n)}}(_["".concat(v,"Map")]),T=d(i,cOt(cOt({},_),{},{dataStartIndex:o,dataEndIndex:a,updateId:s,graphicalItems:b,stackGroups:x,offset:w}));return cOt(cOt({formattedGraphicalItems:T,graphicalItems:b,offset:w,stackGroups:x},S),_)};return e=function(t){function e(t){var r,i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),lOt(nOt(o=QMt(this,e,[t])),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),lOt(nOt(o),"accessibilityManager",new ZAt),lOt(nOt(o),"handleLegendBBoxUpdate",(function(t){if(t){var e=o.state,n=e.dataStartIndex,r=e.dataEndIndex,i=e.updateId;o.setState(cOt({legendBBox:t},p({props:o.props,dataStartIndex:n,dataEndIndex:r,updateId:i},cOt(cOt({},o.state),{},{legendBBox:t}))))}})),lOt(nOt(o),"handleReceiveSyncEvent",(function(t,e,n){if(o.props.syncId===t){if(n===o.eventEmitterSymbol&&"function"!==typeof o.props.syncMethod)return;o.applySyncEvent(e)}})),lOt(nOt(o),"handleBrushChange",(function(t){var e=t.startIndex,n=t.endIndex;if(e!==o.state.dataStartIndex||n!==o.state.dataEndIndex){var r=o.state.updateId;o.setState((function(){return cOt({dataStartIndex:e,dataEndIndex:n},p({props:o.props,dataStartIndex:e,dataEndIndex:n,updateId:r},o.state))})),o.triggerSyncEvent({dataStartIndex:e,dataEndIndex:n})}})),lOt(nOt(o),"handleMouseEnter",(function(t){var e=o.getMouseInfo(t);if(e){var n=cOt(cOt({},e),{},{isTooltipActive:!0});o.setState(n),o.triggerSyncEvent(n);var r=o.props.onMouseEnter;Amt()(r)&&r(n,t)}})),lOt(nOt(o),"triggeredAfterMouseMove",(function(t){var e=o.getMouseInfo(t),n=e?cOt(cOt({},e),{},{isTooltipActive:!0}):{isTooltipActive:!1};o.setState(n),o.triggerSyncEvent(n);var r=o.props.onMouseMove;Amt()(r)&&r(n,t)})),lOt(nOt(o),"handleItemMouseEnter",(function(t){o.setState((function(){return{isTooltipActive:!0,activeItem:t,activePayload:t.tooltipPayload,activeCoordinate:t.tooltipPosition||{x:t.cx,y:t.cy}}}))})),lOt(nOt(o),"handleItemMouseLeave",(function(){o.setState((function(){return{isTooltipActive:!1}}))})),lOt(nOt(o),"handleMouseMove",(function(t){t.persist(),o.throttleTriggeredAfterMouseMove(t)})),lOt(nOt(o),"handleMouseLeave",(function(t){o.throttleTriggeredAfterMouseMove.cancel();var e={isTooltipActive:!1};o.setState(e),o.triggerSyncEvent(e);var n=o.props.onMouseLeave;Amt()(n)&&n(e,t)})),lOt(nOt(o),"handleOuterEvent",(function(t){var e,n=function(t){var e=t&&t.type;return e&&Bmt[e]?Bmt[e]:null}(t),r=lmt()(o.props,"".concat(n));n&&Amt()(r)&&r(null!==(e=/.*touch.*/i.test(n)?o.getMouseInfo(t.changedTouches[0]):o.getMouseInfo(t))&&void 0!==e?e:{},t)})),lOt(nOt(o),"handleClick",(function(t){var e=o.getMouseInfo(t);if(e){var n=cOt(cOt({},e),{},{isTooltipActive:!0});o.setState(n),o.triggerSyncEvent(n);var r=o.props.onClick;Amt()(r)&&r(n,t)}})),lOt(nOt(o),"handleMouseDown",(function(t){var e=o.props.onMouseDown;Amt()(e)&&e(o.getMouseInfo(t),t)})),lOt(nOt(o),"handleMouseUp",(function(t){var e=o.props.onMouseUp;Amt()(e)&&e(o.getMouseInfo(t),t)})),lOt(nOt(o),"handleTouchMove",(function(t){null!=t.changedTouches&&t.changedTouches.length>0&&o.throttleTriggeredAfterMouseMove(t.changedTouches[0])})),lOt(nOt(o),"handleTouchStart",(function(t){null!=t.changedTouches&&t.changedTouches.length>0&&o.handleMouseDown(t.changedTouches[0])})),lOt(nOt(o),"handleTouchEnd",(function(t){null!=t.changedTouches&&t.changedTouches.length>0&&o.handleMouseUp(t.changedTouches[0])})),lOt(nOt(o),"triggerSyncEvent",(function(t){void 0!==o.props.syncId&&WAt.emit(HAt,o.props.syncId,t,o.eventEmitterSymbol)})),lOt(nOt(o),"applySyncEvent",(function(t){var e=o.props,n=e.layout,r=e.syncMethod,i=o.state.updateId,a=t.dataStartIndex,s=t.dataEndIndex;if(void 0!==t.dataStartIndex||void 0!==t.dataEndIndex)o.setState(cOt({dataStartIndex:a,dataEndIndex:s},p({props:o.props,dataStartIndex:a,dataEndIndex:s,updateId:i},o.state)));else if(void 0!==t.activeTooltipIndex){var c=t.chartX,l=t.chartY,u=t.activeTooltipIndex,h=o.state,d=h.offset,f=h.tooltipTicks;if(!d)return;if("function"===typeof r)u=r(f,t);else if("value"===r){u=-1;for(var m=0;m<f.length;m++)if(f[m].value===t.activeLabel){u=m;break}}var g=cOt(cOt({},d),{},{x:d.left,y:d.top}),y=Math.min(c,g.x+g.width),v=Math.min(l,g.y+g.height),b=f[u]&&f[u].value,x=yOt(o.state,o.props.data,u),_=f[u]?{x:"horizontal"===n?f[u].coordinate:y,y:"horizontal"===n?v:f[u].coordinate}:pOt;o.setState(cOt(cOt({},t),{},{activeLabel:b,activeCoordinate:_,activePayload:x,activeTooltipIndex:u}))}else o.setState(t)})),lOt(nOt(o),"renderCursor",(function(t){var e,r=o.state,i=r.isTooltipActive,a=r.activeCoordinate,s=r.activePayload,c=r.offset,l=r.activeTooltipIndex,u=r.tooltipAxisBandSize,h=o.getTooltipEventType(),d=null!==(e=t.props.active)&&void 0!==e?e:i,p=o.props.layout,f=t.key||"_recharts-cursor";return k.createElement(HMt,{key:f,activeCoordinate:a,activePayload:s,activeTooltipIndex:l,chartName:n,element:t,isActive:d,layout:p,offset:c,tooltipAxisBandSize:u,tooltipEventType:h})})),lOt(nOt(o),"renderPolarAxis",(function(t,e,n){var r=lmt()(t,"type.axisType"),i=lmt()(o.state,"".concat(r,"Map")),a=i&&i[t.props["".concat(r,"Id")]];return(0,k.cloneElement)(t,cOt(cOt({},a),{},{className:tmt(r,a.className),key:t.key||"".concat(e,"-").concat(n),ticks:pSt(a,!0)}))})),lOt(nOt(o),"renderPolarGrid",(function(t){var e=t.props,n=e.radialLines,r=e.polarAngles,i=e.polarRadius,a=o.state,s=a.radiusAxisMap,c=a.angleAxisMap,l=bmt(s),u=bmt(c),h=u.cx,d=u.cy,p=u.innerRadius,f=u.outerRadius;return(0,k.cloneElement)(t,{polarAngles:Array.isArray(r)?r:pSt(u,!0).map((function(t){return t.coordinate})),polarRadius:Array.isArray(i)?i:pSt(l,!0).map((function(t){return t.coordinate})),cx:h,cy:d,innerRadius:p,outerRadius:f,key:t.key||"polar-grid",radialLines:n})})),lOt(nOt(o),"renderLegend",(function(){var t=o.state.formattedGraphicalItems,e=o.props,n=e.children,r=e.width,i=e.height,a=o.props.margin||{},s=r-(a.left||0)-(a.right||0),c=tSt({children:n,formattedGraphicalItems:t,legendWidth:s,legendContent:l});if(!c)return null;var u=c.item,h=JMt(c,qMt);return(0,k.cloneElement)(u,cOt(cOt({},h),{},{chartWidth:r,chartHeight:i,margin:a,onBBoxUpdate:o.handleLegendBBoxUpdate}))})),lOt(nOt(o),"renderTooltip",(function(){var t,e=o.props,n=e.children,r=e.accessibilityLayer,i=qmt(n,hyt);if(!i)return null;var a=o.state,s=a.isTooltipActive,c=a.activeCoordinate,l=a.activePayload,u=a.activeLabel,h=a.offset,d=null!==(t=i.props.active)&&void 0!==t?t:s;return(0,k.cloneElement)(i,{viewBox:cOt(cOt({},h),{},{x:h.left,y:h.top}),active:d,label:u,payload:d?l:[],coordinate:c,accessibilityLayer:r})})),lOt(nOt(o),"renderBrush",(function(t){var e=o.props,n=e.margin,r=e.data,i=o.state,a=i.offset,s=i.dataStartIndex,c=i.dataEndIndex,l=i.updateId;return(0,k.cloneElement)(t,{key:t.key||"_recharts-brush",onChange:mSt(o.handleBrushChange,t.props.onChange),data:r,x:fmt(t.props.x)?t.props.x:a.left,y:fmt(t.props.y)?t.props.y:a.top+a.height+a.brushBottom-(n.bottom||0),width:fmt(t.props.width)?t.props.width:a.width,startIndex:s,endIndex:c,updateId:"brush-".concat(l)})})),lOt(nOt(o),"renderReferenceElement",(function(t,e,n){if(!t)return null;var r=nOt(o).clipPathId,i=o.state,a=i.xAxisMap,s=i.yAxisMap,c=i.offset,l=t.props,u=l.xAxisId,h=l.yAxisId;return(0,k.cloneElement)(t,{key:t.key||"".concat(e,"-").concat(n),xAxis:a[u],yAxis:s[h],viewBox:{x:c.left,y:c.top,width:c.width,height:c.height},clipPathId:r})})),lOt(nOt(o),"renderActivePoints",(function(t){var n=t.item,r=t.activePoint,i=t.basePoint,o=t.childIndex,a=t.isRange,s=[],c=n.props.key,l=n.item.props,u=l.activeDot,h=cOt(cOt({index:o,dataKey:l.dataKey,cx:r.x,cy:r.y,r:4,fill:lSt(n.item),strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value,key:"".concat(c,"-activePoint-").concat(o)},Zmt(u,!1)),Dmt(u));return s.push(e.renderActiveDot(u,h)),i?s.push(e.renderActiveDot(u,cOt(cOt({},h),{},{cx:i.x,cy:i.y,key:"".concat(c,"-basePoint-").concat(o)}))):a&&s.push(null),s})),lOt(nOt(o),"renderGraphicChild",(function(t,e,n){var r=o.filterFormatItem(t,e,n);if(!r)return null;var i=o.getTooltipEventType(),a=o.state,s=a.isTooltipActive,c=a.tooltipAxis,l=a.activeTooltipIndex,u=a.activeLabel,h=qmt(o.props.children,hyt),d=r.props,p=d.points,f=d.isRange,m=d.baseLine,g=r.item.props,y=g.activeDot,v=g.hide,b=g.activeBar,x=g.activeShape,_=Boolean(!v&&s&&h&&(y||b||x)),w={};"axis"!==i&&h&&"click"===h.props.trigger?w={onClick:mSt(o.handleItemMouseEnter,t.props.onClick)}:"axis"!==i&&(w={onMouseLeave:mSt(o.handleItemMouseLeave,t.props.onMouseLeave),onMouseEnter:mSt(o.handleItemMouseEnter,t.props.onMouseEnter)});var S=(0,k.cloneElement)(t,cOt(cOt({},r.props),w));if(_){if(!(l>=0)){var T,E=(null!==(T=o.getItemByXY(o.state.activeCoordinate))&&void 0!==T?T:{graphicalItem:S}).graphicalItem,A=E.item,M=void 0===A?t:A,O=E.childIndex,C=cOt(cOt(cOt({},r.props),w),{},{activeIndex:O});return[(0,k.cloneElement)(M,C),null,null]}var P,I;if(c.dataKey&&!c.allowDuplicatedCategory){var N="function"===typeof c.dataKey?function(t){return"function"===typeof c.dataKey?c.dataKey(t.payload):null}:"payload.".concat(c.dataKey.toString());P=_mt(p,N,u),I=f&&m&&_mt(m,N,u)}else P=null===p||void 0===p?void 0:p[l],I=f&&m&&m[l];if(x||b){var R=void 0!==t.props.activeIndex?t.props.activeIndex:l;return[(0,k.cloneElement)(t,cOt(cOt(cOt({},r.props),w),{},{activeIndex:R})),null,null]}if(!Tmt()(P))return[S].concat(iOt(o.renderActivePoints({item:r,activePoint:P,basePoint:I,childIndex:l,isRange:f})))}return f?[S,null,null]:[S,null]})),lOt(nOt(o),"renderCustomized",(function(t,e,n){return(0,k.cloneElement)(t,cOt(cOt({key:"recharts-customized-".concat(n)},o.props),o.state))})),lOt(nOt(o),"renderMap",{CartesianGrid:{handler:fOt,once:!0},ReferenceArea:{handler:o.renderReferenceElement},ReferenceLine:{handler:fOt},ReferenceDot:{handler:o.renderReferenceElement},XAxis:{handler:fOt},YAxis:{handler:fOt},Brush:{handler:o.renderBrush,once:!0},Bar:{handler:o.renderGraphicChild},Line:{handler:o.renderGraphicChild},Area:{handler:o.renderGraphicChild},Radar:{handler:o.renderGraphicChild},RadialBar:{handler:o.renderGraphicChild},Scatter:{handler:o.renderGraphicChild},Pie:{handler:o.renderGraphicChild},Funnel:{handler:o.renderGraphicChild},Tooltip:{handler:o.renderCursor,once:!0},PolarGrid:{handler:o.renderPolarGrid,once:!0},PolarAngleAxis:{handler:o.renderPolarAxis},PolarRadiusAxis:{handler:o.renderPolarAxis},Customized:{handler:o.renderCustomized}}),o.clipPathId="".concat(null!==(r=t.id)&&void 0!==r?r:ymt("recharts"),"-clip"),o.throttleTriggeredAfterMouseMove=nmt()(o.triggeredAfterMouseMove,null!==(i=t.throttleDelay)&&void 0!==i?i:1e3/60),o.state={},o}var r,i,a;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rOt(t,e)}(e,t),r=e,i=[{key:"componentDidMount",value:function(){var t,e;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(t=this.props.margin.left)&&void 0!==t?t:0,top:null!==(e=this.props.margin.top)&&void 0!==e?e:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var t=this.props,e=t.children,n=t.data,r=t.height,i=t.layout,o=qmt(e,hyt);if(o){var a=o.props.defaultIndex;if(!("number"!==typeof a||a<0||a>this.state.tooltipTicks.length)){var s=this.state.tooltipTicks[a]&&this.state.tooltipTicks[a].value,c=yOt(this.state,n,a,s),l=this.state.tooltipTicks[a].coordinate,u=(this.state.offset.top+r)/2,h="horizontal"===i?{x:l,y:u}:{y:l,x:u},d=this.state.formattedGraphicalItems.find((function(t){return"Scatter"===t.item.type.name}));d&&(h=cOt(cOt({},h),d.props.points[a].tooltipPosition),c=d.props.points[a].tooltipPayload);var p={activeTooltipIndex:a,isTooltipActive:!0,activeLabel:s,activePayload:c,activeCoordinate:h};this.setState(p),this.renderCursor(o),this.accessibilityManager.setIndex(a)}}}},{key:"getSnapshotBeforeUpdate",value:function(t,e){return this.props.accessibilityLayer?(this.state.tooltipTicks!==e.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==t.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==t.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}}),null):null;var n,r}},{key:"componentDidUpdate",value:function(t){Jmt([qmt(t.children,hyt)],[qmt(this.props.children,hyt)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var t=qmt(this.props.children,hyt);if(t&&"boolean"===typeof t.props.shared){var e=t.props.shared?"axis":"item";return s.indexOf(e)>=0?e:o}return o}},{key:"getMouseInfo",value:function(t){if(!this.container)return null;var e,n=this.container,r=n.getBoundingClientRect(),i={top:(e=r).top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft},o={chartX:Math.round(t.pageX-i.left),chartY:Math.round(t.pageY-i.top)},a=r.width/n.offsetWidth||1,s=this.inRange(o.chartX,o.chartY,a);if(!s)return null;var c=this.state,l=c.xAxisMap,u=c.yAxisMap;if("axis"!==this.getTooltipEventType()&&l&&u){var h=bmt(l).scale,d=bmt(u).scale,p=h&&h.invert?h.invert(o.chartX):null,f=d&&d.invert?d.invert(o.chartY):null;return cOt(cOt({},o),{},{xValue:p,yValue:f})}var m=vOt(this.state,this.props.data,this.props.layout,s);return m?cOt(cOt({},o),m):null}},{key:"inRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.props.layout,i=t/n,o=e/n;if("horizontal"===r||"vertical"===r){var a=this.state.offset;return i>=a.left&&i<=a.left+a.width&&o>=a.top&&o<=a.top+a.height?{x:i,y:o}:null}var s=this.state,c=s.angleAxisMap,l=s.radiusAxisMap;if(c&&l){var u=bmt(c);return eTt({x:i,y:o},u)}return null}},{key:"parseEventsOfWrapper",value:function(){var t=this.props.children,e=this.getTooltipEventType(),n=qmt(t,hyt),r={};return n&&"axis"===e&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd}),cOt(cOt({},Dmt(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){WAt.on(HAt,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){WAt.removeListener(HAt,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(t,e,n){for(var r=this.state.formattedGraphicalItems,i=0,o=r.length;i<o;i++){var a=r[i];if(a.item===t||a.props.key===t.key||e===zmt(a.item.type)&&n===a.childIndex)return a}return null}},{key:"renderClipPath",value:function(){var t=this.clipPathId,e=this.state.offset,n=e.left,r=e.top,i=e.height,o=e.width;return k.createElement("defs",null,k.createElement("clipPath",{id:t},k.createElement("rect",{x:n,y:r,height:i,width:o})))}},{key:"getXScales",value:function(){var t=this.state.xAxisMap;return t?Object.entries(t).reduce((function(t,e){var n=ZMt(e,2),r=n[0],i=n[1];return cOt(cOt({},t),{},lOt({},r,i.scale))}),{}):null}},{key:"getYScales",value:function(){var t=this.state.yAxisMap;return t?Object.entries(t).reduce((function(t,e){var n=ZMt(e,2),r=n[0],i=n[1];return cOt(cOt({},t),{},lOt({},r,i.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(t){var e;return null===(e=this.state.xAxisMap)||void 0===e||null===(e=e[t])||void 0===e?void 0:e.scale}},{key:"getYScaleByAxisId",value:function(t){var e;return null===(e=this.state.yAxisMap)||void 0===e||null===(e=e[t])||void 0===e?void 0:e.scale}},{key:"getItemByXY",value:function(t){var e=this.state,n=e.formattedGraphicalItems,r=e.activeItem;if(n&&n.length)for(var i=0,o=n.length;i<o;i++){var a=n[i],s=a.props,c=a.item,l=zmt(c.type);if("Bar"===l){var u=(s.data||[]).find((function(e){return g_t(t,e)}));if(u)return{graphicalItem:a,payload:u}}else if("RadialBar"===l){var h=(s.data||[]).find((function(e){return eTt(t,e)}));if(h)return{graphicalItem:a,payload:h}}else if(gEt(a,r)||yEt(a,r)||vEt(a,r)){var d=wEt({graphicalItem:a,activeTooltipItem:r,itemData:c.props.data}),p=void 0===c.props.activeIndex?d:c.props.activeIndex;return{graphicalItem:cOt(cOt({},a),{},{childIndex:p}),payload:vEt(a,r)?c.props.data[d]:a.props.data[d]}}}return null}},{key:"render",value:function(){var t=this;if(!Xmt(this))return null;var e,n,r=this.props,i=r.children,o=r.className,a=r.width,s=r.height,c=r.style,l=r.compact,u=r.title,h=r.desc,d=JMt(r,XMt),p=Zmt(d,!1);if(l)return k.createElement(_At,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},k.createElement(vgt,KMt({},p,{width:a,height:s,title:u,desc:h}),this.renderClipPath(),Qmt(i,this.renderMap)));this.props.accessibilityLayer&&(p.tabIndex=null!==(e=this.props.tabIndex)&&void 0!==e?e:0,p.role=null!==(n=this.props.role)&&void 0!==n?n:"application",p.onKeyDown=function(e){t.accessibilityManager.keyboardEvent(e)},p.onFocus=function(){t.accessibilityManager.focus()});var f=this.parseEventsOfWrapper();return k.createElement(_At,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},k.createElement("div",KMt({className:tmt("recharts-wrapper",o),style:cOt({position:"relative",cursor:"default",width:a,height:s},c)},f,{ref:function(e){t.container=e}}),k.createElement(vgt,KMt({},p,{width:a,height:s,title:u,desc:h,style:dOt}),this.renderClipPath(),Qmt(i,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],i&&$Mt(r.prototype,i),a&&$Mt(r,a),Object.defineProperty(r,"prototype",{writable:!1}),e}(k.Component),lOt(e,"displayName",n),lOt(e,"defaultProps",cOt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),lOt(e,"getDerivedStateFromProps",(function(t,e){var n=t.dataKey,r=t.data,i=t.children,o=t.width,a=t.height,s=t.layout,c=t.stackOffset,l=t.margin,u=e.dataStartIndex,h=e.dataEndIndex;if(void 0===e.updateId){var d=_Ot(t);return cOt(cOt(cOt({},d),{},{updateId:0},p(cOt(cOt({props:t},d),{},{updateId:0}),e)),{},{prevDataKey:n,prevData:r,prevWidth:o,prevHeight:a,prevLayout:s,prevStackOffset:c,prevMargin:l,prevChildren:i})}if(n!==e.prevDataKey||r!==e.prevData||o!==e.prevWidth||a!==e.prevHeight||s!==e.prevLayout||c!==e.prevStackOffset||!Cmt(l,e.prevMargin)){var f=_Ot(t),m={chartX:e.chartX,chartY:e.chartY,isTooltipActive:e.isTooltipActive},g=cOt(cOt({},vOt(e,r,s)),{},{updateId:e.updateId+1}),y=cOt(cOt(cOt({},f),m),g);return cOt(cOt(cOt({},y),p(cOt({props:t},y),e)),{},{prevDataKey:n,prevData:r,prevWidth:o,prevHeight:a,prevLayout:s,prevStackOffset:c,prevMargin:l,prevChildren:i})}if(!Jmt(i,e.prevChildren)){var v,b,x,_,w=qmt(i,HSt),S=w&&null!==(v=null===(b=w.props)||void 0===b?void 0:b.startIndex)&&void 0!==v?v:u,T=w&&null!==(x=null===(_=w.props)||void 0===_?void 0:_.endIndex)&&void 0!==x?x:h,E=S!==u||T!==h,A=!Tmt()(r)&&!E?e.updateId:e.updateId+1;return cOt(cOt({updateId:A},p(cOt(cOt({props:t},e),{},{updateId:A,dataStartIndex:S,dataEndIndex:T}),e)),{},{prevChildren:i,dataStartIndex:S,dataEndIndex:T})}return null})),lOt(e,"renderActiveDot",(function(t,e){var n;return n=(0,k.isValidElement)(t)?(0,k.cloneElement)(t,e):Amt()(t)?t(e):k.createElement(Gvt,e),k.createElement(wgt,{className:"recharts-active-dot",key:e.key},n)})),e}({chartName:"BarChart",GraphicalChild:XEt,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:KOt},{axisType:"yAxis",AxisComp:JOt}],formatAxisMap:function(t,e,n,r,i){var o=t.width,a=t.height,s=t.layout,c=t.children,l=Object.keys(e),u={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:a-n.bottom,bottomMirror:a-n.bottom},h=!!qmt(c,XEt);return l.reduce((function(o,a){var c,l,d,p,f,m=e[a],g=m.orientation,y=m.domain,v=m.padding,b=void 0===v?{}:v,x=m.mirror,_=m.reversed,w="".concat(g).concat(x?"Mirror":"");if("number"===m.type&&("gap"===m.padding||"no-gap"===m.padding)){var S=y[1]-y[0],T=1/0,E=m.categoricalDomain.sort();if(E.forEach((function(t,e){e>0&&(T=Math.min((t||0)-(E[e-1]||0),T))})),Number.isFinite(T)){var A=T/S,M="vertical"===m.layout?n.height:n.width;if("gap"===m.padding&&(c=A*M/2),"no-gap"===m.padding){var C=vmt(t.barCategoryGap,A*M),k=A*M/2;c=k-C-(k-C)/M*C}}}l="xAxis"===r?[n.left+(b.left||0)+(c||0),n.left+n.width-(b.right||0)-(c||0)]:"yAxis"===r?"horizontal"===s?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(c||0),n.top+n.height-(b.bottom||0)-(c||0)]:m.range,_&&(l=[l[1],l[0]]);var P=function(t,e,n){var r=t.scale,i=t.type,o=t.layout,a=t.axisType;if("auto"===r)return"radial"===o&&"radiusAxis"===a?{scale:sN(),realScaleType:"band"}:"radial"===o&&"angleAxis"===a?{scale:rR(),realScaleType:"linear"}:"category"===i&&e&&(e.indexOf("LineChart")>=0||e.indexOf("AreaChart")>=0||e.indexOf("ComposedChart")>=0&&!n)?{scale:lN(),realScaleType:"point"}:"category"===i?{scale:sN(),realScaleType:"band"}:{scale:rR(),realScaleType:"linear"};if(omt()(r)){var s="scale".concat(pyt()(r));return{scale:(O[s]||lN)(),realScaleType:O[s]?s:"point"}}return Amt()(r)?{scale:r}:{scale:lN(),realScaleType:"point"}}(m,i,h),I=P.scale,N=P.realScaleType;I.domain(y).range(l),function(t){var e=t.domain();if(e&&!(e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-gSt,o=Math.max(r[0],r[1])+gSt,a=t(e[0]),s=t(e[n-1]);(a<i||a>o||s<i||s>o)&&t.domain([e[0],e[n-1]])}}(I);var R=function(t,e){var n=e.realScaleType,r=e.type,i=e.tickCount,o=e.originalDomain,a=e.allowDecimals,s=n||e.scale;if("auto"!==s&&"linear"!==s)return null;if(i&&"number"===r&&o&&("auto"===o[0]||"auto"===o[1])){var c=t.domain();if(!c.length)return null;var l=Vwt(c,i,a);return t.domain([uwt()(l),cwt()(l)]),{niceTicks:l}}if(i&&"number"===r){var u=t.domain();return{niceTicks:Gwt(u,i,a)}}return null}(I,JEt(JEt({},m),{},{realScaleType:N}));"xAxis"===r?(f="top"===g&&!x||"bottom"===g&&x,d=n.left,p=u[w]-f*m.height):"yAxis"===r&&(f="left"===g&&!x||"right"===g&&x,d=u[w]-f*m.width,p=n.top);var D=JEt(JEt(JEt({},m),R),{},{realScaleType:N,x:d,y:p,scale:I,width:"xAxis"===r?n.width:m.width,height:"yAxis"===r?n.height:m.height});return D.bandSize=TSt(D,R),m.hide||"xAxis"!==r?m.hide||(u[w]+=(f?-1:1)*D.width):u[w]+=(f?-1:1)*D.height,JEt(JEt({},o),{},$Et({},a,D))}),{})}});Nst.allowLocalModels=!1;const QOt={DropdownIndicator:null},tCt=t=>({label:t,value:t}),eCt=[{inputText:"The protein molecules folded into complex shapes.",labels:["Science","Technology","Art","History"]},{inputText:"The guitarist played a melancholic tune on his instrument.",labels:["Music","Sports","Travel","Politics"]},{inputText:"She baked a delicious chocolate cake from scratch.",labels:["Food","Fashion","Business","Education"]},{inputText:"The athlete trained rigorously for the upcoming marathon.",labels:["Sports","Medicine","Technology","Entertainment"]},{inputText:"The Louvre museum houses a vast collection of art masterpieces.",labels:["Art","History","Science","Travel"]},{inputText:"The company announced a new line of eco-friendly products.",labels:["Business","Technology","Fashion","Environment"]},{inputText:"The documentary explored the life of a marine biologist.",labels:["Science","Education","Entertainment","Travel"]},{inputText:"The upcoming election has generated a lot of political debate.",labels:["Politics","Business","Technology","Social Media"]},{inputText:"The fashion show showcased the latest trends in clothing design.",labels:["Fashion","Entertainment","Art","Business"]},{inputText:"The hospital implemented new protocols to improve patient care.",labels:["Medicine","Education","Technology","Social Media"]}],nCt=()=>{const[t,e]=(0,k.useState)(""),[n,r]=(0,k.useState)([]),[i,o]=(0,k.useState)(""),[a,s]=(0,k.useState)(null),[c,l]=(0,k.useState)(null);(0,k.useEffect)((()=>{(async()=>{const t=await $ft("zero-shot-classification","Xenova/mobilebert-uncased-mnli");l((()=>t))})()}),[]);return(0,Ln.jsxs)("div",{className:"container mx-auto p-4 flex flex-col items-center text-center",children:[(0,Ln.jsxs)("p",{className:"mb-4 w-2/3",children:["This page provide zero-shot text classification using a model embedded directly in browser. Zero-shot classification allows you to provide an input text and a set of candidate categories, and the model will return the most likely category for the input text.",(0,Ln.jsx)("br",{}),"Enter the text you want to classify and add labels:"]}),(0,Ln.jsxs)("div",{className:"flex mb-4 w-1/2",children:[(0,Ln.jsx)("textarea",{className:"textarea textarea-bordered w-full mt-1",rows:4,value:i,onChange:t=>o(t.target.value),placeholder:"Type your text here..."}),(0,Ln.jsxs)("div",{className:"ml-4 flex flex-col space-y-2",children:[(0,Ln.jsx)("button",{className:"btn",onClick:()=>{o("The restaurant had a cozy atmosphere and the food was delicious, even though the service was a little bit slow."),r([tCt("positive"),tCt("neutral"),tCt("negative")])},children:"Example 1 (sentiment analysis)"}),(0,Ln.jsx)("button",{className:"btn",onClick:()=>{const t=eCt[Math.floor(Math.random()*eCt.length)];o(t.inputText),r([]),t.labels.forEach((t=>{r((e=>[...e,tCt(t)]))}))},children:"Random Example"})]})]}),(0,Ln.jsxs)("div",{className:"mb-4 w-1/2",children:[(0,Ln.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Labels"}),(0,Ln.jsx)(Zat,{components:QOt,inputValue:t,isClearable:!0,isMulti:!0,menuIsOpen:!1,onChange:t=>r(t),onInputChange:t=>e(t),onKeyDown:n=>{if(t)switch(n.key){case"Enter":case"Tab":r((e=>[...e,tCt(t)])),e(""),n.preventDefault()}},placeholder:"Type and press enter to add candidate label...",value:n,className:"w-full"})]}),(0,Ln.jsx)("button",{className:"btn border-green-200",onClick:async()=>{if(!c)return void alert("Model is still loading, please wait...");if(!i||!n)return void alert("Please enter text and labels");const t=n.map((t=>t.value)),e=await c(i,t);s(e)},children:"Classify"}),a&&(0,Ln.jsxs)("div",{className:"mt-4 w-1/3",children:[(0,Ln.jsx)("h2",{className:"text-xl font-bold mt-8",children:"Classification Results"}),(0,Ln.jsx)(sgt,{width:"100%",height:300,children:(0,Ln.jsxs)($Ot,{data:a.labels.map(((t,e)=>({label:t,score:a.scores[e]}))),margin:{top:10,right:30,left:20,bottom:5},children:[(0,Ln.jsx)(KOt,{dataKey:"label"}),(0,Ln.jsx)(hyt,{}),(0,Ln.jsx)(XEt,{dataKey:"score",fill:"#cbd5e1"})]})})]})]})},rCt=t=>{let{children:e,value:n,index:r}=t;return(0,Ln.jsx)("div",{role:"tabpanel",hidden:n!==r,id:"scrollable-auto-tabpanel-".concat(r),"aria-labelledby":"scrollable-auto-tab-".concat(r),children:n===r&&(0,Ln.jsx)("div",{className:"p-3",children:e})})},iCt=t=>{let{navBarHeight:e}=t;const[n,r]=(0,k.useState)(0),i=t=>{r(t)};return(0,Ln.jsxs)("div",{className:"w-full h-full bg-gray-800",style:{paddingTop:e},children:[(0,Ln.jsx)("div",{className:"w-full relative",children:(0,Ln.jsxs)("nav",{className:"flex justify-center",children:[(0,Ln.jsx)("button",{className:"px-4 py-2 focus:outline-none ".concat(0===n?"border-b":"border-b border-slate-500"),onClick:()=>i(0),children:"Zero shot classification"}),(0,Ln.jsx)("button",{className:"px-4 py-2 focus:outline-none ".concat(1===n?"border-b":"border-b border-slate-500"),onClick:()=>i(1),children:"NLP2"})]})}),(0,Ln.jsxs)("div",{className:"p-4",children:[(0,Ln.jsx)(rCt,{value:n,index:0,children:(0,Ln.jsx)(nCt,{})}),(0,Ln.jsx)(rCt,{value:n,index:1,children:(0,Ln.jsx)("div",{children:"test2"})})]})]})};const oCt=function(){const[t,e]=(0,k.useState)(0);return(0,Ln.jsx)("div",{className:"app-container",children:(0,Ln.jsxs)(Kt,{children:[(0,Ln.jsx)(Fn,{setNavBarHeight:e}),(0,Ln.jsxs)(Gt,{children:[(0,Ln.jsx)(zt,{path:"/",element:(0,Ln.jsx)(iC,{})}),(0,Ln.jsx)(zt,{path:"/resume",element:(0,Ln.jsx)(lC,{navBarHeight:t})}),(0,Ln.jsx)(zt,{path:"/projects/dataviz",element:(0,Ln.jsx)(cj,{navBarHeight:t})}),(0,Ln.jsx)(zt,{path:"/projects/computervision",element:(0,Ln.jsx)(wnt,{navBarHeight:t})}),(0,Ln.jsx)(zt,{path:"/projects/nlp",element:(0,Ln.jsx)(iCt,{navBarHeight:t})})]})]})})},aCt=t=>{t&&t instanceof Function&&__webpack_require__.e(453).then(__webpack_require__.bind(__webpack_require__,6453)).then((e=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:a}=e;n(t),r(t),i(t),o(t),a(t)}))};I.createRoot(document.getElementById("root")).render((0,Ln.jsx)(k.StrictMode,{children:(0,Ln.jsx)(oCt,{})})),aCt()})()})();
//# sourceMappingURL=main.cc3fef6e.js.map